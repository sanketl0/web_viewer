/*!
 * 
 *   @panoramax/web-viewer v3.2.3
 *   https://gitlab.com/panoramax/clients/web-viewer
 *
 *   Copyright (c) Panoramax team
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(F,Da){"object"===typeof exports&&"object"===typeof module?module.exports=Da():"function"===typeof define&&define.amd?define("Panoramax",[],Da):"object"===typeof exports?exports.Panoramax=Da():F.Panoramax=Da()}(this,(()=>(()=>{var F={9555:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>Editor});ll(980);var cl=ll(6803),hl=ll(1951),dl=ll(8489),pl=ll(7534),fl=ll(6810),Al=ll(5071),bl=ll(1300),kl=ll(1545);const Dl="sequence-headings";class Editor extends cl.A{constructor(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(F,Da,Object.assign(ll,{users:[]})),this._selectedSeqId||this._loader.dismiss({},"No sequence is selected"),this.psvContainer=document.createElement("div"),this.mapContainer=document.createElement("div"),this.container.appendChild(this.psvContainer),this.container.appendChild(this.mapContainer);try{this.psv=new dl.Ay(this,this.psvContainer),this.psv._myVTour.datasource.nodeResolver=this._getNode.bind(this)}catch(cl){let F=kl.IJ.isWebGLSupported?this._t.gvs.error_psv:this._t.gvs.error_webgl;this._loader.dismiss(cl,F)}this._api.onceReady().then((()=>{try{this.map=new hl.A(this,this.mapContainer,{raster:ll.raster,background:ll.background,supplementaryStyle:this._createMapStyle(),zoom:15}),(0,Al.I0)(this),this._loadSequence(),this.map.once("load",(()=>{ll.raster&&this._addMapBackgroundWidget(),this._bindPicturesEvents()}));const F=this.map._picMarker.setRotation.bind(this.map._picMarker);this.map._picMarker.setRotation=Da=>(Da=void 0===this._lastRelHeading?Da:Da+this._lastRelHeading-this.psv.getPictureRelativeHeading(),F(Da))}catch(cl){this._loader.dismiss(cl,this._t.gvs.error_psv)}})),this.addEventListener("select",this._onSelect.bind(this))}getClassName(){return"Editor"}_createMapStyle(){return{sources:{geovisio_editor_sequences:{type:"geojson",data:{type:"FeatureCollection",features:[]}}},layers:[{id:"geovisio_editor_sequences",type:"line",source:"geovisio_editor_sequences",layout:{...bl.VM.SEQUENCES.layout},paint:{...bl.VM.SEQUENCES.paint}},{id:"geovisio_editor_pictures",type:"circle",source:"geovisio_editor_sequences",layout:{...bl.VM.PICTURES.layout},paint:{...bl.VM.PICTURES.paint}}]}}_bindPicturesEvents(){this.map.on("mousemove","geovisio_editor_pictures",(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","geovisio_editor_pictures",(()=>{this.map.getCanvas().style.cursor=""})),this.map.on("click","geovisio_editor_pictures",this.map._onPictureClick.bind(this.map))}_loadSequence(){return this._api.getSequenceItems(this._selectedSeqId).then((F=>{if(this.map.once("sourcedata",(()=>{this.map.setPaintProperty("geovisio_editor_sequences","line-color",this.map._getLayerColorStyle("sequences")),this.map.setPaintProperty("geovisio_editor_pictures","circle-color",this.map._getLayerColorStyle("pictures")),this.map.setLayoutProperty("geovisio_editor_sequences","visibility","visible"),this.map.setLayoutProperty("geovisio_editor_pictures","visibility","visible"),this.map.once("styledata",(()=>this._loader.dismiss()))})),this._sequenceData=F.features,this.map.getSource("geovisio_editor_sequences").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{id:this._selectedSeqId},geometry:{type:"LineString",coordinates:F.features.map((F=>F.geometry.coordinates))}},...F.features.map((F=>(F.properties.id=F.id,F.properties.sequences=[this._selectedSeqId],F)))]}),this._selectedPicId){const Da=F.features.find((F=>F.id===this._selectedPicId));Da?(this.select(this._selectedSeqId,this._selectedPicId,!0),this.map.jumpTo({center:Da.geometry.coordinates,zoom:18})):console.log("Picture with ID",Da,"was not found")}else{const Da=[...F.features[0].geometry.coordinates,...F.features[0].geometry.coordinates];for(let ll=1;ll<F.features.length;ll++){const cl=F.features[ll].geometry.coordinates;cl[0]<Da[0]&&(Da[0]=cl[0]),cl[1]<Da[1]&&(Da[1]=cl[1]),cl[0]>Da[2]&&(Da[2]=cl[0]),cl[1]>Da[3]&&(Da[3]=cl[1])}this.map.fitBounds(Da,{animate:!1})}})).catch((F=>this._loader.dismiss(F,this._t.gvs.error_api)))}_getNode(F){const Da=this._sequenceData.find((Da=>Da.properties.id===F)),ll=Da?(0,Al.rs)(Da,this._t,this._isInternetFast):null;return ll&&delete ll.links,ll}_addMapBackgroundWidget(){const F=document.createElement("div");F.id="gvs-map-bg",F.classList.add("gvs-panel","gvs-widget-bg","gvs-input-group");const onBgChange=F=>this.map.setBackground(F.target.value),Da=document.createElement("input");Da.id="gvs-map-bg-streets",Da.setAttribute("type","radio"),Da.setAttribute("name","gvs-map-bg"),Da.setAttribute("value","streets"),Da.addEventListener("change",onBgChange),F.appendChild(Da);const ll=document.createElement("label");ll.setAttribute("for",Da.id);const cl=document.createElement("img");cl.src=fl,cl.alt="",ll.appendChild(cl),ll.appendChild(document.createTextNode(this._t.gvs.map_background_streets)),F.appendChild(ll);const hl=document.createElement("input");hl.id="gvs-map-bg-aerial",hl.setAttribute("type","radio"),hl.setAttribute("name","gvs-map-bg"),hl.setAttribute("value","aerial"),hl.addEventListener("change",onBgChange),F.appendChild(hl);const dl=document.createElement("label");dl.setAttribute("for",hl.id);const Al=document.createElement("img");Al.src=pl,Al.alt="",dl.appendChild(Al),dl.appendChild(document.createTextNode(this._t.gvs.map_background_aerial)),F.appendChild(dl),this.mapContainer.appendChild(F);const onMapBgChange=F=>{"aerial"===F?hl.checked=!0:Da.checked=!0};this.addEventListener("map:background-changed",(F=>onMapBgChange(F.detail.background))),onMapBgChange(this.map.getBackground())}previewSequenceHeadingChange(F){const Da=void 0!==this.map.getLayer(Dl);if(this.map._picMarkerPreview.remove(),void 0===F)return delete this._lastRelHeading,Da&&this.map.setLayoutProperty(Dl,"visibility","none"),void(this._selectedPicId&&this.map._picMarker.setRotation(this.psv.getXY().x));this._lastRelHeading=F,Da||this.map.addLayer({id:Dl,type:"symbol",source:"geovisio_editor_sequences",layout:{"icon-image":"gvs-marker","icon-overlap":"always","icon-size":.8}});const ll=-this.psv.getPictureRelativeHeading();this.map.setLayoutProperty(Dl,"visibility","visible"),this.map.setLayoutProperty(Dl,"icon-rotate",["+",["get","view:azimuth"],ll,F]);const cl=[["==",["geometry-type"],"Point"]];this._selectedPicId&&cl.push(["!=",["get","id"],this._selectedPicId]),this.map.setFilter(Dl,["all",...cl]),this._selectedPicId&&this.map._picMarker.setRotation(this.psv.getXY().x)}_onSelect(){void 0!==this._lastRelHeading&&this.previewSequenceHeadingChange(this._lastRelHeading)}}},7531:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>fl});var cl=ll(6803),hl=ll(1951),dl=ll(1300),pl=ll(927);class StandaloneMap extends cl.A{constructor(F,Da){super(F,Da,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.mapContainer=document.createElement("div"),this.container.appendChild(this.mapContainer),this._api.onceReady().then((()=>this._initMap())),this.addEventListener("map:picture-click",(F=>this.select(F.detail.seqId,F.detail.picId))),this.addEventListener("map:sequence-click",(F=>this.select(F.detail.seqId))),this.addEventListener("select",this._onSelect.bind(this))}getClassName(){return"Map"}destroy(){super.destroy(),this.map.destroy(),delete this.map,this.mapContainer.remove(),this.container.innerHTML="",this.container.classList.remove(...[...this.container.classList].filter((F=>F.startsWith("gvs"))))}_initMap(){this._options.hash=!0;class MyMap extends hl.A{_getLayerStyleProperties(F){return"pictures_symbols"===F?{layout:{visibility:"none"}}:super._getLayerStyleProperties(F)}}this.map=new MyMap(this,this.mapContainer,this._options),this.map.addControl(new pl.NavigationControl({showCompass:!1})),this.map.waitForEnoughMapLoaded().then((()=>{this.map.reloadLayersStyles(),this._loader.dismiss()}))}_onSelect(F){if(F.detail.picId||F.detail.seqId){const Da=F.detail.picId?"pictures":"sequences",ll=this.map.queryRenderedFeatures({layers:[...this.map._userLayers].map((F=>(0,dl.IN)(F,Da))),filter:["==",["get","id"],F.detail.picId||F.detail.seqId]});ll.length>=0&&null!=ll[0]&&this.map._attachPreviewToPictures({features:ll},Da)}}}const fl=StandaloneMap},2968:(F,Da,ll)=>{"use strict";ll.d(Da,{$p:()=>Ql,Ay:()=>Viewer,LM:()=>Al.LM,Vf:()=>Al.Vf});ll(2101);var cl=ll(1545),hl=ll(490),dl=ll(9194),pl=ll(5071),fl=ll(6803),Al=ll(8489),bl=ll(1951),kl=ll(1300),Dl=ll(4683),Wl=ll(6627);const Ql=20,wc=Math.PI/6,Sc=100,eu="http://127.0.0.1:8111",iu={DEFAULT:"default",AGE:"age",TYPE:"type",SCORE:"score"};class Viewer extends fl.A{constructor(F,Da){var ll;let pl,fl=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(super(F,Da,fl),null==this._options.map&&(this._options.map={}),null==this._options.widgets&&(this._options.widgets={}),this._sequencePlaying=!1,this._prevSequence=null,this._mapTheme=(null===fl||void 0===fl||null===(ll=fl.map)||void 0===ll?void 0:ll.theme)||iu.DEFAULT,this._picNav=(null===fl||void 0===fl?void 0:fl.picturesNavigation)||"any",this._options.testing)return;if(!0===this._options.hash||void 0===this._options.hash){if(this._hash=new dl.A(this),pl=this._hash._getCurrentHash(),"none"===pl.map&&(this._options.map=!1),"object"===typeof this._options.map&&(this._options.map.hash=!1),this._options.map&&pl.focus&&(this._options.map.startWide="map"===pl.focus),this._options.map&&pl.background&&(this._options.map.background=pl.background),this._options.map&&pl.users&&(this._options.users=[...new Set(pl.users.split(","))]),pl.xyz){const F=this._hash.getXyzOptionsFromHashString(pl.xyz);this.addEventListener("psv:picture-loaded",(()=>{this.psv.setXYZ(F.x,F.y,F.z)}),{once:!0})}if(this._options.map&&"string"===typeof pl.map){const F=this._hash.getMapOptionsFromHashString(pl.map);F&&(this._options.map=Object.assign({},this._options.map,F))}if(this._options.map&&this.setFilters(this._hash.getMapFiltersFromHashVals(pl),!0),pl.pic){const F=pl.pic.split(";");F.length>1&&console.warn("Multiple picture IDs passed in URL, only first one kept"),this._options.selectedPicture=F[0]}"string"===typeof pl.speed&&(this._options.transition=parseInt(pl.speed)),pl.nav&&(this._picNav=pl.nav)}this._initContainerStructure();try{this.psv=new Al.Ay(this,this.psvContainer,{transitionDuration:this._options.transition,shouldGoFast:this._psvShouldGoFast.bind(this),keyboard:"always",keyboardActions:{...cl.zY.keyboardActions,8:"ROTATE_UP",2:"ROTATE_DOWN",4:"ROTATE_LEFT",6:"ROTATE_RIGHT",PageUp:()=>this.psv.goToNextPicture(),9:()=>this.psv.goToNextPicture(),PageDown:()=>this.psv.goToPrevPicture(),3:()=>this.psv.goToPrevPicture(),5:()=>this.moveCenter(),"*":()=>this.moveCenter(),Home:()=>this.toggleFocus(),7:()=>this.toggleFocus(),End:()=>this.toggleUnfocusedVisible(),1:()=>this.toggleUnfocusedVisible()," ":()=>this.toggleSequencePlaying(),0:()=>this.toggleSequencePlaying()}}),this.psv.addEventListener("dblclick",(()=>{this.map&&this.isMapWide()&&this.setFocus("pic")}))}catch(bl){let F=cl.IJ.isWebGLSupported?this._t.gvs.error_psv:this._t.gvs.error_webgl;this._loader.dismiss(bl,F)}const onceStuffReady=()=>{this._widgets=new hl.A(this,this._options.widgets),this.map&&!this._options.selectedPicture&&this.setUnfocusedVisible(!1),this._options.selectedPicture?(this.select(null,this._options.selectedPicture,!0),this.addEventListener("psv:picture-loaded",(()=>{var F,Da,ll,cl,hl;!this._selectedSeqId&&null!==(F=this.psv)&&void 0!==F&&null!==(Da=F._myVTour)&&void 0!==Da&&null!==(ll=Da.getCurrentNode())&&void 0!==ll&&null!==(cl=ll.sequence)&&void 0!==cl&&cl.id&&this.select(this.psv._myVTour.getCurrentNode().sequence.id,this._options.selectedPicture),this.map&&this._options.map&&this.map.jumpTo(this._options.map),"meta"===(null===(hl=pl)||void 0===hl?void 0:hl.focus)&&this._widgets._showPictureMetadataPopup(),this._loader.dismiss()}),{once:!0})):this._loader.dismiss(),this._options.position&&this.goToPosition(...this._options.position).catch((F=>this._loader.dismiss(F,this._t.gvs.error_nopic))),this._hash&&this.map&&(this.map._attribution._container.classList.add("gvs-hidden"),this._hash.bindMapEvents(),this._mapFilters&&this.setFilters(this._mapFilters,!0),pl.users&&Promise.all(this.map.getVisibleUsers().filter((F=>"geovisio"!=F)).map((F=>this._api.getUserName(F)))).then((F=>{F=F.filter((F=>null!=F)).join(", ");const Da=document.getElementById("gvs-filter-search-user").querySelector("input");Da&&(Da.setItem(F),Da.parentNode.classList.add("gvs-filter-active"))})).catch((F=>console.warn("Error when looking up for user names",F)))),document.addEventListener("keyup",(F=>{"Escape"!==F.key||this.popupContainer.classList.contains("gvs-hidden")||this.setPopup(!1)}))};this._api.onceReady().then((()=>{this._options.map?(void 0===this._options.map.doubleClickZoom&&(this._options.map.doubleClickZoom=!1),this._initMap().then(onceStuffReady).catch((F=>this._loader.dismiss(F,this._t.gvs.error_api_compatibility)))):onceStuffReady()}))}getClassName(){return"Viewer"}destroy(){super.destroy(),this._widgets.destroy(),delete this._widgets,this._hash.destroy(),delete this._hash,this.map&&this.map.destroy(),delete this.map,delete this._mapFilters,this.psv.destroy(),delete this.psv,this.miniContainer.remove(),this.mainContainer.remove(),this.mapContainer.remove(),this.psvContainer.remove(),this.popupContainer.remove(),this.container.innerHTML="",this.container.classList.remove(...[...this.container.classList].filter((F=>F.startsWith("gvs"))))}_initContainerStructure(){this.miniContainer=document.createElement("div"),this.miniContainer.classList.add("gvs-mini"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("gvs-main"),this.popupContainer=document.createElement("div"),this.popupContainer.classList.add("gvs-popup","gvs-hidden"),this.psvContainer=document.createElement("div"),this.mainContainer.appendChild(this.psvContainer),this.mapContainer=document.createElement("div"),this.miniContainer.appendChild(this.mapContainer),this.container.appendChild(this.mainContainer),this.container.appendChild(this.miniContainer),this.container.appendChild(this.popupContainer)}async _initMap(){await new Promise((F=>{this.map=new bl.A(this,this.mapContainer,this._options.map),this.map._getLayerColorStyle=this._getLayerColorStyle.bind(this),this.map._getLayerSortStyle=this._getLayerSortStyle.bind(this),this.addEventListener("map:users-changed",F,{once:!0}),this.container.classList.add("gvs-has-mini"),this.map.on("dblclick",(()=>{this.isMapWide()?this.select():this.setFocus("map")})),"object"===typeof this._options.map&&this._options.map.startWide?this.setFocus("map",!0):this.setFocus("pic",!0)})),this._initMapKeyboardHandler(),(0,pl.I0)(this)}_initMapKeyboardHandler(){const F=this;this.map.keyboard.keydown=function(Da){if(Da.altKey||Da.ctrlKey||Da.metaKey)return;switch(Da.key){case"*":case"5":return void F.moveCenter();case"PageUp":case"9":return void F.psv.goToNextPicture();case"PageDown":case"3":return void F.psv.goToPrevPicture();case"Home":case"7":return Da.stopPropagation(),void F.toggleFocus();case"End":case"1":return void F.toggleUnfocusedVisible();case" ":case"0":return void F.toggleSequencePlaying()}let ll=0,cl=0,hl=0,dl=0,pl=0;switch(Da.keyCode){case 61:case 107:case 171:case 187:ll=1;break;case 189:case 109:case 173:ll=-1;break;case 37:case 100:Da.shiftKey?cl=-1:(Da.preventDefault(),dl=-1);break;case 39:case 102:Da.shiftKey?cl=1:(Da.preventDefault(),dl=1);break;case 38:case 104:Da.shiftKey?hl=1:(Da.preventDefault(),pl=-1);break;case 40:case 98:Da.shiftKey?hl=-1:(Da.preventDefault(),pl=1);break;default:return}return this._rotationDisabled&&(cl=0,hl=0),{cameraAnimation:F=>{const fl=this._tr;F.easeTo({duration:300,easeId:"keyboardHandler",easing:F=>F*(2-F),zoom:ll?Math.round(fl.zoom)+ll*(Da.shiftKey?2:1):fl.zoom,bearing:fl.bearing+cl*this._bearingStep,pitch:fl.pitch+hl*this._pitchStep,offset:[-dl*this._panStep,-pl*this._panStep],center:fl.center},{originalEvent:Da})}}}.bind(this.map.keyboard)}_psvShouldGoFast(){return this._sequencePlaying&&this.psv.getTransitionDuration()<1e3||this.map&&this.isMapWide()}refreshPSV(){var F;const Da=this.psv._myVTour.getCurrentNode();if(Da&&Da.panorama.baseUrl!==(null===Da||void 0===Da||null===(F=Da.panorama)||void 0===F?void 0:F.origBaseUrl)){const F=this.psv.getZoomLevel(),ll=this.psv.getPosition();this.psv._myVTour.state.currentNode=null,this.psv._myVTour.setCurrentNode(Da.id,{zoomTo:F,rotateTo:ll,fadeIn:!1,speed:0,rotation:!1})}Da&&Da.panorama.rows>1&&this.psv.adapter.__refresh()}setPopup(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(F)if(Da){this.psv.stopKeyboardControl(),this.popupContainer.innerHTML="";const F=document.createElement("div");F.classList.add("gvs-popup-backdrop"),F.addEventListener("click",(()=>this.setPopup(!1)));const ll=document.createElement("div");ll.classList.add("gvs-widget-bg"),"string"===typeof Da?ll.innerHTML=Da:Array.isArray(Da)&&Da.forEach((F=>ll.appendChild(F)));const cl=document.createElement("button");cl.id="gvs-popup-btn-close",cl.classList.add("gvs-btn","gvs-widget-bg"),cl.appendChild((0,Dl.fa)(Wl.Jy)),cl.addEventListener("click",(()=>this.setPopup(!1))),ll.insertBefore(cl,ll.firstChild),this.popupContainer.appendChild(F),this.popupContainer.appendChild(ll),this.popupContainer.classList.remove("gvs-hidden"),(0,Dl.$c)(this.popupContainer,this._t)}else this.popupContainer.classList.remove("gvs-hidden");else this.popupContainer.classList.add("gvs-hidden"),this.psv.startKeyboardControl()}playSequence(){this._sequencePlaying=!0;const F=new Event("sequence-playing");this.dispatchEvent(F);const nextPicturePlay=()=>{if(this._sequencePlaying){this.addEventListener("psv:picture-loaded",(()=>{this._playTimer=setTimeout((()=>{nextPicturePlay()}),this.psv.getTransitionDuration())}),{once:!0});try{this.psv.goToNextPicture()}catch(F){this.stopSequence()}}};this.psv.addEventListener("click",(()=>{this.stopSequence()})),nextPicturePlay()}stopSequence(){this._sequencePlaying=!1,this._playTimer&&(clearTimeout(this._playTimer),delete this._playTimer),this.refreshPSV();const F=new Event("sequence-stopped");this.dispatchEvent(F)}isSequencePlaying(){return this._sequencePlaying}toggleSequencePlaying(){this.isSequencePlaying()?this.stopSequence():this.playSequence()}moveCenter(){const F=this.psv.getPictureMetadata();F&&(this.map&&this.isMapWide()?this.map.flyTo({center:F.gps,zoom:20}):this._psvAnimate({speed:Al.LM,yaw:0,pitch:0,zoom:Al.cS}))}moveLeft(){this._moveToDirection("left")}moveRight(){this._moveToDirection("right")}moveUp(){this._moveToDirection("up")}moveDown(){this._moveToDirection("down")}_moveToDirection(F){if(this.map&&this.isMapWide()){let Da;switch(F){case"up":Da=[0,-100];break;case"left":Da=[-100,0];break;case"down":Da=[0,Sc];break;case"right":Da=[Sc,0]}this.map.panBy(Da)}else{let Da=this.psv.getPosition();switch(F){case"up":Da.pitch+=wc;break;case"left":Da.yaw-=wc;break;case"down":Da.pitch-=wc;break;case"right":Da.yaw+=wc}this._psvAnimate({speed:Al.LM,...Da})}}_psvAnimate(F){this._lastPsvAnim&&this._lastPsvAnim.cancel(),this._lastPsvAnim=this.psv.animate(F)}isMapWide(){if(!this.map)throw new Error("Map is not enabled");return this.mapContainer.parentNode==this.mainContainer}_getDatesForLayerColors(){const F=864e5,Da=Date.now();return[Da-30*F,Da-365*F,Da-730*F].map((F=>new Date(F).toISOString().split("T")[0]))}_getLayerColorStyle(F){var Da,ll,cl,hl,dl;const fl=["case",["==",["get","hidden"],!0],pl.lm.HIDDEN],Al=(null===(Da=this.psv._myVTour)||void 0===Da||null===(ll=Da.state)||void 0===ll?void 0:ll.loadingNode)||(null===(cl=this.psv._myVTour)||void 0===cl||null===(hl=cl.state)||void 0===hl||null===(dl=hl.currentNode)||void 0===dl?void 0:dl.id),bl=Al?this.psv._picturesSequences[Al]:null;if("sequences"==F&&bl?fl.push(["==",["get","id"],bl],pl.lm.SELECTED):"pictures"==F&&bl&&fl.push(["in",bl,["get","sequences"]],pl.lm.SELECTED),this._mapTheme==iu.AGE){const Da="sequences"==F?"date":"ts",ll=this._getDatesForLayerColors();fl.push(["!",["has",Da]],pl.lm.BASE,[">=",["get",Da],ll[0]],pl.lm.PALETTE_4,[">=",["get",Da],ll[1]],pl.lm.PALETTE_3,[">=",["get",Da],ll[2]],pl.lm.PALETTE_2,pl.lm.PALETTE_1)}else this._mapTheme==iu.TYPE?fl.push(["!",["has","type"]],pl.lm.BASE,["==",["get","type"],"equirectangular"],pl.lm.QUALI_1,pl.lm.QUALI_2):this._mapTheme==iu.SCORE?fl.push(["==",kl.d3,5],pl.fW[0].color,["==",kl.d3,4],pl.fW[1].color,["==",kl.d3,3],pl.fW[2].color,["==",kl.d3,2],pl.fW[3].color,pl.fW[4].color):fl.push(pl.lm.BASE);return fl}_getLayerSortStyle(F){var Da,ll,cl,hl,dl;const pl=["case",["==",["get","hidden"],!0],90],fl=(null===(Da=this.psv._myVTour)||void 0===Da||null===(ll=Da.state)||void 0===ll?void 0:ll.loadingNode)||(null===(cl=this.psv._myVTour)||void 0===cl||null===(hl=cl.state)||void 0===hl||null===(dl=hl.currentNode)||void 0===dl?void 0:dl.id),Al=fl?this.psv._picturesSequences[fl]:null;if("sequences"==F&&Al?pl.push(["==",["get","id"],Al],100):"pictures"==F&&Al&&pl.push(["in",Al,["get","sequences"]],100),this._mapTheme==iu.AGE){const Da="sequences"==F?"date":"ts",ll=this._getDatesForLayerColors();pl.push(["!",["has",Da]],0,[">=",["get",Da],ll[0]],50,[">=",["get",Da],ll[1]],49,[">=",["get",Da],ll[2]],48)}else this._mapTheme==iu.TYPE?pl.push(["!",["has","type"]],0,["==",["get","type"],"equirectangular"],50):this._mapTheme==iu.SCORE&&pl.push(["==",kl.d3,5],80,["==",kl.d3,4],65,["==",kl.d3,3],50,["==",kl.d3,2],35,["==",kl.d3,1],20);return pl.push(10),pl}getPicturesNavigation(){return this._picNav}setPicturesNavigation(F){this._picNav=F;const Da=new CustomEvent("pictures-navigation-changed",{detail:{value:F}});this.dispatchEvent(Da)}_picturesNavFilter(F){switch(this._picNav){case"seq":return["next","prev"].includes(F.rel);case"pic":return!1;default:return!0}}toggleJOSMLive(F){if(F){const F=new CustomEvent("josm-live-enabled");return this.dispatchEvent(F),fetch(eu+"/version").catch((F=>{throw this.dispatchEvent(new CustomEvent("josm-live-disabled")),F})).then((()=>{const F=(0,pl.dK)(this.psv.getPictureMetadata());if(F){fetch(`${eu}/load_and_zoom?${F}`).catch((F=>{console.warn(F),this.toggleJOSMLive(!1)}))}this._josmListener=()=>{const F=(0,pl.dK)(this.psv.getPictureMetadata());if(F){fetch(`${eu}/zoom?${F}`).catch((F=>{console.warn(F),this.toggleJOSMLive(!1)}))}},this.addEventListener("psv:picture-loaded",this._josmListener),this.addEventListener("psv:picture-loading",this._josmListener)}))}{const F=new CustomEvent("josm-live-disabled");return this.dispatchEvent(F),this._josmListener&&(this.removeEventListener("psv:picture-loading",this._josmListener),this.removeEventListener("psv:picture-loaded",this._josmListener),delete this._josmListener),Promise.resolve()}}setFocus(F){var Da,ll,cl;let hl=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("map"===F&&!this.map)throw new Error("Map is not enabled");if(!["map","pic"].includes(F))throw new Error("Invalid focus value (should be pic or map)");if(("map"!==F||!this.map||!this.isMapWide())&&("pic"!==F||this.map&&this.isMapWide())){var dl;if(null===(Da=this.mapContainer.parentElement)||void 0===Da||Da.removeChild(this.mapContainer),null===(ll=this.psvContainer.parentElement)||void 0===ll||ll.removeChild(this.psvContainer),"map"===F)this.psv.stopKeyboardControl(),this.map.keyboard.enable(),this.container.classList.add("gvs-focus-map"),this.mainContainer.appendChild(this.mapContainer),this.miniContainer.appendChild(this.psvContainer),this.map.getCanvas().focus();else null===this||void 0===this||null===(dl=this.map)||void 0===dl||dl.keyboard.disable(),this.psv.startKeyboardControl(),this.container.classList.remove("gvs-focus-map"),this.mainContainer.appendChild(this.psvContainer),this.miniContainer.appendChild(this.mapContainer),this.psvContainer.focus();if(null===this||void 0===this||null===(cl=this.map)||void 0===cl||cl.resize(),this.psv.autoSize(),this.refreshPSV(),!hl){const Da=new CustomEvent("focus-changed",{detail:{focus:F}});this.dispatchEvent(Da)}}}toggleFocus(){if(!this.map)throw new Error("Map is not enabled");this.setFocus(this.isMapWide()?"pic":"map")}setUnfocusedVisible(F){if(!this.map)throw new Error("Map is not enabled");F?this.container.classList.remove("gvs-mini-hidden"):this.container.classList.add("gvs-mini-hidden"),this.map.resize(),this.psv.autoSize()}toggleUnfocusedVisible(){if(!this.map)throw new Error("Map is not enabled");this.setUnfocusedVisible(this.container.classList.contains("gvs-mini-hidden"))}setFilters(F){var Da;let ll=arguments.length>1&&void 0!==arguments[1]&&arguments[1],cl=[],hl=[],dl=!1;if(this._mapFilters={},F.minDate&&""!==F.minDate&&(this._mapFilters.minDate=F.minDate,cl.push([">=",["get","date"],F.minDate]),hl.push([">=",["get","ts"],F.minDate])),F.maxDate&&""!==F.maxDate){this._mapFilters.maxDate=F.maxDate,cl.push(["<=",["get","date"],F.maxDate]);let Da=new Date(F.maxDate);Da.setDate(Da.getDate()+1),Da=Da.toISOString().split("T")[0],hl.push(["<=",["get","ts"],Da])}if(F.type&&""!==F.type&&(this._mapFilters.type=F.type,cl.push(["==",["get","type"],F.type]),hl.push(["==",["get","type"],F.type])),null!==(Da=this.map)&&void 0!==Da&&Da._hasGridStats()&&(dl=!0),F.camera&&""!==F.camera){this._mapFilters.camera=F.camera;const Da=F.camera.toLowerCase().trim()+"                    ",ll=F.camera.toLowerCase().trim()+"zzzzzzzzzzzzzzzzzzzz",dl=["collator",{"case-sensitive":!1,"diacritic-sensitive":!1}];cl.push([">=",["get","model"],Da,dl]),cl.push(["<=",["get","model"],ll,dl]),hl.push([">=",["get","model"],Da,dl]),hl.push(["<=",["get","model"],ll,dl])}if(F.qualityscore&&F.qualityscore.length>0&&(this._mapFilters.qualityscore=F.qualityscore,cl.push(["in",kl.d3,["literal",this._mapFilters.qualityscore]]),hl.push(["in",kl.d3,["literal",this._mapFilters.qualityscore]])),F.theme&&Object.values(iu).includes(F.theme)&&(this._mapFilters.theme=F.theme,this.map&&(this._mapTheme=this._mapFilters.theme,dl=!0)),0==cl.length?cl=null:cl.unshift("all"),0==hl.length?hl=null:(hl.unshift("all"),hl=["step",["zoom"],!0,kl.oe,hl]),this.map){dl&&this.map.reloadLayersStyles();const F=this.map.getVisibleUsers().includes("geovisio");cl&&F&&(cl=["step",["zoom"],!0,7,cl]),this.map.filterUserLayersContent("sequences",cl),this.map.filterUserLayersContent("pictures",hl),!ll&&(null!==cl||null!==hl||null!==this._mapFilters.theme&&this._mapFilters.theme!==iu.DEFAULT)&&F&&this.map.getZoom()<7&&!this.map._hasGridStats()&&this.map.easeTo({zoom:7})}const pl=new CustomEvent("filters-changed",{detail:Object.assign({},this._mapFilters)});this.dispatchEvent(pl)}}},6803:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>CoreView});ll(8946);var cl=ll(5254),hl=ll(6980),dl=ll(1300),pl=ll(5071),fl=ll(8330),Al=ll(2730);class CoreView extends EventTarget{constructor(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(super(),this._options=ll,null==this._options&&(this._options={}),this._options.users||(this._options.users=["geovisio"]),"string"===typeof this._options.users&&(this._options.users=[this._options.users]),this._options.style||(this._options.style=dl.AV),this._options.testing||console.info(`\ud83d\udcf7 Panoramax ${this.getClassName()} - Version ${fl.rE} (b72a083)\n\n\ud83c\udd98 Issues can be reported at ${fl.Jk.O}`),this._t=(0,hl.$)(this._options.lang),this._isInternetFast=null,(0,pl.KF)().then((F=>this._isInternetFast=F)),this._selectedSeqId=this._options.selectedSequence||null,this._selectedPicId=this._options.selectedPicture||null,this.container="string"===typeof F?document.getElementById(F):F,!(this.container instanceof Element))throw new Error("Container is not a valid HTML element, does it exist in your page ?");this.container.classList.add("gvs",`gvs-${this.getClassName().toLocaleLowerCase()}`),(0,pl.GZ)()&&this.container.classList.add("gvs-iframed"),this.loaderContainer=document.createElement("div"),this.container.appendChild(this.loaderContainer),this._loader=new Al.A(this,this.loaderContainer),Da=(Da||"").replace("/api/search","/api");try{var bl;this._api=new cl.A(Da,{users:this._options.users,fetch:null===(bl=this._options)||void 0===bl?void 0:bl.fetchOptions,style:this._options.style}),this._api.onceReady().then((()=>{let F=this._api.getUnavailableFeatures(),Da=this._api.getAvailableFeatures();Da=0===F.length?"\u2705 All features available":"\u2705 Available features: "+Da.join(", "),F=0===F.length?"":"\ud83d\udeab Unavailable features: "+F.join(", "),console.info(`\ud83c\udf10 Connected to API "${this._api._metadata.name}" (${this._api._endpoint})\n\u2139\ufe0f API runs STAC ${this._api._metadata.stac_version} ${this._api._metadata.geovisio_version?"& GeoVisio "+this._api._metadata.geovisio_version:""}\n   ${Da}\n   ${F}\n`.trim())})).catch((F=>this._loader.dismiss(F,this._t.gvs.error_api)))}catch(kl){this._loader.dismiss(kl,this._t.gvs.error_api)}}getClassName(){return"CoreView"}destroy(){delete this._options,delete this._t,delete this._api,delete this._loader,this.loaderContainer.remove(),delete this.loaderContainer}isWidthSmall(){var F;return(null===(F=this.container)||void 0===F?void 0:F.offsetWidth)<576}isHeightSmall(){var F;return(null===(F=this.container)||void 0===F?void 0:F.offsetHeight)<400}select(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ll=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Da===pl.an&&(Da=null);const cl=this._selectedSeqId||null,hl=this._selectedPicId||null;(ll||hl!=Da||cl!=F)&&(this._selectedSeqId=F,this._selectedPicId=Da,this.dispatchEvent(new CustomEvent("select",{detail:{seqId:F,picId:Da,prevSeqId:cl,prevPicId:hl}})))}}},2730:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>Loader});ll(737);var cl=ll(2305),hl=ll(6883);class Loader{constructor(F,Da){this._parent=F,this.container=Da,this.container.classList.add("gvs-loader","gvs-loader-visible");const ll=document.createElement("img");ll.src=hl,ll.alt="",ll.title=this._parent._t.map.loading,ll.classList.add("gvs-loader-img"),this.container.appendChild(ll);const cl=document.createElement("div"),dl=document.createElement("span"),nextLabelFun=()=>this._parent._t.gvs.loading_labels_fun[Math.floor(Math.random()*this._parent._t.gvs.loading_labels_fun.length)];dl.innerHTML=this._parent._t.gvs.loading_labels_serious[Math.floor(Math.random()*this._parent._t.gvs.loading_labels_serious.length)];const nextLabelFct=()=>setTimeout((()=>{dl.innerHTML=nextLabelFun(),this._loaderLabelChanger=nextLabelFct()}),500+1e3*Math.random());this._loaderLabelChanger=nextLabelFct(),cl.appendChild(dl),this.container.appendChild(cl)}isVisible(){return this.container.classList.contains("gvs-loader-visible")}dismiss(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(clearTimeout(this._loaderLabelChanger),F){let hl;!0!==F&&console.error(F),this.container.children[0].src=cl,this.container.children[0].style.width="200px",this.container.children[0].style.animation="unset",hl=ll?`<button class="gvs-loader-cta">${this._parent._t.gvs.error_click}</button>`:`<small>${this._parent._t.gvs.error_retry}</small>`,Da&&(hl=Da+"<br />"+hl),this.container.children[1].innerHTML=`${this._parent._t.gvs.error}<br />${hl}`,ll&&this.container.addEventListener("click",ll);const dl=Da||"Panoramax JS had a blocking exception",pl=new CustomEvent("broken",{detail:{error:dl}});throw this._parent.dispatchEvent(pl),new Error(dl)}{this.container.classList.remove("gvs-loader-visible"),setTimeout((()=>this.container.remove()),2e3);const F=new CustomEvent("ready");this._parent.dispatchEvent(F),ll&&ll()}}}},1951:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>Map});ll(1120);var cl=ll(1300),hl=ll(5071),dl=ll(6883),pl=ll(270),fl=ll(6462),Al=ll(9740),bl=(ll(6795),ll(927)),kl=ll.n(bl),Dl=ll(587),Wl=ll.n(Dl),Ql=ll(6840);kl().workerClass=Wl(),kl().addProtocol("pmtiles",(new Ql.Zs).tile);const wc=["antialias","attributionControl","bearing","bearingSnap","bounds","boxZoom","center","clickTolerance","collectResourceTiming","cooperativeGestures","crossSourceCollisions","doubleClickZoom","dragPan","dragRotate","fadeDuration","failIfMajorPerformanceCaveat","fitBoundsOptions","hash","interactive","keyboard","localIdeographFontFamily","locale","logoPosition","maplibreLogo","maxBounds","maxCanvasSize","maxPitch","maxTileCacheSize","maxTileCacheZoomLevels","maxZoom","minPitch","minZoom","pitch","pitchWithRotate","pixelRatio","preserveDrawingBuffer","refreshExpiredTiles","renderWorldCopies","scrollZoom","touchPitch","touchZoomRotate","trackResize","transformCameraUpdate","transformRequest","validateStyle","zoom"];class Map extends kl().Map{constructor(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var hl,dl;(super({container:Da,style:(0,cl.CG)(F,ll),center:[0,0],zoom:0,maxZoom:24,attributionControl:!1,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0,touchPitch:!1,preserveDrawingBuffer:!F.isWidthSmall(),transformRequest:F._api._getMapRequestTransform(),locale:F._t.maplibre,...(hl=ll,Object.fromEntries(Object.entries(hl).filter((F=>{let[Da]=F;return wc.includes(Da)}))))}),this._loadMarkerImages(),this._parent=F,this._options=ll,this.getContainer().classList.add("gvs-map"),void 0===ll.touchZoomRotate)&&(null===this||void 0===this||null===(dl=this.touchZoomRotate)||void 0===dl||dl.disableRotation());this._options.raster&&(this._options.background=this._options.background||"streets"),this._attribution=new(kl().AttributionControl)({compact:!1}),this.addControl(this._attribution),this._initGeocoder(),this._initMapPosition(),this._picMarker=this._getPictureMarker(),this._picMarkerPreview=this._getPictureMarker(!1),this._picThumbUrl={},this._seqPictures={},this._userLayers=new Set,this.on("mousemove","sequences",this._onSequenceHover.bind(this)),this._parent.addEventListener("select",this.reloadLayersStyles.bind(this)),setTimeout((()=>{!this.loaded()&&this._parent._loader.isVisible()&&this._parent._loader.dismiss({},this._parent._t.map.slow_loading,(()=>{}))}),15e3),this.waitForEnoughMapLoaded().then((async()=>await this._postLoad()))}async _postLoad(){this.resize(),await this.setVisibleUsers(this._parent._options.users),this.reloadLayersStyles()}destroy(){this.remove(),delete this._parent,delete this._options,delete this._attribution,delete this._picMarker,delete this._picMarkerPreview,delete this._picThumbUrl,delete this._seqPictures,delete this._userLayers}waitForEnoughMapLoaded(){return new Promise((F=>{let Da=0,ll=0,cl=0,hl=0;const onSourceDataLoading=F=>{"source"===F.dataType&&F.tile&&(F.sourceId.startsWith("geovisio")?ll++:Da++)},onSourceData=F=>{"source"===F.dataType&&F.tile&&(F.sourceId.startsWith("geovisio")?(hl++,F.isSourceLoaded&&(hl=ll)):(cl++,F.isSourceLoaded&&(cl=Da))),checkEnoughLoaded()},checkEnoughLoaded=()=>{cl/Da>=.75&&hl/ll>=.75&&(this.off("sourcedata",onSourceData),this.off("sourcedataloading",onSourceDataLoading),F())};this.on("sourcedataloading",onSourceDataLoading),this.on("sourcedata",onSourceData)}))}_initMapPosition(){this._options.center&&this._options.center!=[0,0]||this._options.zoom&&0!==this._options.zoom||this._options.hash||this._parent._api.onceReady().then((()=>{var F,Da;let ll=null===(F=this._parent)||void 0===F||null===(Da=F._api)||void 0===Da?void 0:Da.getDataBbox();if(ll)try{ll=new(kl().LngLatBounds)(ll),this.loaded()?this.fitBounds(ll,{animate:!1}):this.waitForEnoughMapLoaded().then((()=>this.fitBounds(ll,{animate:!1})))}catch(cl){console.warn("Received invalid bbox: "+ll)}}))}_initGeocoder(){var F,Da;const ll={ban:cl.Kf,nominatim:cl.RK},hl=(null===(F=this._options)||void 0===F||null===(Da=F.geocoder)||void 0===Da?void 0:Da.engine)||"nominatim";this.geocoder=ll[hl],this._geolocate=new(kl().GeolocateControl)({positionOptions:{enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},showAccuracyCircle:!0,showUserLocation:!0,trackUserLocation:!0}).onAdd(this)}_loadMarkerImages(){[{id:"gvs-marker",img:dl},{id:"gvs-arrow-flat",img:fl},{id:"gvs-arrow-360",img:Al}].forEach((F=>{const Da=new Image(64,64);Da.onload=()=>this.addImage(F.id,Da),Da.src=F.img}))}_hasQualityScore(){var F,Da,ll,cl;const hl=(null===(F=this.getStyle())||void 0===F||null===(Da=F.metadata)||void 0===Da?void 0:Da["panoramax:fields"])||{};return(null===hl||void 0===hl||null===(ll=hl.pictures)||void 0===ll?void 0:ll.includes("gps_accuracy"))&&(null===hl||void 0===hl||null===(cl=hl.pictures)||void 0===cl?void 0:cl.includes("h_pixel_density"))}_hasGridStats(){var F,Da,ll,cl,hl,dl;const pl=(null===(F=this.getStyle())||void 0===F||null===(Da=F.metadata)||void 0===Da?void 0:Da["panoramax:fields"])||{};return(null===pl||void 0===pl||null===(ll=pl.grid)||void 0===ll?void 0:ll.includes("nb_360_pictures"))&&(null===pl||void 0===pl||null===(cl=pl.grid)||void 0===cl?void 0:cl.includes("nb_flat_pictures"))&&(null===pl||void 0===pl||null===(hl=pl.grid)||void 0===hl?void 0:hl.includes("coef_360_pictures"))&&(null===pl||void 0===pl||null===(dl=pl.grid)||void 0===dl?void 0:dl.includes("coef_flat_pictures"))}reloadVectorTiles(){[...this._userLayers].forEach((F=>{const Da=this.getSource((0,cl.e8)(F));Da.setTiles(Da.tiles)}))}hasTwoBackgrounds(){return void 0!==this.getLayer(cl.m5)}getBackground(){if(!this.getLayer(cl.m5))return"streets";return"visible"==this.getLayoutProperty(cl.m5,"visibility")?"aerial":"streets"}setBackground(F){if(!this.getLayer(cl.m5)&&"aerial"===F)throw new Error("No aerial imagery available");if(this.getLayer(cl.m5)){this.setLayoutProperty(cl.m5,"visibility","aerial"===F?"visible":"none");const Da=new CustomEvent("map:background-changed",{detail:{background:F||"streets"}});this._parent.dispatchEvent(Da)}}getVisibleUsers(){return[...this._userLayers].filter((F=>"visible"===this.getLayoutProperty((0,cl.IN)(F,"pictures"),"visibility")))}async setVisibleUsers(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"===typeof F&&(F=[F]),await Promise.all(F.filter((F=>""!=F&&!this._userLayers.has(F))).map((F=>this._createPicturesTilesLayer(F))));const Da=["pictures","sequences","sequences_plus","grid","pictures_symbols"];[...this._userLayers].forEach((ll=>{Da.forEach((Da=>{const hl=(0,cl.IN)(ll,Da);this.getLayer(hl)&&this.setLayoutProperty(hl,"visibility",F.includes(ll)?"visible":"none")}))}));const ll=new CustomEvent("map:users-changed",{detail:{usersIds:F}});this._parent.dispatchEvent(ll)}filterUserLayersContent(F,Da){[...this._userLayers].forEach((ll=>{this.setFilter((0,cl.IN)(ll,F),Da),"sequences"===F&&this.getLayer((0,cl.IN)(ll,"sequences_plus"))&&this.setFilter((0,cl.IN)(ll,"sequences_plus"),Da),"pictures"===F&&this.getLayer((0,cl.IN)(ll,"pictures_symbols"))&&this.setFilter((0,cl.IN)(ll,"pictures_symbols"),Da)}))}displayPictureMarker(F,Da,ll){this._picMarkerPreview.remove(),void 0!==F&&void 0!==Da?this._picMarker.setLngLat([F,Da]).setRotation(ll).addTo(this):this._picMarker.remove(),this.reloadLayersStyles(),void 0!==F&&void 0!==Da&&this.flyTo({center:[F,Da],zoom:this.getZoom()<cl.oe+2?cl.oe+2:this.getZoom(),maxDuration:2e3})}reloadLayersStyles(){var F;const updateStyle=(F,Da)=>{[...this._userLayers].forEach((ll=>{for(let hl in Da.layout)this.setLayoutProperty((0,cl.IN)(ll,F),hl,Da.layout[hl]);for(let hl in Da.paint)this.setPaintProperty((0,cl.IN)(ll,F),hl,Da.paint[hl])}))};if(["pictures","pictures_symbols","sequences"].forEach((F=>{updateStyle(F,this._getLayerStyleProperties(F))})),this._hasGridStats()&&null!==(F=this._parent)&&void 0!==F&&F._mapFilters){var Da;let F="coef";null!==(Da=this._parent._mapFilters)&&void 0!==Da&&Da.type&&(F="flat"==this._parent._mapFilters.type?"coef_flat_pictures":"coef_360_pictures"),this.getStyle().layers.filter((F=>F.id.endsWith("_grid"))).forEach((Da=>{const ll=(0,cl.Hj)(Da,F);for(let F in ll.layout)this.setLayoutProperty(Da.id,F,ll.layout[F]);for(let F in ll.paint)this.setPaintProperty(Da.id,F,ll.paint[F])}))}}async _createPicturesTilesLayer(F){this._userLayers.add(F);const Da=this.getStyle().layers.find(cl.Sf);if("geovisio"!==F&&!this.getSource(`geovisio_${F}`)){const ll=await this._parent._api.getUserMapStyle(F);Object.entries(ll.sources).forEach((F=>{let[Da,ll]=F;return this.addSource(Da,ll)})),ll.layers=ll.layers||[];ll.layers.concat((0,cl.Oq)(ll.sources,ll.layers)).filter((F=>Object.keys(F).length>0)).forEach((F=>this.addLayer(F,null===Da||void 0===Da?void 0:Da.id)))}this._picPreviewTimer=null,this._picPopup=new(kl().Popup)({closeButton:!1,closeOnClick:!this._parent.isWidthSmall(),offset:3}),this._picPopup.on("close",(()=>{delete this._picPopup._picId}));const ll=(0,cl.IN)(F,"pictures");this.on("mousemove",ll,(F=>{this.getCanvas().style.cursor="pointer";const Da=Object.assign({},F);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(Da,ll)),100)})),this.on("mouseleave",ll,(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click",ll,this._onPictureClick.bind(this));const hl=(0,cl.IN)(F,"sequences_plus");this.on("mousemove",hl,(F=>{if(this.getZoom()<=cl.oe+1&&(this.getCanvas().style.cursor="pointer",F.features[0].properties.id)){const Da=Object.assign({},F);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(Da,hl)),100)}})),this.on("mouseleave",hl,(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click",hl,(F=>{F.preventDefault(),this.getZoom()<=cl.oe+1&&this._onSequenceClick(F)})),"geovisio"===F&&this.getLayer("geovisio_grid")&&(this.on("mousemove","geovisio_grid",(F=>{if(this.getZoom()<=cl.oe+1){this.getCanvas().style.cursor="pointer";const Da=Object.assign({},F);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(Da,"geovisio_grid")),100)}})),this.on("mouseleave","geovisio_grid",(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click","geovisio_grid",(F=>{F.preventDefault(),this.flyTo({center:F.lngLat,zoom:cl.oe-6})}))),this.on("click",(F=>{!1===F.defaultPrevented&&(clearTimeout(this._picPreviewTimer),this._picPopup.remove())}))}_getLayerStyleProperties(F){if("pictures_symbols"===F)return{paint:{},layout:{"icon-image":["case",["==",["get","id"],this._parent._selectedPicId],"",["==",["get","type"],"equirectangular"],"gvs-arrow-360","gvs-arrow-flat"],"symbol-sort-key":this._getLayerSortStyle(F)}};{const Da={pictures:"circle",sequences:"line"};return{paint:Object.assign({[`${Da[F]}-color`]:this._getLayerColorStyle(F)},cl.VM[F.toUpperCase()].paint),layout:Object.assign({[`${Da[F]}-sort-key`]:this._getLayerSortStyle(F)},cl.VM[F.toUpperCase()].layout)}}}_getLayerColorStyle(F){const Da=["case",["==",["get","hidden"],!0],hl.lm.HIDDEN,["==",["get","geovisio:status"],"hidden"],hl.lm.HIDDEN],ll=this._parent._selectedSeqId;return"sequences"==F&&ll?Da.push(["==",["get","id"],ll],hl.lm.SELECTED):F.startsWith("pictures")&&ll&&Da.push(["in",ll,["get","sequences"]],hl.lm.SELECTED),Da.push(hl.lm.BASE),Da}_getLayerSortStyle(F){const Da=["case",["==",["get","hidden"],!0],90],ll=this._parent._selectedSeqId;return"sequences"==F&&ll?Da.push(["==",["get","id"],ll],100):F.startsWith("pictures")&&ll&&Da.push(["in",ll,["get","sequences"]],100),Da.push(10),Da}_attachPreviewToPictures(F,Da){let ll=F.features.pop();if(!ll||ll.properties.id==this._picPopup._picId)return;let hl=null;if(Da.endsWith("pictures")?hl=ll.geometry.coordinates.slice():F.lngLat&&(hl=[F.lngLat.lng,F.lngLat.lat]),!hl){const F="LineString"===ll.geometry.type?[ll.geometry.coordinates]:ll.geometry.coordinates;let Da=null;const cl=this.getBounds(),dl=cl.getCenter();for(let ll=0;ll<F.length;ll++)for(let pl=0;pl<F[ll].length;pl++)if(cl.contains(F[ll][pl])){let cl=dl.distanceTo(new(kl().LngLat)(...F[ll][pl]));(null===Da||cl<Da)&&(hl=F[ll][pl],Da=cl)}if(!hl)return}this._picPopup.setLngLat(hl).addTo(this),this._picThumbUrl[ll.properties.id]||this._picPopup.setDOMContent((0,cl.No)(this._parent._t)),this._picPopup._loading=ll.properties.id,this._picPopup._picId=ll.properties.id;const displayThumb=F=>{if(this._picPopup._loading===ll.properties.id)if(delete this._picPopup._loading,F){let Da=document.createElement("img");Da.classList.add("gvs-map-thumb"),Da.alt=this._parent._t.map.thumbnail;let cl=new Image;if(cl.src=F,cl.addEventListener("load",(()=>{ll.properties.hidden?Da.children[0].src=cl.src:Da.src=cl.src,this._picPopup.setDOMContent(Da)})),ll.properties.hidden){const F=document.createElement("div");F.classList.add("gvs-map-thumb-legend"),F.appendChild(document.createTextNode(this._parent._t.map.not_public));const ll=document.createElement("div");ll.appendChild(Da),ll.appendChild(F),Da=ll}}else this._picPopup.remove()};Da.endsWith("pictures")?this._getPictureThumbURL(ll.properties.id).then(displayThumb):Da.endsWith("grid")?this._getThumbURL(hl).then(displayThumb):this._getSequenceThumbURL(ll.properties.id,new(kl().LngLat)(...hl)).then(displayThumb)}_getThumbURL(F){return this._parent._api.getPicturesAroundCoordinates(F[1],F[0],.1,1).then((F=>{var Da;const ll=null===F||void 0===F||null===(Da=F.features)||void 0===Da?void 0:Da.pop();return ll?this._parent._api.findThumbnailInPictureFeature(ll):null}))}_getSequenceThumbURL(F,Da){return Da?this._parent._api.getPicturesAroundCoordinates(Da.lat,Da.lng,1,1,F).then((Da=>{var ll;return(null===Da||void 0===Da||null===(ll=Da.features)||void 0===ll?void 0:ll.length)>0?this._parent._api.findThumbnailInPictureFeature(Da.features[0]):this._parent._api.getPictureThumbnailURLForSequence(F)})):this._parent._api.getPictureThumbnailURLForSequence(F)}_getPictureThumbURL(F,Da){let ll=null;return F&&(void 0!==this._picThumbUrl[F]?ll="string"===typeof this._picThumbUrl[F]?Promise.resolve(this._picThumbUrl[F]):this._picThumbUrl[F]:(this._picThumbUrl[F]=this._parent._api.getPictureThumbnailURL(F,Da).then((Da=>Da?(this._picThumbUrl[F]=Da,Da):(this._picThumbUrl[F]=null,null))).catch((()=>{this._picThumbUrl[F]=null})),ll=this._picThumbUrl[F])),ll}_getPictureMarker(){let F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const Da=document.createElement("img");return Da.src=F?pl:dl,Da.alt="",new(kl().Marker)({element:Da})}_onSequenceHover(F){var Da;F.preventDefault(),F.features.length>0&&null!==(Da=F.features[0].properties)&&void 0!==Da&&Da.id&&this._parent.dispatchEvent(new CustomEvent("map:sequence-hover",{detail:{seqId:F.features[0].properties.id}}))}_onSequenceClick(F){var Da;F.preventDefault(),F.features.length>0&&null!==(Da=F.features[0].properties)&&void 0!==Da&&Da.id&&this._parent.dispatchEvent(new CustomEvent("map:sequence-click",{detail:{seqId:F.features[0].properties.id,coordinates:F.lngLat}}))}_onPictureClick(F){var Da,ll;F.preventDefault();const cl=(null===F||void 0===F||null===(Da=F.features)||void 0===Da?void 0:Da.length)>0?F.features[0]:null;if(null!==cl&&void 0!==cl&&null!==(ll=cl.properties)&&void 0!==ll&&ll.id){let Da=null;try{cl.properties.sequences&&(Array.isArray(cl.properties.sequences)||(cl.properties.sequences=JSON.parse(cl.properties.sequences)),Da=cl.properties.sequences.pop())}catch(F){console.log("Sequence ID is not available in vector tiles for picture "+cl.properties.id)}this._parent.dispatchEvent(new CustomEvent("map:picture-click",{detail:{picId:cl.properties.id,seqId:Da,feature:cl}}))}}}},8489:(F,Da,ll)=>{"use strict";ll.d(Da,{Ay:()=>Photo,LM:()=>Wl,Vf:()=>Ql,cS:()=>Dl});ll(8310);var cl=ll(5975),hl=ll(2305),dl=ll(5071),pl=(ll(3961),ll(1080),ll(2710),ll(1575),ll(1545)),fl=ll(3348),Al=ll(3727);const bl={baseUrl:cl,width:1280,cols:2,rows:1,tileUrl:()=>null},kl={id:dl.an,caption:"",panorama:bl,links:[],gps:[0,0],sequence:{},sphereCorrection:{},horizontalFov:360,properties:{}},Dl=30,Wl=250,Ql=3e3;pl.jM.useNewAnglesOrder=!0;class Photo extends pl.jM{constructor(F,Da){var ll,cl,hl,dl;let pl=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super({container:Da,adapter:[Al.A,{showErrorTile:!1,baseBlur:!1,resolution:F.isWidthSmall()?32:64,shouldGoFast:pl.shouldGoFast}],withCredentials:"include"==(null===(ll=F._options)||void 0===ll||null===(cl=ll.fetchOptions)||void 0===cl?void 0:cl.credentials),requestHeaders:null===(hl=F._options)||void 0===hl||null===(dl=hl.fetchOptions)||void 0===dl?void 0:dl.headers,panorama:bl,lang:F._t.psv,minFov:5,loadingTxt:"&nbsp;",navbar:null,rendererParameters:{preserveDrawingBuffer:!F.isWidthSmall()},plugins:[[fl.$,{dataMode:"server",positionMode:"gps",renderMode:"3d",preload:!0,getNode:()=>{},transitionOptions:()=>{},arrowsPosition:{linkOverlapAngle:Math.PI/6}}]],...pl}),this._parent=F,Da.classList.add("gvs-psv"),this._shouldGoFast=(null===pl||void 0===pl?void 0:pl.shouldGoFast)||(()=>!1),this._transitionDuration=(null===pl||void 0===pl?void 0:pl.transitionDuration)||Wl,this._myVTour=this.getPlugin(fl.$),this._myVTour.datasource.nodeResolver=this._getNodeFromAPI.bind(this),this._myVTour.config.transitionOptions=this._psvNodeTransition.bind(this),this._clearArrows=this._myVTour.arrowsRenderer.clear.bind(this._myVTour.arrowsRenderer),this._myVTour.arrowsRenderer.clear=()=>{},this._picturesSequences={},this._myVTour.addEventListener("enter-arrow",this._onEnterArrow.bind(this)),this._myVTour.addEventListener("leave-arrow",this._onLeaveArrow.bind(this)),this._myVTour.addEventListener("node-changed",this._onNodeChanged.bind(this)),this.addEventListener("position-updated",this._onPositionUpdated.bind(this)),this.addEventListener("zoom-updated",this._onZoomUpdated.bind(this)),this._parent.addEventListener("select",this._onSelect.bind(this)),this.loader.size=150,this.loader.color="rgba(61, 61, 61, 0.5)",this.loader.textColor="rgba(255, 255, 255, 0.7)",this.loader.border=5,this.loader.thickness=10,this.loader.canvas.setAttribute("viewBox","0 0 150 150"),this.loader.__updateContent()}async _getNodeFromAPI(F){var Da,ll,cl;if(!F||F===dl.an)return kl;const hl=await fetch(this._parent._api.getPictureMetadataUrl(F,this._picturesSequences[F]),this._parent._api._getFetchOptions());let pl=await hl.json();if(pl.features&&(pl=pl.features.pop()),!pl||0===Object.keys(pl).length||!hl.ok)throw this._parent._loader&&this._parent._loader.dismiss(!0,this._parent._t.gvs.error_pic),new Error("Picture with ID "+F+" was not found");this._picturesSequences[F]=pl.collection;const fl=(0,dl.rs)(pl,this._parent._t,this._parent._isInternetFast,null===(Da=this._parent._picturesNavFilter)||void 0===Da?void 0:Da.bind(this._parent));var Al,bl;null!==fl&&void 0!==fl&&null!==(ll=fl.sequence)&&void 0!==ll&&ll.prevPic&&(this._picturesSequences[null===fl||void 0===fl||null===(Al=fl.sequence)||void 0===Al?void 0:Al.prevPic]=pl.collection);null!==fl&&void 0!==fl&&null!==(cl=fl.sequence)&&void 0!==cl&&cl.nextPic&&(this._picturesSequences[null===fl||void 0===fl||null===(bl=fl.sequence)||void 0===bl?void 0:bl.nextPic]=pl.collection);return fl}_psvNodeTransition(F,Da,ll){var cl,hl;let pl={};const fl=this._shouldGoFast()?0:Math.min(Wl,this._transitionDuration),Al=fl>100,bl=null!=(ll||(null===Da||void 0===Da?void 0:Da.links.find((Da=>Da.nodeId==F.id)))),kl=Da&&F.sequence.id===Da.sequence.id,Ql=((null===Da||void 0===Da||null===(cl=Da.properties)||void 0===cl?void 0:cl["view:azimuth"])||0)*(Math.PI/180),wc=((null===F||void 0===F||null===(hl=F.properties)||void 0===hl?void 0:hl["view:azimuth"])||0)*(Math.PI/180);this.setOption("maxFov",Math.min(3*F.horizontalFov/4,90));const Sc={speed:0,fadeIn:!1,rotation:!1,rotateTo:{pitch:0,yaw:0},zoomTo:Dl};if(360==F.horizontalFov)pl=Da?(0,dl.Yf)(Da.gps,F.gps)>=.001?Sc:{speed:fl,fadeIn:bl&&Al,rotation:bl&&kl&&Al,rotateTo:this.getPosition()}:Sc;else if(kl){const F=this.getPosition().yaw,ll=Da.horizontalFov*(Math.PI/180)/2,cl=F<=ll||F>=2*Math.PI-ll,hl=Math.abs(Ql-wc)<=Math.PI/4;pl={speed:fl,fadeIn:bl&&hl&&Al,rotation:bl&&hl&&Al,rotateTo:cl?this.getPosition():{pitch:0,yaw:0},zoomTo:cl?this.getZoomLevel():Dl}}else pl=Sc;pl.fadeIn&&pl.speed>=150?setTimeout(this._clearArrows,pl.speed-100):this._clearArrows();const eu=new CustomEvent("psv:picture-loading",{detail:{...Object.assign({},this.getXYZ(),pl.rotateTo?{x:180*(wc+pl.rotateTo.yaw)/Math.PI}:null,pl.zoomTo?{z:pl.zoomTo}:null),picId:F.id,lon:F.gps[0],lat:F.gps[1]}});return this._parent.dispatchEvent(eu),pl}_onEnterArrow(F){const Da=F.link,ll=F.node;let cl;ll&&(cl=360===ll.horizontalFov?(this.getPictureOriginalHeading()+180*this.getPosition().yaw/Math.PI)%360:this.getPictureOriginalHeading());const hl=new CustomEvent("psv:picture-preview-started",{detail:{picId:Da.nodeId,coordinates:Da.gps,direction:cl}});this._parent.dispatchEvent(hl)}_onLeaveArrow(F){const Da=F.link,ll=new CustomEvent("psv:picture-preview-stopped",{detail:{picId:Da.nodeId}});this._parent.dispatchEvent(ll)}_onPositionUpdated(F){let{position:Da}=F;const ll=(0,dl.oi)(Da,this.getZoomLevel());ll.x+=this.getPictureOriginalHeading(),ll.x=ll.x%360;const cl=new CustomEvent("psv:view-rotated",{detail:ll});this._parent.dispatchEvent(cl),this._onTilesStartLoading()}_onZoomUpdated(F){let{zoomLevel:Da}=F;const ll=new CustomEvent("psv:view-rotated",{detail:{...this.getXY(),z:Da}});this._parent.dispatchEvent(ll),this._onTilesStartLoading()}_onNodeChanged(F){for(let cl of document.getElementsByClassName("gvs-psv-tour-arrows"))cl.classList.remove("gvs-clicked");if(F.node.id){var Da,ll;this._parent.select(null===(Da=F.node)||void 0===Da||null===(ll=Da.sequence)||void 0===ll?void 0:ll.id,F.node.id);const cl=this.getPictureMetadata();if(!cl)return void this._parent.dispatchEvent(new CustomEvent("psv:picture-loaded",{detail:{}}));this._prevSequence=cl.sequence.id;const hl=new CustomEvent("psv:picture-loaded",{detail:{...this.getXYZ(),picId:F.node.id,lon:cl.gps[0],lat:cl.gps[1]}});this._parent.dispatchEvent(hl),cl.panorama.hdUrl?(this.setOption("downloadUrl",cl.panorama.hdUrl),this.setOption("downloadName",F.node.id+".jpg")):this.setOption("downloadUrl",null)}this._onTilesStartLoading()}_onTilesStartLoading(){this._tilesQueueTimer&&(clearInterval(this._tilesQueueTimer),delete this._tilesQueueTimer),this._tilesQueueTimer=setInterval((()=>{if(0===Object.keys(this.adapter.queue.tasks).length){if(this._myVTour.state.currentNode){const F=new Event("psv:picture-tiles-loaded",{picId:this._myVTour.state.currentNode.id});this._parent.dispatchEvent(F)}clearInterval(this._tilesQueueTimer),delete this._tilesQueueTimer}}),100)}getPictureMetadata(){var F,Da,ll;return(null===(F=this._myVTour)||void 0===F||null===(Da=F.state)||void 0===Da||null===(ll=Da.currentNode)||void 0===ll?void 0:ll.id)===dl.an?null:this._myVTour.state.currentNode?Object.assign({},this._myVTour.state.currentNode):null}_onSelect(F){var Da;F.detail.seqId&&(this._picturesSequences[F.detail.picId]=F.detail.seqId),(null===(Da=this._myVTour.getCurrentNode())||void 0===Da?void 0:Da.id)!==F.detail.picId&&(this.loader.show(),this._myVTour.setCurrentNode(F.detail.picId).catch((F=>{this.showErrorOverlay(F,this._parent._t.gvs.error_pic,!0)})))}goToNextPicture(){if(!this.getPictureMetadata())throw new Error("No picture currently selected");const F=this.getPictureMetadata().sequence.nextPic;if(!F)throw new Error("No next picture available");this._parent.select(this.getPictureMetadata().sequence.id,F)}goToPrevPicture(){if(!this.getPictureMetadata())throw new Error("No picture currently selected");const F=this.getPictureMetadata().sequence.prevPic;if(!F)throw new Error("No previous picture available");this._parent.select(this.getPictureMetadata().sequence.id,F)}async goToPosition(F,Da){return this._parent._api.getPicturesAroundCoordinates(F,Da).then((F=>{if(F.features.length>0){const Da=F.features.pop();return this._parent.select(null===Da||void 0===Da?void 0:Da.collection,Da.id),Da.id}return Promise.reject(new Error("No picture found nearby given coordinates"))}))}getXY(){const F=(0,dl.oi)(this.getPosition());return F.x=(F.x+this.getPictureOriginalHeading())%360,F}getXYZ(){const F=this.getXY();return F.z=this.getZoomLevel(),F}getPictureOriginalHeading(){var F,Da;return(null===(F=this.getPictureMetadata())||void 0===F||null===(Da=F.properties)||void 0===Da?void 0:Da["view:azimuth"])||0}getPictureRelativeHeading(){return(0,dl.dj)(this.getPictureMetadata())}clearPictureMetadataCache(){var F,Da,ll,cl;const hl=null===(F=this.getPictureMetadata())||void 0===F?void 0:F.id,dl=null===(Da=this.getPictureMetadata())||void 0===Da||null===(ll=Da.sequence)||void 0===ll?void 0:ll.id;null===(cl=this._myVTour.state.currentTooltip)||void 0===cl||cl.hide(),this._myVTour.state.currentTooltip=null,this._myVTour.state.currentNode=null,this._myVTour.state.preload={},this._myVTour.datasource.nodes={},hl&&this._parent.select(dl,hl)}setXYZ(F,Da,ll){const cl=(0,dl.y7)(F-this.getPictureOriginalHeading(),Da,ll);this.rotate({yaw:cl.yaw,pitch:cl.pitch}),this.zoom(cl.zoom)}setHigherContrast(F){this.renderer.renderer.toneMapping=F?3:0,this.renderer.renderer.toneMappingExposure=F?2:1,this.needsUpdate()}getTransitionDuration(){return this._transitionDuration}setTransitionDuration(F){if((F=parseFloat(F))<100||F>Ql)throw new Error("Invalid transition duration (should be between 100 and "+Ql+")");this._transitionDuration=F;const Da=new CustomEvent("psv:transition-duration-changed",{detail:{value:F}});this._parent.dispatchEvent(Da)}setPanorama(F,Da){const onFailure=F=>this.showErrorOverlay(F,this._parent._t.gvs.error_pic,!0);try{return super.setPanorama(F,Da).catch(onFailure)}catch(ll){onFailure(ll)}}showErrorOverlay(F,Da,ll){this._parent._loader.isVisible()||!this.overlay.isVisible()?this._parent._loader.dismiss(F,Da,ll?()=>{this._parent._loader.dismiss(),this.overlay.hide()}:void 0):(console.error(F),this.overlay.show({image:`<img style="width: 200px" src="${hl}" alt="" />`,title:this._parent._t.gvs.error,text:Da+"<br />"+this._parent._t.gvs.error_click,dissmisable:ll}))}}},5254:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>API});var cl=ll(1300),hl=ll(5071);class API{constructor(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===F||void 0===F||"string"!==typeof F)throw new Error("endpoint parameter is empty or not a valid string");if(F.startsWith("/")&&(F=window.location.href.split("/").slice(0,3).join("/")+F),!API.isValidHttpUrl(F))throw new Error(`endpoint parameter is not a valid URL: ${F}`);this._endpoint=F,this._isReady=0,this._dataBbox=null,this._fetchOpts=(null===Da||void 0===Da?void 0:Da.fetch)||{},this._metadata={},Da.skipReadLanding||(this._readLanding=fetch(F,this._getFetchOptions()).then((F=>F.json())).then((F=>this._parseLanding(F,Da))).catch((F=>(this._isReady=-1,console.error(F),Promise.reject("Viewer failed to communicate with API")))).then((()=>this._loadMapStyles(Da.style,Da.users))).then((()=>(this._isReady=1,"API is ready"))))}onceReady(){return-1==this._isReady?Promise.reject("Viewer failed to communicate with API"):1==this._isReady?Promise.resolve("API is ready"):this._readLanding}isReady(){return 1==this._isReady}getAvailableFeatures(){return Object.entries(this._endpoints).filter((F=>null!==F[1])).map((F=>F[0]))}getUnavailableFeatures(){return Object.entries(this._endpoints).filter((F=>null===F[1])).map((F=>F[0]))}_parseLanding(F,Da){var ll,cl;if(this._endpoints={collections:null,search:null,style:null,user_style:null,tiles:(null===Da||void 0===Da?void 0:Da.tiles)||null,user_tiles:null,user_search:null,collection_preview:null,item_preview:null,rss:null,report:null},!F||!F.links||!Array.isArray(F.links))throw new Error("API Landing page doesn't contain 'links' list");if(!F.stac_version.startsWith("1."))throw new Error(`API is not in a supported STAC version (Panoramax viewer supports only 1.x, API is ${F.stac_version})`);this._metadata.name=F.title||"Unnamed",this._metadata.stac_version=F.stac_version,this._metadata.geovisio_version=F.geovisio_version;const hl=[],dl=[];if([{rel:"search",type:"application/geo+json",endpointId:"search",mandatory:!0,missingIssue:"No direct access to pictures metadata."},{rel:"data",type:"application/json",endpointId:"collections",mandatory:!0,missingIssue:"No way for viewer to access sequences."},{rel:"data",type:"application/rss+xml",endpointId:"rss"},{rel:"xyz",type:"application/vnd.mapbox-vector-tile",endpointId:"tiles"},{rel:"xyz-style",type:"application/json",endpointId:"style"},{rel:"user-xyz-style",type:"application/json",endpointId:"user_style"},{rel:"user-xyz",type:"application/vnd.mapbox-vector-tile",endpointId:"user_tiles"},{rel:"user-search",type:"application/json",endpointId:"user_search",missingIssue:"Filter map data by user name will not be available."},{rel:"collection-preview",type:"image/jpeg",endpointId:"collection_preview",missingIssue:"Display of thumbnail could be slower."},{rel:"item-preview",type:"image/jpeg",endpointId:"item_preview",missingIssue:"Display of thumbnail could be slower."},{rel:"report",type:"application/json",endpointId:"report"}].forEach((Da=>{const ll=F.links.find((F=>F.rel==Da.rel&&F.type==Da.type));if(ll){if(!API.isValidHttpUrl(ll.href))throw new Error(`API endpoint '${ll.rel}' (${ll.type}) is not a valid URL: ${ll.href}`);this._endpoints[Da.endpointId]||(this._endpoints[Da.endpointId]=ll.href)}else if(!this._endpoints[Da.endpointId]){let F=`API doesn't offer a '${Da.rel}' (${Da.type}) endpoint in its links`;Da.missingIssue&&(F+=`\n${Da.missingIssue}`),Da.mandatory?hl.push(F):Da.missingIssue&&dl.push(F)}})),this._endpoints.style||this._endpoints.tiles||dl.push("API doesn't offer 'xyz' or 'xyz-style' endpoints in its links.\nMap widget will not be available."),this._endpoints.user_style||this._endpoints.user_tiles||dl.push("API doesn't offer 'user-xyz' or 'user-xyz-style' endpoints in its links.\nFilter map data by user ID will not be available."),dl.forEach((F=>console.warn(F))),hl.length>0)throw new Error(hl.join("\n"));const pl=null===F||void 0===F||null===(ll=F.extent)||void 0===ll||null===(cl=ll.spatial)||void 0===cl?void 0:cl.bbox;this._dataBbox=pl&&Array.isArray(pl)&&pl.length>0&&Array.isArray(pl[0])&&4===pl[0].length?[[pl[0][0],pl[0][1]],[pl[0][2],pl[0][3]]]:null}_loadMapStyles(F,Da){const ll=new Set(Da||[]);this.mapStyle={version:8,sources:{},layers:[],metadata:{}};const cl=[this.getMapStyle()];if("string"===typeof F){const Da=F.startsWith(this._endpoint)?this._getFetchOptions():void 0;cl.push(fetch(F,Da).then((F=>F.json())))}else"object"===typeof F&&cl.push(Promise.resolve(F));return[...ll].filter((F=>"geovisio"!==F)).forEach((F=>{cl.push(this.getUserMapStyle(F,!0))})),Promise.all(cl).then((F=>{const Da=["bearing","center","glyphs","light","name","pitch","sky","sprite","terrain","transition","zoom"];F.forEach((F=>{Da.forEach((Da=>{F[Da]&&(this.mapStyle[Da]=F[Da]||this.mapStyle[Da])})),Object.assign(this.mapStyle.sources,(null===F||void 0===F?void 0:F.sources)||{}),Object.assign(this.mapStyle.metadata,(null===F||void 0===F?void 0:F.metadata)||{}),this.mapStyle.layers=this.mapStyle.layers.concat((null===F||void 0===F?void 0:F.layers)||[])}))})).catch((F=>console.error(F)))}_getFetchOptions(){return Object.assign({signal:AbortSignal.timeout(15e3)},this._fetchOpts)}_getMapRequestTransform(){const F=this._getFetchOptions();if(delete F.signal,Object.keys(F).length>0)return Da=>{if(Da.startsWith(this._endpoint))return{url:Da,...F}}}async getSequenceItems(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isReady())throw new Error("API is not ready to use");try{return API.isIdValid(F),fetch(Da||`${this._endpoints.collections}/${F}/items`,this._getFetchOptions()).then((F=>F.json())).then((Da=>{let cl=Da;ll&&(cl.features=ll.features.concat(cl.features));const hl=Da.links.find((F=>"next"===F.rel));return hl?this.getSequenceItems(F,hl.href,cl):cl}))}catch(cl){return Promise.reject(cl)}}getPicturesAroundCoordinatesUrl(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e-4,cl=arguments.length>3?arguments[3]:void 0,hl=arguments.length>4?arguments[4]:void 0;if(!this.isReady())throw new Error("API is not ready to use");if(isNaN(parseFloat(F))||isNaN(parseFloat(Da)))throw new Error("lat and lon parameters should be valid numbers");const dl=[Da-ll,F-ll,Da+ll,F+ll].map((F=>F.toFixed(4))).join(","),pl=cl?`&limit=${cl}`:"",fl=hl?`&collections=${hl}`:"";return`${this._endpoints.search}?bbox=${dl}${pl}${fl}`}getPicturesAroundCoordinates(F,Da,ll,cl,hl){return fetch(this.getPicturesAroundCoordinatesUrl(F,Da,ll,cl,hl),this._getFetchOptions()).then((F=>F.json()))}getPictureMetadataUrl(F,Da){if(!this.isReady())throw new Error("API is not ready to use");if(API.isIdValid(F))return Da?`${this._endpoints.collections}/${Da}/items/${F}`:`${this._endpoints.search}?ids=${F}`}getMapStyle(){if(this.isReady())return this.mapStyle;let F;return F=this._endpoints.style?this._endpoints.style:this._endpoints.tiles?{version:8,sources:{geovisio:{type:"vector",tiles:[this._endpoints.tiles],minzoom:0,maxzoom:cl.oe}}}:fetch(`${this._endpoint}/map/14/0/0.mvt`,this._getFetchOptions()).then((()=>(this._endpoints.tiles=`${this._endpoint}/map/{z}/{x}/{y}.mvt`,console.log("Using fallback endpoint for vector tiles"),this.getMapStyle()))).catch((F=>(console.error(F),Promise.reject(new Error("API doesn't offer a vector tiles endpoint"))))),"string"===typeof F?fetch(F,this._getFetchOptions()).then((F=>F.json())):Promise.resolve(F)}getUserMapStyle(F){let Da;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.isReady()?F?(this._endpoints.user_style?Da=this._endpoints.user_style.replace(/\{userId\}/g,F):this._endpoints.user_tiles&&(Da={version:8,sources:{[`geovisio_${F}`]:{type:"vector",tiles:[this._endpoints.user_tiles.replace(/\{userId\}/g,F)],minzoom:0,maxzoom:cl.oe}}}),Da?"string"===typeof Da?fetch(Da,this._getFetchOptions()).then((F=>F.json())):Promise.resolve(Da):Promise.reject(new Error("API doesn't offer map style for specific user"))):Promise.reject(new Error("Parameter userId is empty")):Promise.reject(new Error("API is not ready to use"))}findThumbnailInPictureFeature(F){if(!this.isReady())throw new Error("API is not ready to use");if(!F||!F.assets)return null;let Da=null;for(let ll of Object.values(F.assets)){if(ll.roles.includes("thumbnail")&&"image/jpeg"==ll.type&&API.isValidHttpUrl(ll.href))return ll.href;ll.roles.includes("visual")&&"image/jpeg"==ll.type&&API.isValidHttpUrl(ll.href)&&(Da=ll.href)}return Da}getPictureThumbnailURLForSequence(F,Da){if(!this.isReady())throw new Error("API is not ready to use");if(this._endpoints.collection_preview)return Promise.resolve(this._endpoints.collection_preview.replace("{id}",F));if(Da&&Array.isArray(Da.links)&&Da.links.length>0){let F=Da.links.find((F=>"preview"===F.rel&&"image/jpeg"===F.type));if(F&&API.isValidHttpUrl(F.href))return Promise.resolve(F.href)}const ll=`${this._endpoints.search}?limit=1&collections=${F}`;return fetch(ll,this._getFetchOptions()).then((F=>F.json())).then((F=>Array.isArray(F.features)&&0!=F.features.length?this.findThumbnailInPictureFeature(F.features.pop()):null))}getPictureThumbnailURL(F,Da){if(!this.isReady())throw new Error("API is not ready to use");return F?this._endpoints.item_preview?Promise.resolve(this._endpoints.item_preview.replace("{id}",F)):F&&Da?fetch(`${this._endpoints.collections}/${Da}/items/${F}`,this._getFetchOptions()).then((F=>F.json())).then((F=>F?this.findThumbnailInPictureFeature(F):null)):fetch(`${this._endpoints.search}?ids=${F}`,this._getFetchOptions()).then((F=>F.json())).then((F=>F&&Array.isArray(F.features)&&0!=F.features.length?this.findThumbnailInPictureFeature(F.features.pop()):null)):Promise.resolve(null)}getRSSURL(F){if(!this.isReady())throw new Error("API is not ready to use");if(this._endpoints.rss){let Da=this._endpoints.rss;return F&&(Da+=Da.includes("?")?"&":"?",Da+="bbox="+[F.getWest(),F.getSouth(),F.getEast(),F.getNorth()].join(",")),Da}return null}getSequenceMetadataUrl(F){if(!this.isReady())throw new Error("API is not ready to use");return`${this._endpoints.collections}/${F}`}getDataBbox(){if(!this.isReady())throw new Error("API is not ready to use");return this._dataBbox}searchUsers(F){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.user_search)throw new Error("User search is not available");return fetch(`${this._endpoints.user_search}?q=${F}`,this._getFetchOptions()).then((F=>F.json())).then((F=>(null===F||void 0===F?void 0:F.features)||null))}getUserName(F){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.user_search)throw new Error("User search is not available");return fetch(this._endpoints.user_search.replace(/\/search$/,`/${F}`),this._getFetchOptions()).then((F=>F.json())).then((F=>(null===F||void 0===F?void 0:F.name)||null))}sendReport(F){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.report)throw new Error("Report sending is not available");const Da={...this._getFetchOptions(),method:"POST",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}};return fetch(this._endpoints.report,Da).then((async F=>{if(F.status>=400){let ll=await F.text();try{ll=JSON.parse(ll).message}catch(Da){}return Promise.reject(ll)}return F.json()}))}static isValidHttpUrl(F){let Da;try{Da=new URL(F)}catch(ll){return!1}return"http:"===Da.protocol||"https:"===Da.protocol}static isIdValid(F){if(!F||"string"!==typeof F||0===F.length||F===hl.an)throw new Error("id should be a valid picture unique identifier");return!0}}},654:(F,Da,ll)=>{"use strict";function getExifFloat(F){if(!([null,void 0,""].includes(F)||"string"===typeof F&&""===F.trim())){if("number"===typeof F)return F;if("string"!==typeof F);else{if(/^-?\d+(\.\d+)?\/-?\d+(\.\d+)?$/.test(F)){const Da=F.split("/").map((F=>parseFloat(F)));return Da[0]/Da[1]}try{return parseFloat(F)}catch(Da){}}}}function getGPSPrecision(F){var Da,ll,cl,hl,dl;let pl="\u2753";const fl=(null===F||void 0===F||null===(Da=F.properties)||void 0===Da?void 0:Da["quality:horizontal_accuracy"])||getExifFloat(null===F||void 0===F||null===(ll=F.properties)||void 0===ll||null===(cl=ll.exif)||void 0===cl?void 0:cl["Exif.GPSInfo.GPSHPositioningError"]),Al=getExifFloat(null===F||void 0===F||null===(hl=F.properties)||void 0===hl||null===(dl=hl.exif)||void 0===dl?void 0:dl["Exif.GPSInfo.GPSDOP"]);return void 0!==fl?pl=`${fl} m`:void 0!==Al&&(pl=Al<1?"ideal":Al<2?"excellent":Al<5?"good":Al<10?"moderate":Al<20?"fair":"poor"),pl}function getSphereCorrection(F){var Da,ll,cl,hl;let dl=null===(Da=F.properties)||void 0===Da?void 0:Da["view:azimuth"];if(void 0===dl){var pl,fl;const Da=getExifFloat(null===(pl=F.properties)||void 0===pl||null===(fl=pl.exif)||void 0===fl?void 0:fl["Exif.GPSInfo.GPSImgDirection"]);void 0!==Da&&(dl=Da)}dl=dl||0;let Al=null===(ll=F.properties)||void 0===ll?void 0:ll["pers:yaw"],bl=["Xmp.GPano.PoseHeadingDegrees","Xmp.Camera.Yaw","Exif.MpfInfo.MPFYawAngle"];if(void 0===Al)for(let su of bl){var kl,Dl;const Da=getExifFloat(null===(kl=F.properties)||void 0===kl||null===(Dl=kl.exif)||void 0===Dl?void 0:Dl[su]);if(void 0!==Da){Al=Da;break}}Al=Al||0,Math.round(dl)===Math.round(Al)&&Al>0&&console.warn("Picture with UUID",F.id,"has same GPS Image direction and Yaw, could cause rendering issues");let Wl=null===(cl=F.properties)||void 0===cl?void 0:cl["pers:pitch"];if(bl=["Xmp.GPano.PosePitchDegrees","Xmp.Camera.Pitch","Exif.MpfInfo.MPFPitchAngle"],void 0===Wl)for(let su of bl){var Ql,wc;const Da=getExifFloat(null===(Ql=F.properties)||void 0===Ql||null===(wc=Ql.exif)||void 0===wc?void 0:wc[su]);if(void 0!==Da){Wl=Da;break}}Wl=Wl||0;let Sc=null===(hl=F.properties)||void 0===hl?void 0:hl["pers:roll"];if(bl=["Xmp.GPano.PoseRollDegrees","Xmp.Camera.Roll","Exif.MpfInfo.MPFRollAngle"],void 0===Sc)for(let su of bl){var eu,iu;const Da=getExifFloat(null===(eu=F.properties)||void 0===eu||null===(iu=eu.exif)||void 0===iu?void 0:iu[su]);if(void 0!==Da){Sc=Da;break}}return Sc=Sc||0,0!==Wl&&0!==Sc?{pan:Al*Math.PI/180,tilt:Wl*Math.PI/180,roll:Sc*Math.PI/180}:{}}function getCroppedPanoData(F){var Da,ll;let cl;var hl,dl;if(null!==(Da=F.properties)&&void 0!==Da&&Da["pers:interior_orientation"]&&(null!==(hl=F.properties["pers:interior_orientation"])&&void 0!==hl&&hl.visible_area&&null!==(dl=F.properties["pers:interior_orientation"])&&void 0!==dl&&dl.sensor_array_dimensions)){const Da=F.properties["pers:interior_orientation"].visible_area,ll=F.properties["pers:interior_orientation"].sensor_array_dimensions;try{cl={fullWidth:parseInt(ll[0]),fullHeight:parseInt(ll[1]),croppedX:parseInt(Da[0]),croppedY:parseInt(Da[1]),croppedWidth:parseInt(ll[0])-parseInt(Da[2])-parseInt(Da[0]),croppedHeight:parseInt(ll[1])-parseInt(Da[3])-parseInt(Da[1])}}catch(Wl){console.warn("Invalid pers:interior_orientation values for cropped panorama "+F.id)}}if(!cl&&null!==(ll=F.properties)&&void 0!==ll&&ll.exif)try{var pl,fl,Al,bl,kl,Dl;cl={fullWidth:parseInt(null===(pl=F.properties.exif)||void 0===pl?void 0:pl["Xmp.GPano.FullPanoWidthPixels"]),fullHeight:parseInt(null===(fl=F.properties.exif)||void 0===fl?void 0:fl["Xmp.GPano.FullPanoHeightPixels"]),croppedX:parseInt(null===(Al=F.properties.exif)||void 0===Al?void 0:Al["Xmp.GPano.CroppedAreaLeftPixels"]),croppedY:parseInt(null===(bl=F.properties.exif)||void 0===bl?void 0:bl["Xmp.GPano.CroppedAreaTopPixels"]),croppedWidth:parseInt(null===(kl=F.properties.exif)||void 0===kl?void 0:kl["Xmp.GPano.CroppedAreaImageWidthPixels"]),croppedHeight:parseInt(null===(Dl=F.properties.exif)||void 0===Dl?void 0:Dl["Xmp.GPano.CroppedAreaImageHeightPixels"])}}catch(Wl){console.warn("Invalid XMP.GPano values for cropped panorama "+F.id)}return cl&&(cl=Object.fromEntries(Object.entries(cl||{}).filter((F=>!isNaN(F[1])))),cl.fullWidth==cl.croppedWidth&&cl.fullHeight==cl.croppedHeight&&(cl={})),cl||{}}ll.d(Da,{MY:()=>getSphereCorrection,Pu:()=>getGPSPrecision,qx:()=>getCroppedPanoData})},6980:(F,Da,ll)=>{"use strict";ll.d(Da,{$:()=>getTranslations,D:()=>autoDetectLocale});var cl=ll(4149),hl=ll(369),dl=ll(389),pl=ll(9946),fl=ll(8302),Al=ll(5222),bl=ll(6909),kl=ll(4895),Dl=ll(9026),Wl=ll(6984);const Ql="en",wc={da:cl,de:hl,eo:pl,en:dl,es:fl,fr:Al,hu:bl,it:kl,pl:Dl,zh_Hant:Wl};function autoDetectLocale(F,Da){for(const ll of window.navigator.languages){let Da=ll;switch(Da){case"zh-TW":case"zh-HK":case"zh-MO":Da="zh_Hant";break;case"zh-CN":case"zh-SG":Da="zh_Hans";break;default:Da.length>2&&(Da=ll.substring(0,2))}const cl=F.find((F=>F===Da));if(cl)return cl}return Da}function getTranslations(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const Da=JSON.parse(JSON.stringify(dl));let ll;if(F||(F=autoDetectLocale(Object.keys(wc),Ql)),wc[F]&&"en"!==F&&(ll=wc[F]),F.length>2){const Da=F.substring(0,2);wc[Da]&&(ll=wc[Da])}return ll&&Object.entries(ll).forEach((F=>{let[ll,cl]=F;Object.entries(cl).forEach((F=>{let[cl,hl]=F;Array.isArray(hl)&&(hl=hl.filter((F=>null!=F))),Da[ll][cl]=hl}))})),Da}},1300:(F,Da,ll)=>{"use strict";ll.d(Da,{AV:()=>Al,CG:()=>combineStyles,Hj:()=>switchCoefValue,IN:()=>getUserLayerId,Kf:()=>forwardGeocodingBAN,No:()=>getThumbGif,Oq:()=>getMissingLayerStyles,RK:()=>forwardGeocodingNominatim,Sf:()=>isLabelLayer,VM:()=>Dl,d3:()=>wc,e8:()=>getUserSourceId,m5:()=>bl,oe:()=>kl});var cl=ll(927),hl=ll.n(cl),dl=ll(6883),pl=ll(5071),fl=ll(6980);const Al="https://panoramax.openstreetmap.fr/pmtiles/basic.json",bl="gvs-aerial",kl=5,Dl={PICTURES:{paint:{"circle-radius":["interpolate",["linear"],["zoom"],0,4.5,24,12],"circle-opacity":1,"circle-stroke-color":"#ffffff","circle-stroke-width":["interpolate",["linear"],["zoom"],0,1,24,3]},layout:{}},PICTURES_SYMBOLS:{paint:{"icon-opacity":1},layout:{"icon-image":"default-marker","icon-size":["interpolate",["linear"],["zoom"],0,.8,10,1,24,1.5],"icon-rotate":["to-number",["get","heading"]],"icon-allow-overlap":!0}},SEQUENCES:{paint:{"line-width":["interpolate",["linear"],["zoom"],0,.5,10,2,14,4,16,5,22,3]},layout:{"line-cap":"square"}},SEQUENCES_PLUS:{paint:{"line-width":["interpolate",["linear"],["zoom"],0,15,1,30,2,20,10,30,24,10],"line-opacity":1,"line-color":"#ff0000"},layout:{"line-cap":"square"}}},Wl=["case",["==",["get","type"],"equirectangular"],["case",["has","h_pixel_density"],["step",["get","h_pixel_density"],...pl.Av],1],["case",["has","h_pixel_density"],["step",["get","h_pixel_density"],...pl.U3],1]],Ql=["case",["has","gps_accuracy"],["step",["get","gps_accuracy"],...pl.ql],1],wc=["round",["+",["*",Wl,pl.Xu],["*",Ql,pl.Bg]]];function getThumbGif(F){const Da=document.createElement("img");return Da.src=dl,Da.alt=F.loading,Da.title=F.loading,Da.classList.add("gvs-map-thumb","gvs-map-thumb-loader"),Da}function isLabelLayer(F){var Da;return"symbol"===F.type&&(null===F||void 0===F||null===(Da=F.layout)||void 0===Da?void 0:Da["text-field"])&&(void 0===F.minzoom||F.minzoom<15)}function combineStyles(F,Da){var ll,cl,hl;const dl=F._api.getMapStyle();if(dl.layers=dl.layers.concat(getMissingLayerStyles(dl.sources,dl.layers)),dl.metadata||(dl.metadata={}),Da.supplementaryStyle&&(Object.assign(dl.sources,Da.supplementaryStyle.sources||{}),Object.assign(dl.metadata,Da.supplementaryStyle.metadata||{}),dl.layers=dl.layers.concat(Da.supplementaryStyle.layers||[])),Da.raster&&(dl.sources["gvs-aerial"]=Da.raster,dl.layers.push({id:bl,type:"raster",source:"gvs-aerial",layout:{visibility:"aerial"===Da.background?"visible":"none"}})),null!==(ll=F._options)&&void 0!==ll&&null!==(cl=ll.users)&&void 0!==cl&&cl.includes("geovisio")||dl.layers.forEach((F=>{"geovisio"===F.source&&(F.layout||(F.layout={}),F.layout.visibility="none")})),dl.layers.sort(((F,Da)=>isLabelLayer(F)&&!isLabelLayer(Da)?1:!isLabelLayer(F)&&isLabelLayer(Da)?-1:F.id.startsWith("geovisio")&&!Da.id.startsWith("geovisio")?1:!F.id.startsWith("geovisio")&&Da.id.startsWith("geovisio")?-1:F.id.endsWith("_pictures")&&!Da.id.endsWith("_pictures")?1:!F.id.endsWith("_pictures")&&Da.id.endsWith("_pictures")?-1:0)),null!==(hl=dl.metadata)&&void 0!==hl&&hl["panoramax:locales"]||(dl.metadata["panoramax:locales"]=["fr","en","de","es","ru","pt","zh","hi","latin"]),dl.metadata["panoramax:locales"]){let Da=F._options.lang||(0,fl.D)(dl.metadata["panoramax:locales"],"latin");Da.includes("-")&&(Da=Da.split("-")[0]),Da.includes("_")&&(Da=Da.split("_")[0]),dl.layers.forEach((F=>{isLabelLayer(F)&&F.layout["text-field"].includes("name:latin")&&(F.layout["text-field"]=["coalesce",["get",`name:${Da}`],["get","name:latin"],["get","name"]])}))}const pl=dl.layers.find((F=>"place_label_city"==F.id));let Al=dl.layers.find((F=>"place_label_capital"==F.id));return pl&&!Al&&(pl.paint={"text-color":"hsl(0, 0%, 0%)","text-halo-blur":0,"text-halo-color":"hsla(0, 0%, 100%, 1)","text-halo-width":3},pl.layout["text-letter-spacing"]=.1,Al=JSON.parse(JSON.stringify(pl)),Al.id="place_label_capital",Al.filter.push(["<=","capital",2]),pl.filter.push([">","capital",2]),dl.layers.push(Al)),dl}function getMissingLayerStyles(F,Da){const ll=[];return Object.keys(F).filter((F=>void 0===Da.find((Da=>(null===Da||void 0===Da?void 0:Da.source)===F)))).forEach((F=>{F.startsWith("geovisio")&&(ll.push({id:`${F}_sequences`,type:"line",source:F,"source-layer":"sequences",layout:{...Dl.SEQUENCES.layout},paint:{...Dl.SEQUENCES.paint,"line-color":pl.lm.BASE}}),ll.push({id:`${F}_sequences_plus`,type:"line",source:F,"source-layer":"sequences",layout:{...Dl.SEQUENCES_PLUS.layout},paint:{...Dl.SEQUENCES_PLUS.paint}}),ll.push({id:`${F}_pictures_symbols`,type:"symbol",source:F,"source-layer":"pictures",...Dl.PICTURES_SYMBOLS}),ll.push({id:`${F}_pictures_symbols`,type:"symbol",source:F,"source-layer":"pictures",...Dl.PICTURES_SYMBOLS}),ll.push({id:`${F}_pictures`,type:"circle",source:F,"source-layer":"pictures",layout:{...Dl.PICTURES.layout},paint:{...Dl.PICTURES.paint,"circle-color":pl.lm.BASE}}))})),Da.filter((F=>{var ll;return(null===F||void 0===F||null===(ll=F.id)||void 0===ll?void 0:ll.endsWith("_sequences"))&&void 0===Da.find((Da=>(null===Da||void 0===Da?void 0:Da.id)===F.id+"_plus"))})).forEach((F=>{ll.push({id:`${F.id}_plus`,type:"line",source:F.source,"source-layer":F["source-layer"],layout:{...Dl.SEQUENCES_PLUS.layout},paint:{...Dl.SEQUENCES_PLUS.paint}})})),Da.filter((F=>{var ll;return(null===F||void 0===F||null===(ll=F.id)||void 0===ll?void 0:ll.endsWith("_pictures"))&&void 0===Da.find((Da=>(null===Da||void 0===Da?void 0:Da.id)===F.id+"_symbols"))})).forEach((F=>{ll.unshift({id:`${F.id}_symbols`,type:"symbol",source:F.source,"source-layer":"pictures",...Dl.PICTURES_SYMBOLS}),F.paint=Object.assign(F.paint||{},Dl.PICTURES.paint),F.layout=Object.assign(F.layout||{},Dl.PICTURES.layout)})),ll}function getUserLayerId(F,Da){return`${getUserSourceId(F)}_${Da}`}function getUserSourceId(F){return"geovisio"===F?"geovisio":"geovisio_"+F}function switchCoefValue(F,Da){if(Array.isArray(F))return F.map((F=>switchCoefValue(F,Da)));if("object"===typeof F&&null!==F){const ll={};for(const cl in F)ll[cl]=switchCoefValue(F[cl],Da);return ll}return"string"===typeof F&&F.startsWith("coef")?Da:F}function geocoderParamsToURLString(F){let Da={};return Object.entries(F).filter((F=>void 0!==F[1]&&null!==F[1])).forEach((F=>Da[F[0]]=F[1])),new URLSearchParams(Da).toString()}function forwardGeocodingNominatim(F){const Da={q:F.query,countrycodes:F.countries,limit:F.limit,viewbox:F.bbox};return fetch(`https://nominatim.openstreetmap.org/search?${geocoderParamsToURLString(Da)}&format=geojson&polygon_geojson=1&addressdetails=1`).then((F=>F.json())).then((F=>{const Da={features:[]},ll=[];return F.features.forEach((F=>{ll.includes(F.properties.display_name)||(Da.features.push({place_type:["place"],place_name:F.properties.display_name,bounds:new(hl().LngLatBounds)(F.bbox)}),ll.push(F.properties.display_name))})),Da}))}function forwardGeocodingBAN(F){const Da={q:F.query,limit:F.limit};if("string"===typeof F.proximity){const[ll,cl]=F.proximity.split(",").map((F=>parseFloat(F.trim())));Da.lat=ll,Da.lon=cl}const ll={housenumber:20,street:18,locality:15,municipality:12};return fetch(`https://api-adresse.data.gouv.fr/search/?${geocoderParamsToURLString(Da)}`).then((F=>F.json())).then((F=>(F.features=F.features.map((F=>{return{place_type:["place"],place_name:(Da=F.properties,[Da.name,Da.district,Da.city].filter((F=>F)).join(", ")),center:new(hl().LngLat)(...F.geometry.coordinates),zoom:ll[F.properties.type]};var Da})),F)))}},3727:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>PhotoAdapter});var cl=ll(3890);class PhotoAdapter extends cl.D{constructor(F,Da){super(F,Da),this._shouldGoFast=Da.shouldGoFast||(()=>!0)}loadTexture(F,Da){return F.origBaseUrl?F.baseUrl=F.origBaseUrl:F.origBaseUrl=F.baseUrl,this._shouldGoFast()&&F.thumbUrl&&!F.hdLoaded&&1==F.rows&&(F.baseUrl=F.thumbUrl),super.loadTexture(F,Da).then((Da=>(F.baseUrl===F.origBaseUrl&&(F.hdLoaded=!0),Da)))}__loadTiles(F){this._shouldGoFast()||super.__loadTiles(F)}}},5071:(F,Da,ll)=>{"use strict";ll.d(Da,{Av:()=>kl,Bg:()=>Ql,Ch:()=>getGrade,GZ:()=>isInIframe,I0:()=>linkMapAndPhoto,KF:()=>isInternetFast,U3:()=>bl,Xu:()=>Wl,Yf:()=>getDistance,an:()=>pl,bG:()=>getUserAccount,dK:()=>josmBboxParameters,dj:()=>getRelativeHeading,fW:()=>Al,lm:()=>fl,oi:()=>positionToXYZ,ql:()=>Dl,rs:()=>apiFeatureToPSVNode,y7:()=>xyzToPosition});var cl=ll(654),hl=ll(8407),dl=ll(6830);const pl="geovisio-fake-id-0",fl={BASE:"#FF6F00",SELECTED:"#1E88E5",HIDDEN:"#34495E",NEXT:"#ffab40",QUALI_1:"#00695C",QUALI_2:"#fd8d3c",PALETTE_1:"#fecc5c",PALETTE_2:"#fd8d3c",PALETTE_3:"#f03b20",PALETTE_4:"#bd0026"},Al=(Object.fromEntries(Object.entries(fl).map((F=>(F[1]=parseInt(F[1].slice(1),16),F)))),[{color:"#007f4e",label:"A"},{color:"#72b043",label:"B"},{color:"#b5be2f",label:"C"},{color:"#f8cc1b",label:"D"},{color:"#f6a020",label:"E"}]),bl=[1,10,2,15,3,30,4],kl=[3,15,4,30,5],Dl=[5,1.01,4,2.01,3,5.01,2,10.01,1],Wl=.8,Ql=.2,wc=svgToPSVLink(hl,"white"),Sc=svgToPSVLink(dl,fl.NEXT);function getGrade(F,Da){if(null===Da||void 0===Da||""===Da)return null;for(let ll=0;ll<F.length;ll+=2){const cl=F[ll];if(Da<F[ll+1])return cl}return F[F.length-1]}function getDistance(F,Da){const ll=F[0]-Da[0],cl=F[1]-Da[1];return Math.sqrt(ll*ll+cl*cl)}function sortPicturesInDirection(F){return(Da,ll)=>"related"!=Da.rel&&"related"!=ll.rel?0:"related"!=Da.rel?-1:"related"!=ll.rel?1:Da.date==ll.date?getDistance(F,Da.geometry.coordinates)-getDistance(F,ll.geometry.coordinates):ll.date.localeCompare(Da.date)}function svgToPSVLink(F,Da){try{const ll=atob(F.replace(/^data:image\/svg\+xml;base64,/,"")),cl=(new DOMParser).parseFromString(ll,"image/svg+xml").childNodes[0],hl=document.createElement("button");return hl.appendChild(cl),hl.classList.add("gvs-psv-tour-arrows"),hl.style.color=Da,hl}catch(ll){const Da=document.createElement("img");return Da.src=F,Da.alt="",Da}}function getArrow(F){const Da=F.cloneNode(!0);return Da.addEventListener("pointerup",(()=>Da.classList.add("gvs-clicked"))),Da}function getAzimuth(F,Da){return(Math.atan2(Da[0]-F[0],Da[1]-F[1])*(180/Math.PI)+360)%360}function getRelativeHeading(F){var Da,ll;if(!F)throw new Error("No picture selected");let cl,hl;const dl=F.properties["view:azimuth"];if(null!==F&&void 0!==F&&null!==(Da=F.sequence)&&void 0!==Da&&Da.prevPic){var pl;const Da=null===F||void 0===F||null===(pl=F.links)||void 0===pl?void 0:pl.find((Da=>Da.nodeId===F.sequence.prevPic));Da&&(cl=(dl-getAzimuth(Da.gps,F.gps)+180)%360-180)}if(null!==F&&void 0!==F&&null!==(ll=F.sequence)&&void 0!==ll&&ll.nextPic){var fl;const Da=null===F||void 0===F||null===(fl=F.links)||void 0===fl?void 0:fl.find((Da=>Da.nodeId===F.sequence.nextPic));Da&&(hl=(dl-getAzimuth(F.gps,Da.gps)+180)%360-180)}return void 0!==cl?cl:void 0!==hl?hl:0}function getSimplifiedAngle(F,Da){const ll=Math.atan2(Da[0]-F[0],Da[1]-F[1])*(180/Math.PI);return Math.abs(ll)<30?"N":ll>=30&&ll<90?"ENE":ll>=90&&ll<150?"ESE":Math.abs(ll)>=150?"S":ll<=-30&&ll>-90?"WNW":ll<=-90&&ll>-150?"WSW":void 0}function positionToXYZ(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const ll={x:F.yaw*(180/Math.PI),y:F.pitch*(180/Math.PI)};return void 0!==Da&&(ll.z=Da),ll}function xyzToPosition(F,Da,ll){return{yaw:F/(180/Math.PI),pitch:Da/(180/Math.PI),zoom:ll}}function getNodeCaption(F,Da){var ll,cl,hl;const dl={};if(null!==F&&void 0!==F&&null!==(ll=F.properties)&&void 0!==ll&&ll.datetimetz?dl.date=new Date(F.properties.datetimetz):null!==F&&void 0!==F&&null!==(cl=F.properties)&&void 0!==cl&&cl.datetime&&(dl.date=new Date(F.properties.datetime)),null!==F&&void 0!==F&&F.providers){var pl;const Da=null===F||void 0===F||null===(pl=F.providers)||void 0===pl?void 0:pl.filter((F=>{var Da;return null===F||void 0===F||null===(Da=F.roles)||void 0===Da?void 0:Da.includes("producer")}));if((null===Da||void 0===Da?void 0:Da.length)>=0){const F={};Da.map((F=>F.name)).forEach((Da=>{const ll=Da.toLowerCase().replace(/\s/g,"");F[ll]?F[ll].push(Da):F[ll]=[Da]})),dl.producer=[],Object.values(F).forEach((F=>{const Da=F[0],ll=F.find((F=>F.toLowerCase()!=F));dl.producer.push(ll||Da)})),dl.producer=dl.producer.join(", ")}}if(null!==F&&void 0!==F&&null!==(hl=F.properties)&&void 0!==hl&&hl.license&&(dl.license=F.properties.license,null!==F&&void 0!==F&&F.links)){const ll=F.links.find((F=>"license"===(null===F||void 0===F?void 0:F.rel)));ll&&(dl.license=`<a href="${ll.href}" title="${Da.gvs.metadata_general_license_link}" target="_blank">${dl.license}</a>`)}return dl}function linkMapAndPhoto(F){const onPicLoad=Da=>{Da.detail.picId&&Da.detail.picId!==pl?(F.map.displayPictureMarker(Da.detail.lon,Da.detail.lat,F.psv.getXY().x),null!==F&&void 0!==F&&F.isMapWide()&&(null===F||void 0===F||F.setUnfocusedVisible(!0))):(F.map.displayPictureMarker(),null!==F&&void 0!==F&&F.isMapWide()&&(null===F||void 0===F||F.setUnfocusedVisible(!1)))};F.addEventListener("psv:picture-loading",onPicLoad),F.addEventListener("psv:picture-loaded",onPicLoad),F.addEventListener("psv:view-rotated",(()=>{let Da=F.psv.getPosition().yaw*(180/Math.PI);Da+=F.psv.getPictureOriginalHeading(),F.map._picMarker.setRotation(Da)})),F.addEventListener("psv:picture-preview-started",(Da=>{F.map._picMarkerPreview.setLngLat(Da.detail.coordinates).setRotation(Da.detail.direction||0).addTo(F.map)})),F.addEventListener("psv:picture-preview-stopped",(()=>{F.map._picMarkerPreview.remove()})),F.addEventListener("psv:picture-loaded",(Da=>{F.isWidthSmall()&&F._picPopup&&Da.detail.picId==F._picPopup._picId&&F._picPopup.remove()})),F.addEventListener("map:picture-click",(Da=>{F.select(Da.detail.seqId,Da.detail.picId),!F.psv._myVTour.state.currentNode&&null!==F&&void 0!==F&&F.setFocus&&F.setFocus("pic")})),F.addEventListener("map:sequence-click",(Da=>{F._api.getPicturesAroundCoordinates(Da.detail.coordinates.lat,Da.detail.coordinates.lng,1,1,Da.detail.seqId).then((Da=>{var ll,cl;(null===Da||void 0===Da||null===(ll=Da.features)||void 0===ll?void 0:ll.length)>0&&(F.select(null===(cl=Da.features[0])||void 0===cl?void 0:cl.collection,Da.features[0].id),!F.psv.getPictureMetadata()&&null!==F&&void 0!==F&&F.setFocus&&F.setFocus("pic"))}))}))}function apiFeatureToPSVNode(F,Da){var ll,hl,dl,pl,fl,Al,bl;let kl=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Dl=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const Wl=null!=(null===(ll=F.properties)||void 0===ll||null===(hl=ll["pers:interior_orientation"])||void 0===hl?void 0:hl.field_of_view);let Ql=Wl?parseInt(F.properties["pers:interior_orientation"].field_of_view):70;const wc=360===Ql,Sc=(Object.values(F.assets).find((F=>{var Da;return null===F||void 0===F||null===(Da=F.roles)||void 0===Da?void 0:Da.includes("data")}))||{}).href,eu=null===F||void 0===F||null===(dl=F.properties)||void 0===dl||null===(pl=dl["tiles:tile_matrix_sets"])||void 0===pl?void 0:pl.geovisio,iu=F.links.find((F=>"prev"===(null===F||void 0===F?void 0:F.rel)&&"application/geo+json"===(null===F||void 0===F?void 0:F.type))),su=F.links.find((F=>"next"===(null===F||void 0===F?void 0:F.rel)&&"application/geo+json"===(null===F||void 0===F?void 0:F.type))),cu=Object.values(F.assets).find((F=>{var Da;return(null===(Da=F.roles)||void 0===Da?void 0:Da.includes("visual"))&&"image/webp"===F.type})),uu=Object.values(F.assets).find((F=>{var Da;return(null===(Da=F.roles)||void 0===Da?void 0:Da.includes("visual"))&&"image/jpeg"===F.type})),hu=(cu||uu).href,Lu=null===(fl=Object.values(F.assets).find((F=>{var Da;return(null===(Da=F.roles)||void 0===Da?void 0:Da.includes("thumbnail"))&&"image/jpeg"===F.type})))||void 0===fl?void 0:fl.href,zu=(null===F||void 0===F||null===(Al=F.asset_templates)||void 0===Al?void 0:Al.tiles_webp)||(null===F||void 0===F||null===(bl=F.asset_templates)||void 0===bl?void 0:bl.tiles),Du=(0,cl.qx)(F);let Nu;Nu=!zu&&Object.keys(Du).length>0?{baseUrl:kl?Sc:hu,origBaseUrl:kl?Sc:hu,hdUrl:Sc,thumbUrl:Lu,basePanoData:Du,cols:2,rows:1,width:2,tileUrl:()=>null}:wc&&eu?{baseUrl:hu,origBaseUrl:hu,basePanoData:F=>({fullWidth:F.width,fullHeight:F.height}),hdUrl:Sc,thumbUrl:Lu,cols:eu&&eu.tileMatrix[0].matrixWidth,rows:eu&&eu.tileMatrix[0].matrixHeight,width:eu&&eu.tileMatrix[0].matrixWidth*eu.tileMatrix[0].tileWidth,tileUrl:eu&&((F,Da)=>zu.href.replace(/\{TileCol\}/g,F).replace(/\{TileRow\}/g,Da))}:{baseUrl:kl?Sc:hu,origBaseUrl:kl?Sc:hu,hdUrl:Sc,thumbUrl:Lu,basePanoData:F=>{F.width<F.height&&!Wl&&(Ql=35);const Da=Ql*F.height/F.width,ll=360*F.width/Ql,cl=180*F.height/Da;return{fullWidth:ll,fullHeight:cl,croppedWidth:F.width,croppedHeight:F.height,croppedX:(ll-F.width)/2,croppedY:(cl-F.height)/2}},cols:2,rows:1,width:2,tileUrl:()=>null};return{id:F.id,caption:getNodeCaption(F,Da),panorama:Nu,links:filterRelatedPicsLinks(F,Dl),gps:F.geometry.coordinates,sequence:{id:F.collection,nextPic:su?su.id:void 0,prevPic:iu?iu.id:void 0},sphereCorrection:(0,cl.MY)(F),horizontalFov:Ql,properties:F.properties}}function filterRelatedPicsLinks(F){var Da;let ll=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const cl=F.links.filter((F=>["next","prev","related"].includes(null===F||void 0===F?void 0:F.rel)&&"application/geo+json"===(null===F||void 0===F?void 0:F.type))).filter((F=>!ll||ll(F))).map((F=>(F.datetime&&(F.date=F.datetime.split("T")[0]),F))),hl=F.geometry.coordinates,dl=[],pl={N:[],ENE:[],ESE:[],S:[],WSW:[],WNW:[]};for(let Al of cl){pl[getSimplifiedAngle(hl,Al.geometry.coordinates)].push(Al)}for(let Al in pl){const F=pl[Al];0!=F.length&&(F.sort(sortPicturesInDirection(hl)),dl.push(F.shift()))}let arrowStyle=F=>"related"===F.rel?{element:getArrow(Sc),size:{width:128/3,height:128}}:{element:getArrow(wc),size:{width:75,height:75}};const fl=-((null===(Da=F.properties)||void 0===Da?void 0:Da["view:azimuth"])||0)*(Math.PI/180);return dl.map((F=>({nodeId:F.id,gps:F.geometry.coordinates,arrowStyle:arrowStyle(F),linkOffset:{yaw:fl}})))}function josmBboxParameters(F){if(F){var Da;const ll=F.gps,cl=null===F||void 0===F||null===(Da=F.properties)||void 0===Da?void 0:Da["view:azimuth"],hl=2e-4,dl={left:ll[0]-(null===cl||cl>=180?hl:0),right:ll[0]+(null===cl||cl<=180?hl:0),top:ll[1]+(null===cl||cl<=90||cl>=270?hl:0),bottom:ll[1]-(null===cl||cl>=90&&cl<=270?hl:0),changeset_source:"Panoramax"};return Object.entries(dl).map((F=>F.join("="))).join("&")}return null}function isInIframe(){try{return window.self!==window.top}catch(F){return!0}}const eu=10,iu="gvs-internet-fast",su="https://panoramax.openstreetmap.fr/images/05/ca/2c/98/0111-4baf-b6f3-587bb8847d2e.jpg";function isInternetFast(){try{const F=navigator.connection.downlink;return Promise.resolve(F>=eu)}catch(F){try{const F=sessionStorage.getItem(iu);if(["true","false"].includes(F))return Promise.resolve("true"===F);const Da=(new Date).getTime();return fetch(su+"?nocache="+Da).then((async F=>[F,await F.blob()])).then((F=>{let[ll,cl]=F;const hl=8*parseInt(ll.headers.get("Content-Length")||cl.size)/1024/1024/(((new Date).getTime()-Da)/1e3)>=eu;return sessionStorage.setItem(iu,hl?"true":"false"),hl})).catch((F=>(console.warn("Failed to run speedtest",F),!1)))}catch(F){return Promise.resolve(!1)}}}function getCookie(F){var Da,ll,cl;const hl=null===(Da=document.cookie)||void 0===Da||null===(ll=Da.split(";"))||void 0===ll||null===(cl=ll.find((Da=>Da.trimStart().startsWith(`${F}=`))))||void 0===cl?void 0:cl.split("=");if(hl)return hl.shift(),hl.join("=")}function getUserAccount(){const F=getCookie("session"),Da=getCookie("user_id"),ll=getCookie("user_name");return F&&Da&&ll?{id:Da,name:ll}:null}},4683:(F,Da,ll)=>{"use strict";ll.d(Da,{$c:()=>enableCopyButton,Ij:()=>createHeader,Lt:()=>showQualityScore,OZ:()=>createSearchBar,Qt:()=>fat,Tf:()=>createButton,W_:()=>closeOtherPanels,Y8:()=>enableButton,ZR:()=>createTable,do:()=>createButtonSpan,fM:()=>showGrade,fP:()=>createLinkCell,fa:()=>fa,fp:()=>createLabel,np:()=>createExpandableButton,t_:()=>createPanel,vI:()=>disableButton,wj:()=>createGroup});var cl=ll(3710),hl=ll(6627),dl=ll(4011),pl=ll(2593),fl=ll(7761),Al=ll(3444),bl=ll(174),kl=ll(4189),Dl=ll(4780),Wl=ll(7325),Ql=ll(5071);function createButton(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,cl=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const hl=document.createElement("button");return Da&&(Da instanceof HTMLElement||Da instanceof Node?hl.appendChild(Da):hl.innerHTML=Da),hl.id=F,Array.isArray(cl)&&(cl=cl.filter((F=>null!=F&&F.length>0))),hl.classList.add("gvs-btn","gvs-widget-bg",...cl),ll&&(hl.title=ll),hl}function createExpandableButton(F,Da,ll,cl){let dl=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const fl=document.createElement("button");if(fl.id=F,fl.appendChild(fa(Da)),cl._viewer.isWidthSmall())fl.title=ll;else{if(fl.appendChild(document.createTextNode(ll)),dl.includes("gvs-filter-unset-btn")){const F=fa(hl.Jy,{classes:["gvs-filter-unset-btn"]});F.style.display="none",fl.appendChild(F),dl=dl.filter((F=>"gvs-filter-unset-btn"!==F))}fl.appendChild(fa(pl.Jt))}return fl.classList.add("gvs-btn","gvs-widget-bg","gvs-btn-expandable",...dl),fl.setActive=F=>{let Da=fl.querySelector(".gvs-filters-active");const ll=fl.querySelector(".gvs-filter-unset-btn"),cl=fl.querySelector(".fa-chevron-down");if(F&&!Da){Da=document.createElement("span"),Da.classList.add("gvs-filters-active");const F=fl.querySelector("svg");F.nextSibling?fl.insertBefore(Da,F.nextSibling):fl.appendChild(Da),ll&&(ll.style.display=null,cl.style.display="none")}else!F&&Da&&(Da.remove(),ll&&(ll.style.display="none",cl.style.display=null))},fl}function createSearchBar(F,Da,ll,cl,pl){let bl=arguments.length>5&&void 0!==arguments[5]&&arguments[5],kl=arguments.length>6&&void 0!==arguments[6]&&arguments[6],Dl=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;const Wl=document.createElement("div");Wl.classList.add("gvs-widget-bg","gvs-search-bar"),Wl.id=F,kl&&Wl.classList.add("gvs-search-bar-reducable"),Dl&&Wl.appendChild(Dl);const Ql=document.createElement("input");Ql.type="text",Ql.placeholder=Da,Ql.id=`${F}-input`,Ql.setAttribute("autocomplete","off"),Wl.appendChild(Ql);const extendInput=()=>{Wl.classList.remove("gvs-search-bar-reduced")},reduceInput=()=>{Wl.classList.add("gvs-search-bar-reduced")};kl&&reduceInput();const wc=document.createElement("span");wc.classList.add("gvs-search-bar-icon");const Sc=fa(fl.$U),eu=fa(Al.s4,{classes:["fa-spin"]}),iu=fa(hl.Jy),su=fa(dl.lE);wc.appendChild(Sc),Wl.appendChild(wc);const cu=createPanel(pl,Wl,[],["gvs-search-bar-results"],bl);Wl.appendChild(cu);const switchIcon=F=>{wc.innerHTML="",wc.appendChild(F)},resetSearch=()=>{Wl._throttler&&clearTimeout(Wl._throttler),Ql.value="",cu.innerHTML="",cu._toggle(!1),delete Wl._lastSearch,switchIcon(Sc),cl(null),kl&&reduceInput()};Wl.resetSearch=resetSearch,Ql.goItem=F=>{kl?(cl(F),resetSearch()):(Wl._throttler&&clearTimeout(Wl._throttler),Ql.value=F.title,cu.innerHTML="",cu._toggle(!1),switchIcon(iu),cl(F))},Ql.setItem=F=>{Wl._throttler&&clearTimeout(Wl._throttler),Ql.value=F,cu.innerHTML="",cu._toggle(!1),switchIcon(iu),kl&&extendInput()};const goSearch=()=>{if(Wl._throttler&&clearTimeout(Wl._throttler),0===Ql.value.length)return cu.innerHTML="",void cu._toggle(!1);Wl._throttler=setTimeout((()=>{cu.innerHTML="",cu._toggle(!1),switchIcon(eu),ll(Ql.value).then((F=>{switchIcon(iu),cu._toggle(!0),F&&0!=F.length?!0!==F?F.forEach((F=>{const Da=document.createElement("div");Da.classList.add("gvs-search-bar-result"),Da.innerHTML=`${F.title}<br /><small>${(null===F||void 0===F?void 0:F.subtitle)||""}</small>`,cu.appendChild(Da),Da.addEventListener("click",(()=>Ql.goItem(F)))})):cu._toggle(!1):cu.innerHTML=`<div class="gvs-search-empty">${pl._t.gvs.search_empty}</li>`})).catch((F=>{console.error(F),switchIcon(su)}))}),250)};return Ql.addEventListener("change",goSearch),Ql.addEventListener("keypress",goSearch),Ql.addEventListener("paste",goSearch),Ql.addEventListener("input",goSearch),wc.addEventListener("click",(()=>{wc.firstChild!=iu&&wc.firstChild!=su||resetSearch(),kl&&wc.firstChild==Sc&&(Wl.classList.contains("gvs-search-bar-reduced")?extendInput():reduceInput())})),Wl}function createPanel(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],cl=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],hl=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const dl=document.createElement("div");dl.id=Da.id+"-panel",Array.isArray(cl)&&(cl=cl.filter((F=>null!=F&&F.length>0))),dl.classList.add("gvs-panel","gvs-widget-bg","gvs-hidden",...cl);for(let pl of ll)dl.appendChild(pl);const togglePanel=(Da,ll)=>{Da&&Da.stopPropagation(),!0===ll?dl.classList.remove("gvs-hidden"):!1===ll?dl.classList.add("gvs-hidden"):(dl.classList.toggle("gvs-hidden"),ll=!dl.classList.contains("gvs-hidden")),ll&&!hl&&closeOtherPanels(dl,F._viewer.container)};return dl._toggle=F=>togglePanel(null,F),"BUTTON"==Da.tagName&&(Da.addEventListener("click",togglePanel),Da.addEventListener("hover",togglePanel)),dl}function closeOtherPanels(F,Da){var ll;const isPanel=F=>F.classList.contains("gvs-panel")||F.classList.contains("gvs-search-bar-result")||F.classList.contains("gvs-search-empty")||F.classList.contains("gvs-search-bar-reducable");if(!isPanel(F)&&null!==(ll=F)&&void 0!==ll&&ll.parentNode)for(F=F.parentNode;F instanceof Element&&!isPanel(F);)F=F.parentNode;for(const cl of Da.getElementsByClassName("gvs-panel"))cl==F||cl.contains(F)||cl.classList.contains("gvs-hidden")||cl.classList.add("gvs-hidden");for(const cl of Da.getElementsByClassName("gvs-search-bar-reducable"))cl==F||cl.contains(F)||cl.classList.contains("gvs-search-bar-reduced")||cl.resetSearch()}function createGroup(F,Da,ll){let cl=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],hl=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const dl=document.createElement("div");dl.id=F,Array.isArray(hl)&&(hl=hl.filter((F=>null!=F&&F.length>0))),dl.classList.add("gvs-group",...hl);for(let pl of cl)dl.appendChild(pl);return ll._corners[Da].appendChild(dl),dl}function enableCopyButton(F,Da){for(let ll of F.getElementsByTagName("button")){const F=ll.getAttribute("data-input"),cl=ll.getAttribute("data-copy");(F||cl)&&ll.addEventListener("click",(()=>{let hl;if(F){const Da=document.getElementById(F);hl=Da.innerText||Da.value}else cl&&(hl=ll.getAttribute("data-copy"));navigator.clipboard.writeText(hl);const dl=ll.innerHTML;ll.innerHTML=`${Da.gvs.copied} ${fat(bl.e6)}`,ll.classList.add("gvs-btn-active"),setTimeout((()=>{ll.innerHTML=dl,ll.classList.remove("gvs-btn-active")}),2e3)}))}}function enableButton(F){F.removeAttribute("disabled")}function disableButton(F){F.setAttribute("disabled","")}function fa(F,Da){return(0,cl.Kk)(F,Da).node[0]}function fat(F,Da){return(0,cl.Kk)(F,Da).html[0]}function createLinkCell(F,Da,ll,cl){const hl=document.createElement("a");hl.href=Da,hl.target="_blank",hl.title=ll,hl.textContent=F;return[hl,createButtonSpan(`${fat(kl.jP)} ${cl}`,F)]}function createTable(F,Da){const ll=document.createElement("table");return ll.className=F,Da.forEach((F=>{let{section:Da,value:cl,values:hl,classes:dl}=F;const pl=document.createElement("tr"),fl=document.createElement("th");fl.scope="row",fl.textContent=Da,pl.appendChild(fl);const Al=document.createElement("td");dl&&Al.classList.add(...dl),hl?hl.forEach((F=>Al.appendChild(F))):cl instanceof HTMLElement?Al.appendChild(cl):Al.innerHTML=cl,pl.appendChild(Al),ll.appendChild(pl)})),ll}function createHeader(F,Da){const ll=document.createElement(F);return ll.innerHTML=Da,ll}function createButtonSpan(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const ll=document.createElement("button");ll.innerHTML=F,Da&&ll.setAttribute("data-copy",Da);const cl=document.createElement("span");return cl.className="gvs-input-btn",cl.appendChild(ll),cl}function createLabel(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const cl=document.createElement("label");return cl.htmlFor=F,ll&&cl.appendChild(fa(ll)),cl.appendChild(document.createTextNode(Da)),cl}function showGrade(F,Da){let ll='<span class="gvs-grade">';for(let cl=1;cl<=F;cl++)ll+=fat(Dl.yy);for(let cl=F+1;cl<=5;cl++)ll+=fat(Wl.yy);return ll+="</span> (",ll+=null===F?Da.gvs.metadata_quality_missing+")":F+"/5)",ll}function showQualityScore(F){const Da=document.createElement("span");for(let ll=1;ll<=Ql.fW.length;ll++){const cl=Ql.fW[ll-1],hl=document.createElement("span");hl.appendChild(document.createTextNode(cl.label)),hl.classList.add("gvs-qualityscore"),hl.style.backgroundColor=cl.color,ll===6-F&&hl.classList.add("gvs-qualityscore-selected"),Da.appendChild(hl)}return Da}},9194:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>URLHash});const cl={minDate:"date_from",maxDate:"date_to",type:"pic_type",camera:"camera",theme:"theme",qualityscore:"pic_score"},hl=Object.fromEntries(Object.entries(cl).map((F=>[F[1],F[0]]))),dl=["psv:view-rotated","psv:picture-loaded","focus-changed","filters-changed","psv:transition-duration-changed","map:background-changed","map:users-changed","pictures-navigation-changed"];class URLHash extends EventTarget{constructor(F){super(),this._viewer=F,this._delay=null,this._hashChangeHandler=this._onHashChange.bind(this),F.addEventListener("ready",(()=>{window.addEventListener("hashchange",this._hashChangeHandler,!1),dl.forEach((F=>this._viewer.addEventListener(F,this._updateHash.bind(this))))}),{once:!0})}destroy(){var F,Da;window.removeEventListener("hashchange",this._hashChangeHandler),delete this._hashChangeHandler,null===(F=this._viewer)||void 0===F||null===(Da=F.map)||void 0===Da||Da.off("moveend",this._updateHash),dl.forEach((F=>this._viewer.removeEventListener(F,this._updateHash))),delete this._viewer,this._updateHash()}bindMapEvents(){this._viewer.map.on("moveend",this._updateHash.bind(this))}_getHashParts(){let F={};"number"==typeof this._viewer.psv.getTransitionDuration()&&(F.speed=this._viewer.psv.getTransitionDuration()),[null,"any"].includes(this._viewer.getPicturesNavigation())||(F.nav=this._viewer.getPicturesNavigation());const Da=this._viewer.psv.getPictureMetadata();if(Da&&(F.pic=Da.id,F.xyz=this._getXyzHashString()),this._viewer.map){F.map=this._getMapHashString(),F.focus="pic",this._viewer.isMapWide()&&(F.focus="map"),this._viewer.popupContainer.classList.contains("gvs-hidden")||(F.focus="meta"),this._viewer.map.hasTwoBackgrounds()&&this._viewer.map.getBackground()&&(F.background=this._viewer.map.getBackground());const Da=this._viewer.map.getVisibleUsers();if((Da.length>1||!Da.includes("geovisio"))&&(F.users=Da.join(",")),this._viewer._mapFilters){for(let Da in cl)this._viewer._mapFilters[Da]&&(F[cl[Da]]=this._viewer._mapFilters[Da]);if(F.pic_score){const Da=[null,"E","D","C","B","A"];F.pic_score=F.pic_score.map((F=>Da[F])).join("")}}}else F.map="none";return F}getHashString(){let F="";return Object.entries(this._getHashParts()).sort(((F,Da)=>F[0].localeCompare(Da[0]))).forEach((Da=>{let[ll,cl]=Da,hl=!1;const dl=F.split("&").map((F=>{const Da=F.split("=")[0];return Da===ll?(hl=!0,`${Da}=${cl}`):F})).filter((F=>F));hl||dl.push(`${ll}=${cl}`),F=`${dl.join("&")}`})),`#${F}`.replace(/^#+/,"#")}_getCurrentHash(){const F=window.location.hash.replace("#","");let Da={};if(F.split("&").map((F=>F.split("="))).filter((F=>void 0!==F[0]&&F[0].length>0)).forEach((F=>{Da[F[0]]=F[1]})),Da.s){const F=Object.fromEntries(Da.s.split(";").map((F=>[F[0],F.substring(1)])));Da={},"m"===F.f?Da.focus="map":"p"===F.f?Da.focus="pic":"t"===F.f&&(Da.focus="meta"),""!==F.s&&(Da.speed=100*parseFloat(F.s)),"a"===F.n?Da.nav="any":"s"===F.n&&(Da.nav="seq"),"n"===F.n&&(Da.nav="none"),""!==F.p&&(Da.pic=F.p),""!==F.c&&(Da.xyz=F.c),""!==F.m&&(Da.map=F.m),""!==F.d&&(Da.date_from=F.d),""!==F.e&&(Da.date_to=F.e),"f"===F.t?Da.pic_type="flat":"e"===F.t&&(Da.pic_type="equirectangular"),""!==F.k&&(Da.camera=F.k),"d"===F.v?Da.theme="default":"a"===F.v?Da.theme="age":"t"===F.v?Da.theme="type":"s"===F.v&&(Da.theme="score"),"s"===F.b?Da.background="streets":"a"===F.b&&(Da.background="aerial"),""!==F.u&&(Da.users=F.u),""!==F.q&&(Da.pic_score=F.q)}return Da}_getMapHashString(){const F=this._viewer.map.getCenter(),Da=Math.round(100*this._viewer.map.getZoom())/100,ll=Math.ceil((Da*Math.LN2+Math.log(512/360/.5))/Math.LN10),cl=Math.pow(10,ll),hl=Math.round(F.lng*cl)/cl,dl=Math.round(F.lat*cl)/cl,pl=this._viewer.map.getBearing(),fl=this._viewer.map.getPitch();let Al=`${Da}/${dl}/${hl}`;return(pl||fl)&&(Al+="/"+Math.round(10*pl)/10),fl&&(Al+=`/${Math.round(fl)}`),Al}_getXyzHashString(){const F=this._viewer.psv.getXYZ();return`${F.x.toFixed(2)}/${F.y.toFixed(2)}/${Math.round(F.z||0)}`}_onHashChange(){let F=this._getCurrentHash();if(F.pic){const Da=F.pic.split(";");Da.length>1&&console.warn("Multiple picture IDs passed in URL, only first one kept"),this._viewer.select(null,Da[0])}else this._viewer.select();if(F.focus&&["map","pic"].includes(F.focus)&&(this._viewer.setPopup(!1),this._viewer.setFocus(F.focus)),F.focus&&"meta"==F.focus&&this._viewer._widgets._showPictureMetadataPopup(),void 0!==F.speed&&this._viewer.psv.setTransitionDuration(F.speed),F.map&&this._viewer.map){const Da=this.getMapOptionsFromHashString(F.map);Da&&this._viewer.map.jumpTo(Da);let ll=(F.users||"").split(",");(0===ll.length||1===ll.length&&""===ll[0].trim())&&(ll=["geovisio"]),this._viewer.map.setVisibleUsers(ll)}if(F.xyz){const Da=this.getXyzOptionsFromHashString(F.xyz);this._viewer.psv.setXYZ(Da.x,Da.y,Da.z)}this._viewer.setFilters(this.getMapFiltersFromHashVals(F)),["aerial","streets"].includes(F.background)&&this._viewer.map.setBackground(F.background),["pic","any","seq"].includes(F.nav)&&this._viewer.setPicturesNavigation(F.nav)}getShortLink(F){const Da=new URL(F),ll=this._getHashParts(),cl={f:(ll.focus||"").substring(0,1),s:isNaN(parseInt(ll.speed))?void 0:Math.floor(parseInt(ll.speed)/100),n:(ll.nav||"").substring(0,1),p:ll.pic,c:ll.xyz,m:ll.map,d:ll.date_from,e:ll.date_to,t:(ll.pic_type||"").substring(0,1),k:ll.camera,v:(ll.theme||"").substring(0,1),b:(ll.background||"").substring(0,1),u:ll.users,q:ll.pic_score},hl=Object.entries(cl).filter((F=>{let[,Da]=F;return void 0!=Da&&""!=Da})).map((F=>{let[Da,ll]=F;return`${Da}${ll}`})).join(";");return Da.hash=`s=${hl}`,Da}getMapFiltersFromHashVals(F){const Da={};for(let ll in hl)F[ll]&&(Da[hl[ll]]=F[ll]);if(Da.qualityscore){let F=Da.qualityscore.split("");const ll={A:5,B:4,C:3,D:2,E:1};Da.qualityscore=F.map((F=>ll[F]))}return Da}getMapOptionsFromHashString(F){const Da=F.split("/");if(Da.length>=3&&!Da.some((F=>isNaN(F)))){const F={center:[+Da[2],+Da[1]],zoom:+Da[0],pitch:+(Da[4]||0)};return this._viewer.map&&(F.bearing=this._viewer.map.dragRotate.isEnabled()&&this._viewer.map.touchZoomRotate.isEnabled()?+(Da[3]||0):this._viewer.map.getBearing()),F}return null}getXyzOptionsFromHashString(F){const Da=F.split("/");if(3!==Da.length||Da.some((F=>isNaN(F))))return null;return{x:+Da[0],y:+Da[1],z:+Da[2]}}_updateHash(){this._delay&&(clearTimeout(this._delay),this._delay=null),this._delay=setTimeout((()=>{var F,Da,ll;const cl=new URL(window.location.href),hl=new URL(window.location.href);if(hl.hash=this._viewer?this.getHashString():"",cl.hash==hl.hash)return;const dl=this._getCurrentHash().pic||"",pl=(null===(F=this._viewer)||void 0===F||null===(Da=F.psv)||void 0===Da||null===(ll=Da.getPictureMetadata())||void 0===ll?void 0:ll.id)||"",fl=this._getCurrentHash().focus||"",Al=hl.hash.includes("focus=meta")?"meta":hl.hash.includes("focus=map")?"map":"pic";try{if(dl!=pl||fl!=Al&&"meta"==Al?window.history.pushState(window.history.state,null,hl.href):window.history.replaceState(window.history.state,null,hl.href),this._viewer){const F=new CustomEvent("url-changed",{detail:{url:hl.href}});this.dispatchEvent(F)}}catch(bl){}}),500)}}},490:(F,Da,ll)=>{"use strict";ll.d(Da,{A:()=>Widgets});ll(307);var cl=ll(2968),hl=ll(4683),dl=ll(5071),pl=ll(1462),fl=ll(5721),Al=ll(7534),bl=ll(6810),kl=ll(654),Dl=ll(1372),Wl=ll(7290),Ql=ll(1260),wc=ll(7964),Sc=ll(2e3),eu=ll(5279),iu=ll(9683),su=ll(6386),cu=ll(1705),uu=ll(5431),hu=ll(7472),Lu=ll(9186),zu=ll(6069),Du=ll(99),Nu=ll(7321),qu=ll(501),ih=ll(6787),gh=ll(6533),ed=ll(7744),td=ll(8629),id=ll(325),nd=ll(9243),rd=ll(1904),ad=ll(4220),sd=ll(7172),od=ll(7879),ld=ll(7516),cd=ll(8739),ud=ll(3520),hd=ll(3095),dd=ll(4162),pd=ll(4189),md=ll(6311),fd=ll(9564),gd=ll(2975),Ad=ll(4881),yd=ll(1708),vd=ll(3233),_d=ll(6668);class Widgets{constructor(F){var Da;let ll=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==ll&&(ll={}),null==ll.editIdUrl&&(ll.editIdUrl="https://www.openstreetmap.org/edit"),this._viewer=F,this._t=this._viewer._t,this._options=ll;const cl=void 0!==this._viewer.map;this._corners={};const pl=cl?["main","mini"]:["main"],fl=["top","bottom"],Al=["left","middle","right"];for(let hl of pl)for(let F of fl){const Da=document.createElement("div");Da.id=`gvs-corner-${hl}-${F}`,Da.classList.add("gvs-corner-space");for(let ll of Al){const cl=document.createElement("div");cl.id=`${Da.id}-${ll}`,cl.classList.add("gvs-corner"),this._corners[`${hl}-${F}-${ll}`]=cl,Da.appendChild(cl)}"main"==hl?this._viewer.mainContainer.appendChild(Da):"mini"==hl&&this._viewer.miniContainer.appendChild(Da)}if((0,dl.GZ)()||this._initWidgetPlayer(cl),this._initWidgetLegend(cl,null===(Da=ll)||void 0===Da?void 0:Da.mapAttribution),cl&&(this._initWidgetMiniActions(),(0,dl.GZ)()||(this._initWidgetSearch(),this._initWidgetFilters(null!==this._viewer._api._endpoints.user_search&&null!==this._viewer._api._endpoints.user_tiles,this._viewer.map&&this._viewer.map._hasQualityScore()),this._initWidgetMapLayers(),this._listenMapFiltersChanges())),this._viewer.isWidthSmall()||this._initWidgetShare(),ll.customWidget){const F=this._corners["main-bottom-right"];switch(typeof ll.customWidget){case"string":for(let Da of(new DOMParser).parseFromString(ll.customWidget,"text/html").body.children)F.appendChild(Da);break;case"object":Array.isArray(ll.customWidget)?ll.customWidget.forEach((Da=>F.appendChild(Da))):F.appendChild(ll.customWidget)}}this._initWidgetZoom(cl),this._viewer.container.addEventListener("click",(F=>(0,hl.W_)(F.target,this._viewer.container)))}destroy(){Object.values(this._corners).forEach((F=>F.remove())),delete this._corners,delete this._t,delete this._viewer}_initWidgetZoom(F){this._lastWantedZoom=this._viewer.psv.getZoomLevel();const Da=(0,hl.Tf)("gvs-zoom-in",(0,hl.fa)(Dl.QL),this._t.gvs.zoomIn),ll=(0,hl.Tf)("gvs-zoom-out",(0,hl.fa)(Wl.EZ),this._t.gvs.zoomOut);(0,hl.wj)("gvs-widget-zoom","main-bottom-right",this,[Da,ll],["gvs-group-vertical","gvs-mobile-hidden","gvs-print-hidden"]);const zoomFct=(Da,ll)=>{if(F&&this._viewer.isMapWide())ll?this._viewer.map.zoomIn({},{originalEvent:Da}):this._viewer.map.zoomOut({},{originalEvent:Da});else{this._viewer.lastPsvAnim&&this._viewer.lastPsvAnim.cancel();const F=ll?Math.min(100,this._lastWantedZoom+cl.$p):Math.max(0,this._lastWantedZoom-cl.$p);this._viewer.lastPsvAnim=this._viewer.psv.animate({speed:cl.LM,zoom:F}),this._lastWantedZoom=F}};Da.addEventListener("click",(F=>zoomFct(F,!0))),ll.addEventListener("click",(F=>zoomFct(F,!1)))}_initWidgetPlayer(F){const Da=(0,hl.Tf)("gvs-player-prev",(0,hl.fa)(cu.TH),this._t.gvs.sequence_prev),ll=(0,hl.Tf)("gvs-player-play"),dl=(0,hl.Tf)("gvs-player-next",(0,hl.fa)(uu.vF),this._t.gvs.sequence_next),pl=(0,hl.Tf)("gvs-player-more",(0,hl.fa)(gh.nx),this._t.gvs.sequence_more,["gvs-xs-hidden"]),fl=(0,hl.t_)(this,pl,[],["gvs-player-options"]);fl.innerHTML=`\n\t\t\t<div class="gvs-input-range" title="${this._t.gvs.sequence_speed}">\n\t\t\t\t${(0,hl.Qt)(nd.rO)}\n\t\t\t\t<input\n\t\t\t\t\tid="gvs-player-speed"\n\t\t\t\t\ttype="range" name="speed"\n\t\t\t\t\tmin="0" max="${cl.Vf-100}"\n\t\t\t\t\tvalue="${cl.Vf-this._viewer.psv.getTransitionDuration()}"\n\t\t\t\t\ttitle="${this._t.gvs.sequence_speed}"\n\t\t\t\t\tstyle="width: 100%;" />\n\t\t\t\t${(0,hl.Qt)(ed.KM)}\n\t\t\t</div>\n\t\t\t<button title="${this._t.gvs.contrast}" id="gvs-player-contrast">\n\t\t\t\t${(0,hl.Qt)(id.rC)}\n\t\t\t</button>\n\t\t`;const Al=(0,hl.wj)("gvs-widget-player",F?"main-top-middle":"main-top-left",this,[Da,ll,dl].concat(this._viewer.isWidthSmall()?[]:[fl,pl]),["gvs-group-horizontal","gvs-only-psv","gvs-print-hidden",this._viewer.psv.getPictureMetadata()?"":"gvs-hidden"]),toggleBtnPlay=F=>{ll.innerHTML=F?(0,hl.Qt)(hu.G1):(0,hl.Qt)(su.ij),ll.title=F?this._t.gvs.sequence_pause:this._t.gvs.sequence_play};toggleBtnPlay(!1);const updatePlayBtn=()=>{var F,cl,pl,fl;"pic"===this._viewer.getPicturesNavigation()?((0,hl.vI)(dl),(0,hl.vI)(ll),(0,hl.vI)(Da)):(null!=(null===(F=this._viewer.psv.getPictureMetadata())||void 0===F||null===(cl=F.sequence)||void 0===cl?void 0:cl.prevPic)?(0,hl.Y8)(Da):(0,hl.vI)(Da),null!=(null===(pl=this._viewer.psv.getPictureMetadata())||void 0===pl||null===(fl=pl.sequence)||void 0===fl?void 0:fl.nextPic)?((0,hl.Y8)(dl),(0,hl.Y8)(ll)):((0,hl.vI)(dl),(0,hl.vI)(ll)))};if(updatePlayBtn(),this._viewer.addEventListener("sequence-playing",(()=>toggleBtnPlay(!0))),this._viewer.addEventListener("sequence-stopped",(()=>toggleBtnPlay(!1))),this._viewer.addEventListener("psv:picture-loaded",(()=>Al.classList.remove("gvs-hidden")),{once:!0}),this._viewer.addEventListener("psv:picture-loaded",updatePlayBtn),this._viewer.addEventListener("pictures-navigation-changed",updatePlayBtn),!this._viewer.isWidthSmall()){const F=fl.children[0].children[1];this._viewer.addEventListener("psv:transition-duration-changed",(Da=>{F.value=cl.Vf-Da.detail.value})),F.addEventListener("change",(F=>{const Da=cl.Vf-F.target.value;this._viewer.psv.setTransitionDuration(Da)}))}Da.addEventListener("click",(()=>this._viewer.psv.goToPrevPicture())),dl.addEventListener("click",(()=>this._viewer.psv.goToNextPicture())),ll.addEventListener("click",(()=>{this._viewer.isSequencePlaying()?(toggleBtnPlay(!1),this._viewer.stopSequence()):(toggleBtnPlay(!0),this._viewer.playSequence())}));const bl=document.getElementById("gvs-player-contrast");bl&&bl.addEventListener("click",(()=>{bl.classList.contains("gvs-btn-active")?(bl.classList.remove("gvs-btn-active"),this._viewer.psv.setHigherContrast(!1)):(bl.classList.add("gvs-btn-active"),this._viewer.psv.setHigherContrast(!0))}))}_initWidgetLegend(F,Da){const ll=(0,hl.wj)("gvs-widget-legend",F?"main-bottom-right":"main-bottom-left",this,[],["gvs-widget-bg"]);let cl,pl,fl;F&&(cl=(0,hl.wj)("gvs-widget-mini-legend","mini-bottom-right",this,[],["gvs-widget-bg","gvs-only-mini","gvs-mobile-hidden"])),this._viewer.isWidthSmall()&&(pl=document.createElement("button"),pl.id="gvs-legend-toggle",pl.classList.add("gvs-btn","gvs-widget-bg","gvs-print-hidden"),pl.appendChild((0,hl.fa)(ld.faCircleInfo)),fl=()=>{"hidden"===ll.style.visibility?(ll.style.visibility="visible",toggleLegend(!!F&&this._viewer.isMapWide())):(ll.innerHTML="",ll.style.visibility="hidden",ll.appendChild(pl))},pl.addEventListener("click",(F=>{F.stopPropagation(),fl()})));const toggleLegend=fl=>{var Al,bl,kl;let Dl=Da||(null===(Al=this._viewer.map)||void 0===Al||null===(bl=Al._attribution)||void 0===bl?void 0:bl._attribHTML)||"",Wl="<a href='https://panoramax.fr/' target='_blank'>Panoramax</a>";const Ql=null===(kl=this._viewer.psv.getPictureMetadata())||void 0===kl?void 0:kl.caption;let wc;!(0,dl.GZ)()&&Ql&&(Wl="",Ql.producer&&(Wl+=`<span style="font-weight: bold">&copy; ${Ql.producer}</span>`),Ql.date&&(Ql.producer&&(Wl+="&nbsp;-&nbsp;"),Wl+=Ql.date.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})),wc=(0,hl.fa)(fd.AP),wc.style.marginLeft="5px"),ll.title="",fl?(ll.innerHTML=Dl,(0,dl.GZ)()&&(ll.innerHTML="<a href='https://panoramax.fr/' target='_blank'>Panoramax</a><br />"+ll.innerHTML),ll.style.cursor=null,ll.onclick=null,cl.innerHTML=Wl):(ll.innerHTML=Wl,wc?(ll.appendChild(wc),ll.style.cursor="pointer",ll.title=this._t.gvs.legend_title,ll.onclick=(0,dl.GZ)()?()=>window.open(window.location.href,"_blank"):this._showPictureMetadataPopup.bind(this)):(ll.style.cursor=null,ll.onclick=null),F&&(cl.innerHTML=Dl)),pl&&ll.appendChild(pl)};pl?(ll.appendChild(pl),ll.style.visibility="hidden"):toggleLegend(!!F&&this._viewer.isMapWide()),this._viewer.addEventListener("focus-changed",(F=>toggleLegend("map"==F.detail.focus))),this._viewer.addEventListener("psv:picture-loaded",(()=>toggleLegend(F&&this._viewer.isMapWide())))}_showPictureMetadataPopup(){var F,Da,ll,cl,pl,fl,Al,bl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Nu,qu;const ih=this._viewer.psv.getPictureMetadata();if(!ih)throw new Error("No picture currently selected");const gh=[];if(gh.push((0,hl.Ij)("h4",`${(0,hl.Qt)(ld.faCircleInfo)} ${this._t.gvs.metadata}`)),this._viewer._api._endpoints.report){const F=(0,hl.do)(`${(0,hl.Qt)(md.JA)} ${this._t.gvs.report}`);F.firstChild.addEventListener("click",this._showReportForm.bind(this)),gh.push(F)}const ed=[{section:this._t.gvs.metadata_general_picid,classes:["gvs-td-with-id"],values:(0,hl.fP)(ih.id,this._viewer._api.getPictureMetadataUrl(ih.id,null===ih||void 0===ih||null===(F=ih.sequence)||void 0===F?void 0:F.id),this._t.gvs.metadata_general_picid_link,this._t.gvs.copy)},{section:this._t.gvs.metadata_general_seqid,classes:["gvs-td-with-id"],values:(0,hl.fP)(null===ih||void 0===ih||null===(Da=ih.sequence)||void 0===Da?void 0:Da.id,this._viewer._api.getSequenceMetadataUrl(null===ih||void 0===ih||null===(ll=ih.sequence)||void 0===ll?void 0:ll.id),this._t.gvs.metadata_general_seqid_link,this._t.gvs.copy)},{section:this._t.gvs.metadata_general_author,value:null===ih||void 0===ih||null===(cl=ih.caption)||void 0===cl?void 0:cl.producer},{section:this._t.gvs.metadata_general_license,value:null===ih||void 0===ih||null===(pl=ih.caption)||void 0===pl?void 0:pl.license},{section:this._t.gvs.metadata_general_date,value:null===ih||void 0===ih||null===(fl=ih.caption)||void 0===fl||null===(Al=fl.date)||void 0===Al?void 0:Al.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short"})}];gh.push((0,hl.ZR)("gvs-table-light",ed)),gh.push((0,hl.Ij)("h4",`${(0,hl.Qt)(Du.rw)} ${this._t.gvs.metadata_camera}`));const td=null!==ih&&void 0!==ih&&null!==(bl=ih.properties)&&void 0!==bl&&null!==(Dl=bl["pers:interior_orientation"])&&void 0!==Dl&&Dl.focal_length?`${null===ih||void 0===ih||null===(Wl=ih.properties)||void 0===Wl||null===(Ql=Wl["pers:interior_orientation"])||void 0===Ql?void 0:Ql.focal_length} mm`:"\u2753";let id=null===ih||void 0===ih||null===(wc=ih.properties)||void 0===wc||null===(Sc=wc["pers:interior_orientation"])||void 0===Sc?void 0:Sc.sensor_array_dimensions;id&&(id=`${id[0]} x ${id[1]} px (${Math.floor(id[0]*id[1]/1e6)} Mpx)`);let nd=this._t.gvs.picture_flat,rd=null===ih||void 0===ih||null===(eu=ih.properties)||void 0===eu||null===(iu=eu["pers:interior_orientation"])||void 0===iu?void 0:iu.field_of_view;null!==rd&&void 0!==rd&&(360===rd?nd=this._t.gvs.picture_360:nd+=` (${rd}\xb0)`);const ad=[{section:this._t.gvs.metadata_camera_make,value:(null===ih||void 0===ih||null===(su=ih.properties)||void 0===su||null===(cu=su["pers:interior_orientation"])||void 0===cu?void 0:cu.camera_manufacturer)||"\u2753"},{section:this._t.gvs.metadata_camera_model,value:(null===ih||void 0===ih||null===(uu=ih.properties)||void 0===uu||null===(hu=uu["pers:interior_orientation"])||void 0===hu?void 0:hu.camera_model)||"\u2753"},{section:this._t.gvs.metadata_camera_type,value:nd},{section:this._t.gvs.metadata_camera_resolution,value:id||"\u2753"},{section:this._t.gvs.metadata_camera_focal_length,value:td}];gh.push((0,hl.ZR)("gvs-table-light",ad)),gh.push((0,hl.Ij)("h4",`${(0,hl.Qt)(ud.gK)} ${this._t.gvs.metadata_location}`));const sd=void 0!==(null===ih||void 0===ih||null===(Lu=ih.properties)||void 0===Lu?void 0:Lu["view:azimuth"])?`${ih.properties["view:azimuth"]}\xb0`:"\u2753",od=(0,kl.Pu)(ih),hd=[{section:this._t.gvs.metadata_location_longitude,value:ih.gps[0]},{section:this._t.gvs.metadata_location_latitude,value:ih.gps[1]},{section:this._t.gvs.metadata_location_orientation,value:sd},{section:this._t.gvs.metadata_location_precision,value:od}];if(gh.push((0,hl.ZR)("gvs-table-light",hd)),null!==(zu=this._viewer)&&void 0!==zu&&null!==(Nu=zu.map)&&void 0!==Nu&&Nu._hasQualityScore()){var dd,pd;const F=(0,hl.Ij)("h4",`${(0,hl.Qt)(vd.B9)} ${this._t.gvs.metadata_quality} <button class="gvs-btn-link" title="${this._t.gvs.metadata_quality_help}">${(0,hl.Qt)(_d.iW)}</button>`);F.lastChild.addEventListener("click",(()=>this._showQualityScoreDoc())),gh.push(F);const Da=(0,dl.Ch)(dl.ql,null===ih||void 0===ih||null===(dd=ih.properties)||void 0===dd?void 0:dd["quality:horizontal_accuracy"]),ll=(0,dl.Ch)(360===(null===ih||void 0===ih?void 0:ih.horizontalFov)?dl.Av:dl.U3,null===ih||void 0===ih||null===(pd=ih.properties)||void 0===pd?void 0:pd["panoramax:horizontal_pixel_density"]),cl=Math.round((ll||1)*dl.Xu+(Da||1)*dl.Bg),pl=[{section:this._t.gvs.metadata_quality_score,value:(0,hl.Lt)(cl)},{section:this._t.gvs.metadata_quality_gps_score,value:(0,hl.fM)(Da,this._t)},{section:this._t.gvs.metadata_quality_resolution_score,value:(0,hl.fM)(ll,this._t)}];gh.push((0,hl.ZR)("gvs-table-light",pl))}if(null!==(qu=ih.properties)&&void 0!==qu&&qu.exif){const F=document.createElement("details");F.appendChild((0,hl.Ij)("summary",`${(0,hl.Qt)(cd.BH)} ${this._t.gvs.metadata_exif}`));const Da=Object.entries(ih.properties.exif).sort().map((F=>{let[Da,ll]=F;return{section:Da,value:ll}}));F.appendChild((0,hl.ZR)("",Da)),gh.push(F)}this._viewer.setPopup(!0,gh),this._viewer.dispatchEvent(new CustomEvent("focus-changed",{detail:{focus:"meta"}}))}_showQualityScoreDoc(){const F=[];F.push((0,hl.Ij)("h4",`${(0,hl.Qt)(vd.B9)} ${this._t.gvs.qualityscore_title}`));const Da=document.createElement("a");Da.setAttribute("href","https://docs.panoramax.fr/pictures-metadata/quality_score/"),Da.setAttribute("target","_blank"),Da.appendChild(document.createTextNode(this._t.gvs.qualityscore_doc_link)),[document.createTextNode(this._t.gvs.qualityscore_doc_1),document.createTextNode(this._t.gvs.qualityscore_doc_2),(0,hl.Lt)(5),document.createTextNode(this._t.gvs.qualityscore_doc_3),Da].forEach((Da=>{const ll=document.createElement("p");ll.appendChild(Da),F.push(ll)})),this._viewer.setPopup(!0,F)}_showReportForm(){const F=this._viewer.psv.getPictureMetadata();if(!F)throw new Error("No picture currently selected");const Da=[];Da.push((0,hl.Ij)("h4",`${(0,hl.Qt)(md.JA)} ${this._t.gvs.report}`));const ll=(0,dl.bG)();if(ll){const F=document.createElement("p");F.appendChild(document.createTextNode(this._t.gvs.report_auth.replace("{a}",ll.name))),Da.push(F)}const cl=document.createElement("form");Da.push(cl);const pl=document.createElement("div");pl.classList.add("gvs-input-group");const fl=(0,hl.fp)("gvs-report-issue",this._t.gvs.report_nature_label,ld.faCircleInfo),Al=document.createElement("select");Al.name="gvs-report-issue",Al.required=!0;["","blur_missing","blur_excess","inappropriate","privacy","picture_low_quality","mislocated","copyright","other"].forEach((F=>{const Da=document.createElement("option");Da.value=F,Da.textContent=this._t.gvs.report_nature[F],""===F&&(Da.setAttribute("disabled",""),Da.setAttribute("selected",""),Da.setAttribute("hidden","")),Al.appendChild(Da)})),pl.appendChild(fl),pl.appendChild(Al),cl.appendChild(pl);const bl=document.createElement("div");bl.classList.add("gvs-input-group","gvs-input-group-inline");const kl=document.createElement("input");kl.id="gvs-report-whole-sequence",kl.name="gvs-report-whole-sequence",kl.type="checkbox";const Dl=(0,hl.fp)("gvs-report-whole-sequence",this._t.gvs.report_whole_sequence);bl.appendChild(kl),bl.appendChild(Dl),cl.appendChild(bl);const Wl=document.createElement("div");Wl.classList.add("gvs-input-group");const Ql=(0,hl.fp)("gvs-report-details",this._t.gvs.report_details,gd.Be),wc=document.createElement("textarea");let Sc;if(wc.name="gvs-report-details",wc.placeholder=this._t.gvs.report_details_placeholder,Wl.appendChild(Ql),Wl.appendChild(wc),cl.appendChild(Wl),!ll){const F=document.createElement("div");F.classList.add("gvs-input-group");const Da=(0,hl.fp)("email",this._t.gvs.report_email,Ad.Hz);Sc=document.createElement("input"),Sc.type="email",Sc.name="email",Sc.placeholder=this._t.gvs.report_email_placeholder,F.appendChild(Da),F.appendChild(Sc),cl.appendChild(F)}const eu=document.createElement("div");eu.classList.add("gvs-input-btn");const iu=document.createElement("button");iu.type="submit",iu.appendChild((0,hl.fa)(yd.is)),iu.appendChild(document.createTextNode(this._t.gvs.report_submit)),eu.appendChild(iu),cl.appendChild(eu),cl.addEventListener("submit",(Da=>{var ll;Da.preventDefault();const cl={issue:Al.value,picture_id:kl.checked?null:F.id,reporter_comments:wc.value,reporter_email:null===(ll=Sc)||void 0===ll?void 0:ll.value,sequence_id:F.sequence.id};this._viewer.setPopup(!0,[(0,hl.Ij)("h4",`${(0,hl.Qt)(md.JA)} ${this._t.gvs.report}`),document.createTextNode(this._t.gvs.report_wait)]),this._viewer._api.sendReport(cl).then((()=>{this._viewer.setPopup(!0,[(0,hl.Ij)("h4",`${(0,hl.Qt)(md.JA)} ${this._t.gvs.report}`),document.createTextNode(this._t.gvs.report_success)])})).catch((F=>{console.error(F),this._viewer.setPopup(!0,[(0,hl.Ij)("h4",`${(0,hl.Qt)(md.JA)} ${this._t.gvs.report}`),document.createTextNode(this._t.gvs.report_failure.replace("{e}",F))])}))})),this._viewer.setPopup(!0,Da),this._viewer.dispatchEvent(new CustomEvent("focus-changed",{detail:{focus:"meta"}}))}_initWidgetMiniActions(){const F=document.createElement("img");F.alt="",F.height=120,F.draggable=!1,F.src=pl;const Da=document.createElement("span");Da.classList.add("gvs-mobile-hidden"),Da.appendChild(document.createTextNode(this._t.gvs.expand));const ll=(0,hl.Tf)("gvs-mini-expand",Da,this._t.gvs.expand_info,["gvs-only-mini","gvs-print-hidden"]);ll.appendChild(F),this._corners["mini-top-right"].appendChild(ll),ll.addEventListener("click",(()=>{this._viewer.setFocus(this._viewer.isMapWide()?"pic":"map")}));const cl=document.createElement("img");cl.alt=this._t.gvs.minimize_short,cl.height=120,cl.draggable=!1,cl.src=fl;const Al=(0,hl.Tf)("gvs-mini-hide",cl,this._t.gvs.minimize,["gvs-only-mini","gvs-print-hidden"]);this._corners["mini-bottom-left"].appendChild(Al),Al.addEventListener("click",(()=>{this._viewer.setUnfocusedVisible(!1)}));const bl=(0,hl.Tf)("gvs-mini-show",null,null,["gvs-btn-large","gvs-only-mini-hidden","gvs-print-hidden"]);this._corners["main-bottom-left"].appendChild(bl),bl.addEventListener("click",(()=>{(0,dl.GZ)()?this._viewer.setFocus(this._viewer.isMapWide()?"pic":"map"):this._viewer.setUnfocusedVisible(!0)}));const miniBtnRendering=()=>{this._viewer.map&&this._viewer.isMapWide()?(bl.title=this._t.gvs.show_psv,bl.innerHTML=(0,hl.Qt)(iu.pt)):(bl.title=this._t.gvs.show_map,bl.innerHTML=(0,hl.Qt)(Sc.e5))};miniBtnRendering(),this._viewer.addEventListener("focus-changed",miniBtnRendering)}_initWidgetSearch(){const F=(0,hl.OZ)("gvs-widget-search-bar",this._t.gvs.search_address,(F=>{const Da=F.match(/([-+]?\d{1,2}\.\d+),\s*([-+]?\d{1,3}\.\d+)/),ll=F.match(/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/);if(Da){const F=parseFloat(Da[1]),ll=parseFloat(Da[2]);return this._viewer.map.flyTo({center:[ll,F],zoom:16}),Promise.resolve(!0)}return ll?(this._viewer.select(null,F),Promise.resolve(!0)):this._viewer.map.geocoder({query:F,limit:3,bbox:this._viewer.map.getBounds().toArray().map((F=>F.join(","))).join(","),proximity:this._viewer.map.getCenter().lat+","+this._viewer.map.getCenter().lng}).then((F=>F=F.features.map((F=>({title:F.place_name.split(",")[0],subtitle:F.place_name.split(",").slice(1).join(", "),data:F})))))}),(F=>{F&&(F.data.bounds?this._viewer.map.fitBounds(F.data.bounds):this._viewer.map.flyTo({center:F.data.center,zoom:F.data.zoom||13}))}),this,void 0,this._viewer.isWidthSmall(),this._viewer.map._geolocate);(0,hl.wj)("gvs-widget-search",this._viewer.isWidthSmall()?"main-top-right":"main-top-left",this,[F],["gvs-only-map","gvs-print-hidden"])}_initWidgetMapLayers(){var F,Da;const ll=(0,hl.np)("gvs-map-layers",ad.qI,this._t.gvs.layers,this),cl=(0,hl.t_)(this,ll,[]);(0,hl.wj)("gvs-widget-map-layers","main-top-right",this,[ll,cl],["gvs-group-large","gvs-group-btnpanel","gvs-only-map","gvs-print-hidden"]),this._viewer.map.hasTwoBackgrounds()&&(cl.innerHTML=`\n\t\t\t\t<h4>${(0,hl.Qt)(sd.YS)} ${this._t.gvs.map_background}</h4>\n\t\t\t\t<div id="gvs-map-bg" class="gvs-input-group">\n\t\t\t\t\t<input type="radio" id="gvs-map-bg-streets" name="gvs-map-bg" value="streets" />\n\t\t\t\t\t<label for="gvs-map-bg-streets">\n\t\t\t\t\t\t<img id="gvs-map-bg-streets-img" alt="" />\n\t\t\t\t\t\t${this._t.gvs.map_background_streets}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="radio" id="gvs-map-bg-aerial" name="gvs-map-bg" value="aerial" />\n\t\t\t\t\t<label for="gvs-map-bg-aerial">\n\t\t\t\t\t\t<img id="gvs-map-bg-aerial-img" alt="" />\n\t\t\t\t\t\t${this._t.gvs.map_background_aerial}\n\t\t\t\t\t</label>\n\t\t\t\t</div>`),cl.innerHTML+=`\n\t\t\t<h4>${(0,hl.Qt)(td.fy)} ${this._t.gvs.map_theme}</h4>\n\t\t\t<div class="gvs-input-group">\n\t\t\t\t<select id="gvs-map-theme" style="width: 100%;">\n\t\t\t\t\t<option value="default">${this._t.gvs.map_theme_default}</option>\n\t\t\t\t\t<option value="age">${this._t.gvs.map_theme_age}</option>\n\t\t\t\t\t<option value="type">${this._t.gvs.map_theme_type}</option>\n\t\t\t\t\t${null!==(F=this._viewer)&&void 0!==F&&null!==(Da=F.map)&&void 0!==Da&&Da._hasQualityScore()?'<option value="score">'+this._t.gvs.map_theme_score+"</option>":""}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div id="gvs-map-theme-legend-age" class="gvs-map-theme-legend gvs-hidden">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.PALETTE_4}"></span>\n\t\t\t\t\t\t\t${this._t.gvs.map_theme_age_4}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.PALETTE_3}"></span>\n\t\t\t\t\t\t\t${this._t.gvs.map_theme_age_3}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.PALETTE_2}"></span>\n\t\t\t\t\t\t\t${this._t.gvs.map_theme_age_2}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.PALETTE_1}"></span>\n\t\t\t\t\t\t\t${this._t.gvs.map_theme_age_1}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="gvs-map-theme-legend-type" class="gvs-map-theme-legend gvs-hidden">\n\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.QUALI_1}"></span>\n\t\t\t\t\t\t${this._t.gvs.picture_360}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="gvs-map-theme-legend-entry">\n\t\t\t\t\t\t<span class="gvs-map-theme-color" style="background-color: ${dl.lm.QUALI_2}"></span>\n\t\t\t\t\t\t${this._t.gvs.picture_flat}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="gvs-map-theme-legend-score" class="gvs-map-theme-legend gvs-hidden">\n\t\t\t\t\t${dl.fW.map((F=>'<span class="gvs-qualityscore" style="background-color: '+F.color+';">'+F.label+"</span>")).join("")}\n\t\t\t\t\t<button id="gvs-map-theme-quality-help" class="gvs-btn-link" title="${this._t.gvs.metadata_quality_help}">${(0,hl.Qt)(_d.iW,{transform:{x:6,size:24}})}</button>\n\t\t\t\t</div>\n\t\t\t</div>`,cl.querySelector("#gvs-map-theme-quality-help").addEventListener("click",(()=>this._showQualityScoreDoc()));const pl=cl.querySelector("#gvs-map-theme"),onChange=()=>{this._onMapThemeChange(),this._onMapFiltersChange()};if(pl.addEventListener("change",onChange),pl.addEventListener("keypress",onChange),pl.addEventListener("paste",onChange),pl.addEventListener("input",onChange),this._viewer.map.hasTwoBackgrounds()){cl.querySelector("#gvs-map-bg-aerial-img").src=Al;cl.querySelector("#gvs-map-bg-streets-img").src=bl;const F=cl.querySelector("#gvs-map-bg-aerial"),Da=cl.querySelector("#gvs-map-bg-streets"),onBgChange=F=>{this._viewer.map.setBackground(F.target.value)};F.addEventListener("change",onBgChange),Da.addEventListener("change",onBgChange),this._viewer.addEventListener("map:background-changed",(F=>this._onMapBackgroundChange(F.detail.background))),this._onMapBackgroundChange(this._viewer.map.getBackground())}}_onMapBackgroundChange(F){const Da=document.getElementById("gvs-map-bg-aerial"),ll=document.getElementById("gvs-map-bg-streets");"aerial"===F?Da.checked=!0:ll.checked=!0}_onMapThemeChange(){const F=document.getElementById("gvs-map-theme"),Da=document.getElementById("gvs-map-layers"),ll=F.value;Da.setActive("default"!==ll);for(let cl of document.getElementsByClassName("gvs-map-theme-legend"))cl.id=="gvs-map-theme-legend-"+ll?cl.classList.remove("gvs-hidden"):cl.classList.add("gvs-hidden")}_initWidgetFilters(F,Da){const ll=(0,hl.np)("gvs-filter",rd._$,this._t.gvs.filters,this,["gvs-filter-unset-btn"]),cl=(0,hl.t_)(this,ll,[]);cl.innerHTML=`\n\t\t\t<form id="gvs-filter-form">\n\t\t\t\t<div class="gvs-filter-block">\n\t\t\t\t\t<div class="gvs-filter-zoomin">${this._t.gvs.filter_zoom_in}</div>\n\t\t\t\t\t<h4>${(0,hl.Qt)(Lu.ok)} ${this._t.gvs.filter_date}</h4>\n\t\t\t\t\t<div class="gvs-input-shortcuts">\n\t\t\t\t\t\t<button data-for="gvs-filter-date-from" data-value="${new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0]}">${this._t.gvs.filter_date_1month}</button>\n\t\t\t\t\t\t<button data-for="gvs-filter-date-from" data-value="${new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString().split("T")[0]}">${this._t.gvs.filter_date_1year}</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="gvs-input-group">\n\t\t\t\t\t\t<input type="date" id="gvs-filter-date-from" />\n\t\t\t\t\t\t${(0,hl.Qt)(zu.dm)}\n\t\t\t\t\t\t<input type="date" id="gvs-filter-date-end" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="gvs-filter-block">\n\t\t\t\t\t<h4>${(0,hl.Qt)(eu.jb)} ${this._t.gvs.filter_picture}</h4>\n\t\t\t\t\t<div class="gvs-input-group gvs-checkbox-btns" style="justify-content: center;">\n\t\t\t\t\t\t<input type="checkbox" id="gvs-filter-type-flat" name="flat" />\n\t\t\t\t\t\t<label for="gvs-filter-type-flat">${(0,hl.Qt)(eu.jb)} ${this._t.gvs.picture_flat}</label>\n\t\t\t\t\t\t<input type="checkbox" id="gvs-filter-type-360" name="360" />\n\t\t\t\t\t\t<label for="gvs-filter-type-360">${(0,hl.Qt)(iu.pt)} ${this._t.gvs.picture_360}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;const pl=cl.children[0];(0,hl.wj)("gvs-widget-filter",this._viewer.isWidthSmall()?"main-top-right":"main-top-left",this,[ll,cl],["gvs-group-large","gvs-group-btnpanel","gvs-only-map","gvs-print-hidden"]);const fl=ll.querySelector(".gvs-filter-unset-btn");if(fl&&fl.addEventListener("click",(F=>{F.stopPropagation(),pl.reset()})),this._viewer.isWidthSmall()&&(cl.style.width=this._viewer.container.offsetWidth-70+"px"),Da){const F=document.createElement("div");F.classList.add("gvs-filter-block"),pl.appendChild(F);const Da=document.createElement("div");Da.classList.add("gvs-filter-zoomin"),Da.appendChild(document.createTextNode(this._t.gvs.filter_zoom_in)),F.appendChild(Da);const ll=document.createElement("h4");ll.innerHTML=`${(0,hl.Qt)(vd.B9)} ${this._t.gvs.filter_qualityscore} <button class="gvs-btn-link" title="${this._t.gvs.metadata_quality_help}">${(0,hl.Qt)(_d.iW)}</button>`,ll.style.marginBottom="3px",ll.lastChild.addEventListener("click",(()=>this._showQualityScoreDoc())),F.appendChild(ll);const cl=document.createElement("div");cl.id="gvs-filter-qualityscore",cl.classList.add("gvs-input-group"),dl.fW.forEach((F=>{const Da=document.createElement("input");Da.id="gvs-filter-qualityscore-"+F.label,Da.type="checkbox",Da.name="qualityscore",Da.value=F.label;const ll=document.createElement("label");ll.setAttribute("for",Da.id),ll.title=this._t.gvs.filter_qualityscore_help,ll.appendChild(document.createTextNode(F.label)),ll.style.backgroundColor=F.color,cl.appendChild(Da),cl.appendChild(ll)})),F.appendChild(cl)}if(F){const F=document.createElement("div");F.classList.add("gvs-filter-block"),pl.appendChild(F);const Da=document.createElement("h4");Da.innerHTML=`${(0,hl.Qt)(od.X4)} ${this._t.gvs.filter_user}`,F.appendChild(Da);const ll=(0,dl.bG)();let cl;if(ll){const Da=document.createElement("div");Da.classList.add("gvs-input-shortcuts"),cl=document.createElement("button"),cl.appendChild(document.createTextNode(this._t.gvs.filter_user_mypics)),Da.appendChild(cl),F.appendChild(Da)}const fl=document.createElement("div");let Al;fl.id="gvs-filter-user",fl.classList.add("gvs-input-group"),Al=(0,hl.OZ)("gvs-filter-search-user",this._t.gvs.search_user,(F=>(Al.classList.remove("gvs-filter-active"),this._viewer._api.searchUsers(F).then((F=>(F||[]).map((F=>({title:F.label,data:F}))))))),(F=>(F?Al.classList.add("gvs-filter-active"):Al.classList.remove("gvs-filter-active"),this._viewer.map.setVisibleUsers(F?[F.data.id]:["geovisio"]))),this,!0),F.addEventListener("reset",(()=>{Al.classList.remove("gvs-filter-active"),Al.resetSearch()})),fl.appendChild(Al),F.appendChild(fl),ll&&cl.addEventListener("click",(()=>{const F=Al.querySelector("input");F.value===ll.name?Al.resetSearch():F.goItem({title:ll.name,data:{id:ll.id}})}))}cl.querySelectorAll(".gvs-input-shortcuts button").forEach((F=>{F.addEventListener("click",(()=>{const Da=document.getElementById(F.getAttribute("data-for")),ll=F.getAttribute("data-value");Da&&(Da.value!==ll?Da.value=ll:Da.value="")}))}));[document.getElementById("gvs-filter-date-from"),document.getElementById("gvs-filter-date-end")].forEach((F=>{F.addEventListener("change",(()=>{F.value?F.classList.add("gvs-filter-active"):F.classList.remove("gvs-filter-active")}))})),this._formDelay=null;const onFormChange=()=>{this._formDelay&&clearTimeout(this._formDelay),this._formDelay=setTimeout((()=>{this._onMapFiltersChange()}),250)};pl.addEventListener("change",onFormChange),pl.addEventListener("reset",onFormChange),pl.addEventListener("submit",(F=>(onFormChange(),F.preventDefault(),!1)),!0);for(let hl of pl.getElementsByTagName("input"))hl.addEventListener("change",onFormChange),hl.addEventListener("keypress",onFormChange),hl.addEventListener("paste",onFormChange),hl.addEventListener("input",onFormChange)}_onMapFiltersChange(){var F,Da;const ll=document.getElementById("gvs-filter-date-from"),cl=document.getElementById("gvs-filter-date-end"),hl=document.getElementById("gvs-filter-type-flat"),dl=document.getElementById("gvs-filter-type-360"),pl=document.getElementById("gvs-map-theme");let fl="";dl.checked&&!hl.checked&&(fl="equirectangular"),!dl.checked&&hl.checked&&(fl="flat");let Al=[];if(null!==(F=this._viewer)&&void 0!==F&&null!==(Da=F.map)&&void 0!==Da&&Da._hasQualityScore()){const F=document.getElementById("gvs-filter-qualityscore-A"),Da=document.getElementById("gvs-filter-qualityscore-B"),ll=document.getElementById("gvs-filter-qualityscore-C"),cl=document.getElementById("gvs-filter-qualityscore-D"),hl=document.getElementById("gvs-filter-qualityscore-E");F.checked&&Al.push(5),Da.checked&&Al.push(4),ll.checked&&Al.push(3),cl.checked&&Al.push(2),hl.checked&&Al.push(1),5==Al.length&&(Al=[])}const bl={minDate:ll.value,maxDate:cl.value,type:fl,theme:pl.value,qualityscore:Al};this._viewer.setFilters(bl)}_listenMapFiltersChanges(){const F=document.getElementById("gvs-filter"),Da=document.getElementById("gvs-filter-date-from"),ll=document.getElementById("gvs-filter-date-end"),cl=document.getElementById("gvs-filter-type-flat"),hl=document.getElementById("gvs-filter-type-360"),dl=document.getElementById("gvs-map-theme"),pl=document.getElementById("gvs-filter-qualityscore-A"),fl=document.getElementById("gvs-filter-qualityscore-B"),Al=document.getElementById("gvs-filter-qualityscore-C"),bl=document.getElementById("gvs-filter-qualityscore-D"),kl=document.getElementById("gvs-filter-qualityscore-E");this._viewer.addEventListener("filters-changed",(Dl=>{Dl.detail.minDate?(Da.value=Dl.detail.minDate,Da.classList.add("gvs-filter-active")):Da.classList.remove("gvs-filter-active"),Dl.detail.maxDate?(ll.value=Dl.detail.maxDate,ll.classList.add("gvs-filter-active")):ll.classList.remove("gvs-filter-active"),Dl.detail.theme&&(dl.value=Dl.detail.theme),Dl.detail.type&&(hl.checked=["","equirectangular"].includes(Dl.detail.type),cl.checked=["","flat"].includes(Dl.detail.type)),Dl.detail.qualityscore&&(pl.checked=Dl.detail.qualityscore.includes(5)&&Dl.detail.qualityscore.length<5,fl.checked=Dl.detail.qualityscore.includes(4)&&Dl.detail.qualityscore.length<5,Al.checked=Dl.detail.qualityscore.includes(3)&&Dl.detail.qualityscore.length<5,bl.checked=Dl.detail.qualityscore.includes(2)&&Dl.detail.qualityscore.length<5,kl.checked=Dl.detail.qualityscore.includes(1)&&Dl.detail.qualityscore.length<5);let Wl=Object.keys(Dl.detail).filter((F=>F&&"theme"!==F)).length>0||this._viewer.map.getVisibleUsers().filter((F=>"geovisio"!==F)).length>0;F.setActive(Wl),this._onMapThemeChange()})),this._viewer.addEventListener("map:users-changed",(Da=>{let ll=Object.keys(this._viewer._mapFilters).filter((F=>F&&"theme"!==F)).length>0||Da.detail.usersIds.filter((F=>"geovisio"!==F)).length>0;F.setActive(ll)}));const Dl=document.getElementsByClassName("gvs-filter-zoomin"),changeLblZoomInDisplay=()=>{for(let F of Dl)this._viewer.map.getZoom()<7?F.style.display=null:F.style.display="none"};changeLblZoomInDisplay(),this._viewer.map.on("zoomend",changeLblZoomInDisplay)}_initWidgetShare(){var F,Da;const ll=(0,hl.Tf)("gvs-share",(0,hl.fa)(Ql.ek),this._t.gvs.share,["gvs-btn-large"]),cl=(0,hl.t_)(this,ll,[]);cl.innerHTML=`\n\t\t\t<div class="gvs-hidden gvs-needs-picture">\n\t\t\t\t<p id="gvs-share-license" style="margin: 0 0 10px 0;"></p>\n\t\t\t</div>\n\t\t\t<h4 style="margin-top: 0">${(0,hl.Qt)(wc.CQ)} ${this._t.gvs.share_links}</h4>\n\t\t\t<div id="gvs-share-links" class="gvs-input-btn">\n\t\t\t\t<a id="gvs-share-image" class="gvs-link-btn gvs-hidden gvs-needs-picture" download target="_blank">${(0,hl.Qt)(dd.sA)} ${this._t.gvs.share_image}</a>\n\t\t\t\t<button id="gvs-share-url" data-copy="true" style="flex-basis: 100%; flex-grow: 2; flex-shrink: 2;">${(0,hl.Qt)(pd.jP)} ${this._t.gvs.share_page}</button>\n\t\t\t\t<button id="gvs-share-print" style="flex-basis: 100%; flex-grow: 2; flex-shrink: 2;">${(0,hl.Qt)(qu.Jx)} ${this._t.gvs.share_print}</button>\n\t\t\t</div>\n\t\t\t<h4>\n\t\t\t\t${(0,hl.Qt)(Sc.e5)} ${this._t.gvs.share_embed}\n\t\t\t\t<a href="https://docs.panoramax.fr/web-viewer/03_URL_settings/"\n\t\t\t\t\ttitle="${this._t.gvs.share_embed_docs}"\n\t\t\t\t\ttarget="_blank"\n\t\t\t\t\tstyle="vertical-align: middle">\n\t\t\t\t\t${(0,hl.Qt)(ld.faCircleInfo)}\n\t\t\t\t</a>\n\t\t\t</h4>\n\t\t\t<div class="gvs-input-btn">\n\t\t\t\t<textarea id="gvs-share-iframe" readonly></textarea>\n\t\t\t\t<button data-input="gvs-share-iframe">${(0,hl.Qt)(pd.jP)} ${this._t.gvs.copy}</button>\n\t\t\t</div>\n\t\t\t<h4 class="gvs-hidden gvs-needs-picture">${(0,hl.Qt)(Nu.hp)} ${this._t.gvs.edit_osm}</h4>\n\t\t\t<div class="gvs-input-btn gvs-hidden gvs-needs-picture" style="justify-content: center">\n\t\t\t\t<a id="gvs-edit-id" class="gvs-link-btn" target="_blank">${(0,hl.Qt)(ud.gK)} ${this._t.gvs.id}</a>\n\t\t\t\t<button id="gvs-edit-josm" title="${this._t.gvs.josm_live}">${(0,hl.Qt)(ih.hU)} ${this._t.gvs.josm}</button>\n\t\t\t</div>\n\t\t`,(0,hl.wj)("gvs-widget-share","main-bottom-right",this,[ll,cl],["gvs-group-large","gvs-group-btnpanel","gvs-mobile-hidden","gvs-print-hidden"]);const dl=document.getElementById("gvs-share-links"),pl=document.getElementById("gvs-share-image"),fl=document.getElementById("gvs-share-url");if(this._viewer._api.getRSSURL()){const F=document.createElement("a");F.id="gvs-share-rss",F.classList.add("gvs-link-btn"),F.setAttribute("target","_blank"),F.setAttribute("title",this._t.gvs.share_rss_title),F.appendChild((0,hl.fa)(hd.zb)),F.appendChild(document.createTextNode(this._t.gvs.share_rss)),dl.insertBefore(F,fl)}this._viewer.addEventListener("psv:picture-loaded",(()=>{var F,Da;const ll=this._viewer.psv.getPictureMetadata();pl.href=null===ll||void 0===ll||null===(F=ll.panorama)||void 0===F?void 0:F.hdUrl;document.getElementById("gvs-share-license").innerHTML=null!==ll&&void 0!==ll&&null!==(Da=ll.caption)&&void 0!==Da&&Da.license?this._t.gvs.legend_license.replace("{l}",ll.caption.license):"";const hl=cl.getElementsByClassName("gvs-needs-picture");for(let cl=0;cl<hl.length;cl++){const F=hl[cl];ll?F.classList.remove("gvs-hidden"):F.classList.add("gvs-hidden")}}));const updateLinks=F=>{var Da,ll,hl;const dl=(null===F||void 0===F||null===(Da=F.detail)||void 0===Da?void 0:Da.url)||window.location.href.replace(/\/$/,""),pl=this._options.iframeBaseURL?this._options.iframeBaseURL+window.location.hash:dl,fl=cl.querySelector("#gvs-share-url"),Al=cl.querySelector("#gvs-share-iframe"),bl=cl.querySelector("#gvs-edit-id"),kl=cl.querySelector("#gvs-share-rss");fl.setAttribute("data-copy",(null===(ll=this._viewer)||void 0===ll||null===(hl=ll._hash)||void 0===hl?void 0:hl.getShortLink(dl))||dl),Al.innerText=`<iframe src="${pl}" style="border: none; width: 500px; height: 300px"></iframe>`;const Dl=this._viewer.psv.getPictureMetadata();if(Dl){const F={map:`19/${Dl.gps[1]}/${Dl.gps[0]}`,source:"Panoramax",photo_overlay:"panoramax",photo:`panoramax/${Dl.id}`};bl.setAttribute("href",`${this._options.editIdUrl}#${new URLSearchParams(F).toString()}`)}var Wl,Ql;kl&&kl.setAttribute("href",this._viewer._api.getRSSURL(null===(Wl=this._viewer)||void 0===Wl||null===(Ql=Wl.map)||void 0===Ql?void 0:Ql.getBounds()))};updateLinks(),this._viewer.addEventListener("ready",updateLinks,{once:!0}),null===(F=this._viewer)||void 0===F||null===(Da=F._hash)||void 0===Da||Da.addEventListener("url-changed",updateLinks),(0,hl.$c)(cl,this._viewer._t);const Al=cl.querySelector("#gvs-edit-josm");Al.addEventListener("click",(()=>{Al.classList.contains("gvs-btn-active")?this._viewer.toggleJOSMLive(!1):this._viewer.toggleJOSMLive(!0).catch((F=>{console.warn(F),alert(this._t.gvs.error_josm)}))})),this._viewer.addEventListener("josm-live-enabled",(()=>Al.classList.add("gvs-btn-active"))),this._viewer.addEventListener("josm-live-disabled",(()=>Al.classList.remove("gvs-btn-active")));cl.querySelector("#gvs-share-print").addEventListener("click",window.print.bind(window))}}},7325:(F,Da)=>{"use strict";var ll="star",cl=[11088,61446],hl="f005",dl="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z";Da.mw={prefix:"far",iconName:ll,icon:[576,512,cl,hl,dl]},Da.yy=Da.mw},6069:(F,Da)=>{"use strict";var ll="arrow-right",cl=[8594],hl="f061",dl="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.dm=Da.mw},4881:(F,Da)=>{"use strict";var ll=[61946],cl="M256 64C150 64 64 150 64 256s86 192 192 192c17.7 0 32 14.3 32 32s-14.3 32-32 32C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256l0 32c0 53-43 96-96 96c-29.3 0-55.6-13.2-73.2-33.9C320 371.1 289.5 384 256 384c-70.7 0-128-57.3-128-128s57.3-128 128-128c27.9 0 53.7 8.9 74.7 24.1c5.7-5 13.1-8.1 21.3-8.1c17.7 0 32 14.3 32 32l0 80 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32c0-106-86-192-192-192zm64 192a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z";Da.mw={prefix:"fas",iconName:"at",icon:[512,512,ll,"40",cl]},Da.Hz=Da.mw},1705:(F,Da)=>{"use strict";var ll="backward",cl=[9194],hl="f04a",dl="M459.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4L288 214.3l0 41.7 0 41.7L459.5 440.6zM256 352l0-96 0-128 0-32c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160C4.2 237.5 0 246.5 0 256s4.2 18.5 11.5 24.6l192 160c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-64z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.TH=Da.mw},9186:(F,Da)=>{"use strict";var ll="calendar",cl=[128197,128198],hl="f133",dl="M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.ok=Da.mw},99:(F,Da)=>{"use strict";var ll="camera",cl=[62258,"camera-alt"],hl="f030",dl="M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.rw=Da.mw},174:(F,Da)=>{"use strict";var ll="check",cl=[10003,10004],hl="f00c",dl="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.e6=Da.mw},2593:(F,Da)=>{"use strict";var ll="chevron-down",cl=[],hl="f078",dl="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.Jt=Da.mw},4011:(F,Da)=>{"use strict";var ll="circle-exclamation",cl=["exclamation-circle"],hl="f06a",dl="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.lE=Da.mw},7516:(F,Da)=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var ll="circle-info",cl=["info-circle"],hl="f05a",dl="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z";Da.definition={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.faCircleInfo=Da.definition,Da.prefix="fas",Da.iconName=ll,Da.width=512,Da.height=512,Da.ligatures=cl,Da.unicode=hl,Da.svgPathData=dl,Da.aliases=cl},3444:(F,Da)=>{"use strict";var ll="circle-notch",cl=[],hl="f1ce",dl="M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.s4=Da.mw},9564:(F,Da)=>{"use strict";var ll="circle-question",cl=[62108,"question-circle"],hl="f059",dl="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.AP=Da.mw},4162:(F,Da)=>{"use strict";var ll="cloud-arrow-down",cl=[62337,"cloud-download","cloud-download-alt"],hl="f0ed",dl="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128l-368 0zm79-167l80 80c9.4 9.4 24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-39 39L344 184c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 134.1-39-39c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z";Da.mw={prefix:"fas",iconName:ll,icon:[640,512,cl,hl,dl]},Da.sA=Da.mw},2975:(F,Da)=>{"use strict";var ll="comment-dots",cl=[128172,62075,"commenting"],hl="f4ad",dl="M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.Be=Da.mw},4189:(F,Da)=>{"use strict";var ll="copy",cl=[],hl="f0c5",dl="M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.jP=Da.mw},7172:(F,Da)=>{"use strict";var ll="earth-europe",cl=["globe-europe"],hl="f7a2",dl="M266.3 48.3L232.5 73.6c-5.4 4-8.5 10.4-8.5 17.1l0 9.1c0 6.8 5.5 12.3 12.3 12.3c2.4 0 4.8-.7 6.8-2.1l41.8-27.9c2-1.3 4.4-2.1 6.8-2.1l1 0c6.2 0 11.3 5.1 11.3 11.3c0 3-1.2 5.9-3.3 8l-19.9 19.9c-5.8 5.8-12.9 10.2-20.7 12.8l-26.5 8.8c-5.8 1.9-9.6 7.3-9.6 13.4c0 3.7-1.5 7.3-4.1 10l-17.9 17.9c-6.4 6.4-9.9 15-9.9 24l0 4.3c0 16.4 13.6 29.7 29.9 29.7c11 0 21.2-6.2 26.1-16l4-8.1c2.4-4.8 7.4-7.9 12.8-7.9c4.5 0 8.7 2.1 11.4 5.7l16.3 21.7c2.1 2.9 5.5 4.5 9.1 4.5c8.4 0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.5-7 0-15.5 7.5-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6c0-10.3 8.3-18.6 18.6-18.6l29.4 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-20.7 0c-7.2 0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8c0 6.2 5.1 11.3 11.3 11.3l11.3 0c6 0 11.8 2.4 16 6.6l6.5 6.5c1.8 1.8 2.8 4.3 2.8 6.8s-1 5-2.8 6.8l-7.5 7.5C386 262 384 266.9 384 272s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16l7.3 0c6.5-20.2 10-41.7 10-64c0-111.4-87.6-202.4-197.7-207.7zm172 307.9c-3.7-2.6-8.2-4.1-13-4.1c-6 0-11.8-2.4-16-6.6L396 332c-7.7-7.7-18-12-28.9-12c-9.7 0-19.2-3.5-26.6-9.8L314 287.4c-11.6-9.9-26.4-15.4-41.7-15.4l-20.9 0c-12.6 0-25 3.7-35.5 10.7L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3l0 3.2c0 17 6.7 33.3 18.7 45.3l16 16c8.5 8.5 20 13.3 32 13.3l21.3 0c13.3 0 24 10.7 24 24c0 2.5 .4 5 1.1 7.3c71.3-5.8 132.5-47.6 165.2-107.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM187.3 100.7c-6.2-6.2-16.4-6.2-22.6 0l-32 32c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l32-32c6.2-6.2 6.2-16.4 0-22.6z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.YS=Da.mw},6533:(F,Da)=>{"use strict";var ll="ellipsis-vertical",cl=["ellipsis-v"],hl="f142",dl="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z";Da.mw={prefix:"fas",iconName:ll,icon:[128,512,cl,hl,dl]},Da.nx=Da.mw},5431:(F,Da)=>{"use strict";var ll="forward",cl=[9193],hl="f04e",dl="M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4L224 214.3l0 41.7 0 41.7L52.5 440.6zM256 352l0-96 0-128 0-32c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4s-18.4-16.6-18.4-29l0-64z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.vF=Da.mw},8739:(F,Da)=>{"use strict";var ll="gear",cl=[9881,"cog"],hl="f013",dl="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.BH=Da.mw},5279:(F,Da)=>{"use strict";var ll="image",cl=[],hl="f03e",dl="M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.jb=Da.mw},6668:(F,Da,ll)=>{"use strict";var cl=ll(7516);Da.mw={prefix:cl.prefix,iconName:cl.iconName,icon:[cl.width,cl.height,cl.aliases,cl.unicode,cl.svgPathData]},Da.iW=Da.mw,cl.prefix,cl.iconName,cl.width,cl.height,cl.aliases,cl.unicode,cl.svgPathData,cl.aliases},4220:(F,Da)=>{"use strict";var ll="layer-group",cl=[],hl="f5fd",dl="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z";Da.mw={prefix:"fas",iconName:ll,icon:[576,512,cl,hl,dl]},Da.qI=Da.mw},325:(F,Da)=>{"use strict";var ll="lightbulb",cl=[128161],hl="f0eb",dl="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z";Da.mw={prefix:"fas",iconName:ll,icon:[384,512,cl,hl,dl]},Da.rC=Da.mw},7964:(F,Da)=>{"use strict";var ll="link",cl=[128279,"chain"],hl="f0c1",dl="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z";Da.mw={prefix:"fas",iconName:ll,icon:[640,512,cl,hl,dl]},Da.CQ=Da.mw},3520:(F,Da)=>{"use strict";var ll="location-dot",cl=["map-marker-alt"],hl="f3c5",dl="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z";Da.mw={prefix:"fas",iconName:ll,icon:[384,512,cl,hl,dl]},Da.gK=Da.mw},7761:(F,Da)=>{"use strict";var ll="magnifying-glass",cl=[128269,"search"],hl="f002",dl="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.$U=Da.mw},2e3:(F,Da)=>{"use strict";var ll=[128506,62072],cl="f279",hl="M384 476.1L192 421.2l0-385.3L384 90.8l0 385.3zm32-1.2l0-386.5L543.1 37.5c15.8-6.3 32.9 5.3 32.9 22.3l0 334.8c0 9.8-6 18.6-15.1 22.3L416 474.8zM15.1 95.1L160 37.2l0 386.5L32.9 474.5C17.1 480.8 0 469.2 0 452.2L0 117.4c0-9.8 6-18.6 15.1-22.3z";Da.mw={prefix:"fas",iconName:"map",icon:[576,512,ll,cl,hl]},Da.e5=Da.mw},3233:(F,Da)=>{"use strict";var ll="medal",cl=[127941],hl="f5a2",dl="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0L133.9 0c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0L487.4 0C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.B9=Da.mw},7290:(F,Da)=>{"use strict";var ll="minus",cl=[8211,8722,10134,"subtract"],hl="f068",dl="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.EZ=Da.mw},8629:(F,Da)=>{"use strict";var ll="palette",cl=[127912],hl="f53f",dl="M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3L344 320c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.fy=Da.mw},9683:(F,Da)=>{"use strict";var ll="panorama",cl=[],hl="e209",dl="M45.6 32C20.4 32 0 52.4 0 77.6L0 434.4C0 459.6 20.4 480 45.6 480c5.1 0 10-.8 14.7-2.4C74.6 472.8 177.6 440 320 440s245.4 32.8 259.6 37.6c4.7 1.6 9.7 2.4 14.7 2.4c25.2 0 45.6-20.4 45.6-45.6l0-356.7C640 52.4 619.6 32 594.4 32c-5 0-10 .8-14.7 2.4C565.4 39.2 462.4 72 320 72S74.6 39.2 60.4 34.4C55.6 32.8 50.7 32 45.6 32zM96 160a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm272 0c7.9 0 15.4 3.9 19.8 10.5L512.3 353c5.4 8 5.6 18.4 .4 26.5s-14.7 12.3-24.2 10.7C442.7 382.4 385.2 376 320 376c-65.6 0-123.4 6.5-169.3 14.4c-9.8 1.7-19.7-2.9-24.7-11.5s-4.3-19.4 1.9-27.2L197.3 265c4.6-5.7 11.4-9 18.7-9s14.2 3.3 18.7 9l26.4 33.1 87-127.6c4.5-6.6 11.9-10.5 19.8-10.5z";Da.mw={prefix:"fas",iconName:ll,icon:[640,512,cl,hl,dl]},Da.pt=Da.mw},1708:(F,Da)=>{"use strict";var ll="paper-plane",cl=[61913],hl="f1d8",dl="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.is=Da.mw},7472:(F,Da)=>{"use strict";var ll="pause",cl=[9208],hl="f04c",dl="M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z";Da.mw={prefix:"fas",iconName:ll,icon:[320,512,cl,hl,dl]},Da.G1=Da.mw},7321:(F,Da)=>{"use strict";var ll=[128394],cl="f304",hl="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z";Da.mw={prefix:"fas",iconName:"pen",icon:[512,512,ll,cl,hl]},Da.hp=Da.mw},9243:(F,Da)=>{"use strict";var ll="person-biking",cl=[128692,"biking"],hl="f84a",dl="M400 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm27.2 64l-61.8-48.8c-17.3-13.6-41.7-13.8-59.1-.3l-83.1 64.2c-30.7 23.8-28.5 70.8 4.3 91.6L288 305.1 288 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128c0-10.7-5.3-20.7-14.2-26.6L295 232.9l60.3-48.5L396 217c5.7 4.5 12.7 7 20 7l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-52.8 0zM56 384a72 72 0 1 1 144 0A72 72 0 1 1 56 384zm200 0A128 128 0 1 0 0 384a128 128 0 1 0 256 0zm184 0a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zm200 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z";Da.mw={prefix:"fas",iconName:ll,icon:[640,512,cl,hl,dl]},Da.rO=Da.mw},6386:(F,Da)=>{"use strict";var ll="play",cl=[9654],hl="f04b",dl="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z";Da.mw={prefix:"fas",iconName:ll,icon:[384,512,cl,hl,dl]},Da.ij=Da.mw},1372:(F,Da)=>{"use strict";var ll="plus",cl=[10133,61543,"add"],hl="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,"2b",hl]},Da.QL=Da.mw},501:(F,Da)=>{"use strict";var ll="print",cl=[128424,128438,9113],hl="f02f",dl="M128 0C92.7 0 64 28.7 64 64l0 96 64 0 0-96 226.7 0L384 93.3l0 66.7 64 0 0-66.7c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0L128 0zM384 352l0 32 0 64-256 0 0-64 0-16 0-16 256 0zm64 32l32 0c17.7 0 32-14.3 32-32l0-96c0-35.3-28.7-64-64-64L64 192c-35.3 0-64 28.7-64 64l0 96c0 17.7 14.3 32 32 32l32 0 0 64c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-64zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.Jx=Da.mw},7744:(F,Da)=>{"use strict";var ll="rocket",cl=[],hl="f135",dl="M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.KM=Da.mw},6787:(F,Da)=>{"use strict";var ll="satellite-dish",cl=[128225],hl="f7c0",dl="M192 32c0-17.7 14.3-32 32-32C383.1 0 512 128.9 512 288c0 17.7-14.3 32-32 32s-32-14.3-32-32C448 164.3 347.7 64 224 64c-17.7 0-32-14.3-32-32zM60.6 220.6L164.7 324.7l28.4-28.4c-.7-2.6-1.1-5.4-1.1-8.3c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32c-2.9 0-5.6-.4-8.3-1.1l-28.4 28.4L291.4 451.4c14.5 14.5 11.8 38.8-7.3 46.3C260.5 506.9 234.9 512 208 512C93.1 512 0 418.9 0 304c0-26.9 5.1-52.5 14.4-76.1c7.5-19 31.8-21.8 46.3-7.3zM224 96c106 0 192 86 192 192c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-70.7-57.3-128-128-128c-17.7 0-32-14.3-32-32s14.3-32 32-32z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.hU=Da.mw},1260:(F,Da)=>{"use strict";var ll="share-nodes",cl=["share-alt"],hl="f1e0",dl="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.ek=Da.mw},1904:(F,Da)=>{"use strict";var ll="sliders",cl=["sliders-h"],hl="f1de",dl="M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da._$=Da.mw},3095:(F,Da)=>{"use strict";var ll="square-rss",cl=["rss-square"],hl="f143",dl="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.zb=Da.mw},4780:(F,Da)=>{"use strict";var ll="star",cl=[11088,61446],hl="f005",dl="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z";Da.mw={prefix:"fas",iconName:ll,icon:[576,512,cl,hl,dl]},Da.yy=Da.mw},6311:(F,Da)=>{"use strict";var ll="triangle-exclamation",cl=[9888,"exclamation-triangle","warning"],hl="f071",dl="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";Da.mw={prefix:"fas",iconName:ll,icon:[512,512,cl,hl,dl]},Da.JA=Da.mw},7879:(F,Da)=>{"use strict";var ll="user",cl=[128100,62144],hl="f007",dl="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z";Da.mw={prefix:"fas",iconName:ll,icon:[448,512,cl,hl,dl]},Da.X4=Da.mw},6627:(F,Da)=>{"use strict";var ll="xmark",cl=[128473,10005,10006,10060,215,"close","multiply","remove","times"],hl="f00d",dl="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z";Da.mw={prefix:"fas",iconName:ll,icon:[384,512,cl,hl,dl]},Da.Jy=Da.mw},1545:(F,Da,ll)=>{"use strict";ll.d(Da,{AZ:()=>od,GR:()=>Op,IJ:()=>Up,Qw:()=>Rp,TL:()=>am,Wp:()=>Lu,aH:()=>dl,e6:()=>zu,jM:()=>Um,rx:()=>ld,uj:()=>jp,zY:()=>sm});var cl=ll(9408),hl=Object.defineProperty,__export=(F,Da)=>{for(var ll in Da)hl(F,ll,{get:Da[ll],enumerable:!0})},dl={};
/*!
 * Photo Sphere Viewer 5.11.0-beta.1
 * @copyright 2014-2015 Jérémy Heleine
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */__export(dl,{ACTIONS:()=>iu,ANIMATION_MIN_DURATION:()=>Al,CAPTURE_EVENTS_CLASS:()=>eu,CTRLZOOM_TIMEOUT:()=>Ql,DBLCLICK_DELAY:()=>kl,DEFAULT_TRANSITION:()=>fl,EASINGS:()=>hu,ICONS:()=>uu,IDS:()=>su,KEY_CODES:()=>cu,LONGTOUCH_DELAY:()=>Dl,MOVE_THRESHOLD:()=>bl,SPHERE_RADIUS:()=>wc,TWOFINGERSOVERLAY_DELAY:()=>Wl,VIEWER_DATA:()=>Sc});var pl,fl=1500,Al=500,bl=4,kl=300,Dl=500,Wl=100,Ql=2e3,wc=10,Sc="photoSphereViewer",eu="psv--capture-event",iu=(F=>(F.ROTATE_UP="ROTATE_UP",F.ROTATE_DOWN="ROTATE_DOWN",F.ROTATE_RIGHT="ROTATE_RIGHT",F.ROTATE_LEFT="ROTATE_LEFT",F.ZOOM_IN="ZOOM_IN",F.ZOOM_OUT="ZOOM_OUT",F))(iu||{}),su={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},cu={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},uu={arrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g>\x3c!-- Created by Flatart from the Noun Project --\x3e</svg>\n',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/>\x3c!--Created by Michael Zenaty from the Noun Project--\x3e</svg>\n',fullscreenIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/>\x3c!--Created by Garrett Knoll from the Noun Project--\x3e</svg>\n',fullscreenOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/>\x3c!--Created by Garrett Knoll from the Noun Project--\x3e</svg>\n',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/>\x3c!--Created by Arafat Uddin from the Noun Project--\x3e</svg>\n',menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g>\x3c!-- Created by Richard Kun\xe1k from the Noun Project--\x3e</svg>\n',zoomIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/>\x3c!--Created by Ryan Canning from the Noun Project--\x3e</svg>\n',zoomOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/>\x3c!--Created by Ryan Canning from the Noun Project--\x3e</svg>\n'},hu={linear:F=>F,inQuad:F=>F*F,outQuad:F=>F*(2-F),inOutQuad:F=>F<.5?2*F*F:(4-2*F)*F-1,inCubic:F=>F*F*F,outCubic:F=>--F*F*F+1,inOutCubic:F=>F<.5?4*F*F*F:(F-1)*(2*F-2)*(2*F-2)+1,inQuart:F=>F*F*F*F,outQuart:F=>1- --F*F*F*F,inOutQuart:F=>F<.5?8*F*F*F*F:1-8*--F*F*F*F,inQuint:F=>F*F*F*F*F,outQuint:F=>1+--F*F*F*F*F,inOutQuint:F=>F<.5?16*F*F*F*F*F:1+16*--F*F*F*F*F,inSine:F=>1-Math.cos(F*(Math.PI/2)),outSine:F=>Math.sin(F*(Math.PI/2)),inOutSine:F=>.5-.5*Math.cos(Math.PI*F),inExpo:F=>Math.pow(2,10*(F-1)),outExpo:F=>1-Math.pow(2,-10*F),inOutExpo:F=>(F=2*F-1)<0?.5*Math.pow(2,10*F):1-.5*Math.pow(2,-10*F),inCirc:F=>1-Math.sqrt(1-F*F),outCirc:F=>Math.sqrt(1-(F-1)*(F-1)),inOutCirc:F=>(F*=2)<1?.5-.5*Math.sqrt(1-F*F):.5+.5*Math.sqrt(1-(F-=2)*F)},Lu={};function wrap(F,Da){let ll=F%Da;return ll<0&&(ll+=Da),ll}function sum(F){return F.reduce(((F,Da)=>F+Da),0)}function distance(F,Da){return Math.sqrt(Math.pow(F.x-Da.x,2)+Math.pow(F.y-Da.y,2))}function angle(F,Da){return Math.atan2(Da.y-F.y,Da.x-F.x)}function getShortestArc(F,Da){return[0,2*Math.PI,2*-Math.PI].reduce(((ll,cl)=>{const hl=Da-F+cl;return Math.abs(hl)<Math.abs(ll)?hl:ll}),1/0)}function getAngle(F,Da){return Math.acos(Math.cos(F.pitch)*Math.cos(Da.pitch)*Math.cos(F.yaw-Da.yaw)+Math.sin(F.pitch)*Math.sin(Da.pitch))}function greatArcDistance(F,Da){let[ll,cl]=F,[hl,dl]=Da;ll-hl>Math.PI?ll-=2*Math.PI:ll-hl<-Math.PI&&(ll+=2*Math.PI);const pl=(hl-ll)*Math.cos((cl+dl)/2),fl=dl-cl;return Math.sqrt(pl*pl+fl*fl)}function getElement(F){return"string"===typeof F?F.match(/^[a-z]/i)?document.getElementById(F):document.querySelector(F):F}function toggleClass(F,Da,ll){void 0===ll?F.classList.toggle(Da):ll?F.classList.add(Da):ll||F.classList.remove(Da)}function addClasses(F,Da){F.classList.add(...Da.split(" ").filter((F=>!!F)))}function removeClasses(F,Da){F.classList.remove(...Da.split(" ").filter((F=>!!F)))}function hasParent(F,Da){let ll=F;do{if(ll===Da)return!0;ll=ll.parentElement}while(ll);return!1}function getClosest(F,Da){if(!F?.matches)return null;let ll=F;do{if(ll.matches(Da))return ll;ll=ll.parentElement}while(ll);return null}function getEventTarget(F){return F?.composedPath()[0]||null}function getMatchingTarget(F,Da){return F?F.composedPath().find((F=>(F instanceof HTMLElement||F instanceof SVGElement)&&F.matches(Da))):null}function getPosition(F){let Da=0,ll=0,cl=F;for(;cl;)Da+=cl.offsetLeft-cl.scrollLeft+cl.clientLeft,ll+=cl.offsetTop-cl.scrollTop+cl.clientTop,cl=cl.offsetParent;return Da-=window.scrollX,ll-=window.scrollY,{x:Da,y:ll}}function getStyleProperty(F,Da){return window.getComputedStyle(F).getPropertyValue(Da)}function getTouchData(F){if(F.touches.length<2)return null;const Da={x:F.touches[0].clientX,y:F.touches[0].clientY},ll={x:F.touches[1].clientX,y:F.touches[1].clientY};return{distance:distance(Da,ll),angle:angle(Da,ll),center:{x:(Da.x+ll.x)/2,y:(Da.y+ll.y)/2}}}function isFullscreenEnabled(F,Da){return void 0===Da&&(Da=!1),Da?F===pl:document.fullscreenElement===F}function requestFullscreen(F,Da){void 0===Da&&(Da=!1),Da?(pl=F,F.classList.add("psv-fullscreen-emulation"),document.dispatchEvent(new Event("fullscreenchange"))):F.requestFullscreen()}function exitFullscreen(F){void 0===F&&(F=!1),F?(pl.classList.remove("psv-fullscreen-emulation"),pl=null,document.dispatchEvent(new Event("fullscreenchange"))):document.exitFullscreen()}function dasherize(F){return F.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,((F,Da)=>(Da>0?"-":"")+F.toLowerCase()))}function throttle(F,Da){let ll=!1;return function(){for(var cl=arguments.length,hl=new Array(cl),dl=0;dl<cl;dl++)hl[dl]=arguments[dl];ll||(ll=!0,setTimeout((()=>{F.apply(this,hl),ll=!1}),Da))}}function isPlainObject(F){if("object"!==typeof F||null===F||"[object Object]"!==Object.prototype.toString.call(F))return!1;if(null===Object.getPrototypeOf(F))return!0;let Da=F;for(;null!==Object.getPrototypeOf(Da);)Da=Object.getPrototypeOf(Da);return Object.getPrototypeOf(F)===Da}function deepmerge(F,Da){const ll=Da;return function merge(F,Da){return Array.isArray(Da)?(F&&Array.isArray(F)?F.length=0:F=[],Da.forEach(((Da,ll)=>{F[ll]=merge(null,Da)}))):"object"===typeof Da?(F&&!Array.isArray(F)||(F={}),Object.keys(Da).forEach((cl=>{"object"===typeof Da[cl]&&Da[cl]&&isPlainObject(Da[cl])?Da[cl]!==ll&&(F[cl]?merge(F[cl],Da[cl]):F[cl]=merge(null,Da[cl])):F[cl]=Da[cl]}))):F=Da,F}(F,Da)}function clone(F){return deepmerge(null,F)}function isEmpty(F){return!F||0===Object.keys(F).length&&F.constructor===Object}function isNil(F){return null===F||void 0===F}function firstNonNull(){for(var F=arguments.length,Da=new Array(F),ll=0;ll<F;ll++)Da[ll]=arguments[ll];for(const cl of Da)if(!isNil(cl))return cl;return null}function deepEqual(F,Da){if(F===Da)return!0;if(isObject(F)&&isObject(Da)){if(Object.keys(F).length!==Object.keys(Da).length)return!1;for(const ll of Object.keys(F))if(!deepEqual(F[ll],Da[ll]))return!1;return!0}return!1}function isObject(F){return"object"===typeof F&&null!==F}__export(Lu,{Animation:()=>td,Dynamic:()=>id,MultiDynamic:()=>nd,PressHandler:()=>rd,Slider:()=>sd,SliderDirection:()=>ad,addClasses:()=>addClasses,angle:()=>angle,applyEulerInverse:()=>applyEulerInverse,checkClosedShadowDom:()=>checkClosedShadowDom,checkStylesheet:()=>checkStylesheet,checkVersion:()=>checkVersion,cleanCssPosition:()=>cleanCssPosition,clone:()=>clone,createTexture:()=>createTexture,cssPositionIsOrdered:()=>cssPositionIsOrdered,dasherize:()=>dasherize,deepEqual:()=>deepEqual,deepmerge:()=>deepmerge,distance:()=>distance,exitFullscreen:()=>exitFullscreen,firstNonNull:()=>firstNonNull,getAbortError:()=>getAbortError,getAngle:()=>getAngle,getClosest:()=>getClosest,getConfigParser:()=>getConfigParser,getElement:()=>getElement,getEventTarget:()=>getEventTarget,getMatchingTarget:()=>getMatchingTarget,getPosition:()=>getPosition,getShortestArc:()=>getShortestArc,getStyleProperty:()=>getStyleProperty,getTouchData:()=>getTouchData,getXMPValue:()=>getXMPValue,greatArcDistance:()=>greatArcDistance,hasParent:()=>hasParent,invertResolvableBoolean:()=>invertResolvableBoolean,isAbortError:()=>isAbortError,isEmpty:()=>isEmpty,isExtendedPosition:()=>isExtendedPosition,isFullscreenEnabled:()=>isFullscreenEnabled,isNil:()=>isNil,isPlainObject:()=>isPlainObject,logWarn:()=>logWarn,parseAngle:()=>parseAngle,parsePoint:()=>parsePoint,parseSpeed:()=>parseSpeed,removeClasses:()=>removeClasses,requestFullscreen:()=>requestFullscreen,resolveBoolean:()=>resolveBoolean,speedToDuration:()=>speedToDuration,sum:()=>sum,throttle:()=>throttle,toggleClass:()=>toggleClass,wrap:()=>wrap});var zu=class _PSVError extends Error{constructor(F,Da){super(Da&&Da instanceof Error?`${F}: ${Da.message}`:F),this.name="PSVError",Error.captureStackTrace?.(this,_PSVError)}};function resolveBoolean(F,Da){isPlainObject(F)?(Da(F.initial,!0),F.promise.then((F=>Da(F,!1)))):Da(F,!0)}function invertResolvableBoolean(F){return{initial:!F.initial,promise:F.promise.then((F=>!F))}}function getAbortError(){const F=new Error("Loading was aborted.");return F.name="AbortError",F}function isAbortError(F){return"AbortError"===F?.name}function logWarn(F){console.warn(`PhotoSphereViewer: ${F}`)}function isExtendedPosition(F){return!(!F||Array.isArray(F))&&[["textureX","textureY"],["yaw","pitch"]].some((Da=>{let[ll,cl]=Da;return void 0!==F[ll]&&void 0!==F[cl]}))}function getXMPValue(F,Da,ll){void 0===ll&&(ll=!0);let cl=F.match("<GPano:"+Da+">(.*)</GPano:"+Da+">");if(null!==cl){const F=ll?parseInt(cl[1],10):parseFloat(cl[1]);return isNaN(F)?null:F}if(cl=F.match("GPano:"+Da+'="(.*?)"'),null!==cl){const F=ll?parseInt(cl[1],10):parseFloat(cl[1]);return isNaN(F)?null:F}return null}var Du={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Nu=["left","center","right"],qu=["top","center","bottom"],ih=[...Nu,...qu],gh="center";function parsePoint(F){if(!F)return{x:.5,y:.5};if("object"===typeof F)return F;let Da=F.toLocaleLowerCase().split(" ").slice(0,2);1===Da.length&&(Da=Du[Da[0]]?[Da[0],gh]:[Da[0],Da[0]]);const ll="left"!==Da[1]&&"right"!==Da[1]&&"top"!==Da[0]&&"bottom"!==Da[0];Da=Da.map((F=>Du[F]||F)),ll||Da.reverse();const cl=Da.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return cl?{x:parseFloat(cl[1])/100,y:parseFloat(cl[2])/100}:{x:.5,y:.5}}function cleanCssPosition(F,Da){let{allowCenter:ll,cssOrder:cl}=void 0===Da?{allowCenter:!0,cssOrder:!0}:Da;return F?("string"===typeof F&&(F=F.split(" ")),1===F.length&&(F[0]===gh?F=[gh,gh]:-1!==Nu.indexOf(F[0])?F=[gh,F[0]]:-1!==qu.indexOf(F[0])&&(F=[F[0],gh])),2!==F.length||-1===ih.indexOf(F[0])||-1===ih.indexOf(F[1])?(logWarn(`Unparsable position ${F}`),null):ll||F[0]!==gh||F[1]!==gh?(cl&&!cssPositionIsOrdered(F)&&(F=[F[1],F[0]]),F[1]===gh&&-1!==Nu.indexOf(F[0])&&(F=[gh,F[0]]),F[0]===gh&&-1!==qu.indexOf(F[1])&&(F=[F[1],gh]),F):(logWarn("Invalid position center center"),null)):null}function cssPositionIsOrdered(F){return-1!==qu.indexOf(F[0])&&-1!==Nu.indexOf(F[1])}function parseSpeed(F){let Da;if("string"===typeof F){const ll=F.toString().trim();let hl=parseFloat(ll.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1"));const dl=ll.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(dl.match(/(pm|per minute)$/)&&(hl/=60),dl){case"dpm":case"degrees per minute":case"dps":case"degrees per second":Da=cl.cj9.degToRad(hl);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":Da=hl;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":Da=hl*Math.PI*2;break;default:throw new zu(`Unknown speed unit "${dl}"`)}}else Da=F;return Da}function speedToDuration(F,Da){if("number"!==typeof F){const ll=parseSpeed(F);return Da/Math.abs(ll)*1e3}return Math.abs(F)}function parseAngle(F,Da,ll){let hl;if(void 0===Da&&(Da=!1),void 0===ll&&(ll=Da),"string"===typeof F){const Da=F.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!Da)throw new zu(`Unknown angle "${F}"`);const ll=parseFloat(Da[1]),dl=Da[2];if(dl)switch(dl){case"deg":case"degs":hl=cl.cj9.degToRad(ll);break;case"rad":case"rads":hl=ll;break;default:throw new zu(`Unknown angle unit "${dl}"`)}else hl=ll}else{if("number"!==typeof F||isNaN(F))throw new zu(`Unknown angle "${F}"`);hl=F}return hl=wrap(Da?hl+Math.PI:hl,2*Math.PI),Da?cl.cj9.clamp(hl-Math.PI,-Math.PI/(ll?2:1),Math.PI/(ll?2:1)):hl}function createTexture(F,Da){void 0===Da&&(Da=!1);const ll=new cl.gPd(F);return ll.needsUpdate=!0,ll.minFilter=Da?cl.$_I:cl.k6q,ll.generateMipmaps=Da,ll.anisotropy=Da?2:1,ll}var ed=new cl.PTz;function applyEulerInverse(F,Da){ed.setFromEuler(Da).invert(),F.applyQuaternion(ed)}function getConfigParser(F,Da){const parser=function(ll){const cl=clone({...F,...ll}),hl={};for(let[dl,pl]of Object.entries(cl)){if(Da&&dl in Da)pl=Da[dl](pl,{rawConfig:cl,defValue:F[dl]});else if(!(dl in F)){logWarn(`Unknown option ${dl}`);continue}hl[dl]=pl}return hl};return parser.defaults=F,parser.parsers=Da||{},parser}function checkStylesheet(F,Da){"true"!==getStyleProperty(F,`--psv-${Da}-loaded`)&&console.error(`PhotoSphereViewer: stylesheet "@photo-sphere-viewer/${Da}/index.css" is not loaded`)}function checkVersion(F,Da,ll){Da&&Da!==ll&&console.error(`PhotoSphereViewer: @photo-sphere-viewer/${F} is in version ${Da} but @photo-sphere-viewer/core is in version ${ll}`)}function checkClosedShadowDom(F){do{if(F instanceof ShadowRoot&&"closed"===F.mode)return void console.error("PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected");F=F.parentNode}while(F)}var td=class{constructor(F){this.easing=hu.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=F,F?(F.easing&&(this.easing="function"===typeof F.easing?F.easing:hu[F.easing]||hu.linear),this.delayTimeout=setTimeout((()=>{this.delayTimeout=void 0,this.animationFrame=window.requestAnimationFrame((F=>this.__run(F)))}),F.delay||0)):this.resolved=!0}__run(F){if(this.cancelled)return;this.start||(this.start=F);const Da=(F-this.start)/this.options.duration,ll={};if(Da<1){for(const[F,cl]of Object.entries(this.options.properties))if(cl){const hl=cl.start+(cl.end-cl.start)*this.easing(Da);ll[F]=hl}this.options.onTick(ll,Da),this.animationFrame=window.requestAnimationFrame((F=>this.__run(F)))}else{for(const[F,Da]of Object.entries(this.options.properties))Da&&(ll[F]=Da.end);this.options.onTick(ll,1),this.__resolve(!0),this.animationFrame=void 0}}__resolve(F){F?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach((Da=>Da(F))),this.callbacks.length=0}then(F){return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(F):new Promise((F=>{this.callbacks.push(F)})).then(F)}cancel(){this.cancelled||this.resolved||(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}},id=class{constructor(F,Da){if(this.fn=F,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=Da.min,this.max=Da.max,this.wrap=Da.wrap,this.current=Da.defaultValue,this.wrap&&0!==this.min)throw new zu("invalid config");this.fn&&this.fn(this.current)}get current(){return this.__current}set current(F){this.__current=F}setSpeed(F){this.speed=F}goto(F,Da){void 0===Da&&(Da=1),this.mode=2,this.target=this.wrap?wrap(F,this.max):cl.cj9.clamp(F,this.min,this.max),this.speedMult=Da}step(F,Da){void 0===Da&&(Da=1),0===Da?this.setValue(this.current+F):(2!==this.mode&&(this.target=this.current),this.goto(this.target+F,Da))}roll(F,Da){void 0===F&&(F=!1),void 0===Da&&(Da=1),this.mode=1,this.target=F?-1/0:1/0,this.speedMult=Da}stop(){this.mode=0}setValue(F){return this.target=this.wrap?wrap(F,this.max):cl.cj9.clamp(F,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current&&(this.current=this.target,this.fn&&this.fn(this.current),!0)}update(F){if(2===this.mode){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);const F=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=F&&(this.mode=0)}let Da=0===this.mode?0:this.speed*this.speedMult;this.target<this.current&&(Da=-Da),this.currentSpeed<Da?this.currentSpeed=Math.min(Da,this.currentSpeed+F/1e3*this.speed*this.speedMult*2):this.currentSpeed>Da&&(this.currentSpeed=Math.max(Da,this.currentSpeed-F/1e3*this.speed*this.speedMult*2));let ll=null;return this.current>this.target&&this.currentSpeed?ll=Math.max(this.target,this.current+this.currentSpeed*F/1e3):this.current<this.target&&this.currentSpeed&&(ll=Math.min(this.target,this.current+this.currentSpeed*F/1e3)),null!==ll&&(ll=this.wrap?wrap(ll,this.max):cl.cj9.clamp(ll,this.min,this.max),ll!==this.current)&&(this.current=ll,this.fn&&this.fn(this.current),!0)}},nd=class{constructor(F,Da){this.fn=F,this.dynamics=Da,this.fn&&this.fn(this.current)}get current(){return Object.entries(this.dynamics).reduce(((F,Da)=>{let[ll,cl]=Da;return F[ll]=cl.current,F}),{})}setSpeed(F){for(const Da of Object.values(this.dynamics))Da.setSpeed(F)}goto(F,Da){void 0===Da&&(Da=1);for(const[ll,cl]of Object.entries(F))this.dynamics[ll].goto(cl,Da)}step(F,Da){if(void 0===Da&&(Da=1),0===Da)this.setValue(Object.keys(F).reduce(((Da,ll)=>(Da[ll]=F[ll]+this.dynamics[ll].current,Da)),{}));else for(const[ll,cl]of Object.entries(F))this.dynamics[ll].step(cl,Da)}roll(F,Da){void 0===Da&&(Da=1);for(const[ll,cl]of Object.entries(F))this.dynamics[ll].roll(cl,Da)}stop(){for(const F of Object.values(this.dynamics))F.stop()}setValue(F){let Da=!1;for(const[ll,cl]of Object.entries(F))Da=this.dynamics[ll].setValue(cl)||Da;return Da&&this.fn&&this.fn(this.current),Da}update(F){let Da=!1;for(const ll of Object.values(this.dynamics))Da=ll.update(F)||Da;return Da&&this.fn&&this.fn(this.current),Da}},rd=class{constructor(F){void 0===F&&(F=200),this.delay=F,this.time=0,this.delay=F}get pending(){return 0!==this.time}down(F){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=(new Date).getTime(),this.data=F}up(F){if(!this.time)return;Date.now()-this.time<this.delay?this.timeout=setTimeout((()=>{F(this.data),this.timeout=void 0,this.time=0,this.data=void 0}),this.delay):(F(this.data),this.time=0,this.data=void 0)}},ad=(F=>(F.VERTICAL="VERTICAL",F.HORIZONTAL="HORIZONTAL",F))(ad||{}),sd=class{constructor(F,Da,ll){this.container=F,this.direction=Da,this.listener=ll,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}get isVertical(){return"VERTICAL"===this.direction}get isHorizontal(){return"HORIZONTAL"===this.direction}destroy(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}handleEvent(F){switch(F.type){case"click":F.stopPropagation();break;case"mousedown":this.__onMouseDown(F);break;case"mouseenter":this.__onMouseEnter(F);break;case"mouseleave":this.__onMouseLeave(F);break;case"touchstart":this.__onTouchStart(F);break;case"mousemove":this.__onMouseMove(F);break;case"touchmove":this.__onTouchMove(F);break;case"mouseup":this.__onMouseUp(F);break;case"touchend":this.__onTouchEnd(F)}}__onMouseDown(F){this.mousedown=!0,this.__update(F.clientX,F.clientY,!0)}__onMouseEnter(F){this.mouseover=!0,this.__update(F.clientX,F.clientY,!0)}__onTouchStart(F){this.mouseover=!0,this.mousedown=!0;const Da=F.changedTouches[0];this.__update(Da.clientX,Da.clientY,!0)}__onMouseMove(F){(this.mousedown||this.mouseover)&&(F.stopPropagation(),this.__update(F.clientX,F.clientY,!0))}__onTouchMove(F){if(this.mousedown||this.mouseover){F.stopPropagation();const Da=F.changedTouches[0];this.__update(Da.clientX,Da.clientY,!0)}}__onMouseUp(F){this.mousedown&&(this.mousedown=!1,this.__update(F.clientX,F.clientY,!1))}__onMouseLeave(F){this.mouseover&&(this.mouseover=!1,this.__update(F.clientX,F.clientY,!0))}__onTouchEnd(F){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;const Da=F.changedTouches[0];this.__update(Da.clientX,Da.clientY,!1)}}__update(F,Da,ll){const hl=this.container.getBoundingClientRect();let dl;dl=this.isVertical?cl.cj9.clamp((hl.bottom-Da)/hl.height,0,1):cl.cj9.clamp((F-hl.left)/hl.width,0,1),this.listener({value:dl,click:!ll,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:F,clientY:Da}})}},od={};__export(od,{BeforeAnimateEvent:()=>dd,BeforeRenderEvent:()=>md,BeforeRotateEvent:()=>gd,ClickEvent:()=>yd,ConfigChangedEvent:()=>_d,DoubleClickEvent:()=>bd,FullscreenEvent:()=>Ed,HideNotificationEvent:()=>Sd,HideOverlayEvent:()=>Td,HidePanelEvent:()=>Cd,HideTooltipEvent:()=>zd,KeypressEvent:()=>Dd,LoadProgressEvent:()=>Nd,ObjectEnterEvent:()=>Cp,ObjectEvent:()=>Tp,ObjectHoverEvent:()=>Dp,ObjectLeaveEvent:()=>zp,PanoramaErrorEvent:()=>Vd,PanoramaLoadEvent:()=>Bd,PanoramaLoadedEvent:()=>Fd,PositionUpdatedEvent:()=>Zd,ReadyEvent:()=>Xd,RenderEvent:()=>Jd,RollUpdatedEvent:()=>Kd,ShowNotificationEvent:()=>lp,ShowOverlayEvent:()=>gp,ShowPanelEvent:()=>vp,ShowTooltipEvent:()=>xp,SizeUpdatedEvent:()=>wp,StopAllEvent:()=>Mp,TransitionDoneEvent:()=>qd,ViewerEvent:()=>ud,ZoomUpdatedEvent:()=>kp});var ld=class extends Event{constructor(F,Da){void 0===Da&&(Da=!1),super(F,{cancelable:Da})}},cd=class extends EventTarget{dispatchEvent(F){return super.dispatchEvent(F)}addEventListener(F,Da,ll){super.addEventListener(F,Da,ll)}removeEventListener(F,Da,ll){super.removeEventListener(F,Da,ll)}},ud=class extends ld{},hd=class _BeforeAnimateEvent extends ud{constructor(F,Da){super(_BeforeAnimateEvent.type,!0),this.position=F,this.zoomLevel=Da}};hd.type="before-animate";var dd=hd,pd=class _BeforeRenderEvent extends ud{constructor(F,Da){super(_BeforeRenderEvent.type),this.timestamp=F,this.elapsed=Da}};pd.type="before-render";var md=pd,fd=class _BeforeRotateEvent extends ud{constructor(F){super(_BeforeRotateEvent.type,!0),this.position=F}};fd.type="before-rotate";var gd=fd,Ad=class _ClickEvent extends ud{constructor(F){super(_ClickEvent.type),this.data=F}};Ad.type="click";var yd=Ad,vd=class _ConfigChangedEvent extends ud{constructor(F){super(_ConfigChangedEvent.type),this.options=F}containsOptions(){for(var F=arguments.length,Da=new Array(F),ll=0;ll<F;ll++)Da[ll]=arguments[ll];return Da.some((F=>this.options.includes(F)))}};vd.type="config-changed";var _d=vd,xd=class _DoubleClickEvent extends ud{constructor(F){super(_DoubleClickEvent.type),this.data=F}};xd.type="dblclick";var bd=xd,wd=class _FullscreenEvent extends ud{constructor(F){super(_FullscreenEvent.type),this.fullscreenEnabled=F}};wd.type="fullscreen";var Ed=wd,Md=class _HideNotificationEvent extends ud{constructor(F){super(_HideNotificationEvent.type),this.notificationId=F}};Md.type="hide-notification";var Sd=Md,kd=class _HideOverlayEvent extends ud{constructor(F){super(_HideOverlayEvent.type),this.overlayId=F}};kd.type="hide-overlay";var Td=kd,Id=class _HidePanelEvent extends ud{constructor(F){super(_HidePanelEvent.type),this.panelId=F}};Id.type="hide-panel";var Cd=Id,Ld=class _HideTooltipEvent extends ud{constructor(F){super(_HideTooltipEvent.type),this.tooltipData=F}};Ld.type="hide-tooltip";var zd=Ld,Pd=class _KeypressEvent extends ud{constructor(F,Da){super(_KeypressEvent.type,!0),this.key=F,this.originalEvent=Da}};Pd.type="key-press";var Dd=Pd,Rd=class _LoadProgressEvent extends ud{constructor(F){super(_LoadProgressEvent.type),this.progress=F}};Rd.type="load-progress";var Nd=Rd,Ud=class _PanoramaLoadEvent extends ud{constructor(F){super(_PanoramaLoadEvent.type),this.panorama=F}};Ud.type="panorama-load";var Bd=Ud,Od=class _PanoramaLoadedEvent extends ud{constructor(F){super(_PanoramaLoadedEvent.type),this.data=F}};Od.type="panorama-loaded";var Fd=Od,jd=class _PanoramaErrorEvent extends ud{constructor(F,Da){super(_PanoramaErrorEvent.type),this.panorama=F,this.error=Da}};jd.type="panorama-error";var Vd=jd,Gd=class _TransitionDoneEvent extends ud{constructor(F){super(_TransitionDoneEvent.type),this.completed=F}};Gd.type="transition-done";var qd=Gd,Hd=class _PositionUpdatedEvent extends ud{constructor(F){super(_PositionUpdatedEvent.type),this.position=F}};Hd.type="position-updated";var Zd=Hd,Wd=class _RollUpdatedEvent extends ud{constructor(F){super(_RollUpdatedEvent.type),this.roll=F}};Wd.type="roll-updated";var Kd=Wd,Qd=class _ReadyEvent extends ud{constructor(){super(_ReadyEvent.type)}};Qd.type="ready";var Xd=Qd,Yd=class _RenderEvent extends ud{constructor(){super(_RenderEvent.type)}};Yd.type="render";var Jd=Yd,$d=class _ShowNotificationEvent extends ud{constructor(F){super(_ShowNotificationEvent.type),this.notificationId=F}};$d.type="show-notification";var lp=$d,mp=class _ShowOverlayEvent extends ud{constructor(F){super(_ShowOverlayEvent.type),this.overlayId=F}};mp.type="show-overlay";var gp=mp,Ap=class _ShowPanelEvent extends ud{constructor(F){super(_ShowPanelEvent.type),this.panelId=F}};Ap.type="show-panel";var vp=Ap,_p=class _ShowTooltipEvent extends ud{constructor(F,Da){super(_ShowTooltipEvent.type),this.tooltip=F,this.tooltipData=Da}};_p.type="show-tooltip";var xp=_p,bp=class _SizeUpdatedEvent extends ud{constructor(F){super(_SizeUpdatedEvent.type),this.size=F}};bp.type="size-updated";var wp=bp,Ep=class _StopAllEvent extends ud{constructor(){super(_StopAllEvent.type)}};Ep.type="stop-all";var Mp=Ep,Sp=class _ZoomUpdatedEvent extends ud{constructor(F){super(_ZoomUpdatedEvent.type),this.zoomLevel=F}};Sp.type="zoom-updated";var kp=Sp,Tp=class extends ud{constructor(F,Da,ll,cl,hl){super(F),this.originalEvent=Da,this.object=ll,this.viewerPoint=cl,this.userDataKey=hl}},Ip=class _ObjectEnterEvent extends Tp{constructor(F,Da,ll,cl){super(_ObjectEnterEvent.type,F,Da,ll,cl)}};Ip.type="enter-object";var Cp=Ip,Lp=class _ObjectLeaveEvent extends Tp{constructor(F,Da,ll,cl){super(_ObjectLeaveEvent.type,F,Da,ll,cl)}};Lp.type="leave-object";var zp=Lp,Pp=class _ObjectHoverEvent extends Tp{constructor(F,Da,ll,cl){super(_ObjectHoverEvent.type,F,Da,ll,cl)}};Pp.type="hover-object";var Dp=Pp,Rp=class{constructor(F){this.viewer=F}init(){}destroy(){}supportsTransition(F){return!1}supportsPreload(F){return!1}textureCoordsToSphericalCoords(F,Da){throw new zu("Current adapter does not support texture coordinates.")}sphericalCoordsToTextureCoords(F,Da){throw new zu("Current adapter does not support texture coordinates.")}};function adapterInterop(F){if(F)for(const[,Da]of[["_",F],...Object.entries(F)])if(Da.prototype instanceof Rp)return checkVersion(Da.id,Da.VERSION,"5.11.0-beta.1"),Da;return null}Rp.supportsDownload=!1;var Np=`${Sc}_touchSupport`,Up={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,__maxCanvasWidth:null,isIphone:!1,get maxCanvasWidth(){return null===this.__maxCanvasWidth&&(this.__maxCanvasWidth=function(F){let Da=F,ll=!1;for(;Da>1024&&!ll;){const F=document.createElement("canvas"),hl=F.getContext("2d");F.width=Da,F.height=Da/2,hl.fillStyle="white",hl.fillRect(0,0,1,1);try{hl.getImageData(0,0,1,1).data[0]>0&&(ll=!0)}catch(cl){}F.width=0,F.height=0,ll||(Da/=2)}if(ll)return Da;throw new zu("Unable to detect system capabilities")}(this.maxTextureWidth)),this.__maxCanvasWidth},load(){if(!this.loaded){const F=function(){try{return document.createElement("canvas").getContext("webgl2")}catch(F){return null}}();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=!!F,this.maxTextureWidth=F?F.getParameter(F.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=function(){let F="ontouchstart"in window||navigator.maxTouchPoints>0;Np in localStorage&&(F="true"===localStorage[Np]);const Da=new Promise((Da=>{const clear=()=>{window.removeEventListener("mousedown",listenerMouse),window.removeEventListener("touchstart",listenerTouch),clearTimeout(ll)},listenerMouse=()=>{clear(),localStorage[Np]=!1,Da(!1)},listenerTouch=()=>{clear(),localStorage[Np]=!0,Da(!0)},listenerTimeout=()=>{clear(),localStorage[Np]=F,Da(F)};window.addEventListener("mousedown",listenerMouse,!1),window.addEventListener("touchstart",listenerTouch,!1);const ll=setTimeout(listenerTimeout,1e4)}));return{initial:F,promise:Da}}(),this.isIphone=/iPhone/i.test(navigator.userAgent),this.loaded=!0}if(!Up.isWebGLSupported)throw new zu("WebGL 2 is not supported.");if(0===Up.maxTextureWidth)throw new zu("Unable to detect system capabilities")}};var Bp=getConfigParser({backgroundColor:null,interpolateBackground:!1,resolution:64,useXmpData:!0,blur:!1},{resolution:F=>{if(!F||!cl.cj9.isPowerOfTwo(F))throw new zu("EquirectangularAdapter resolution must be power of two.");return F},backgroundColor:F=>(F&&logWarn("EquirectangularAdapter.backgroundColor is deprecated, use 'canvasBackground' main option instead."),F),interpolateBackground:F=>(F&&logWarn("EquirectangularAdapter.interpolateBackground is not supported anymore."),!1)}),Op=class extends Rp{constructor(F,Da){super(F),this.config=Bp(Da),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2,this.config.backgroundColor&&(F.config.canvasBackground=Da.backgroundColor)}supportsTransition(){return!0}supportsPreload(){return!0}textureCoordsToSphericalCoords(F,Da){if(isNil(F.textureX)||isNil(F.textureY))throw new zu("Texture position is missing 'textureX' or 'textureY'");const ll=(F.textureX+Da.croppedX)/Da.fullWidth*Math.PI*2,cl=(F.textureY+Da.croppedY)/Da.fullHeight*Math.PI;return{yaw:ll>=Math.PI?ll-Math.PI:ll+Math.PI,pitch:Math.PI/2-cl}}sphericalCoordsToTextureCoords(F,Da){const ll=F.yaw/Math.PI/2*Da.fullWidth,cl=F.pitch/Math.PI*Da.fullHeight;let hl=Math.round(F.yaw<Math.PI?ll+Da.fullWidth/2:ll-Da.fullWidth/2)-Da.croppedX,dl=Math.round(Da.fullHeight/2-cl)-Da.croppedY;return(hl<0||hl>Da.croppedWidth||dl<0||dl>Da.croppedHeight)&&(hl=dl=void 0),{textureX:hl,textureY:dl}}async loadTexture(F,Da,ll,cl){if(void 0===Da&&(Da=!0),void 0===cl&&(cl=this.config.useXmpData),"string"!==typeof F&&("object"!==typeof F||!F.path))return Promise.reject(new zu("Invalid panorama url, are you using the right adapter?"));let hl;hl="string"===typeof F?{path:F,data:ll}:{data:ll,...F};const dl=await this.viewer.textureLoader.loadFile(hl.path,Da?F=>this.viewer.loader.setProgress(F):null,hl.path),pl=cl?await this.loadXMP(dl):null,fl=await this.viewer.textureLoader.blobToImage(dl);"function"===typeof hl.data&&(hl.data=hl.data(fl,pl));const Al=this.mergePanoData(fl.width,fl.height,hl.data,pl);return{panorama:F,texture:this.createEquirectangularTexture(fl),panoData:Al,cacheKey:hl.path}}async loadXMP(F){const Da=await this.loadBlobAsString(F),ll=Da.indexOf("<x:xmpmeta");if(-1===ll)return null;const cl=Da.indexOf("</x:xmpmeta>",ll);if(-1===cl)return null;const hl=Da.substring(ll,cl);return hl.includes("GPano:")?{fullWidth:getXMPValue(hl,"FullPanoWidthPixels"),fullHeight:getXMPValue(hl,"FullPanoHeightPixels"),croppedWidth:getXMPValue(hl,"CroppedAreaImageWidthPixels"),croppedHeight:getXMPValue(hl,"CroppedAreaImageHeightPixels"),croppedX:getXMPValue(hl,"CroppedAreaLeftPixels"),croppedY:getXMPValue(hl,"CroppedAreaTopPixels"),poseHeading:getXMPValue(hl,"PoseHeadingDegrees",!1),posePitch:getXMPValue(hl,"PosePitchDegrees",!1),poseRoll:getXMPValue(hl,"PoseRollDegrees",!1),initialHeading:getXMPValue(hl,"InitialViewHeadingDegrees",!1),initialPitch:getXMPValue(hl,"InitialViewPitchDegrees",!1),initialFov:getXMPValue(hl,"InitialHorizontalFOVDegrees",!1)}:null}loadBlobAsString(F){return new Promise(((Da,ll)=>{const cl=new FileReader;cl.onload=()=>Da(cl.result),cl.onerror=ll,cl.readAsText(F)}))}createEquirectangularTexture(F){if(this.config.blur||F.width>Up.maxTextureWidth){const Da=Math.min(1,Up.maxCanvasWidth/F.width),ll=document.createElement("canvas");ll.width=F.width*Da,ll.height=F.height*Da;const cl=ll.getContext("2d");return this.config.blur&&(cl.filter=`blur(${ll.width/2048}px)`),cl.drawImage(F,0,0,ll.width,ll.height),createTexture(ll)}return createTexture(F)}createMesh(F){const Da=F.croppedX/F.fullWidth*2*Math.PI,ll=F.croppedWidth/F.fullWidth*2*Math.PI,hl=F.croppedY/F.fullHeight*Math.PI,dl=F.croppedHeight/F.fullHeight*Math.PI,pl=new cl.Gu$(wc,Math.round(this.SPHERE_SEGMENTS/(2*Math.PI)*ll),Math.round(this.SPHERE_HORIZONTAL_SEGMENTS/Math.PI*dl),-Math.PI/2+Da,ll,hl,dl).scale(-1,1,1),fl=new cl.V9B({depthTest:!1,depthWrite:!1});return new cl.eaF(pl,fl)}setTexture(F,Da){F.material.map=Da.texture}setTextureOpacity(F,Da){F.material.opacity=Da,F.material.transparent=Da<1}disposeTexture(F){let{texture:Da}=F;Da.dispose()}disposeMesh(F){F.geometry.dispose(),F.material.dispose()}mergePanoData(F,Da,ll,cl){if(!ll&&!cl){const cl=Math.max(F,2*Da),hl=Math.round(cl/2);ll={fullWidth:cl,fullHeight:hl,croppedWidth:F,croppedHeight:Da,croppedX:Math.round((cl-F)/2),croppedY:Math.round((hl-Da)/2)}}const hl={isEquirectangular:!0,fullWidth:firstNonNull(ll?.fullWidth,cl?.fullWidth,F),fullHeight:firstNonNull(ll?.fullHeight,cl?.fullHeight,Da),croppedWidth:firstNonNull(ll?.croppedWidth,cl?.croppedWidth,F),croppedHeight:firstNonNull(ll?.croppedHeight,cl?.croppedHeight,Da),croppedX:firstNonNull(ll?.croppedX,cl?.croppedX,0),croppedY:firstNonNull(ll?.croppedY,cl?.croppedY,0),poseHeading:firstNonNull(ll?.poseHeading,cl?.poseHeading,0),posePitch:firstNonNull(ll?.posePitch,cl?.posePitch,0),poseRoll:firstNonNull(ll?.poseRoll,cl?.poseRoll,0),initialHeading:cl?.initialHeading,initialPitch:cl?.initialPitch,initialFov:cl?.initialFov};return hl.croppedWidth===F&&hl.croppedHeight===Da||logWarn(`Invalid panoData, croppedWidth/croppedHeight is not coherent with the loaded image.\n            panoData: ${hl.croppedWidth}x${hl.croppedHeight}, image: ${F}x${Da}`),Math.abs(hl.fullWidth-2*hl.fullHeight)>1&&(logWarn("Invalid panoData, fullWidth should be twice fullHeight"),hl.fullWidth=2*hl.fullHeight),hl.croppedX+hl.croppedWidth>hl.fullWidth&&(logWarn("Invalid panoData, croppedX + croppedWidth > fullWidth"),hl.croppedX=hl.fullWidth-hl.croppedWidth),hl.croppedY+hl.croppedHeight>hl.fullHeight&&(logWarn("Invalid panoData, croppedY + croppedHeight > fullHeight"),hl.croppedY=hl.fullHeight-hl.croppedHeight),hl}};Op.id="equirectangular",Op.VERSION="5.11.0-beta.1",Op.supportsDownload=!0;var Fp=class extends Op{constructor(F,Da){super(F,{resolution:Da?.resolution??64,useXmpData:!1})}async loadTexture(F,Da){const ll=await super.loadTexture(F,Da,null,!1);return ll.panoData=null,ll}createMesh(){const F=new cl.Gu$(wc,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS).scale(-1,1,1).toNonIndexed(),Da=F.getAttribute("uv"),ll=F.getAttribute("normal");for(let cl=0;cl<Da.count;cl++)for(let F=0;F<3;F++){const hl=3*cl+F,dl=ll.getX(hl),pl=ll.getY(hl),fl=ll.getZ(hl),Al=.947;if(cl<Da.count/6){const F=0===dl&&0===fl?1:Math.acos(pl)/Math.sqrt(dl*dl+fl*fl)*(2/Math.PI);Da.setXY(hl,dl*(Al/4)*F+1/4,fl*(Al/2)*F+.5)}else{const F=0===dl&&0===fl?1:Math.acos(-pl)/Math.sqrt(dl*dl+fl*fl)*(2/Math.PI);Da.setXY(hl,Al/4*-dl*F+3/4,fl*(Al/2)*F+.5)}}F.rotateX(-Math.PI/2),F.rotateY(Math.PI);const hl=new cl.V9B({depthTest:!1,depthWrite:!1});return new cl.eaF(F,hl)}};Fp.id="dual-fisheye",Fp.VERSION="5.11.0-beta.1";var jp=class _AbstractComponent{constructor(F,Da){this.parent=F,this.children=[],this.container=document.createElement("div"),this.state={visible:!0},this.viewer=F instanceof _AbstractComponent?F.viewer:F,this.container.className=Da.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}destroy(){this.parent.container.removeChild(this.container);const F=this.parent.children.indexOf(this);-1!==F&&this.parent.children.splice(F,1),this.children.slice().forEach((F=>F.destroy())),this.children.length=0}toggle(F){void 0===F&&(F=!this.isVisible()),F?this.show():this.hide()}hide(F){this.container.style.display="none",this.state.visible=!1}show(F){this.container.style.display="",this.state.visible=!0}isVisible(){return this.state.visible}},Vp=getConfigParser({id:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),Gp=class extends jp{constructor(F,Da){super(F,{className:`psv-button ${Da.hoverScale?"psv-button--hover-scale":""} ${Da.className||""}`}),this.state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},this.config=Vp(Da),this.config.id=this.constructor.id,Da.icon&&this.__setIcon(Da.icon),this.state.width=this.container.offsetWidth,this.config.title?this.container.title=this.config.title:this.id&&this.id in this.viewer.config.lang&&(this.container.title=this.viewer.config.lang[this.id]),Da.tabbable&&(this.container.tabIndex=0),this.container.addEventListener("click",(F=>{this.state.enabled&&this.onClick(),F.stopPropagation()})),this.container.addEventListener("keydown",(F=>{F.key===cu.Enter&&this.state.enabled&&(this.onClick(),F.stopPropagation())}))}get id(){return this.config.id}get title(){return this.container.title}get content(){return this.container.innerHTML}get width(){return this.state.width}get collapsable(){return this.config.collapsable}show(F){void 0===F&&(F=!0),this.isVisible()||(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),F&&this.viewer.navbar.autoSize())}hide(F){void 0===F&&(F=!0),this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",F&&this.viewer.navbar.autoSize())}checkSupported(){resolveBoolean(this.isSupported(),((F,Da)=>{this.state&&(this.state.supported=F,Da?F||this.hide():this.toggle(F))}))}autoSize(){}isSupported(){return!0}toggleActive(F){void 0===F&&(F=!this.state.active),F!==this.state.active&&(this.state.active=F,toggleClass(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}disable(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}enable(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}collapse(){this.state.collapsed=!0,this.container.style.display="none"}uncollapse(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}__setIcon(F){this.container.innerHTML=F,addClasses(this.container.querySelector("svg"),"psv-button-svg")}},qp=class extends Gp{constructor(F,Da){super(F,{className:`psv-custom-button ${Da.className||""}`,hoverScale:!1,collapsable:!1!==Da.collapsable,tabbable:!1!==Da.tabbable,title:Da.title}),this.customOnClick=Da.onClick,Da.id?this.config.id=Da.id:this.config.id="psvButton-"+Math.random().toString(36).substring(2),Da.content&&("string"===typeof Da.content?this.container.innerHTML=Da.content:(this.container.classList.add("psv-custom-button--no-padding"),Da.content.style.height="100%",Da.content.attachViewer?.(this.viewer),this.container.appendChild(Da.content))),this.state.width=this.container.offsetWidth,Da.disabled&&this.disable(),!1===Da.visible&&this.hide()}onClick(){this.customOnClick?.(this.viewer)}},Hp=class extends Gp{constructor(F){super(F,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:uu.info}),this.mode=0,this.viewer.addEventListener(Sd.type,this),this.viewer.addEventListener(lp.type,this),this.viewer.addEventListener(Cd.type,this),this.viewer.addEventListener(vp.type,this),this.viewer.addEventListener(_d.type,this)}destroy(){this.viewer.removeEventListener(Sd.type,this),this.viewer.removeEventListener(lp.type,this),this.viewer.removeEventListener(Cd.type,this),this.viewer.removeEventListener(vp.type,this),this.viewer.removeEventListener(_d.type,this),super.destroy()}handleEvent(F){if(F instanceof _d)return void(F.containsOptions("description")&&this.autoSize(!0));if(!this.mode)return;let Da=!1;F instanceof Sd?Da=1===this.mode:F instanceof lp?Da=1===this.mode&&F.notificationId!==su.DESCRIPTION:F instanceof Cd?Da=2===this.mode:F instanceof vp&&(Da=2===this.mode&&F.panelId!==su.DESCRIPTION),Da&&(this.toggleActive(!1),this.mode=0)}onClick(){this.mode?this.__close():this.__open()}hide(F){super.hide(F),this.mode&&this.__close()}autoSize(F){if(void 0===F&&(F=!1),F){const F=this.viewer.navbar.getButton("caption",!1),Da=F&&!F.isVisible(),ll=!!this.viewer.config.description;Da||ll?this.show(!1):this.hide(!1)}}__close(){switch(this.mode){case 1:this.viewer.notification.hide(su.DESCRIPTION);break;case 2:this.viewer.panel.hide(su.DESCRIPTION)}}__open(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:su.DESCRIPTION,content:(this.viewer.config.caption?`<p>${this.viewer.config.caption}</p>`:"")+this.viewer.config.description})):(this.mode=1,this.viewer.notification.show({id:su.DESCRIPTION,content:this.viewer.config.caption}))}};Hp.id="description";var Zp=class extends Gp{constructor(F){super(F,{className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:uu.download}),this.viewer.addEventListener(_d.type,this)}destroy(){this.viewer.removeEventListener(_d.type,this),super.destroy()}handleEvent(F){F instanceof _d&&F.containsOptions("downloadUrl")&&this.checkSupported()}onClick(){const F=document.createElement("a");F.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,F.href.startsWith("data:")&&!this.viewer.config.downloadName?F.download="panorama."+F.href.substring(0,F.href.indexOf(";")).split("/").pop():F.download=this.viewer.config.downloadName||F.href.split("/").pop(),F.target="_blank",this.viewer.container.appendChild(F),F.click(),setTimeout((()=>{this.viewer.container.removeChild(F)}),100)}checkSupported(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}};Zp.id="download";var Wp=class extends Gp{constructor(F){super(F,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:uu.fullscreenIn,iconActive:uu.fullscreenOut}),this.viewer.addEventListener(Ed.type,this)}destroy(){this.viewer.removeEventListener(Ed.type,this),super.destroy()}handleEvent(F){F instanceof Ed&&this.toggleActive(F.fullscreenEnabled)}onClick(){this.viewer.toggleFullscreen()}};Wp.id="fullscreen";var Kp=class extends Gp{constructor(F){super(F,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:uu.menu}),this.viewer.addEventListener(vp.type,this),this.viewer.addEventListener(Cd.type,this),super.hide()}destroy(){this.viewer.removeEventListener(vp.type,this),this.viewer.removeEventListener(Cd.type,this),super.destroy()}handleEvent(F){F instanceof vp?this.toggleActive(F.panelId===su.MENU):F instanceof Cd&&this.toggleActive(!1)}onClick(){this.state.active?this.__hideMenu():this.__showMenu()}hide(F){super.hide(F),this.__hideMenu()}show(F){super.show(F),this.state.active&&this.__showMenu()}__showMenu(){var F,Da;this.viewer.panel.show({id:su.MENU,content:(F=this.viewer.navbar.collapsed,Da=this.viewer.config.lang.menu,`\n<div class="psv-panel-menu psv-panel-menu--stripped">\n  <h1 class="psv-panel-menu-title">${uu.menu} ${Da}</h1>\n  <ul class="psv-panel-menu-list">\n    ${F.map((F=>`\n    <li data-psv-button="${F.id}" class="psv-panel-menu-item" tabindex="0">\n      <span class="psv-panel-menu-item-icon">${F.content}</span>\n      <span class="psv-panel-menu-item-label">${F.title}</span>\n    </li>\n    `)).join("")}\n  </ul>\n</div>\n`),noMargin:!0,clickHandler:F=>{const Da=F?getClosest(F,".psv-panel-menu-item"):void 0,ll=Da?Da.dataset.psvButton:void 0;ll&&(this.viewer.navbar.getButton(ll).onClick(),this.__hideMenu())}})}__hideMenu(){this.viewer.panel.hide(su.MENU)}};function getIcon(F){let Da=0;switch(F){case 0:Da=90;break;case 1:Da=-90;break;case 3:Da=180;break;default:Da=0}return uu.arrow.replace("rotate(0",`rotate(${Da}`)}Kp.id="menu";var Qp=class extends Gp{constructor(F,Da){super(F,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:getIcon(Da)}),this.direction=Da,this.handler=new rd,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(F){switch(F.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":F.key===cu.Enter&&this.__onMouseDown();break;case"keyup":F.key===cu.Enter&&this.__onMouseUp()}}onClick(){}isSupported(){return invertResolvableBoolean(Up.isTouchEnabled)}__onMouseDown(){if(!this.state.enabled)return;const F={};switch(this.direction){case 0:F.pitch=!1;break;case 1:F.pitch=!0;break;case 3:F.yaw=!1;break;default:F.yaw=!0}this.viewer.stopAll(),this.viewer.dynamics.position.roll(F),this.handler.down()}__onMouseUp(){this.state.enabled&&this.handler.up((()=>{this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer()}))}};Qp.groupId="move";var Xp=class extends Qp{constructor(F){super(F,1)}};Xp.id="moveDown";var Yp=class extends Qp{constructor(F){super(F,2)}};Yp.id="moveLeft";var Jp=class extends Qp{constructor(F){super(F,3)}};Jp.id="moveRight";var $p=class extends Qp{constructor(F){super(F,0)}};$p.id="moveUp";var em=class extends Gp{constructor(F,Da,ll){super(F,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Da}),this.direction=ll,this.handler=new rd,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(F){switch(F.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":F.key===cu.Enter&&this.__onMouseDown();break;case"keyup":F.key===cu.Enter&&this.__onMouseUp()}}onClick(){}isSupported(){return invertResolvableBoolean(Up.isTouchEnabled)}__onMouseDown(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(1===this.direction),this.handler.down())}__onMouseUp(){this.state.enabled&&this.handler.up((()=>this.viewer.dynamics.zoom.stop()))}};em.groupId="zoom";var tm=class extends em{constructor(F){super(F,uu.zoomIn,0)}};tm.id="zoomIn";var im=class extends em{constructor(F){super(F,uu.zoomOut,1)}};im.id="zoomOut";var nm=class extends Gp{constructor(F){super(F,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1}),this.zoomRange=document.createElement("div"),this.zoomRange.className="psv-zoom-range-line",this.container.appendChild(this.zoomRange),this.zoomValue=document.createElement("div"),this.zoomValue.className="psv-zoom-range-handle",this.zoomRange.appendChild(this.zoomValue),this.slider=new sd(this.container,"HORIZONTAL",(F=>this.__onSliderUpdate(F))),this.mediaMinWidth=parseInt(getStyleProperty(this.container,"max-width"),10),this.viewer.addEventListener(kp.type,this),this.viewer.state.ready?this.__moveZoomValue(this.viewer.getZoomLevel()):this.viewer.addEventListener(Xd.type,this)}destroy(){this.slider.destroy(),this.viewer.removeEventListener(kp.type,this),this.viewer.removeEventListener(Xd.type,this),super.destroy()}handleEvent(F){F instanceof kp?this.__moveZoomValue(F.zoomLevel):F instanceof Xd&&this.__moveZoomValue(this.viewer.getZoomLevel())}onClick(){}isSupported(){return invertResolvableBoolean(Up.isTouchEnabled)}autoSize(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}__moveZoomValue(F){this.zoomValue.style.left=F/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}__onSliderUpdate(F){F.mousedown&&this.viewer.zoom(100*F.value)}};nm.id="zoomRange",nm.groupId="zoom";var rm=class extends cd{constructor(F){super(),this.viewer=F}init(){}destroy(){}},am=class extends rm{constructor(F,Da){super(F),this.config=this.constructor.configParser(Da)}setOption(F,Da){this.setOptions({[F]:Da})}setOptions(F){const Da={...this.config,...F},ll=this.constructor,cl=ll.configParser,hl=ll.readonlyOptions,dl=ll.id;for(let[pl,fl]of Object.entries(F))pl in cl.defaults?hl.includes(pl)?logWarn(`${dl}: Option "${pl}" cannot be updated`):(pl in cl.parsers&&(fl=cl.parsers[pl](fl,{rawConfig:Da,defValue:cl.defaults[pl]})),this.config[pl]=fl):logWarn(`${dl}: Unknown option "${pl}"`)}};function pluginInterop(F){if(F)for(const[,Da]of[["_",F],...Object.entries(F)])if(Da.prototype instanceof rm)return checkVersion(Da.id,Da.VERSION,"5.11.0-beta.1"),Da;return null}am.readonlyOptions=[];var sm={panorama:null,container:null,adapter:[Op,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:.8,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,panoData:null,requestHeaders:null,canvasBackground:"#000",rendererParameters:{alpha:!0,antialias:!0},withCredentials:!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",description:"Description",download:"Download",fullscreen:"Fullscreen",loading:"Loading...",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama cannot be loaded",webglError:"Your browser does not seem to support WebGL"},keyboard:"fullscreen",keyboardActions:{[cu.ArrowUp]:"ROTATE_UP",[cu.ArrowDown]:"ROTATE_DOWN",[cu.ArrowRight]:"ROTATE_RIGHT",[cu.ArrowLeft]:"ROTATE_LEFT",[cu.PageUp]:"ZOOM_IN",[cu.PageDown]:"ZOOM_OUT",[cu.Plus]:"ZOOM_IN",[cu.Minus]:"ZOOM_OUT"}},om={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},lm={container:F=>{if(!F)throw new zu("No value given for container.");return F},adapter:(F,Da)=>{let{defValue:ll}=Da;if(!(F=F?Array.isArray(F)?[adapterInterop(F[0]),F[1]]:[adapterInterop(F),null]:ll)[0])throw new zu("An undefined value was given for adapter.");if(!F[0].id)throw new zu("Adapter has no id.");return"little-planet"===F[0].id&&(logWarn("LittlePlanetAdapter support has been removed, use `{ fisheye: 2, maxFov: 130 }` to achieve similar effect."),F=ll),F},defaultYaw:F=>parseAngle(F),defaultPitch:F=>parseAngle(F,!0),defaultZoomLvl:F=>cl.cj9.clamp(F,0,100),minFov:(F,Da)=>{let{rawConfig:ll}=Da;return ll.maxFov<F&&(logWarn("maxFov cannot be lower than minFov"),F=ll.maxFov),cl.cj9.clamp(F,1,179)},maxFov:(F,Da)=>{let{rawConfig:ll}=Da;return F<ll.minFov&&(F=ll.minFov),cl.cj9.clamp(F,1,179)},moveInertia:(F,Da)=>{let{defValue:ll}=Da;return!0===F?ll:!1===F?0:F},lang:F=>({...sm.lang,...F}),keyboard:F=>!!F&&("object"===typeof F?(logWarn("Use keyboardActions to configure the keyboard actions, keyboard option must be either true, false, 'fullscreen' or 'always'"),"fullscreen"):"always"===F?"always":"fullscreen"),keyboardActions:(F,Da)=>{let{rawConfig:ll}=Da;return ll.keyboard&&"object"===typeof ll.keyboard?ll.keyboard:F},fisheye:F=>!0===F?1:!1===F?0:F,requestHeaders:F=>F&&"object"===typeof F?()=>F:"function"===typeof F?F:null,rendererParameters:(F,Da)=>{let{defValue:ll}=Da;return{...F,...ll}},plugins:F=>F.map(((F,Da)=>{if(!(F=Array.isArray(F)?[pluginInterop(F[0]),F[1]]:[pluginInterop(F),null])[0])throw new zu(`An undefined value was given for plugin ${Da}.`);if(!F[0].id)throw new zu(`Plugin ${Da} has no id.`);return F})),navbar:F=>!1===F?null:!0===F?clone(sm.navbar):"string"===typeof F?F.split(/[ ,]/):F},cm=getConfigParser(sm,lm),um=class extends Gp{constructor(F){super(F,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0}),this.contentWidth=0,this.state.width=0,this.contentElt=document.createElement("div"),this.contentElt.className="psv-caption-content",this.container.appendChild(this.contentElt),this.setCaption(this.viewer.config.caption)}hide(){this.contentElt.style.display="none",this.state.visible=!1}show(){this.contentElt.style.display="",this.state.visible=!0}onClick(){}setCaption(F){this.show(),this.contentElt.innerHTML=F??"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}autoSize(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}__refreshButton(){this.viewer.navbar.getButton(Hp.id,!1)?.autoSize(!0)}};um.id="caption";var hm={},dm={};[im,nm,tm,Hp,um,Zp,Wp,Yp,Jp,$p,Xp].forEach((F=>function(F,Da){if(!F.id)throw new zu("Button id is required");if(hm[F.id]=F,F.groupId&&(dm[F.groupId]=dm[F.groupId]||[]).push(F),Da){const ll=sm.navbar;switch(Da){case"start":ll.unshift(F.id);break;case"end":ll.push(F.id);break;default:{const[cl,hl]=Da.split(":"),dl=ll.indexOf(cl);if(!cl||!hl||-1===dl)throw new zu(`Invalid defaultPosition ${Da}`);ll.splice(dl+("right"===hl?1:0),0,F.id)}}}}(F)));var pm=class extends jp{constructor(F){super(F,{className:`psv-navbar ${eu}`}),this.collapsed=[],this.state.visible=!1}show(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}hide(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}setButtons(F){this.children.slice().forEach((F=>F.destroy())),this.children.length=0,-1!==F.indexOf(um.id)&&-1===F.indexOf(Hp.id)&&F.splice(F.indexOf(um.id),0,Hp.id),F.forEach((F=>{"object"===typeof F?new qp(this,F):hm[F]?new hm[F](this):dm[F]?dm[F].forEach((F=>{new F(this)})):logWarn(`Unknown button ${F}`)})),new Kp(this),this.children.forEach((F=>{F instanceof Gp&&F.checkSupported()})),this.autoSize()}setCaption(F){this.children.some((Da=>Da instanceof um&&(Da.setCaption(F),!0)))}getButton(F,Da){void 0===Da&&(Da=!0);const ll=this.children.find((Da=>Da instanceof Gp&&Da.id===F));return!ll&&Da&&logWarn(`button "${F}" not found in the navbar`),ll}autoSize(){this.children.forEach((F=>{F instanceof Gp&&F.autoSize()}));const F=this.container.offsetWidth;let Da=0;const ll=[];this.children.forEach((F=>{F.isVisible()&&F instanceof Gp&&(Da+=F.width,F.collapsable&&ll.push(F))})),0!==Da&&(F<Da&&ll.length>0?(ll.forEach((F=>F.collapse())),this.collapsed=ll,this.getButton(Kp.id).show(!1)):F>=Da&&this.collapsed.length>0&&(this.collapsed.forEach((F=>F.uncollapse())),this.collapsed=[],this.getButton(Kp.id).hide(!1)),this.getButton(um.id,!1)?.autoSize())}};cl.l2R.enabled=!1;var mm={enabled:!0,maxItems:10,ttl:600,items:{},purgeInterval:null,init(){cl.l2R.enabled&&(logWarn("ThreeJS cache should be disabled"),cl.l2R.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval((()=>this.purge()),6e4))},add(F,Da,ll){this.enabled&&Da&&(this.items[Da]=this.items[Da]??{files:{},lastAccess:null},this.items[Da].files[F]=ll,this.items[Da].lastAccess=Date.now())},get(F,Da){if(this.enabled&&Da&&this.items[Da])return this.items[Da].lastAccess=Date.now(),this.items[Da].files[F]},remove(F,Da){this.enabled&&Da&&this.items[Da]&&(delete this.items[Da].files[F],0===Object.keys(this.items[Da].files).length&&delete this.items[Da])},purge(){Object.entries(this.items).sort(((F,Da)=>{let[,ll]=F,[,cl]=Da;return cl.lastAccess-ll.lastAccess})).forEach(((F,Da)=>{let[ll,{lastAccess:cl}]=F;Da>0&&(Date.now()-cl>=1e3*this.ttl||Da>=this.maxItems)&&delete this.items[ll]}))}},fm=class extends jp{constructor(F){super(F,{className:"psv-loader-container"}),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.size=this.loader.offsetWidth,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("class","psv-loader-canvas"),this.canvas.setAttribute("viewBox",`0 0 ${this.size} ${this.size}`),this.loader.appendChild(this.canvas),this.textColor=getStyleProperty(this.loader,"color"),this.color=getStyleProperty(this.canvas,"color"),this.border=parseInt(getStyleProperty(this.loader,"--psv-loader-border"),10),this.thickness=parseInt(getStyleProperty(this.loader,"--psv-loader-tickness"),10),this.viewer.addEventListener(_d.type,this),this.__updateContent(),this.hide()}destroy(){this.viewer.removeEventListener(_d.type,this),super.destroy()}handleEvent(F){F instanceof _d&&F.containsOptions("loadingImg","loadingTxt")&&this.__updateContent()}setProgress(F){const Da=Math.min(F,99.999)/100*Math.PI*2,ll=this.size/2,cl=ll,hl=this.thickness/2+this.border,dl=(this.size-this.thickness)/2-this.border,pl=Math.sin(Da)*dl+ll,fl=-Math.cos(Da)*dl+ll,Al=F>50?"1":"0";this.canvas.innerHTML=`\n            <circle cx="${ll}" cy="${ll}" r="${ll}" fill="${this.color}"/>\n            <path d="M ${cl} ${hl} A ${dl} ${dl} 0 ${Al} 1 ${pl} ${fl}" \n                  fill="none" stroke="${this.textColor}" stroke-width="${this.thickness}" stroke-linecap="round"/>\n        `,this.viewer.dispatchEvent(new Nd(Math.round(F)))}__updateContent(){const F=this.loader.querySelector(".psv-loader-image, .psv-loader-text");let Da;if(F&&this.loader.removeChild(F),this.viewer.config.loadingImg?(Da=document.createElement("img"),Da.className="psv-loader-image",Da.src=this.viewer.config.loadingImg):null!==this.viewer.config.loadingTxt&&(Da=document.createElement("div"),Da.className="psv-loader-text",Da.innerHTML=this.viewer.config.loadingTxt||this.viewer.config.lang.loading),Da){const F=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));Da.style.maxWidth=F+"px",Da.style.maxHeight=F+"px",this.loader.appendChild(Da)}}},gm=class extends jp{constructor(F){super(F,{className:"psv-notification"}),this.state={visible:!1,contentId:null,timeout:null},this.content=document.createElement("div"),this.content.className="psv-notification-content",this.container.appendChild(this.content),this.content.addEventListener("click",(()=>this.hide()))}isVisible(F){return this.state.visible&&(!F||!this.state.contentId||this.state.contentId===F)}toggle(){throw new zu("Notification cannot be toggled")}show(F){this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),"string"===typeof F&&(F={content:F}),this.state.contentId=F.id||null,this.content.innerHTML=F.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new lp(F.id)),F.timeout&&(this.state.timeout=setTimeout((()=>this.hide(this.state.contentId)),F.timeout))}hide(F){if(this.isVisible(F)){const F=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new Sd(F))}}},Am=class extends jp{constructor(F){super(F,{className:`psv-overlay ${eu}`}),this.state={visible:!1,contentId:null,dissmisable:!0},this.image=document.createElement("div"),this.image.className="psv-overlay-image",this.container.appendChild(this.image),this.title=document.createElement("div"),this.title.className="psv-overlay-title",this.container.appendChild(this.title),this.text=document.createElement("div"),this.text.className="psv-overlay-text",this.container.appendChild(this.text),this.container.addEventListener("click",this),this.viewer.addEventListener(Dd.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Dd.type,this),super.destroy()}handleEvent(F){"click"===F.type?this.isVisible()&&this.state.dissmisable&&(this.hide(),F.stopPropagation()):F instanceof Dd&&this.isVisible()&&this.state.dissmisable&&F.key===cu.Escape&&(this.hide(),F.preventDefault())}isVisible(F){return this.state.visible&&(!F||!this.state.contentId||this.state.contentId===F)}toggle(){throw new zu("Overlay cannot be toggled")}show(F){"string"===typeof F&&(F={title:F}),this.state.contentId=F.id||null,this.state.dissmisable=!1!==F.dissmisable,this.image.innerHTML=F.image||"",this.title.innerHTML=F.title||"",this.text.innerHTML=F.text||"",super.show(),this.viewer.dispatchEvent(new gp(F.id))}hide(F){if(this.isVisible(F)){const F=this.state.contentId;super.hide(),this.state.contentId=null,this.viewer.dispatchEvent(new Td(F))}}},ym="psv-panel-content--no-interaction",vm=class extends jp{constructor(F){super(F,{className:`psv-panel ${eu}`}),this.state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};const Da=document.createElement("div");Da.className="psv-panel-resizer",this.container.appendChild(Da);const ll=document.createElement("div");ll.className="psv-panel-close-button",ll.innerHTML=uu.close,ll.title=F.config.lang.close,this.container.appendChild(ll),this.content=document.createElement("div"),this.content.className="psv-panel-content",this.container.appendChild(this.content),this.container.addEventListener("wheel",(F=>F.stopPropagation())),ll.addEventListener("click",(()=>this.hide())),Da.addEventListener("mousedown",this),Da.addEventListener("touchstart",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this),this.viewer.container.addEventListener("mousemove",this),this.viewer.container.addEventListener("touchmove",this),this.viewer.addEventListener(Dd.type,this)}destroy(){this.viewer.removeEventListener(Dd.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(F){switch(F.type){case"mousedown":this.__onMouseDown(F);break;case"touchstart":this.__onTouchStart(F);break;case"mousemove":this.__onMouseMove(F);break;case"touchmove":this.__onTouchMove(F);break;case"mouseup":this.__onMouseUp(F);break;case"touchend":this.__onTouchEnd(F);break;case Dd.type:this.__onKeyPress(F)}}isVisible(F){return this.state.visible&&(!F||!this.state.contentId||this.state.contentId===F)}toggle(){throw new zu("Panel cannot be toggled")}show(F){"string"===typeof F&&(F={content:F});const Da=this.isVisible(F.id);this.state.contentId=F.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),F.id&&this.state.width[F.id]?this.container.style.width=this.state.width[F.id]:F.width?this.container.style.width=F.width:this.container.style.width=null,this.content.innerHTML=F.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),toggleClass(this.content,"psv-panel-content--no-margin",!0===F.noMargin),F.clickHandler&&(this.state.clickHandler=Da=>{F.clickHandler(getEventTarget(Da))},this.state.keyHandler=Da=>{Da.key===cu.Enter&&F.clickHandler(getEventTarget(Da))},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),Da||setTimeout((()=>{this.content.querySelector("a,button,[tabindex]")?.focus()}),300)),this.viewer.dispatchEvent(new vp(F.id))}hide(F){if(this.isVisible(F)){const F=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.state.clickHandler=null),this.viewer.dispatchEvent(new Cd(F))}}__onMouseDown(F){F.stopPropagation(),this.__startResize(F.clientX,F.clientY)}__onTouchStart(F){if(F.stopPropagation(),1===F.touches.length){const Da=F.touches[0];this.__startResize(Da.clientX,Da.clientY)}}__onMouseUp(F){this.state.mousedown&&(F.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(ym))}__onTouchEnd(F){this.state.mousedown&&(F.stopPropagation(),0===F.touches.length&&(this.state.mousedown=!1,this.content.classList.remove(ym)))}__onMouseMove(F){this.state.mousedown&&(F.stopPropagation(),this.__resize(F.clientX,F.clientY))}__onTouchMove(F){if(this.state.mousedown){const Da=F.touches[0];this.__resize(Da.clientX,Da.clientY)}}__onKeyPress(F){this.isVisible()&&F.key===cu.Escape&&(this.hide(),F.preventDefault())}__startResize(F,Da){this.state.mouseX=F,this.state.mouseY=Da,this.state.mousedown=!0,this.content.classList.add(ym)}__resize(F,Da){const ll=F,cl=Da,hl=Math.max(200,this.container.offsetWidth-(ll-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=hl),this.container.style.width=hl,this.state.mouseX=ll,this.state.mouseY=cl}},_m=class extends jp{constructor(F,Da){super(F,{className:"psv-tooltip"}),this.state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null,hideTimeout:null},this.content=document.createElement("div"),this.content.className="psv-tooltip-content",this.container.appendChild(this.content),this.arrow=document.createElement("div"),this.arrow.className="psv-tooltip-arrow",this.container.appendChild(this.arrow),this.container.addEventListener("transitionend",this),this.container.addEventListener("touchdown",(F=>F.stopPropagation())),this.container.addEventListener("mousedown",(F=>F.stopPropagation())),this.container.style.top="-1000px",this.container.style.left="-1000px",this.show(Da)}handleEvent(F){"transitionend"===F.type&&this.__onTransitionEnd(F)}destroy(){clearTimeout(this.state.hideTimeout),delete this.state.data,super.destroy()}toggle(){throw new zu("Tooltip cannot be toggled")}show(F){if(0!==this.state.state)throw new zu("Initialized tooltip cannot be re-initialized");F.className&&addClasses(this.container,F.className),F.style&&Object.assign(this.container.style,F.style),this.state.state=3,this.update(F.content,F),this.state.data=F.data,this.state.state=1,this.viewer.dispatchEvent(new xp(this,this.state.data)),this.__waitImages()}update(F,Da){this.content.innerHTML=F;const ll=this.container.getBoundingClientRect();this.state.width=ll.right-ll.left,this.state.height=ll.bottom-ll.top,this.state.arrow=parseInt(getStyleProperty(this.arrow,"border-top-width"),10),this.state.border=parseInt(getStyleProperty(this.container,"border-top-left-radius"),10),this.move(Da??this.state.config),this.__waitImages()}move(F){if(1!==this.state.state&&3!==this.state.state)throw new zu("Uninitialized tooltip cannot be moved");F.box=F.box??this.state.config?.box??{width:0,height:0},this.state.config=F;const Da=this.container,ll=this.arrow,cl={posClass:cleanCssPosition(F.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(cl,F);let hl=null,dl=null;if(cl.top<0?hl="bottom":cl.top+cl.height>this.viewer.state.size.height&&(hl="top"),cl.left<0?dl="right":cl.left+cl.width>this.viewer.state.size.width&&(dl="left"),dl||hl){const Da=cssPositionIsOrdered(cl.posClass);hl&&(cl.posClass[Da?0:1]=hl),dl&&(cl.posClass[Da?1:0]=dl),this.__computeTooltipPosition(cl,F)}Da.style.top=cl.top+"px",Da.style.left=cl.left+"px",ll.style.top=cl.arrowTop+"px",ll.style.left=cl.arrowLeft+"px";const pl=cl.posClass.join("-");pl!==this.state.pos&&(Da.classList.remove(`psv-tooltip--${this.state.pos}`),this.state.pos=pl,Da.classList.add(`psv-tooltip--${this.state.pos}`))}hide(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new zd(this.state.data));const F=parseFloat(getStyleProperty(this.container,"transition-duration"));this.state.hideTimeout=setTimeout((()=>{this.destroy()}),2*F)}__onTransitionEnd(F){if("transform"===F.propertyName)switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy()}}__computeTooltipPosition(F,Da){const ll=this.state.arrow,cl=Da.top,hl=F.height,dl=Da.left,pl=F.width,fl=ll+this.state.border,Al=Da.box.width/2+2*ll,bl=Da.box.height/2+2*ll;switch(F.posClass.join("-")){case"top-left":F.top=cl-bl-hl,F.left=dl+fl-pl,F.arrowTop=hl,F.arrowLeft=pl-fl-ll;break;case"top-center":F.top=cl-bl-hl,F.left=dl-pl/2,F.arrowTop=hl,F.arrowLeft=pl/2-ll;break;case"top-right":F.top=cl-bl-hl,F.left=dl-fl,F.arrowTop=hl,F.arrowLeft=ll;break;case"bottom-left":F.top=cl+bl,F.left=dl+fl-pl,F.arrowTop=2*-ll,F.arrowLeft=pl-fl-ll;break;case"bottom-center":F.top=cl+bl,F.left=dl-pl/2,F.arrowTop=2*-ll,F.arrowLeft=pl/2-ll;break;case"bottom-right":F.top=cl+bl,F.left=dl-fl,F.arrowTop=2*-ll,F.arrowLeft=ll;break;case"left-top":F.top=cl+fl-hl,F.left=dl-Al-pl,F.arrowTop=hl-fl-ll,F.arrowLeft=pl;break;case"center-left":F.top=cl-hl/2,F.left=dl-Al-pl,F.arrowTop=hl/2-ll,F.arrowLeft=pl;break;case"left-bottom":F.top=cl-fl,F.left=dl-Al-pl,F.arrowTop=ll,F.arrowLeft=pl;break;case"right-top":F.top=cl+fl-hl,F.left=dl+Al,F.arrowTop=hl-fl-ll,F.arrowLeft=2*-ll;break;case"center-right":F.top=cl-hl/2,F.left=dl+Al,F.arrowTop=hl/2-ll,F.arrowLeft=2*-ll;break;case"right-bottom":F.top=cl-fl,F.left=dl+Al,F.arrowTop=ll,F.arrowLeft=2*-ll}}__waitImages(){const F=this.content.querySelectorAll("img");if(F.length>0){const Da=[];F.forEach((F=>{F.complete||Da.push(new Promise((Da=>{F.onload=Da,F.onerror=Da})))})),Da.length&&Promise.all(Da).then((()=>{if(1===this.state.state||3===this.state.state){const F=this.container.getBoundingClientRect();this.state.width=F.right-F.left,this.state.height=F.bottom-F.top,this.move(this.state.config)}}))}}},xm=class{constructor(F){this.viewer=F,this.config=F.config,this.state=F.state}destroy(){}},bm=new cl.Pq0,wm=new cl.O9p(0,0,0,"ZXY"),Em=class extends xm{constructor(F){super(F)}fovToZoomLevel(F){const Da=Math.round((F-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return cl.cj9.clamp(Da-2*(Da-50),0,100)}zoomLevelToFov(F){return this.config.maxFov+F/100*(this.config.minFov-this.config.maxFov)}vFovToHFov(F){return cl.cj9.radToDeg(2*Math.atan(Math.tan(cl.cj9.degToRad(F)/2)*this.state.aspect))}hFovToVFov(F){return cl.cj9.radToDeg(2*Math.atan(Math.tan(cl.cj9.degToRad(F)/2)/this.state.aspect))}getAnimationProperties(F,Da,ll){const cl=!isNil(Da),hl=!isNil(ll),dl={};let pl=null;if(cl){const ll=this.viewer.getPosition(),cl=getShortestArc(ll.yaw,Da.yaw);dl.yaw={start:ll.yaw,end:ll.yaw+cl},dl.pitch={start:ll.pitch,end:Da.pitch},pl=speedToDuration(F,getAngle(ll,Da))}if(hl){const Da=this.viewer.getZoomLevel(),cl=Math.abs(ll-Da);dl.zoom={start:Da,end:ll},null===pl&&(pl=speedToDuration(F,Math.PI/4*cl/100))}return pl=null===pl?"number"===typeof F?F:Al:Math.max(Al,pl),{duration:pl,properties:dl}}textureCoordsToSphericalCoords(F){if(!this.state.textureData?.panoData)throw new zu("Current adapter does not support texture coordinates or no texture has been loaded");const Da=this.viewer.adapter.textureCoordsToSphericalCoords(F,this.state.textureData.panoData);return wm.equals(this.viewer.renderer.panoramaPose)&&wm.equals(this.viewer.renderer.sphereCorrection)?Da:(this.sphericalCoordsToVector3(Da,bm),bm.applyEuler(this.viewer.renderer.panoramaPose),bm.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(bm))}sphericalCoordsToTextureCoords(F){if(!this.state.textureData?.panoData)throw new zu("Current adapter does not support texture coordinates or no texture has been loaded");return wm.equals(this.viewer.renderer.panoramaPose)&&wm.equals(this.viewer.renderer.sphereCorrection)||(this.sphericalCoordsToVector3(F,bm),applyEulerInverse(bm,this.viewer.renderer.sphereCorrection),applyEulerInverse(bm,this.viewer.renderer.panoramaPose),F=this.vector3ToSphericalCoords(bm)),this.viewer.adapter.sphericalCoordsToTextureCoords(F,this.state.textureData.panoData)}sphericalCoordsToVector3(F,Da,ll){return void 0===ll&&(ll=wc),Da||(Da=new cl.Pq0),Da.x=ll*-Math.cos(F.pitch)*Math.sin(F.yaw),Da.y=ll*Math.sin(F.pitch),Da.z=ll*Math.cos(F.pitch)*Math.cos(F.yaw),Da}vector3ToSphericalCoords(F){const Da=Math.acos(F.y/Math.sqrt(F.x*F.x+F.y*F.y+F.z*F.z)),ll=Math.atan2(F.x,F.z);return{yaw:ll<0?-ll:2*Math.PI-ll,pitch:Math.PI/2-Da}}viewerCoordsToVector3(F){const Da=this.viewer.renderer.getIntersections(F).filter((F=>F.object.userData[Sc]));return Da.length?Da[0].point:null}viewerCoordsToSphericalCoords(F){const Da=this.viewerCoordsToVector3(F);return Da?this.vector3ToSphericalCoords(Da):null}vector3ToViewerCoords(F){const Da=F.clone();return Da.project(this.viewer.renderer.camera),{x:Math.round((Da.x+1)/2*this.state.size.width),y:Math.round((1-Da.y)/2*this.state.size.height)}}sphericalCoordsToViewerCoords(F){return this.sphericalCoordsToVector3(F,bm),this.vector3ToViewerCoords(bm)}isPointVisible(F){let Da,ll;if(F instanceof cl.Pq0)Da=F,ll=this.vector3ToViewerCoords(F);else{if(!isExtendedPosition(F))return!1;Da=this.sphericalCoordsToVector3(F,bm),ll=this.vector3ToViewerCoords(Da)}return Da.dot(this.viewer.state.direction)>0&&ll.x>=0&&ll.x<=this.viewer.state.size.width&&ll.y>=0&&ll.y<=this.viewer.state.size.height}cleanPosition(F){if("yaw"in F||"pitch"in F){if(!("yaw"in F)||!("pitch"in F))throw new zu("Position is missing 'yaw' or 'pitch'");return{yaw:parseAngle(F.yaw),pitch:parseAngle(F.pitch,!0)}}return this.textureCoordsToSphericalCoords(F)}cleanSphereCorrection(F){return{pan:parseAngle(F?.pan||0),tilt:parseAngle(F?.tilt||0,!0),roll:parseAngle(F?.roll||0,!0,!1)}}cleanPanoramaPose(F){return{pan:cl.cj9.degToRad(F?.poseHeading||0),tilt:cl.cj9.degToRad(F?.posePitch||0),roll:cl.cj9.degToRad(F?.poseRoll||0)}}cleanPanoramaOptions(F,Da){return Da?.isEquirectangular?(isNil(F.zoom)&&!isNil(Da.initialFov)&&(F={...F,zoom:this.fovToZoomLevel(this.hFovToVFov(Da.initialFov))}),!isNil(F.position)||isNil(Da.initialHeading)||isNil(Da.initialPitch)||(F={...F,position:{yaw:parseAngle(Da.initialHeading),pitch:parseAngle(Da.initialPitch,!0)}}),F):F}},Mm=class _Step{constructor(){this.$=_Step.IDLE}is(){for(var F=arguments.length,Da=new Array(F),ll=0;ll<F;ll++)Da[ll]=arguments[ll];return Da.some((F=>this.$&F))}set(F){this.$=F}add(F){this.$|=F}remove(F){this.$&=~F}};Mm.IDLE=0,Mm.CLICK=1,Mm.MOVING=2;var Sm=Mm,km=class extends xm{constructor(F){super(F),this.data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,pinchDist:0,moveDelta:{yaw:0,pitch:0,zoom:0},accumulatorFactor:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},this.step=new Sm,this.keyHandler=new rd,this.resizeObserver=new ResizeObserver(throttle((()=>this.viewer.autoSize()),50)),this.moveThreshold=bl*Up.pixelRatio}init(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener("fullscreenchange",this),this.resizeObserver.observe(this.viewer.container),this.viewer.addEventListener(md.type,this),this.viewer.addEventListener(Mp.type,this)}destroy(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener("fullscreenchange",this),this.resizeObserver.disconnect(),this.viewer.removeEventListener(md.type,this),this.viewer.removeEventListener(Mp.type,this),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),super.destroy()}handleEvent(F){switch(F.type){case"keydown":this.__onKeyDown(F);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(F);break;case"mouseup":this.__onMouseUp(F);break;case"touchmove":this.__onTouchMove(F);break;case"touchend":this.__onTouchEnd(F);break;case"fullscreenchange":this.__onFullscreenChange();break;case md.type:this.__applyMoveDelta();break;case Mp.type:this.__clearMoveDelta()}if(!getMatchingTarget(F,"."+eu))switch(F.type){case"mousedown":this.__onMouseDown(F);break;case"touchstart":this.__onTouchStart(F);break;case"wheel":this.__onMouseWheel(F)}}__onKeyDown(F){if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=F.key===cu.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(su.CTRL_ZOOM))),!this.viewer.dispatchEvent(new Dd(F.key,F)))return;if(!this.state.keyboardEnabled)return;const Da=this.config.keyboardActions?.[F.key];if("function"===typeof Da)return Da(this.viewer,F),void F.preventDefault();if(!(F.ctrlKey||F.altKey||F.shiftKey||F.metaKey)&&Da&&!this.keyHandler.pending){switch("ZOOM_IN"!==Da&&"ZOOM_OUT"!==Da&&this.viewer.stopAll(),Da){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0)}this.keyHandler.down(Da),F.preventDefault()}}__onKeyUp(){this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up((F=>{"ZOOM_IN"===F||"ZOOM_OUT"===F?this.viewer.dynamics.zoom.stop():(this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer())}))}__onMouseDown(F){this.step.add(Sm.CLICK),this.data.startMouseX=F.clientX,this.data.startMouseY=F.clientY}__onMouseUp(F){this.step.is(Sm.CLICK,Sm.MOVING)&&this.__stopMove(F.clientX,F.clientY,F,2===F.button)}__onMouseMove(F){this.config.mousemove&&this.step.is(Sm.CLICK,Sm.MOVING)&&(F.preventDefault(),this.__doMove(F.clientX,F.clientY)),this.__handleObjectsEvents(F)}__onTouchStart(F){1===F.touches.length?(this.step.add(Sm.CLICK),this.data.startMouseX=F.touches[0].clientX,this.data.startMouseY=F.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout((()=>{const Da=F.touches[0];this.__stopMove(Da.clientX,Da.clientY,F,!0),this.data.longtouchTimeout=null}),Dl))):2===F.touches.length&&(this.step.set(Sm.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(F),F.preventDefault()))}__onTouchEnd(F){if(this.__cancelLongTouch(),this.step.is(Sm.CLICK,Sm.MOVING))if(F.preventDefault(),this.__cancelTwoFingersOverlay(),1===F.touches.length)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(0===F.touches.length){const Da=F.changedTouches[0];this.__stopMove(Da.clientX,Da.clientY,F)}}__onTouchMove(F){if(this.__cancelLongTouch(),this.config.mousemove)if(1===F.touches.length){if(this.config.touchmoveTwoFingers)this.step.is(Sm.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout((()=>{this.viewer.overlay.show({id:su.TWO_FINGERS,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/>\x3c!--Created by AomAm from the Noun Project--\x3e</svg>\n',title:this.config.lang.twoFingers})}),Wl));else if(this.step.is(Sm.CLICK,Sm.MOVING)){F.preventDefault();const Da=F.touches[0];this.__doMove(Da.clientX,Da.clientY)}}else this.__doMoveZoom(F),this.__cancelTwoFingersOverlay()}__cancelLongTouch(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}__cancelTwoFingersOverlay(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(su.TWO_FINGERS))}__onMouseWheel(F){if(!this.config.mousewheel||!F.deltaY)return;if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown)return this.viewer.overlay.show({id:su.CTRL_ZOOM,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/>\x3c!-- Created by Icon Island from the Noun Project --\x3e</svg>\n',title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),void(this.data.ctrlZoomTimeout=setTimeout((()=>this.viewer.overlay.hide(su.CTRL_ZOOM)),Ql));F.preventDefault(),F.stopPropagation();const Da=F.deltaY/Math.abs(F.deltaY)*5*this.config.zoomSpeed;0!==Da&&this.viewer.dynamics.zoom.step(-Da,5)}__onFullscreenChange(){const F=this.viewer.isFullscreenEnabled();"fullscreen"===this.config.keyboard&&(F?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new Ed(F))}__resetMove(){this.step.set(Sm.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0}__startMoveZoom(F){this.viewer.stopAll(),this.__resetMove();const Da=getTouchData(F);this.step.set(Sm.MOVING),this.data.accumulatorFactor=this.config.moveInertia,({distance:this.data.pinchDist,center:{x:this.data.mouseX,y:this.data.mouseY}}=Da)}__stopMove(F,Da,ll,cl){void 0===cl&&(cl=!1),this.step.is(Sm.CLICK)&&!this.__moveThresholdReached(F,Da)&&this.__doClick(F,Da,ll,cl),this.config.moveInertia&&(this.data.accumulatorFactor=Math.pow(this.config.moveInertia,.5)),this.__resetMove(),this.viewer.resetIdleTimer()}__doClick(F,Da,ll,cl){void 0===cl&&(cl=!1);const hl=this.viewer.container.getBoundingClientRect(),dl=F-hl.left,pl=Da-hl.top,fl=this.viewer.renderer.getIntersections({x:dl,y:pl}),Al=fl.find((F=>F.object.userData[Sc]));if(Al){const hl=this.viewer.dataHelper.vector3ToSphericalCoords(Al.point),Dl={rightclick:cl,originalEvent:ll,target:getEventTarget(ll),clientX:F,clientY:Da,viewerX:dl,viewerY:pl,yaw:hl.yaw,pitch:hl.pitch,objects:fl.map((F=>F.object)).filter((F=>!F.userData[Sc]))};try{const F=this.viewer.dataHelper.sphericalCoordsToTextureCoords(Dl);Object.assign(Dl,F)}catch(bl){}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-Dl.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-Dl.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new bd(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new yd(Dl)),this.data.dblclickData=clone(Dl),this.data.dblclickTimeout=setTimeout((()=>{this.data.dblclickTimeout=null,this.data.dblclickData=null}),kl))}}__handleObjectsEvents(F){if(!isEmpty(this.state.objectsObservers)&&F.composedPath().includes(this.viewer.container)){const Da=getPosition(this.viewer.container),ll={x:F.clientX-Da.x,y:F.clientY-Da.y},cl=this.viewer.renderer.getIntersections(ll),emit=(Da,cl,hl)=>{this.viewer.dispatchEvent(new hl(F,Da,ll,cl))};for(const[F,hl]of Object.entries(this.state.objectsObservers)){const Da=cl.find((Da=>Da.object.userData[F]));Da?(hl&&Da.object!==hl&&(emit(hl,F,zp),this.state.objectsObservers[F]=null),hl?emit(Da.object,F,Dp):(this.state.objectsObservers[F]=Da.object,emit(Da.object,F,Cp))):hl&&(emit(hl,F,zp),this.state.objectsObservers[F]=null)}}}__doMove(F,Da){if(this.step.is(Sm.CLICK)&&this.__moveThresholdReached(F,Da))this.viewer.stopAll(),this.__resetMove(),this.step.set(Sm.MOVING),this.data.mouseX=F,this.data.mouseY=Da,this.data.accumulatorFactor=this.config.moveInertia;else if(this.step.is(Sm.MOVING)){const ll=(F-this.data.mouseX)*Math.cos(this.state.roll)-(Da-this.data.mouseY)*Math.sin(this.state.roll),hl=(Da-this.data.mouseY)*Math.cos(this.state.roll)+(F-this.data.mouseX)*Math.sin(this.state.roll),dl={yaw:this.config.moveSpeed*(ll/this.state.size.width)*cl.cj9.degToRad(this.state.hFov),pitch:this.config.moveSpeed*(hl/this.state.size.height)*cl.cj9.degToRad(this.state.vFov)};this.data.moveDelta.yaw+=dl.yaw,this.data.moveDelta.pitch+=dl.pitch,this.data.mouseX=F,this.data.mouseY=Da}}__moveThresholdReached(F,Da){return Math.abs(F-this.data.startMouseX)>=this.moveThreshold||Math.abs(Da-this.data.startMouseY)>=this.moveThreshold}__doMoveZoom(F){if(this.step.is(Sm.MOVING)){F.preventDefault();const Da=getTouchData(F);this.__doMove(Da.center.x,Da.center.y),this.data.moveDelta.zoom+=this.config.zoomSpeed*((Da.distance-this.data.pinchDist)/Up.pixelRatio),this.data.pinchDist=Da.distance}}__applyMoveDelta(){const F=.001;if(Math.abs(this.data.moveDelta.yaw)>0||Math.abs(this.data.moveDelta.pitch)>0){const Da=this.viewer.getPosition();this.viewer.rotate({yaw:Da.yaw-this.data.moveDelta.yaw*(1-this.config.moveInertia),pitch:Da.pitch+this.data.moveDelta.pitch*(1-this.config.moveInertia)}),this.data.moveDelta.yaw*=this.data.accumulatorFactor,this.data.moveDelta.pitch*=this.data.accumulatorFactor,Math.abs(this.data.moveDelta.yaw)<=F&&(this.data.moveDelta.yaw=0),Math.abs(this.data.moveDelta.pitch)<=F&&(this.data.moveDelta.pitch=0)}if(Math.abs(this.data.moveDelta.zoom)>0){const Da=this.viewer.getZoomLevel();this.viewer.zoom(Da+this.data.moveDelta.zoom*(1-this.config.moveInertia)),this.data.moveDelta.zoom*=this.config.moveInertia,Math.abs(this.data.moveDelta.zoom)<=F&&(this.data.moveDelta.zoom=0)}}__clearMoveDelta(){this.data.moveDelta.yaw=0,this.data.moveDelta.pitch=0,this.data.moveDelta.zoom=0}};cl.ppV.enabled=!1;var Tm=new cl.I9Y,Im=new cl.kn4,Cm=new cl.NRn,Lm=class extends xm{constructor(F){super(F),this.frustumNeedsUpdate=!0,this.renderer=new cl.JeP(this.config.rendererParameters),this.renderer.setPixelRatio(Up.pixelRatio),this.renderer.outputColorSpace=cl.Zr2,this.renderer.domElement.className="psv-canvas",this.renderer.domElement.style.background=this.config.canvasBackground,this.scene=new cl.Z58,this.camera=new cl.ubm(50,16/9,.1,2*wc),this.camera.matrixAutoUpdate=!1;const Da=new cl.eaF(new cl.Gu$(wc).scale(-1,1,1),new cl.V9B({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1}));Da.userData={[Sc]:!0},this.scene.add(Da),this.raycaster=new cl.tBo,this.frustum=new cl.PPD,this.container=document.createElement("div"),this.container.className="psv-canvas-container",this.container.appendChild(this.renderer.domElement),this.viewer.container.appendChild(this.container),this.viewer.addEventListener(wp.type,this),this.viewer.addEventListener(kp.type,this),this.viewer.addEventListener(Zd.type,this),this.viewer.addEventListener(Kd.type,this),this.viewer.addEventListener(_d.type,this),this.hide()}get panoramaPose(){return this.mesh.rotation}get sphereCorrection(){return this.meshContainer.rotation}init(){this.show(),this.renderer.setAnimationLoop((F=>this.__renderLoop(F)))}destroy(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.renderer.dispose(),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(wp.type,this),this.viewer.removeEventListener(kp.type,this),this.viewer.removeEventListener(Zd.type,this),this.viewer.removeEventListener(Kd.type,this),this.viewer.removeEventListener(_d.type,this),super.destroy()}handleEvent(F){switch(F.type){case wp.type:this.__onSizeUpdated();break;case kp.type:this.__onZoomUpdated();break;case Zd.type:case Kd.type:this.__onPositionUpdated();break;case _d.type:F.containsOptions("fisheye")&&this.__onPositionUpdated(),F.containsOptions("canvasBackground")&&(this.renderer.domElement.style.background=this.config.canvasBackground)}}hide(){this.container.style.opacity="0"}show(){this.container.style.opacity="1"}setCustomRenderer(F){this.customRenderer=F?F(this.renderer):null,this.viewer.needsUpdate()}__onSizeUpdated(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onZoomUpdated(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onPositionUpdated(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.rotateZ(-this.state.roll),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__renderLoop(F){const Da=this.timestamp?F-this.timestamp:0;this.timestamp=F,this.viewer.dispatchEvent(new md(F,Da)),this.viewer.dynamics.update(Da),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&(this.state.needsUpdate=!1,(this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new Jd))}setTexture(F){this.meshContainer||(this.meshContainer=new cl.YJl,this.scene.add(this.meshContainer)),this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.mesh&&(this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh)),this.mesh=this.viewer.adapter.createMesh(F.panoData),this.viewer.adapter.setTexture(this.mesh,F,!1),this.meshContainer.add(this.mesh),this.state.textureData=F,this.viewer.needsUpdate()}setPanoramaPose(F,Da){void 0===Da&&(Da=this.mesh);const ll=this.viewer.dataHelper.cleanPanoramaPose(F),cl=(ll.pan?1:0)+(ll.tilt?1:0)+(ll.roll?1:0);!Um.useNewAnglesOrder&&cl>1&&(logWarn("'panoData' Euler angles will change in version 5.11.0."),logWarn("Set 'Viewer.useNewAnglesOrder = true;' to remove this warning (you might have to adapt your poseHeading/posePitch/poseRoll parameters).")),Um.useNewAnglesOrder?Da.rotation.set(ll.tilt,ll.pan,ll.roll,"YXZ"):Da.rotation.set(-ll.tilt,-ll.pan,-ll.roll,"ZXY")}setSphereCorrection(F,Da){void 0===Da&&(Da=this.meshContainer);const ll=this.viewer.dataHelper.cleanSphereCorrection(F),cl=(ll.pan?1:0)+(ll.tilt?1:0)+(ll.roll?1:0);!Um.useNewAnglesOrder&&cl>1&&(logWarn("'sphereCorrection' Euler angles will change in version 5.11.0."),logWarn("Set 'Viewer.useNewAnglesOrder = true;' to remove this warning (you might have to adapt your pan/tilt/roll parameters).")),Um.useNewAnglesOrder?Da.rotation.set(ll.tilt,ll.pan,ll.roll,"YXZ"):Da.rotation.set(ll.tilt,ll.pan,ll.roll,"ZXY")}transition(F,Da){const ll=!isNil(Da.position),hl=!isNil(Da.zoom),dl=new dd(ll?this.viewer.dataHelper.cleanPosition(Da.position):void 0,Da.zoom);this.viewer.dispatchEvent(dl);const pl=new cl.YJl,fl=this.viewer.adapter.createMesh(F.panoData);if(this.viewer.adapter.setTexture(fl,F,!0),this.viewer.adapter.setTextureOpacity(fl,0),this.setPanoramaPose(F.panoData,fl),this.setSphereCorrection(Da.sphereCorrection,pl),ll&&"fade-only"===Da.transition){const F=this.viewer.getPosition(),Da=new cl.Pq0(0,1,0);pl.rotateOnWorldAxis(Da,dl.position.yaw-F.yaw);const ll=new cl.Pq0(0,1,0).cross(this.camera.getWorldDirection(new cl.Pq0)).normalize();pl.rotateOnWorldAxis(ll,dl.position.pitch-F.pitch)}pl.add(fl),this.scene.add(pl),this.renderer.setRenderTarget(new cl.nWS),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);const{duration:Al,properties:bl}=this.viewer.dataHelper.getAnimationProperties(Da.speed,!0===Da.transition?dl.position:null,dl.zoomLevel),kl=new td({properties:{...bl,opacity:{start:0,end:1}},duration:Al,easing:"inOutCubic",onTick:F=>{this.viewer.adapter.setTextureOpacity(fl,F.opacity),ll&&!0===Da.transition&&this.viewer.dynamics.position.setValue({yaw:F.yaw,pitch:F.pitch}),hl&&this.viewer.dynamics.zoom.setValue(F.zoom),this.viewer.needsUpdate()}});return kl.then((cl=>{pl.remove(fl),this.scene.remove(pl),cl?(this.viewer.adapter.disposeTexture(this.state.textureData),this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh),this.mesh=fl,this.meshContainer.add(fl),this.state.textureData=F,this.setPanoramaPose(F.panoData),this.setSphereCorrection(Da.sphereCorrection),ll&&"fade-only"===Da.transition&&this.viewer.rotate(Da.position)):(this.viewer.adapter.disposeTexture(F),this.viewer.adapter.disposeMesh(fl))})),kl}getIntersections(F){Tm.x=2*F.x/this.state.size.width-1,Tm.y=-2*F.y/this.state.size.height+1,this.raycaster.setFromCamera(Tm,this.camera);const Da=this.raycaster.intersectObjects(this.scene.children,!0).filter((F=>F.object.visible)).filter((F=>F.object.isMesh&&!!F.object.userData));return this.customRenderer?.getIntersections&&Da.push(...this.customRenderer.getIntersections(this.raycaster,Tm)),Da}isObjectVisible(F){if(!F)return!1;if(this.frustumNeedsUpdate&&(Im.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.frustum.setFromProjectionMatrix(Im),this.frustumNeedsUpdate=!1),F.isVector3)return this.frustum.containsPoint(F);if(F.isMesh&&F.geometry){const Da=F;return Da.geometry.boundingBox||Da.geometry.computeBoundingBox(),Cm.copy(Da.geometry.boundingBox).applyMatrix4(Da.matrixWorld),this.frustum.intersectsBox(Cm)}return!!F.isObject3D&&this.frustum.intersectsObject(F)}addObject(F){this.scene.add(F)}removeObject(F){this.scene.remove(F)}cleanScene(F){const disposeMaterial=F=>{F.map?.dispose(),F.uniforms&&Object.values(F.uniforms).forEach((F=>{F.value?.dispose?.()})),F.dispose()};F.traverse((Da=>{Da.geometry?.dispose(),Da.material&&(Array.isArray(Da.material)?Da.material.forEach((F=>{disposeMaterial(F)})):disposeMaterial(Da.material)),Da instanceof cl.Z58||Da.dispose?.(),Da!==F&&this.cleanScene(Da)}))}},zm=class extends cl.aHM{load(F,Da,ll,cl,hl){const dl=new Request(F,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(dl,{signal:hl}).then((F=>{if(200===F.status||0===F.status){const Da=F.body.getReader(),hl=F.headers.get("Content-Length")||F.headers.get("X-File-Size"),dl=hl?parseInt(hl):0,pl=0!==dl;let fl=0;const Al=new ReadableStream({start(F){!function readData(){Da.read().then((Da=>{let{done:cl,value:hl}=Da;if(cl)F.close();else{fl+=hl.byteLength;const Da=new ProgressEvent("progress",{lengthComputable:pl,loaded:fl,total:dl});ll(Da),F.enqueue(hl),readData()}})).catch((F=>{cl(F)}))}()}});return new Response(Al)}throw new Error(`fetch for "${F.url}" responded with ${F.status}: ${F.statusText}`)})).then((F=>F.blob())).then((F=>{Da(F)})).catch((F=>{cl(F)}))}},Pm=class extends cl.aHM{load(F,Da,ll,cl){const hl=document.createElement("img");function onImageLoad(){removeEventListeners(),Da(this)}function onImageError(F){if(removeEventListeners(),cl?.aborted){const F=new Error;F.name="AbortError",F.message="The operation was aborted.",ll(F)}else ll(F)}function onAbortSignal(){hl.src=""}function removeEventListeners(){hl.removeEventListener("load",onImageLoad,!1),hl.removeEventListener("error",onImageError,!1),cl?.removeEventListener("abort",onAbortSignal,!1)}return hl.addEventListener("load",onImageLoad,!1),hl.addEventListener("error",onImageError,!1),cl?.addEventListener("abort",onAbortSignal,!1),F.startsWith("data:")||void 0===this.crossOrigin||(hl.crossOrigin=this.crossOrigin),hl.src=F,hl}},Dm=class extends xm{constructor(F){super(F),this.abortCtrl={},this.fileLoader=new zm,this.imageLoader=new Pm,this.config.withCredentials&&(this.fileLoader.setWithCredentials(!0),this.imageLoader.setCrossOrigin("use-credentials"))}destroy(){this.abortLoading(),super.destroy()}abortLoading(){Object.values(this.abortCtrl).forEach((F=>F.abort())),this.abortCtrl={}}loadFile(F,Da,ll){const cl=mm.get(F,ll);if(cl){if(cl instanceof Blob)return Da?.(100),Promise.resolve(cl);mm.remove(F,ll)}return this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(F)),new Promise(((cl,hl)=>{let dl=0;Da?.(dl),this.fileLoader.load(F,(hl=>{dl=100,Da?.(dl),mm.add(F,ll,hl),cl(hl)}),(F=>{if(F.lengthComputable){const ll=F.loaded/F.total*100;ll>dl&&(dl=ll,Da?.(dl))}}),(F=>{hl(F)}),this.__getAbortSignal(ll))}))}loadImage(F,Da,ll){const cl=mm.get(F,ll);return cl?(Da?.(100),cl instanceof Blob?this.blobToImage(cl):Promise.resolve(cl)):Da||this.config.requestHeaders?this.loadFile(F,Da,ll).then((F=>this.blobToImage(F))):new Promise(((Da,cl)=>{this.imageLoader.load(F,(cl=>{mm.add(F,ll,cl),Da(cl)}),(F=>{cl(F)}),this.__getAbortSignal(ll))}))}blobToImage(F){return new Promise(((Da,ll)=>{const cl=document.createElement("img");cl.onload=()=>{URL.revokeObjectURL(cl.src),Da(cl)},cl.onerror=ll,cl.src=URL.createObjectURL(F)}))}preloadPanorama(F){return this.viewer.adapter.supportsPreload(F)?this.viewer.adapter.loadTexture(F,!1):Promise.reject(new zu("Current adapter does not support preload"))}__getAbortSignal(F){return F?(this.abortCtrl[F]?.signal.aborted&&delete this.abortCtrl[F],this.abortCtrl[F]||(this.abortCtrl[F]=new AbortController),this.abortCtrl[F].signal):null}},Rm=class extends xm{constructor(F){super(F),this.zoom=new id((F=>{this.viewer.state.vFov=this.viewer.dataHelper.zoomLevelToFov(F),this.viewer.state.hFov=this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov),this.viewer.dispatchEvent(new kp(F))}),{defaultValue:this.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),this.position=new nd((F=>{this.viewer.dataHelper.sphericalCoordsToVector3(F,this.viewer.state.direction),this.viewer.dispatchEvent(new Zd(F))}),{yaw:new id(null,{defaultValue:this.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new id(null,{defaultValue:this.config.defaultPitch,min:-Math.PI/2,max:Math.PI/2,wrap:!1})}),this.roll=new id((F=>{this.viewer.state.roll=F,this.viewer.dispatchEvent(new Kd(F))}),{defaultValue:0,min:-Math.PI,max:Math.PI,wrap:!1}),this.updateSpeeds()}updateSpeeds(){this.zoom.setSpeed(50*this.config.zoomSpeed),this.position.setSpeed(cl.cj9.degToRad(50*this.config.moveSpeed)),this.roll.setSpeed(cl.cj9.degToRad(50*this.config.moveSpeed))}update(F){this.zoom.update(F),this.position.update(F),this.roll.update(F)}},Nm=class{constructor(){this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new cl.Pq0(0,0,wc),this.roll=0,this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0}}},Um=class extends cd{constructor(F){if(super(),this.plugins={},this.children=[],this.onResize=throttle((()=>this.navbar.autoSize()),500),this.parent=getElement(F.container),!this.parent)throw new zu('"container" element not found.');this.parent[Sc]=this,this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),checkClosedShadowDom(this.parent),checkStylesheet(this.container,"core"),this.state=new Nm,this.config=cm(F),this.__setSize(this.config.size),this.overlay=new Am(this);try{Up.load()}catch(Da){return console.error(Da),void this.showError(this.config.lang.webglError)}mm.init(),this.adapter=new this.config.adapter[0](this,this.config.adapter[1]),this.renderer=new Lm(this),this.textureLoader=new Dm(this),this.eventsHandler=new km(this),this.dataHelper=new Em(this),this.dynamics=new Rm(this),this.adapter.init?.(),this.loader=new fm(this),this.navbar=new pm(this),this.panel=new vm(this),this.notification=new gm(this),this.autoSize(),this.setCursor(null),resolveBoolean(Up.isTouchEnabled,(F=>{toggleClass(this.container,"psv--is-touch",F)})),this.config.plugins.forEach((F=>{let[Da,ll]=F;this.plugins[Da.id]=new Da(this,ll)}));for(const ll of Object.values(this.plugins))ll.init?.();this.config.navbar&&this.navbar.setButtons(this.config.navbar),this.state.loadingPromise||(this.config.panorama?this.setPanorama(this.config.panorama):this.loader.show())}destroy(){this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(const[F,Da]of Object.entries(this.plugins))Da.destroy(),delete this.plugins[F];this.children.slice().forEach((F=>F.destroy())),this.children.length=0,this.eventsHandler?.destroy(),this.renderer?.destroy(),this.textureLoader?.destroy(),this.dataHelper?.destroy(),this.adapter?.destroy(),this.dynamics?.destroy(),this.parent.removeChild(this.container),delete this.parent[Sc]}init(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),"always"===this.config.keyboard&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new Xd)}resetIdleTimer(){this.state.idleTime=performance.now()}disableIdleTimer(){this.state.idleTime=-1}getPlugin(F){if("string"===typeof F)return this.plugins[F];{const Da=pluginInterop(F);return Da?this.plugins[Da.id]:null}}getPosition(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}getZoomLevel(){return this.dynamics.zoom.current}getSize(){return{...this.state.size}}isFullscreenEnabled(){return isFullscreenEnabled(this.parent,Up.isIphone)}needsUpdate(){this.state.needsUpdate=!0}needsContinuousUpdate(F){F?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}autoSize(){this.container.clientWidth===this.state.size.width&&this.container.clientHeight===this.state.size.height||(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new wp(this.getSize())),this.onResize())}setPanorama(F,Da){void 0===Da&&(Da={}),this.textureLoader.abortLoading(),this.state.transitionAnimation?.cancel(),this.state.ready||["sphereCorrection","panoData"].forEach((F=>{F in Da||(Da[F]=this.config[F])})),void 0===Da.transition&&(Da.transition=!0),void 0===Da.speed&&(Da.speed=fl),void 0===Da.showLoader&&(Da.showLoader=!0),void 0===Da.caption&&(Da.caption=this.config.caption),void 0===Da.description&&(Da.description=this.config.description),Da.panoData||"function"!==typeof this.config.panoData||(Da.panoData=this.config.panoData),this.hideError(),this.resetIdleTimer(),this.config.panorama=F,this.config.caption=Da.caption,this.config.description=Da.description;const done=Da=>{if(isAbortError(Da))return!1;if(this.loader.hide(),this.state.loadingPromise=null,Da)throw this.navbar.setCaption(""),this.showError(this.config.lang.loadError),console.error(Da),this.dispatchEvent(new Vd(F,Da)),Da;return this.navbar.setCaption(this.config.caption),!0};this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`),!Da.showLoader&&this.state.ready||this.loader.show(),this.dispatchEvent(new Bd(F));const ll=this.adapter.loadTexture(this.config.panorama,!0,Da.panoData).then((F=>{if(F.panorama!==this.config.panorama)throw this.adapter.disposeTexture(F),getAbortError();const ll=this.dataHelper.cleanPanoramaOptions(Da,F.panoData);return isNil(ll.zoom)&&isNil(ll.position)||this.stopAll(),{textureData:F,cleanOptions:ll}}));return Da.transition&&this.state.ready&&this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=ll.then((F=>{let{textureData:Da,cleanOptions:ll}=F;return this.loader.hide(),this.dispatchEvent(new Fd(Da)),this.state.transitionAnimation=this.renderer.transition(Da,ll),this.state.transitionAnimation})).then((F=>{if(this.state.transitionAnimation=null,this.dispatchEvent(new qd(F)),!F)throw getAbortError()})).then((()=>done()),(F=>done(F))):this.state.loadingPromise=ll.then((F=>{let{textureData:ll,cleanOptions:cl}=F;this.renderer.show(),this.renderer.setTexture(ll),this.renderer.setPanoramaPose(ll.panoData),this.renderer.setSphereCorrection(Da.sphereCorrection),this.state.ready||this.init(),this.dispatchEvent(new Fd(ll)),isNil(cl.zoom)||this.zoom(cl.zoom),isNil(cl.position)||this.rotate(cl.position)})).then((()=>done()),(F=>done(F))),this.state.loadingPromise}setOptions(F){const Da={...this.config,...F};for(let[ll,cl]of Object.entries(F))if(ll in sm)if(ll in om)logWarn(om[ll]);else switch(ll in lm&&(cl=lm[ll](cl,{rawConfig:Da,defValue:sm[ll]})),this.config[ll]=cl,ll){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new kp(this.getZoomLevel()));break;case"keyboard":"always"===this.config.keyboard?this.startKeyboardControl():this.stopKeyboardControl()}else logWarn(`Unknown option ${ll}`);this.needsUpdate(),this.dispatchEvent(new _d(Object.keys(F)))}setOption(F,Da){this.setOptions({[F]:Da})}showError(F){this.overlay.show({id:su.ERROR,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/>\x3c!--Created by Shastry from the Noun Project--\x3e</svg>\n',title:F,dissmisable:!1})}hideError(){this.overlay.hide(su.ERROR)}rotate(F){const Da=new gd(this.dataHelper.cleanPosition(F));this.dispatchEvent(Da),Da.defaultPrevented||this.dynamics.position.setValue(Da.position)}zoom(F){this.dynamics.zoom.setValue(F)}zoomIn(F){void 0===F&&(F=1),this.dynamics.zoom.step(F)}zoomOut(F){void 0===F&&(F=1),this.dynamics.zoom.step(-F)}animate(F){const Da=isExtendedPosition(F),ll=!isNil(F.zoom),cl=new dd(Da?this.dataHelper.cleanPosition(F):void 0,F.zoom);if(this.dispatchEvent(cl),cl.defaultPrevented)return;this.stopAll();const{duration:hl,properties:dl}=this.dataHelper.getAnimationProperties(F.speed,cl.position,cl.zoomLevel);return hl?(this.state.animation=new td({properties:dl,duration:hl,easing:F.easing||"inOutSine",onTick:F=>{Da&&this.dynamics.position.setValue({yaw:F.yaw,pitch:F.pitch}),ll&&this.dynamics.zoom.setValue(F.zoom)}}),this.state.animation.then((()=>{this.state.animation=null,this.resetIdleTimer()})),this.state.animation):(Da&&this.rotate(cl.position),ll&&this.zoom(cl.zoomLevel),new td(null))}stopAnimation(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}resize(F){this.__setSize(F),this.autoSize()}__setSize(F){const Da=F;["width","height"].forEach((ll=>{F&&Da[ll]&&(/^[0-9.]+$/.test(Da[ll])&&(Da[ll]+="px"),this.parent.style[ll]=Da[ll])}))}enterFullscreen(){this.isFullscreenEnabled()||requestFullscreen(this.parent,Up.isIphone)}exitFullscreen(){this.isFullscreenEnabled()&&exitFullscreen(Up.isIphone)}toggleFullscreen(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}startKeyboardControl(){this.state.keyboardEnabled=!0}stopKeyboardControl(){this.state.keyboardEnabled=!1}createTooltip(F){return new _m(this,F)}setCursor(F){this.state.cursorOverride=F,this.container.style.cursor=F||(this.config.mousemove?"move":"default")}observeObjects(F){this.state.objectsObservers[F]||(this.state.objectsObservers[F]=null)}unobserveObjects(F){delete this.state.objectsObservers[F]}stopAll(){return this.dispatchEvent(new Mp),this.disableIdleTimer(),this.stopAnimation()}};Um.useNewAnglesOrder=!1},3890:(F,Da,ll)=>{"use strict";ll.d(Da,{D:()=>kl});var cl=ll(1545),hl=ll(9408),dl=class{constructor(F,Da,ll){this.id=F,this.priority=Da,this.fn=ll,this.status=1}start(){return this.status=2,this.fn(this).then((()=>{this.status=4}),(()=>{this.status=5}))}cancel(){this.status=3}isCancelled(){return 3===this.status}},pl=class{constructor(F){void 0===F&&(F=4),this.concurency=F,this.runningTasks={},this.tasks={}}enqueue(F){this.tasks[F.id]=F}clear(){Object.values(this.tasks).forEach((F=>F.cancel())),this.tasks={},this.runningTasks={}}setPriority(F,Da){const ll=this.tasks[F];ll&&(ll.priority=Da,0===ll.status&&(ll.status=1))}disableAllTasks(){Object.values(this.tasks).forEach((F=>{F.status=0}))}start(){if(Object.keys(this.runningTasks).length>=this.concurency)return;const F=Object.values(this.tasks).filter((F=>1===F.status)).sort(((F,Da)=>Da.priority-F.priority)).pop();F&&(this.runningTasks[F.id]=!0,F.start().then((()=>{F.isCancelled()||(delete this.tasks[F.id],delete this.runningTasks[F.id],this.start())})),this.start())}};var fl=["dodgerblue","limegreen","indianred"];function isMultiTiles(F){return!!F.levels}function computeTileConfig(F,Da,ll){return{...F,level:Da,colSize:F.width/F.cols,rowSize:F.width/2/F.rows,facesByCol:ll.SPHERE_SEGMENTS/F.cols,facesByRow:ll.SPHERE_HORIZONTAL_SEGMENTS/F.rows}}function getTileConfig(F,Da,ll){let cl,hl;return isMultiTiles(F)?(hl=function(F,Da){return F.findIndex((F=>Da>=F.zoomRange[0]&&Da<=F.zoomRange[1]))}(F.levels,Da),cl=F.levels[hl]):(hl=0,cl={...F,zoomRange:[0,100]}),computeTileConfig(cl,hl,ll)}function getTileConfigByIndex(F,Da,ll){return isMultiTiles(F)&&F.levels[Da]?computeTileConfig(F.levels[Da],Da,ll):null}function checkPanoramaConfig(F,Da){if("object"!==typeof F||!F.tileUrl)throw new cl.e6("Invalid panorama configuration, are you using the right adapter?");isMultiTiles(F)?(F.levels.forEach((F=>checkTile(F,Da))),function(F){let Da=0;F.forEach(((ll,hl)=>{if(!ll.zoomRange||2!==ll.zoomRange.length)throw new cl.e6(`Tiles level ${hl} is missing "zoomRange" property`);if(ll.zoomRange[0]>=ll.zoomRange[1]||ll.zoomRange[0]!==Da||0===hl&&0!==ll.zoomRange[0]||hl===F.length-1&&100!==ll.zoomRange[1])throw new cl.e6('Tiles levels\' "zoomRange" are not orderer or are not covering the whole 0-100 range');Da=ll.zoomRange[1]}))}(F.levels)):checkTile(F,Da)}function checkTile(F,Da){if(!F.width||!F.cols||!F.rows)throw new cl.e6("Invalid panorama configuration, are you using the right adapter?");if(F.cols>Da.SPHERE_SEGMENTS)throw new cl.e6(`Panorama cols must not be greater than ${Da.SPHERE_SEGMENTS}.`);if(F.rows>Da.SPHERE_HORIZONTAL_SEGMENTS)throw new cl.e6(`Panorama rows must not be greater than ${Da.SPHERE_HORIZONTAL_SEGMENTS}.`);if(!hl.cj9.isPowerOfTwo(F.cols)||!hl.cj9.isPowerOfTwo(F.rows))throw new cl.e6("Panorama cols and rows must be powers of 2.")}function getCacheKey(F,Da){for(let ll=0;ll<Da.cols;ll++){const cl=F.tileUrl(ll,Da.rows/2,Da.level);if(cl)return cl}return F.tileUrl.toString()}function tileId(F){return`${F.col}x${F.row}/${F.config.level}`}function meshes(F){return F.children}var Al=cl.Wp.getConfigParser({backgroundColor:null,resolution:64,showErrorTile:!0,baseBlur:!0,antialias:!0,debug:!1,useXmpData:!1}),bl=new hl.Pq0,kl=class extends cl.Qw{constructor(F,Da){super(F),this.state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},this.queue=new pl,this.config=Al(Da),this.adapter=new cl.GR(this.viewer,{resolution:this.config.resolution,blur:this.config.baseBlur}),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2,this.NB_VERTICES=2*this.SPHERE_SEGMENTS*3+(this.SPHERE_HORIZONTAL_SEGMENTS-2)*this.SPHERE_SEGMENTS*6,this.NB_GROUPS=this.SPHERE_SEGMENTS*this.SPHERE_HORIZONTAL_SEGMENTS,this.viewer.config.requestHeaders&&cl.Wp.logWarn('EquirectangularTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.')}init(){super.init(),this.viewer.addEventListener(cl.AZ.TransitionDoneEvent.type,this),this.viewer.addEventListener(cl.AZ.PositionUpdatedEvent.type,this),this.viewer.addEventListener(cl.AZ.ZoomUpdatedEvent.type,this)}destroy(){this.viewer.removeEventListener(cl.AZ.TransitionDoneEvent.type,this),this.viewer.removeEventListener(cl.AZ.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(cl.AZ.ZoomUpdatedEvent.type,this),this.__cleanup(),this.state.errorMaterial?.map?.dispose(),this.state.errorMaterial?.dispose(),this.adapter.destroy(),delete this.adapter,delete this.state.geom,delete this.state.errorMaterial,super.destroy()}handleEvent(F){switch(F.type){case cl.AZ.PositionUpdatedEvent.type:case cl.AZ.ZoomUpdatedEvent.type:this.__refresh();break;case cl.AZ.TransitionDoneEvent.type:this.state.inTransition=!1,F.completed&&this.__switchMesh(this.viewer.renderer.mesh)}}supportsTransition(F){return!!F.baseUrl}supportsPreload(F){return!!F.baseUrl}textureCoordsToSphericalCoords(F,Da){return this.adapter.textureCoordsToSphericalCoords(F,Da)}sphericalCoordsToTextureCoords(F,Da){return this.adapter.sphericalCoordsToTextureCoords(F,Da)}async loadTexture(F,Da){void 0===Da&&(Da=!0),checkPanoramaConfig(F,this);const ll=getTileConfig(F,0,this),cl={isEquirectangular:!0,fullWidth:ll.width,fullHeight:ll.width/2,croppedWidth:ll.width,croppedHeight:ll.width/2,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0};if(F.baseUrl){const ll=await this.adapter.loadTexture(F.baseUrl,Da,F.basePanoData,!0);return{panorama:F,panoData:{...cl,baseData:ll.panoData},cacheKey:ll.cacheKey,texture:ll.texture}}return{panorama:F,panoData:{...cl,baseData:null},cacheKey:getCacheKey(F,ll),texture:null}}createMesh(F){const Da=this.adapter.createMesh(F.baseData??F),ll=new hl.Gu$(cl.aH.SPHERE_RADIUS,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1).toNonIndexed();ll.clearGroups();let dl=0,pl=0;for(;dl<3*this.SPHERE_SEGMENTS;dl+=3)ll.addGroup(dl,3,pl++);for(;dl<this.NB_VERTICES-3*this.SPHERE_SEGMENTS;dl+=6)ll.addGroup(dl,6,pl++);for(;dl<this.NB_VERTICES;dl+=3)ll.addGroup(dl,3,pl++);const fl=[],Al=new hl.V9B({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1});for(let cl=0;cl<this.NB_GROUPS;cl++)fl.push(Al);const bl=new hl.eaF(ll,fl);bl.renderOrder=1;const kl=new hl.YJl;return kl.add(Da),kl.add(bl),kl}setTexture(F,Da,ll){const[cl]=meshes(F);Da.texture?this.adapter.setTexture(cl,{panorama:Da.panorama.baseUrl,texture:Da.texture,panoData:Da.panoData.baseData}):cl.visible=!1,ll?this.state.inTransition=!0:this.__switchMesh(F)}setTextureOpacity(F,Da){const[ll]=meshes(F);this.adapter.setTextureOpacity(ll,Da)}disposeTexture(F){let{texture:Da}=F;Da?.dispose()}disposeMesh(F){const[Da,ll]=meshes(F);Da.geometry.dispose(),Da.material.dispose(),ll.geometry.dispose(),ll.material.forEach((F=>F.dispose()))}__refresh(){if(!this.state.geom||this.state.inTransition)return;const F=this.viewer.config.panorama,Da=getTileConfig(F,this.viewer.getZoomLevel(),this),ll=this.state.geom.getAttribute("position"),cl={};for(let hl=0;hl<this.NB_VERTICES;hl+=1)if(bl.fromBufferAttribute(ll,hl),bl.applyEuler(this.viewer.renderer.sphereCorrection),this.viewer.renderer.isObjectVisible(bl)){let ll;ll=hl<3*this.SPHERE_SEGMENTS?Math.floor(hl/3):hl<this.NB_VERTICES-3*this.SPHERE_SEGMENTS?Math.floor((hl/3-this.SPHERE_SEGMENTS)/2)+this.SPHERE_SEGMENTS:Math.floor((hl-this.NB_VERTICES-3*this.SPHERE_SEGMENTS)/3)+this.SPHERE_HORIZONTAL_SEGMENTS*(this.SPHERE_SEGMENTS-1);const dl=Math.floor(ll/this.SPHERE_SEGMENTS),pl=ll-dl*this.SPHERE_SEGMENTS;let fl=Da;for(;fl;){const Da=Math.floor(dl/fl.facesByRow),ll=Math.floor(pl/fl.facesByCol);let hl=bl.angleTo(this.viewer.state.direction);0!==Da&&Da!==fl.rows-1||(hl*=2);const Al={row:Da,col:ll,angle:hl,config:fl,url:null},kl=tileId(Al);if(cl[kl]){cl[kl].angle=Math.min(cl[kl].angle,hl);break}if(Al.url=F.tileUrl(ll,Da,fl.level),Al.url){cl[kl]=Al;break}fl=getTileConfigByIndex(F,fl.level-1,this)}}this.state.tileConfig=Da,this.__loadTiles(Object.values(cl))}__loadTiles(F){this.queue.disableAllTasks(),F.forEach((F=>{const Da=tileId(F);this.state.tiles[Da]?this.queue.setPriority(Da,F.angle):(this.state.tiles[Da]=!0,this.queue.enqueue(new dl(Da,F.angle,(Da=>this.__loadTile(F,Da)))))})),this.queue.start()}__loadTile(F,Da){return this.viewer.textureLoader.loadImage(F.url,null,this.viewer.state.textureData.cacheKey).then((ll=>{if(!Da.isCancelled()){this.config.debug&&(ll=function(F,Da,ll){const cl=document.createElement("canvas");cl.width=F.width,cl.height=F.height;const hl=cl.getContext("2d");hl.fillStyle=fl[Da%fl.length],hl.fillRect(0,0,cl.width,cl.height),hl.globalCompositeOperation="multiply",hl.drawImage(F,0,0);const dl=F.width/7;return hl.globalCompositeOperation="source-over",hl.fillStyle="white",hl.font=`${dl}px monospace`,hl.textAlign="center",ll.split("\n").forEach(((Da,ll)=>{hl.fillText(Da,F.width/2,F.height/2+dl*(.3+ll))})),cl}(ll,F.config.level,tileId(F)));const Da=this.config.antialias&&F.config.level>0,dl=new hl.V9B({map:cl.Wp.createTexture(ll,Da)});this.__swapMaterial(F,dl,!1),this.viewer.needsUpdate()}})).catch((ll=>{cl.Wp.isAbortError(ll)||Da.isCancelled()||!this.config.showErrorTile||(this.state.errorMaterial||(this.state.errorMaterial=function(){const F=document.createElement("canvas");F.width=512,F.height=512;const Da=F.getContext("2d");return Da.fillStyle="#333",Da.fillRect(0,0,F.width,F.height),Da.font=F.width/5+"px serif",Da.fillStyle="#a22",Da.textAlign="center",Da.textBaseline="middle",Da.fillText("\u26a0",F.width/2,F.height/2),new hl.V9B({map:cl.Wp.createTexture(F)})}()),this.__swapMaterial(F,this.state.errorMaterial,!0),this.viewer.needsUpdate())}))}__swapMaterial(F,Da,ll){const cl=this.state.geom.getAttribute("uv");for(let hl=0;hl<F.config.facesByCol;hl++)for(let dl=0;dl<F.config.facesByRow;dl++){const pl=F.col*F.config.facesByCol+hl,fl=F.row*F.config.facesByRow+dl,Al=0===fl,bl=fl===this.SPHERE_HORIZONTAL_SEGMENTS-1;let kl;if(kl=Al?3*pl:bl?this.NB_VERTICES-3*this.SPHERE_SEGMENTS+3*pl:3*this.SPHERE_SEGMENTS+(fl-1)*this.SPHERE_SEGMENTS*6+6*pl,ll&&this.state.faces[kl]>-1)continue;if(this.state.faces[kl]>F.config.level)continue;this.state.faces[kl]=ll?-1:F.config.level;const Dl=this.state.geom.groups.find((F=>F.start===kl)).materialIndex;this.state.materials[Dl]=Da;const Wl=1-dl/F.config.facesByRow,Ql=1-(dl+1)/F.config.facesByRow,wc=hl/F.config.facesByCol,Sc=(hl+1)/F.config.facesByCol;Al?(cl.setXY(kl,(wc+Sc)/2,Wl),cl.setXY(kl+1,wc,Ql),cl.setXY(kl+2,Sc,Ql)):bl?(cl.setXY(kl,Sc,Wl),cl.setXY(kl+1,wc,Wl),cl.setXY(kl+2,(wc+Sc)/2,Ql)):(cl.setXY(kl,Sc,Wl),cl.setXY(kl+1,wc,Wl),cl.setXY(kl+2,Sc,Ql),cl.setXY(kl+3,wc,Wl),cl.setXY(kl+4,wc,Ql),cl.setXY(kl+5,Sc,Ql))}cl.needsUpdate=!0}__switchMesh(F){const[,Da]=meshes(F);if(this.__cleanup(),this.state.materials=Da.material,this.state.geom=Da.geometry,this.config.debug){const F=function(F){const Da=new hl.XJ7(F),ll=new hl.DXC(Da);return ll.material.depthTest=!1,ll.material.depthWrite=!1,ll.material.opacity=.25,ll.material.transparent=!0,ll}(this.state.geom);this.viewer.renderer.addObject(F),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,F)}setTimeout((()=>this.__refresh()))}__cleanup(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.materials=[],this.state.inTransition=!1}};kl.id="equirectangular-tiles",kl.VERSION="5.11.0-beta.1",kl.supportsDownload=!1},3348:(F,Da,ll)=>{"use strict";ll.d(Da,{$:()=>od});var cl=ll(1545),hl=ll(9408),dl=Object.defineProperty;((F,Da)=>{for(var ll in Da)dl(F,ll,{get:Da[ll],enumerable:!0})})({},{EnterArrowEvent:()=>bl,LeaveArrowEvent:()=>Dl,NodeChangedEvent:()=>fl});var pl=class _NodeChangedEvent extends cl.rx{constructor(F,Da){super(_NodeChangedEvent.type),this.node=F,this.data=Da}};pl.type="node-changed";var fl=pl,Al=class _EnterArrowEvent extends cl.rx{constructor(F,Da){super(_EnterArrowEvent.type),this.link=F,this.node=Da}};Al.type="enter-arrow";var bl=Al,kl=class _LeaveArrowEvent extends cl.rx{constructor(F,Da){super(_LeaveArrowEvent.type),this.link=F,this.node=Da}};kl.type="leave-arrow";var Dl=kl,Wl=class extends hl.B69{constructor(F){void 0===F&&(F=document.createElement("div")),super(),this.isCSS2DObject=!0,this.element=F,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new hl.I9Y(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(F){F.element instanceof Element&&null!==F.element.parentNode&&F.element.parentNode.removeChild(F.element)}))}))}copy(F,Da){return super.copy(F,Da),this.element=F.element.cloneNode(!0),this.center=F.center,this}},Ql=new hl.Pq0,wc=new hl.kn4,Sc=new hl.kn4,eu=new hl.Pq0,iu=new hl.Pq0,su=class{constructor(F){void 0===F&&(F={});const Da=this;let ll,cl,hl,dl;const pl={objects:new WeakMap},fl=void 0!==F.element?F.element:document.createElement("div");function hideObject(F){F.isCSS2DObject&&(F.element.style.display="none");for(let Da=0,ll=F.children.length;Da<ll;Da++)hideObject(F.children[Da])}function renderObject(F,ll,cl){if(!1!==F.visible){if(F.isCSS2DObject){Ql.setFromMatrixPosition(F.matrixWorld),Ql.applyMatrix4(Sc);const Al=Ql.z>=-1&&Ql.z<=1&&!0===F.layers.test(cl.layers),bl=F.element;bl.style.display=!0===Al?"":"none",!0===Al&&(F.onBeforeRender(Da,ll,cl),bl.style.transform="translate("+-100*F.center.x+"%,"+-100*F.center.y+"%)translate("+(Ql.x*hl+hl)+"px,"+(-Ql.y*dl+dl)+"px)",bl.parentNode!==fl&&fl.appendChild(bl),F.onAfterRender(Da,ll,cl));const kl={distanceToCameraSquared:getDistanceToSquared(cl,F)};pl.objects.set(F,kl)}for(let Da=0,hl=F.children.length;Da<hl;Da++)renderObject(F.children[Da],ll,cl)}else hideObject(F)}function getDistanceToSquared(F,Da){return eu.setFromMatrixPosition(F.matrixWorld),iu.setFromMatrixPosition(Da.matrixWorld),eu.distanceToSquared(iu)}fl.style.overflow="hidden",this.domElement=fl,this.getSize=function(){return{width:ll,height:cl}},this.render=function(F,Da){!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===Da.parent&&!0===Da.matrixWorldAutoUpdate&&Da.updateMatrixWorld(),wc.copy(Da.matrixWorldInverse),Sc.multiplyMatrices(Da.projectionMatrix,wc),renderObject(F,F,Da),function(F){const Da=function(F){const Da=[];return F.traverseVisible((function(F){F.isCSS2DObject&&Da.push(F)})),Da}(F).sort((function(F,Da){if(F.renderOrder!==Da.renderOrder)return Da.renderOrder-F.renderOrder;return pl.objects.get(F).distanceToCameraSquared-pl.objects.get(Da).distanceToCameraSquared})),ll=Da.length;for(let cl=0,hl=Da.length;cl<hl;cl++)Da[cl].element.style.zIndex=ll-cl}(F)},this.setSize=function(F,Da){ll=F,cl=Da,hl=ll/2,dl=cl/2,fl.style.width=F+"px",fl.style.height=Da+"px"}}},cu=new hl.Pq0,uu=new hl.PTz,hu=new hl.Pq0,Lu=class extends hl.B69{constructor(F){void 0===F&&(F=document.createElement("div")),super(),this.isCSS3DObject=!0,this.element=F,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(F){F.element instanceof Element&&null!==F.element.parentNode&&F.element.parentNode.removeChild(F.element)}))}))}copy(F,Da){return super.copy(F,Da),this.element=F.element.cloneNode(!0),this}},zu=new hl.kn4,Du=new hl.kn4,Nu=class{constructor(F){void 0===F&&(F={});const Da=this;let ll,cl,hl,dl;const pl={camera:{style:""},objects:new WeakMap},fl=void 0!==F.element?F.element:document.createElement("div");fl.style.overflow="hidden",this.domElement=fl;const Al=document.createElement("div");Al.style.transformOrigin="0 0",Al.style.pointerEvents="none",fl.appendChild(Al);const bl=document.createElement("div");function epsilon(F){return Math.abs(F)<1e-10?0:F}function getCameraCSSMatrix(F){const Da=F.elements;return"matrix3d("+epsilon(Da[0])+","+epsilon(-Da[1])+","+epsilon(Da[2])+","+epsilon(Da[3])+","+epsilon(Da[4])+","+epsilon(-Da[5])+","+epsilon(Da[6])+","+epsilon(Da[7])+","+epsilon(Da[8])+","+epsilon(-Da[9])+","+epsilon(Da[10])+","+epsilon(Da[11])+","+epsilon(Da[12])+","+epsilon(-Da[13])+","+epsilon(Da[14])+","+epsilon(Da[15])+")"}function getObjectCSSMatrix(F){const Da=F.elements;return"translate(-50%,-50%)"+("matrix3d("+epsilon(Da[0])+","+epsilon(Da[1])+","+epsilon(Da[2])+","+epsilon(Da[3])+","+epsilon(-Da[4])+","+epsilon(-Da[5])+","+epsilon(-Da[6])+","+epsilon(-Da[7])+","+epsilon(Da[8])+","+epsilon(Da[9])+","+epsilon(Da[10])+","+epsilon(Da[11])+","+epsilon(Da[12])+","+epsilon(Da[13])+","+epsilon(Da[14])+","+epsilon(Da[15])+")")}function hideObject(F){F.isCSS3DObject&&(F.element.style.display="none");for(let Da=0,ll=F.children.length;Da<ll;Da++)hideObject(F.children[Da])}function renderObject(F,ll,cl,hl){if(!1!==F.visible){if(F.isCSS3DObject){const hl=!0===F.layers.test(cl.layers),dl=F.element;if(dl.style.display=!0===hl?"":"none",!0===hl){let hl;F.onBeforeRender(Da,ll,cl),F.isCSS3DSprite?(zu.copy(cl.matrixWorldInverse),zu.transpose(),0!==F.rotation2D&&zu.multiply(Du.makeRotationZ(F.rotation2D)),F.matrixWorld.decompose(cu,uu,hu),zu.setPosition(cu),zu.scale(hu),zu.elements[3]=0,zu.elements[7]=0,zu.elements[11]=0,zu.elements[15]=1,hl=getObjectCSSMatrix(zu)):hl=getObjectCSSMatrix(F.matrixWorld);const fl=pl.objects.get(F);if(void 0===fl||fl.style!==hl){dl.style.transform=hl;const Da={style:hl};pl.objects.set(F,Da)}dl.parentNode!==bl&&bl.appendChild(dl),F.onAfterRender(Da,ll,cl)}}for(let Da=0,dl=F.children.length;Da<dl;Da++)renderObject(F.children[Da],ll,cl,hl)}else hideObject(F)}bl.style.transformStyle="preserve-3d",Al.appendChild(bl),this.getSize=function(){return{width:ll,height:cl}},this.render=function(F,Da){const fl=Da.projectionMatrix.elements[5]*dl;let kl,Dl;Da.view&&Da.view.enabled?(Al.style.transform=`translate( ${-Da.view.offsetX*(ll/Da.view.width)}px, ${-Da.view.offsetY*(cl/Da.view.height)}px )`,Al.style.transform+=`scale( ${Da.view.fullWidth/Da.view.width}, ${Da.view.fullHeight/Da.view.height} )`):Al.style.transform="",!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===Da.parent&&!0===Da.matrixWorldAutoUpdate&&Da.updateMatrixWorld(),Da.isOrthographicCamera&&(kl=-(Da.right+Da.left)/2,Dl=(Da.top+Da.bottom)/2);const Wl=Da.view&&Da.view.enabled?Da.view.height/Da.view.fullHeight:1,Ql=Da.isOrthographicCamera?`scale( ${Wl} )scale(`+fl+")translate("+epsilon(kl)+"px,"+epsilon(Dl)+"px)"+getCameraCSSMatrix(Da.matrixWorldInverse):`scale( ${Wl} )translateZ(`+fl+"px)"+getCameraCSSMatrix(Da.matrixWorldInverse),wc=(Da.isPerspectiveCamera?"perspective("+fl+"px) ":"")+Ql+"translate("+hl+"px,"+dl+"px)";pl.camera.style!==wc&&(bl.style.transform=wc,pl.camera.style=wc),renderObject(F,F,Da,Ql)},this.setSize=function(F,Da){ll=F,cl=Da,hl=ll/2,dl=cl/2,fl.style.width=F+"px",fl.style.height=Da+"px",Al.style.width=F+"px",Al.style.height=Da+"px",bl.style.width=F+"px",bl.style.height=Da+"px"}}},qu="tourLink",ih="__tour-link__",gh={className:"psv-virtual-tour-tooltip",content:'<div class="psv-virtual-tour-loader"><div></div><div></div><div></div></div>'},ed={element:()=>{const F=document.createElement("button");return F.className="psv-virtual-tour-arrow",F.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n    <path fill-rule="even-odd" fill="currentColor" d="\n        M50,50 m45,0\n        a45,45 0 1,0 -90,0\n        a45,45 0 1,0  90,0\n\n        M50,50 m38,0\n        a38,38 0 0,1 -76,0\n        a38,38 0 0,1  76,0\n\n        M50,50 m30,0\n        a30,30 0 1,0 -60,0\n        a30,30 0 1,0  60,0\n        \n        M50,40 m2.5,-2.5\n        l17.5,17.5\n        a 2.5,2.5 0 0 1 -5,5\n        l-15,-15\n        l-15,15\n        a 2.5,2.5 0 0 1 -5,-5\n        l17.5,-17.5\n        a 3.5,3.5 0 0 1 5,0\n    "/>\n</svg>',F},size:{width:80,height:80}};function gpsToSpherical(F,Da){const ll=gpsDegToRad(F),hl=gpsDegToRad(Da),dl=F[2]??0,pl=Da[2]??0;let fl=0;dl!==pl&&(fl=Math.atan((pl-dl)/function(F,Da){return 6371e3*cl.Wp.greatArcDistance(F,Da)}(ll,hl)));const Al=function(F,Da){const[ll,cl]=F,[hl,dl]=Da,pl=Math.sin(hl-ll)*Math.cos(dl),fl=Math.cos(cl)*Math.sin(dl)-Math.sin(cl)*Math.cos(dl)*Math.cos(hl-ll);return Math.atan2(pl,fl)}(ll,hl);return{yaw:Al,pitch:fl}}function gpsDegToRad(F){return[hl.cj9.degToRad(F[0]),hl.cj9.degToRad(F[1])]}function checkArrowStyle(F){if(!F||!["color","hoverColor","outlineColor"].some((Da=>Da in F)))return F&&"number"===typeof F.size&&(cl.Wp.logWarn('VirtualTourPlugin: "arrowStyle.size" must be an object (width + height, in pixels)'),delete F.size),F;cl.Wp.logWarn('VirtualTourPlugin: "arrowStyle" does not support color, hoverColor, outlineColor anymore')}var td="arrow",id=class extends cl.uj{constructor(F,Da){super(F,{className:"psv-virtual-tour-arrows"}),this.plugin=Da,this.renderer=this.is3D?new Nu({element:this.container}):new su({element:this.container}),this.camera=this.is3D?new hl.ubm(30,1):null,this.scene=new hl.Z58,this.viewer.addEventListener(cl.AZ.ReadyEvent.type,this,{once:!0}),this.viewer.addEventListener(cl.AZ.PositionUpdatedEvent.type,this),this.viewer.addEventListener(cl.AZ.SizeUpdatedEvent.type,this),this.viewer.addEventListener(cl.AZ.RenderEvent.type,this),this.viewer.addEventListener(cl.AZ.ClickEvent.type,this),this.container.addEventListener("mouseenter",this,!0),this.container.addEventListener("mouseleave",this,!0),this.container.addEventListener("mousemove",this,!0)}get is3D(){return this.plugin.is3D}get arrowsPosition(){return this.plugin.config.arrowsPosition}get arrowStyle(){return this.plugin.config.arrowStyle}init(){this.is3D&&(this.gallery=this.viewer.getPlugin("gallery"),this.gallery?.addEventListener("show-gallery",this),this.gallery?.addEventListener("hide-gallery",this))}destroy(){this.viewer.removeEventListener(cl.AZ.ReadyEvent.type,this),this.viewer.removeEventListener(cl.AZ.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(cl.AZ.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(cl.AZ.RenderEvent.type,this),this.viewer.removeEventListener(cl.AZ.ClickEvent.type,this),this.gallery?.removeEventListener("show-gallery",this),this.gallery?.removeEventListener("hide-gallery",this),super.destroy()}handleEvent(F){switch(F.type){case cl.AZ.ReadyEvent.type:case cl.AZ.SizeUpdatedEvent.type:case cl.AZ.PositionUpdatedEvent.type:this.__updateCamera();break;case cl.AZ.RenderEvent.type:this.render();break;case cl.AZ.ClickEvent.type:{if(F.data.rightclick)break;const Da=this.__getTargetLink(F.data.target,!0);Da&&this.plugin.setCurrentNode(Da.nodeId,null,Da);break}case"mouseenter":{const Da=this.__getTargetLink(cl.Wp.getEventTarget(F));Da&&this.plugin.__onEnterArrow(Da,F);break}case"mouseleave":{const Da=this.__getTargetLink(cl.Wp.getEventTarget(F));Da&&this.plugin.__onLeaveArrow(Da);break}case"mousemove":this.__getTargetLink(cl.Wp.getEventTarget(F),!0)&&this.plugin.__onHoverArrow(F);break;case"hide-gallery":this.__onToggleGallery(!1);break;case"show-gallery":F.fullscreen||this.__onToggleGallery(!0)}}__updateCamera(){const F=this.viewer.getSize();if(this.renderer.setSize(F.width,F.height),this.is3D){const Da=this.viewer.getPosition();Da.pitch=hl.cj9.clamp(Da.pitch,-this.arrowsPosition.maxPitch,-this.arrowsPosition.minPitch),this.viewer.dataHelper.sphericalCoordsToVector3(Da,this.camera.position,2*F.height).negate(),this.camera.lookAt(0,0,0),this.camera.translateY(F.height/3),this.camera.updateProjectionMatrix()}}render(){if(this.is3D){const F=this.viewer.getPosition(),Da=[];let ll=Number.MAX_SAFE_INTEGER;this.scene.children.forEach((hl=>{const dl=hl.userData[td];if(dl.conflict){const pl=Math.abs(cl.Wp.getShortestArc(F.yaw,dl.yaw));ll=Math.min(ll,pl),Da.push([hl,pl])}})),Da.forEach((F=>{let[Da,cl]=F;const hl=cl!==ll;Da.element.style.opacity=hl?"0.5":null,Da.element.style.zIndex=hl?"-1":null})),this.renderer.render(this.scene,this.camera)}else this.renderer.render(this.scene,this.viewer.renderer.camera)}clear(){this.scene.clear()}__buildArrowElement(F,Da){if(Da?.image){const F=document.createElement("img");return F.src=Da.image,F}if(Da?.element)return"function"===typeof Da.element?Da.element(F):Da.element}addLinkArrow(F,Da,ll){void 0===ll&&(ll=1);let hl=this.__buildArrowElement(F,F.arrowStyle);hl||(hl=this.__buildArrowElement(F,this.arrowStyle)),hl[qu]=F;const dl={...this.arrowStyle,...checkArrowStyle(F.arrowStyle)};if(hl.classList.add("psv-virtual-tour-link"),dl.className&&cl.Wp.addClasses(hl,dl.className),dl.style&&Object.assign(hl.style,dl.style),this.is3D){hl.style.width=1.5*dl.size.width+"px",hl.style.height=1.5*dl.size.height+"px";let F=!1;this.scene.children.forEach((ll=>{const hl=ll.userData[td];Math.abs(cl.Wp.getShortestArc(hl.yaw,Da.yaw))<this.arrowsPosition.linkOverlapAngle&&(hl.conflict=!0,F=!0)}));const pl=new Lu(hl);pl.userData[td]={yaw:Da.yaw,conflict:F},pl.rotation.set(-Math.PI/2,0,Math.PI-Da.yaw),this.viewer.dataHelper.sphericalCoordsToVector3({yaw:Da.yaw,pitch:0},pl.position,100*ll),this.scene.add(pl)}else{hl.style.width=dl.size.width+"px",hl.style.height=dl.size.height+"px",hl.style.pointerEvents="auto";const F=new Wl(hl);this.viewer.dataHelper.sphericalCoordsToVector3(Da,F.position),this.scene.add(F)}}__getTargetLink(F,Da){void 0===Da&&(Da=!1);const ll=Da?cl.Wp.getClosest(F,".psv-virtual-tour-link"):F;return ll?ll[qu]:void 0}__onToggleGallery(F){this.container.style.marginBottom=F?this.viewer.container.querySelector(".psv-gallery").offsetHeight+"px":""}},nd=class{constructor(F,Da){this.plugin=F,this.viewer=Da,this.nodes={}}destroy(){}checkNode(F){if(!F.id)throw new cl.e6("No id given for node");if(!F.panorama)throw new cl.e6(`No panorama provided for node ${F.id}`);if("position"in F&&(cl.Wp.logWarn('Use the "gps" property to configure the GPS position of a virtual node'),F.gps=F.position),this.plugin.isGps&&!(F.gps?.length>=2))throw new cl.e6(`No GPS position provided for node ${F.id}`);if(!this.plugin.isGps&&F.markers?.some((F=>F.gps&&!F.position)))throw new cl.e6("Cannot use GPS positioning for markers in manual mode")}checkLink(F,Da){if(!Da.nodeId)throw new cl.e6(`Link of node ${F.id} has no target id`);if(Array.isArray(Da.position)&&(cl.Wp.logWarn('Use the "gps" property to configure the GPS position of a virtual link'),Da.gps=Da.position,delete Da.position),cl.Wp.isExtendedPosition(Da)&&(cl.Wp.logWarn('Use the "position" property to configure the position of a virtual link'),Da.position=this.viewer.dataHelper.cleanPosition(Da)),!this.plugin.isGps&&!cl.Wp.isExtendedPosition(Da.position))throw new cl.e6(`No position provided for link ${Da.nodeId} of node ${F.id}`);if(this.plugin.isGps&&!Da.gps)throw new cl.e6(`No GPS position provided for link ${Da.nodeId} of node ${F.id}`)}},rd=class extends nd{loadNode(F){return this.nodes[F]?Promise.resolve(this.nodes[F]):Promise.reject(new cl.e6(`Node ${F} not found`))}setNodes(F){if(!F?.length)throw new cl.e6("No nodes provided");const Da={},ll={};F.forEach((F=>{if(this.checkNode(F),Da[F.id])throw new cl.e6(`Duplicate node ${F.id}`);F.links||(cl.Wp.logWarn(`Node ${F.id} has no links`),F.links=[]),Da[F.id]=F})),F.forEach((F=>{F.links.forEach((hl=>{if(!Da[hl.nodeId])throw new cl.e6(`Target node ${hl.nodeId} of node ${F.id} does not exists`);hl.gps=hl.gps||Da[hl.nodeId].gps,this.checkLink(F,hl),ll[hl.nodeId]=!0}))})),F.forEach((F=>{ll[F.id]||cl.Wp.logWarn(`Node ${F.id} is never linked to`)})),this.nodes=Da}},ad=class extends nd{constructor(F,Da){if(super(F,Da),!F.config.getNode)throw new cl.e6("Missing getNode() option.");this.nodeResolver=F.config.getNode}loadNode(F){return this.nodes[F]?Promise.resolve(this.nodes[F]):Promise.resolve(this.nodeResolver(F)).then((Da=>(this.checkNode(Da),Da.links||(cl.Wp.logWarn(`Node ${Da.id} has no links`),Da.links=[]),Da.links.forEach((F=>{this.nodes[F.nodeId]&&(F.gps=F.gps||this.nodes[F.nodeId].gps),this.checkLink(Da,F)})),this.nodes[F]=Da,Da)))}clearCache(){this.nodes={}}},sd=cl.Wp.getConfigParser({dataMode:"client",positionMode:"manual",renderMode:"3d",nodes:null,getNode:null,startNodeId:null,preload:!1,transitionOptions:{showLoader:!0,speed:"20rpm",fadeIn:!0,rotation:!0},linksOnCompass:!0,getLinkTooltip:null,markerStyle:null,arrowStyle:ed,markerPitchOffset:null,arrowPosition:null,arrowsPosition:{minPitch:.3,maxPitch:Math.PI/2,linkOverlapAngle:Math.PI/4,linkPitchOffset:-.1},map:null},{dataMode(F){if("client"!==F&&"server"!==F)throw new cl.e6("VirtualTourPlugin: invalid dataMode");return F},positionMode(F){if("gps"!==F&&"manual"!==F)throw new cl.e6("VirtualTourPlugin: invalid positionMode");return F},renderMode(F){if("markers"===F)return cl.Wp.logWarn('VirtualTourPlugin: "renderMode" markers has been replaced by 2d'),"2d";if("3d"!==F&&"2d"!==F)throw new cl.e6("VirtualTourPlugin: invalid renderMode");return F},markerStyle:F=>(F&&cl.Wp.logWarn('VirtualTourPlugin: "markerStyle" is deprecated'),null),arrowPosition:F=>(F&&cl.Wp.logWarn('VirtualTourPlugin: "arrowPosition" is deprecated'),null),arrowsPosition(F,Da){let{defValue:ll,rawConfig:hl}=Da;return cl.Wp.isNil(hl.markerPitchOffset)||(cl.Wp.logWarn('VirtualTourPlugin: "markerPitchOffset" is deprecated, use "arrowsPosition.linkPitchOffset" instead'),F.linkPitchOffset=hl.markerPitchOffset),{...ll,...F}},arrowStyle(F,Da){let{defValue:ll}=Da;return{...ll,...checkArrowStyle(F)}},map(F,Da){let{rawConfig:ll}=Da;if(F){if("server"===ll.dataMode)return cl.Wp.logWarn("VirtualTourPlugin: The map cannot be used in server side mode"),null;if(!F.imageUrl)return cl.Wp.logWarn('VirtualTourPlugin: configuring the map requires at least "imageUrl"'),null}return F}}),od=class extends cl.TL{constructor(F,Da){super(F,Da),this.state={currentNode:null,currentTooltip:null,loadingNode:null,preload:{}},this.arrowsRenderer=new id(this.viewer,this)}get is3D(){return"3d"===this.config.renderMode}get isServerSide(){return"server"===this.config.dataMode}get isGps(){return"gps"===this.config.positionMode}init(){super.init(),this.arrowsRenderer.init(),cl.Wp.checkStylesheet(this.viewer.container,"virtual-tour-plugin"),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.gallery=this.viewer.getPlugin("gallery"),this.markers?.config.markers&&(cl.Wp.logWarn("No default markers can be configured on Markers plugin when using VirtualTour plugin. Consider defining `markers` on each tour node."),delete this.markers.config.markers),this.config.map&&(this.map=this.viewer.getPlugin("map"),this.map||cl.Wp.logWarn("The map is configured on the VirtualTourPlugin but the MapPlugin is not loaded.")),this.isGps&&(this.plan=this.viewer.getPlugin("plan")),this.datasource=this.isServerSide?new ad(this,this.viewer):new rd(this,this.viewer),this.map&&(this.map.addEventListener("select-hotspot",this),this.map.setImage(this.config.map.imageUrl)),this.plan?.addEventListener("select-hotspot",this),this.isServerSide?this.config.startNodeId&&this.setCurrentNode(this.config.startNodeId):this.config.nodes&&(this.setNodes(this.config.nodes,this.config.startNodeId),delete this.config.nodes)}destroy(){this.map?.removeEventListener("select-hotspot",this),this.plan?.removeEventListener("select-hotspot",this),this.datasource.destroy(),this.arrowsRenderer.destroy(),delete this.datasource,delete this.markers,delete this.compass,delete this.gallery,delete this.arrowsRenderer,super.destroy()}handleEvent(F){if(F instanceof cl.AZ.ClickEvent){const Da=F.data.objects.find((F=>F.userData[qu]))?.userData[qu];Da&&this.setCurrentNode(Da.nodeId,null,Da)}else if("select-hotspot"===F.type){const Da=F.hotspotId;Da.startsWith(ih)&&this.setCurrentNode(Da.substring(13))}}getCurrentNode(){return this.state.currentNode}setNodes(F,Da){if(this.isServerSide)throw new cl.e6("Cannot set nodes in server side mode");this.state.currentTooltip?.hide(),this.state.currentTooltip=null,this.state.currentNode=null,this.datasource.setNodes(F),Da?this.datasource.nodes[Da]||(Da=F[0].id,cl.Wp.logWarn(`startNodeId not found is provided nodes, resetted to ${Da}`)):Da=F[0].id,this.setCurrentNode(Da),this.gallery&&this.gallery.setItems(F.map((F=>({id:F.id,panorama:F.panorama,name:F.name,thumbnail:F.thumbnail}))),(F=>{this.setCurrentNode(F)})),this.map&&this.map.setHotspots([...F.map((F=>({...F.map||{},...this.__getNodeMapPosition(F),id:ih+F.id,tooltip:F.name})))]),this.plan&&this.plan.setHotspots([...F.map((F=>({...F.plan||{},coordinates:F.gps,id:ih+F.id,tooltip:F.name})))])}setCurrentNode(F,Da,ll){if(F===this.state.currentNode?.id&&!Da?.forceUpdate)return Promise.resolve(!0);Da?.forceUpdate&&this.isServerSide&&this.datasource.clearCache(),this.viewer.hideError(),this.state.loadingNode=F;const hl=this.state.currentNode,dl=hl&&ll?this.__getLinkPosition(hl,ll):null;return Promise.resolve(this.state.preload[F]).then((()=>{if(this.state.loadingNode!==F)throw cl.Wp.getAbortError();return this.datasource.loadNode(F)})).then((pl=>{if(this.state.loadingNode!==F)throw cl.Wp.getAbortError();const fl={...sd.defaults.transitionOptions,rotateTo:dl,zoomTo:dl?this.viewer.getZoomLevel():null,..."function"===typeof this.config.transitionOptions?this.config.transitionOptions(pl,hl,ll):this.config.transitionOptions,...Da};return fl.rotation&&!fl.fadeIn?this.viewer.animate({...fl.rotateTo,zoom:fl.zoomTo,speed:fl.speed}).then((()=>[pl,fl])):Promise.resolve([pl,fl])})).then((Da=>{let[ll,hl]=Da;if(this.state.loadingNode!==F)throw cl.Wp.getAbortError();return hl.showLoader&&this.viewer.loader.show(),this.state.currentNode=ll,this.state.currentTooltip&&(this.state.currentTooltip.hide(),this.state.currentTooltip=null),this.arrowsRenderer.clear(),this.gallery?.config.hideOnClick&&this.gallery.hide(),this.markers?.clearMarkers(),this.compass?.clearHotspots(),this.map?.minimize(),this.plan?.minimize(),this.viewer.setPanorama(ll.panorama,{caption:ll.caption,description:ll.description,panoData:ll.panoData,sphereCorrection:ll.sphereCorrection,transition:!!hl.fadeIn&&(!!hl.rotation||"fade-only"),showLoader:hl.showLoader,speed:hl.speed,position:hl.rotateTo,zoom:hl.zoomTo}).then((F=>{if(!F)throw cl.Wp.getAbortError()}))})).then((()=>{if(this.state.loadingNode!==F)throw cl.Wp.getAbortError();const Da=this.state.currentNode;if(this.map){const F=this.__getNodeMapPosition(Da);this.map.setCenter(F)}return this.plan?.setCoordinates(Da.gps),Da.markers&&this.__addNodeMarkers(Da),this.__renderLinks(Da),this.__preload(Da),this.state.loadingNode=null,this.dispatchEvent(new fl(Da,{fromNode:hl,fromLink:ll,fromLinkPosition:dl})),this.viewer.resetIdleTimer(),!0})).catch((F=>{if(cl.Wp.isAbortError(F))return!1;throw this.viewer.showError(this.viewer.config.lang.loadError),this.viewer.loader.hide(),this.viewer.navbar.setCaption(""),this.state.loadingNode=null,F}))}__renderLinks(F){const Da=[];F.links.forEach((ll=>{const cl=this.__getLinkPosition(F,ll);cl.yaw+=ll.linkOffset?.yaw??0,cl.pitch+=ll.linkOffset?.pitch??0,this.isGps&&!this.is3D&&(cl.pitch+=this.config.arrowsPosition.linkPitchOffset),Da.push(cl),this.arrowsRenderer.addLinkArrow(ll,cl,ll.linkOffset?.depth)})),this.arrowsRenderer.render(),this.config.linksOnCompass&&this.compass?.setHotspots(Da)}__getLinkPosition(F,Da){return this.isGps?gpsToSpherical(F.gps,Da.gps):this.viewer.dataHelper.cleanPosition(Da.position)}async __getTooltipContent(F){const Da=await this.datasource.loadNode(F.nodeId),ll=[];(Da.name||Da.thumbnail||Da.caption)&&(Da.name&&ll.push(`<h3>${Da.name}</h3>`),Da.thumbnail&&ll.push(`<img src="${Da.thumbnail}">`),Da.caption&&ll.push(`<p>${Da.caption}</p>`));let cl=ll.join("");return this.config.getLinkTooltip&&(cl=this.config.getLinkTooltip(cl,F,Da)),cl||(cl=Da.id),cl}__onEnterArrow(F,Da){const ll=cl.Wp.getPosition(this.viewer.container),hl={x:Da.clientX-ll.x,y:Da.clientY-ll.y};this.state.currentTooltip=this.viewer.createTooltip({...gh,left:hl.x,top:hl.y,box:{width:20,height:20}}),this.__getTooltipContent(F).then((F=>{this.state.currentTooltip.update(F)})),this.map?.setActiveHotspot(ih+F.nodeId),this.plan?.setActiveHotspot(ih+F.nodeId),this.dispatchEvent(new bl(F,this.state.currentNode))}__onHoverArrow(F){const Da=cl.Wp.getPosition(this.viewer.container),ll={x:F.clientX-Da.x,y:F.clientY-Da.y};this.state.currentTooltip&&this.state.currentTooltip.move({left:ll.x,top:ll.y})}__onLeaveArrow(F){this.state.currentTooltip&&(this.state.currentTooltip.hide(),this.state.currentTooltip=null),this.map?.setActiveHotspot(null),this.plan?.setActiveHotspot(null),this.dispatchEvent(new Dl(F,this.state.currentNode))}__preload(F){this.config.preload&&(this.state.preload[F.id]=!0,this.state.currentNode.links.filter((F=>!this.state.preload[F.nodeId])).filter((F=>"function"!==typeof this.config.preload||this.config.preload(this.state.currentNode,F))).forEach((F=>{this.state.preload[F.nodeId]=this.datasource.loadNode(F.nodeId).then((F=>this.viewer.textureLoader.preloadPanorama(F.panorama))).then((()=>{this.state.preload[F.nodeId]=!0})).catch((()=>{delete this.state.preload[F.nodeId]}))})))}__addNodeMarkers(F){this.markers?this.markers.setMarkers(F.markers.map((Da=>(Da.gps&&this.isGps&&(Da.position=gpsToSpherical(F.gps,Da.gps),Da.data?.map&&Object.assign(Da.data.map,this.__getGpsMapPosition(Da.gps)),Da.data?.plan&&(Da.data.plan.coordinates=Da.gps)),Da)))):cl.Wp.logWarn(`Node ${F.id} markers ignored because the plugin is not loaded.`)}__getNodeMapPosition(F){const Da=this.__getGpsMapPosition(F.gps);return Da||(F.map?{x:F.map.x,y:F.map.y}:null)}__getGpsMapPosition(F){const Da=this.config.map;return this.isGps&&Da&&Da.extent&&Da.size?{x:hl.cj9.mapLinear(F[0],Da.extent[0],Da.extent[2],0,Da.size.width),y:hl.cj9.mapLinear(F[1],Da.extent[1],Da.extent[3],0,Da.size.height)}:null}};od.id="virtual-tour",od.VERSION="5.11.0-beta.1",od.configParser=sd,od.readonlyOptions=Object.keys(sd.defaults)},3961:()=>{},2710:()=>{},1575:()=>{},1080:()=>{},6795:()=>{},980:()=>{},2101:()=>{},8946:()=>{},737:()=>{},1120:()=>{},8310:()=>{},307:()=>{},9740:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgICBzdHlsZT0iZmlsbDojZmZjYzgwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjYzNzM2O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgIGQ9Ik0gMjQgMS4zMTgzNTk0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMS4zMTgzNTk0IDI0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMjQgNDYuNjgxNjQxIEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgNDYuNjgxNjQxIDI0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMjQgMS4zMTgzNTk0IHogTSAyNCAxNC4wMjE0ODQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDMzLjk3ODUxNiAyNCBBIDkuOTc3NzU2NSA5Ljk3Nzc1NjUgMCAwIDEgMjQgMzMuOTc4NTE2IEEgOS45Nzc3NTY1IDkuOTc3NzU2NSAwIDAgMSAxNC4wMjE0ODQgMjQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDI0IDE0LjAyMTQ4NCB6ICIgLz4KICA8cGF0aAogICAgIHN0eWxlPSJmaWxsOiNiZjM2MGM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjIuNTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgIGQ9Ik0gMjQgMS4yNDIxODc1IEEgMjIuNTk0MTA3IDIyLjU5NDEwNyAwIDAgMCA4LjAyMTQ4NDQgNy44NTkzNzUgTCAxNy4wNDI5NjkgMTYuODgyODEyIEEgOS45Nzc3NTY1IDkuOTc3NzU2NSAwIDAgMSAyNCAxNC4wMjE0ODQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDMwLjk3NDYwOSAxNi44NjcxODggTCAzOS45Nzg1MTYgNy44NjMyODEyIEEgMjIuNTk0MTA3IDIyLjU5NDEwNyAwIDAgMCAyNCAxLjI0MjE4NzUgeiAiIC8+Cjwvc3ZnPgo="},6462:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgICBzdHlsZT0iZmlsbDojYmYzNjBjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjUwMDAzO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgZD0iTSAyNCAxLjI0MjE4NzUgQSAyMi41OTQxMDcgMjIuNTk0MTA3IDAgMCAwIDguMDIxNDg0NCA3Ljg1OTM3NSBMIDE3LjA0Mjk2OSAxNi44ODI4MTIgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDI0IDE0LjAyMTQ4NCBBIDkuOTc3NzU2NSA5Ljk3Nzc1NjUgMCAwIDEgMzAuOTc0NjA5IDE2Ljg2NzE4OCBMIDM5Ljk3ODUxNiA3Ljg2MzI4MTIgQSAyMi41OTQxMDcgMjIuNTk0MTA3IDAgMCAwIDI0IDEuMjQyMTg3NSB6ICIgLz4KPC9zdmc+Cg=="},8407:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKCXZpZXdCb3g9IjAgMCA2NCA2NCIKCXdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIKCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKCXhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aAoJZD0iTSAyNy4zNTk0ODYsMTIuNjU1MTMgMS40MzE2MzQ5LDQzLjQ5OTE3IGMgLTMuMjk5OTA4MiwzLjkwNjAxNCAtMC41Mzg3NjA0Niw5Ljk2NzA3IDQuNjQ2ODA5Nyw5Ljk2NzA3IEggNTcuOTM0MTQ2IGMgNS4xMTgyMjUsMCA3Ljk0NjcxOCwtNS45OTM3MTEgNC42NDY4MSwtOS45NjcwNyBMIDM2LjY1MzEwNSwxMi42NTUxMyBjIC0yLjQyNDQyMiwtMi44Mjg0OTMxIC02Ljg2OTE5NywtMi44Mjg0OTMxIC05LjI5MzYxOSwwIHoiCglzdHlsZT0iZmlsbDogY3VycmVudENvbG9yO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjY3MzQ1MSIgLz4KPC9zdmc+Cg=="},6830:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgdmlld0JveD0iMCAwIDY0IDE5MiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZQoJY3g9IjMyIgoJY3k9IjMyIgoJcj0iMjkuODk3ODA2IgoJc3R5bGU9ImZpbGw6IGN1cnJlbnRDb2xvcjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6NC4yMDQzOTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgo8cGF0aCBkPSJtIDM0LjI3OTg3MywyMC4yNjIxNzEgNi43MTE0NDIsNi43MTQyOTQgYyAwLjg5MTQ2NSwwLjg5MTQ2NSAyLjMzOTk4NiwwLjg5MTQ2NSAzLjIzMTQ1MSwwIDAuODkxNDY2LC0wLjg5MTQ2NSAwLjg5MTQ2NiwtMi4zMzk5ODUgMCwtMy4yMzE0NSAtOS42NjI5MDIsLTkuNjY1ODI5IC0zLjc5NDI4NSwtMy43OTQyODYgLTguMTgwMjk3LC04LjE4MDI5OCAtMS4wNzEzOTYsLTEuMDc0MzIyIC0yLjUyNTY5NiwtMS42NzcxNjUgLTQuMDM5OTcyLC0xLjY3NzE2NSAtMS41MTcxMjksMCAtMi45Njg1NzYsMC42MDI4NTggLTQuMDQyODI1LDEuNjc3MTY1IGwgLTguMTgwMjk4LDguMTgwMjk4IGMgLTAuODk0MzE3LDAuODkxNDY1IC0wLjg5NDMxNywyLjMzOTk4NiAwLDMuMjMxNDUgMC44OTE0NjYsMC44OTE0NjUgMi4zMzk5ODcsMC44OTE0NjUgMy4yMzE0NTIsMCBsIDYuNjk3MTA2LC02LjY5NDI1MyB2IDI3LjcwMzk0MyBjIDAsMCAtMC4xMDk3MDYsMi4xMjYyOTIgMi4yODU5NzEsMi4xMjYyOTIgMi4zOTU2NzYsMCAyLjI4NTk3LC0yLjEyNjI5MiAyLjI4NTk3LC0yLjEyNjI5MiB6IiBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDowLjczMTQyOSIgLz4KPC9zdmc+Cg=="},7534:F=>{"use strict";F.exports="data:image/jpeg;base64,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"},6810:F=>{"use strict";F.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCABkAGQDAREAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAECAwQG/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAfSc9OxyuyJUBdiVoCHU5oI11Ms0AoQxACNSxS1ZMoiW7CR2qVASUSUTBQVJHmt+mK0FRGupGbVSgMIWD2lUKy5GuVA7NBZ1JRJViCGOoldhVISzLVjEoKHYxK0iUACrJlqyrJlmVkS3ZMOnYwJlC9ZpRBQEmClBa9Z594YyTq5dWkq0QUQ6RjchRK6Y0yVpM6aBqoZ5pVJMoaazlnVWTLdkShVhLEt6yR//xAAgEAACAQQDAQEBAAAAAAAAAAAAARECEBIhIjFCEyBB/9oACAEBAAEFAl2zspX4/knai6HaeN/J5l3hD70edW0edGsdGjVquzzfwefw4OJrEgg1jio1F32yqpUr6UxnShOR28/h7b6IWMI6HaHiu8mdmiDIycy8fx56JENWXZ5v/PN5RjSQiEajicTicSppUfSk+lJ9KY+tJkjJRkhRGjRoUMqiMaDGgxpjGghm4hiTiKyKzmUJzUtQyGQ8cWS5snqWJ6lks8+RdVd//8QAHxEAAgICAQUAAAAAAAAAAAAAABEBExAgQAISITBQ/9oACAEDAQE/AfnTiOCuOtFyWMeGMYyepeS0tLC0WELVMrgrg7IK49MaPVbzj//EACARAAEEAgIDAQAAAAAAAAAAAAABEBFBEyAhMAISMTL/2gAIAQIBAT8BFZNqI2nSmrrolCtVatF/LJ81U4KaGox+JTzpBDK1dEiMrU0n1oJJ7Eata1gghuG4IE8Z4MRiMZiJJJJ1mDIpkU91Mi9CCnLxrLSSU6Cn/8QAHxAAAQMFAQEBAAAAAAAAAAAAAAERMRAgITAyQYGh/9oACAEBAAY/AqNdyO2v7dOqSSdSW5PbWckZ7UHUZyR00pSLspTJ6Z0yRcumdEEHJycnP6e09FrFMocnJyckCkC4ugggixSRbEotP//EACEQAAICAQQDAQEAAAAAAAAAAAABESFBMVFhcRCBkaHw/9oACAEBAAE/IQ0dipuwQS9kYZNCdlTbU2Q2EKBF6UJ1gbx4gJZmj9vGD34pcCce5yMvxBqvoRJlJ2Y4heTsytzsKOskw1OSLO74RvfCN74YNUsx78Y8Z9mNB7WfCjYRDKlYjd8D3HEiSjVkNzdJkZGqLpTQU9yoz9Eo3fso3BpbgQshb1U7p1/QzPj2n/YEXKGwYJ/fhK9DtEosNZEGnTSfYpvITLavgSUozbElEMmjGRWlCJ7icbaX4qq0GpJL6ORDJGl5Je5LjUs0tjc+wm9Ag3Zg6SiRqyT9M21+F4kekSnB6mPZW5lEokSocv6f3Jx/or6o6s6OydrOwl0ok5n05v0cRyvnyUsO68RnoZfB18SO0FrkUnK+nL+jjYLk/mxyBLRFGrwBBMekSbEbVoIWQ50WRtyOUSMtxyhZDL3ZLnVjNTBzBmpgq1OZkuNvUbeoS92Owdn/2gAMAwEAAgADAAAAEMVxqY0ZtIYcMV1Rd5PEldGqdslLcLzs9qXWXrob/Q4/KxMeGEccaQ9mqSlR0Oy4KLg63Hd74XDPwNOc5b9qtX//xAAeEQADAQEBAQEBAQEAAAAAAAAAAREhEEExcVEgYf/aAAgBAwEBPxB/BcbGSsaPSf8ASRjYuOi5N56MX0h6YYMbFYabTTTRtribZppohfOe89/yqnppUK002jZdpfBqm/BJo0hOFmDZdG7xIZ738IxQTITRriY2iqj+EMeGl/nERFSI96lp9J/Clo0x/Jz0g/vfRchGUUUNvjXNEg/B+CEk4fjiFDDRCca4fVrnFGGD8H1vBtFEVFSZA1zwaIGtIhpE0S0iEEk0f//EAB0RAAMAAgMBAQAAAAAAAAAAAAABERAhMUFRYXH/2gAIAQIBAT8QXOC3oSCLEJ7Oqy/C0KBvrCg+Rc6OBs6wxXhWbxF6OU0OQ16aho0PuaFXpr017jllN06xzHXBwmhQ0Rkd4aCVOEJ2ROGzupEoTNCcPwO0fCEqVIKMN0LLsX0qHt6GuBOFQZlEpGRhW7RSF6NH0coNrorhX6XRsXrG6ja4Km9rDT9E0crhYLjD4wcxSokggSTUIIoSoQWj9n7Nm1SPceBIk6KUu6IvdZ+e8bTEnGRwScYspsRwddEZG0UJu4rom4yhNwqFFYbcRWNofZ//xAAmEAEAAgEDBAICAwEAAAAAAAABABEhMUFhUXGBkaHwwdEQ4fGx/9oACAEBAAE/EFjTMLADqjCbQ1/iKm1TwwwHqKBT5nmMEBXiXMGx3Y49Llk1rEHKu0RWl/wgneIukoxrpBrcOY1CmWl9pnxHI1hQ48qjq+tJpKiLSnHtD+zZVr3utYLWqQQZF7FjcWvSV/Qg1qrbTDT1Sq6q7Sra/UBSt9U4n2eJVasNyi42A/jO+u/ceWbmy3p+Jqccxfb/AOEBtZeOY8YDPWFtBfT4lPlmN1MsRRo14iBu6sC2pu7zOCOsGUODQ4hZj0IK6Th4irFTxMFW9SgaPiBdUu11OIXV1NdFluoaSrHaNq0C7xSKKvktEmbbdcTcs1/7NwhV2Gy6vaY/ZdRmg3dG3wTPMZrAvU6aZeofZVedMkdXoIC4A942GD/Ma2r1ERSS9agBRQ8kBK08y6kRXrFQQukq+Y0FEdl7I/C+4HVXpVTI3ja7b7zEUDhsO7t3fcSRcsjaumrwfBMoGaqBUU+IUBqXrxAlDOqRWF1by7Mjyc43lHq5CpQH831C2LXRQWYrAOMEchUEwrf3LE2ebi0u2nmBQRN66wha+yJCwOmZV1N9MMRISKd0iIFxL0gAtzDzexgag9xLRjKbLguxeY2CI0b0jQmvPtEtThtBMTgSU5cc7zRhRWYgXl4wG63M4zHeVF4LFjqjnMaCuLmDiHnTY+dlm9jXMK3NAGff/qfd/qGQuWP8zkfXacHwgnQxtFSkp3JTVRlGoVWNv70gYVSuf6n2+kUFpl5sLraVfuwbRPOZM1KM4lqveUCLB0mVO1MVNNk7Q1qLCjzFirVWhvUVaCjGd4tYXaF0uIHNRbWrKIjwOIBXxQ2/VFwQ0Qr+IRRqvrLt+SN4+aFW9mGeZ/uR7KsW/aaq+vWCv5oujdvviXm1q7z/AHoy5WqgECgAT//Z"},5975:F=>{"use strict";F.exports="data:image/jpeg;base64,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KAAAACFKQoKDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDJkyYIYOxDB0IczqYIdDmaNGTJswaBghoGjJ0NGgU2AAAAAAAACFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIQEIZKCkIUAFIUyDRDQANFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABghkyQoOZ0AAMlBTIKUpoFNlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMgEAIUAoBSgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSAhSGSlIUpTQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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EEAAEAAkgkgEEkAgAAkAgAAkgAAEkAkgAEEggAEAgAEAggggkAkkkEAAAgkAEAAEEgAAgkgEggAAkEkEkgkAggkkEAAkAAkAAggAkgEAgAAEgAAEkgkAAEggAggAgkEkkEAAAAAkgAkkgEgAAAEEAAAEAggEAAAAEEAEkEkkAEgEEEkEkkgAEkEkgAAAgkkkkggkggEgAAEggEEEkkEggEAgAkkkgkEkkgAgAgkEkgAkAAAEggkgEAEkEEkAAAAAAAggAgAAgAAgkEAAkgAggEAkEAAAgAkAEAEAEAkAAAgEgEkAgAEggEEAAgEAAgEEAkkgAAAAAAAkAEgEgkgggEEkEkkkggAEgEgAAAkkkAAgAggAAgAAAEAAkgEkgAkgAkEgAgkEgEEAkgkgEkAEAAgEkAEAkgAkAAAEEkkEAkAkkEAEAgEgAgAAkkAAEEkAAEgkAkkkEEAkkEAEAgAAEAEkgAkAgkAgEkAEAgkEEEEgAkkkEAkkAEkAgAkAkgAEEAAAkEEgAgEkAAEkAkggAgEAEgggkAEggEAgggAkAAEEEAEgkEEgAEgkAEAAEkAAAgAEAAAAAkEkAAEkgkAgAkEAAggAEgkkkAAgEAkgkgEkkEgAAAEggAgAggEkAgAgAEAkEEkEgkAgkkEEkkEEgAAEAgggkAgEEkAAgAEEAAggkgAEAgkkgkAkEggEAAEggAAAEgkkgEgggAkAEEAggEEgkkkkAEEgEkgkAEgkgkEAAAAEgAAEkgAAgAAEkAAAkgkkgEkkkAgEAggAAEkgEAkEEAgAkkgAkkggkkEEgEkkEgggEkAgAAAggEkkAEAAkgAEgAgAggkkAAAkEkkEAkgkEkAAkAgEEAgEkEAEkggEAAAAAkEEAEEkEAAAAkAkEAkgkkEAEAkgAkgkAEkkkEEgAEEAgAAgAgggAAAAgkgAAkAkkggAkggEgggEAAgEAkggAAEEkkAggAkEAkEEAgkEkAkEAggEAEAAggEAkAAgkkkEkAgEgEAkkEgEEkEAgAAAEEkEAAkAkkEkEkgEEkAgEEgAkkEEgEAkAkAAAAAkkgAgAgEEAgAAEkkkEgkEgAkAAAEAAEAggAAAAgkgkkkAAkAggAkkEkAkkEgkEAAEAAEEAkAAAEAkEAEgAggkEAkgkAkEAgAkAEAEAgkgAgkkgkkkAgAkAAkgEkAgAEAEEEkAEAkAgEAEAEgkgEkgAAgAEgEkAgAEkgAAgAAgEgAkEkkAkgEEgAEAAgkAAEkkAEkAAAAggEEAAggAggEkEAgEkAEEAAAgAgkAEEEkkgkkkkkEggEAAAgkkgkAkgkkkgEEAAAgAAgAgEAkkEAkkkkAAkkAEEAAkgAAkEAkEEkkAgkAkEkgkAkgkgEgEgkAkkEEAAAkgAkEAgAkggAEggEAAgkkEAAAEgAEAEkkAAEkkEAEEkkgAAEgkAAAgAgEAAEgkAEEkkkAAAEgkEkggAAAkkEEkEkEAAEEAAgAAAAgkgkAkgAgEkAAAAEEkgAAkEEAAEAgAAkAEgEkEgkgkgEEAgAEAAEAEkkEAEAkAAgkAgAkkEEgAAgEgEgggkAEgAEAAEEEkkggggEkAAEEgkggEgkggAgkEkAEkEEAgggEkggAggkgAggEkggkkAEEAkgEkkAAAggAAEggAkkAAkEAkkEgEAAkkgkkEEAAEgAkEAEAgEkgAgAgAEgEgkgkkgggAkAkgEkkkkEkkAkAAAgEAEEAEEkEEkEkAkEEggAkggkEgEggkEAkkAgEkggkkAgkgkkgggAEkkAAAAAAgEEkgEgAkEgAgAgEEAgkkEAAgAEAAAEEAAgAgAkAAkkAgkggAkkAgEAEkkkgEEAAkkAkgAgAkkkEkkgkAAkEgEAgAAAgEgAEAAEkEAggggAggAkAgAkgkAgEEgAEAkkEkAEkkEkEkgEAAkAEgAkEgAkEAEkkAgAAEkkkggAAEEgkEEkkgAkAEAEAgkEkAAgEkAkgkgkkEkEgAggEgkkAEkkAAEAAEEAEgAAkgEkAgAAEkkkkEEkgEkAAAgAAgAkgkggkkkEEAAkkkEAAAkkgAAkAkgkAEAkAEAggkAAAEgkggAAAEAkAgAkkAAkkEggkgAEEkAAgEAEAEggkkkgggkAEEAAEAAggAgEkkEEAgEAEkkEgkgEAgAgAAgAAgkAAAAAAAgEAEAkgEgAkAgEkEEkAkAAAEEAAggEAAAgkEkAAkAggEgAAgEkggEkAEEgkkAgkAEkggEEEgEkEkEkgEkgAAkAggkEAEAEEAkAggAkAAkgkgkAggEgAEkgAgAAkkAAEEAkEEAAAAkEgAAgAEgAkEkAgkgAkggAEAAggAgEkEgAAEgkgkkkkkkkkgEkkgEgAkgEggkAkgEEEkggAgEgAgAgkgkgAEAkkEEEAEkAkkEEAEkEEgEkgkgAAAkAggEgEAgEAEgkAAEAAAgAkgkkkEEAEkEEAAAEEAEggEEggAAAAEAAAAEkEkkgEEEAkAkggEgEgAEkgkggkgAkkkgEEkEAkEAgAAAEAAkEkkAAkAEEgEAgkAkkAAgEAAAkEAEAAkkkkkkgAgAEEEAAAAkAkAAgEAAAEAAkEgAEEEkkAEEgEAkkEkkkEkEEEgkgAEggggkkggkAkgkkgEkggAkgAEEEAAkkkAkEAAAkAEEAEgEkEkkgAEAgAAAgEEAAgAEkgEkgEAEgAkEggkgAkAgAkgAEAAgAAAAgEggEkAEAgEgAAAgEgEAAEkgkAEEAEAgkkgggkgkkkgEgkkkAgkAEkAgkAAkAEAEEggEkEkkEAgkkkEEgAkgAEggkgEAAEEAgkAEgAgAgkEgAEEgkAAEkAAAgAgAEgAEgEAgEkEEkAgAAgAkgAAkEkgkAAkEkkAkkAgAkkkAAAkAkgAAEAkEkEkkEAAkgkEEgkgAkAkkEgkEEgkAkAAAgAAkAgAkAgAAgAgEEkAgkEggAAgEgkEgAAAEEgAkAEEkEAAkkAkEAAgEkAEkkgEEgkkgAkgEgkAgAEkgkEAAgAkAEkAEEEAAkAAgEkAkgEggkEAEEEkkkEkkgkEEgkgAgEAkAgkAkAEEEEEAkAAEEgAgkEAAAgAAAgEkAEgggAAkEgggAkgkgAgEAAEkEgEkEggAgkgEggggAAggkEEggEgAAgAEgkEkAEEggEkEgkAgAAEgkEEgkkEAAAEkgEkAAAAEggAkAAAAgkEEEkAkEgkEAAAAAAAAgEAgAkAAgAEkkgEgEggAgAEgEgAgAAkgEAgAEEEAkkEgEkAAkAgEAgEkAAAAAgAAAgkAAEEEkgAgEAAgAkkkkEAAEAEEkkEgAgAAgEEAAAgAEAkEAEEAgAAAggAAAAAAAAAAEAAAAAEggggAEEEAkkAEAgkkAEAAAAAEgggEgEEEgEkgkEkgkAgEgAAgEkkAAAkAkEgkgggkggkkggkAkggAkgkEAkAkkAAkEAEAEAAkkEAkgggEEAAgAEAAgkgAgAAAkgEEAggAkAgAAEgAEkkkEkEEkAgAgAkAAAEAgAAggEgEgkAkgkkgEAEgEAAAAAggAEAkEgEkEEkgkkkkgkgAkgkgEgkEAkAEEgggEAAgkEEEkgAgEkkkAgAEkkAAEkEAkEkkkEkAEAAgAAgkAEkkEgAAkEEgEAAAAgAkAgAAAgkkkgkkAgkggAAgEEAAAAAAEAkAEAEkAkAkAAkAAAEAAAkEAkgAEAgEAkAEEkEggAAkkEAAAgAgEEAEkAgggEAEAkEgkAgEAAggkEgEEEkAgkAgAkgAgAkAAEgEAkgEAAkEEAggkkEgAgEAAkgAAAAAEAEEgggkkEEEkAAAkkkEEkkgAAAAAEAAAkkgAgAEEAAkgEgEAEAggkAEkAAkkAAAEkAAgAgAAkEEkkAAgkAkAgggkAEgkAAgAAAgAAAEgAAAgAEkEkEkEAAAAkAAAAAgggAAAggkkEAAAkgkkAgkEAEgggEkgkAgEAEEAgAAkggAgkAkAAgAgAEgAgAEAAAEAkgEkkAEAAgEgAEEAAAkAAkgEgAAAkgggAAkgAgAEkAAggkAkgAggEEEAgkAAAEAgAEgkggkkggAAkkkkAgEAkkAkgEAEEkAgkkEAkggAAAkAEAAkAAEEkAAAAAAAAEgAAAAgggAggEAEAkkAgkEkgkAgEAgggAkkAEEEAkEgkkEAAAkgEkggkgAkAkAAAEAgkgggkEEEkEkkkEAAgkAEkgEkggAEAEAAkggAAEEAAAEgAgAkAkAEgAgkEAAkAAAkkAEkEkAAEgkEgAkggEkAAggkkAEAEEAAgkEkgAEEgEkEgkAAgAgkgAAAgAAAggAEkEEEEkgAAAkgAkAkEAEEEAAkEkAAgkkEEAkkAAAAEAkAgEkEAkgAgEgAAAAkAggggAAAkggEkAAAAEgkEEgAAgAEgEAkEkgEgAkkgAEEgAAAAAgEgAEEkAgEAgAgEEgAkgkkkEAAkAkEAggggkEAgEgEggAEkggEEAEAAAAAgEAAgAEAgkgkAkEEAgEkAAEkkAkgkEEgAAAAgEkEEEkEAEEkEkgkEAAEkkEkEAAggkgEAAAgEkkkgEkAAAAgggEEgEAEgAgAEkAgAggAAEEEgEEkkkAkAAkEAEgkAAEkAEAggEEgAgkkEEgEEkAkkAkAgAgAEAkgEAAgAgEgkgEgkAAAkEkgAkggkAEgAgEgAkAkAEgAEgEggAEkAAkAEkEEAkkEkEEEgAAEggkEgkEgAkkgEggEkEAAAEAEAAAAggAAAAAgkgkkAkkEggggkkggAAkgkkAAAEgEkAAEkEkkEEAEgEAEEgkEEEAEAkgAAAAAAEEgkgEkEkAEgkEkggEkkAkkEAAAggkgAAgEggAggkkAEkkEEkAAAAAEkAAggEAEEEgAggkggkkkgkkkEAkkEAEEAgEgAAkAAEEkAkkEkEEAkEEkkEEEkggggAEgEEAgEEAgEAgkAkkgAkAAkkgggkgAAkEAgAEkEgkEkkkEEAkEAEAkEAAAAEEEkgkgEEAAAAggkkkgkkkkkgAAAkEgkkEAAAEAAAgAgEgAkgkEEEkAAEkEkkAgEEgAgAgEkkkgAEgAgEkkgEEkEkkkkEAggEgAkgEgAgAkEAAEAgAEEAkAAggAAgEAAAEEAkAEAEggAEEkgkgEkAAAkgAAkAEkEggAAAAAAAAAEAgAEgEkkEEAEEkkAggEAAgAgEgAAkgAAgkEkkEkkkkAAAAAAEEgAAAAAAEEAkEEEEAkAkAAAAkEEAgkAAAAAgAkEEkEAAAkkAgkEkkkAgAAAAAkkEAggEgAgkgEkAEgEgAgkEkEkEAgkgEEAAAkEAEAAEEggAEkkgAAAAEAAEgEgEAAEAkkEAAAAkAAAAEkAkkAEEAAEEEAkkAAAgEAAkkAAEAAAggAAAgkgkgkEkkgAAkAkgEkkkkgggAkAAAgEkEAkgkEAkEAEAEkEAgkAAgAkgEEAgEEEgAkgggkkEkkEAAAAAAggAAkAgkEkAEgAEAAAkAkkkEEkgkAAEggEggggAAgkEEAEEEAEggAEEEkkkkkkgAggAgkkkEEkkgkAgggEAkAkAEggkgkgkkkgkEAggEEggEAEAAgkAAAAEAAgEgkgAAgEgkAEkkEEAkkggEEEgEAgAEAAEAAgAAggkAAkggEAkAgEAAgkkkEEkkkkkkEkEAkkEEEggkAEgAEgAAEgkkEAAAgAAAkkEkEEgAAEEEgEgEAAAEAkEAAEkgAkEAgEEAAAAAEggggAggkkgEAgkAkkAkAgEEEAAEkAkkEAkkEEAEAEAgkAEEggggAAEkgAgAgAEgkAAkAgEgAkgAkEAAAAkkEkAAAAEEEkgkAEgAAAAEEkAAgAkAEkAAkEgAAgggAAEEkEgEkEAgAkEkkAEEkgAAkEgkAgAgAAggkgEAkAAggAgAEkAAAEAgAAAgAAAEgkkkkkgAkAAgkggggEggEEgAAAAEEEEkgAEkEAAkkAAgggEgggEgkkEkAgEkAEAgAAEgggEkAkkEAggAkkgkgEAkAEAAAEEgEAgEgkAkkEgEgEgAkAEgAAAkgAAAAAAkAgEgkEEgAAAAkAgAEgAgAAAAAEAgAgkkkkggEgkggkEEEAAAEkEEkgAkEkEAggkAAkggkggEkAEkkEkkkAAkkkgkggEAkAkgkAAgEAEgAEkgEEggAAkAAAggkkgEgAAAEAAAAggAgEAEkEEgEAAAAAAAgggEAAgAgEgAkgEAggAAAAEAAAgkkEgAkAkAEAAEkEgAEEkkgAEgkAAEAkkAkEkggAAEgAkEgAAAAAEkAkAEEAkgEAAAAAAAAAAAgAAgggAkAgEAkAAgkEgggEggAkkEgAAAggEAkEAAkgkAkkEkEkkEkgAEgAAgAkgEkAAAEkEggAAgEEgEkggAkkgAEkkEgAAAAgAEEkAkAAAkAAEEEAEgAAAgkAEEkgkgkkkAEAEAAAEkAAkgEEgAAEEggAEEAgAAAEgkgAEggAAgEAAgEgkgAgAEgAgggAEkAEAAkgAAkEAAAEAAAEEkkkEgAggAkggEEAgEEAAAAAAgEkkkEAkAEkkgkkggAAAAAAAkEkEkkgEgkkggEEkkgAkkAEkEkAgAgAgEEAAEAgAEggEAkkgkkkkAEgAgAEEEAAgAAkkAEkEAEEgAAEgEgAAAAAggAEgkAgAEEAkkgAEEAAAAAAgkgEAAAAgAkgggEEAAEAEkEgEAEEgAAEEAAAgkAAAkAAAAEggAAggAEggAAEEkggAAEEEEkkEkkAgAEkEkkEgEggkgAkgAkgAEgkgEgAkAAAgAgkgAAAEAAAAgAgggEEgAAAAEAAAgAAgExuEAkgAAAEkkAAkgEgEAAkkkkAAAAEkAAEAgAAgkAEEgkEkgEAEgkAgkkkggkEEkEEkkkgkgEgkgEAAkAEkgkEEAkAAEkAAAkAEAEEgkgEAAAAgAAAAEAkkkkkEEgkAEicaXgkEAgEAkkAAAAAAkEEAAAkgEkkggAgAAAAgEkAEAkEAAAAAAAAEkEkgAgAgEEEkgAgAAAEAEkEEkAEAAEAAEAgAAAEAggAAAkkkkgkgEkkkkkkkkkkEAAAAAAAkgYSalAkgAAEAAAAgkAgAgkgAEAAgAEEkkAkAkEAAAAAAAggkkgkAkEkEggkgAggEEgEAAgkkgggkkgkkAEEgAEEkkgAAAEgkkAkkkgAAAAgkEAEEkEEkEEAAAEAAAAAgAurScqAgkkkEkkAkgkgAEkggkkkggAkAAEEgkEkAAAAgAEAEggEAkkggAEEgAkEAAggEgAAkkAkEEEgkEEAAAAAAAEkkkkkAAEggAAAAAAgkAAEEgAggkgEgkEkEAkggE9r6TxgAkEEEkkkggAkkkAEgggAkkkkEkEEAEgkkgAEgkEkEAkgEgEEAAAAAAkAEgEAAAEgAEAAEgggEAAAEAgEgkgggEkAgEkEgAkgAEEEEkkkEggEggEgAAEEAEkgAZH+USaUAkkkkggkkkkkkgEEkAEEAgAAEgAAAAAAEAEAAgAgAAAEgEAgAgEAgkEkgEAEkgAEgEEAgEkEkAgkEAAEEAkAgEkEEgEAgkggAkgkAggAgkkEkEkkgAEggkEkgJ7IN4XwkkgkAgEkkgAgkgAkEkAkgAAAkAAkAEEAEgkgAAgAgEkgEAAAEgkEAkgEEgEggAAAAEEgEkAAEggAEEAEkkkkAAkAkAEgEkkgAAgAEEEgkkgAEgEEEgkkkkEEEuKTfXWgAAkgAAgAAAkEkggAgAAEEAAkgkgkAkEkgAEgkkkkkkkEkkkgEkkEEEAEAkgEkkgkkkkkkAgkgEEkkAEgEgEkkAkkkkkkkAkkkgAAAEkkkEAkEkkkkkkgAAEgk4SS2hLAAkgkkgEEEEgkgEkkAgEAAEgkEEAAggkkEkkgkkAkAAAgkkkkkgEgkEAAkkkkkAkkkkkkgEkkgkAEgkkAAAgAEAEgkAEkAEEAgggAEEAAAAgEAAEAkkkkggEAEWSSWAkgAEgAgAgggEEEggAkkAEgAgAAAAkEEkgkEkgkkkkkEAkAAgAAgAgEgAAgEkgkkAgAkkgEkgAkkkEEkgkEkkEgEEkgEkEgkEggkkAEEkEggEEkgEkAEgAAkEgEASSSIkAEAAAgEkgAEgEkgggEkkkAkAkAAAEAEAggAAEAkggkgggkgEkAAkEAkgAkkgkAAEAggkgEgkkgEkkkkkkAAkEAgkggkkEggAkkAEggAEkAEgAAkEkkgkkgkEkEEMSS2kgEkEgAgAAEAEkkAgkAEEgggEkgEAkAEgEAEEEggkEAgEEAEAgggkAgkkEkAggkEAEAgkAkEkkkgkkAkEkEAgAgkgAkkkAAAAAkEkAAAgEkggAAkkkkEkkgEggEAs4PugkEgkggkAEAgkkgAEEgkgkgEEkkkggAkEAkkgAkgggAkAgEEgEgkAAEEAkAEEkAAAEAAAkEAkAkgkEEgkEgAAggkkEgAggAkkEkAEEAggAgAAAkgAAEAEkgAEgAkESzAAkgAkkggEAkkAAkAEEAgEAEgkEAkAgkkAgkkgkAgEAEEgkAEkAkgEgkAEkEEkgAEgAggAEgEkkkAkAEAAkkkEAkgkgkkkAggAEAAAEEAkkAggEAggkEgAgAgAEAAA7oAAAkgAkgkEAEkggEkkEkAkAkAAAAAgkgkAAEkAkkEkgkkgAEgkkEkkkgAAEkAkkkkAAAAEAAAgEkgkEkgkAEkgAkkEEAEkAgAgAkggEAgkAEgEkgkkEAkAAkggAAgAAgAEkkkAAkEkEEggkEkAkgAAEEkkkEgEgEEEgEkgEkggEAAkAEEEkEgEgkkEgAkEAgEAAEkAAgAAEEkgAkgggAgEAgEgkAEgEEkgEgAAAggkEAggEkkAkAkAggEAAgggggEggEAEgkEgggEgEAkkAkEEgEgAkEAEEEEAgAAkgkEkkgAgkEAkkAkAAkkkAkkkAAgkkAAgAkgAkEkgEEkkgEgEgAAAgAEggAEkAAggAgAEgkEkkkAgkkEAAgAAAAEAAAEggEEkEkAkEAAkAEgkEEEkgAgAAggEggAkgEkkgggkggAAgEgAEgAAEkAEAgAkEAAAgkEEEAAggEkgkkkEAkggEAkgAkkEkAEEkAAEAgEAggEAAAgkkEkEEEAAAgEAAEggEEkgkEgAgAAAAkkgkkEAggkEEEAEEAkAAAkkEEgEkkgAkEEkAEEgAkEAAgAgAkEAAAAgAEgAEAEgAEggEEAEkAggEAEAgAEEgEAkkAAAEgEAAEgkkAEgAkgEAAEAgAgkkkAEEkEggkgAgEkEgEAAgEEgkggAEgEkgEEgAEggAEgAkEkAAEkAEkEEEkEgkkAgAkEAkEkAEAAkAEEAgkgEkAgkAAkEEkAEAEkkkAkAEkkgEEAkAggggkgEAgEggEgEAkkgAAkEAAAAAEEEgkEggAAgAgEgAAAkEggkkEAgEAggEgkEAgEAkkggggEgAEAgEAAAEgAgEEEAkEAkgkEgAEkkgkgkEAgEkggAggEkEAEgkkAEAkgEgAAgEEAggAEEAEkkgkkkAAEAkkAgAAEgAEgkAkAAAAAAAkAAEkEgAEAEggEgkAAAEkAgkEAAkEkkgEkkgggAkgEgEEEgkEgggEgkAkEEAAEAkEAEkAAgkkgEkgAgkkAAAEEEgkgAkAAEgEkkAgAAEAAEAgkkgAAAAAEkkAEAEggggAgkAEkgAkAgkEAggkkEgkkgAkgAkkEgAAkAEEEAAAgkAAEAEAAEEgEkkAkgEEkAkEkkAAEgAEkAkgEAAEggkkAAAkAAEEgEgEggAEgkkEEEEAAEggEggAAEkkAkkkkgEAgAgkEAEAgAgEkgggkgEkEgEgkAkEAAAkAAkgEgggAAAkkkgAkgkkEkAkgkkEkgkEAkgkgggAggEkgAgAAkkgkEAAAAEEAkgEgEEAgAEAEgkgEgkkgAAgkkkAkEEkgEAkEgEgAkAgAggAEAkAEEgAkgkggkEkAEAEAEEgEAEAggggEAAkkAAEEEgEkEkEEgkgkEEAkAgkgkkgEkAAkEkkEEkgEEggAkAAkAAggEkEkgAkkgAkgggAEkkEkEAgAEgggkkgEAAEEggkEAkkEEEkAAggEEkAAgAEAgAEEAAEEAkAggkAAgEgEAEkkAgAkgAkAgkkkAAEkgEgkAgEgEEAkkEgAAAgAgkAEEggAgAEkEgkkEAEAggkkEkEEAgAAgEAkAAAkEAAAAEggkAAEEgEkkAAEEEkEAAkggAEgkEEEAEgAggkgkAEAgkgggEkkkEEkkkgAkEgggggEAEAkgAgEgAEEkkAAEEgEgEAkEAAEgkkkEEkAAEkkggkAAEAAkAAEAEggEgEEEgEEEEkgkEkEAgEAAEggEkAgAkgAEgAEEAAEgkAEAkkkAgAAgEEAggkAAkEgEkggAAgAAggkAgkggAEkAgAgkEkAgEEgkAAkEgAgEAkEAAEEkAAAkEgAEEEgkkAAgEEAEAEgEkAgAEgAAAEgEkggAAEAgEgkAEEkAkEAAAkAAEEkkAkAAgkkAkkkgAkgEAEggkAAEkEAEAAAEEggkgAkggkAAAAEgkgEAAAkkAEAgAAEggkkAEEEkkEAkEEAkkEAEAkkEEgkEgEEAkEgEkAEggAgkAggAAAAAAEEkAkAgkgAkAggkgggkEggAkAEkEkgAAAEEEgAEEAgAAAAkkkgEEkAAEkgkkAAkAAEAEkgEAgAAAEgAAAAAAgEEgAgggkgkgggAkAkAkkEkkEgEkggEggkAAAAkggAAEAkggAAEkEAAEgAEAkEgAgEEkAAkAggAAkAAkgAAgAAgAAEAgEAAgAgEAEAEgEkgEgAEEEAEAEgAEAAAggAEAAAAEgEgEEEAEkAkggEEgkEgAEgEgkAAAAgEAAEAAggkAEggAgAgAEAAgEAAkggkkgAEkgkkkAEAAAAAEkAkkgEgEEEkkgggAkkggEAgEgAAAAkAgEkkggkgEAAEkEkEAAkkAgkEggAAAEgggAAkAEEgAkgkAgEEEkgEEEAkAEAgAAAAAAEggEAAEEkAgEggEkAgEEkgEEAEAEAAAEkgkAAgEAAgAkAgAkgAAgEkgkEkkgkkkEgkAEgAAkgkEAgEAAAAgEkEEgkgAkEAEkkEEAkkEkAAAAEgEAEAEAEAgggEAEAAgkEAAkggEgEgAAkkkkgEkEkkkkgEEkkEEEAEgAEEAAAAAgAAEkEAEgAAggEkgEEgEAEAAEgAkAkAgkkAAAggAkkgggEEgEgkAkkAgEkEAEEAgEAkAAkEAAEAAkAkggAAAggAgAAAEkAggEAkgkggkggkEkAAEAEEkEEAAkEAAAAAEgAAgkEEEEkgkEkgAkAEEAkgEkgkgAEgEkEkEEgAAEkAgEkAEkEgAkkgggkAEgAkEAAAAAkEAgAggEgAAEEgAgAEkkkAAEgkAAEkAgEAAEAAAkkgEgAAggEEgEgEAkAAkAgEEkkAAAgkAEkEAEkAEEEAgEkAgAkEgkkAkkgEEggAkkAkgAAgEkEkkgkkAAAAAAkEAEgggEggAgEEgEgAAEgAAkggAAAAAEEgAkEEgAkAgAAgAAkkgAkEggkgEAAkkEkkkkkgAAkEgEkEgkAgkkgkEkEEgkgkggEEkAEggEkgAgkAkAAAkgkkkkAAEAkgAAAAAAAAAAAAEEgAgAAAgggAkgAAEAAgAgEgggkAggAAkAAkAAAEkEgAEAEkEgAAAAAAAAAAkkkAAkEEkAAAgkEAEEEEEgkAgEAkAkAgAEEEggkAgAkAkggEAAkEgAAAAAAAAAAAAAAAAAAAAkggEEgkgAAAAAEgAAgEEkgAAgAkEAkkkEAEgEgkAgAAAAAAAAAAAAAAAAAAEEEkEgkAgAAgAEAAgkEEAAkgkAAAAEgAkAAEggkAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEAAggkEAgggAEkkAAkAEggEEEEgAAAAAEkAAAAAAAAAAAAAAAAAAAAAAAEAkggkggEAAggEgAAAAgEkkkkkAkggEAAgEgAAAAAAAAAAAAAEkkAAAAAAAAAAAAAAAAAAAAAEEEkgkgkEAEgEgkkEgEkgAgAggAkkAAAkAAAAAAAAAAAAAAAAAAAAAAAAEEggEkgkEEAggkEgAAAgAEgkkkgAkAAAAAAAAAAAAAkkgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAEAEAgkEAAEAkEEkggEAEEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAEEkAgEAggEEAEAkkAgkAAAAAAAAAAAEEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEEgAAggEAgAkEgggkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAkgEEgAEEkkEkgEkEgAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAgAEAgAkggAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAkEAgggggkkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkgEAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkgkkggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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"},2305:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDgiCiAgIGhlaWdodD0iNDgiCiAgIHZpZXdCb3g9IjAgMCAxMi43IDEyLjciCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzUiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnMKICAgICBpZD0iZGVmczIiPjxmaWx0ZXIKICAgICAgIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQjsiCiAgICAgICBpZD0iZmlsdGVyMTM0NSIKICAgICAgIHg9Ii0wLjIzMTQ0MzgiCiAgICAgICB5PSItMC4yMzE0NDM4IgogICAgICAgd2lkdGg9IjEuNDYyODg3NiIKICAgICAgIGhlaWdodD0iMS40NjI4ODc2Ij48ZmVGbG9vZAogICAgICAgICBmbG9vZC1vcGFjaXR5PSIwLjQ5ODAzOSIKICAgICAgICAgZmxvb2QtY29sb3I9InJnYigwLDAsMCkiCiAgICAgICAgIHJlc3VsdD0iZmxvb2QiCiAgICAgICAgIGlkPSJmZUZsb29kMTMzNSIgLz48ZmVDb21wb3NpdGUKICAgICAgICAgaW49ImZsb29kIgogICAgICAgICBpbjI9IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIG9wZXJhdG9yPSJpbiIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGUxIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUxMzM3IiAvPjxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpbj0iY29tcG9zaXRlMSIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjUiCiAgICAgICAgIHJlc3VsdD0iYmx1ciIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyMTMzOSIgLz48ZmVPZmZzZXQKICAgICAgICAgZHg9IjAiCiAgICAgICAgIGR5PSIwIgogICAgICAgICByZXN1bHQ9Im9mZnNldCIKICAgICAgICAgaWQ9ImZlT2Zmc2V0MTM0MSIgLz48ZmVDb21wb3NpdGUKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGluMj0ib2Zmc2V0IgogICAgICAgICBvcGVyYXRvcj0ib3ZlciIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGUyIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUxMzQzIiAvPjwvZmlsdGVyPjxmaWx0ZXIKICAgICAgIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQjsiCiAgICAgICBpZD0iZmlsdGVyMTM4OSIKICAgICAgIHg9Ii0wLjE5MDM0NTU2IgogICAgICAgeT0iLTAuMTkwMzQ1NTYiCiAgICAgICB3aWR0aD0iMS4zODA2OTExIgogICAgICAgaGVpZ2h0PSIxLjM4MDY5MTEiPjxmZUZsb29kCiAgICAgICAgIGZsb29kLW9wYWNpdHk9IjAuNDk4MDM5IgogICAgICAgICBmbG9vZC1jb2xvcj0icmdiKDAsMCwwKSIKICAgICAgICAgcmVzdWx0PSJmbG9vZCIKICAgICAgICAgaWQ9ImZlRmxvb2QxMzc5IiAvPjxmZUNvbXBvc2l0ZQogICAgICAgICBpbj0iZmxvb2QiCiAgICAgICAgIGluMj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgb3BlcmF0b3I9ImluIgogICAgICAgICByZXN1bHQ9ImNvbXBvc2l0ZTEiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTEzODEiIC8+PGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGluPSJjb21wb3NpdGUxIgogICAgICAgICBzdGREZXZpYXRpb249IjAuNSIKICAgICAgICAgcmVzdWx0PSJibHVyIgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXIxMzgzIiAvPjxmZU9mZnNldAogICAgICAgICBkeD0iMCIKICAgICAgICAgZHk9IjAiCiAgICAgICAgIHJlc3VsdD0ib2Zmc2V0IgogICAgICAgICBpZD0iZmVPZmZzZXQxMzg1IiAvPjxmZUNvbXBvc2l0ZQogICAgICAgICBpbj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgaW4yPSJvZmZzZXQiCiAgICAgICAgIG9wZXJhdG9yPSJvdmVyIgogICAgICAgICByZXN1bHQ9ImNvbXBvc2l0ZTIiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTEzODciIC8+PC9maWx0ZXI+PC9kZWZzPjxnCiAgICAgaWQ9ImxheWVyMSI+PHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOiNiZjY3NGM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjAuNjYxNDU4O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsdGVyOnVybCgjZmlsdGVyMTM4OSkiCiAgICAgICBpZD0icGF0aDYzNDIiCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMC4yMzAxOTA4OSwtMC44NTkwOTM3MywwLjg1OTA5MjQ2LC0wLjIzMDE5NTY0LDAuOTYxNzMwODMsMC43NjEzNjk0MykiCiAgICAgICBkPSJNIC0xLjI1Nzg5MjYsMS45MTE3NjY4IEEgOC4wNDE4NDI1LDguMDQxODQyNSAwIDAgMSAtOS4yOTk3MzUxLDkuOTUzNjA5MiBWIDEuOTExNzY2OCBaIiAvPjxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiNiZTYyMWM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjAuODg3ODc7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWx0ZXI6dXJsKCNmaWx0ZXIxMzQ1KSIKICAgICAgIGlkPSJwYXRoODQ2IgogICAgICAgY3g9IjcuOTI3NzA3MiIKICAgICAgIGN5PSI1LjQ3NTg1MjUiCiAgICAgICByPSIzLjU1MTQ3NzciCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjc3MDI0MTc3LDAuNDQ0Njk5MzMsLTAuNDQ0Njk5MzMsMC43NzAyNDE3NywwLjk2MTczMDgzLDAuNzYxMzY5NDMpIiAvPjxnCiAgICAgICBpZD0iZzg5MiIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEuMTc4NDYzOSwwLDAsMS4xNzg0NjM5LC0wLjgzNjc2ODYyLC0xLjY1OTk1MjIpIj48cGF0aAogICAgICAgICBkPSJNIDMuNTk5NjY3OCw5LjQxMDYyNTIgSCA1Ljc4MjQ4MDMgViA5LjgwNzUwMDEgSCAzLjU5OTY2NzggWiIKICAgICAgICAgaWQ9InBhdGgyNTQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMjY0NTgzIiAvPjxwYXRoCiAgICAgICAgIGQ9Ik0gNC4xMjgzMDUzLDguMjcwMDA2NCAzLjgzMDExOTksOC4wMDQ4OTM5IDQuMDk1MjMyNCw3LjcwNjcwODUgMy43OTg2MzQ1LDcuNDQyOTE4OSAzLjUzMzUyMiw3Ljc0MTEwNDMgMy4yMzUzMzY2LDcuNDc1OTkxOCAyLjk3MTU0Nyw3Ljc3MjU4OTggMy4yNjk3MzI0LDguMDM3NzAyMyAzLjAwNDYxOTksOC4zMzU4ODc3IDMuMzAxMjE3OCw4LjU5OTY3NzIgMy41NjYzMzAzLDguMzAxNDkxOCAzLjg2NDUxNTcsOC41NjY2MDQzIFoiCiAgICAgICAgIGlkPSJwYXRoMjU2IgogICAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjI2NDU4MyIgLz48cGF0aAogICAgICAgICBkPSJNIDYuMjc4MDQ0OSw3LjcwNjk3MzEgNS45ODE0NDcsNy40NDMxODM1IDUuNzE2MzM0NSw3Ljc0MTM2ODkgNS40MTgxNDkxLDcuNDc2MjU2NCA1LjE1NDM1OTUsNy43NzI4NTQzIDUuNDUyNTQ0OSw4LjAzNzk2NjggNS4xODc0MzI0LDguMzM2MTUyMiA1LjQ4NDAzMDMsOC41OTk5NDE4IDUuNzQ5MTQyOCw4LjMwMTc1NjQgNi4wNDczMjgyLDguNTY2ODY4OSA2LjMxMTExNzgsOC4yNzAyNzEgNi4wMTI5MzI0LDguMDA1MTU4NSBaIgogICAgICAgICBpZD0icGF0aDI1OCIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+PC9nPjwvZz48L3N2Zz4K"},6883:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aAogICAgIGQ9Im0gOC4wMjIyOTI0LDcuODU5Nzk3NyBhIDIyLjU5NDEwNywyMi41OTQxMDcgMCAwIDEgMzEuOTU1NTYzNiwwLjAwMjcgTCAyNC4wMDE0MDksMjMuODM4OTE2IFoiCiAgICAgc3R5bGU9ImZpbGw6I2JmMzYwYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Mi41MDAwMztzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDxjaXJjbGUKICAgICBjeD0iMjQiCiAgICAgY3k9IjI0IgogICAgIHI9IjkuOTc3NzU2NSIKICAgICBzdHlsZT0iZmlsbDojZmY2ZjAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjQ5NDQ5O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo="},270:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgMTIuNyAxMi43IgogICB2ZXJzaW9uPSIxLjEiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBkPSJNLTMuMDA3LS4wMDVhNS45NzggNS45NzggMCAwIDEtNS45NzkgNS45NzhWLS4wMDV6IgogICAgIHN0eWxlPSJmaWxsOiMxYTIzN2U7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmY7c3Ryb2tlLXdpZHRoOjAuNjYxNDU4O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgdHJhbnNmb3JtPSJyb3RhdGUoLTEzNSkiLz4KICA8Y2lyY2xlCiAgICAgY3g9IjYuMzUiCiAgICAgY3k9IjYuNTQ1IgogICAgIHI9IjIuNjQiCiAgICAgc3R5bGU9ImZpbGw6IzFlODhlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC42NjAwMjc7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg=="},1462:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4xIgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDkwLjQ1NTAwMiA5MC40NTIwMDMiCiAgIGlkPSJzdmcxMCIKICAgd2lkdGg9IjkwLjQ1NTAwMiIKICAgaGVpZ2h0PSI5MC40NTIwMDMiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDIuNTEyLDkwLjQ1IGggOC4wMTIgMTIuODM0IGMgMC4wMDgsMCAwLjAxNCwwLjAwMiAwLjAyLDAuMDAyIGggMTUuNDIzIGMgMC4wMDgsMCAwLjAxNCwtMC4wMDIgMC4wMiwtMC4wMDIgaCAxLjE2NCBjIDEuMzg3LDAgMi41MTIsLTEuMTI1IDIuNTEyLC0yLjUxMiBWIDUyLjgxMyBsIDI3LjUyLC0yNy41MTYgdiAxOS4xMDkgYyAwLDEuMzg2IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIDEuMzg3LDAgMi41MTIsLTEuMTI2IDIuNTEyLC0yLjUxMiBWIDE5LjIzMyBjIDAsLTEuMzg3IC0xLjEyNSwtMi41MTQgLTIuNTEyLC0yLjUxNCBIIDQ3LjM1NiBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNyAtMi41MTQsMi41MTQgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiBIIDY2LjQ2MyBMIDQwLjIyNiw0Ny45NzcgYyAtMC4wOCwtMC4wMDggLTAuMTYsLTAuMDIzIC0wLjI0MiwtMC4wMjMgSCAyLjUxMiBDIDEuMTI1LDQ3Ljk1NCAwLDQ5LjA3OSAwLDUwLjQ2NiB2IDEuMTg4IDE1LjQyNCAxMi44NTQgOC4wMDggYyAwLDEuMzg1IDEuMTI1LDIuNTEgMi41MTIsMi41MSB6IE0gNS4wMjUsNzkuOTMgViA2Ny4wNzcgNTIuOTc3IEggMzcuNDcxIFYgODUuNDI0IEggMTAuNTIzIDUuMDI1IFoiCiAgICAgaWQ9InBhdGgxIiAvPgogIDxwYXRoCiAgICAgZD0ibSA2Ny4wNzgsOTAuNDUyIGMgMS4zODksMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTE0IDAsLTEuMzg3IC0xLjEyNSwtMi41MTIgLTIuNTE0LC0yLjUxMiBIIDUxLjY1NSBjIC0xLjM4NywwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgMCwxLjM4OSAxLjEyNSwyLjUxNCAyLjUxMiwyLjUxNCB6IgogICAgIGlkPSJwYXRoMiIgLz4KICA8cGF0aAogICAgIGQ9Im0gOTAuNDU1LDc5LjkzIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTQsLTIuNTEyIC0xLjM4NywwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgdiA1LjQ5NiBoIC01LjQ5NiBjIC0xLjM4OSwwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgMCwxLjM4OSAxLjEyMywyLjUxNCAyLjUxMiwyLjUxNCBoIDguMDA4IGMgMS4zODksMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTE0IHoiCiAgICAgaWQ9InBhdGgzIiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny45NDIsNDEuMzExIGMgMS4zODcsMCAyLjUxMiwtMS4xMjcgMi41MTIsLTIuNTE0IFYgMjMuMzczIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTIsLTIuNTEyIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgdiAxNS40MjQgYyAwLDEuMzg3IDEuMTI1LDIuNTE0IDIuNTE0LDIuNTE0IHoiCiAgICAgaWQ9InBhdGg0IiAvPgogIDxwYXRoCiAgICAgZD0ibSA4NS40MjgsNjcuMDc1IGMgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiAxLjM4NywwIDIuNTEyLC0xLjEyNSAyLjUxMiwtMi41MTIgViA1MS42NTEgYyAwLC0xLjM4NyAtMS4xMjUsLTIuNTEyIC0yLjUxMiwtMi41MTIgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiB6IgogICAgIGlkPSJwYXRoNSIgLz4KICA8cGF0aAogICAgIGQ9Im0gODcuOTQyLDAgaCAtOC4wMDggYyAtMS4zODksMCAtMi41MTIsMS4xMjcgLTIuNTEyLDIuNTE0IDAsMS4zODcgMS4xMjMsMi41MTIgMi41MTIsMi41MTIgaCA1LjQ5NCB2IDUuNDk2IGMgMCwxLjM4NyAxLjEyNSwyLjUxNCAyLjUxNCwyLjUxNCAxLjM4NywwIDIuNTEyLC0xLjEyNyAyLjUxMiwtMi41MTQgViAyLjUxNCBDIDkwLjQ1MywxLjEyNyA4OS4zMjgsMCA4Ny45NDIsMCBaIgogICAgIGlkPSJwYXRoNiIgLz4KICA8cGF0aAogICAgIGQ9Im0gMjMuMzc3LDUuMDI0IGggMTUuNDIyIGMgMS4zODksMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTEyIEMgNDEuMzEzLDEuMTI1IDQwLjE4OCwwIDM4Ljc5OSwwIEggMjMuMzc3IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIHoiCiAgICAgaWQ9InBhdGg3IiAvPgogIDxwYXRoCiAgICAgZD0ibSA1MS42NTMsNS4wMjQgaCAxNS40MjQgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTIgQyA2OS41OTEsMS4xMjUgNjguNDY2LDAgNjcuMDc3LDAgSCA1MS42NTMgYyAtMS4zODcsMCAtMi41MTIsMS4xMjUgLTIuNTEyLDIuNTEyIDAsMS4zODcgMS4xMjUsMi41MTIgMi41MTIsMi41MTIgeiIKICAgICBpZD0icGF0aDgiIC8+CiAgPHBhdGgKICAgICBkPSJtIDIuNTEyLDEzLjAzMyBjIDEuMzg5LDAgMi41MTQsLTEuMTI1IDIuNTE0LC0yLjUxNCBWIDUuMDI0IGggNS40OTggYyAxLjM4NywwIDIuNTEyLC0xLjEyNSAyLjUxMiwtMi41MTIgQyAxMy4wMzYsMS4xMjUgMTEuOTExLDAgMTAuNTI0LDAgSCAyLjUxMiBDIDEuMTI1LDAgMCwxLjEyNSAwLDIuNTEyIHYgOC4wMDggYyAwLDEuMzg4IDEuMTI1LDIuNTEzIDIuNTEyLDIuNTEzIHoiCiAgICAgaWQ9InBhdGg5IiAvPgogIDxwYXRoCiAgICAgZD0ibSAyLjUxMiw0MS4zMTEgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTIgViAyMy4zNzUgQyA1LjAyNiwyMS45ODggMy45MDEsMjAuODYzIDIuNTEyLDIwLjg2MyAxLjEyNSwyMC44NjMgMCwyMS45ODggMCwyMy4zNzUgdiAxNS40MjQgYyAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTEyLDIuNTEyIHoiCiAgICAgaWQ9InBhdGgxMCIgLz4KPC9zdmc+Cg=="},5721:F=>{"use strict";F.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4xIgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDkwLjE2OTk5OCA5MC4xNzE5OTciCiAgIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDkxIDkxIgogICBpZD0ic3ZnMTIiCiAgIHdpZHRoPSI5MC4xNjk5OTgiCiAgIGhlaWdodD0iOTAuMTcxOTk3IgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxwYXRoCiAgICAgZD0ibSA0NS44MzIsMTguMDM5IGMgLTEuMzg4LDAgLTIuNTEzLDEuMTI1IC0yLjUxMywyLjUxMiBWIDQ1LjY0IGMgMCwxLjM5IDEuMTI1LDIuNTE1IDIuNTEzLDIuNTE1IGggMjUuMDg5IGMgMS4zODksMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE1IDAsLTEuMzg2IC0xLjEyMywtMi41MTEgLTIuNTEyLC0yLjUxMSBIIDUxLjg5NCBMIDc5LjM4NiwxNS42MzUgYyAwLjk4MiwtMC45OCAwLjk4MiwtMi41NyAwLC0zLjU1MyAtMC45OCwtMC45OCAtMi41NzIsLTAuOTggLTMuNTUzLDAgTCA0OC4zNDMsMzkuNTc2IFYgMjAuNTUxIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTEsLTIuNTEyIHoiCiAgICAgaWQ9InBhdGgxIiAvPgogIDxwYXRoCiAgICAgZD0ibSAyLjUxMiw5MC4xNzEgaCAwLjAwMiA3Ljk4MiAxMi44MDggMTUuMzcyIDEuMTgyIGMgMS4zODgsMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTE0IHYgLTM3LjM1IGMgMCwtMS4zODcgLTEuMTI2LC0yLjUxMiAtMi41MTQsLTIuNTEyIEggMi41MTQgYyAtMS4zODksMCAtMi41MTMsMS4xMjUgLTIuNTEzLDIuNTEyIHYgMS4xNyBDIDAuMDAxLDUxLjQ4MSAwLDUxLjQ4NyAwLDUxLjQ5MSB2IDE1LjM3MyBjIDAsMC4wMDYgMC4wMDEsMC4wMSAwLjAwMSwwLjAxNiBWIDc5LjY2MSBDIDAuMDAxLDc5LjY2NSAwLDc5LjY3MSAwLDc5LjY3NSB2IDcuOTgyIGMgMCwxLjM4OSAxLjEyNCwyLjUxNCAyLjUxMiwyLjUxNCB6IE0gNS4wMjYsNTIuODE5IEggMzcuMzQ1IFYgODUuMTQ1IEggMjMuMzA0IDEwLjQ5NyA1LjAyNiBaIgogICAgIGlkPSJwYXRoMiIgLz4KICA8cGF0aAogICAgIGQ9Im0gNTEuNDg3LDg1LjE0NSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4OSAxLjEyNSwyLjUxNCAyLjUxNCwyLjUxNCBIIDY2Ljg2IGMgMS4zODcsMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE0IDAsLTEuMzg3IC0xLjEyNSwtMi41MTIgLTIuNTEyLC0yLjUxMiB6IgogICAgIGlkPSJwYXRoMyIgLz4KICA8cGF0aAogICAgIGQ9Im0gODcuNjU3LDc3LjE2MyBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgdiA1LjQ3MSBoIC01LjQ2OSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4OSAxLjEyNSwyLjUxNCAyLjUxNCwyLjUxNCBoIDcuOTgzIGMgMS4zODcsMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE0IHYgLTcuOTgyIGMgMCwtMS4zODggLTEuMTI1LC0yLjUxMyAtMi41MTIsLTIuNTEzIHoiCiAgICAgaWQ9InBhdGg0IiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny42NTcsNDguOTc5IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiB2IDE1LjM3MyBjIDAsMS4zODcgMS4xMjUsMi41MTQgMi41MTQsMi41MTQgMS4zODcsMCAyLjUxMiwtMS4xMjcgMi41MTIsLTIuNTE0IFYgNTEuNDkxIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTIsLTIuNTEyIHoiCiAgICAgaWQ9InBhdGg1IiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny42NTcsMjAuNzk1IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiBWIDM4LjY4IGMgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiAxLjM4NywwIDIuNTEyLC0xLjEyNSAyLjUxMiwtMi41MTIgViAyMy4zMDcgYyAwLC0xLjM4NyAtMS4xMjUsLTIuNTEyIC0yLjUxMiwtMi41MTIgeiIKICAgICBpZD0icGF0aDYiIC8+CiAgPHBhdGgKICAgICBkPSJtIDg3LjY1NywwLjAwMiBoIC03Ljk4MiBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiBoIDUuNDY5IHYgNS40NzEgYyAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIDEuMzg3LDAgMi41MTIsLTEuMTI1IDIuNTEyLC0yLjUxMiBWIDIuNTE0IEMgOTAuMTY5LDEuMTI3IDg5LjA0NCwwLjAwMiA4Ny42NTcsMC4wMDIgWiIKICAgICBpZD0icGF0aDciIC8+CiAgPHBhdGgKICAgICBkPSJtIDM4LjY3OCw1LjAyNCBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBDIDQxLjE5MSwxLjEyNSA0MC4wNjcsMCAzOC42NzgsMCBIIDIzLjMwNSBjIC0xLjM4NywwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxMiwyLjUxMiB6IgogICAgIGlkPSJwYXRoOCIgLz4KICA8cGF0aAogICAgIGQ9Im0gNjYuODYsNS4wMjQgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTIgQyA2OS4zNzQsMS4xMjUgNjguMjQ5LDAgNjYuODYsMCBIIDUxLjQ4OSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiB6IgogICAgIGlkPSJwYXRoOSIgLz4KICA8cGF0aAogICAgIGQ9Im0gMi41MTIsMTMuMDA2IGMgMS4zODksMCAyLjUxMywtMS4xMjUgMi41MTMsLTIuNTEyIHYgLTUuNDcgaCA1LjQ2OCBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBDIDEzLjAwNiwxLjEyNSAxMS44ODIsMCAxMC40OTMsMCBIIDIuNTEzIEMgMS4xMjUsMCAxMGUtNCwxLjEyNSAxMGUtNCwyLjUxMiB2IDcuOTgyIEMgMCwxMS44ODEgMS4xMjQsMTMuMDA2IDIuNTEyLDEzLjAwNiBaIgogICAgIGlkPSJwYXRoMTAiIC8+CiAgPHBhdGgKICAgICBkPSJtIDIuNTEyLDQxLjE5MiBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBWIDIzLjMwNyBDIDUuMDI1LDIxLjkyIDMuOTAxLDIwLjc5NSAyLjUxMiwyMC43OTUgMS4xMjQsMjAuNzk1IDAsMjEuOTIgMCwyMy4zMDcgViAzOC42OCBjIDAsMS4zODcgMS4xMjQsMi41MTIgMi41MTIsMi41MTIgeiIKICAgICBpZD0icGF0aDExIiAvPgo8L3N2Zz4K"},587:()=>{
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */
!function(){"use strict";function t(F,Da,ll,cl){return new(ll||(ll=Promise))((function(hl,dl){function o(F){try{l(cl.next(F))}catch(F){dl(F)}}function a(F){try{l(cl.throw(F))}catch(F){dl(F)}}function l(F){var Da;F.done?hl(F.value):(Da=F.value,Da instanceof ll?Da:new ll((function(F){F(Da)}))).then(o,a)}l((cl=cl.apply(F,Da||[])).next())}))}function e(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}"function"==typeof SuppressedError&&SuppressedError;var F=n;function n(F,Da){this.x=F,this.y=Da}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(F){return this.clone()._add(F)},sub:function(F){return this.clone()._sub(F)},multByPoint:function(F){return this.clone()._multByPoint(F)},divByPoint:function(F){return this.clone()._divByPoint(F)},mult:function(F){return this.clone()._mult(F)},div:function(F){return this.clone()._div(F)},rotate:function(F){return this.clone()._rotate(F)},rotateAround:function(F,Da){return this.clone()._rotateAround(F,Da)},matMult:function(F){return this.clone()._matMult(F)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(F){return this.x===F.x&&this.y===F.y},dist:function(F){return Math.sqrt(this.distSqr(F))},distSqr:function(F){var Da=F.x-this.x,ll=F.y-this.y;return Da*Da+ll*ll},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(F){return Math.atan2(this.y-F.y,this.x-F.x)},angleWith:function(F){return this.angleWithSep(F.x,F.y)},angleWithSep:function(F,Da){return Math.atan2(this.x*Da-this.y*F,this.x*F+this.y*Da)},_matMult:function(F){var Da=F[2]*this.x+F[3]*this.y;return this.x=F[0]*this.x+F[1]*this.y,this.y=Da,this},_add:function(F){return this.x+=F.x,this.y+=F.y,this},_sub:function(F){return this.x-=F.x,this.y-=F.y,this},_mult:function(F){return this.x*=F,this.y*=F,this},_div:function(F){return this.x/=F,this.y/=F,this},_multByPoint:function(F){return this.x*=F.x,this.y*=F.y,this},_divByPoint:function(F){return this.x/=F.x,this.y/=F.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var F=this.y;return this.y=this.x,this.x=-F,this},_rotate:function(F){var Da=Math.cos(F),ll=Math.sin(F),cl=ll*this.x+Da*this.y;return this.x=Da*this.x-ll*this.y,this.y=cl,this},_rotateAround:function(F,Da){var ll=Math.cos(F),cl=Math.sin(F),hl=Da.y+cl*(this.x-Da.x)+ll*(this.y-Da.y);return this.x=Da.x+ll*(this.x-Da.x)-cl*(this.y-Da.y),this.y=hl,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(F){return F instanceof n?F:Array.isArray(F)?new n(F[0],F[1]):F};var Da=e(F),ll=o;function o(F,Da,ll,cl){this.cx=3*F,this.bx=3*(ll-F)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Da,this.by=3*(cl-Da)-this.cy,this.ay=1-this.cy-this.by,this.p1x=F,this.p1y=Da,this.p2x=ll,this.p2y=cl}let cl,hl;function u(F,Da,ll){return Math.min(ll,Math.max(Da,F))}function c(F){for(var Da=arguments.length,ll=new Array(Da>1?Da-1:0),cl=1;cl<Da;cl++)ll[cl-1]=arguments[cl];for(const hl of ll)for(const Da in hl)F[Da]=hl[Da];return F}function h(F,Da,ll){const cl={};for(const hl in F)cl[hl]=Da.call(this,F[hl],hl,F);return cl}function p(F){return Array.isArray(F)?F.map(p):"object"==typeof F&&F?h(F,p):F}o.prototype={sampleCurveX:function(F){return((this.ax*F+this.bx)*F+this.cx)*F},sampleCurveY:function(F){return((this.ay*F+this.by)*F+this.cy)*F},sampleCurveDerivativeX:function(F){return(3*this.ax*F+2*this.bx)*F+this.cx},solveCurveX:function(F,Da){if(void 0===Da&&(Da=1e-6),F<0)return 0;if(F>1)return 1;for(var ll=F,cl=0;cl<8;cl++){var hl=this.sampleCurveX(ll)-F;if(Math.abs(hl)<Da)return ll;var dl=this.sampleCurveDerivativeX(ll);if(Math.abs(dl)<1e-6)break;ll-=hl/dl}var pl=0,fl=1;for(ll=F,cl=0;cl<20&&(hl=this.sampleCurveX(ll),!(Math.abs(hl-F)<Da));cl++)F>hl?pl=ll:fl=ll,ll=.5*(fl-pl)+pl;return ll},solve:function(F,Da){return this.sampleCurveY(this.solveCurveX(F,Da))}},new(e(ll))(.25,.1,.25,1);const dl={};function d(F){dl[F]||("undefined"!=typeof console&&console.warn(F),dl[F]=!0)}function y(F,Da,ll){return(ll.y-F.y)*(Da.x-F.x)>(Da.y-F.y)*(ll.x-F.x)}function m(F){return"undefined"!=typeof WorkerGlobalScope&&void 0!==F&&F instanceof WorkerGlobalScope}function g(F){return"undefined"!=typeof ImageBitmap&&F instanceof ImageBitmap}let pl,fl;class b{constructor(F,Da,ll){const cl=this.cells=[];if(F instanceof ArrayBuffer){this.arrayBuffer=F;const hl=new Int32Array(this.arrayBuffer);F=hl[0],this.d=(Da=hl[1])+2*(ll=hl[2]);for(let F=0;F<this.d*this.d;F++){const Da=hl[3+F],ll=hl[3+F+1];cl.push(Da===ll?null:hl.subarray(Da,ll))}const dl=hl[3+cl.length+1];this.keys=hl.subarray(hl[3+cl.length],dl),this.bboxes=hl.subarray(dl),this.insert=this._insertReadonly}else{this.d=Da+2*ll;for(let F=0;F<this.d*this.d;F++)cl.push([]);this.keys=[],this.bboxes=[]}this.n=Da,this.extent=F,this.padding=ll,this.scale=Da/F,this.uid=0;const hl=ll/Da*F;this.min=-hl,this.max=F+hl}insert(F,Da,ll,cl,hl){this._forEachCell(Da,ll,cl,hl,this._insertCell,this.uid++,void 0,void 0),this.keys.push(F),this.bboxes.push(Da),this.bboxes.push(ll),this.bboxes.push(cl),this.bboxes.push(hl)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(F,Da,ll,cl,hl,dl){this.cells[hl].push(dl)}query(F,Da,ll,cl,hl){const dl=this.min,pl=this.max;if(F<=dl&&Da<=dl&&pl<=ll&&pl<=cl&&!hl)return Array.prototype.slice.call(this.keys);{const dl=[];return this._forEachCell(F,Da,ll,cl,this._queryCell,dl,{},hl),dl}}_queryCell(F,Da,ll,cl,hl,dl,pl,fl){const Al=this.cells[hl];if(null!==Al){const hl=this.keys,bl=this.bboxes;for(let kl=0;kl<Al.length;kl++){const Dl=Al[kl];if(void 0===pl[Dl]){const Al=4*Dl;(fl?fl(bl[Al+0],bl[Al+1],bl[Al+2],bl[Al+3]):F<=bl[Al+2]&&Da<=bl[Al+3]&&ll>=bl[Al+0]&&cl>=bl[Al+1])?(pl[Dl]=!0,dl.push(hl[Dl])):pl[Dl]=!1}}}}_forEachCell(F,Da,ll,cl,hl,dl,pl,fl){const Al=this._convertToCellCoord(F),bl=this._convertToCellCoord(Da),kl=this._convertToCellCoord(ll),Dl=this._convertToCellCoord(cl);for(let Wl=Al;Wl<=kl;Wl++)for(let Al=bl;Al<=Dl;Al++){const bl=this.d*Al+Wl;if((!fl||fl(this._convertFromCellCoord(Wl),this._convertFromCellCoord(Al),this._convertFromCellCoord(Wl+1),this._convertFromCellCoord(Al+1)))&&hl.call(this,F,Da,ll,cl,bl,dl,pl,fl))return}}_convertFromCellCoord(F){return(F-this.padding)/this.scale}_convertToCellCoord(F){return Math.max(0,Math.min(this.d-1,Math.floor(F*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const F=this.cells,Da=3+this.cells.length+1+1;let ll=0;for(let dl=0;dl<this.cells.length;dl++)ll+=this.cells[dl].length;const cl=new Int32Array(Da+ll+this.keys.length+this.bboxes.length);cl[0]=this.extent,cl[1]=this.n,cl[2]=this.padding;let hl=Da;for(let dl=0;dl<F.length;dl++){const Da=F[dl];cl[3+dl]=hl,cl.set(Da,hl),hl+=Da.length}return cl[3+F.length]=hl,cl.set(this.keys,hl),hl+=this.keys.length,cl[3+F.length+1]=hl,cl.set(this.bboxes,hl),hl+=this.bboxes.length,cl.buffer}static serialize(F,Da){const ll=F.toArrayBuffer();return Da&&Da.push(ll),{buffer:ll}}static deserialize(F){return new b(F.buffer)}}var Al={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const bl=["type","source","source-layer","minzoom","maxzoom","filter","layout"];class S{constructor(F,Da,ll,cl){this.message=(F?`${F}: `:"")+ll,cl&&(this.identifier=cl),null!=Da&&Da.__line__&&(this.line=Da.__line__)}}function k(F){for(var Da=arguments.length,ll=new Array(Da>1?Da-1:0),cl=1;cl<Da;cl++)ll[cl-1]=arguments[cl];for(const hl of ll)for(const Da in hl)F[Da]=hl[Da];return F}class A extends Error{constructor(F,Da){super(Da),this.message=Da,this.key=F}}class I{constructor(F,Da){void 0===Da&&(Da=[]),this.parent=F,this.bindings={};for(const[ll,cl]of Da)this.bindings[ll]=cl}concat(F){return new I(this,F)}get(F){if(this.bindings[F])return this.bindings[F];if(this.parent)return this.parent.get(F);throw new Error(`${F} not found in scope.`)}has(F){return!!this.bindings[F]||!!this.parent&&this.parent.has(F)}}const kl={kind:"null"},Dl={kind:"number"},Wl={kind:"string"},Ql={kind:"boolean"},wc={kind:"color"},Sc={kind:"object"},eu={kind:"value"},iu={kind:"collator"},su={kind:"formatted"},cu={kind:"padding"},uu={kind:"resolvedImage"},hu={kind:"variableAnchorOffsetCollection"};function O(F,Da){return{kind:"array",itemType:F,N:Da}}function R(F){if("array"===F.kind){const Da=R(F.itemType);return"number"==typeof F.N?`array<${Da}, ${F.N}>`:"value"===F.itemType.kind?"array":`array<${Da}>`}return F.kind}const Lu=[kl,Dl,Wl,Ql,wc,su,Sc,O(eu),cu,uu,hu];function q(F,Da){if("error"===Da.kind)return null;if("array"===F.kind){if("array"===Da.kind&&(0===Da.N&&"value"===Da.itemType.kind||!q(F.itemType,Da.itemType))&&("number"!=typeof F.N||F.N===Da.N))return null}else{if(F.kind===Da.kind)return null;if("value"===F.kind)for(const F of Lu)if(!q(F,Da))return null}return`Expected ${R(F)} but found ${R(Da)} instead.`}function U(F,Da){return Da.some((Da=>Da.kind===F.kind))}function N(F,Da){return Da.some((Da=>"null"===Da?null===F:"array"===Da?Array.isArray(F):"object"===Da?F&&!Array.isArray(F)&&"object"==typeof F:Da===typeof F))}function Z(F,Da){return"array"===F.kind&&"array"===Da.kind?F.itemType.kind===Da.itemType.kind&&"number"==typeof F.N:F.kind===Da.kind}const zu=.96422,Du=.82521,Nu=4/29,qu=6/29,ih=3*qu*qu,gh=qu*qu*qu,ed=Math.PI/180,td=180/Math.PI;function tt(F){return(F%=360)<0&&(F+=360),F}function et(F){let Da,ll,[cl,hl,dl,pl]=F;const fl=nt((.2225045*(cl=rt(cl))+.7168786*(hl=rt(hl))+.0606169*(dl=rt(dl)))/1);cl===hl&&hl===dl?Da=ll=fl:(Da=nt((.4360747*cl+.3850649*hl+.1430804*dl)/zu),ll=nt((.0139322*cl+.0971045*hl+.7141733*dl)/Du));const Al=116*fl-16;return[Al<0?0:Al,500*(Da-fl),200*(fl-ll),pl]}function rt(F){return F<=.04045?F/12.92:Math.pow((F+.055)/1.055,2.4)}function nt(F){return F>gh?Math.pow(F,1/3):F/ih+Nu}function it(F){let[Da,ll,cl,hl]=F,dl=(Da+16)/116,pl=isNaN(ll)?dl:dl+ll/500,fl=isNaN(cl)?dl:dl-cl/200;return dl=1*ot(dl),pl=zu*ot(pl),fl=Du*ot(fl),[st(3.1338561*pl-1.6168667*dl-.4906146*fl),st(-.9787684*pl+1.9161415*dl+.033454*fl),st(.0719453*pl-.2289914*dl+1.4052427*fl),hl]}function st(F){return(F=F<=.00304?12.92*F:1.055*Math.pow(F,1/2.4)-.055)<0?0:F>1?1:F}function ot(F){return F>qu?F*F*F:ih*(F-Nu)}function at(F){return parseInt(F.padEnd(2,F),16)/255}function lt(F,Da){return ut(Da?F/100:F,0,1)}function ut(F,Da,ll){return Math.min(Math.max(Da,F),ll)}function ct(F){return!F.some(Number.isNaN)}const id={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class pt{constructor(F,Da,ll,cl,hl){void 0===cl&&(cl=1),void 0===hl&&(hl=!0),this.r=F,this.g=Da,this.b=ll,this.a=cl,hl||(this.r*=cl,this.g*=cl,this.b*=cl,cl||this.overwriteGetter("rgb",[F,Da,ll,cl]))}static parse(F){if(F instanceof pt)return F;if("string"!=typeof F)return;const Da=function(F){if("transparent"===(F=F.toLowerCase().trim()))return[0,0,0,0];const Da=id[F];if(Da){const[F,ll,cl]=Da;return[F/255,ll/255,cl/255,1]}if(F.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(F)){const Da=F.length<6?1:2;let ll=1;return[at(F.slice(ll,ll+=Da)),at(F.slice(ll,ll+=Da)),at(F.slice(ll,ll+=Da)),at(F.slice(ll,ll+Da)||"ff")]}if(F.startsWith("rgb")){const Da=F.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(Da){const[F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl]=Da,Ql=[hl||" ",fl||" ",kl].join("");if("  "===Ql||"  /"===Ql||",,"===Ql||",,,"===Ql){const F=[cl,pl,bl].join(""),Da="%%%"===F?100:""===F?255:0;if(Da){const F=[ut(+ll/Da,0,1),ut(+dl/Da,0,1),ut(+Al/Da,0,1),Dl?lt(+Dl,Wl):1];if(ct(F))return F}}return}}const ll=F.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ll){const[F,Da,cl,hl,dl,pl,fl,Al,bl]=ll,kl=[cl||" ",dl||" ",fl].join("");if("  "===kl||"  /"===kl||",,"===kl||",,,"===kl){const F=[+Da,ut(+hl,0,100),ut(+pl,0,100),Al?lt(+Al,bl):1];if(ct(F))return function(F){let[Da,ll,cl,hl]=F;function i(F){const hl=(F+Da/30)%12,dl=ll*Math.min(cl,1-cl);return cl-dl*Math.max(-1,Math.min(hl-3,9-hl,1))}return Da=tt(Da),ll/=100,cl/=100,[i(0),i(8),i(4),hl]}(F)}}}(F);return Da?new pt(...Da,!1):void 0}get rgb(){const{r:F,g:Da,b:ll,a:cl}=this,hl=cl||1/0;return this.overwriteGetter("rgb",[F/hl,Da/hl,ll/hl,cl])}get hcl(){return this.overwriteGetter("hcl",function(F){const[Da,ll,cl,hl]=et(F),dl=Math.sqrt(ll*ll+cl*cl);return[Math.round(1e4*dl)?tt(Math.atan2(cl,ll)*td):NaN,dl,Da,hl]}(this.rgb))}get lab(){return this.overwriteGetter("lab",et(this.rgb))}overwriteGetter(F,Da){return Object.defineProperty(this,F,{value:Da}),Da}toString(){const[F,Da,ll,cl]=this.rgb;return`rgba(${[F,Da,ll].map((F=>Math.round(255*F))).join(",")},${cl})`}}pt.black=new pt(0,0,0,1),pt.white=new pt(1,1,1,1),pt.transparent=new pt(0,0,0,0),pt.red=new pt(1,0,0,1);class ft{constructor(F,Da,ll){this.sensitivity=F?Da?"variant":"case":Da?"accent":"base",this.locale=ll,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(F,Da){return this.collator.compare(F,Da)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dt{constructor(F,Da,ll,cl,hl){this.text=F,this.image=Da,this.scale=ll,this.fontStack=cl,this.textColor=hl}}class yt{constructor(F){this.sections=F}static fromString(F){return new yt([new dt(F,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((F=>0!==F.text.length||F.image&&0!==F.image.name.length))}static factory(F){return F instanceof yt?F:yt.fromString(F)}toString(){return 0===this.sections.length?"":this.sections.map((F=>F.text)).join("")}}class mt{constructor(F){this.values=F.slice()}static parse(F){if(F instanceof mt)return F;if("number"==typeof F)return new mt([F,F,F,F]);if(Array.isArray(F)&&!(F.length<1||F.length>4)){for(const Da of F)if("number"!=typeof Da)return;switch(F.length){case 1:F=[F[0],F[0],F[0],F[0]];break;case 2:F=[F[0],F[1],F[0],F[1]];break;case 3:F=[F[0],F[1],F[2],F[1]]}return new mt(F)}}toString(){return JSON.stringify(this.values)}}const nd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xt{constructor(F){this.values=F.slice()}static parse(F){if(F instanceof xt)return F;if(Array.isArray(F)&&!(F.length<1)&&F.length%2==0){for(let Da=0;Da<F.length;Da+=2){const ll=F[Da],cl=F[Da+1];if("string"!=typeof ll||!nd.has(ll))return;if(!Array.isArray(cl)||2!==cl.length||"number"!=typeof cl[0]||"number"!=typeof cl[1])return}return new xt(F)}}toString(){return JSON.stringify(this.values)}}class vt{constructor(F){this.name=F.name,this.available=F.available}toString(){return this.name}static fromString(F){return F?new vt({name:F,available:!1}):null}}function bt(F,Da,ll,cl){return"number"==typeof F&&F>=0&&F<=255&&"number"==typeof Da&&Da>=0&&Da<=255&&"number"==typeof ll&&ll>=0&&ll<=255?void 0===cl||"number"==typeof cl&&cl>=0&&cl<=1?null:`Invalid rgba value [${[F,Da,ll,cl].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof cl?[F,Da,ll,cl]:[F,Da,ll]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wt(F){if(null===F||"string"==typeof F||"boolean"==typeof F||"number"==typeof F||F instanceof pt||F instanceof ft||F instanceof yt||F instanceof mt||F instanceof xt||F instanceof vt)return!0;if(Array.isArray(F)){for(const Da of F)if(!wt(Da))return!1;return!0}if("object"==typeof F){for(const Da in F)if(!wt(F[Da]))return!1;return!0}return!1}function _t(F){if(null===F)return kl;if("string"==typeof F)return Wl;if("boolean"==typeof F)return Ql;if("number"==typeof F)return Dl;if(F instanceof pt)return wc;if(F instanceof ft)return iu;if(F instanceof yt)return su;if(F instanceof mt)return cu;if(F instanceof xt)return hu;if(F instanceof vt)return uu;if(Array.isArray(F)){const Da=F.length;let ll;for(const cl of F){const F=_t(cl);if(ll){if(ll===F)continue;ll=eu;break}ll=F}return O(ll||eu,Da)}return Sc}function St(F){const Da=typeof F;return null===F?"":"string"===Da||"number"===Da||"boolean"===Da?String(F):F instanceof pt||F instanceof yt||F instanceof mt||F instanceof xt||F instanceof vt?F.toString():JSON.stringify(F)}class kt{constructor(F,Da){this.type=F,this.value=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'literal' expression requires exactly one argument, but found ${F.length-1} instead.`);if(!wt(F[1]))return Da.error("invalid value");const ll=F[1];let cl=_t(ll);const hl=Da.expectedType;return"array"!==cl.kind||0!==cl.N||!hl||"array"!==hl.kind||"number"==typeof hl.N&&0!==hl.N||(cl=hl),new kt(cl,ll)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class At{constructor(F){this.name="ExpressionEvaluationError",this.message=F}toJSON(){return this.message}}const rd={string:Wl,number:Dl,boolean:Ql,object:Sc};class Mt{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");let ll,cl=1;const hl=F[0];if("array"===hl){let hl,dl;if(F.length>2){const ll=F[1];if("string"!=typeof ll||!(ll in rd)||"object"===ll)return Da.error('The item type argument of "array" must be one of string, number, boolean',1);hl=rd[ll],cl++}else hl=eu;if(F.length>3){if(null!==F[2]&&("number"!=typeof F[2]||F[2]<0||F[2]!==Math.floor(F[2])))return Da.error('The length argument to "array" must be a positive integer literal',2);dl=F[2],cl++}ll=O(hl,dl)}else{if(!rd[hl])throw new Error(`Types doesn't contain name = ${hl}`);ll=rd[hl]}const dl=[];for(;cl<F.length;cl++){const ll=Da.parse(F[cl],cl,eu);if(!ll)return null;dl.push(ll)}return new Mt(ll,dl)}evaluate(F){for(let Da=0;Da<this.args.length;Da++){const ll=this.args[Da].evaluate(F);if(!q(this.type,_t(ll)))return ll;if(Da===this.args.length-1)throw new At(`Expected value to be of type ${R(this.type)}, but found ${R(_t(ll))} instead.`)}throw new Error}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}const ad={"to-boolean":Ql,"to-color":wc,"to-number":Dl,"to-string":Wl};class Pt{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");const ll=F[0];if(!ad[ll])throw new Error(`Can't parse ${ll} as it is not part of the known types`);if(("to-boolean"===ll||"to-string"===ll)&&2!==F.length)return Da.error("Expected one argument.");const cl=ad[ll],hl=[];for(let dl=1;dl<F.length;dl++){const ll=Da.parse(F[dl],dl,eu);if(!ll)return null;hl.push(ll)}return new Pt(cl,hl)}evaluate(F){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(F));case"color":{let Da,ll;for(const cl of this.args){if(Da=cl.evaluate(F),ll=null,Da instanceof pt)return Da;if("string"==typeof Da){const ll=F.parseColor(Da);if(ll)return ll}else if(Array.isArray(Da)&&(ll=Da.length<3||Da.length>4?`Invalid rbga value ${JSON.stringify(Da)}: expected an array containing either three or four numeric values.`:bt(Da[0],Da[1],Da[2],Da[3]),!ll))return new pt(Da[0]/255,Da[1]/255,Da[2]/255,Da[3])}throw new At(ll||`Could not parse color from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"padding":{let Da;for(const ll of this.args){Da=ll.evaluate(F);const cl=mt.parse(Da);if(cl)return cl}throw new At(`Could not parse padding from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"variableAnchorOffsetCollection":{let Da;for(const ll of this.args){Da=ll.evaluate(F);const cl=xt.parse(Da);if(cl)return cl}throw new At(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"number":{let Da=null;for(const ll of this.args){if(Da=ll.evaluate(F),null===Da)return 0;const cl=Number(Da);if(!isNaN(cl))return cl}throw new At(`Could not convert ${JSON.stringify(Da)} to number.`)}case"formatted":return yt.fromString(St(this.args[0].evaluate(F)));case"resolvedImage":return vt.fromString(St(this.args[0].evaluate(F)));default:return St(this.args[0].evaluate(F))}}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}const sd=["Unknown","Point","LineString","Polygon"];class Bt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?sd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(F){let Da=this._parseColorCache[F];return Da||(Da=this._parseColorCache[F]=pt.parse(F)),Da}}class Vt{constructor(F,Da,ll,cl,hl,dl){void 0===ll&&(ll=[]),void 0===hl&&(hl=new I),void 0===dl&&(dl=[]),this.registry=F,this.path=ll,this.key=ll.map((F=>`[${F}]`)).join(""),this.scope=hl,this.errors=dl,this.expectedType=cl,this._isConstant=Da}parse(F,Da,ll,cl,hl){return void 0===hl&&(hl={}),Da?this.concat(Da,ll,cl)._parse(F,hl):this._parse(F,hl)}_parse(F,Da){function r(F,Da,ll){return"assert"===ll?new Mt(Da,[F]):"coerce"===ll?new Pt(Da,[F]):F}if(null!==F&&"string"!=typeof F&&"boolean"!=typeof F&&"number"!=typeof F||(F=["literal",F]),Array.isArray(F)){if(0===F.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ll=F[0];if("string"!=typeof ll)return this.error(`Expression name must be a string, but found ${typeof ll} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const cl=this.registry[ll];if(cl){let ll=cl.parse(F,this);if(!ll)return null;if(this.expectedType){const F=this.expectedType,cl=ll.type;if("string"!==F.kind&&"number"!==F.kind&&"boolean"!==F.kind&&"object"!==F.kind&&"array"!==F.kind||"value"!==cl.kind)if("color"!==F.kind&&"formatted"!==F.kind&&"resolvedImage"!==F.kind||"value"!==cl.kind&&"string"!==cl.kind)if("padding"!==F.kind||"value"!==cl.kind&&"number"!==cl.kind&&"array"!==cl.kind)if("variableAnchorOffsetCollection"!==F.kind||"value"!==cl.kind&&"array"!==cl.kind){if(this.checkSubtype(F,cl))return null}else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"assert")}if(!(ll instanceof kt)&&"resolvedImage"!==ll.type.kind&&this._isConstant(ll)){const Da=new Bt;try{ll=new kt(ll.type,ll.evaluate(Da))}catch(F){return this.error(F.message),null}}return ll}return this.error(`Unknown expression "${ll}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===F?"'undefined' value invalid. Use null instead.":"object"==typeof F?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof F} instead.`)}concat(F,Da,ll){const cl="number"==typeof F?this.path.concat(F):this.path,hl=ll?this.scope.concat(ll):this.scope;return new Vt(this.registry,this._isConstant,cl,Da||null,hl,this.errors)}error(F){for(var Da=arguments.length,ll=new Array(Da>1?Da-1:0),cl=1;cl<Da;cl++)ll[cl-1]=arguments[cl];const hl=`${this.key}${ll.map((F=>`[${F}]`)).join("")}`;this.errors.push(new A(hl,F))}checkSubtype(F,Da){const ll=q(F,Da);return ll&&this.error(ll),ll}}class Tt{constructor(F,Da){this.type=Da.type,this.bindings=[].concat(F),this.result=Da}evaluate(F){return this.result.evaluate(F)}eachChild(F){for(const Da of this.bindings)F(Da[1]);F(this.result)}static parse(F,Da){if(F.length<4)return Da.error(`Expected at least 3 arguments, but found ${F.length-1} instead.`);const ll=[];for(let hl=1;hl<F.length-1;hl+=2){const cl=F[hl];if("string"!=typeof cl)return Da.error(`Expected string, but found ${typeof cl} instead.`,hl);if(/[^a-zA-Z0-9_]/.test(cl))return Da.error("Variable names must contain only alphanumeric characters or '_'.",hl);const dl=Da.parse(F[hl+1],hl+1);if(!dl)return null;ll.push([cl,dl])}const cl=Da.parse(F[F.length-1],F.length-1,Da.expectedType,ll);return cl?new Tt(ll,cl):null}outputDefined(){return this.result.outputDefined()}}class Et{constructor(F,Da){this.type=Da.type,this.name=F,this.boundExpression=Da}static parse(F,Da){if(2!==F.length||"string"!=typeof F[1])return Da.error("'var' expression requires exactly one string literal argument.");const ll=F[1];return Da.scope.has(ll)?new Et(ll,Da.scope.get(ll)):Da.error(`Unknown variable "${ll}". Make sure "${ll}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(F){return this.boundExpression.evaluate(F)}eachChild(){}outputDefined(){return!1}}class Ft{constructor(F,Da,ll){this.type=F,this.index=Da,this.input=ll}static parse(F,Da){if(3!==F.length)return Da.error(`Expected 2 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,Dl),cl=Da.parse(F[2],2,O(Da.expectedType||eu));return ll&&cl?new Ft(cl.type.itemType,ll,cl):null}evaluate(F){const Da=this.index.evaluate(F),ll=this.input.evaluate(F);if(Da<0)throw new At(`Array index out of bounds: ${Da} < 0.`);if(Da>=ll.length)throw new At(`Array index out of bounds: ${Da} > ${ll.length-1}.`);if(Da!==Math.floor(Da))throw new At(`Array index must be an integer, but found ${Da} instead.`);return ll[Da]}eachChild(F){F(this.index),F(this.input)}outputDefined(){return!1}}class Dt{constructor(F,Da){this.type=Ql,this.needle=F,this.haystack=Da}static parse(F,Da){if(3!==F.length)return Da.error(`Expected 2 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,eu),cl=Da.parse(F[2],2,eu);return ll&&cl?U(ll.type,[Ql,Wl,Dl,kl,eu])?new Dt(ll,cl):Da.error(`Expected first argument to be of type boolean, string, number or null, but found ${R(ll.type)} instead`):null}evaluate(F){const Da=this.needle.evaluate(F),ll=this.haystack.evaluate(F);if(!ll)return!1;if(!N(Da,["boolean","string","number","null"]))throw new At(`Expected first argument to be of type boolean, string, number or null, but found ${R(_t(Da))} instead.`);if(!N(ll,["string","array"]))throw new At(`Expected second argument to be of type array or string, but found ${R(_t(ll))} instead.`);return ll.indexOf(Da)>=0}eachChild(F){F(this.needle),F(this.haystack)}outputDefined(){return!0}}class $t{constructor(F,Da,ll){this.type=Dl,this.needle=F,this.haystack=Da,this.fromIndex=ll}static parse(F,Da){if(F.length<=2||F.length>=5)return Da.error(`Expected 3 or 4 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,eu),cl=Da.parse(F[2],2,eu);if(!ll||!cl)return null;if(!U(ll.type,[Ql,Wl,Dl,kl,eu]))return Da.error(`Expected first argument to be of type boolean, string, number or null, but found ${R(ll.type)} instead`);if(4===F.length){const hl=Da.parse(F[3],3,Dl);return hl?new $t(ll,cl,hl):null}return new $t(ll,cl)}evaluate(F){const Da=this.needle.evaluate(F),ll=this.haystack.evaluate(F);if(!N(Da,["boolean","string","number","null"]))throw new At(`Expected first argument to be of type boolean, string, number or null, but found ${R(_t(Da))} instead.`);let cl;if(this.fromIndex&&(cl=this.fromIndex.evaluate(F)),N(ll,["string"])){const F=ll.indexOf(Da,cl);return-1===F?-1:[...ll.slice(0,F)].length}if(N(ll,["array"]))return ll.indexOf(Da,cl);throw new At(`Expected second argument to be of type array or string, but found ${R(_t(ll))} instead.`)}eachChild(F){F(this.needle),F(this.haystack),this.fromIndex&&F(this.fromIndex)}outputDefined(){return!1}}class Lt{constructor(F,Da,ll,cl,hl,dl){this.inputType=F,this.type=Da,this.input=ll,this.cases=cl,this.outputs=hl,this.otherwise=dl}static parse(F,Da){if(F.length<5)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if(F.length%2!=1)return Da.error("Expected an even number of arguments.");let ll,cl;Da.expectedType&&"value"!==Da.expectedType.kind&&(cl=Da.expectedType);const hl={},dl=[];for(let Al=2;Al<F.length-1;Al+=2){let pl=F[Al];const fl=F[Al+1];Array.isArray(pl)||(pl=[pl]);const bl=Da.concat(Al);if(0===pl.length)return bl.error("Expected at least one branch label.");for(const F of pl){if("number"!=typeof F&&"string"!=typeof F)return bl.error("Branch labels must be numbers or strings.");if("number"==typeof F&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return bl.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof F&&Math.floor(F)!==F)return bl.error("Numeric branch labels must be integer values.");if(ll){if(bl.checkSubtype(ll,_t(F)))return null}else ll=_t(F);if(void 0!==hl[String(F)])return bl.error("Branch labels must be unique.");hl[String(F)]=dl.length}const kl=Da.parse(fl,Al,cl);if(!kl)return null;cl=cl||kl.type,dl.push(kl)}const pl=Da.parse(F[1],1,eu);if(!pl)return null;const fl=Da.parse(F[F.length-1],F.length-1,cl);return fl?"value"!==pl.type.kind&&Da.concat(1).checkSubtype(ll,pl.type)?null:new Lt(ll,cl,pl,hl,dl,fl):null}evaluate(F){const Da=this.input.evaluate(F);return(_t(Da)===this.inputType&&this.outputs[this.cases[Da]]||this.otherwise).evaluate(F)}eachChild(F){F(this.input),this.outputs.forEach(F),F(this.otherwise)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))&&this.otherwise.outputDefined()}}class Ot{constructor(F,Da,ll){this.type=F,this.branches=Da,this.otherwise=ll}static parse(F,Da){if(F.length<4)return Da.error(`Expected at least 3 arguments, but found only ${F.length-1}.`);if(F.length%2!=0)return Da.error("Expected an odd number of arguments.");let ll;Da.expectedType&&"value"!==Da.expectedType.kind&&(ll=Da.expectedType);const cl=[];for(let dl=1;dl<F.length-1;dl+=2){const hl=Da.parse(F[dl],dl,Ql);if(!hl)return null;const pl=Da.parse(F[dl+1],dl+1,ll);if(!pl)return null;cl.push([hl,pl]),ll=ll||pl.type}const hl=Da.parse(F[F.length-1],F.length-1,ll);if(!hl)return null;if(!ll)throw new Error("Can't infer output type");return new Ot(ll,cl,hl)}evaluate(F){for(const[Da,ll]of this.branches)if(Da.evaluate(F))return ll.evaluate(F);return this.otherwise.evaluate(F)}eachChild(F){for(const[Da,ll]of this.branches)F(Da),F(ll);F(this.otherwise)}outputDefined(){return this.branches.every((F=>{let[Da,ll]=F;return ll.outputDefined()}))&&this.otherwise.outputDefined()}}class Rt{constructor(F,Da,ll,cl){this.type=F,this.input=Da,this.beginIndex=ll,this.endIndex=cl}static parse(F,Da){if(F.length<=2||F.length>=5)return Da.error(`Expected 3 or 4 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,eu),cl=Da.parse(F[2],2,Dl);if(!ll||!cl)return null;if(!U(ll.type,[O(eu),Wl,eu]))return Da.error(`Expected first argument to be of type array or string, but found ${R(ll.type)} instead`);if(4===F.length){const hl=Da.parse(F[3],3,Dl);return hl?new Rt(ll.type,ll,cl,hl):null}return new Rt(ll.type,ll,cl)}evaluate(F){const Da=this.input.evaluate(F),ll=this.beginIndex.evaluate(F);let cl;if(this.endIndex&&(cl=this.endIndex.evaluate(F)),N(Da,["string"]))return[...Da].slice(ll,cl).join("");if(N(Da,["array"]))return Da.slice(ll,cl);throw new At(`Expected first argument to be of type array or string, but found ${R(_t(Da))} instead.`)}eachChild(F){F(this.input),F(this.beginIndex),this.endIndex&&F(this.endIndex)}outputDefined(){return!1}}function jt(F,Da){const ll=F.length-1;let cl,hl,dl=0,pl=ll,fl=0;for(;dl<=pl;)if(fl=Math.floor((dl+pl)/2),cl=F[fl],hl=F[fl+1],cl<=Da){if(fl===ll||Da<hl)return fl;dl=fl+1}else{if(!(cl>Da))throw new At("Input is not a number.");pl=fl-1}return 0}class qt{constructor(F,Da,ll){this.type=F,this.input=Da,this.labels=[],this.outputs=[];for(const[cl,hl]of ll)this.labels.push(cl),this.outputs.push(hl)}static parse(F,Da){if(F.length-1<4)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if((F.length-1)%2!=0)return Da.error("Expected an even number of arguments.");const ll=Da.parse(F[1],1,Dl);if(!ll)return null;const cl=[];let hl=null;Da.expectedType&&"value"!==Da.expectedType.kind&&(hl=Da.expectedType);for(let dl=1;dl<F.length;dl+=2){const ll=1===dl?-1/0:F[dl],pl=F[dl+1],fl=dl,Al=dl+1;if("number"!=typeof ll)return Da.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fl);if(cl.length&&cl[cl.length-1][0]>=ll)return Da.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',fl);const bl=Da.parse(pl,Al,hl);if(!bl)return null;hl=hl||bl.type,cl.push([ll,bl])}return new qt(hl,ll,cl)}evaluate(F){const Da=this.labels,ll=this.outputs;if(1===Da.length)return ll[0].evaluate(F);const cl=this.input.evaluate(F);if(cl<=Da[0])return ll[0].evaluate(F);const hl=Da.length;return cl>=Da[hl-1]?ll[hl-1].evaluate(F):ll[jt(Da,cl)].evaluate(F)}eachChild(F){F(this.input);for(const Da of this.outputs)F(Da)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))}}var od=Zt;function Zt(F,Da,ll,cl){this.cx=3*F,this.bx=3*(ll-F)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Da,this.by=3*(cl-Da)-this.cy,this.ay=1-this.cy-this.by,this.p1x=F,this.p1y=Da,this.p2x=ll,this.p2y=cl}Zt.prototype={sampleCurveX:function(F){return((this.ax*F+this.bx)*F+this.cx)*F},sampleCurveY:function(F){return((this.ay*F+this.by)*F+this.cy)*F},sampleCurveDerivativeX:function(F){return(3*this.ax*F+2*this.bx)*F+this.cx},solveCurveX:function(F,Da){if(void 0===Da&&(Da=1e-6),F<0)return 0;if(F>1)return 1;for(var ll=F,cl=0;cl<8;cl++){var hl=this.sampleCurveX(ll)-F;if(Math.abs(hl)<Da)return ll;var dl=this.sampleCurveDerivativeX(ll);if(Math.abs(dl)<1e-6)break;ll-=hl/dl}var pl=0,fl=1;for(ll=F,cl=0;cl<20&&(hl=this.sampleCurveX(ll),!(Math.abs(hl-F)<Da));cl++)F>hl?pl=ll:fl=ll,ll=.5*(fl-pl)+pl;return ll},solve:function(F,Da){return this.sampleCurveY(this.solveCurveX(F,Da))}};var ld=function(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}(od);function Xt(F,Da,ll){return F+ll*(Da-F)}function Ht(F,Da,ll){return F.map(((F,cl)=>Xt(F,Da[cl],ll)))}const cd={number:Xt,color:function(F,Da,ll,cl){switch(void 0===cl&&(cl="rgb"),cl){case"rgb":{const[cl,hl,dl,pl]=Ht(F.rgb,Da.rgb,ll);return new pt(cl,hl,dl,pl,!1)}case"hcl":{const[cl,hl,dl,pl]=F.hcl,[fl,Al,bl,kl]=Da.hcl;let Dl,Wl;if(isNaN(cl)||isNaN(fl))isNaN(cl)?isNaN(fl)?Dl=NaN:(Dl=fl,1!==dl&&0!==dl||(Wl=Al)):(Dl=cl,1!==bl&&0!==bl||(Wl=hl));else{let F=fl-cl;fl>cl&&F>180?F-=360:fl<cl&&cl-fl>180&&(F+=360),Dl=cl+ll*F}const[Ql,wc,Sc,eu]=function(F){let[Da,ll,cl,hl]=F;return Da=isNaN(Da)?0:Da*ed,it([cl,Math.cos(Da)*ll,Math.sin(Da)*ll,hl])}([Dl,null!=Wl?Wl:Xt(hl,Al,ll),Xt(dl,bl,ll),Xt(pl,kl,ll)]);return new pt(Ql,wc,Sc,eu,!1)}case"lab":{const[cl,hl,dl,pl]=it(Ht(F.lab,Da.lab,ll));return new pt(cl,hl,dl,pl,!1)}}},array:Ht,padding:function(F,Da,ll){return new mt(Ht(F.values,Da.values,ll))},variableAnchorOffsetCollection:function(F,Da,ll){const cl=F.values,hl=Da.values;if(cl.length!==hl.length)throw new At(`Cannot interpolate values of different length. from: ${F.toString()}, to: ${Da.toString()}`);const dl=[];for(let pl=0;pl<cl.length;pl+=2){if(cl[pl]!==hl[pl])throw new At(`Cannot interpolate values containing mismatched anchors. from[${pl}]: ${cl[pl]}, to[${pl}]: ${hl[pl]}`);dl.push(cl[pl]);const[F,Da]=cl[pl+1],[fl,Al]=hl[pl+1];dl.push([Xt(F,fl,ll),Xt(Da,Al,ll)])}return new xt(dl)}};class Jt{constructor(F,Da,ll,cl,hl){this.type=F,this.operator=Da,this.interpolation=ll,this.input=cl,this.labels=[],this.outputs=[];for(const[dl,pl]of hl)this.labels.push(dl),this.outputs.push(pl)}static interpolationFactor(F,Da,ll,cl){let hl=0;if("exponential"===F.name)hl=Kt(Da,F.base,ll,cl);else if("linear"===F.name)hl=Kt(Da,1,ll,cl);else if("cubic-bezier"===F.name){const dl=F.controlPoints;hl=new ld(dl[0],dl[1],dl[2],dl[3]).solve(Kt(Da,1,ll,cl))}return hl}static parse(F,Da){let[ll,cl,hl,...dl]=F;if(!Array.isArray(cl)||0===cl.length)return Da.error("Expected an interpolation type expression.",1);if("linear"===cl[0])cl={name:"linear"};else if("exponential"===cl[0]){const F=cl[1];if("number"!=typeof F)return Da.error("Exponential interpolation requires a numeric base.",1,1);cl={name:"exponential",base:F}}else{if("cubic-bezier"!==cl[0])return Da.error(`Unknown interpolation type ${String(cl[0])}`,1,0);{const F=cl.slice(1);if(4!==F.length||F.some((F=>"number"!=typeof F||F<0||F>1)))return Da.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);cl={name:"cubic-bezier",controlPoints:F}}}if(F.length-1<4)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if((F.length-1)%2!=0)return Da.error("Expected an even number of arguments.");if(hl=Da.parse(hl,2,Dl),!hl)return null;const pl=[];let fl=null;"interpolate-hcl"===ll||"interpolate-lab"===ll?fl=wc:Da.expectedType&&"value"!==Da.expectedType.kind&&(fl=Da.expectedType);for(let Al=0;Al<dl.length;Al+=2){const F=dl[Al],ll=dl[Al+1],cl=Al+3,hl=Al+4;if("number"!=typeof F)return Da.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',cl);if(pl.length&&pl[pl.length-1][0]>=F)return Da.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',cl);const bl=Da.parse(ll,hl,fl);if(!bl)return null;fl=fl||bl.type,pl.push([F,bl])}return Z(fl,Dl)||Z(fl,wc)||Z(fl,cu)||Z(fl,hu)||Z(fl,O(Dl))?new Jt(fl,ll,cl,hl,pl):Da.error(`Type ${R(fl)} is not interpolatable.`)}evaluate(F){const Da=this.labels,ll=this.outputs;if(1===Da.length)return ll[0].evaluate(F);const cl=this.input.evaluate(F);if(cl<=Da[0])return ll[0].evaluate(F);const hl=Da.length;if(cl>=Da[hl-1])return ll[hl-1].evaluate(F);const dl=jt(Da,cl),pl=Jt.interpolationFactor(this.interpolation,cl,Da[dl],Da[dl+1]),fl=ll[dl].evaluate(F),Al=ll[dl+1].evaluate(F);switch(this.operator){case"interpolate":return cd[this.type.kind](fl,Al,pl);case"interpolate-hcl":return cd.color(fl,Al,pl,"hcl");case"interpolate-lab":return cd.color(fl,Al,pl,"lab")}}eachChild(F){F(this.input);for(const Da of this.outputs)F(Da)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))}}function Kt(F,Da,ll,cl){const hl=cl-ll,dl=F-ll;return 0===hl?0:1===Da?dl/hl:(Math.pow(Da,dl)-1)/(Math.pow(Da,hl)-1)}class Wt{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expectected at least one argument.");let ll=null;const cl=Da.expectedType;cl&&"value"!==cl.kind&&(ll=cl);const hl=[];for(const pl of F.slice(1)){const F=Da.parse(pl,1+hl.length,ll,void 0,{typeAnnotation:"omit"});if(!F)return null;ll=ll||F.type,hl.push(F)}if(!ll)throw new Error("No output type");const dl=cl&&hl.some((F=>q(cl,F.type)));return new Wt(dl?eu:ll,hl)}evaluate(F){let Da,ll=null,cl=0;for(const hl of this.args)if(cl++,ll=hl.evaluate(F),ll&&ll instanceof vt&&!ll.available&&(Da||(Da=ll.name),ll=null,cl===this.args.length&&(ll=Da)),null!==ll)break;return ll}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}function Qt(F,Da){return"=="===F||"!="===F?"boolean"===Da.kind||"string"===Da.kind||"number"===Da.kind||"null"===Da.kind||"value"===Da.kind:"string"===Da.kind||"number"===Da.kind||"value"===Da.kind}function te(F,Da,ll,cl){return 0===cl.compare(Da,ll)}function ee(F,Da,ll){const cl="=="!==F&&"!="!==F;return class i{constructor(F,Da,ll){this.type=Ql,this.lhs=F,this.rhs=Da,this.collator=ll,this.hasUntypedArgument="value"===F.type.kind||"value"===Da.type.kind}static parse(F,Da){if(3!==F.length&&4!==F.length)return Da.error("Expected two or three arguments.");const ll=F[0];let hl=Da.parse(F[1],1,eu);if(!hl)return null;if(!Qt(ll,hl.type))return Da.concat(1).error(`"${ll}" comparisons are not supported for type '${R(hl.type)}'.`);let dl=Da.parse(F[2],2,eu);if(!dl)return null;if(!Qt(ll,dl.type))return Da.concat(2).error(`"${ll}" comparisons are not supported for type '${R(dl.type)}'.`);if(hl.type.kind!==dl.type.kind&&"value"!==hl.type.kind&&"value"!==dl.type.kind)return Da.error(`Cannot compare types '${R(hl.type)}' and '${R(dl.type)}'.`);cl&&("value"===hl.type.kind&&"value"!==dl.type.kind?hl=new Mt(dl.type,[hl]):"value"!==hl.type.kind&&"value"===dl.type.kind&&(dl=new Mt(hl.type,[dl])));let pl=null;if(4===F.length){if("string"!==hl.type.kind&&"string"!==dl.type.kind&&"value"!==hl.type.kind&&"value"!==dl.type.kind)return Da.error("Cannot use collator to compare non-string types.");if(pl=Da.parse(F[3],3,iu),!pl)return null}return new i(hl,dl,pl)}evaluate(hl){const dl=this.lhs.evaluate(hl),pl=this.rhs.evaluate(hl);if(cl&&this.hasUntypedArgument){const Da=_t(dl),ll=_t(pl);if(Da.kind!==ll.kind||"string"!==Da.kind&&"number"!==Da.kind)throw new At(`Expected arguments for "${F}" to be (string, string) or (number, number), but found (${Da.kind}, ${ll.kind}) instead.`)}if(this.collator&&!cl&&this.hasUntypedArgument){const F=_t(dl),ll=_t(pl);if("string"!==F.kind||"string"!==ll.kind)return Da(hl,dl,pl)}return this.collator?ll(hl,dl,pl,this.collator.evaluate(hl)):Da(hl,dl,pl)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}}}const ud=ee("==",(function(F,Da,ll){return Da===ll}),te),hd=ee("!=",(function(F,Da,ll){return Da!==ll}),(function(F,Da,ll,cl){return!te(0,Da,ll,cl)})),dd=ee("<",(function(F,Da,ll){return Da<ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)<0})),pd=ee(">",(function(F,Da,ll){return Da>ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)>0})),md=ee("<=",(function(F,Da,ll){return Da<=ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)<=0})),fd=ee(">=",(function(F,Da,ll){return Da>=ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)>=0}));class le{constructor(F,Da,ll){this.type=iu,this.locale=ll,this.caseSensitive=F,this.diacriticSensitive=Da}static parse(F,Da){if(2!==F.length)return Da.error("Expected one argument.");const ll=F[1];if("object"!=typeof ll||Array.isArray(ll))return Da.error("Collator options argument must be an object.");const cl=Da.parse(void 0!==ll["case-sensitive"]&&ll["case-sensitive"],1,Ql);if(!cl)return null;const hl=Da.parse(void 0!==ll["diacritic-sensitive"]&&ll["diacritic-sensitive"],1,Ql);if(!hl)return null;let dl=null;return ll.locale&&(dl=Da.parse(ll.locale,1,Wl),!dl)?null:new le(cl,hl,dl)}evaluate(F){return new ft(this.caseSensitive.evaluate(F),this.diacriticSensitive.evaluate(F),this.locale?this.locale.evaluate(F):null)}eachChild(F){F(this.caseSensitive),F(this.diacriticSensitive),this.locale&&F(this.locale)}outputDefined(){return!1}}class ue{constructor(F,Da,ll,cl,hl){this.type=Wl,this.number=F,this.locale=Da,this.currency=ll,this.minFractionDigits=cl,this.maxFractionDigits=hl}static parse(F,Da){if(3!==F.length)return Da.error("Expected two arguments.");const ll=Da.parse(F[1],1,Dl);if(!ll)return null;const cl=F[2];if("object"!=typeof cl||Array.isArray(cl))return Da.error("NumberFormat options argument must be an object.");let hl=null;if(cl.locale&&(hl=Da.parse(cl.locale,1,Wl),!hl))return null;let dl=null;if(cl.currency&&(dl=Da.parse(cl.currency,1,Wl),!dl))return null;let pl=null;if(cl["min-fraction-digits"]&&(pl=Da.parse(cl["min-fraction-digits"],1,Dl),!pl))return null;let fl=null;return cl["max-fraction-digits"]&&(fl=Da.parse(cl["max-fraction-digits"],1,Dl),!fl)?null:new ue(ll,hl,dl,pl,fl)}evaluate(F){return new Intl.NumberFormat(this.locale?this.locale.evaluate(F):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(F):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(F):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(F):void 0}).format(this.number.evaluate(F))}eachChild(F){F(this.number),this.locale&&F(this.locale),this.currency&&F(this.currency),this.minFractionDigits&&F(this.minFractionDigits),this.maxFractionDigits&&F(this.maxFractionDigits)}outputDefined(){return!1}}class ce{constructor(F){this.type=su,this.sections=F}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");const ll=F[1];if(!Array.isArray(ll)&&"object"==typeof ll)return Da.error("First argument must be an image or text section.");const cl=[];let hl=!1;for(let dl=1;dl<=F.length-1;++dl){const ll=F[dl];if(hl&&"object"==typeof ll&&!Array.isArray(ll)){hl=!1;let F=null;if(ll["font-scale"]&&(F=Da.parse(ll["font-scale"],1,Dl),!F))return null;let dl=null;if(ll["text-font"]&&(dl=Da.parse(ll["text-font"],1,O(Wl)),!dl))return null;let pl=null;if(ll["text-color"]&&(pl=Da.parse(ll["text-color"],1,wc),!pl))return null;const fl=cl[cl.length-1];fl.scale=F,fl.font=dl,fl.textColor=pl}else{const ll=Da.parse(F[dl],1,eu);if(!ll)return null;const pl=ll.type.kind;if("string"!==pl&&"value"!==pl&&"null"!==pl&&"resolvedImage"!==pl)return Da.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");hl=!0,cl.push({content:ll,scale:null,font:null,textColor:null})}}return new ce(cl)}evaluate(F){return new yt(this.sections.map((Da=>{const ll=Da.content.evaluate(F);return _t(ll)===uu?new dt("",ll,null,null,null):new dt(St(ll),null,Da.scale?Da.scale.evaluate(F):null,Da.font?Da.font.evaluate(F).join(","):null,Da.textColor?Da.textColor.evaluate(F):null)})))}eachChild(F){for(const Da of this.sections)F(Da.content),Da.scale&&F(Da.scale),Da.font&&F(Da.font),Da.textColor&&F(Da.textColor)}outputDefined(){return!1}}class he{constructor(F){this.type=uu,this.input=F}static parse(F,Da){if(2!==F.length)return Da.error("Expected two arguments.");const ll=Da.parse(F[1],1,Wl);return ll?new he(ll):Da.error("No image name provided.")}evaluate(F){const Da=this.input.evaluate(F),ll=vt.fromString(Da);return ll&&F.availableImages&&(ll.available=F.availableImages.indexOf(Da)>-1),ll}eachChild(F){F(this.input)}outputDefined(){return!1}}class pe{constructor(F){this.type=Dl,this.input=F}static parse(F,Da){if(2!==F.length)return Da.error(`Expected 1 argument, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1);return ll?"array"!==ll.type.kind&&"string"!==ll.type.kind&&"value"!==ll.type.kind?Da.error(`Expected argument of type string or array, but found ${R(ll.type)} instead.`):new pe(ll):null}evaluate(F){const Da=this.input.evaluate(F);if("string"==typeof Da)return[...Da].length;if(Array.isArray(Da))return Da.length;throw new At(`Expected value to be of type string or array, but found ${R(_t(Da))} instead.`)}eachChild(F){F(this.input)}outputDefined(){return!1}}const gd=8192;function de(F,Da){const ll=(180+F[0])/360,cl=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+F[1]*Math.PI/360)))/360,hl=Math.pow(2,Da.z);return[Math.round(ll*hl*gd),Math.round(cl*hl*gd)]}function ye(F,Da){const ll=Math.pow(2,Da.z);return[(hl=(F[0]/gd+Da.x)/ll,360*hl-180),(cl=(F[1]/gd+Da.y)/ll,360/Math.PI*Math.atan(Math.exp((180-360*cl)*Math.PI/180))-90)];var cl,hl}function me(F,Da){F[0]=Math.min(F[0],Da[0]),F[1]=Math.min(F[1],Da[1]),F[2]=Math.max(F[2],Da[0]),F[3]=Math.max(F[3],Da[1])}function ge(F,Da){return!(F[0]<=Da[0]||F[2]>=Da[2]||F[1]<=Da[1]||F[3]>=Da[3])}function xe(F,Da,ll){const cl=F[0]-Da[0],hl=F[1]-Da[1],dl=F[0]-ll[0],pl=F[1]-ll[1];return cl*pl-dl*hl==0&&cl*dl<=0&&hl*pl<=0}function ve(F,Da,ll,cl){return 0!=(hl=[cl[0]-ll[0],cl[1]-ll[1]])[0]*(dl=[Da[0]-F[0],Da[1]-F[1]])[1]-hl[1]*dl[0]&&!(!Ae(F,Da,ll,cl)||!Ae(ll,cl,F,Da));var hl,dl}function be(F,Da,ll){for(const cl of ll)for(let ll=0;ll<cl.length-1;++ll)if(ve(F,Da,cl[ll],cl[ll+1]))return!0;return!1}function we(F,Da,ll){void 0===ll&&(ll=!1);let cl=!1;for(const fl of Da)for(let Da=0;Da<fl.length-1;Da++){if(xe(F,fl[Da],fl[Da+1]))return ll;(dl=fl[Da])[1]>(hl=F)[1]!=(pl=fl[Da+1])[1]>hl[1]&&hl[0]<(pl[0]-dl[0])*(hl[1]-dl[1])/(pl[1]-dl[1])+dl[0]&&(cl=!cl)}var hl,dl,pl;return cl}function _e(F,Da){for(const ll of Da)if(we(F,ll))return!0;return!1}function Se(F,Da){for(const ll of F)if(!we(ll,Da))return!1;for(let ll=0;ll<F.length-1;++ll)if(be(F[ll],F[ll+1],Da))return!1;return!0}function ke(F,Da){for(const ll of Da)if(Se(F,ll))return!0;return!1}function Ae(F,Da,ll,cl){const hl=cl[0]-ll[0],dl=cl[1]-ll[1],pl=(F[0]-ll[0])*dl-hl*(F[1]-ll[1]),fl=(Da[0]-ll[0])*dl-hl*(Da[1]-ll[1]);return pl>0&&fl<0||pl<0&&fl>0}function Ie(F,Da,ll){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=[];for(let cl=0;cl<F[hl].length;cl++){const pl=de(F[hl][cl],ll);me(Da,pl),dl.push(pl)}cl.push(dl)}return cl}function Me(F,Da,ll){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=Ie(F[hl],Da,ll);cl.push(dl)}return cl}function ze(F,Da,ll,cl){if(F[0]<ll[0]||F[0]>ll[2]){const Da=.5*cl;let hl=F[0]-ll[0]>Da?-cl:ll[0]-F[0]>Da?cl:0;0===hl&&(hl=F[0]-ll[2]>Da?-cl:ll[2]-F[0]>Da?cl:0),F[0]+=hl}me(Da,F)}function Pe(F,Da,ll,cl){const hl=Math.pow(2,cl.z)*gd,dl=[cl.x*gd,cl.y*gd],pl=[];for(const fl of F)for(const F of fl){const cl=[F.x+dl[0],F.y+dl[1]];ze(cl,Da,ll,hl),pl.push(cl)}return pl}function Ce(F,Da,ll,cl){const hl=Math.pow(2,cl.z)*gd,dl=[cl.x*gd,cl.y*gd],pl=[];for(const Al of F){const F=[];for(const ll of Al){const cl=[ll.x+dl[0],ll.y+dl[1]];me(Da,cl),F.push(cl)}pl.push(F)}if(Da[2]-Da[0]<=hl/2){(fl=Da)[0]=fl[1]=1/0,fl[2]=fl[3]=-1/0;for(const F of pl)for(const cl of F)ze(cl,Da,ll,hl)}var fl;return pl}class Be{constructor(F,Da){this.type=Ql,this.geojson=F,this.geometries=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'within' expression requires exactly one argument, but found ${F.length-1} instead.`);if(wt(F[1])){const Da=F[1];if("FeatureCollection"===Da.type){const F=[];for(const ll of Da.features){const{type:Da,coordinates:cl}=ll.geometry;"Polygon"===Da&&F.push(cl),"MultiPolygon"===Da&&F.push(...cl)}if(F.length)return new Be(Da,{type:"MultiPolygon",coordinates:F})}else if("Feature"===Da.type){const F=Da.geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new Be(Da,Da.geometry)}else if("Polygon"===Da.type||"MultiPolygon"===Da.type)return new Be(Da,Da)}return Da.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(F){if(null!=F.geometry()&&null!=F.canonicalID()){if("Point"===F.geometryType())return function(F,Da){const ll=[1/0,1/0,-1/0,-1/0],cl=[1/0,1/0,-1/0,-1/0],hl=F.canonicalID();if("Polygon"===Da.type){const dl=Ie(Da.coordinates,cl,hl),pl=Pe(F.geometry(),ll,cl,hl);if(!ge(ll,cl))return!1;for(const F of pl)if(!we(F,dl))return!1}if("MultiPolygon"===Da.type){const dl=Me(Da.coordinates,cl,hl),pl=Pe(F.geometry(),ll,cl,hl);if(!ge(ll,cl))return!1;for(const F of pl)if(!_e(F,dl))return!1}return!0}(F,this.geometries);if("LineString"===F.geometryType())return function(F,Da){const ll=[1/0,1/0,-1/0,-1/0],cl=[1/0,1/0,-1/0,-1/0],hl=F.canonicalID();if("Polygon"===Da.type){const dl=Ie(Da.coordinates,cl,hl),pl=Ce(F.geometry(),ll,cl,hl);if(!ge(ll,cl))return!1;for(const F of pl)if(!Se(F,dl))return!1}if("MultiPolygon"===Da.type){const dl=Me(Da.coordinates,cl,hl),pl=Ce(F.geometry(),ll,cl,hl);if(!ge(ll,cl))return!1;for(const F of pl)if(!ke(F,dl))return!1}return!0}(F,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ad=class{constructor(F,Da){if(void 0===F&&(F=[]),void 0===Da&&(Da=(F,Da)=>F<Da?-1:F>Da?1:0),this.data=F,this.length=this.data.length,this.compare=Da,this.length>0)for(let ll=(this.length>>1)-1;ll>=0;ll--)this._down(ll)}push(F){this.data.push(F),this._up(this.length++)}pop(){if(0===this.length)return;const F=this.data[0],Da=this.data.pop();return--this.length>0&&(this.data[0]=Da,this._down(0)),F}peek(){return this.data[0]}_up(F){const{data:Da,compare:ll}=this,cl=Da[F];for(;F>0;){const hl=F-1>>1,dl=Da[hl];if(ll(cl,dl)>=0)break;Da[F]=dl,F=hl}Da[F]=cl}_down(F){const{data:Da,compare:ll}=this,cl=this.length>>1,hl=Da[F];for(;F<cl;){let cl=1+(F<<1);const dl=cl+1;if(dl<this.length&&ll(Da[dl],Da[cl])<0&&(cl=dl),ll(Da[cl],hl)>=0)break;Da[F]=Da[cl],F=cl}Da[F]=hl}};function Te(F,Da,ll,cl,hl){Ee(F,Da,ll,cl||F.length-1,hl||De)}function Ee(F,Da,ll,cl,hl){for(;cl>ll;){if(cl-ll>600){var dl=cl-ll+1,pl=Da-ll+1,fl=Math.log(dl),Al=.5*Math.exp(2*fl/3),bl=.5*Math.sqrt(fl*Al*(dl-Al)/dl)*(pl-dl/2<0?-1:1);Ee(F,Da,Math.max(ll,Math.floor(Da-pl*Al/dl+bl)),Math.min(cl,Math.floor(Da+(dl-pl)*Al/dl+bl)),hl)}var kl=F[Da],Dl=ll,Wl=cl;for(Fe(F,ll,Da),hl(F[cl],kl)>0&&Fe(F,ll,cl);Dl<Wl;){for(Fe(F,Dl,Wl),Dl++,Wl--;hl(F[Dl],kl)<0;)Dl++;for(;hl(F[Wl],kl)>0;)Wl--}0===hl(F[ll],kl)?Fe(F,ll,Wl):Fe(F,++Wl,cl),Wl<=Da&&(ll=Wl+1),Da<=Wl&&(cl=Wl-1)}}function Fe(F,Da,ll){var cl=F[Da];F[Da]=F[ll],F[ll]=cl}function De(F,Da){return F<Da?-1:F>Da?1:0}function $e(F,Da){if(F.length<=1)return[F];const ll=[];let cl,hl;for(const dl of F){const F=Oe(dl);0!==F&&(dl.area=Math.abs(F),void 0===hl&&(hl=F<0),hl===F<0?(cl&&ll.push(cl),cl=[dl]):cl.push(dl))}if(cl&&ll.push(cl),Da>1)for(let dl=0;dl<ll.length;dl++)ll[dl].length<=Da||(Te(ll[dl],Da,1,ll[dl].length-1,Le),ll[dl]=ll[dl].slice(0,Da));return ll}function Le(F,Da){return Da.area-F.area}function Oe(F){let Da=0;for(let ll,cl,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++)ll=F[hl],cl=F[pl],Da+=(cl.x-ll.x)*(ll.y+cl.y);return Da}const yd=1/298.257223563,vd=yd*(2-yd),_d=Math.PI/180;class Ue{constructor(F){const Da=6378.137*_d*1e3,ll=Math.cos(F*_d),cl=1/(1-vd*(1-ll*ll)),hl=Math.sqrt(cl);this.kx=Da*hl*ll,this.ky=Da*hl*cl*(1-vd)}distance(F,Da){const ll=this.wrap(F[0]-Da[0])*this.kx,cl=(F[1]-Da[1])*this.ky;return Math.sqrt(ll*ll+cl*cl)}pointOnLine(F,Da){let ll,cl,hl,dl,pl=1/0;for(let fl=0;fl<F.length-1;fl++){let Al=F[fl][0],bl=F[fl][1],kl=this.wrap(F[fl+1][0]-Al)*this.kx,Dl=(F[fl+1][1]-bl)*this.ky,Wl=0;0===kl&&0===Dl||(Wl=(this.wrap(Da[0]-Al)*this.kx*kl+(Da[1]-bl)*this.ky*Dl)/(kl*kl+Dl*Dl),Wl>1?(Al=F[fl+1][0],bl=F[fl+1][1]):Wl>0&&(Al+=kl/this.kx*Wl,bl+=Dl/this.ky*Wl)),kl=this.wrap(Da[0]-Al)*this.kx,Dl=(Da[1]-bl)*this.ky;const Ql=kl*kl+Dl*Dl;Ql<pl&&(pl=Ql,ll=Al,cl=bl,hl=fl,dl=Wl)}return{point:[ll,cl],index:hl,t:Math.max(0,Math.min(1,dl))}}wrap(F){for(;F<-180;)F+=360;for(;F>180;)F-=360;return F}}function Ne(F,Da){return Da[0]-F[0]}function Ze(F){return F[1]-F[0]+1}function Ge(F,Da){return F[1]>=F[0]&&F[1]<Da}function Xe(F,Da){if(F[0]>F[1])return[null,null];const ll=Ze(F);if(Da){if(2===ll)return[F,null];const Da=Math.floor(ll/2);return[[F[0],F[0]+Da],[F[0]+Da,F[1]]]}if(1===ll)return[F,null];const cl=Math.floor(ll/2)-1;return[[F[0],F[0]+cl],[F[0]+cl+1,F[1]]]}function He(F,Da){if(!Ge(Da,F.length))return[1/0,1/0,-1/0,-1/0];const ll=[1/0,1/0,-1/0,-1/0];for(let cl=Da[0];cl<=Da[1];++cl)me(ll,F[cl]);return ll}function Ye(F){const Da=[1/0,1/0,-1/0,-1/0];for(const ll of F)for(const F of ll)me(Da,F);return Da}function Je(F){return F[0]!==-1/0&&F[1]!==-1/0&&F[2]!==1/0&&F[3]!==1/0}function Ke(F,Da,ll){if(!Je(F)||!Je(Da))return NaN;let cl=0,hl=0;return F[2]<Da[0]&&(cl=Da[0]-F[2]),F[0]>Da[2]&&(cl=F[0]-Da[2]),F[1]>Da[3]&&(hl=F[1]-Da[3]),F[3]<Da[1]&&(hl=Da[1]-F[3]),ll.distance([0,0],[cl,hl])}function We(F,Da,ll){const cl=ll.pointOnLine(Da,F);return ll.distance(F,cl.point)}function Qe(F,Da,ll,cl,hl){const dl=Math.min(We(F,[ll,cl],hl),We(Da,[ll,cl],hl)),pl=Math.min(We(ll,[F,Da],hl),We(cl,[F,Da],hl));return Math.min(dl,pl)}function tr(F,Da,ll,cl,hl){if(!Ge(Da,F.length)||!Ge(cl,ll.length))return 1/0;let dl=1/0;for(let pl=Da[0];pl<Da[1];++pl){const Da=F[pl],fl=F[pl+1];for(let F=cl[0];F<cl[1];++F){const cl=ll[F],pl=ll[F+1];if(ve(Da,fl,cl,pl))return 0;dl=Math.min(dl,Qe(Da,fl,cl,pl,hl))}}return dl}function er(F,Da,ll,cl,hl){if(!Ge(Da,F.length)||!Ge(cl,ll.length))return NaN;let dl=1/0;for(let pl=Da[0];pl<=Da[1];++pl)for(let Da=cl[0];Da<=cl[1];++Da)if(dl=Math.min(dl,hl.distance(F[pl],ll[Da])),0===dl)return dl;return dl}function rr(F,Da,ll){if(we(F,Da,!0))return 0;let cl=1/0;for(const hl of Da){const Da=hl[0],dl=hl[hl.length-1];if(Da!==dl&&(cl=Math.min(cl,We(F,[dl,Da],ll)),0===cl))return cl;const pl=ll.pointOnLine(hl,F);if(cl=Math.min(cl,ll.distance(F,pl.point)),0===cl)return cl}return cl}function nr(F,Da,ll,cl){if(!Ge(Da,F.length))return NaN;for(let dl=Da[0];dl<=Da[1];++dl)if(we(F[dl],ll,!0))return 0;let hl=1/0;for(let dl=Da[0];dl<Da[1];++dl){const Da=F[dl],pl=F[dl+1];for(const F of ll)for(let ll=0,dl=F.length,fl=dl-1;ll<dl;fl=ll++){const dl=F[fl],Al=F[ll];if(ve(Da,pl,dl,Al))return 0;hl=Math.min(hl,Qe(Da,pl,dl,Al,cl))}}return hl}function ir(F,Da){for(const ll of F)for(const F of ll)if(we(F,Da,!0))return!0;return!1}function sr(F,Da,ll,cl){void 0===cl&&(cl=1/0);const hl=Ye(F),dl=Ye(Da);if(cl!==1/0&&Ke(hl,dl,ll)>=cl)return cl;if(ge(hl,dl)){if(ir(F,Da))return 0}else if(ir(Da,F))return 0;let pl=1/0;for(const fl of F)for(let F=0,cl=fl.length,hl=cl-1;F<cl;hl=F++){const cl=fl[hl],dl=fl[F];for(const F of Da)for(let Da=0,hl=F.length,fl=hl-1;Da<hl;fl=Da++){const hl=F[fl],Al=F[Da];if(ve(cl,dl,hl,Al))return 0;pl=Math.min(pl,Qe(cl,dl,hl,Al,ll))}}return pl}function or(F,Da,ll,cl,hl,dl){if(!dl)return;const pl=Ke(He(cl,dl),hl,ll);pl<Da&&F.push([pl,dl,[0,0]])}function ar(F,Da,ll,cl,hl,dl,pl){if(!dl||!pl)return;const fl=Ke(He(cl,dl),He(hl,pl),ll);fl<Da&&F.push([fl,dl,pl])}function lr(F,Da,ll,cl,hl){void 0===hl&&(hl=1/0);let dl=Math.min(cl.distance(F[0],ll[0][0]),hl);if(0===dl)return dl;const pl=new Ad([[0,[0,F.length-1],[0,0]]],Ne),fl=Ye(ll);for(;pl.length>0;){const hl=pl.pop();if(hl[0]>=dl)continue;const Al=hl[1],bl=Da?50:100;if(Ze(Al)<=bl){if(!Ge(Al,F.length))return NaN;if(Da){const Da=nr(F,Al,ll,cl);if(isNaN(Da)||0===Da)return Da;dl=Math.min(dl,Da)}else for(let Da=Al[0];Da<=Al[1];++Da){const hl=rr(F[Da],ll,cl);if(dl=Math.min(dl,hl),0===dl)return 0}}else{const ll=Xe(Al,Da);or(pl,dl,cl,F,fl,ll[0]),or(pl,dl,cl,F,fl,ll[1])}}return dl}function ur(F,Da,ll,cl,hl,dl){void 0===dl&&(dl=1/0);let pl=Math.min(dl,hl.distance(F[0],ll[0]));if(0===pl)return pl;const fl=new Ad([[0,[0,F.length-1],[0,ll.length-1]]],Ne);for(;fl.length>0;){const dl=fl.pop();if(dl[0]>=pl)continue;const Al=dl[1],bl=dl[2],kl=Da?50:100,Dl=cl?50:100;if(Ze(Al)<=kl&&Ze(bl)<=Dl){if(!Ge(Al,F.length)&&Ge(bl,ll.length))return NaN;let dl;if(Da&&cl)dl=tr(F,Al,ll,bl,hl),pl=Math.min(pl,dl);else if(Da&&!cl){const Da=F.slice(Al[0],Al[1]+1);for(let F=bl[0];F<=bl[1];++F)if(dl=We(ll[F],Da,hl),pl=Math.min(pl,dl),0===pl)return pl}else if(!Da&&cl){const Da=ll.slice(bl[0],bl[1]+1);for(let ll=Al[0];ll<=Al[1];++ll)if(dl=We(F[ll],Da,hl),pl=Math.min(pl,dl),0===pl)return pl}else dl=er(F,Al,ll,bl,hl),pl=Math.min(pl,dl)}else{const dl=Xe(Al,Da),kl=Xe(bl,cl);ar(fl,pl,hl,F,ll,dl[0],kl[0]),ar(fl,pl,hl,F,ll,dl[0],kl[1]),ar(fl,pl,hl,F,ll,dl[1],kl[0]),ar(fl,pl,hl,F,ll,dl[1],kl[1])}}return pl}function cr(F){return"MultiPolygon"===F.type?F.coordinates.map((F=>({type:"Polygon",coordinates:F}))):"MultiLineString"===F.type?F.coordinates.map((F=>({type:"LineString",coordinates:F}))):"MultiPoint"===F.type?F.coordinates.map((F=>({type:"Point",coordinates:F}))):[F]}class hr{constructor(F,Da){this.type=Dl,this.geojson=F,this.geometries=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'distance' expression requires exactly one argument, but found ${F.length-1} instead.`);if(wt(F[1])){const Da=F[1];if("FeatureCollection"===Da.type)return new hr(Da,Da.features.map((F=>cr(F.geometry))).flat());if("Feature"===Da.type)return new hr(Da,cr(Da.geometry));if("type"in Da&&"coordinates"in Da)return new hr(Da,cr(Da))}return Da.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(F){if(null!=F.geometry()&&null!=F.canonicalID()){if("Point"===F.geometryType())return function(F,Da){const ll=F.geometry(),cl=ll.flat().map((Da=>ye([Da.x,Da.y],F.canonical)));if(0===ll.length)return NaN;const hl=new Ue(cl[0][1]);let dl=1/0;for(const pl of Da){switch(pl.type){case"Point":dl=Math.min(dl,ur(cl,!1,[pl.coordinates],!1,hl,dl));break;case"LineString":dl=Math.min(dl,ur(cl,!1,pl.coordinates,!0,hl,dl));break;case"Polygon":dl=Math.min(dl,lr(cl,!1,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries);if("LineString"===F.geometryType())return function(F,Da){const ll=F.geometry(),cl=ll.flat().map((Da=>ye([Da.x,Da.y],F.canonical)));if(0===ll.length)return NaN;const hl=new Ue(cl[0][1]);let dl=1/0;for(const pl of Da){switch(pl.type){case"Point":dl=Math.min(dl,ur(cl,!0,[pl.coordinates],!1,hl,dl));break;case"LineString":dl=Math.min(dl,ur(cl,!0,pl.coordinates,!0,hl,dl));break;case"Polygon":dl=Math.min(dl,lr(cl,!0,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries);if("Polygon"===F.geometryType())return function(F,Da){const ll=F.geometry();if(0===ll.length||0===ll[0].length)return NaN;const cl=$e(ll,0).map((Da=>Da.map((Da=>Da.map((Da=>ye([Da.x,Da.y],F.canonical))))))),hl=new Ue(cl[0][0][0][1]);let dl=1/0;for(const pl of Da)for(const F of cl){switch(pl.type){case"Point":dl=Math.min(dl,lr([pl.coordinates],!1,F,hl,dl));break;case"LineString":dl=Math.min(dl,lr(pl.coordinates,!0,F,hl,dl));break;case"Polygon":dl=Math.min(dl,sr(F,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const xd={"==":ud,"!=":hd,">":pd,"<":dd,">=":fd,"<=":md,array:Mt,at:Ft,boolean:Mt,case:Ot,coalesce:Wt,collator:le,format:ce,image:he,in:Dt,"index-of":$t,interpolate:Jt,"interpolate-hcl":Jt,"interpolate-lab":Jt,length:pe,let:Tt,literal:kt,match:Lt,number:Mt,"number-format":ue,object:Mt,slice:Rt,step:qt,string:Mt,"to-boolean":Pt,"to-color":Pt,"to-number":Pt,"to-string":Pt,var:Et,within:Be,distance:hr};class fr{constructor(F,Da,ll,cl){this.name=F,this.type=Da,this._evaluate=ll,this.args=cl}evaluate(F){return this._evaluate(F,this.args)}eachChild(F){this.args.forEach(F)}outputDefined(){return!1}static parse(F,Da){const ll=F[0],cl=fr.definitions[ll];if(!cl)return Da.error(`Unknown expression "${ll}". If you wanted a literal array, use ["literal", [...]].`,0);const hl=Array.isArray(cl)?cl[0]:cl.type,dl=Array.isArray(cl)?[[cl[1],cl[2]]]:cl.overloads,pl=dl.filter((Da=>{let[ll]=Da;return!Array.isArray(ll)||ll.length===F.length-1}));let fl=null;for(const[Al,bl]of pl){fl=new Vt(Da.registry,xr,Da.path,null,Da.scope);const cl=[];let dl=!1;for(let Da=1;Da<F.length;Da++){const ll=F[Da],hl=Array.isArray(Al)?Al[Da-1]:Al.type,pl=fl.parse(ll,1+cl.length,hl);if(!pl){dl=!0;break}cl.push(pl)}if(!dl)if(Array.isArray(Al)&&Al.length!==cl.length)fl.error(`Expected ${Al.length} arguments, but found ${cl.length} instead.`);else{for(let F=0;F<cl.length;F++){const Da=Array.isArray(Al)?Al[F]:Al.type,ll=cl[F];fl.concat(F+1).checkSubtype(Da,ll.type)}if(0===fl.errors.length)return new fr(ll,hl,bl,cl)}}if(1===pl.length)Da.errors.push(...fl.errors);else{const ll=(pl.length?pl:dl).map((F=>{let[Da]=F;return ll=Da,Array.isArray(ll)?`(${ll.map(R).join(", ")})`:`(${R(ll.type)}...)`;var ll})).join(" | "),cl=[];for(let hl=1;hl<F.length;hl++){const ll=Da.parse(F[hl],1+cl.length);if(!ll)return null;cl.push(R(ll.type))}Da.error(`Expected arguments of type ${ll}, but found (${cl.join(", ")}) instead.`)}return null}static register(F,Da){fr.definitions=Da;for(const ll in Da)F[ll]=fr}}function dr(F,Da){let[ll,cl,hl,dl]=Da;ll=ll.evaluate(F),cl=cl.evaluate(F),hl=hl.evaluate(F);const pl=dl?dl.evaluate(F):1,fl=bt(ll,cl,hl,pl);if(fl)throw new At(fl);return new pt(ll/255,cl/255,hl/255,pl,!1)}function yr(F,Da){return F in Da}function mr(F,Da){const ll=Da[F];return void 0===ll?null:ll}function gr(F){return{type:F}}function xr(F){if(F instanceof Et)return xr(F.boundExpression);if(F instanceof fr&&"error"===F.name)return!1;if(F instanceof le)return!1;if(F instanceof Be)return!1;if(F instanceof hr)return!1;const Da=F instanceof Pt||F instanceof Mt;let ll=!0;return F.eachChild((F=>{ll=Da?ll&&xr(F):ll&&F instanceof kt})),!!ll&&vr(F)&&wr(F,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vr(F){if(F instanceof fr){if("get"===F.name&&1===F.args.length)return!1;if("feature-state"===F.name)return!1;if("has"===F.name&&1===F.args.length)return!1;if("properties"===F.name||"geometry-type"===F.name||"id"===F.name)return!1;if(/^filter-/.test(F.name))return!1}if(F instanceof Be)return!1;if(F instanceof hr)return!1;let Da=!0;return F.eachChild((F=>{Da&&!vr(F)&&(Da=!1)})),Da}function br(F){if(F instanceof fr&&"feature-state"===F.name)return!1;let Da=!0;return F.eachChild((F=>{Da&&!br(F)&&(Da=!1)})),Da}function wr(F,Da){if(F instanceof fr&&Da.indexOf(F.name)>=0)return!1;let ll=!0;return F.eachChild((F=>{ll&&!wr(F,Da)&&(ll=!1)})),ll}function _r(F){return{result:"success",value:F}}function Sr(F){return{result:"error",value:F}}function kr(F){return"data-driven"===F["property-type"]||"cross-faded-data-driven"===F["property-type"]}function Ar(F){return!!F.expression&&F.expression.parameters.indexOf("zoom")>-1}function Ir(F){return!!F.expression&&F.expression.interpolated}function Mr(F){return F instanceof Number?"number":F instanceof String?"string":F instanceof Boolean?"boolean":Array.isArray(F)?"array":null===F?"null":typeof F}function zr(F){return"object"==typeof F&&null!==F&&!Array.isArray(F)}function Pr(F){return F}function Cr(F,Da){const ll="color"===Da.type,cl=F.stops&&"object"==typeof F.stops[0][0],hl=cl||!(cl||void 0!==F.property),dl=F.type||(Ir(Da)?"exponential":"interval");if(ll||"padding"===Da.type){const cl=ll?pt.parse:mt.parse;(F=k({},F)).stops&&(F.stops=F.stops.map((F=>[F[0],cl(F[1])]))),F.default=cl(F.default?F.default:Da.default)}if(F.colorSpace&&"rgb"!==(pl=F.colorSpace)&&"hcl"!==pl&&"lab"!==pl)throw new Error(`Unknown color space: "${F.colorSpace}"`);var pl;let fl,Al,bl;if("exponential"===dl)fl=Er;else if("interval"===dl)fl=Tr;else if("categorical"===dl){fl=Vr,Al=Object.create(null);for(const Da of F.stops)Al[Da[0]]=Da[1];bl=typeof F.stops[0][0]}else{if("identity"!==dl)throw new Error(`Unknown function type "${dl}"`);fl=Fr}if(cl){const ll={},cl=[];for(let Da=0;Da<F.stops.length;Da++){const hl=F.stops[Da],dl=hl[0].zoom;void 0===ll[dl]&&(ll[dl]={zoom:dl,type:F.type,property:F.property,default:F.default,stops:[]},cl.push(dl)),ll[dl].stops.push([hl[0].value,hl[1]])}const hl=[];for(const F of cl)hl.push([ll[F].zoom,Cr(ll[F],Da)]);const dl={name:"linear"};return{kind:"composite",interpolationType:dl,interpolationFactor:Jt.interpolationFactor.bind(void 0,dl),zoomStops:hl.map((F=>F[0])),evaluate:(ll,cl)=>{let{zoom:dl}=ll;return Er({stops:hl,base:F.base},Da,dl).evaluate(dl,cl)}}}if(hl){const ll="exponential"===dl?{name:"exponential",base:void 0!==F.base?F.base:1}:null;return{kind:"camera",interpolationType:ll,interpolationFactor:Jt.interpolationFactor.bind(void 0,ll),zoomStops:F.stops.map((F=>F[0])),evaluate:ll=>{let{zoom:cl}=ll;return fl(F,Da,cl,Al,bl)}}}return{kind:"source",evaluate(ll,cl){const hl=cl&&cl.properties?cl.properties[F.property]:void 0;return void 0===hl?Br(F.default,Da.default):fl(F,Da,hl,Al,bl)}}}function Br(F,Da,ll){return void 0!==F?F:void 0!==Da?Da:void 0!==ll?ll:void 0}function Vr(F,Da,ll,cl,hl){return Br(typeof ll===hl?cl[ll]:void 0,F.default,Da.default)}function Tr(F,Da,ll){if("number"!==Mr(ll))return Br(F.default,Da.default);const cl=F.stops.length;if(1===cl)return F.stops[0][1];if(ll<=F.stops[0][0])return F.stops[0][1];if(ll>=F.stops[cl-1][0])return F.stops[cl-1][1];const hl=jt(F.stops.map((F=>F[0])),ll);return F.stops[hl][1]}function Er(F,Da,ll){const cl=void 0!==F.base?F.base:1;if("number"!==Mr(ll))return Br(F.default,Da.default);const hl=F.stops.length;if(1===hl)return F.stops[0][1];if(ll<=F.stops[0][0])return F.stops[0][1];if(ll>=F.stops[hl-1][0])return F.stops[hl-1][1];const dl=jt(F.stops.map((F=>F[0])),ll),pl=function(F,Da,ll,cl){const hl=cl-ll,dl=F-ll;return 0===hl?0:1===Da?dl/hl:(Math.pow(Da,dl)-1)/(Math.pow(Da,hl)-1)}(ll,cl,F.stops[dl][0],F.stops[dl+1][0]),fl=F.stops[dl][1],Al=F.stops[dl+1][1],bl=cd[Da.type]||Pr;return"function"==typeof fl.evaluate?{evaluate(){for(var Da=arguments.length,ll=new Array(Da),cl=0;cl<Da;cl++)ll[cl]=arguments[cl];const hl=fl.evaluate.apply(void 0,ll),dl=Al.evaluate.apply(void 0,ll);if(void 0!==hl&&void 0!==dl)return bl(hl,dl,pl,F.colorSpace)}}:bl(fl,Al,pl,F.colorSpace)}function Fr(F,Da,ll){switch(Da.type){case"color":ll=pt.parse(ll);break;case"formatted":ll=yt.fromString(ll.toString());break;case"resolvedImage":ll=vt.fromString(ll.toString());break;case"padding":ll=mt.parse(ll);break;default:Mr(ll)===Da.type||"enum"===Da.type&&Da.values[ll]||(ll=void 0)}return Br(ll,F.default,Da.default)}fr.register(xd,{error:[{kind:"error"},[Wl],(F,Da)=>{let[ll]=Da;throw new At(ll.evaluate(F))}],typeof:[Wl,[eu],(F,Da)=>{let[ll]=Da;return R(_t(ll.evaluate(F)))}],"to-rgba":[O(Dl,4),[wc],(F,Da)=>{let[ll]=Da;const[cl,hl,dl,pl]=ll.evaluate(F).rgb;return[255*cl,255*hl,255*dl,pl]}],rgb:[wc,[Dl,Dl,Dl],dr],rgba:[wc,[Dl,Dl,Dl,Dl],dr],has:{type:Ql,overloads:[[[Wl],(F,Da)=>{let[ll]=Da;return yr(ll.evaluate(F),F.properties())}],[[Wl,Sc],(F,Da)=>{let[ll,cl]=Da;return yr(ll.evaluate(F),cl.evaluate(F))}]]},get:{type:eu,overloads:[[[Wl],(F,Da)=>{let[ll]=Da;return mr(ll.evaluate(F),F.properties())}],[[Wl,Sc],(F,Da)=>{let[ll,cl]=Da;return mr(ll.evaluate(F),cl.evaluate(F))}]]},"feature-state":[eu,[Wl],(F,Da)=>{let[ll]=Da;return mr(ll.evaluate(F),F.featureState||{})}],properties:[Sc,[],F=>F.properties()],"geometry-type":[Wl,[],F=>F.geometryType()],id:[eu,[],F=>F.id()],zoom:[Dl,[],F=>F.globals.zoom],"heatmap-density":[Dl,[],F=>F.globals.heatmapDensity||0],"line-progress":[Dl,[],F=>F.globals.lineProgress||0],accumulated:[eu,[],F=>void 0===F.globals.accumulated?null:F.globals.accumulated],"+":[Dl,gr(Dl),(F,Da)=>{let ll=0;for(const cl of Da)ll+=cl.evaluate(F);return ll}],"*":[Dl,gr(Dl),(F,Da)=>{let ll=1;for(const cl of Da)ll*=cl.evaluate(F);return ll}],"-":{type:Dl,overloads:[[[Dl,Dl],(F,Da)=>{let[ll,cl]=Da;return ll.evaluate(F)-cl.evaluate(F)}],[[Dl],(F,Da)=>{let[ll]=Da;return-ll.evaluate(F)}]]},"/":[Dl,[Dl,Dl],(F,Da)=>{let[ll,cl]=Da;return ll.evaluate(F)/cl.evaluate(F)}],"%":[Dl,[Dl,Dl],(F,Da)=>{let[ll,cl]=Da;return ll.evaluate(F)%cl.evaluate(F)}],ln2:[Dl,[],()=>Math.LN2],pi:[Dl,[],()=>Math.PI],e:[Dl,[],()=>Math.E],"^":[Dl,[Dl,Dl],(F,Da)=>{let[ll,cl]=Da;return Math.pow(ll.evaluate(F),cl.evaluate(F))}],sqrt:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.sqrt(ll.evaluate(F))}],log10:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.log(ll.evaluate(F))/Math.LN10}],ln:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.log(ll.evaluate(F))}],log2:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.log(ll.evaluate(F))/Math.LN2}],sin:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.sin(ll.evaluate(F))}],cos:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.cos(ll.evaluate(F))}],tan:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.tan(ll.evaluate(F))}],asin:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.asin(ll.evaluate(F))}],acos:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.acos(ll.evaluate(F))}],atan:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.atan(ll.evaluate(F))}],min:[Dl,gr(Dl),(F,Da)=>Math.min(...Da.map((Da=>Da.evaluate(F))))],max:[Dl,gr(Dl),(F,Da)=>Math.max(...Da.map((Da=>Da.evaluate(F))))],abs:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.abs(ll.evaluate(F))}],round:[Dl,[Dl],(F,Da)=>{let[ll]=Da;const cl=ll.evaluate(F);return cl<0?-Math.round(-cl):Math.round(cl)}],floor:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.floor(ll.evaluate(F))}],ceil:[Dl,[Dl],(F,Da)=>{let[ll]=Da;return Math.ceil(ll.evaluate(F))}],"filter-==":[Ql,[Wl,eu],(F,Da)=>{let[ll,cl]=Da;return F.properties()[ll.value]===cl.value}],"filter-id-==":[Ql,[eu],(F,Da)=>{let[ll]=Da;return F.id()===ll.value}],"filter-type-==":[Ql,[Wl],(F,Da)=>{let[ll]=Da;return F.geometryType()===ll.value}],"filter-<":[Ql,[Wl,eu],(F,Da)=>{let[ll,cl]=Da;const hl=F.properties()[ll.value],dl=cl.value;return typeof hl==typeof dl&&hl<dl}],"filter-id-<":[Ql,[eu],(F,Da)=>{let[ll]=Da;const cl=F.id(),hl=ll.value;return typeof cl==typeof hl&&cl<hl}],"filter->":[Ql,[Wl,eu],(F,Da)=>{let[ll,cl]=Da;const hl=F.properties()[ll.value],dl=cl.value;return typeof hl==typeof dl&&hl>dl}],"filter-id->":[Ql,[eu],(F,Da)=>{let[ll]=Da;const cl=F.id(),hl=ll.value;return typeof cl==typeof hl&&cl>hl}],"filter-<=":[Ql,[Wl,eu],(F,Da)=>{let[ll,cl]=Da;const hl=F.properties()[ll.value],dl=cl.value;return typeof hl==typeof dl&&hl<=dl}],"filter-id-<=":[Ql,[eu],(F,Da)=>{let[ll]=Da;const cl=F.id(),hl=ll.value;return typeof cl==typeof hl&&cl<=hl}],"filter->=":[Ql,[Wl,eu],(F,Da)=>{let[ll,cl]=Da;const hl=F.properties()[ll.value],dl=cl.value;return typeof hl==typeof dl&&hl>=dl}],"filter-id->=":[Ql,[eu],(F,Da)=>{let[ll]=Da;const cl=F.id(),hl=ll.value;return typeof cl==typeof hl&&cl>=hl}],"filter-has":[Ql,[eu],(F,Da)=>{let[ll]=Da;return ll.value in F.properties()}],"filter-has-id":[Ql,[],F=>null!==F.id()&&void 0!==F.id()],"filter-type-in":[Ql,[O(Wl)],(F,Da)=>{let[ll]=Da;return ll.value.indexOf(F.geometryType())>=0}],"filter-id-in":[Ql,[O(eu)],(F,Da)=>{let[ll]=Da;return ll.value.indexOf(F.id())>=0}],"filter-in-small":[Ql,[Wl,O(eu)],(F,Da)=>{let[ll,cl]=Da;return cl.value.indexOf(F.properties()[ll.value])>=0}],"filter-in-large":[Ql,[Wl,O(eu)],(F,Da)=>{let[ll,cl]=Da;return function(F,Da,ll,cl){for(;ll<=cl;){const hl=ll+cl>>1;if(Da[hl]===F)return!0;Da[hl]>F?cl=hl-1:ll=hl+1}return!1}(F.properties()[ll.value],cl.value,0,cl.value.length-1)}],all:{type:Ql,overloads:[[[Ql,Ql],(F,Da)=>{let[ll,cl]=Da;return ll.evaluate(F)&&cl.evaluate(F)}],[gr(Ql),(F,Da)=>{for(const ll of Da)if(!ll.evaluate(F))return!1;return!0}]]},any:{type:Ql,overloads:[[[Ql,Ql],(F,Da)=>{let[ll,cl]=Da;return ll.evaluate(F)||cl.evaluate(F)}],[gr(Ql),(F,Da)=>{for(const ll of Da)if(ll.evaluate(F))return!0;return!1}]]},"!":[Ql,[Ql],(F,Da)=>{let[ll]=Da;return!ll.evaluate(F)}],"is-supported-script":[Ql,[Wl],(F,Da)=>{let[ll]=Da;const cl=F.globals&&F.globals.isSupportedScript;return!cl||cl(ll.evaluate(F))}],upcase:[Wl,[Wl],(F,Da)=>{let[ll]=Da;return ll.evaluate(F).toUpperCase()}],downcase:[Wl,[Wl],(F,Da)=>{let[ll]=Da;return ll.evaluate(F).toLowerCase()}],concat:[Wl,gr(eu),(F,Da)=>Da.map((Da=>St(Da.evaluate(F)))).join("")],"resolved-locale":[Wl,[iu],(F,Da)=>{let[ll]=Da;return ll.evaluate(F).resolvedLocale()}]});class Dr{constructor(F,Da){var ll;this.expression=F,this._warningHistory={},this._evaluator=new Bt,this._defaultValue=Da?"color"===(ll=Da).type&&zr(ll.default)?new pt(0,0,0,0):"color"===ll.type?pt.parse(ll.default)||null:"padding"===ll.type?mt.parse(ll.default)||null:"variableAnchorOffsetCollection"===ll.type?xt.parse(ll.default)||null:void 0===ll.default?null:ll.default:null,this._enumValues=Da&&"enum"===Da.type?Da.values:null}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._evaluator.globals=F,this._evaluator.feature=Da,this._evaluator.featureState=ll,this._evaluator.canonical=cl,this._evaluator.availableImages=hl||null,this._evaluator.formattedSection=dl,this.expression.evaluate(this._evaluator)}evaluate(F,Da,ll,cl,hl,dl){this._evaluator.globals=F,this._evaluator.feature=Da||null,this._evaluator.featureState=ll||null,this._evaluator.canonical=cl,this._evaluator.availableImages=hl||null,this._evaluator.formattedSection=dl||null;try{const F=this.expression.evaluate(this._evaluator);if(null==F||"number"==typeof F&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new At(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,"undefined"!=typeof console&&console.warn(F.message)),this._defaultValue}}}function $r(F){return Array.isArray(F)&&F.length>0&&"string"==typeof F[0]&&F[0]in xd}function Lr(F,Da){const ll=new Vt(xd,xr,[],Da?function(F){const Da={color:wc,string:Wl,number:Dl,enum:Wl,boolean:Ql,formatted:su,padding:cu,resolvedImage:uu,variableAnchorOffsetCollection:hu};return"array"===F.type?O(Da[F.value]||eu,F.length):Da[F.type]}(Da):void 0),cl=ll.parse(F,void 0,void 0,void 0,Da&&"string"===Da.type?{typeAnnotation:"coerce"}:void 0);return cl?_r(new Dr(cl,Da)):Sr(ll.errors)}class Or{constructor(F,Da){this.kind=F,this._styleExpression=Da,this.isStateDependent="constant"!==F&&!br(Da.expression)}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl)}evaluate(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluate(F,Da,ll,cl,hl,dl)}}class Rr{constructor(F,Da,ll,cl){this.kind=F,this.zoomStops=ll,this._styleExpression=Da,this.isStateDependent="camera"!==F&&!br(Da.expression),this.interpolationType=cl}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl)}evaluate(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluate(F,Da,ll,cl,hl,dl)}interpolationFactor(F,Da,ll){return this.interpolationType?Jt.interpolationFactor(this.interpolationType,F,Da,ll):0}}function jr(F,Da){const ll=Lr(F,Da);if("error"===ll.result)return ll;const cl=ll.value.expression,hl=vr(cl);if(!hl&&!kr(Da))return Sr([new A("","data expressions not supported")]);const dl=wr(cl,["zoom"]);if(!dl&&!Ar(Da))return Sr([new A("","zoom expressions not supported")]);const pl=Ur(cl);return pl||dl?pl instanceof A?Sr([pl]):pl instanceof Jt&&!Ir(Da)?Sr([new A("",'"interpolate" expressions cannot be used with this property')]):_r(pl?new Rr(hl?"camera":"composite",ll.value,pl.labels,pl instanceof Jt?pl.interpolation:void 0):new Or(hl?"constant":"source",ll.value)):Sr([new A("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qr{constructor(F,Da){this._parameters=F,this._specification=Da,k(this,Cr(this._parameters,this._specification))}static deserialize(F){return new qr(F._parameters,F._specification)}static serialize(F){return{_parameters:F._parameters,_specification:F._specification}}}function Ur(F){let Da=null;if(F instanceof Tt)Da=Ur(F.result);else if(F instanceof Wt){for(const ll of F.args)if(Da=Ur(ll),Da)break}else(F instanceof qt||F instanceof Jt)&&F.input instanceof fr&&"zoom"===F.input.name&&(Da=F);return Da instanceof A||F.eachChild((F=>{const ll=Ur(F);ll instanceof A?Da=ll:!Da&&ll?Da=new A("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Da&&ll&&Da!==ll&&(Da=new A("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),Da}function Nr(F){if(!0===F||!1===F)return!0;if(!Array.isArray(F)||0===F.length)return!1;switch(F[0]){case"has":return F.length>=2&&"$id"!==F[1]&&"$type"!==F[1];case"in":return F.length>=3&&("string"!=typeof F[1]||Array.isArray(F[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==F.length||Array.isArray(F[1])||Array.isArray(F[2]);case"any":case"all":for(const Da of F.slice(1))if(!Nr(Da)&&"boolean"!=typeof Da)return!1;return!0;default:return!0}}const bd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gr(F){if(null==F)return{filter:()=>!0,needGeometry:!1};Nr(F)||(F=Yr(F));const Da=Lr(F,bd);if("error"===Da.result)throw new Error(Da.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return{filter:(F,ll,cl)=>Da.value.evaluate(F,ll,{},cl),needGeometry:Hr(F)}}function Xr(F,Da){return F<Da?-1:F>Da?1:0}function Hr(F){if(!Array.isArray(F))return!1;if("within"===F[0]||"distance"===F[0])return!0;for(let Da=1;Da<F.length;Da++)if(Hr(F[Da]))return!0;return!1}function Yr(F){if(!F)return!0;const Da=F[0];return F.length<=1?"any"!==Da:"=="===Da?Jr(F[1],F[2],"=="):"!="===Da?Qr(Jr(F[1],F[2],"==")):"<"===Da||">"===Da||"<="===Da||">="===Da?Jr(F[1],F[2],Da):"any"===Da?(ll=F.slice(1),["any"].concat(ll.map(Yr))):"all"===Da?["all"].concat(F.slice(1).map(Yr)):"none"===Da?["all"].concat(F.slice(1).map(Yr).map(Qr)):"in"===Da?Kr(F[1],F.slice(2)):"!in"===Da?Qr(Kr(F[1],F.slice(2))):"has"===Da?Wr(F[1]):"!has"!==Da||Qr(Wr(F[1]));var ll}function Jr(F,Da,ll){switch(F){case"$type":return[`filter-type-${ll}`,Da];case"$id":return[`filter-id-${ll}`,Da];default:return[`filter-${ll}`,F,Da]}}function Kr(F,Da){if(0===Da.length)return!1;switch(F){case"$type":return["filter-type-in",["literal",Da]];case"$id":return["filter-id-in",["literal",Da]];default:return Da.length>200&&!Da.some((F=>typeof F!=typeof Da[0]))?["filter-in-large",F,["literal",Da.sort(Xr)]]:["filter-in-small",F,["literal",Da]]}}function Wr(F){switch(F){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",F]}}function Qr(F){return["!",F]}function tn(F){const Da=typeof F;if("number"===Da||"boolean"===Da||"string"===Da||null==F)return JSON.stringify(F);if(Array.isArray(F)){let Da="[";for(const ll of F)Da+=`${tn(ll)},`;return`${Da}]`}const ll=Object.keys(F).sort();let cl="{";for(let hl=0;hl<ll.length;hl++)cl+=`${JSON.stringify(ll[hl])}:${tn(F[ll[hl]])},`;return`${cl}}`}function en(F){let Da="";for(const ll of bl)Da+=`/${tn(F[ll])}`;return Da}function rn(F){const Da=F.value;return Da?[new S(F.key,Da,"constants have been deprecated as of v8")]:[]}function nn(F){return F instanceof Number||F instanceof String||F instanceof Boolean?F.valueOf():F}function sn(F){if(Array.isArray(F))return F.map(sn);if(F instanceof Object&&!(F instanceof Number||F instanceof String||F instanceof Boolean)){const Da={};for(const ll in F)Da[ll]=sn(F[ll]);return Da}return nn(F)}function on(F){const Da=F.key,ll=F.value,cl=F.valueSpec||{},hl=F.objectElementValidators||{},dl=F.style,pl=F.styleSpec,fl=F.validateSpec;let Al=[];const bl=Mr(ll);if("object"!==bl)return[new S(Da,ll,`object expected, ${bl} found`)];for(const kl in ll){const F=kl.split(".")[0],bl=cl[F]||cl["*"];let Dl;if(hl[F])Dl=hl[F];else if(cl[F])Dl=fl;else if(hl["*"])Dl=hl["*"];else{if(!cl["*"]){Al.push(new S(Da,ll[kl],`unknown property "${kl}"`));continue}Dl=fl}Al=Al.concat(Dl({key:(Da?`${Da}.`:Da)+kl,value:ll[kl],valueSpec:bl,style:dl,styleSpec:pl,object:ll,objectKey:kl,validateSpec:fl},ll))}for(const kl in cl)hl[kl]||cl[kl].required&&void 0===cl[kl].default&&void 0===ll[kl]&&Al.push(new S(Da,ll,`missing required property "${kl}"`));return Al}function an(F){const Da=F.value,ll=F.valueSpec,cl=F.style,hl=F.styleSpec,dl=F.key,pl=F.arrayElementValidator||F.validateSpec;if("array"!==Mr(Da))return[new S(dl,Da,`array expected, ${Mr(Da)} found`)];if(ll.length&&Da.length!==ll.length)return[new S(dl,Da,`array length ${ll.length} expected, length ${Da.length} found`)];if(ll["min-length"]&&Da.length<ll["min-length"])return[new S(dl,Da,`array length at least ${ll["min-length"]} expected, length ${Da.length} found`)];let fl={type:ll.value,values:ll.values};hl.$version<7&&(fl.function=ll.function),"object"===Mr(ll.value)&&(fl=ll.value);let Al=[];for(let bl=0;bl<Da.length;bl++)Al=Al.concat(pl({array:Da,arrayIndex:bl,value:Da[bl],valueSpec:fl,validateSpec:F.validateSpec,style:cl,styleSpec:hl,key:`${dl}[${bl}]`}));return Al}function ln(F){const Da=F.key,ll=F.value,cl=F.valueSpec;let hl=Mr(ll);return"number"===hl&&ll!=ll&&(hl="NaN"),"number"!==hl?[new S(Da,ll,`number expected, ${hl} found`)]:"minimum"in cl&&ll<cl.minimum?[new S(Da,ll,`${ll} is less than the minimum value ${cl.minimum}`)]:"maximum"in cl&&ll>cl.maximum?[new S(Da,ll,`${ll} is greater than the maximum value ${cl.maximum}`)]:[]}function un(F){const Da=F.valueSpec,ll=nn(F.value.type);let cl,hl,dl,pl={};const fl="categorical"!==ll&&void 0===F.value.property,Al=!fl,bl="array"===Mr(F.value.stops)&&"array"===Mr(F.value.stops[0])&&"object"===Mr(F.value.stops[0][0]),kl=on({key:F.key,value:F.value,valueSpec:F.styleSpec.function,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{stops:function(F){if("identity"===ll)return[new S(F.key,F.value,'identity function may not have a "stops" property')];let Da=[];const cl=F.value;return Da=Da.concat(an({key:F.key,value:cl,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:h})),"array"===Mr(cl)&&0===cl.length&&Da.push(new S(F.key,cl,"array must have at least one stop")),Da},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:Da,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return"identity"===ll&&fl&&kl.push(new S(F.key,F.value,'missing required property "property"')),"identity"===ll||F.value.stops||kl.push(new S(F.key,F.value,'missing required property "stops"')),"exponential"===ll&&F.valueSpec.expression&&!Ir(F.valueSpec)&&kl.push(new S(F.key,F.value,"exponential functions not supported")),F.styleSpec.$version>=8&&(Al&&!kr(F.valueSpec)?kl.push(new S(F.key,F.value,"property functions not supported")):fl&&!Ar(F.valueSpec)&&kl.push(new S(F.key,F.value,"zoom functions not supported"))),"categorical"!==ll&&!bl||void 0!==F.value.property||kl.push(new S(F.key,F.value,'"property" property is required')),kl;function h(F){let ll=[];const cl=F.value,fl=F.key;if("array"!==Mr(cl))return[new S(fl,cl,`array expected, ${Mr(cl)} found`)];if(2!==cl.length)return[new S(fl,cl,`array length 2 expected, length ${cl.length} found`)];if(bl){if("object"!==Mr(cl[0]))return[new S(fl,cl,`object expected, ${Mr(cl[0])} found`)];if(void 0===cl[0].zoom)return[new S(fl,cl,"object stop key must have zoom")];if(void 0===cl[0].value)return[new S(fl,cl,"object stop key must have value")];if(dl&&dl>nn(cl[0].zoom))return[new S(fl,cl[0].zoom,"stop zoom values must appear in ascending order")];nn(cl[0].zoom)!==dl&&(dl=nn(cl[0].zoom),hl=void 0,pl={}),ll=ll.concat(on({key:`${fl}[0]`,value:cl[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:ln,value:p}}))}else ll=ll.concat(p({key:`${fl}[0]`,value:cl[0],valueSpec:{},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},cl));return $r(sn(cl[1]))?ll.concat([new S(`${fl}[1]`,cl[1],"expressions are not allowed in function stops.")]):ll.concat(F.validateSpec({key:`${fl}[1]`,value:cl[1],valueSpec:Da,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function p(F,dl){const fl=Mr(F.value),Al=nn(F.value),bl=null!==F.value?F.value:dl;if(cl){if(fl!==cl)return[new S(F.key,bl,`${fl} stop domain type must match previous stop domain type ${cl}`)]}else cl=fl;if("number"!==fl&&"string"!==fl&&"boolean"!==fl)return[new S(F.key,bl,"stop domain value must be a number, string, or boolean")];if("number"!==fl&&"categorical"!==ll){let cl=`number expected, ${fl} found`;return kr(Da)&&void 0===ll&&(cl+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new S(F.key,bl,cl)]}return"categorical"!==ll||"number"!==fl||isFinite(Al)&&Math.floor(Al)===Al?"categorical"!==ll&&"number"===fl&&void 0!==hl&&Al<hl?[new S(F.key,bl,"stop domain values must appear in ascending order")]:(hl=Al,"categorical"===ll&&Al in pl?[new S(F.key,bl,"stop domain values must be unique")]:(pl[Al]=!0,[])):[new S(F.key,bl,`integer expected, found ${Al}`)]}}function cn(F){const Da=("property"===F.expressionContext?jr:Lr)(sn(F.value),F.valueSpec);if("error"===Da.result)return Da.value.map((Da=>new S(`${F.key}${Da.key}`,F.value,Da.message)));const ll=Da.value.expression||Da.value._styleExpression.expression;if("property"===F.expressionContext&&"text-font"===F.propertyKey&&!ll.outputDefined())return[new S(F.key,F.value,`Invalid data expression for "${F.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===F.expressionContext&&"layout"===F.propertyType&&!br(ll))return[new S(F.key,F.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===F.expressionContext&&!br(ll))return[new S(F.key,F.value,'"feature-state" data expressions are not supported with filters.')];if(F.expressionContext&&0===F.expressionContext.indexOf("cluster")){if(!wr(ll,["zoom","feature-state"]))return[new S(F.key,F.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===F.expressionContext&&!vr(ll))return[new S(F.key,F.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hn(F){const Da=F.key,ll=F.value,cl=F.valueSpec,hl=[];return Array.isArray(cl.values)?-1===cl.values.indexOf(nn(ll))&&hl.push(new S(Da,ll,`expected one of [${cl.values.join(", ")}], ${JSON.stringify(ll)} found`)):-1===Object.keys(cl.values).indexOf(nn(ll))&&hl.push(new S(Da,ll,`expected one of [${Object.keys(cl.values).join(", ")}], ${JSON.stringify(ll)} found`)),hl}function pn(F){return Nr(sn(F.value))?cn(k({},F,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fn(F)}function fn(F){const Da=F.value,ll=F.key;if("array"!==Mr(Da))return[new S(ll,Da,`array expected, ${Mr(Da)} found`)];const cl=F.styleSpec;let hl,dl=[];if(Da.length<1)return[new S(ll,Da,"filter array must have at least 1 element")];switch(dl=dl.concat(hn({key:`${ll}[0]`,value:Da[0],valueSpec:cl.filter_operator,style:F.style,styleSpec:F.styleSpec})),nn(Da[0])){case"<":case"<=":case">":case">=":Da.length>=2&&"$type"===nn(Da[1])&&dl.push(new S(ll,Da,`"$type" cannot be use with operator "${Da[0]}"`));case"==":case"!=":3!==Da.length&&dl.push(new S(ll,Da,`filter array for operator "${Da[0]}" must have 3 elements`));case"in":case"!in":Da.length>=2&&(hl=Mr(Da[1]),"string"!==hl&&dl.push(new S(`${ll}[1]`,Da[1],`string expected, ${hl} found`)));for(let pl=2;pl<Da.length;pl++)hl=Mr(Da[pl]),"$type"===nn(Da[1])?dl=dl.concat(hn({key:`${ll}[${pl}]`,value:Da[pl],valueSpec:cl.geometry_type,style:F.style,styleSpec:F.styleSpec})):"string"!==hl&&"number"!==hl&&"boolean"!==hl&&dl.push(new S(`${ll}[${pl}]`,Da[pl],`string, number, or boolean expected, ${hl} found`));break;case"any":case"all":case"none":for(let cl=1;cl<Da.length;cl++)dl=dl.concat(fn({key:`${ll}[${cl}]`,value:Da[cl],style:F.style,styleSpec:F.styleSpec}));break;case"has":case"!has":hl=Mr(Da[1]),2!==Da.length?dl.push(new S(ll,Da,`filter array for "${Da[0]}" operator must have 2 elements`)):"string"!==hl&&dl.push(new S(`${ll}[1]`,Da[1],`string expected, ${hl} found`))}return dl}function dn(F,Da){const ll=F.key,cl=F.validateSpec,hl=F.style,dl=F.styleSpec,pl=F.value,fl=F.objectKey,Al=dl[`${Da}_${F.layerType}`];if(!Al)return[];const bl=fl.match(/^(.*)-transition$/);if("paint"===Da&&bl&&Al[bl[1]]&&Al[bl[1]].transition)return cl({key:ll,value:pl,valueSpec:dl.transition,style:hl,styleSpec:dl});const kl=F.valueSpec||Al[fl];if(!kl)return[new S(ll,pl,`unknown property "${fl}"`)];let Dl;if("string"===Mr(pl)&&kr(kl)&&!kl.tokens&&(Dl=/^{([^}]+)}$/.exec(pl)))return[new S(ll,pl,`"${fl}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Dl[1])} }\`.`)];const Wl=[];return"symbol"===F.layerType&&("text-field"===fl&&hl&&!hl.glyphs&&Wl.push(new S(ll,pl,'use of "text-field" requires a style "glyphs" property')),"text-font"===fl&&zr(sn(pl))&&"identity"===nn(pl.type)&&Wl.push(new S(ll,pl,'"text-font" does not support identity functions'))),Wl.concat(cl({key:F.key,value:pl,valueSpec:kl,style:hl,styleSpec:dl,expressionContext:"property",propertyType:Da,propertyKey:fl}))}function yn(F){return dn(F,"paint")}function mn(F){return dn(F,"layout")}function gn(F){let Da=[];const ll=F.value,cl=F.key,hl=F.style,dl=F.styleSpec;ll.type||ll.ref||Da.push(new S(cl,ll,'either "type" or "ref" is required'));let pl=nn(ll.type);const fl=nn(ll.ref);if(ll.id){const dl=nn(ll.id);for(let pl=0;pl<F.arrayIndex;pl++){const F=hl.layers[pl];nn(F.id)===dl&&Da.push(new S(cl,ll.id,`duplicate layer id "${ll.id}", previously used at line ${F.id.__line__}`))}}if("ref"in ll){let F;["type","source","source-layer","filter","layout"].forEach((F=>{F in ll&&Da.push(new S(cl,ll[F],`"${F}" is prohibited for ref layers`))})),hl.layers.forEach((Da=>{nn(Da.id)===fl&&(F=Da)})),F?F.ref?Da.push(new S(cl,ll.ref,"ref cannot reference another ref layer")):pl=nn(F.type):Da.push(new S(cl,ll.ref,`ref layer "${fl}" not found`))}else if("background"!==pl)if(ll.source){const F=hl.sources&&hl.sources[ll.source],dl=F&&nn(F.type);F?"vector"===dl&&"raster"===pl?Da.push(new S(cl,ll.source,`layer "${ll.id}" requires a raster source`)):"raster-dem"!==dl&&"hillshade"===pl?Da.push(new S(cl,ll.source,`layer "${ll.id}" requires a raster-dem source`)):"raster"===dl&&"raster"!==pl?Da.push(new S(cl,ll.source,`layer "${ll.id}" requires a vector source`)):"vector"!==dl||ll["source-layer"]?"raster-dem"===dl&&"hillshade"!==pl?Da.push(new S(cl,ll.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==pl||!ll.paint||!ll.paint["line-gradient"]||"geojson"===dl&&F.lineMetrics||Da.push(new S(cl,ll,`layer "${ll.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):Da.push(new S(cl,ll,`layer "${ll.id}" must specify a "source-layer"`)):Da.push(new S(cl,ll.source,`source "${ll.source}" not found`))}else Da.push(new S(cl,ll,'missing required property "source"'));return Da=Da.concat(on({key:cl,value:ll,valueSpec:dl.layer,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":()=>[],type:()=>F.validateSpec({key:`${cl}.type`,value:ll.type,valueSpec:dl.layer.type,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,object:ll,objectKey:"type"}),filter:pn,layout:F=>on({layer:ll,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":F=>mn(k({layerType:pl},F))}}),paint:F=>on({layer:ll,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":F=>yn(k({layerType:pl},F))}})}})),Da}function xn(F){const Da=F.value,ll=F.key,cl=Mr(Da);return"string"!==cl?[new S(ll,Da,`string expected, ${cl} found`)]:[]}const wd={promoteId:function(F){let{key:Da,value:ll}=F;if("string"===Mr(ll))return xn({key:Da,value:ll});{const F=[];for(const cl in ll)F.push(...xn({key:`${Da}.${cl}`,value:ll[cl]}));return F}}};function bn(F){const Da=F.value,ll=F.key,cl=F.styleSpec,hl=F.style,dl=F.validateSpec;if(!Da.type)return[new S(ll,Da,'"type" is required')];const pl=nn(Da.type);let fl;switch(pl){case"vector":case"raster":return fl=on({key:ll,value:Da,valueSpec:cl[`source_${pl.replace("-","_")}`],style:F.style,styleSpec:cl,objectElementValidators:wd,validateSpec:dl}),fl;case"raster-dem":return fl=function(F){var Da;const ll=null!==(Da=F.sourceName)&&void 0!==Da?Da:"",cl=F.value,hl=F.styleSpec,dl=hl.source_raster_dem,pl=F.style;let fl=[];const Al=Mr(cl);if(void 0===cl)return fl;if("object"!==Al)return fl.push(new S("source_raster_dem",cl,`object expected, ${Al} found`)),fl;const bl="custom"===nn(cl.encoding),kl=["redFactor","greenFactor","blueFactor","baseShift"],Dl=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Wl in cl)!bl&&kl.includes(Wl)?fl.push(new S(Wl,cl[Wl],`In "${ll}": "${Wl}" is only valid when "encoding" is set to "custom". ${Dl} encoding found`)):dl[Wl]?fl=fl.concat(F.validateSpec({key:Wl,value:cl[Wl],valueSpec:dl[Wl],validateSpec:F.validateSpec,style:pl,styleSpec:hl})):fl.push(new S(Wl,cl[Wl],`unknown property "${Wl}"`));return fl}({sourceName:ll,value:Da,style:F.style,styleSpec:cl,validateSpec:dl}),fl;case"geojson":if(fl=on({key:ll,value:Da,valueSpec:cl.source_geojson,style:hl,styleSpec:cl,validateSpec:dl,objectElementValidators:wd}),Da.cluster)for(const F in Da.clusterProperties){const[cl,hl]=Da.clusterProperties[F],pl="string"==typeof cl?[cl,["accumulated"],["get",F]]:cl;fl.push(...cn({key:`${ll}.${F}.map`,value:hl,validateSpec:dl,expressionContext:"cluster-map"})),fl.push(...cn({key:`${ll}.${F}.reduce`,value:pl,validateSpec:dl,expressionContext:"cluster-reduce"}))}return fl;case"video":return on({key:ll,value:Da,valueSpec:cl.source_video,style:hl,validateSpec:dl,styleSpec:cl});case"image":return on({key:ll,value:Da,valueSpec:cl.source_image,style:hl,validateSpec:dl,styleSpec:cl});case"canvas":return[new S(ll,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hn({key:`${ll}.type`,value:Da.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:hl,validateSpec:dl,styleSpec:cl})}}function wn(F){const Da=F.value,ll=F.styleSpec,cl=ll.light,hl=F.style;let dl=[];const pl=Mr(Da);if(void 0===Da)return dl;if("object"!==pl)return dl=dl.concat([new S("light",Da,`object expected, ${pl} found`)]),dl;for(const fl in Da){const pl=fl.match(/^(.*)-transition$/);dl=dl.concat(pl&&cl[pl[1]]&&cl[pl[1]].transition?F.validateSpec({key:fl,value:Da[fl],valueSpec:ll.transition,validateSpec:F.validateSpec,style:hl,styleSpec:ll}):cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],validateSpec:F.validateSpec,style:hl,styleSpec:ll}):[new S(fl,Da[fl],`unknown property "${fl}"`)])}return dl}function _n(F){const Da=F.value,ll=F.styleSpec,cl=ll.sky,hl=F.style,dl=Mr(Da);if(void 0===Da)return[];if("object"!==dl)return[new S("sky",Da,`object expected, ${dl} found`)];let pl=[];for(const fl in Da)pl=pl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],style:hl,styleSpec:ll}):[new S(fl,Da[fl],`unknown property "${fl}"`)]);return pl}function Sn(F){const Da=F.value,ll=F.styleSpec,cl=ll.terrain,hl=F.style;let dl=[];const pl=Mr(Da);if(void 0===Da)return dl;if("object"!==pl)return dl=dl.concat([new S("terrain",Da,`object expected, ${pl} found`)]),dl;for(const fl in Da)dl=dl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],validateSpec:F.validateSpec,style:hl,styleSpec:ll}):[new S(fl,Da[fl],`unknown property "${fl}"`)]);return dl}function kn(F){let Da=[];const ll=F.value,cl=F.key;if(Array.isArray(ll)){const hl=[],dl=[];for(const pl in ll)ll[pl].id&&hl.includes(ll[pl].id)&&Da.push(new S(cl,ll,`all the sprites' ids must be unique, but ${ll[pl].id} is duplicated`)),hl.push(ll[pl].id),ll[pl].url&&dl.includes(ll[pl].url)&&Da.push(new S(cl,ll,`all the sprites' URLs must be unique, but ${ll[pl].url} is duplicated`)),dl.push(ll[pl].url),Da=Da.concat(on({key:`${cl}[${pl}]`,value:ll[pl],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:F.validateSpec}));return Da}return xn({key:cl,value:ll})}const Ed={"*":()=>[],array:an,boolean:function(F){const Da=F.value,ll=F.key,cl=Mr(Da);return"boolean"!==cl?[new S(ll,Da,`boolean expected, ${cl} found`)]:[]},number:ln,color:function(F){const Da=F.key,ll=F.value,cl=Mr(ll);return"string"!==cl?[new S(Da,ll,`color expected, ${cl} found`)]:pt.parse(String(ll))?[]:[new S(Da,ll,`color expected, "${ll}" found`)]},constants:rn,enum:hn,filter:pn,function:un,layer:gn,object:on,source:bn,light:wn,sky:_n,terrain:Sn,projection:function(F){const Da=F.value,ll=F.styleSpec,cl=ll.projection,hl=F.style,dl=Mr(Da);if(void 0===Da)return[];if("object"!==dl)return[new S("projection",Da,`object expected, ${dl} found`)];let pl=[];for(const fl in Da)pl=pl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],style:hl,styleSpec:ll}):[new S(fl,Da[fl],`unknown property "${fl}"`)]);return pl},string:xn,formatted:function(F){return 0===xn(F).length?[]:cn(F)},resolvedImage:function(F){return 0===xn(F).length?[]:cn(F)},padding:function(F){const Da=F.key,ll=F.value;if("array"===Mr(ll)){if(ll.length<1||ll.length>4)return[new S(Da,ll,`padding requires 1 to 4 values; ${ll.length} values found`)];const cl={type:"number"};let hl=[];for(let dl=0;dl<ll.length;dl++)hl=hl.concat(F.validateSpec({key:`${Da}[${dl}]`,value:ll[dl],validateSpec:F.validateSpec,valueSpec:cl}));return hl}return ln({key:Da,value:ll,valueSpec:{}})},variableAnchorOffsetCollection:function(F){const Da=F.key,ll=F.value,cl=Mr(ll),hl=F.styleSpec;if("array"!==cl||ll.length<1||ll.length%2!=0)return[new S(Da,ll,"variableAnchorOffsetCollection requires a non-empty array of even length")];let dl=[];for(let pl=0;pl<ll.length;pl+=2)dl=dl.concat(hn({key:`${Da}[${pl}]`,value:ll[pl],valueSpec:hl.layout_symbol["text-anchor"]})),dl=dl.concat(an({key:`${Da}[${pl+1}]`,value:ll[pl+1],valueSpec:{length:2,value:"number"},validateSpec:F.validateSpec,style:F.style,styleSpec:hl}));return dl},sprite:kn};function In(F){const Da=F.value,ll=F.valueSpec,cl=F.styleSpec;return F.validateSpec=In,ll.expression&&zr(nn(Da))?un(F):ll.expression&&$r(sn(Da))?cn(F):ll.type&&Ed[ll.type]?Ed[ll.type](F):on(k({},F,{valueSpec:ll.type?cl[ll.type]:ll}))}function Mn(F){const Da=F.value,ll=F.key,cl=xn(F);return cl.length||(-1===Da.indexOf("{fontstack}")&&cl.push(new S(ll,Da,'"glyphs" url must include a "{fontstack}" token')),-1===Da.indexOf("{range}")&&cl.push(new S(ll,Da,'"glyphs" url must include a "{range}" token'))),cl}function zn(F,Da){void 0===Da&&(Da=Al);let ll=[];return ll=ll.concat(In({key:"",value:F,valueSpec:Da.$root,styleSpec:Da,style:F,validateSpec:In,objectElementValidators:{glyphs:Mn,"*":()=>[]}})),F.constants&&(ll=ll.concat(rn({key:"constants",value:F.constants,style:F,styleSpec:Da,validateSpec:In}))),Cn(ll)}function Pn(F){return function(Da){return F({...Da,validateSpec:In})}}function Cn(F){return[].concat(F).sort(((F,Da)=>F.line-Da.line))}function Bn(F){return function(){for(var Da=arguments.length,ll=new Array(Da),cl=0;cl<Da;cl++)ll[cl]=arguments[cl];return Cn(F.apply(this,ll))}}zn.source=Bn(Pn(bn)),zn.sprite=Bn(Pn(kn)),zn.glyphs=Bn(Pn(Mn)),zn.light=Bn(Pn(wn)),zn.sky=Bn(Pn(_n)),zn.terrain=Bn(Pn(Sn)),zn.layer=Bn(Pn(gn)),zn.filter=Bn(Pn(pn)),zn.paintProperty=Bn(Pn(yn)),zn.layoutProperty=Bn(Pn(mn));const Md="AbortError";function Tn(){return new Error(Md)}const Sd={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Fn(F,Da){Sd.REGISTERED_PROTOCOLS[F]=Da}function Dn(F){delete Sd.REGISTERED_PROTOCOLS[F]}const kd="global-dispatcher";class Ln extends Error{constructor(F,Da,ll,cl){super(`AJAXError: ${Da} (${F}): ${ll}`),this.status=F,this.statusText=Da,this.url=ll,this.body=cl}}const On=()=>m(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,Rn=function(F,Da){if(/:\/\//.test(F.url)&&!/^https?:|^file:/.test(F.url)){const cl=Sd.REGISTERED_PROTOCOLS[(ll=F.url).substring(0,ll.indexOf("://"))];if(cl)return cl(F,Da);if(m(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:F,targetMapId:kd},Da)}var ll;if(!(F=>/^file:/.test(F)||/^file:/.test(On())&&!/^\w+:/.test(F))(F.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(F,Da){return t(this,void 0,void 0,(function*(){const ll=new Request(F.url,{method:F.method||"GET",body:F.body,credentials:F.credentials,headers:F.headers,cache:F.cache,referrer:On(),signal:Da.signal});"json"!==F.type||ll.headers.has("Accept")||ll.headers.set("Accept","application/json");const cl=yield fetch(ll);if(!cl.ok){const Da=yield cl.blob();throw new Ln(cl.status,cl.statusText,F.url,Da)}let hl;hl="arrayBuffer"===F.type||"image"===F.type?cl.arrayBuffer():"json"===F.type?cl.json():cl.text();const dl=yield hl;if(Da.signal.aborted)throw Tn();return{data:dl,cacheControl:cl.headers.get("Cache-Control"),expires:cl.headers.get("Expires")}}))}(F,Da);if(m(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:F,mustQueue:!0,targetMapId:kd},Da)}return function(F,Da){return new Promise(((ll,cl)=>{var hl;const dl=new XMLHttpRequest;dl.open(F.method||"GET",F.url,!0),"arrayBuffer"!==F.type&&"image"!==F.type||(dl.responseType="arraybuffer");for(const Da in F.headers)dl.setRequestHeader(Da,F.headers[Da]);"json"===F.type&&(dl.responseType="text",(null===(hl=F.headers)||void 0===hl?void 0:hl.Accept)||dl.setRequestHeader("Accept","application/json")),dl.withCredentials="include"===F.credentials,dl.onerror=()=>{cl(new Error(dl.statusText))},dl.onload=()=>{if(!Da.signal.aborted)if((dl.status>=200&&dl.status<300||0===dl.status)&&null!==dl.response){let Da=dl.response;if("json"===F.type)try{Da=JSON.parse(dl.response)}catch(F){return void cl(F)}ll({data:Da,cacheControl:dl.getResponseHeader("Cache-Control"),expires:dl.getResponseHeader("Expires")})}else{const Da=new Blob([dl.response],{type:dl.getResponseHeader("Content-Type")});cl(new Ln(dl.status,dl.statusText,F.url,Da))}},Da.signal.addEventListener("abort",(()=>{dl.abort(),cl(Tn())})),dl.send(F.body)}))}(F,Da)},Td={};function qn(F,Da,ll){if(void 0===ll&&(ll={}),Td[F])throw new Error(`${F} is already registered.`);Object.defineProperty(Da,"_classRegistryKey",{value:F,writeable:!1}),Td[F]={klass:Da,omit:ll.omit||[],shallow:ll.shallow||[]}}qn("Object",Object),qn("TransferableGridIndex",b),qn("Color",pt),qn("Error",Error),qn("AJAXError",Ln),qn("ResolvedImage",vt),qn("StylePropertyFunction",qr),qn("StyleExpression",Dr,{omit:["_evaluator"]}),qn("ZoomDependentExpression",Rr),qn("ZoomConstantExpression",Or),qn("CompoundExpression",fr,{omit:["_evaluate"]});for(const Gm in xd)xd[Gm]._classRegistryKey||qn(`Expression_${Gm}`,xd[Gm]);function Un(F){return F&&"undefined"!=typeof ArrayBuffer&&(F instanceof ArrayBuffer||F.constructor&&"ArrayBuffer"===F.constructor.name)}function Nn(F){return F.$name||F.constructor._classRegistryKey}function Zn(F){return!function(F){if(null===F||"object"!=typeof F)return!1;const Da=Nn(F);return!(!Da||"Object"===Da)}(F)&&(null==F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||F instanceof Boolean||F instanceof Number||F instanceof String||F instanceof Date||F instanceof RegExp||F instanceof Blob||F instanceof Error||Un(F)||g(F)||ArrayBuffer.isView(F)||F instanceof ImageData)}function Gn(F,Da){if(Zn(F))return(Un(F)||g(F))&&Da&&Da.push(F),ArrayBuffer.isView(F)&&Da&&Da.push(F.buffer),F instanceof ImageData&&Da&&Da.push(F.data.buffer),F;if(Array.isArray(F)){const ll=[];for(const cl of F)ll.push(Gn(cl,Da));return ll}if("object"!=typeof F)throw new Error("can't serialize object of type "+typeof F);const ll=Nn(F);if(!ll)throw new Error(`can't serialize object of unregistered class ${F.constructor.name}`);if(!Td[ll])throw new Error(`${ll} is not registered.`);const{klass:cl}=Td[ll],hl=cl.serialize?cl.serialize(F,Da):{};if(cl.serialize){if(Da&&hl===Da[Da.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const cl in F){if(!F.hasOwnProperty(cl))continue;if(Td[ll].omit.indexOf(cl)>=0)continue;const dl=F[cl];hl[cl]=Td[ll].shallow.indexOf(cl)>=0?dl:Gn(dl,Da)}F instanceof Error&&(hl.message=F.message)}if(hl.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ll&&(hl.$name=ll),hl}function Xn(F){if(Zn(F))return F;if(Array.isArray(F))return F.map(Xn);if("object"!=typeof F)throw new Error("can't deserialize object of type "+typeof F);const Da=Nn(F)||"Object";if(!Td[Da])throw new Error(`can't deserialize unregistered class ${Da}`);const{klass:ll}=Td[Da];if(!ll)throw new Error(`can't deserialize unregistered class ${Da}`);if(ll.deserialize)return ll.deserialize(F);const cl=Object.create(ll.prototype);for(const hl of Object.keys(F)){if("$name"===hl)continue;const ll=F[hl];cl[hl]=Td[Da].shallow.indexOf(hl)>=0?ll:Xn(ll)}return cl}class Hn{constructor(F){this._methodToThrottle=F,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}class Yn{constructor(F,Da){this.target=F,this.mapId=Da,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Hn((()=>this.process())),this.subscription=function(F,Da,ll){return F.addEventListener(Da,ll,!1),{unsubscribe:()=>{F.removeEventListener(Da,ll,!1)}}}(this.target,"message",(F=>this.receive(F))),this.globalScope=m(self)?F:window}registerMessageHandler(F,Da){this.messageHandlers[F]=Da}sendAsync(F,Da){return new Promise(((ll,cl)=>{const hl=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[hl]={resolve:ll,reject:cl},Da&&Da.signal.addEventListener("abort",(()=>{delete this.resolveRejects[hl];const Da={id:hl,type:"<cancel>",origin:location.origin,targetMapId:F.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Da)}),{once:!0});const dl=[],pl=Object.assign(Object.assign({},F),{id:hl,sourceMapId:this.mapId,origin:location.origin,data:Gn(F.data,dl)});this.target.postMessage(pl,{transfer:dl})}))}receive(F){const Da=F.data,ll=Da.id;if(!("file://"!==Da.origin&&"file://"!==location.origin&&"resource://android"!==Da.origin&&"resource://android"!==location.origin&&Da.origin!==location.origin||Da.targetMapId&&this.mapId!==Da.targetMapId)){if("<cancel>"===Da.type){delete this.tasks[ll];const F=this.abortControllers[ll];return delete this.abortControllers[ll],void(F&&F.abort())}if(m(self)||Da.mustQueue)return this.tasks[ll]=Da,this.taskQueue.push(ll),void this.invoker.trigger();this.processTask(ll,Da)}}process(){if(0===this.taskQueue.length)return;const F=this.taskQueue.shift(),Da=this.tasks[F];delete this.tasks[F],this.taskQueue.length>0&&this.invoker.trigger(),Da&&this.processTask(F,Da)}processTask(F,Da){return t(this,void 0,void 0,(function*(){if("<response>"===Da.type){const ll=this.resolveRejects[F];if(delete this.resolveRejects[F],!ll)return;return void(Da.error?ll.reject(Xn(Da.error)):ll.resolve(Xn(Da.data)))}if(!this.messageHandlers[Da.type])return void this.completeTask(F,new Error(`Could not find a registered handler for ${Da.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const ll=Xn(Da.data),cl=new AbortController;this.abortControllers[F]=cl;try{const hl=yield this.messageHandlers[Da.type](Da.sourceMapId,ll,cl);this.completeTask(F,null,hl)}catch(ll){this.completeTask(F,ll)}}))}completeTask(F,Da,ll){const cl=[];delete this.abortControllers[F];const hl={id:F,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:Da?Gn(Da):null,data:Gn(ll,cl)};this.target.postMessage(hl,{transfer:cl})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}}function Jn(F,Da,ll){ll[F]&&-1!==ll[F].indexOf(Da)||(ll[F]=ll[F]||[],ll[F].push(Da))}function Kn(F,Da,ll){if(ll&&ll[F]){const cl=ll[F].indexOf(Da);-1!==cl&&ll[F].splice(cl,1)}}class Wn{constructor(F,Da){void 0===Da&&(Da={}),c(this,Da),this.type=F}}class Qn extends Wn{constructor(F,Da){void 0===Da&&(Da={}),super("error",c({error:F},Da))}}class ti{on(F,Da){return this._listeners=this._listeners||{},Jn(F,Da,this._listeners),this}off(F,Da){return Kn(F,Da,this._listeners),Kn(F,Da,this._oneTimeListeners),this}once(F,Da){return Da?(this._oneTimeListeners=this._oneTimeListeners||{},Jn(F,Da,this._oneTimeListeners),this):new Promise((Da=>this.once(F,Da)))}fire(F,Da){"string"==typeof F&&(F=new Wn(F,Da||{}));const ll=F.type;if(this.listens(ll)){F.target=this;const Da=this._listeners&&this._listeners[ll]?this._listeners[ll].slice():[];for(const ll of Da)ll.call(this,F);const cl=this._oneTimeListeners&&this._oneTimeListeners[ll]?this._oneTimeListeners[ll].slice():[];for(const dl of cl)Kn(ll,dl,this._oneTimeListeners),dl.call(this,F);const hl=this._eventedParent;hl&&(c(F,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),hl.fire(F))}else F instanceof Qn&&console.error(F.error);return this}listens(F){return this._listeners&&this._listeners[F]&&this._listeners[F].length>0||this._oneTimeListeners&&this._oneTimeListeners[F]&&this._oneTimeListeners[F].length>0||this._eventedParent&&this._eventedParent.listens(F)}setEventedParent(F,Da){return this._eventedParent=F,this._eventedParentData=Da,this}}const Id=zn,Cd=Id.paintProperty,Ld=Id.layoutProperty;class ii{constructor(){this.first=!0}update(F,Da){const ll=Math.floor(F);return this.first?(this.first=!1,this.lastIntegerZoom=ll,this.lastIntegerZoomTime=0,this.lastZoom=F,this.lastFloorZoom=ll,!0):(this.lastFloorZoom>ll?(this.lastIntegerZoom=ll+1,this.lastIntegerZoomTime=Da):this.lastFloorZoom<ll&&(this.lastIntegerZoom=ll,this.lastIntegerZoomTime=Da),F!==this.lastZoom&&(this.lastZoom=F,this.lastFloorZoom=ll,!0))}}const si_Latin_1_Supplement=F=>F>=128&&F<=255,si_Khmer=F=>F>=6016&&F<=6143,si_General_Punctuation=F=>F>=8192&&F<=8303,si_Letterlike_Symbols=F=>F>=8448&&F<=8527,si_Number_Forms=F=>F>=8528&&F<=8591,si_Miscellaneous_Technical=F=>F>=8960&&F<=9215,si_Control_Pictures=F=>F>=9216&&F<=9279,si_Optical_Character_Recognition=F=>F>=9280&&F<=9311,si_Enclosed_Alphanumerics=F=>F>=9312&&F<=9471,si_Geometric_Shapes=F=>F>=9632&&F<=9727,si_Miscellaneous_Symbols=F=>F>=9728&&F<=9983,si_Miscellaneous_Symbols_and_Arrows=F=>F>=11008&&F<=11263,si_Ideographic_Description_Characters=F=>F>=12272&&F<=12287,si_CJK_Symbols_and_Punctuation=F=>F>=12288&&F<=12351,si_Katakana=F=>F>=12448&&F<=12543,si_Kanbun=F=>F>=12688&&F<=12703,si_CJK_Strokes=F=>F>=12736&&F<=12783,si_Enclosed_CJK_Letters_and_Months=F=>F>=12800&&F<=13055,si_CJK_Compatibility=F=>F>=13056&&F<=13311,si_Yijing_Hexagram_Symbols=F=>F>=19904&&F<=19967,si_Private_Use_Area=F=>F>=57344&&F<=63743,si_Vertical_Forms=F=>F>=65040&&F<=65055,si_CJK_Compatibility_Forms=F=>F>=65072&&F<=65103,si_Small_Form_Variants=F=>F>=65104&&F<=65135,si_Halfwidth_and_Fullwidth_Forms=F=>F>=65280&&F<=65519;function oi(F){for(const Da of F)if(pi(Da.charCodeAt(0)))return!0;return!1}function ai(F){for(const Da of F)if(!ci(Da.charCodeAt(0)))return!1;return!0}function li(F){const Da=F.map((F=>{try{return new RegExp(`\\p{sc=${F}}`,"u").source}catch(F){return null}})).filter((F=>F));return new RegExp(Da.join("|"),"u")}const zd=li(["Arab","Dupl","Mong","Ougr","Syrc"]);function ci(F){return!zd.test(String.fromCodePoint(F))}const Pd=li(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function pi(F){return!(746!==F&&747!==F&&(F<4352||!(si_CJK_Compatibility_Forms(F)&&!(F>=65097&&F<=65103)||si_CJK_Compatibility(F)||si_CJK_Strokes(F)||!(!si_CJK_Symbols_and_Punctuation(F)||F>=12296&&F<=12305||F>=12308&&F<=12319||12336===F)||si_Enclosed_CJK_Letters_and_Months(F)||si_Ideographic_Description_Characters(F)||si_Kanbun(F)||si_Katakana(F)&&12540!==F||!(!si_Halfwidth_and_Fullwidth_Forms(F)||65288===F||65289===F||65293===F||F>=65306&&F<=65310||65339===F||65341===F||65343===F||F>=65371&&F<=65503||65507===F||F>=65512&&F<=65519)||!(!si_Small_Form_Variants(F)||F>=65112&&F<=65118||F>=65123&&F<=65126)||si_Vertical_Forms(F)||si_Yijing_Hexagram_Symbols(F)||/\p{sc=Cans}/u.test(String.fromCodePoint(F))||/\p{sc=Hang}/u.test(String.fromCodePoint(F))||Pd.test(String.fromCodePoint(F)))))}function fi(F){return!(pi(F)||function(F){return!!(si_Latin_1_Supplement(F)&&(167===F||169===F||174===F||177===F||188===F||189===F||190===F||215===F||247===F)||si_General_Punctuation(F)&&(8214===F||8224===F||8225===F||8240===F||8241===F||8251===F||8252===F||8258===F||8263===F||8264===F||8265===F||8273===F)||si_Letterlike_Symbols(F)||si_Number_Forms(F)||si_Miscellaneous_Technical(F)&&(F>=8960&&F<=8967||F>=8972&&F<=8991||F>=8996&&F<=9e3||9003===F||F>=9085&&F<=9114||F>=9150&&F<=9165||9167===F||F>=9169&&F<=9179||F>=9186&&F<=9215)||si_Control_Pictures(F)&&9251!==F||si_Optical_Character_Recognition(F)||si_Enclosed_Alphanumerics(F)||si_Geometric_Shapes(F)||si_Miscellaneous_Symbols(F)&&!(F>=9754&&F<=9759)||si_Miscellaneous_Symbols_and_Arrows(F)&&(F>=11026&&F<=11055||F>=11088&&F<=11097||F>=11192&&F<=11243)||si_CJK_Symbols_and_Punctuation(F)||si_Katakana(F)||si_Private_Use_Area(F)||si_CJK_Compatibility_Forms(F)||si_Small_Form_Variants(F)||si_Halfwidth_and_Fullwidth_Forms(F)||8734===F||8756===F||8757===F||F>=9984&&F<=10087||F>=10102&&F<=10131||65532===F||65533===F)}(F))}const Dd=li(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function yi(F){return Dd.test(String.fromCodePoint(F))}function mi(F,Da){return!(!Da&&yi(F)||F>=2304&&F<=3583||F>=3840&&F<=4255||si_Khmer(F))}function gi(F){for(const Da of F)if(yi(Da.charCodeAt(0)))return!0;return!1}const Rd=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(F){this.pluginStatus=F.pluginStatus,this.pluginURL=F.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(F){this.applyArabicShaping=F.applyArabicShaping,this.processBidirectionalText=F.processBidirectionalText,this.processStyledBidirectionalText=F.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class vi{constructor(F,Da){this.zoom=F,Da?(this.now=Da.now,this.fadeDuration=Da.fadeDuration,this.zoomHistory=Da.zoomHistory,this.transition=Da.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ii,this.transition={})}isSupportedScript(F){return function(F,Da){for(const ll of F)if(!mi(ll.charCodeAt(0),Da))return!1;return!0}(F,"loaded"===Rd.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const F=this.zoom,Da=F-Math.floor(F),ll=this.crossFadingFactor();return F>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:Da+(1-Da)*ll}:{fromScale:.5,toScale:1,t:1-(1-ll)*Da}}}class bi{constructor(F,Da){this.property=F,this.value=Da,this.expression=function(F,Da){if(zr(F))return new qr(F,Da);if($r(F)){const ll=jr(F,Da);if("error"===ll.result)throw new Error(ll.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return ll.value}{let ll=F;return"color"===Da.type&&"string"==typeof F?ll=pt.parse(F):"padding"!==Da.type||"number"!=typeof F&&!Array.isArray(F)?"variableAnchorOffsetCollection"===Da.type&&Array.isArray(F)&&(ll=xt.parse(F)):ll=mt.parse(F),{kind:"constant",evaluate:()=>ll}}}(void 0===Da?F.specification.default:Da,F.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(F,Da,ll){return this.property.possiblyEvaluate(this,F,Da,ll)}}class wi{constructor(F){this.property=F,this.value=new bi(F,void 0)}transitioned(F,Da){return new Si(this.property,this.value,Da,c({},F.transition,this.transition),F.now)}untransitioned(){return new Si(this.property,this.value,null,{},0)}}class _i{constructor(F){this._properties=F,this._values=Object.create(F.defaultTransitionablePropertyValues)}getValue(F){return p(this._values[F].value.value)}setValue(F,Da){Object.prototype.hasOwnProperty.call(this._values,F)||(this._values[F]=new wi(this._values[F].property)),this._values[F].value=new bi(this._values[F].property,null===Da?void 0:p(Da))}getTransition(F){return p(this._values[F].transition)}setTransition(F,Da){Object.prototype.hasOwnProperty.call(this._values,F)||(this._values[F]=new wi(this._values[F].property)),this._values[F].transition=p(Da)||void 0}serialize(){const F={};for(const Da of Object.keys(this._values)){const ll=this.getValue(Da);void 0!==ll&&(F[Da]=ll);const cl=this.getTransition(Da);void 0!==cl&&(F[`${Da}-transition`]=cl)}return F}transitioned(F,Da){const ll=new ki(this._properties);for(const cl of Object.keys(this._values))ll._values[cl]=this._values[cl].transitioned(F,Da._values[cl]);return ll}untransitioned(){const F=new ki(this._properties);for(const Da of Object.keys(this._values))F._values[Da]=this._values[Da].untransitioned();return F}}class Si{constructor(F,Da,ll,cl,hl){this.property=F,this.value=Da,this.begin=hl+cl.delay||0,this.end=this.begin+cl.duration||0,F.specification.transition&&(cl.delay||cl.duration)&&(this.prior=ll)}possiblyEvaluate(F,Da,ll){const cl=F.now||0,hl=this.value.possiblyEvaluate(F,Da,ll),dl=this.prior;if(dl){if(cl>this.end)return this.prior=null,hl;if(this.value.isDataDriven())return this.prior=null,hl;if(cl<this.begin)return dl.possiblyEvaluate(F,Da,ll);{const pl=(cl-this.begin)/(this.end-this.begin);return this.property.interpolate(dl.possiblyEvaluate(F,Da,ll),hl,function(F){if(F<=0)return 0;if(F>=1)return 1;const Da=F*F,ll=Da*F;return 4*(F<.5?ll:3*(F-Da)+ll-.75)}(pl))}}return hl}}class ki{constructor(F){this._properties=F,this._values=Object.create(F.defaultTransitioningPropertyValues)}possiblyEvaluate(F,Da,ll){const cl=new Mi(this._properties);for(const hl of Object.keys(this._values))cl._values[hl]=this._values[hl].possiblyEvaluate(F,Da,ll);return cl}hasTransition(){for(const F of Object.keys(this._values))if(this._values[F].prior)return!0;return!1}}class Ai{constructor(F){this._properties=F,this._values=Object.create(F.defaultPropertyValues)}hasValue(F){return void 0!==this._values[F].value}getValue(F){return p(this._values[F].value)}setValue(F,Da){this._values[F]=new bi(this._values[F].property,null===Da?void 0:p(Da))}serialize(){const F={};for(const Da of Object.keys(this._values)){const ll=this.getValue(Da);void 0!==ll&&(F[Da]=ll)}return F}possiblyEvaluate(F,Da,ll){const cl=new Mi(this._properties);for(const hl of Object.keys(this._values))cl._values[hl]=this._values[hl].possiblyEvaluate(F,Da,ll);return cl}}class Ii{constructor(F,Da,ll){this.property=F,this.value=Da,this.parameters=ll}isConstant(){return"constant"===this.value.kind}constantOr(F){return"constant"===this.value.kind?this.value.value:F}evaluate(F,Da,ll,cl){return this.property.evaluate(this.value,this.parameters,F,Da,ll,cl)}}class Mi{constructor(F){this._properties=F,this._values=Object.create(F.defaultPossiblyEvaluatedValues)}get(F){return this._values[F]}}class zi{constructor(F){this.specification=F}possiblyEvaluate(F,Da){if(F.isDataDriven())throw new Error("Value should not be data driven");return F.expression.evaluate(Da)}interpolate(F,Da,ll){const cl=cd[this.specification.type];return cl?cl(F,Da,ll):F}}class Pi{constructor(F,Da){this.specification=F,this.overrides=Da}possiblyEvaluate(F,Da,ll,cl){return new Ii(this,"constant"===F.expression.kind||"camera"===F.expression.kind?{kind:"constant",value:F.expression.evaluate(Da,null,{},ll,cl)}:F.expression,Da)}interpolate(F,Da,ll){if("constant"!==F.value.kind||"constant"!==Da.value.kind)return F;if(void 0===F.value.value||void 0===Da.value.value)return new Ii(this,{kind:"constant",value:void 0},F.parameters);const cl=cd[this.specification.type];if(cl){const hl=cl(F.value.value,Da.value.value,ll);return new Ii(this,{kind:"constant",value:hl},F.parameters)}return F}evaluate(F,Da,ll,cl,hl,dl){return"constant"===F.kind?F.value:F.evaluate(Da,ll,cl,hl,dl)}}class Ci extends Pi{possiblyEvaluate(F,Da,ll,cl){if(void 0===F.value)return new Ii(this,{kind:"constant",value:void 0},Da);if("constant"===F.expression.kind){const hl=F.expression.evaluate(Da,null,{},ll,cl),dl="resolvedImage"===F.property.specification.type&&"string"!=typeof hl?hl.name:hl,pl=this._calculate(dl,dl,dl,Da);return new Ii(this,{kind:"constant",value:pl},Da)}if("camera"===F.expression.kind){const ll=this._calculate(F.expression.evaluate({zoom:Da.zoom-1}),F.expression.evaluate({zoom:Da.zoom}),F.expression.evaluate({zoom:Da.zoom+1}),Da);return new Ii(this,{kind:"constant",value:ll},Da)}return new Ii(this,F.expression,Da)}evaluate(F,Da,ll,cl,hl,dl){if("source"===F.kind){const pl=F.evaluate(Da,ll,cl,hl,dl);return this._calculate(pl,pl,pl,Da)}return"composite"===F.kind?this._calculate(F.evaluate({zoom:Math.floor(Da.zoom)-1},ll,cl),F.evaluate({zoom:Math.floor(Da.zoom)},ll,cl),F.evaluate({zoom:Math.floor(Da.zoom)+1},ll,cl),Da):F.value}_calculate(F,Da,ll,cl){return cl.zoom>cl.zoomHistory.lastIntegerZoom?{from:F,to:Da}:{from:ll,to:Da}}interpolate(F){return F}}class Bi{constructor(F){this.specification=F}possiblyEvaluate(F,Da,ll,cl){if(void 0!==F.value){if("constant"===F.expression.kind){const hl=F.expression.evaluate(Da,null,{},ll,cl);return this._calculate(hl,hl,hl,Da)}return this._calculate(F.expression.evaluate(new vi(Math.floor(Da.zoom-1),Da)),F.expression.evaluate(new vi(Math.floor(Da.zoom),Da)),F.expression.evaluate(new vi(Math.floor(Da.zoom+1),Da)),Da)}}_calculate(F,Da,ll,cl){return cl.zoom>cl.zoomHistory.lastIntegerZoom?{from:F,to:Da}:{from:ll,to:Da}}interpolate(F){return F}}class Vi{constructor(F){this.specification=F}possiblyEvaluate(F,Da,ll,cl){return!!F.expression.evaluate(Da,null,{},ll,cl)}interpolate(){return!1}}class Ti{constructor(F){this.properties=F,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const Da in F){const ll=F[Da];ll.specification.overridable&&this.overridableProperties.push(Da);const cl=this.defaultPropertyValues[Da]=new bi(ll,void 0),hl=this.defaultTransitionablePropertyValues[Da]=new wi(ll);this.defaultTransitioningPropertyValues[Da]=hl.untransitioned(),this.defaultPossiblyEvaluatedValues[Da]=cl.possiblyEvaluate({})}}}qn("DataDrivenProperty",Pi),qn("DataConstantProperty",zi),qn("CrossFadedDataDrivenProperty",Ci),qn("CrossFadedProperty",Bi),qn("ColorRampProperty",Vi);const Nd="-transition";class Fi extends ti{constructor(F,Da){if(super(),this.id=F.id,this.type=F.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==F.type&&(this.metadata=F.metadata,this.minzoom=F.minzoom,this.maxzoom=F.maxzoom,"background"!==F.type&&(this.source=F.source,this.sourceLayer=F["source-layer"],this.filter=F.filter),Da.layout&&(this._unevaluatedLayout=new Ai(Da.layout)),Da.paint)){this._transitionablePaint=new _i(Da.paint);for(const Da in F.paint)this.setPaintProperty(Da,F.paint[Da],{validate:!1});for(const Da in F.layout)this.setLayoutProperty(Da,F.layout[Da],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mi(Da.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(F){return"visibility"===F?this.visibility:this._unevaluatedLayout.getValue(F)}setLayoutProperty(F,Da,ll){void 0===ll&&(ll={}),null!=Da&&this._validate(Ld,`layers.${this.id}.layout.${F}`,F,Da,ll)||("visibility"!==F?this._unevaluatedLayout.setValue(F,Da):this.visibility=Da)}getPaintProperty(F){return F.endsWith(Nd)?this._transitionablePaint.getTransition(F.slice(0,-11)):this._transitionablePaint.getValue(F)}setPaintProperty(F,Da,ll){if(void 0===ll&&(ll={}),null!=Da&&this._validate(Cd,`layers.${this.id}.paint.${F}`,F,Da,ll))return!1;if(F.endsWith(Nd))return this._transitionablePaint.setTransition(F.slice(0,-11),Da||void 0),!1;{const ll=this._transitionablePaint._values[F],cl="cross-faded-data-driven"===ll.property.specification["property-type"],hl=ll.value.isDataDriven(),dl=ll.value;this._transitionablePaint.setValue(F,Da),this._handleSpecialPaintPropertyUpdate(F);const pl=this._transitionablePaint._values[F].value;return pl.isDataDriven()||hl||cl||this._handleOverridablePaintPropertyUpdate(F,dl,pl)}}_handleSpecialPaintPropertyUpdate(F){}_handleOverridablePaintPropertyUpdate(F,Da,ll){return!1}isHidden(F){return!!(this.minzoom&&F<this.minzoom)||!!(this.maxzoom&&F>=this.maxzoom)||"none"===this.visibility}updateTransitions(F){this._transitioningPaint=this._transitionablePaint.transitioned(F,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(F,Da){F.getCrossfadeParameters&&(this._crossfadeParameters=F.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(F,void 0,Da)),this.paint=this._transitioningPaint.possiblyEvaluate(F,void 0,Da)}serialize(){const F={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(F.layout=F.layout||{},F.layout.visibility=this.visibility),function(F,Da){const ll={};for(const cl in F)Da.call(this,F[cl],cl,F)&&(ll[cl]=F[cl]);return ll}(F,((F,Da)=>!(void 0===F||"layout"===Da&&!Object.keys(F).length||"paint"===Da&&!Object.keys(F).length)))}_validate(F,Da,ll,cl,hl){return void 0===hl&&(hl={}),(!hl||!1!==hl.validate)&&function(F,Da){let ll=!1;if(Da&&Da.length)for(const cl of Da)F.fire(new Qn(new Error(cl.message))),ll=!0;return ll}(this,F.call(Id,{key:Da,layerType:this.type,objectKey:ll,value:cl,styleSpec:Al,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const F in this.paint._values){const Da=this.paint.get(F);if(Da instanceof Ii&&kr(Da.property.specification)&&("source"===Da.value.kind||"composite"===Da.value.kind)&&Da.value.isStateDependent)return!0}return!1}}const Ud={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $i{constructor(F,Da){this._structArray=F,this._pos1=Da*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Li{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(F,Da){return F._trim(),Da&&(F.isTransferred=!0,Da.push(F.arrayBuffer)),{length:F.length,arrayBuffer:F.arrayBuffer}}static deserialize(F){const Da=Object.create(this.prototype);return Da.arrayBuffer=F.arrayBuffer,Da.length=F.length,Da.capacity=F.arrayBuffer.byteLength/Da.bytesPerElement,Da._refreshViews(),Da}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(F){this.reserve(F),this.length=F}reserve(F){if(F>this.capacity){this.capacity=Math.max(F,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const Da=this.uint8;this._refreshViews(),Da&&this.uint8.set(Da)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Oi(F,Da){void 0===Da&&(Da=1);let ll=0,cl=0;return{members:F.map((F=>{const hl=Ud[F.type].BYTES_PER_ELEMENT,dl=ll=Ri(ll,Math.max(Da,hl)),pl=F.components||1;return cl=Math.max(cl,hl),ll+=hl*pl,{name:F.name,type:F.type,components:pl,offset:dl}})),size:Ri(ll,Math.max(cl,Da)),alignment:Da}}function Ri(F,Da){return Math.ceil(F/Da)*Da}class ji extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.int16[cl+0]=Da,this.int16[cl+1]=ll,F}}ji.prototype.bytesPerElement=4,qn("StructArrayLayout2i4",ji);class qi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.int16[hl+0]=Da,this.int16[hl+1]=ll,this.int16[hl+2]=cl,F}}qi.prototype.bytesPerElement=6,qn("StructArrayLayout3i6",qi);class Ui extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl){const hl=this.length;return this.resize(hl+1),this.emplace(hl,F,Da,ll,cl)}emplace(F,Da,ll,cl,hl){const dl=4*F;return this.int16[dl+0]=Da,this.int16[dl+1]=ll,this.int16[dl+2]=cl,this.int16[dl+3]=hl,F}}Ui.prototype.bytesPerElement=8,qn("StructArrayLayout4i8",Ui);class Ni extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=6*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.int16[fl+2]=cl,this.int16[fl+3]=hl,this.int16[fl+4]=dl,this.int16[fl+5]=pl,F}}Ni.prototype.bytesPerElement=12,qn("StructArrayLayout2i4i12",Ni);class Zi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=4*F,Al=8*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.uint8[Al+4]=cl,this.uint8[Al+5]=hl,this.uint8[Al+6]=dl,this.uint8[Al+7]=pl,F}}Zi.prototype.bytesPerElement=8,qn("StructArrayLayout2i4ub8",Zi);class Gi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.float32[cl+0]=Da,this.float32[cl+1]=ll,F}}Gi.prototype.bytesPerElement=8,qn("StructArrayLayout2f8",Gi);class Xi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){const kl=this.length;return this.resize(kl+1),this.emplace(kl,F,Da,ll,cl,hl,dl,pl,fl,Al,bl)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl){const Dl=10*F;return this.uint16[Dl+0]=Da,this.uint16[Dl+1]=ll,this.uint16[Dl+2]=cl,this.uint16[Dl+3]=hl,this.uint16[Dl+4]=dl,this.uint16[Dl+5]=pl,this.uint16[Dl+6]=fl,this.uint16[Dl+7]=Al,this.uint16[Dl+8]=bl,this.uint16[Dl+9]=kl,F}}Xi.prototype.bytesPerElement=20,qn("StructArrayLayout10ui20",Xi);class Hi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){const Wl=this.length;return this.resize(Wl+1),this.emplace(Wl,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=12*F;return this.int16[Ql+0]=Da,this.int16[Ql+1]=ll,this.int16[Ql+2]=cl,this.int16[Ql+3]=hl,this.uint16[Ql+4]=dl,this.uint16[Ql+5]=pl,this.uint16[Ql+6]=fl,this.uint16[Ql+7]=Al,this.int16[Ql+8]=bl,this.int16[Ql+9]=kl,this.int16[Ql+10]=Dl,this.int16[Ql+11]=Wl,F}}Hi.prototype.bytesPerElement=24,qn("StructArrayLayout4i4ui4i24",Hi);class Yi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.float32[hl+0]=Da,this.float32[hl+1]=ll,this.float32[hl+2]=cl,F}}Yi.prototype.bytesPerElement=12,qn("StructArrayLayout3f12",Yi);class Ji extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.uint32[1*F+0]=Da,F}}Ji.prototype.bytesPerElement=4,qn("StructArrayLayout1ul4",Ji);class Ki extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=this.length;return this.resize(bl+1),this.emplace(bl,F,Da,ll,cl,hl,dl,pl,fl,Al)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){const kl=10*F,Dl=5*F;return this.int16[kl+0]=Da,this.int16[kl+1]=ll,this.int16[kl+2]=cl,this.int16[kl+3]=hl,this.int16[kl+4]=dl,this.int16[kl+5]=pl,this.uint32[Dl+3]=fl,this.uint16[kl+8]=Al,this.uint16[kl+9]=bl,F}}Ki.prototype.bytesPerElement=20,qn("StructArrayLayout6i1ul2ui20",Ki);class Wi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=6*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.int16[fl+2]=cl,this.int16[fl+3]=hl,this.int16[fl+4]=dl,this.int16[fl+5]=pl,F}}Wi.prototype.bytesPerElement=12,qn("StructArrayLayout2i2i2i12",Wi);class Qi extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl){const dl=this.length;return this.resize(dl+1),this.emplace(dl,F,Da,ll,cl,hl)}emplace(F,Da,ll,cl,hl,dl){const pl=4*F,fl=8*F;return this.float32[pl+0]=Da,this.float32[pl+1]=ll,this.float32[pl+2]=cl,this.int16[fl+6]=hl,this.int16[fl+7]=dl,F}}Qi.prototype.bytesPerElement=16,qn("StructArrayLayout2f1f2i16",Qi);class ts extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=16*F,Al=4*F,bl=8*F;return this.uint8[fl+0]=Da,this.uint8[fl+1]=ll,this.float32[Al+1]=cl,this.float32[Al+2]=hl,this.int16[bl+6]=dl,this.int16[bl+7]=pl,F}}ts.prototype.bytesPerElement=16,qn("StructArrayLayout2ub2f2i16",ts);class es extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.uint16[hl+0]=Da,this.uint16[hl+1]=ll,this.uint16[hl+2]=cl,F}}es.prototype.bytesPerElement=6,qn("StructArrayLayout3ui6",es);class rs extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu){const iu=this.length;return this.resize(iu+1),this.emplace(iu,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu){const su=24*F,cu=12*F,uu=48*F;return this.int16[su+0]=Da,this.int16[su+1]=ll,this.uint16[su+2]=cl,this.uint16[su+3]=hl,this.uint32[cu+2]=dl,this.uint32[cu+3]=pl,this.uint32[cu+4]=fl,this.uint16[su+10]=Al,this.uint16[su+11]=bl,this.uint16[su+12]=kl,this.float32[cu+7]=Dl,this.float32[cu+8]=Wl,this.uint8[uu+36]=Ql,this.uint8[uu+37]=wc,this.uint8[uu+38]=Sc,this.uint32[cu+10]=eu,this.int16[su+22]=iu,F}}rs.prototype.bytesPerElement=48,qn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",rs);class ns extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih){const gh=this.length;return this.resize(gh+1),this.emplace(gh,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih,gh){const ed=32*F,td=16*F;return this.int16[ed+0]=Da,this.int16[ed+1]=ll,this.int16[ed+2]=cl,this.int16[ed+3]=hl,this.int16[ed+4]=dl,this.int16[ed+5]=pl,this.int16[ed+6]=fl,this.int16[ed+7]=Al,this.uint16[ed+8]=bl,this.uint16[ed+9]=kl,this.uint16[ed+10]=Dl,this.uint16[ed+11]=Wl,this.uint16[ed+12]=Ql,this.uint16[ed+13]=wc,this.uint16[ed+14]=Sc,this.uint16[ed+15]=eu,this.uint16[ed+16]=iu,this.uint16[ed+17]=su,this.uint16[ed+18]=cu,this.uint16[ed+19]=uu,this.uint16[ed+20]=hu,this.uint16[ed+21]=Lu,this.uint16[ed+22]=zu,this.uint32[td+12]=Du,this.float32[td+13]=Nu,this.float32[td+14]=qu,this.uint16[ed+30]=ih,this.uint16[ed+31]=gh,F}}ns.prototype.bytesPerElement=64,qn("StructArrayLayout8i15ui1ul2f2ui64",ns);class is extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.float32[1*F+0]=Da,F}}is.prototype.bytesPerElement=4,qn("StructArrayLayout1f4",is);class ss extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.uint16[6*F+0]=Da,this.float32[hl+1]=ll,this.float32[hl+2]=cl,F}}ss.prototype.bytesPerElement=12,qn("StructArrayLayout1ui2f12",ss);class os extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=4*F;return this.uint32[2*F+0]=Da,this.uint16[hl+2]=ll,this.uint16[hl+3]=cl,F}}os.prototype.bytesPerElement=8,qn("StructArrayLayout1ul2ui8",os);class as extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.uint16[cl+0]=Da,this.uint16[cl+1]=ll,F}}as.prototype.bytesPerElement=4,qn("StructArrayLayout2ui4",as);class ls extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.uint16[1*F+0]=Da,F}}ls.prototype.bytesPerElement=2,qn("StructArrayLayout1ui2",ls);class us extends Li{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl){const hl=this.length;return this.resize(hl+1),this.emplace(hl,F,Da,ll,cl)}emplace(F,Da,ll,cl,hl){const dl=4*F;return this.float32[dl+0]=Da,this.float32[dl+1]=ll,this.float32[dl+2]=cl,this.float32[dl+3]=hl,F}}us.prototype.bytesPerElement=16,qn("StructArrayLayout4f16",us);class cs extends $i{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Da(this.anchorPointX,this.anchorPointY)}}cs.prototype.size=20;class hs extends Ki{get(F){return new cs(this,F)}}qn("CollisionBoxArray",hs);class ps extends $i{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(F){this._structArray.uint8[this._pos1+37]=F}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(F){this._structArray.uint8[this._pos1+38]=F}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(F){this._structArray.uint32[this._pos4+10]=F}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ps.prototype.size=48;class fs extends rs{get(F){return new ps(this,F)}}qn("PlacedSymbolArray",fs);class ds extends $i{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(F){this._structArray.uint32[this._pos4+12]=F}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ds.prototype.size=64;class ys extends ns{get(F){return new ds(this,F)}}qn("SymbolInstanceArray",ys);class ms extends is{getoffsetX(F){return this.float32[1*F+0]}}qn("GlyphOffsetArray",ms);class gs extends qi{getx(F){return this.int16[3*F+0]}gety(F){return this.int16[3*F+1]}gettileUnitDistanceFromAnchor(F){return this.int16[3*F+2]}}qn("SymbolLineVertexArray",gs);class xs extends $i{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xs.prototype.size=12;class vs extends ss{get(F){return new xs(this,F)}}qn("TextAnchorOffsetArray",vs);class bs extends $i{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}bs.prototype.size=8;class ws extends os{get(F){return new bs(this,F)}}qn("FeatureIndexArray",ws);class _s extends ji{}class Ss extends ji{}class ks extends ji{}class As extends Ni{}class Is extends Zi{}class Ms extends Gi{}class zs extends Xi{}class Ps extends Hi{}class Cs extends Yi{}class Bs extends Ji{}class Vs extends Wi{}class Ts extends ts{}class Es extends es{}class Fs extends as{}const Bd=Oi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Od}=Bd;class Ls{constructor(F){void 0===F&&(F=[]),this.segments=F}prepareSegment(F,Da,ll,cl){let hl=this.segments[this.segments.length-1];return F>Ls.MAX_VERTEX_ARRAY_LENGTH&&d(`Max vertices per segment is ${Ls.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${F}`),(!hl||hl.vertexLength+F>Ls.MAX_VERTEX_ARRAY_LENGTH||hl.sortKey!==cl)&&(hl={vertexOffset:Da.length,primitiveOffset:ll.length,vertexLength:0,primitiveLength:0},void 0!==cl&&(hl.sortKey=cl),this.segments.push(hl)),hl}get(){return this.segments}destroy(){for(const F of this.segments)for(const Da in F.vaos)F.vaos[Da].destroy()}static simpleSegment(F,Da,ll,cl){return new Ls([{vertexOffset:F,primitiveOffset:Da,vertexLength:ll,primitiveLength:cl,vaos:{},sortKey:0}])}}function Os(F,Da){return 256*(F=u(Math.floor(F),0,255))+u(Math.floor(Da),0,255)}Ls.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qn("SegmentVector",Ls);const Fd=Oi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var jd={exports:{}},Vd={exports:{}};Vd.exports=function(F,Da){var ll,cl,hl,dl,pl,fl,Al,bl;for(cl=F.length-(ll=3&F.length),hl=Da,pl=3432918353,fl=461845907,bl=0;bl<cl;)Al=255&F.charCodeAt(bl)|(255&F.charCodeAt(++bl))<<8|(255&F.charCodeAt(++bl))<<16|(255&F.charCodeAt(++bl))<<24,++bl,hl=27492+(65535&(dl=5*(65535&(hl=(hl^=Al=(65535&(Al=(Al=(65535&Al)*pl+(((Al>>>16)*pl&65535)<<16)&4294967295)<<15|Al>>>17))*fl+(((Al>>>16)*fl&65535)<<16)&4294967295)<<13|hl>>>19))+((5*(hl>>>16)&65535)<<16)&4294967295))+((58964+(dl>>>16)&65535)<<16);switch(Al=0,ll){case 3:Al^=(255&F.charCodeAt(bl+2))<<16;case 2:Al^=(255&F.charCodeAt(bl+1))<<8;case 1:hl^=Al=(65535&(Al=(Al=(65535&(Al^=255&F.charCodeAt(bl)))*pl+(((Al>>>16)*pl&65535)<<16)&4294967295)<<15|Al>>>17))*fl+(((Al>>>16)*fl&65535)<<16)&4294967295}return hl^=F.length,hl=2246822507*(65535&(hl^=hl>>>16))+((2246822507*(hl>>>16)&65535)<<16)&4294967295,hl=3266489909*(65535&(hl^=hl>>>13))+((3266489909*(hl>>>16)&65535)<<16)&4294967295,(hl^=hl>>>16)>>>0};var Gd=Vd.exports,qd={exports:{}};qd.exports=function(F,Da){for(var ll,cl=F.length,hl=Da^cl,dl=0;cl>=4;)ll=1540483477*(65535&(ll=255&F.charCodeAt(dl)|(255&F.charCodeAt(++dl))<<8|(255&F.charCodeAt(++dl))<<16|(255&F.charCodeAt(++dl))<<24))+((1540483477*(ll>>>16)&65535)<<16),hl=1540483477*(65535&hl)+((1540483477*(hl>>>16)&65535)<<16)^(ll=1540483477*(65535&(ll^=ll>>>24))+((1540483477*(ll>>>16)&65535)<<16)),cl-=4,++dl;switch(cl){case 3:hl^=(255&F.charCodeAt(dl+2))<<16;case 2:hl^=(255&F.charCodeAt(dl+1))<<8;case 1:hl=1540483477*(65535&(hl^=255&F.charCodeAt(dl)))+((1540483477*(hl>>>16)&65535)<<16)}return hl=1540483477*(65535&(hl^=hl>>>13))+((1540483477*(hl>>>16)&65535)<<16),(hl^=hl>>>15)>>>0};var Hd=Gd,Zd=qd.exports;jd.exports=Hd,jd.exports.murmur3=Hd,jd.exports.murmur2=Zd;var Wd=e(jd.exports);class Hs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(F,Da,ll,cl){this.ids.push(Ys(F)),this.positions.push(Da,ll,cl)}getPositions(F){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const Da=Ys(F);let ll=0,cl=this.ids.length-1;for(;ll<cl;){const F=ll+cl>>1;this.ids[F]>=Da?cl=F:ll=F+1}const hl=[];for(;this.ids[ll]===Da;)hl.push({index:this.positions[3*ll],start:this.positions[3*ll+1],end:this.positions[3*ll+2]}),ll++;return hl}static serialize(F,Da){const ll=new Float64Array(F.ids),cl=new Uint32Array(F.positions);return Js(ll,cl,0,ll.length-1),Da&&Da.push(ll.buffer,cl.buffer),{ids:ll,positions:cl}}static deserialize(F){const Da=new Hs;return Da.ids=F.ids,Da.positions=F.positions,Da.indexed=!0,Da}}function Ys(F){const Da=+F;return!isNaN(Da)&&Da<=Number.MAX_SAFE_INTEGER?Da:Wd(String(F))}function Js(F,Da,ll,cl){for(;ll<cl;){const hl=F[ll+cl>>1];let dl=ll-1,pl=cl+1;for(;;){do{dl++}while(F[dl]<hl);do{pl--}while(F[pl]>hl);if(dl>=pl)break;Ks(F,dl,pl),Ks(Da,3*dl,3*pl),Ks(Da,3*dl+1,3*pl+1),Ks(Da,3*dl+2,3*pl+2)}pl-ll<cl-pl?(Js(F,Da,ll,pl),ll=pl+1):(Js(F,Da,pl+1,cl),cl=pl)}}function Ks(F,Da,ll){const cl=F[Da];F[Da]=F[ll],F[ll]=cl}qn("FeaturePositionMap",Hs);class Ws{constructor(F,Da){this.gl=F.gl,this.location=Da}}class Qs extends Ws{constructor(F,Da){super(F,Da),this.current=0}set(F){this.current!==F&&(this.current=F,this.gl.uniform1f(this.location,F))}}class to extends Ws{constructor(F,Da){super(F,Da),this.current=[0,0,0,0]}set(F){F[0]===this.current[0]&&F[1]===this.current[1]&&F[2]===this.current[2]&&F[3]===this.current[3]||(this.current=F,this.gl.uniform4f(this.location,F[0],F[1],F[2],F[3]))}}class eo extends Ws{constructor(F,Da){super(F,Da),this.current=pt.transparent}set(F){F.r===this.current.r&&F.g===this.current.g&&F.b===this.current.b&&F.a===this.current.a||(this.current=F,this.gl.uniform4f(this.location,F.r,F.g,F.b,F.a))}}function ro(F){return[Os(255*F.r,255*F.g),Os(255*F.b,255*F.a)]}class no{constructor(F,Da,ll){this.value=F,this.uniformNames=Da.map((F=>`u_${F}`)),this.type=ll}setUniform(F,Da,ll){F.set(ll.constantOr(this.value))}getBinding(F,Da,ll){return"color"===this.type?new eo(F,Da):new Qs(F,Da)}}class io{constructor(F,Da){this.uniformNames=Da.map((F=>`u_${F}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(F,Da){this.pixelRatioFrom=Da.pixelRatio,this.pixelRatioTo=F.pixelRatio,this.patternFrom=Da.tlbr,this.patternTo=F.tlbr}setUniform(F,Da,ll,cl){const hl="u_pattern_to"===cl?this.patternTo:"u_pattern_from"===cl?this.patternFrom:"u_pixel_ratio_to"===cl?this.pixelRatioTo:"u_pixel_ratio_from"===cl?this.pixelRatioFrom:null;hl&&F.set(hl)}getBinding(F,Da,ll){return"u_pattern"===ll.substr(0,9)?new to(F,Da):new Qs(F,Da)}}class so{constructor(F,Da,ll,cl){this.expression=F,this.type=ll,this.maxValue=0,this.paintVertexAttributes=Da.map((F=>({name:`a_${F}`,type:"Float32",components:"color"===ll?2:1,offset:0}))),this.paintVertexArray=new cl}populatePaintArray(F,Da,ll,cl,hl){const dl=this.paintVertexArray.length,pl=this.expression.evaluate(new vi(0),Da,{},cl,[],hl);this.paintVertexArray.resize(F),this._setPaintValue(dl,F,pl)}updatePaintArray(F,Da,ll,cl){const hl=this.expression.evaluate({zoom:0},ll,cl);this._setPaintValue(F,Da,hl)}_setPaintValue(F,Da,ll){if("color"===this.type){const cl=ro(ll);for(let ll=F;ll<Da;ll++)this.paintVertexArray.emplace(ll,cl[0],cl[1])}else{for(let cl=F;cl<Da;cl++)this.paintVertexArray.emplace(cl,ll);this.maxValue=Math.max(this.maxValue,Math.abs(ll))}}upload(F){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=F.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oo{constructor(F,Da,ll,cl,hl,dl){this.expression=F,this.uniformNames=Da.map((F=>`u_${F}_t`)),this.type=ll,this.useIntegerZoom=cl,this.zoom=hl,this.maxValue=0,this.paintVertexAttributes=Da.map((F=>({name:`a_${F}`,type:"Float32",components:"color"===ll?4:2,offset:0}))),this.paintVertexArray=new dl}populatePaintArray(F,Da,ll,cl,hl){const dl=this.expression.evaluate(new vi(this.zoom),Da,{},cl,[],hl),pl=this.expression.evaluate(new vi(this.zoom+1),Da,{},cl,[],hl),fl=this.paintVertexArray.length;this.paintVertexArray.resize(F),this._setPaintValue(fl,F,dl,pl)}updatePaintArray(F,Da,ll,cl){const hl=this.expression.evaluate({zoom:this.zoom},ll,cl),dl=this.expression.evaluate({zoom:this.zoom+1},ll,cl);this._setPaintValue(F,Da,hl,dl)}_setPaintValue(F,Da,ll,cl){if("color"===this.type){const hl=ro(ll),dl=ro(cl);for(let ll=F;ll<Da;ll++)this.paintVertexArray.emplace(ll,hl[0],hl[1],dl[0],dl[1])}else{for(let hl=F;hl<Da;hl++)this.paintVertexArray.emplace(hl,ll,cl);this.maxValue=Math.max(this.maxValue,Math.abs(ll),Math.abs(cl))}}upload(F){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=F.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(F,Da){const ll=this.useIntegerZoom?Math.floor(Da.zoom):Da.zoom,cl=u(this.expression.interpolationFactor(ll,this.zoom,this.zoom+1),0,1);F.set(cl)}getBinding(F,Da,ll){return new Qs(F,Da)}}class ao{constructor(F,Da,ll,cl,hl,dl){this.expression=F,this.type=Da,this.useIntegerZoom=ll,this.zoom=cl,this.layerId=dl,this.zoomInPaintVertexArray=new hl,this.zoomOutPaintVertexArray=new hl}populatePaintArray(F,Da,ll){const cl=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(F),this.zoomOutPaintVertexArray.resize(F),this._setPaintValues(cl,F,Da.patterns&&Da.patterns[this.layerId],ll)}updatePaintArray(F,Da,ll,cl,hl){this._setPaintValues(F,Da,ll.patterns&&ll.patterns[this.layerId],hl)}_setPaintValues(F,Da,ll,cl){if(!cl||!ll)return;const{min:hl,mid:dl,max:pl}=ll,fl=cl[hl],Al=cl[dl],bl=cl[pl];if(fl&&Al&&bl)for(let kl=F;kl<Da;kl++)this.zoomInPaintVertexArray.emplace(kl,Al.tl[0],Al.tl[1],Al.br[0],Al.br[1],fl.tl[0],fl.tl[1],fl.br[0],fl.br[1],Al.pixelRatio,fl.pixelRatio),this.zoomOutPaintVertexArray.emplace(kl,Al.tl[0],Al.tl[1],Al.br[0],Al.br[1],bl.tl[0],bl.tl[1],bl.br[0],bl.br[1],Al.pixelRatio,bl.pixelRatio)}upload(F){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=F.createVertexBuffer(this.zoomInPaintVertexArray,Fd.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=F.createVertexBuffer(this.zoomOutPaintVertexArray,Fd.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class lo{constructor(F,Da,ll){this.binders={},this._buffers=[];const cl=[];for(const hl in F.paint._values){if(!ll(hl))continue;const dl=F.paint.get(hl);if(!(dl instanceof Ii&&kr(dl.property.specification)))continue;const pl=co(hl,F.type),fl=dl.value,Al=dl.property.specification.type,bl=dl.property.useIntegerZoom,kl=dl.property.specification["property-type"],Dl="cross-faded"===kl||"cross-faded-data-driven"===kl;if("constant"===fl.kind)this.binders[hl]=Dl?new io(fl.value,pl):new no(fl.value,pl,Al),cl.push(`/u_${hl}`);else if("source"===fl.kind||Dl){const ll=ho(hl,Al,"source");this.binders[hl]=Dl?new ao(fl,Al,bl,Da,ll,F.id):new so(fl,pl,Al,ll),cl.push(`/a_${hl}`)}else{const F=ho(hl,Al,"composite");this.binders[hl]=new oo(fl,pl,Al,bl,Da,F),cl.push(`/z_${hl}`)}}this.cacheKey=cl.sort().join("")}getMaxValue(F){const Da=this.binders[F];return Da instanceof so||Da instanceof oo?Da.maxValue:0}populatePaintArrays(F,Da,ll,cl,hl){for(const dl in this.binders){const pl=this.binders[dl];(pl instanceof so||pl instanceof oo||pl instanceof ao)&&pl.populatePaintArray(F,Da,ll,cl,hl)}}setConstantPatternPositions(F,Da){for(const ll in this.binders){const cl=this.binders[ll];cl instanceof io&&cl.setConstantPatternPositions(F,Da)}}updatePaintArrays(F,Da,ll,cl,hl){let dl=!1;for(const pl in F){const fl=Da.getPositions(pl);for(const Da of fl){const fl=ll.feature(Da.index);for(const ll in this.binders){const Al=this.binders[ll];if((Al instanceof so||Al instanceof oo||Al instanceof ao)&&!0===Al.expression.isStateDependent){const bl=cl.paint.get(ll);Al.expression=bl.value,Al.updatePaintArray(Da.start,Da.end,fl,F[pl],hl),dl=!0}}}}return dl}defines(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];(ll instanceof no||ll instanceof io)&&F.push(...ll.uniformNames.map((F=>`#define HAS_UNIFORM_${F}`)))}return F}getBinderAttributes(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];if(ll instanceof so||ll instanceof oo)for(let Da=0;Da<ll.paintVertexAttributes.length;Da++)F.push(ll.paintVertexAttributes[Da].name);else if(ll instanceof ao)for(let Da=0;Da<Fd.members.length;Da++)F.push(Fd.members[Da].name)}return F}getBinderUniforms(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];if(ll instanceof no||ll instanceof io||ll instanceof oo)for(const Da of ll.uniformNames)F.push(Da)}return F}getPaintVertexBuffers(){return this._buffers}getUniforms(F,Da){const ll=[];for(const cl in this.binders){const hl=this.binders[cl];if(hl instanceof no||hl instanceof io||hl instanceof oo)for(const dl of hl.uniformNames)if(Da[dl]){const pl=hl.getBinding(F,Da[dl],dl);ll.push({name:dl,property:cl,binding:pl})}}return ll}setUniforms(F,Da,ll,cl){for(const{name:hl,property:dl,binding:pl}of Da)this.binders[dl].setUniform(pl,cl,ll.get(dl),hl)}updatePaintBuffers(F){this._buffers=[];for(const Da in this.binders){const ll=this.binders[Da];if(F&&ll instanceof ao){const Da=2===F.fromScale?ll.zoomInPaintVertexBuffer:ll.zoomOutPaintVertexBuffer;Da&&this._buffers.push(Da)}else(ll instanceof so||ll instanceof oo)&&ll.paintVertexBuffer&&this._buffers.push(ll.paintVertexBuffer)}}upload(F){for(const Da in this.binders){const ll=this.binders[Da];(ll instanceof so||ll instanceof oo||ll instanceof ao)&&ll.upload(F)}this.updatePaintBuffers()}destroy(){for(const F in this.binders){const Da=this.binders[F];(Da instanceof so||Da instanceof oo||Da instanceof ao)&&Da.destroy()}}}class uo{constructor(F,Da,ll){void 0===ll&&(ll=()=>!0),this.programConfigurations={};for(const cl of F)this.programConfigurations[cl.id]=new lo(cl,Da,ll);this.needsUpload=!1,this._featureMap=new Hs,this._bufferOffset=0}populatePaintArrays(F,Da,ll,cl,hl,dl){for(const pl in this.programConfigurations)this.programConfigurations[pl].populatePaintArrays(F,Da,cl,hl,dl);void 0!==Da.id&&this._featureMap.add(Da.id,ll,this._bufferOffset,F),this._bufferOffset=F,this.needsUpload=!0}updatePaintArrays(F,Da,ll,cl){for(const hl of ll)this.needsUpload=this.programConfigurations[hl.id].updatePaintArrays(F,this._featureMap,Da,hl,cl)||this.needsUpload}get(F){return this.programConfigurations[F]}upload(F){if(this.needsUpload){for(const Da in this.programConfigurations)this.programConfigurations[Da].upload(F);this.needsUpload=!1}}destroy(){for(const F in this.programConfigurations)this.programConfigurations[F].destroy()}}function co(F,Da){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[F]||[F.replace(`${Da}-`,"").replace(/-/g,"_")]}function ho(F,Da,ll){const cl={color:{source:Gi,composite:us},number:{source:is,composite:Gi}},hl=function(F){return{"line-pattern":{source:zs,composite:zs},"fill-pattern":{source:zs,composite:zs},"fill-extrusion-pattern":{source:zs,composite:zs}}[F]}(F);return hl&&hl[ll]||cl[Da][ll]}qn("ConstantBinder",no),qn("CrossFadedConstantBinder",io),qn("SourceExpressionBinder",so),qn("CrossFadedCompositeBinder",ao),qn("CompositeExpressionBinder",oo),qn("ProgramConfiguration",lo,{omit:["_buffers"]}),qn("ProgramConfigurationSet",uo);const Kd=8192,Qd=Math.pow(2,14)-1,Xd=-Qd-1;function mo(F){const Da=Kd/F.extent,ll=F.loadGeometry();for(let cl=0;cl<ll.length;cl++){const F=ll[cl];for(let ll=0;ll<F.length;ll++){const cl=F[ll],hl=Math.round(cl.x*Da),dl=Math.round(cl.y*Da);cl.x=u(hl,Xd,Qd),cl.y=u(dl,Xd,Qd),(hl<cl.x||hl>cl.x+1||dl<cl.y||dl>cl.y+1)&&d("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return ll}function go(F,Da){return{type:F.type,id:F.id,properties:F.properties,geometry:Da?mo(F):[]}}function xo(F,Da,ll,cl,hl){F.emplaceBack(2*Da+(cl+1)/2,2*ll+(hl+1)/2)}class vo{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.layoutVertexArray=new Ss,this.indexArray=new Es,this.segments=new Ls,this.programConfigurations=new uo(F.layers,F.zoom),this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){const cl=this.layers[0],hl=[];let dl=null,pl=!1;"circle"===cl.type&&(dl=cl.layout.get("circle-sort-key"),pl=!dl.isConstant());for(const{feature:fl,id:Al,index:bl,sourceLayerIndex:kl}of F){const F=this.layers[0]._featureFilter.needGeometry,Da=go(fl,F);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),Da,ll))continue;const cl=pl?dl.evaluate(Da,{},ll):void 0,Dl={id:Al,properties:fl.properties,type:fl.type,sourceLayerIndex:kl,index:bl,geometry:F?Da.geometry:mo(fl),patterns:{},sortKey:cl};hl.push(Dl)}pl&&hl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const fl of hl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=fl,pl=F[hl].feature;this.addFeature(fl,cl,hl,ll),Da.featureIndex.insert(pl,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,Od),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(F,Da,ll,cl){for(const hl of Da)for(const Da of hl){const ll=Da.x,cl=Da.y;if(ll<0||ll>=Kd||cl<0||cl>=Kd)continue;const hl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,F.sortKey),dl=hl.vertexLength;xo(this.layoutVertexArray,ll,cl,-1,-1),xo(this.layoutVertexArray,ll,cl,1,-1),xo(this.layoutVertexArray,ll,cl,1,1),xo(this.layoutVertexArray,ll,cl,-1,1),this.indexArray.emplaceBack(dl,dl+1,dl+2),this.indexArray.emplaceBack(dl,dl+3,dl+2),hl.vertexLength+=4,hl.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,{},cl)}}function bo(F,Da){for(let ll=0;ll<F.length;ll++)if(Po(Da,F[ll]))return!0;for(let ll=0;ll<Da.length;ll++)if(Po(F,Da[ll]))return!0;return!!ko(F,Da)}function wo(F,Da,ll){return!!Po(F,Da)||!!Io(Da,F,ll)}function _o(F,Da){if(1===F.length)return zo(Da,F[0]);for(let ll=0;ll<Da.length;ll++){const cl=Da[ll];for(let Da=0;Da<cl.length;Da++)if(Po(F,cl[Da]))return!0}for(let ll=0;ll<F.length;ll++)if(zo(Da,F[ll]))return!0;for(let ll=0;ll<Da.length;ll++)if(ko(F,Da[ll]))return!0;return!1}function So(F,Da,ll){if(F.length>1){if(ko(F,Da))return!0;for(let cl=0;cl<Da.length;cl++)if(Io(Da[cl],F,ll))return!0}for(let cl=0;cl<F.length;cl++)if(Io(F[cl],Da,ll))return!0;return!1}function ko(F,Da){if(0===F.length||0===Da.length)return!1;for(let ll=0;ll<F.length-1;ll++){const cl=F[ll],hl=F[ll+1];for(let F=0;F<Da.length-1;F++)if(Ao(cl,hl,Da[F],Da[F+1]))return!0}return!1}function Ao(F,Da,ll,cl){return y(F,ll,cl)!==y(Da,ll,cl)&&y(F,Da,ll)!==y(F,Da,cl)}function Io(F,Da,ll){const cl=ll*ll;if(1===Da.length)return F.distSqr(Da[0])<cl;for(let hl=1;hl<Da.length;hl++)if(Mo(F,Da[hl-1],Da[hl])<cl)return!0;return!1}function Mo(F,Da,ll){const cl=Da.distSqr(ll);if(0===cl)return F.distSqr(Da);const hl=((F.x-Da.x)*(ll.x-Da.x)+(F.y-Da.y)*(ll.y-Da.y))/cl;return F.distSqr(hl<0?Da:hl>1?ll:ll.sub(Da)._mult(hl)._add(Da))}function zo(F,Da){let ll,cl,hl,dl=!1;for(let pl=0;pl<F.length;pl++){ll=F[pl];for(let F=0,pl=ll.length-1;F<ll.length;pl=F++)cl=ll[F],hl=ll[pl],cl.y>Da.y!=hl.y>Da.y&&Da.x<(hl.x-cl.x)*(Da.y-cl.y)/(hl.y-cl.y)+cl.x&&(dl=!dl)}return dl}function Po(F,Da){let ll=!1;for(let cl=0,hl=F.length-1;cl<F.length;hl=cl++){const dl=F[cl],pl=F[hl];dl.y>Da.y!=pl.y>Da.y&&Da.x<(pl.x-dl.x)*(Da.y-dl.y)/(pl.y-dl.y)+dl.x&&(ll=!ll)}return ll}function Co(F,Da,ll){const cl=ll[0],hl=ll[2];if(F.x<cl.x&&Da.x<cl.x||F.x>hl.x&&Da.x>hl.x||F.y<cl.y&&Da.y<cl.y||F.y>hl.y&&Da.y>hl.y)return!1;const dl=y(F,Da,ll[0]);return dl!==y(F,Da,ll[1])||dl!==y(F,Da,ll[2])||dl!==y(F,Da,ll[3])}function Bo(F,Da,ll){const cl=Da.paint.get(F).value;return"constant"===cl.kind?cl.value:ll.programConfigurations.get(Da.id).getMaxValue(F)}function Vo(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])}function To(F,ll,cl,hl,dl){if(!ll[0]&&!ll[1])return F;const pl=Da.convert(ll)._mult(dl);"viewport"===cl&&pl._rotate(-hl);const fl=[];for(let Da=0;Da<F.length;Da++)fl.push(F[Da].sub(pl));return fl}let Yd,Jd;qn("CircleBucket",vo,{omit:["layers"]});var $d,lp={get paint(){return Jd=Jd||new Ti({"circle-radius":new Pi(Al.paint_circle["circle-radius"]),"circle-color":new Pi(Al.paint_circle["circle-color"]),"circle-blur":new Pi(Al.paint_circle["circle-blur"]),"circle-opacity":new Pi(Al.paint_circle["circle-opacity"]),"circle-translate":new zi(Al.paint_circle["circle-translate"]),"circle-translate-anchor":new zi(Al.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zi(Al.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zi(Al.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Pi(Al.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Pi(Al.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Pi(Al.paint_circle["circle-stroke-opacity"])})},get layout(){return Yd=Yd||new Ti({"circle-sort-key":new Pi(Al.layout_circle["circle-sort-key"])})}},mp="undefined"!=typeof Float32Array?Float32Array:Array;function Oo(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}function Ro(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2],pl=Da[3];return F[0]=ll[0]*cl+ll[4]*hl+ll[8]*dl+ll[12]*pl,F[1]=ll[1]*cl+ll[5]*hl+ll[9]*dl+ll[13]*pl,F[2]=ll[2]*cl+ll[6]*hl+ll[10]*dl+ll[14]*pl,F[3]=ll[3]*cl+ll[7]*hl+ll[11]*dl+ll[15]*pl,F}Math.hypot||(Math.hypot=function(){for(var F=0,Da=arguments.length;Da--;)F+=arguments[Da]*arguments[Da];return Math.sqrt(F)}),$d=new mp(4),mp!=Float32Array&&($d[0]=0,$d[1]=0,$d[2]=0,$d[3]=0);class jo extends Fi{constructor(F){super(F,lp)}createBucket(F){return new vo(F)}queryRadius(F){const Da=F;return Bo("circle-radius",this,Da)+Bo("circle-stroke-width",this,Da)+Vo(this.paint.get("circle-translate"))}queryIntersectsFeature(F,Da,ll,cl,hl,dl,pl,fl){const Al=To(F,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),dl.angle,pl),bl=this.paint.get("circle-radius").evaluate(Da,ll)+this.paint.get("circle-stroke-width").evaluate(Da,ll),kl="map"===this.paint.get("circle-pitch-alignment"),Dl=kl?Al:function(F,Da){return F.map((F=>qo(F,Da)))}(Al,fl),Wl=kl?bl*pl:bl;for(const Ql of cl)for(const F of Ql){const Da=kl?F:qo(F,fl);let ll=Wl;const cl=Ro([],[F.x,F.y,0,1],fl);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ll*=cl[3]/dl.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ll*=dl.cameraToCenterDistance/cl[3]),wo(Dl,Da,ll))return!0}return!1}}function qo(F,ll){const cl=Ro([],[F.x,F.y,0,1],ll);return new Da(cl[0]/cl[3],cl[1]/cl[3])}class Uo extends vo{}let gp;qn("HeatmapBucket",Uo,{omit:["layers"]});var Ap={get paint(){return gp=gp||new Ti({"heatmap-radius":new Pi(Al.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Pi(Al.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zi(Al.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vi(Al.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zi(Al.paint_heatmap["heatmap-opacity"])})}};function Go(F,Da,ll,cl){let{width:hl,height:dl}=Da;if(cl){if(cl instanceof Uint8ClampedArray)cl=new Uint8Array(cl.buffer);else if(cl.length!==hl*dl*ll)throw new RangeError(`mismatched image size. expected: ${cl.length} but got: ${hl*dl*ll}`)}else cl=new Uint8Array(hl*dl*ll);return F.width=hl,F.height=dl,F.data=cl,F}function Xo(F,Da,ll){let{width:cl,height:hl}=Da;if(cl===F.width&&hl===F.height)return;const dl=Go({},{width:cl,height:hl},ll);Ho(F,dl,{x:0,y:0},{x:0,y:0},{width:Math.min(F.width,cl),height:Math.min(F.height,hl)},ll),F.width=cl,F.height=hl,F.data=dl.data}function Ho(F,Da,ll,cl,hl,dl){if(0===hl.width||0===hl.height)return Da;if(hl.width>F.width||hl.height>F.height||ll.x>F.width-hl.width||ll.y>F.height-hl.height)throw new RangeError("out of range source coordinates for image copy");if(hl.width>Da.width||hl.height>Da.height||cl.x>Da.width-hl.width||cl.y>Da.height-hl.height)throw new RangeError("out of range destination coordinates for image copy");const pl=F.data,fl=Da.data;if(pl===fl)throw new Error("srcData equals dstData, so image is already copied");for(let Al=0;Al<hl.height;Al++){const bl=((ll.y+Al)*F.width+ll.x)*dl,kl=((cl.y+Al)*Da.width+cl.x)*dl;for(let F=0;F<hl.width*dl;F++)fl[kl+F]=pl[bl+F]}return Da}class Yo{constructor(F,Da){Go(this,F,1,Da)}resize(F){Xo(this,F,1)}clone(){return new Yo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(F,Da,ll,cl,hl){Ho(F,Da,ll,cl,hl,1)}}class Jo{constructor(F,Da){Go(this,F,4,Da)}resize(F){Xo(this,F,4)}replace(F,Da){Da?this.data.set(F):this.data=F instanceof Uint8ClampedArray?new Uint8Array(F.buffer):F}clone(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(F,Da,ll,cl,hl){Ho(F,Da,ll,cl,hl,4)}}qn("AlphaImage",Yo),qn("RGBAImage",Jo);const vp="big-fb";class Wo extends Fi{createBucket(F){return new Uo(F)}constructor(F){super(F,Ap),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(F){"heatmap-color"===F&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=function(F){const Da={},ll=F.resolution||256,cl=F.clips?F.clips.length:1,hl=F.image||new Jo({width:ll,height:cl});if(Math.log(ll)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${ll}`);const s=(ll,cl,dl)=>{Da[F.evaluationKey]=dl;const pl=F.expression.evaluate(Da);hl.data[ll+cl+0]=Math.floor(255*pl.r/pl.a),hl.data[ll+cl+1]=Math.floor(255*pl.g/pl.a),hl.data[ll+cl+2]=Math.floor(255*pl.b/pl.a),hl.data[ll+cl+3]=Math.floor(255*pl.a)};if(F.clips)for(let dl=0,pl=0;dl<cl;++dl,pl+=4*ll)for(let Da=0,cl=0;Da<ll;Da++,cl+=4){const hl=Da/(ll-1),{start:fl,end:Al}=F.clips[dl];s(pl,cl,fl*(1-hl)+Al*hl)}else for(let dl=0,pl=0;dl<ll;dl++,pl+=4)s(0,pl,dl/(ll-1));return hl}({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(vp)&&this.heatmapFbos.delete(vp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let _p;var xp={get paint(){return _p=_p||new Ti({"hillshade-illumination-direction":new zi(Al.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zi(Al.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zi(Al.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zi(Al.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zi(Al.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zi(Al.paint_hillshade["hillshade-accent-color"])})}};class ea extends Fi{constructor(F){super(F,xp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const bp=Oi([{name:"a_pos",components:2,type:"Int16"}],4),{members:wp}=bp;function ia(F,Da,ll){void 0===ll&&(ll=2);const cl=Da&&Da.length,hl=cl?Da[0]*ll:F.length;let dl=sa(F,0,hl,ll,!0);const pl=[];if(!dl||dl.next===dl.prev)return pl;let fl,Al,bl;if(cl&&(dl=function(F,Da,ll,cl){const hl=[];for(let dl=0,pl=Da.length;dl<pl;dl++){const ll=sa(F,Da[dl]*cl,dl<pl-1?Da[dl+1]*cl:F.length,cl,!1);ll===ll.next&&(ll.steiner=!0),hl.push(ma(ll))}hl.sort(pa);for(let dl=0;dl<hl.length;dl++)ll=fa(hl[dl],ll);return ll}(F,Da,dl,ll)),F.length>80*ll){fl=1/0,Al=1/0;let Da=-1/0,cl=-1/0;for(let dl=ll;dl<hl;dl+=ll){const ll=F[dl],hl=F[dl+1];ll<fl&&(fl=ll),hl<Al&&(Al=hl),ll>Da&&(Da=ll),hl>cl&&(cl=hl)}bl=Math.max(Da-fl,cl-Al),bl=0!==bl?32767/bl:0}return aa(dl,pl,ll,fl,Al,bl,0),pl}function sa(F,Da,ll,cl,hl){let dl;if(hl===function(F,Da,ll,cl){let hl=0;for(let dl=Da,pl=ll-cl;dl<ll;dl+=cl)hl+=(F[pl]-F[dl])*(F[dl+1]+F[pl+1]),pl=dl;return hl}(F,Da,ll,cl)>0)for(let pl=Da;pl<ll;pl+=cl)dl=Ia(pl/cl|0,F[pl],F[pl+1],dl);else for(let pl=ll-cl;pl>=Da;pl-=cl)dl=Ia(pl/cl|0,F[pl],F[pl+1],dl);return dl&&ba(dl,dl.next)&&(Ma(dl),dl=dl.next),dl}function oa(F,Da){if(!F)return F;Da||(Da=F);let ll,cl=F;do{if(ll=!1,cl.steiner||!ba(cl,cl.next)&&0!==va(cl.prev,cl,cl.next))cl=cl.next;else{if(Ma(cl),cl=Da=cl.prev,cl===cl.next)break;ll=!0}}while(ll||cl!==Da);return Da}function aa(F,Da,ll,cl,hl,dl,pl){if(!F)return;!pl&&dl&&function(F,Da,ll,cl){let hl=F;do{0===hl.z&&(hl.z=ya(hl.x,hl.y,Da,ll,cl)),hl.prevZ=hl.prev,hl.nextZ=hl.next,hl=hl.next}while(hl!==F);hl.prevZ.nextZ=null,hl.prevZ=null,function(F){let Da,ll=1;do{let cl,hl=F;F=null;let dl=null;for(Da=0;hl;){Da++;let pl=hl,fl=0;for(let F=0;F<ll&&(fl++,pl=pl.nextZ,pl);F++);let Al=ll;for(;fl>0||Al>0&&pl;)0!==fl&&(0===Al||!pl||hl.z<=pl.z)?(cl=hl,hl=hl.nextZ,fl--):(cl=pl,pl=pl.nextZ,Al--),dl?dl.nextZ=cl:F=cl,cl.prevZ=dl,dl=cl;hl=pl}dl.nextZ=null,ll*=2}while(Da>1)}(hl)}(F,cl,hl,dl);let fl=F;for(;F.prev!==F.next;){const Al=F.prev,bl=F.next;if(dl?ua(F,cl,hl,dl):la(F))Da.push(Al.i,F.i,bl.i),Ma(F),F=bl.next,fl=bl.next;else if((F=bl)===fl){pl?1===pl?aa(F=ca(oa(F),Da),Da,ll,cl,hl,dl,2):2===pl&&ha(F,Da,ll,cl,hl,dl):aa(oa(F),Da,ll,cl,hl,dl,1);break}}}function la(F){const Da=F.prev,ll=F,cl=F.next;if(va(Da,ll,cl)>=0)return!1;const hl=Da.x,dl=ll.x,pl=cl.x,fl=Da.y,Al=ll.y,bl=cl.y,kl=hl<dl?hl<pl?hl:pl:dl<pl?dl:pl,Dl=fl<Al?fl<bl?fl:bl:Al<bl?Al:bl,Wl=hl>dl?hl>pl?hl:pl:dl>pl?dl:pl,Ql=fl>Al?fl>bl?fl:bl:Al>bl?Al:bl;let wc=cl.next;for(;wc!==Da;){if(wc.x>=kl&&wc.x<=Wl&&wc.y>=Dl&&wc.y<=Ql&&ga(hl,fl,dl,Al,pl,bl,wc.x,wc.y)&&va(wc.prev,wc,wc.next)>=0)return!1;wc=wc.next}return!0}function ua(F,Da,ll,cl){const hl=F.prev,dl=F,pl=F.next;if(va(hl,dl,pl)>=0)return!1;const fl=hl.x,Al=dl.x,bl=pl.x,kl=hl.y,Dl=dl.y,Wl=pl.y,Ql=fl<Al?fl<bl?fl:bl:Al<bl?Al:bl,wc=kl<Dl?kl<Wl?kl:Wl:Dl<Wl?Dl:Wl,Sc=fl>Al?fl>bl?fl:bl:Al>bl?Al:bl,eu=kl>Dl?kl>Wl?kl:Wl:Dl>Wl?Dl:Wl,iu=ya(Ql,wc,Da,ll,cl),su=ya(Sc,eu,Da,ll,cl);let cu=F.prevZ,uu=F.nextZ;for(;cu&&cu.z>=iu&&uu&&uu.z<=su;){if(cu.x>=Ql&&cu.x<=Sc&&cu.y>=wc&&cu.y<=eu&&cu!==hl&&cu!==pl&&ga(fl,kl,Al,Dl,bl,Wl,cu.x,cu.y)&&va(cu.prev,cu,cu.next)>=0)return!1;if(cu=cu.prevZ,uu.x>=Ql&&uu.x<=Sc&&uu.y>=wc&&uu.y<=eu&&uu!==hl&&uu!==pl&&ga(fl,kl,Al,Dl,bl,Wl,uu.x,uu.y)&&va(uu.prev,uu,uu.next)>=0)return!1;uu=uu.nextZ}for(;cu&&cu.z>=iu;){if(cu.x>=Ql&&cu.x<=Sc&&cu.y>=wc&&cu.y<=eu&&cu!==hl&&cu!==pl&&ga(fl,kl,Al,Dl,bl,Wl,cu.x,cu.y)&&va(cu.prev,cu,cu.next)>=0)return!1;cu=cu.prevZ}for(;uu&&uu.z<=su;){if(uu.x>=Ql&&uu.x<=Sc&&uu.y>=wc&&uu.y<=eu&&uu!==hl&&uu!==pl&&ga(fl,kl,Al,Dl,bl,Wl,uu.x,uu.y)&&va(uu.prev,uu,uu.next)>=0)return!1;uu=uu.nextZ}return!0}function ca(F,Da){let ll=F;do{const cl=ll.prev,hl=ll.next.next;!ba(cl,hl)&&wa(cl,ll,ll.next,hl)&&ka(cl,hl)&&ka(hl,cl)&&(Da.push(cl.i,ll.i,hl.i),Ma(ll),Ma(ll.next),ll=F=hl),ll=ll.next}while(ll!==F);return oa(ll)}function ha(F,Da,ll,cl,hl,dl){let pl=F;do{let F=pl.next.next;for(;F!==pl.prev;){if(pl.i!==F.i&&xa(pl,F)){let fl=Aa(pl,F);return pl=oa(pl,pl.next),fl=oa(fl,fl.next),aa(pl,Da,ll,cl,hl,dl,0),void aa(fl,Da,ll,cl,hl,dl,0)}F=F.next}pl=pl.next}while(pl!==F)}function pa(F,Da){return F.x-Da.x}function fa(F,Da){const ll=function(F,Da){let ll=Da;const cl=F.x,hl=F.y;let dl,pl=-1/0;do{if(hl<=ll.y&&hl>=ll.next.y&&ll.next.y!==ll.y){const F=ll.x+(hl-ll.y)*(ll.next.x-ll.x)/(ll.next.y-ll.y);if(F<=cl&&F>pl&&(pl=F,dl=ll.x<ll.next.x?ll:ll.next,F===cl))return dl}ll=ll.next}while(ll!==Da);if(!dl)return null;const fl=dl,Al=dl.x,bl=dl.y;let kl=1/0;ll=dl;do{if(cl>=ll.x&&ll.x>=Al&&cl!==ll.x&&ga(hl<bl?cl:pl,hl,Al,bl,hl<bl?pl:cl,hl,ll.x,ll.y)){const Da=Math.abs(hl-ll.y)/(cl-ll.x);ka(ll,F)&&(Da<kl||Da===kl&&(ll.x>dl.x||ll.x===dl.x&&da(dl,ll)))&&(dl=ll,kl=Da)}ll=ll.next}while(ll!==fl);return dl}(F,Da);if(!ll)return Da;const cl=Aa(ll,F);return oa(cl,cl.next),oa(ll,ll.next)}function da(F,Da){return va(F.prev,F,Da.prev)<0&&va(Da.next,F,F.next)<0}function ya(F,Da,ll,cl,hl){return(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=(F-ll)*hl|0)|F<<8))|F<<4))|F<<2))|F<<1))|(Da=1431655765&((Da=858993459&((Da=252645135&((Da=16711935&((Da=(Da-cl)*hl|0)|Da<<8))|Da<<4))|Da<<2))|Da<<1))<<1}function ma(F){let Da=F,ll=F;do{(Da.x<ll.x||Da.x===ll.x&&Da.y<ll.y)&&(ll=Da),Da=Da.next}while(Da!==F);return ll}function ga(F,Da,ll,cl,hl,dl,pl,fl){return(hl-pl)*(Da-fl)>=(F-pl)*(dl-fl)&&(F-pl)*(cl-fl)>=(ll-pl)*(Da-fl)&&(ll-pl)*(dl-fl)>=(hl-pl)*(cl-fl)}function xa(F,Da){return F.next.i!==Da.i&&F.prev.i!==Da.i&&!function(F,Da){let ll=F;do{if(ll.i!==F.i&&ll.next.i!==F.i&&ll.i!==Da.i&&ll.next.i!==Da.i&&wa(ll,ll.next,F,Da))return!0;ll=ll.next}while(ll!==F);return!1}(F,Da)&&(ka(F,Da)&&ka(Da,F)&&function(F,Da){let ll=F,cl=!1;const hl=(F.x+Da.x)/2,dl=(F.y+Da.y)/2;do{ll.y>dl!=ll.next.y>dl&&ll.next.y!==ll.y&&hl<(ll.next.x-ll.x)*(dl-ll.y)/(ll.next.y-ll.y)+ll.x&&(cl=!cl),ll=ll.next}while(ll!==F);return cl}(F,Da)&&(va(F.prev,F,Da.prev)||va(F,Da.prev,Da))||ba(F,Da)&&va(F.prev,F,F.next)>0&&va(Da.prev,Da,Da.next)>0)}function va(F,Da,ll){return(Da.y-F.y)*(ll.x-Da.x)-(Da.x-F.x)*(ll.y-Da.y)}function ba(F,Da){return F.x===Da.x&&F.y===Da.y}function wa(F,Da,ll,cl){const hl=Sa(va(F,Da,ll)),dl=Sa(va(F,Da,cl)),pl=Sa(va(ll,cl,F)),fl=Sa(va(ll,cl,Da));return hl!==dl&&pl!==fl||!(0!==hl||!_a(F,ll,Da))||!(0!==dl||!_a(F,cl,Da))||!(0!==pl||!_a(ll,F,cl))||!(0!==fl||!_a(ll,Da,cl))}function _a(F,Da,ll){return Da.x<=Math.max(F.x,ll.x)&&Da.x>=Math.min(F.x,ll.x)&&Da.y<=Math.max(F.y,ll.y)&&Da.y>=Math.min(F.y,ll.y)}function Sa(F){return F>0?1:F<0?-1:0}function ka(F,Da){return va(F.prev,F,F.next)<0?va(F,Da,F.next)>=0&&va(F,F.prev,Da)>=0:va(F,Da,F.prev)<0||va(F,F.next,Da)<0}function Aa(F,Da){const ll=za(F.i,F.x,F.y),cl=za(Da.i,Da.x,Da.y),hl=F.next,dl=Da.prev;return F.next=Da,Da.prev=F,ll.next=hl,hl.prev=ll,cl.next=ll,ll.prev=cl,dl.next=cl,cl.prev=dl,cl}function Ia(F,Da,ll,cl){const hl=za(F,Da,ll);return cl?(hl.next=cl.next,hl.prev=cl,cl.next.prev=hl,cl.next=hl):(hl.prev=hl,hl.next=hl),hl}function Ma(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function za(F,Da,ll){return{i:F,x:Da,y:ll,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Pa(F,Da,ll){const cl=ll.patternDependencies;let hl=!1;for(const dl of Da){const Da=dl.paint.get(`${F}-pattern`);Da.isConstant()||(hl=!0);const ll=Da.constantOr(null);ll&&(hl=!0,cl[ll.to]=!0,cl[ll.from]=!0)}return hl}function Ca(F,Da,ll,cl,hl){const dl=hl.patternDependencies;for(const pl of Da){const Da=pl.paint.get(`${F}-pattern`).value;if("constant"!==Da.kind){let F=Da.evaluate({zoom:cl-1},ll,{},hl.availableImages),fl=Da.evaluate({zoom:cl},ll,{},hl.availableImages),Al=Da.evaluate({zoom:cl+1},ll,{},hl.availableImages);F=F&&F.name?F.name:F,fl=fl&&fl.name?fl.name:fl,Al=Al&&Al.name?Al.name:Al,dl[F]=!0,dl[fl]=!0,dl[Al]=!0,ll.patterns[pl.id]={min:F,mid:fl,max:Al}}}return ll}class Ba{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ks,this.indexArray=new Es,this.indexArray2=new Fs,this.programConfigurations=new uo(F.layers,F.zoom),this.segments=new Ls,this.segments2=new Ls,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.hasPattern=Pa("fill",this.layers,Da);const cl=this.layers[0].layout.get("fill-sort-key"),hl=!cl.isConstant(),dl=[];for(const{feature:pl,id:fl,index:Al,sourceLayerIndex:bl}of F){const F=this.layers[0]._featureFilter.needGeometry,kl=go(pl,F);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),kl,ll))continue;const Dl=hl?cl.evaluate(kl,{},ll,Da.availableImages):void 0,Wl={id:fl,properties:pl.properties,type:pl.type,sourceLayerIndex:bl,index:Al,geometry:F?kl.geometry:mo(pl),patterns:{},sortKey:Dl};dl.push(Wl)}hl&&dl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const pl of dl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=pl;if(this.hasPattern){const F=Ca("fill",this.layers,pl,this.zoom,Da);this.patternFeatures.push(F)}else this.addFeature(pl,cl,hl,ll,{});Da.featureIndex.insert(F[hl].feature,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}addFeatures(F,Da,ll){for(const cl of this.patternFeatures)this.addFeature(cl,cl.geometry,cl.index,Da,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,wp),this.indexBuffer=F.createIndexBuffer(this.indexArray),this.indexBuffer2=F.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(F,Da,ll,cl,hl){for(const dl of $e(Da,500)){let F=0;for(const fl of dl)F+=fl.length;const Da=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray),ll=Da.vertexLength,cl=[],hl=[];for(const fl of dl){if(0===fl.length)continue;fl!==dl[0]&&hl.push(cl.length/2);const F=this.segments2.prepareSegment(fl.length,this.layoutVertexArray,this.indexArray2),Da=F.vertexLength;this.layoutVertexArray.emplaceBack(fl[0].x,fl[0].y),this.indexArray2.emplaceBack(Da+fl.length-1,Da),cl.push(fl[0].x),cl.push(fl[0].y);for(let ll=1;ll<fl.length;ll++)this.layoutVertexArray.emplaceBack(fl[ll].x,fl[ll].y),this.indexArray2.emplaceBack(Da+ll-1,Da+ll),cl.push(fl[ll].x),cl.push(fl[ll].y);F.vertexLength+=fl.length,F.primitiveLength+=fl.length}const pl=ia(cl,hl);for(let dl=0;dl<pl.length;dl+=3)this.indexArray.emplaceBack(ll+pl[dl],ll+pl[dl+1],ll+pl[dl+2]);Da.vertexLength+=F,Da.primitiveLength+=pl.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}}let Ep,Mp;qn("FillBucket",Ba,{omit:["layers","patternFeatures"]});var Sp={get paint(){return Mp=Mp||new Ti({"fill-antialias":new zi(Al.paint_fill["fill-antialias"]),"fill-opacity":new Pi(Al.paint_fill["fill-opacity"]),"fill-color":new Pi(Al.paint_fill["fill-color"]),"fill-outline-color":new Pi(Al.paint_fill["fill-outline-color"]),"fill-translate":new zi(Al.paint_fill["fill-translate"]),"fill-translate-anchor":new zi(Al.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ci(Al.paint_fill["fill-pattern"])})},get layout(){return Ep=Ep||new Ti({"fill-sort-key":new Pi(Al.layout_fill["fill-sort-key"])})}};class Fa extends Fi{constructor(F){super(F,Sp)}recalculate(F,Da){super.recalculate(F,Da);const ll=this.paint._values["fill-outline-color"];"constant"===ll.value.kind&&void 0===ll.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(F){return new Ba(F)}queryRadius(){return Vo(this.paint.get("fill-translate"))}queryIntersectsFeature(F,Da,ll,cl,hl,dl,pl){return _o(To(F,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),dl.angle,pl),cl)}isTileClipped(){return!0}}const kp=Oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Tp=Oi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ip}=kp;var Cp={},Lp=F,zp=qa;function qa(F,Da,ll,cl,hl){this.properties={},this.extent=ll,this.type=0,this._pbf=F,this._geometry=-1,this._keys=cl,this._values=hl,F.readFields(Ua,this,Da)}function Ua(F,Da,ll){1==F?Da.id=ll.readVarint():2==F?function(F,Da){for(var ll=F.readVarint()+F.pos;F.pos<ll;){var cl=Da._keys[F.readVarint()],hl=Da._values[F.readVarint()];Da.properties[cl]=hl}}(ll,Da):3==F?Da.type=ll.readVarint():4==F&&(Da._geometry=ll.pos)}function Na(F){for(var Da,ll,cl=0,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++)cl+=((ll=F[pl]).x-(Da=F[hl]).x)*(Da.y+ll.y);return cl}qa.types=["Unknown","Point","LineString","Polygon"],qa.prototype.loadGeometry=function(){var F=this._pbf;F.pos=this._geometry;for(var Da,ll=F.readVarint()+F.pos,cl=1,hl=0,dl=0,pl=0,fl=[];F.pos<ll;){if(hl<=0){var Al=F.readVarint();cl=7&Al,hl=Al>>3}if(hl--,1===cl||2===cl)dl+=F.readSVarint(),pl+=F.readSVarint(),1===cl&&(Da&&fl.push(Da),Da=[]),Da.push(new Lp(dl,pl));else{if(7!==cl)throw new Error("unknown command "+cl);Da&&Da.push(Da[0].clone())}}return Da&&fl.push(Da),fl},qa.prototype.bbox=function(){var F=this._pbf;F.pos=this._geometry;for(var Da=F.readVarint()+F.pos,ll=1,cl=0,hl=0,dl=0,pl=1/0,fl=-1/0,Al=1/0,bl=-1/0;F.pos<Da;){if(cl<=0){var kl=F.readVarint();ll=7&kl,cl=kl>>3}if(cl--,1===ll||2===ll)(hl+=F.readSVarint())<pl&&(pl=hl),hl>fl&&(fl=hl),(dl+=F.readSVarint())<Al&&(Al=dl),dl>bl&&(bl=dl);else if(7!==ll)throw new Error("unknown command "+ll)}return[pl,Al,fl,bl]},qa.prototype.toGeoJSON=function(F,Da,ll){var cl,hl,dl=this.extent*Math.pow(2,ll),pl=this.extent*F,fl=this.extent*Da,Al=this.loadGeometry(),bl=qa.types[this.type];function c(F){for(var Da=0;Da<F.length;Da++){var ll=F[Da];F[Da]=[360*(ll.x+pl)/dl-180,360/Math.PI*Math.atan(Math.exp((180-360*(ll.y+fl)/dl)*Math.PI/180))-90]}}switch(this.type){case 1:var kl=[];for(cl=0;cl<Al.length;cl++)kl[cl]=Al[cl][0];c(Al=kl);break;case 2:for(cl=0;cl<Al.length;cl++)c(Al[cl]);break;case 3:for(Al=function(F){var Da=F.length;if(Da<=1)return[F];for(var ll,cl,hl=[],dl=0;dl<Da;dl++){var pl=Na(F[dl]);0!==pl&&(void 0===cl&&(cl=pl<0),cl===pl<0?(ll&&hl.push(ll),ll=[F[dl]]):ll.push(F[dl]))}return ll&&hl.push(ll),hl}(Al),cl=0;cl<Al.length;cl++)for(hl=0;hl<Al[cl].length;hl++)c(Al[cl][hl])}1===Al.length?Al=Al[0]:bl="Multi"+bl;var Dl={type:"Feature",geometry:{type:bl,coordinates:Al},properties:this.properties};return"id"in this&&(Dl.id=this.id),Dl};var Pp=zp,Dp=Xa;function Xa(F,Da){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=F,this._keys=[],this._values=[],this._features=[],F.readFields(Ha,this,Da),this.length=this._features.length}function Ha(F,Da,ll){15===F?Da.version=ll.readVarint():1===F?Da.name=ll.readString():5===F?Da.extent=ll.readVarint():2===F?Da._features.push(ll.pos):3===F?Da._keys.push(ll.readString()):4===F&&Da._values.push(function(F){for(var Da=null,ll=F.readVarint()+F.pos;F.pos<ll;){var cl=F.readVarint()>>3;Da=1===cl?F.readString():2===cl?F.readFloat():3===cl?F.readDouble():4===cl?F.readVarint64():5===cl?F.readVarint():6===cl?F.readSVarint():7===cl?F.readBoolean():null}return Da}(ll))}Xa.prototype.feature=function(F){if(F<0||F>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[F];var Da=this._pbf.readVarint()+this._pbf.pos;return new Pp(this._pbf,Da,this.extent,this._keys,this._values)};var Rp=Dp;function Ja(F,Da,ll){if(3===F){var cl=new Rp(ll,ll.readVarint()+ll.pos);cl.length&&(Da[cl.name]=cl)}}Cp.VectorTile=function(F,Da){this.layers=F.readFields(Ja,{},Da)},Cp.VectorTileFeature=zp,Cp.VectorTileLayer=Dp;const Np=Cp.VectorTileFeature.types,Up=Math.pow(2,13);function Qa(F,Da,ll,cl,hl,dl,pl,fl){F.emplaceBack(Da,ll,2*Math.floor(cl*Up)+pl,hl*Up*2,dl*Up*2,Math.round(fl))}class tl{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.centroidVertexArray=new _s,this.indexArray=new Es,this.programConfigurations=new uo(F.layers,F.zoom),this.segments=new Ls,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.features=[],this.hasPattern=Pa("fill-extrusion",this.layers,Da);for(const{feature:cl,id:hl,index:dl,sourceLayerIndex:pl}of F){const F=this.layers[0]._featureFilter.needGeometry,fl=go(cl,F);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),fl,ll))continue;const Al={id:hl,sourceLayerIndex:pl,index:dl,geometry:F?fl.geometry:mo(cl),properties:cl.properties,type:cl.type,patterns:{}};this.hasPattern?this.features.push(Ca("fill-extrusion",this.layers,Al,this.zoom,Da)):this.addFeature(Al,Al.geometry,dl,ll,{}),Da.featureIndex.insert(cl,Al.geometry,dl,pl,this.index,!0)}}addFeatures(F,Da,ll){for(const cl of this.features){const{geometry:F}=cl;this.addFeature(cl,F,cl.index,Da,ll)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,Ip),this.centroidVertexBuffer=F.createVertexBuffer(this.centroidVertexArray,Tp.members,!0),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(F,Da,ll,cl,hl){for(const dl of $e(Da,500)){const Da={x:0,y:0,vertexCount:0};let ll=0;for(const F of dl)ll+=F.length;let cl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const F of dl){if(0===F.length)continue;if(rl(F))continue;let ll=0;for(let hl=0;hl<F.length;hl++){const dl=F[hl];if(hl>=1){const pl=F[hl-1];if(!el(dl,pl)){cl.vertexLength+4>Ls.MAX_VERTEX_ARRAY_LENGTH&&(cl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const F=dl.sub(pl)._perp()._unit(),hl=pl.dist(dl);ll+hl>32768&&(ll=0),Qa(this.layoutVertexArray,dl.x,dl.y,F.x,F.y,0,0,ll),Qa(this.layoutVertexArray,dl.x,dl.y,F.x,F.y,0,1,ll),Da.x+=2*dl.x,Da.y+=2*dl.y,Da.vertexCount+=2,ll+=hl,Qa(this.layoutVertexArray,pl.x,pl.y,F.x,F.y,0,0,ll),Qa(this.layoutVertexArray,pl.x,pl.y,F.x,F.y,0,1,ll),Da.x+=2*pl.x,Da.y+=2*pl.y,Da.vertexCount+=2;const fl=cl.vertexLength;this.indexArray.emplaceBack(fl,fl+2,fl+1),this.indexArray.emplaceBack(fl+1,fl+2,fl+3),cl.vertexLength+=4,cl.primitiveLength+=2}}}}if(cl.vertexLength+ll>Ls.MAX_VERTEX_ARRAY_LENGTH&&(cl=this.segments.prepareSegment(ll,this.layoutVertexArray,this.indexArray)),"Polygon"!==Np[F.type])continue;const hl=[],pl=[],fl=cl.vertexLength;for(const F of dl)if(0!==F.length){F!==dl[0]&&pl.push(hl.length/2);for(let ll=0;ll<F.length;ll++){const cl=F[ll];Qa(this.layoutVertexArray,cl.x,cl.y,0,0,1,1,0),Da.x+=cl.x,Da.y+=cl.y,Da.vertexCount+=1,hl.push(cl.x),hl.push(cl.y)}}const Al=ia(hl,pl);for(let F=0;F<Al.length;F+=3)this.indexArray.emplaceBack(fl+Al[F],fl+Al[F+2],fl+Al[F+1]);cl.primitiveLength+=Al.length/3,cl.vertexLength+=ll;for(let F=0;F<Da.vertexCount;F++){const F=Math.floor(Da.x/Da.vertexCount),ll=Math.floor(Da.y/Da.vertexCount);this.centroidVertexArray.emplaceBack(F,ll)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}}function el(F,Da){return F.x===Da.x&&(F.x<0||F.x>Kd)||F.y===Da.y&&(F.y<0||F.y>Kd)}function rl(F){return F.every((F=>F.x<0))||F.every((F=>F.x>Kd))||F.every((F=>F.y<0))||F.every((F=>F.y>Kd))}let Bp;qn("FillExtrusionBucket",tl,{omit:["layers","features"]});var Op={get paint(){return Bp=Bp||new Ti({"fill-extrusion-opacity":new zi(Al["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Pi(Al["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zi(Al["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zi(Al["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ci(Al["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Pi(Al["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Pi(Al["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zi(Al["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class sl extends Fi{constructor(F){super(F,Op)}createBucket(F){return new tl(F)}queryRadius(){return Vo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(F,ll,cl,hl,dl,pl,fl,Al){const bl=To(F,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),pl.angle,fl),kl=this.paint.get("fill-extrusion-height").evaluate(ll,cl),Dl=this.paint.get("fill-extrusion-base").evaluate(ll,cl),Wl=function(F,ll){const cl=[];for(const hl of F){const F=[hl.x,hl.y,0,1];Ro(F,F,ll),cl.push(new Da(F[0]/F[3],F[1]/F[3]))}return cl}(bl,Al),Ql=function(F,ll,cl,hl){const dl=[],pl=[],fl=hl[8]*ll,Al=hl[9]*ll,bl=hl[10]*ll,kl=hl[11]*ll,Dl=hl[8]*cl,Wl=hl[9]*cl,Ql=hl[10]*cl,wc=hl[11]*cl;for(const Sc of F){const F=[],ll=[];for(const cl of Sc){const dl=cl.x,pl=cl.y,Sc=hl[0]*dl+hl[4]*pl+hl[12],eu=hl[1]*dl+hl[5]*pl+hl[13],iu=hl[2]*dl+hl[6]*pl+hl[14],su=hl[3]*dl+hl[7]*pl+hl[15],cu=iu+bl,uu=su+kl,hu=Sc+Dl,Lu=eu+Wl,zu=iu+Ql,Du=su+wc,Nu=new Da((Sc+fl)/uu,(eu+Al)/uu);Nu.z=cu/uu,F.push(Nu);const qu=new Da(hu/Du,Lu/Du);qu.z=zu/Du,ll.push(qu)}dl.push(F),pl.push(ll)}return[dl,pl]}(hl,Dl,kl,Al);return function(F,Da,ll){let cl=1/0;_o(ll,Da)&&(cl=al(ll,Da[0]));for(let hl=0;hl<Da.length;hl++){const dl=Da[hl],pl=F[hl];for(let F=0;F<dl.length-1;F++){const Da=dl[F],hl=[Da,dl[F+1],pl[F+1],pl[F],Da];bo(ll,hl)&&(cl=Math.min(cl,al(ll,hl)))}}return cl!==1/0&&cl}(Ql[0],Ql[1],Wl)}}function ol(F,Da){return F.x*Da.x+F.y*Da.y}function al(F,Da){if(1===F.length){let ll=0;const cl=Da[ll++];let hl;for(;!hl||cl.equals(hl);)if(hl=Da[ll++],!hl)return 1/0;for(;ll<Da.length;ll++){const dl=Da[ll],pl=F[0],fl=hl.sub(cl),Al=dl.sub(cl),bl=pl.sub(cl),kl=ol(fl,fl),Dl=ol(fl,Al),Wl=ol(Al,Al),Ql=ol(bl,fl),wc=ol(bl,Al),Sc=kl*Wl-Dl*Dl,eu=(Wl*Ql-Dl*wc)/Sc,iu=(kl*wc-Dl*Ql)/Sc,su=cl.z*(1-eu-iu)+hl.z*eu+dl.z*iu;if(isFinite(su))return su}return 1/0}{let F=1/0;for(const ll of Da)F=Math.min(F,ll.z);return F}}const Fp=Oi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jp}=Fp,Vp=Oi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Gp}=Vp,qp=Cp.VectorTileFeature.types,Hp=Math.cos(Math.PI/180*37.5),Zp=Math.pow(2,14)/.5;class yl{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((F=>{this.gradients[F.id]={}})),this.layoutVertexArray=new Is,this.layoutVertexArray2=new Ms,this.indexArray=new Es,this.programConfigurations=new uo(F.layers,F.zoom),this.segments=new Ls,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.hasPattern=Pa("line",this.layers,Da);const cl=this.layers[0].layout.get("line-sort-key"),hl=!cl.isConstant(),dl=[];for(const{feature:pl,id:fl,index:Al,sourceLayerIndex:bl}of F){const F=this.layers[0]._featureFilter.needGeometry,Da=go(pl,F);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),Da,ll))continue;const kl=hl?cl.evaluate(Da,{},ll):void 0,Dl={id:fl,properties:pl.properties,type:pl.type,sourceLayerIndex:bl,index:Al,geometry:F?Da.geometry:mo(pl),patterns:{},sortKey:kl};dl.push(Dl)}hl&&dl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const pl of dl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=pl;if(this.hasPattern){const F=Ca("line",this.layers,pl,this.zoom,Da);this.patternFeatures.push(F)}else this.addFeature(pl,cl,hl,ll,{});Da.featureIndex.insert(F[hl].feature,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}addFeatures(F,Da,ll){for(const cl of this.patternFeatures)this.addFeature(cl,cl.geometry,cl.index,Da,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=F.createVertexBuffer(this.layoutVertexArray2,Gp)),this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,jp),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(F){if(F.properties&&Object.prototype.hasOwnProperty.call(F.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(F.properties,"mapbox_clip_end"))return{start:+F.properties.mapbox_clip_start,end:+F.properties.mapbox_clip_end}}addFeature(F,Da,ll,cl,hl){const dl=this.layers[0].layout,pl=dl.get("line-join").evaluate(F,{}),fl=dl.get("line-cap"),Al=dl.get("line-miter-limit"),bl=dl.get("line-round-limit");this.lineClips=this.lineFeatureClips(F);for(const kl of Da)this.addLine(kl,F,pl,fl,Al,bl);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}addLine(F,Da,ll,cl,hl,dl){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Da=0;Da<F.length-1;Da++)this.totalDistance+=F[Da].dist(F[Da+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const pl="Polygon"===qp[Da.type];let fl=F.length;for(;fl>=2&&F[fl-1].equals(F[fl-2]);)fl--;let Al=0;for(;Al<fl-1&&F[Al].equals(F[Al+1]);)Al++;if(fl<(pl?3:2))return;"bevel"===ll&&(hl=1.05);const bl=this.overscaling<=16?15*Kd/(512*this.overscaling):0,kl=this.segments.prepareSegment(10*fl,this.layoutVertexArray,this.indexArray);let Dl,Wl,Ql,wc,Sc;this.e1=this.e2=-1,pl&&(Dl=F[fl-2],Sc=F[Al].sub(Dl)._unit()._perp());for(let eu=Al;eu<fl;eu++){if(Ql=eu===fl-1?pl?F[Al+1]:void 0:F[eu+1],Ql&&F[eu].equals(Ql))continue;Sc&&(wc=Sc),Dl&&(Wl=Dl),Dl=F[eu],Sc=Ql?Ql.sub(Dl)._unit()._perp():wc,wc=wc||Sc;let Da=wc.add(Sc);0===Da.x&&0===Da.y||Da._unit();const iu=wc.x*Sc.x+wc.y*Sc.y,su=Da.x*Sc.x+Da.y*Sc.y,cu=0!==su?1/su:1/0,uu=2*Math.sqrt(2-2*su),hu=su<Hp&&Wl&&Ql,Lu=wc.x*Sc.y-wc.y*Sc.x>0;if(hu&&eu>Al){const F=Dl.dist(Wl);if(F>2*bl){const Da=Dl.sub(Dl.sub(Wl)._mult(bl/F)._round());this.updateDistance(Wl,Da),this.addCurrentVertex(Da,wc,0,0,kl),Wl=Da}}const zu=Wl&&Ql;let Du=zu?ll:pl?"butt":cl;if(zu&&"round"===Du&&(cu<dl?Du="miter":cu<=2&&(Du="fakeround")),"miter"===Du&&cu>hl&&(Du="bevel"),"bevel"===Du&&(cu>2&&(Du="flipbevel"),cu<hl&&(Du="miter")),Wl&&this.updateDistance(Wl,Dl),"miter"===Du)Da._mult(cu),this.addCurrentVertex(Dl,Da,0,0,kl);else if("flipbevel"===Du){if(cu>100)Da=Sc.mult(-1);else{const F=cu*wc.add(Sc).mag()/wc.sub(Sc).mag();Da._perp()._mult(F*(Lu?-1:1))}this.addCurrentVertex(Dl,Da,0,0,kl),this.addCurrentVertex(Dl,Da.mult(-1),0,0,kl)}else if("bevel"===Du||"fakeround"===Du){const F=-Math.sqrt(cu*cu-1),Da=Lu?F:0,ll=Lu?0:F;if(Wl&&this.addCurrentVertex(Dl,wc,Da,ll,kl),"fakeround"===Du){const F=Math.round(180*uu/Math.PI/20);for(let Da=1;Da<F;Da++){let ll=Da/F;if(.5!==ll){const F=ll-.5;ll+=ll*F*(ll-1)*((1.0904+iu*(iu*(3.55645-1.43519*iu)-3.2452))*F*F+(.848013+iu*(.215638*iu-1.06021)))}const cl=Sc.sub(wc)._mult(ll)._add(wc)._unit()._mult(Lu?-1:1);this.addHalfVertex(Dl,cl.x,cl.y,!1,Lu,0,kl)}}Ql&&this.addCurrentVertex(Dl,Sc,-Da,-ll,kl)}else if("butt"===Du)this.addCurrentVertex(Dl,Da,0,0,kl);else if("square"===Du){const F=Wl?1:-1;this.addCurrentVertex(Dl,Da,F,F,kl)}else"round"===Du&&(Wl&&(this.addCurrentVertex(Dl,wc,0,0,kl),this.addCurrentVertex(Dl,wc,1,1,kl,!0)),Ql&&(this.addCurrentVertex(Dl,Sc,-1,-1,kl,!0),this.addCurrentVertex(Dl,Sc,0,0,kl)));if(hu&&eu<fl-1){const F=Dl.dist(Ql);if(F>2*bl){const Da=Dl.add(Ql.sub(Dl)._mult(bl/F)._round());this.updateDistance(Dl,Da),this.addCurrentVertex(Da,Sc,0,0,kl),Dl=Da}}}}addCurrentVertex(F,Da,ll,cl,hl,dl){void 0===dl&&(dl=!1);const pl=Da.y*cl-Da.x,fl=-Da.y-Da.x*cl;this.addHalfVertex(F,Da.x+Da.y*ll,Da.y-Da.x*ll,dl,!1,ll,hl),this.addHalfVertex(F,pl,fl,dl,!0,-cl,hl),this.distance>Zp/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(F,Da,ll,cl,hl,dl))}addHalfVertex(F,Da,ll,cl,hl,dl,pl){let{x:fl,y:Al}=F;const bl=.5*(this.lineClips?this.scaledDistance*(Zp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((fl<<1)+(cl?1:0),(Al<<1)+(hl?1:0),Math.round(63*Da)+128,Math.round(63*ll)+128,1+(0===dl?0:dl<0?-1:1)|(63&bl)<<2,bl>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const kl=pl.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,kl),pl.primitiveLength++),hl?this.e2=kl:this.e1=kl}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(F,Da){this.distance+=F.dist(Da),this.updateScaledDistance()}}let Wp,Kp;qn("LineBucket",yl,{omit:["layers","patternFeatures"]});var Qp={get paint(){return Kp=Kp||new Ti({"line-opacity":new Pi(Al.paint_line["line-opacity"]),"line-color":new Pi(Al.paint_line["line-color"]),"line-translate":new zi(Al.paint_line["line-translate"]),"line-translate-anchor":new zi(Al.paint_line["line-translate-anchor"]),"line-width":new Pi(Al.paint_line["line-width"]),"line-gap-width":new Pi(Al.paint_line["line-gap-width"]),"line-offset":new Pi(Al.paint_line["line-offset"]),"line-blur":new Pi(Al.paint_line["line-blur"]),"line-dasharray":new Bi(Al.paint_line["line-dasharray"]),"line-pattern":new Ci(Al.paint_line["line-pattern"]),"line-gradient":new Vi(Al.paint_line["line-gradient"])})},get layout(){return Wp=Wp||new Ti({"line-cap":new zi(Al.layout_line["line-cap"]),"line-join":new Pi(Al.layout_line["line-join"]),"line-miter-limit":new zi(Al.layout_line["line-miter-limit"]),"line-round-limit":new zi(Al.layout_line["line-round-limit"]),"line-sort-key":new Pi(Al.layout_line["line-sort-key"])})}};class vl extends Pi{possiblyEvaluate(F,Da){return Da=new vi(Math.floor(Da.zoom),{now:Da.now,fadeDuration:Da.fadeDuration,zoomHistory:Da.zoomHistory,transition:Da.transition}),super.possiblyEvaluate(F,Da)}evaluate(F,Da,ll,cl){return Da=c({},Da,{zoom:Math.floor(Da.zoom)}),super.evaluate(F,Da,ll,cl)}}let Xp;class wl extends Fi{constructor(F){super(F,Qp),this.gradientVersion=0,Xp||(Xp=new vl(Qp.paint.properties["line-width"].specification),Xp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(F){if("line-gradient"===F){const F=this.gradientExpression();this.stepInterpolant=!!function(F){return void 0!==F._styleExpression}(F)&&F._styleExpression.expression instanceof qt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(F,Da){super.recalculate(F,Da),this.paint._values["line-floorwidth"]=Xp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,F)}createBucket(F){return new yl(F)}queryRadius(F){const Da=F,ll=_l(Bo("line-width",this,Da),Bo("line-gap-width",this,Da)),cl=Bo("line-offset",this,Da);return ll/2+Math.abs(cl)+Vo(this.paint.get("line-translate"))}queryIntersectsFeature(F,ll,cl,hl,dl,pl,fl){const Al=To(F,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),pl.angle,fl),bl=fl/2*_l(this.paint.get("line-width").evaluate(ll,cl),this.paint.get("line-gap-width").evaluate(ll,cl)),kl=this.paint.get("line-offset").evaluate(ll,cl);return kl&&(hl=function(F,ll){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=F[hl],pl=[];for(let F=0;F<dl.length;F++){const cl=dl[F-1],hl=dl[F],fl=dl[F+1],Al=0===F?new Da(0,0):hl.sub(cl)._unit()._perp(),bl=F===dl.length-1?new Da(0,0):fl.sub(hl)._unit()._perp(),kl=Al._add(bl)._unit(),Dl=kl.x*bl.x+kl.y*bl.y;0!==Dl&&kl._mult(1/Dl),pl.push(kl._mult(ll)._add(hl))}cl.push(pl)}return cl}(hl,kl*fl)),function(F,Da,ll){for(let cl=0;cl<Da.length;cl++){const hl=Da[cl];if(F.length>=3)for(let Da=0;Da<hl.length;Da++)if(Po(F,hl[Da]))return!0;if(So(F,hl,ll))return!0}return!1}(Al,hl,bl)}isTileClipped(){return!0}}function _l(F,Da){return Da>0?Da+2*F:F}const Yp=Oi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Jp=Oi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Oi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $p=Oi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Oi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const em=Oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Ml(F,Da,ll){return F.sections.forEach((F=>{F.text=function(F,Da,ll){const cl=Da.layout.get("text-transform").evaluate(ll,{});return"uppercase"===cl?F=F.toLocaleUpperCase():"lowercase"===cl&&(F=F.toLocaleLowerCase()),Rd.applyArabicShaping&&(F=Rd.applyArabicShaping(F)),F}(F.text,Da,ll)})),F}Oi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Oi([{name:"triangle",components:3,type:"Uint16"}]),Oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Oi([{type:"Float32",name:"offsetX"}]),Oi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Oi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const tm={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var im=24,nm=Tl,Bl=function(F,Da,ll,cl,hl){var dl,pl,fl=8*hl-cl-1,Al=(1<<fl)-1,bl=Al>>1,kl=-7,Dl=ll?hl-1:0,Wl=ll?-1:1,Ql=F[Da+Dl];for(Dl+=Wl,dl=Ql&(1<<-kl)-1,Ql>>=-kl,kl+=fl;kl>0;dl=256*dl+F[Da+Dl],Dl+=Wl,kl-=8);for(pl=dl&(1<<-kl)-1,dl>>=-kl,kl+=cl;kl>0;pl=256*pl+F[Da+Dl],Dl+=Wl,kl-=8);if(0===dl)dl=1-bl;else{if(dl===Al)return pl?NaN:1/0*(Ql?-1:1);pl+=Math.pow(2,cl),dl-=bl}return(Ql?-1:1)*pl*Math.pow(2,dl-cl)},Vl=function(F,Da,ll,cl,hl,dl){var pl,fl,Al,bl=8*dl-hl-1,kl=(1<<bl)-1,Dl=kl>>1,Wl=23===hl?Math.pow(2,-24)-Math.pow(2,-77):0,Ql=cl?0:dl-1,wc=cl?1:-1,Sc=Da<0||0===Da&&1/Da<0?1:0;for(Da=Math.abs(Da),isNaN(Da)||Da===1/0?(fl=isNaN(Da)?1:0,pl=kl):(pl=Math.floor(Math.log(Da)/Math.LN2),Da*(Al=Math.pow(2,-pl))<1&&(pl--,Al*=2),(Da+=pl+Dl>=1?Wl/Al:Wl*Math.pow(2,1-Dl))*Al>=2&&(pl++,Al/=2),pl+Dl>=kl?(fl=0,pl=kl):pl+Dl>=1?(fl=(Da*Al-1)*Math.pow(2,hl),pl+=Dl):(fl=Da*Math.pow(2,Dl-1)*Math.pow(2,hl),pl=0));hl>=8;F[ll+Ql]=255&fl,Ql+=wc,fl/=256,hl-=8);for(pl=pl<<hl|fl,bl+=hl;bl>0;F[ll+Ql]=255&pl,Ql+=wc,pl/=256,bl-=8);F[ll+Ql-wc]|=128*Sc};function Tl(F){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(F)?F:new Uint8Array(F||0),this.pos=0,this.type=0,this.length=this.buf.length}Tl.Varint=0,Tl.Fixed64=1,Tl.Bytes=2,Tl.Fixed32=5;var rm=4294967296,am=1/rm,sm="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function $l(F){return F.type===Tl.Bytes?F.readVarint()+F.pos:F.pos+1}function Ll(F,Da,ll){return ll?4294967296*Da+(F>>>0):4294967296*(Da>>>0)+(F>>>0)}function Ol(F,Da,ll){var cl=Da<=16383?1:Da<=2097151?2:Da<=268435455?3:Math.floor(Math.log(Da)/(7*Math.LN2));ll.realloc(cl);for(var hl=ll.pos-1;hl>=F;hl--)ll.buf[hl+cl]=ll.buf[hl]}function Rl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeVarint(F[ll])}function jl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSVarint(F[ll])}function ql(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFloat(F[ll])}function Ul(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeDouble(F[ll])}function Nl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeBoolean(F[ll])}function Zl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFixed32(F[ll])}function Gl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSFixed32(F[ll])}function Xl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFixed64(F[ll])}function Hl(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSFixed64(F[ll])}function Yl(F,Da){return(F[Da]|F[Da+1]<<8|F[Da+2]<<16)+16777216*F[Da+3]}function Jl(F,Da,ll){F[ll]=Da,F[ll+1]=Da>>>8,F[ll+2]=Da>>>16,F[ll+3]=Da>>>24}function Kl(F,Da){return(F[Da]|F[Da+1]<<8|F[Da+2]<<16)+(F[Da+3]<<24)}Tl.prototype={destroy:function(){this.buf=null},readFields:function(F,Da,ll){for(ll=ll||this.length;this.pos<ll;){var cl=this.readVarint(),hl=cl>>3,dl=this.pos;this.type=7&cl,F(hl,Da,this),this.pos===dl&&this.skip(cl)}return Da},readMessage:function(F,Da){return this.readFields(F,Da,this.readVarint()+this.pos)},readFixed32:function(){var F=Yl(this.buf,this.pos);return this.pos+=4,F},readSFixed32:function(){var F=Kl(this.buf,this.pos);return this.pos+=4,F},readFixed64:function(){var F=Yl(this.buf,this.pos)+Yl(this.buf,this.pos+4)*rm;return this.pos+=8,F},readSFixed64:function(){var F=Yl(this.buf,this.pos)+Kl(this.buf,this.pos+4)*rm;return this.pos+=8,F},readFloat:function(){var F=Bl(this.buf,this.pos,!0,23,4);return this.pos+=4,F},readDouble:function(){var F=Bl(this.buf,this.pos,!0,52,8);return this.pos+=8,F},readVarint:function(F){var Da,ll,cl=this.buf;return Da=127&(ll=cl[this.pos++]),ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<7,ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<14,ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<21,ll<128?Da:function(F,Da,ll){var cl,hl,dl=ll.buf;if(cl=(112&(hl=dl[ll.pos++]))>>4,hl<128)return Ll(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<3,hl<128)return Ll(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<10,hl<128)return Ll(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<17,hl<128)return Ll(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<24,hl<128)return Ll(F,cl,Da);if(cl|=(1&(hl=dl[ll.pos++]))<<31,hl<128)return Ll(F,cl,Da);throw new Error("Expected varint not more than 10 bytes")}(Da|=(15&(ll=cl[this.pos]))<<28,F,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var F=this.readVarint();return F%2==1?(F+1)/-2:F/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var F=this.readVarint()+this.pos,Da=this.pos;return this.pos=F,F-Da>=12&&sm?function(F,Da,ll){return sm.decode(F.subarray(Da,ll))}(this.buf,Da,F):function(F,Da,ll){for(var cl="",hl=Da;hl<ll;){var dl,pl,fl,Al=F[hl],bl=null,kl=Al>239?4:Al>223?3:Al>191?2:1;if(hl+kl>ll)break;1===kl?Al<128&&(bl=Al):2===kl?128==(192&(dl=F[hl+1]))&&(bl=(31&Al)<<6|63&dl)<=127&&(bl=null):3===kl?(pl=F[hl+2],128==(192&(dl=F[hl+1]))&&128==(192&pl)&&((bl=(15&Al)<<12|(63&dl)<<6|63&pl)<=2047||bl>=55296&&bl<=57343)&&(bl=null)):4===kl&&(pl=F[hl+2],fl=F[hl+3],128==(192&(dl=F[hl+1]))&&128==(192&pl)&&128==(192&fl)&&((bl=(15&Al)<<18|(63&dl)<<12|(63&pl)<<6|63&fl)<=65535||bl>=1114112)&&(bl=null)),null===bl?(bl=65533,kl=1):bl>65535&&(bl-=65536,cl+=String.fromCharCode(bl>>>10&1023|55296),bl=56320|1023&bl),cl+=String.fromCharCode(bl),hl+=kl}return cl}(this.buf,Da,F)},readBytes:function(){var F=this.readVarint()+this.pos,Da=this.buf.subarray(this.pos,F);return this.pos=F,Da},readPackedVarint:function(F,Da){if(this.type!==Tl.Bytes)return F.push(this.readVarint(Da));var ll=$l(this);for(F=F||[];this.pos<ll;)F.push(this.readVarint(Da));return F},readPackedSVarint:function(F){if(this.type!==Tl.Bytes)return F.push(this.readSVarint());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readSVarint());return F},readPackedBoolean:function(F){if(this.type!==Tl.Bytes)return F.push(this.readBoolean());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readBoolean());return F},readPackedFloat:function(F){if(this.type!==Tl.Bytes)return F.push(this.readFloat());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readFloat());return F},readPackedDouble:function(F){if(this.type!==Tl.Bytes)return F.push(this.readDouble());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readDouble());return F},readPackedFixed32:function(F){if(this.type!==Tl.Bytes)return F.push(this.readFixed32());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readFixed32());return F},readPackedSFixed32:function(F){if(this.type!==Tl.Bytes)return F.push(this.readSFixed32());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readSFixed32());return F},readPackedFixed64:function(F){if(this.type!==Tl.Bytes)return F.push(this.readFixed64());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readFixed64());return F},readPackedSFixed64:function(F){if(this.type!==Tl.Bytes)return F.push(this.readSFixed64());var Da=$l(this);for(F=F||[];this.pos<Da;)F.push(this.readSFixed64());return F},skip:function(F){var Da=7&F;if(Da===Tl.Varint)for(;this.buf[this.pos++]>127;);else if(Da===Tl.Bytes)this.pos=this.readVarint()+this.pos;else if(Da===Tl.Fixed32)this.pos+=4;else{if(Da!==Tl.Fixed64)throw new Error("Unimplemented type: "+Da);this.pos+=8}},writeTag:function(F,Da){this.writeVarint(F<<3|Da)},realloc:function(F){for(var Da=this.length||16;Da<this.pos+F;)Da*=2;if(Da!==this.length){var ll=new Uint8Array(Da);ll.set(this.buf),this.buf=ll,this.length=Da}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(F){this.realloc(4),Jl(this.buf,F,this.pos),this.pos+=4},writeSFixed32:function(F){this.realloc(4),Jl(this.buf,F,this.pos),this.pos+=4},writeFixed64:function(F){this.realloc(8),Jl(this.buf,-1&F,this.pos),Jl(this.buf,Math.floor(F*am),this.pos+4),this.pos+=8},writeSFixed64:function(F){this.realloc(8),Jl(this.buf,-1&F,this.pos),Jl(this.buf,Math.floor(F*am),this.pos+4),this.pos+=8},writeVarint:function(F){(F=+F||0)>268435455||F<0?function(F,Da){var ll,cl;if(F>=0?(ll=F%4294967296|0,cl=F/4294967296|0):(cl=~(-F/4294967296),4294967295^(ll=~(-F%4294967296))?ll=ll+1|0:(ll=0,cl=cl+1|0)),F>=0x10000000000000000||F<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Da.realloc(10),function(F,Da,ll){ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,ll.buf[ll.pos]=127&(F>>>=7)}(ll,0,Da),function(F,Da){var ll=(7&F)<<4;Da.buf[Da.pos++]|=ll|((F>>>=3)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F)))))}(cl,Da)}(F,this):(this.realloc(4),this.buf[this.pos++]=127&F|(F>127?128:0),F<=127||(this.buf[this.pos++]=127&(F>>>=7)|(F>127?128:0),F<=127||(this.buf[this.pos++]=127&(F>>>=7)|(F>127?128:0),F<=127||(this.buf[this.pos++]=F>>>7&127))))},writeSVarint:function(F){this.writeVarint(F<0?2*-F-1:2*F)},writeBoolean:function(F){this.writeVarint(Boolean(F))},writeString:function(F){F=String(F),this.realloc(4*F.length),this.pos++;var Da=this.pos;this.pos=function(F,Da,ll){for(var cl,hl,dl=0;dl<Da.length;dl++){if((cl=Da.charCodeAt(dl))>55295&&cl<57344){if(!hl){cl>56319||dl+1===Da.length?(F[ll++]=239,F[ll++]=191,F[ll++]=189):hl=cl;continue}if(cl<56320){F[ll++]=239,F[ll++]=191,F[ll++]=189,hl=cl;continue}cl=hl-55296<<10|cl-56320|65536,hl=null}else hl&&(F[ll++]=239,F[ll++]=191,F[ll++]=189,hl=null);cl<128?F[ll++]=cl:(cl<2048?F[ll++]=cl>>6|192:(cl<65536?F[ll++]=cl>>12|224:(F[ll++]=cl>>18|240,F[ll++]=cl>>12&63|128),F[ll++]=cl>>6&63|128),F[ll++]=63&cl|128)}return ll}(this.buf,F,this.pos);var ll=this.pos-Da;ll>=128&&Ol(Da,ll,this),this.pos=Da-1,this.writeVarint(ll),this.pos+=ll},writeFloat:function(F){this.realloc(4),Vl(this.buf,F,this.pos,!0,23,4),this.pos+=4},writeDouble:function(F){this.realloc(8),Vl(this.buf,F,this.pos,!0,52,8),this.pos+=8},writeBytes:function(F){var Da=F.length;this.writeVarint(Da),this.realloc(Da);for(var ll=0;ll<Da;ll++)this.buf[this.pos++]=F[ll]},writeRawMessage:function(F,Da){this.pos++;var ll=this.pos;F(Da,this);var cl=this.pos-ll;cl>=128&&Ol(ll,cl,this),this.pos=ll-1,this.writeVarint(cl),this.pos+=cl},writeMessage:function(F,Da,ll){this.writeTag(F,Tl.Bytes),this.writeRawMessage(Da,ll)},writePackedVarint:function(F,Da){Da.length&&this.writeMessage(F,Rl,Da)},writePackedSVarint:function(F,Da){Da.length&&this.writeMessage(F,jl,Da)},writePackedBoolean:function(F,Da){Da.length&&this.writeMessage(F,Nl,Da)},writePackedFloat:function(F,Da){Da.length&&this.writeMessage(F,ql,Da)},writePackedDouble:function(F,Da){Da.length&&this.writeMessage(F,Ul,Da)},writePackedFixed32:function(F,Da){Da.length&&this.writeMessage(F,Zl,Da)},writePackedSFixed32:function(F,Da){Da.length&&this.writeMessage(F,Gl,Da)},writePackedFixed64:function(F,Da){Da.length&&this.writeMessage(F,Xl,Da)},writePackedSFixed64:function(F,Da){Da.length&&this.writeMessage(F,Hl,Da)},writeBytesField:function(F,Da){this.writeTag(F,Tl.Bytes),this.writeBytes(Da)},writeFixed32Field:function(F,Da){this.writeTag(F,Tl.Fixed32),this.writeFixed32(Da)},writeSFixed32Field:function(F,Da){this.writeTag(F,Tl.Fixed32),this.writeSFixed32(Da)},writeFixed64Field:function(F,Da){this.writeTag(F,Tl.Fixed64),this.writeFixed64(Da)},writeSFixed64Field:function(F,Da){this.writeTag(F,Tl.Fixed64),this.writeSFixed64(Da)},writeVarintField:function(F,Da){this.writeTag(F,Tl.Varint),this.writeVarint(Da)},writeSVarintField:function(F,Da){this.writeTag(F,Tl.Varint),this.writeSVarint(Da)},writeStringField:function(F,Da){this.writeTag(F,Tl.Bytes),this.writeString(Da)},writeFloatField:function(F,Da){this.writeTag(F,Tl.Fixed32),this.writeFloat(Da)},writeDoubleField:function(F,Da){this.writeTag(F,Tl.Fixed64),this.writeDouble(Da)},writeBooleanField:function(F,Da){this.writeVarintField(F,Boolean(Da))}};var om=e(nm);function tu(F){let Da=0,ll=0;for(const pl of F)Da+=pl.w*pl.h,ll=Math.max(ll,pl.w);F.sort(((F,Da)=>Da.h-F.h));const cl=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(Da/.95)),ll),h:1/0}];let hl=0,dl=0;for(const pl of F)for(let F=cl.length-1;F>=0;F--){const Da=cl[F];if(!(pl.w>Da.w||pl.h>Da.h)){if(pl.x=Da.x,pl.y=Da.y,dl=Math.max(dl,pl.y+pl.h),hl=Math.max(hl,pl.x+pl.w),pl.w===Da.w&&pl.h===Da.h){const Da=cl.pop();F<cl.length&&(cl[F]=Da)}else pl.h===Da.h?(Da.x+=pl.w,Da.w-=pl.w):pl.w===Da.w?(Da.y+=pl.h,Da.h-=pl.h):(cl.push({x:Da.x+pl.w,y:Da.y,w:Da.w-pl.w,h:pl.h}),Da.y+=pl.h,Da.h-=pl.h);break}}return{w:hl,h:dl,fill:Da/(hl*dl)||0}}class ru{constructor(F,Da){let{pixelRatio:ll,version:cl,stretchX:hl,stretchY:dl,content:pl,textFitWidth:fl,textFitHeight:Al}=Da;this.paddedRect=F,this.pixelRatio=ll,this.stretchX=hl,this.stretchY=dl,this.content=pl,this.version=cl,this.textFitWidth=fl,this.textFitHeight=Al}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class nu{constructor(F,Da){const ll={},cl={};this.haveRenderCallbacks=[];const hl=[];this.addImages(F,ll,hl),this.addImages(Da,cl,hl);const{w:dl,h:pl}=tu(hl),fl=new Jo({width:dl||1,height:pl||1});for(const Al in F){const Da=F[Al],cl=ll[Al].paddedRect;Jo.copy(Da.data,fl,{x:0,y:0},{x:cl.x+1,y:cl.y+1},Da.data)}for(const Al in Da){const F=Da[Al],ll=cl[Al].paddedRect,hl=ll.x+1,dl=ll.y+1,pl=F.data.width,bl=F.data.height;Jo.copy(F.data,fl,{x:0,y:0},{x:hl,y:dl},F.data),Jo.copy(F.data,fl,{x:0,y:bl-1},{x:hl,y:dl-1},{width:pl,height:1}),Jo.copy(F.data,fl,{x:0,y:0},{x:hl,y:dl+bl},{width:pl,height:1}),Jo.copy(F.data,fl,{x:pl-1,y:0},{x:hl-1,y:dl},{width:1,height:bl}),Jo.copy(F.data,fl,{x:0,y:0},{x:hl+pl,y:dl},{width:1,height:bl})}this.image=fl,this.iconPositions=ll,this.patternPositions=cl}addImages(F,Da,ll){for(const cl in F){const hl=F[cl],dl={x:0,y:0,w:hl.data.width+2,h:hl.data.height+2};ll.push(dl),Da[cl]=new ru(dl,hl),hl.hasRenderCallback&&this.haveRenderCallbacks.push(cl)}}patchUpdatedImages(F,Da){F.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ll in F.updatedImages)this.patchUpdatedImage(this.iconPositions[ll],F.getImage(ll),Da),this.patchUpdatedImage(this.patternPositions[ll],F.getImage(ll),Da)}patchUpdatedImage(F,Da,ll){if(!F||!Da)return;if(F.version===Da.version)return;F.version=Da.version;const[cl,hl]=F.tl;ll.update(Da.data,void 0,{x:cl,y:hl})}}var lm;qn("ImagePosition",ru),qn("ImageAtlas",nu),function(F){F[F.none=0]="none",F[F.horizontal=1]="horizontal",F[F.vertical=2]="vertical",F[F.horizontalOnly=3]="horizontalOnly"}(lm||(lm={}));const cm=-17;class ou{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(F,Da){const ll=new ou;return ll.scale=F||1,ll.fontStack=Da,ll}static forImage(F){const Da=new ou;return Da.imageName=F,Da}}class au{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(F,Da){const ll=new au;for(let cl=0;cl<F.sections.length;cl++){const hl=F.sections[cl];hl.image?ll.addImageSection(hl):ll.addTextSection(hl,Da)}return ll}length(){return this.text.length}getSection(F){return this.sections[this.sectionIndex[F]]}getSectionIndex(F){return this.sectionIndex[F]}getCharCode(F){return this.text.charCodeAt(F)}verticalizePunctuation(){this.text=function(F){let Da="";for(let ll=0;ll<F.length;ll++){const cl=F.charCodeAt(ll+1)||null,hl=F.charCodeAt(ll-1)||null;Da+=cl&&fi(cl)&&!tm[F[ll+1]]||hl&&fi(hl)&&!tm[F[ll-1]]||!tm[F[ll]]?F[ll]:tm[F[ll]]}return Da}(this.text)}trim(){let F=0;for(let ll=0;ll<this.text.length&&um[this.text.charCodeAt(ll)];ll++)F++;let Da=this.text.length;for(let ll=this.text.length-1;ll>=0&&ll>=F&&um[this.text.charCodeAt(ll)];ll--)Da--;this.text=this.text.substring(F,Da),this.sectionIndex=this.sectionIndex.slice(F,Da)}substring(F,Da){const ll=new au;return ll.text=this.text.substring(F,Da),ll.sectionIndex=this.sectionIndex.slice(F,Da),ll.sections=this.sections,ll}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((F,Da)=>Math.max(F,this.sections[Da].scale)),0)}addTextSection(F,Da){this.text+=F.text,this.sections.push(ou.forText(F.scale,F.fontStack||Da));const ll=this.sections.length-1;for(let cl=0;cl<F.text.length;++cl)this.sectionIndex.push(ll)}addImageSection(F){const Da=F.image?F.image.name:"";if(0===Da.length)return void d("Can't add FormattedSection with an empty image.");const ll=this.getNextImageSectionCharCode();ll?(this.text+=String.fromCharCode(ll),this.sections.push(ou.forImage(Da)),this.sectionIndex.push(this.sections.length-1)):d("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function lu(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc){const Sc=au.fromFeature(F,hl);let eu;Dl===lm.vertical&&Sc.verticalizePunctuation();const{processBidirectionalText:iu,processStyledBidirectionalText:su}=Rd;if(iu&&1===Sc.sections.length){eu=[];const F=iu(Sc.toString(),gu(Sc,bl,dl,Da,cl,Ql));for(const Da of F){const F=new au;F.text=Da,F.sections=Sc.sections;for(let ll=0;ll<Da.length;ll++)F.sectionIndex.push(0);eu.push(F)}}else if(su){eu=[];const F=su(Sc.text,Sc.sectionIndex,gu(Sc,bl,dl,Da,cl,Ql));for(const Da of F){const F=new au;F.text=Da[0],F.sectionIndex=Da[1],F.sections=Sc.sections,eu.push(F)}}else eu=function(F,Da){const ll=[],cl=F.text;let hl=0;for(const dl of Da)ll.push(F.substring(hl,dl)),hl=dl;return hl<cl.length&&ll.push(F.substring(hl,cl.length)),ll}(Sc,gu(Sc,bl,dl,Da,cl,Ql));const cu=[],uu={positionedLines:cu,text:Sc.toString(),top:kl[1],bottom:kl[1],left:kl[0],right:kl[0],writingMode:Dl,iconsInText:!1,verticalizable:!1};return function(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){let Wl=0,Ql=cm,wc=0,Sc=0;const eu="right"===fl?1:"left"===fl?0:.5;let iu=0;for(const Lu of hl){Lu.trim();const hl=Lu.getMaxScale(),pl=(hl-1)*im,fl={positionedGlyphs:[],lineOffset:0};F.positionedLines[iu]=fl;const cu=fl.positionedGlyphs;let uu=0;if(!Lu.length()){Ql+=dl,++iu;continue}for(let dl=0;dl<Lu.length();dl++){const fl=Lu.getSection(dl),wc=Lu.getSectionIndex(dl),Sc=Lu.getCharCode(dl);let eu=0,iu=null,hu=null,zu=null,Du=im;const Nu=!(Al===lm.horizontal||!kl&&!pi(Sc)||kl&&(um[Sc]||(su=Sc,/\p{sc=Arab}/u.test(String.fromCodePoint(su)))));if(fl.imageName){const Da=cl[fl.imageName];if(!Da)continue;zu=fl.imageName,F.iconsInText=F.iconsInText||!0,hu=Da.paddedRect;const ll=Da.displaySize;fl.scale=fl.scale*im/Dl,iu={width:ll[0],height:ll[1],left:1,top:-3,advance:Nu?ll[1]:ll[0]},eu=pl+(im-ll[1]*fl.scale),Du=iu.advance;const dl=Nu?ll[0]*fl.scale-im*hl:ll[1]*fl.scale-im*hl;dl>0&&dl>uu&&(uu=dl)}else{const F=ll[fl.fontStack],cl=F&&F[Sc];if(cl&&cl.rect)hu=cl.rect,iu=cl.metrics;else{const F=Da[fl.fontStack],ll=F&&F[Sc];if(!ll)continue;iu=ll.metrics}eu=(hl-fl.scale)*im}Nu?(F.verticalizable=!0,cu.push({glyph:Sc,imageName:zu,x:Wl,y:Ql+eu,vertical:Nu,scale:fl.scale,fontStack:fl.fontStack,sectionIndex:wc,metrics:iu,rect:hu}),Wl+=Du*fl.scale+bl):(cu.push({glyph:Sc,imageName:zu,x:Wl,y:Ql+eu,vertical:Nu,scale:fl.scale,fontStack:fl.fontStack,sectionIndex:wc,metrics:iu,rect:hu}),Wl+=iu.advance*fl.scale+bl)}0!==cu.length&&(wc=Math.max(Wl-bl,wc),vu(cu,0,cu.length-1,eu,uu)),Wl=0;const hu=dl*hl+uu;fl.lineOffset=Math.max(uu,pl),Ql+=hu,Sc=Math.max(hu,Sc),++iu}var su;const cu=Ql-cm,{horizontalAlign:uu,verticalAlign:hu}=xu(pl);(function(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=(Da-ll)*hl;let kl=0;kl=dl!==pl?-fl*cl-cm:(-cl*Al+.5)*pl;for(const Dl of F)for(const F of Dl.positionedGlyphs)F.x+=bl,F.y+=kl})(F.positionedLines,eu,uu,hu,wc,Sc,dl,cu,hl.length),F.top+=-hu*cu,F.bottom=F.top+cu,F.left+=-uu*wc,F.right=F.left+wc}(uu,Da,ll,cl,eu,pl,fl,Al,Dl,bl,Wl,wc),!function(F){for(const Da of F)if(0!==Da.positionedGlyphs.length)return!1;return!0}(cu)&&uu}const um={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},dm={40:!0};function pu(F,Da,ll,cl,hl,dl){if(Da.imageName){const F=cl[Da.imageName];return F?F.displaySize[0]*Da.scale*im/dl+hl:0}{const cl=ll[Da.fontStack],dl=cl&&cl[F];return dl?dl.metrics.advance*Da.scale+hl:0}}function fu(F,Da,ll,cl){const hl=Math.pow(F-Da,2);return cl?F<Da?hl/2:2*hl:hl+Math.abs(ll)*ll}function du(F,Da,ll){let cl=0;return 10===F&&(cl-=1e4),ll&&(cl+=150),40!==F&&65288!==F||(cl+=50),41!==Da&&65289!==Da||(cl+=50),cl}function yu(F,Da,ll,cl,hl,dl){let pl=null,fl=fu(Da,ll,hl,dl);for(const Al of cl){const F=fu(Da-Al.x,ll,hl,dl)+Al.badness;F<=fl&&(pl=Al,fl=F)}return{index:F,x:Da,priorBreak:pl,badness:fl}}function mu(F){return F?mu(F.priorBreak).concat(F.index):[]}function gu(F,Da,ll,cl,hl,dl){if(!F)return[];const pl=[],fl=function(F,Da,ll,cl,hl,dl){let pl=0;for(let fl=0;fl<F.length();fl++){const ll=F.getSection(fl);pl+=pu(F.getCharCode(fl),ll,cl,hl,Da,dl)}return pl/Math.max(1,Math.ceil(pl/ll))}(F,Da,ll,cl,hl,dl),Al=F.text.indexOf("\u200b")>=0;let bl=0;for(let Dl=0;Dl<F.length();Dl++){const ll=F.getSection(Dl),Wl=F.getCharCode(Dl);if(um[Wl]||(bl+=pu(Wl,ll,cl,hl,Da,dl)),Dl<F.length()-1){const Da=!((kl=Wl)<11904)&&(!!si_CJK_Compatibility_Forms(kl)||!!si_CJK_Compatibility(kl)||!!si_CJK_Strokes(kl)||!!si_CJK_Symbols_and_Punctuation(kl)||!!si_Enclosed_CJK_Letters_and_Months(kl)||!!si_Halfwidth_and_Fullwidth_Forms(kl)||!!si_Ideographic_Description_Characters(kl)||!!si_Vertical_Forms(kl)||Pd.test(String.fromCodePoint(kl)));(hm[Wl]||Da||ll.imageName||Dl!==F.length()-2&&dm[F.getCharCode(Dl+1)])&&pl.push(yu(Dl+1,bl,fl,pl,du(Wl,F.getCharCode(Dl+1),Da&&Al),!1))}}var kl;return mu(yu(F.length(),bl,fl,pl,0,!0))}function xu(F){let Da=.5,ll=.5;switch(F){case"right":case"top-right":case"bottom-right":Da=1;break;case"left":case"top-left":case"bottom-left":Da=0}switch(F){case"bottom":case"bottom-right":case"bottom-left":ll=1;break;case"top":case"top-right":case"top-left":ll=0}return{horizontalAlign:Da,verticalAlign:ll}}function vu(F,Da,ll,cl,hl){if(!cl&&!hl)return;const dl=F[ll],pl=(F[ll].x+dl.metrics.advance*dl.scale)*cl;for(let fl=Da;fl<=ll;fl++)F[fl].x-=pl,F[fl].y+=hl}function bu(F,Da,ll){const{horizontalAlign:cl,verticalAlign:hl}=xu(ll),dl=Da[0]-F.displaySize[0]*cl,pl=Da[1]-F.displaySize[1]*hl;return{image:F,top:pl,bottom:pl+F.displaySize[1],left:dl,right:dl+F.displaySize[0]}}function wu(F){var Da,ll;let cl=F.left,hl=F.top,dl=F.right-cl,pl=F.bottom-hl;const fl=null!==(Da=F.image.textFitWidth)&&void 0!==Da?Da:"stretchOrShrink",Al=null!==(ll=F.image.textFitHeight)&&void 0!==ll?ll:"stretchOrShrink",bl=(F.image.content[2]-F.image.content[0])/(F.image.content[3]-F.image.content[1]);if("proportional"===Al){if("stretchOnly"===fl&&dl/pl<bl||"proportional"===fl){const F=Math.ceil(pl*bl);cl*=F/dl,dl=F}}else if("proportional"===fl&&"stretchOnly"===Al&&0!==bl&&dl/pl>bl){const F=Math.ceil(dl/bl);hl*=F/pl,pl=F}return{x1:cl,y1:hl,x2:cl+dl,y2:hl+pl}}function _u(F,Da,ll,cl,hl,dl){const pl=F.image;let fl;if(pl.content){const F=pl.content,Da=pl.pixelRatio||1;fl=[F[0]/Da,F[1]/Da,pl.displaySize[0]-F[2]/Da,pl.displaySize[1]-F[3]/Da]}const Al=Da.left*dl,bl=Da.right*dl;let kl,Dl,Wl,Ql;"width"===ll||"both"===ll?(Ql=hl[0]+Al-cl[3],Dl=hl[0]+bl+cl[1]):(Ql=hl[0]+(Al+bl-pl.displaySize[0])/2,Dl=Ql+pl.displaySize[0]);const wc=Da.top*dl,Sc=Da.bottom*dl;return"height"===ll||"both"===ll?(kl=hl[1]+wc-cl[0],Wl=hl[1]+Sc+cl[2]):(kl=hl[1]+(wc+Sc-pl.displaySize[1])/2,Wl=kl+pl.displaySize[1]),{image:pl,top:kl,right:Dl,bottom:Wl,left:Ql,collisionPadding:fl}}const pm=128,mm=32640;function Iu(F,Da){const{expression:ll}=Da;if("constant"===ll.kind)return{kind:"constant",layoutSize:ll.evaluate(new vi(F+1))};if("source"===ll.kind)return{kind:"source"};{const{zoomStops:Da,interpolationType:cl}=ll;let hl=0;for(;hl<Da.length&&Da[hl]<=F;)hl++;hl=Math.max(0,hl-1);let dl=hl;for(;dl<Da.length&&Da[dl]<F+1;)dl++;dl=Math.min(Da.length-1,dl);const pl=Da[hl],fl=Da[dl];return"composite"===ll.kind?{kind:"composite",minZoom:pl,maxZoom:fl,interpolationType:cl}:{kind:"camera",minZoom:pl,maxZoom:fl,minSize:ll.evaluate(new vi(pl)),maxSize:ll.evaluate(new vi(fl)),interpolationType:cl}}}function Mu(F,Da,ll){let cl="never";const hl=F.get(Da);return hl?cl=hl:F.get(ll)&&(cl="always"),cl}const fm=Cp.VectorTileFeature.types,gm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cu(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=fl?Math.min(mm,Math.round(fl[0])):0,wc=fl?Math.min(mm,Math.round(fl[1])):0;F.emplaceBack(Da,ll,Math.round(32*cl),Math.round(32*hl),dl,pl,(Ql<<1)+(Al?1:0),wc,16*bl,16*kl,256*Dl,256*Wl)}function Bu(F,Da,ll){F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll)}function Vu(F){for(const Da of F.sections)if(gi(Da.text))return!0;return!1}class Tu{constructor(F){this.layoutVertexArray=new Ps,this.indexArray=new Es,this.programConfigurations=F,this.segments=new Ls,this.dynamicLayoutVertexArray=new Cs,this.opacityVertexArray=new Bs,this.hasVisibleVertices=!1,this.placedSymbolArray=new fs}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(F,Da,ll,cl){this.isEmpty()||(ll&&(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,Yp.members),this.indexBuffer=F.createIndexBuffer(this.indexArray,Da),this.dynamicLayoutVertexBuffer=F.createVertexBuffer(this.dynamicLayoutVertexArray,Jp.members,!0),this.opacityVertexBuffer=F.createVertexBuffer(this.opacityVertexArray,gm,!0),this.opacityVertexBuffer.itemSize=1),(ll||cl)&&this.programConfigurations.upload(F))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qn("SymbolBuffers",Tu);class Eu{constructor(F,Da,ll){this.layoutVertexArray=new F,this.layoutAttributes=Da,this.indexArray=new ll,this.segments=new Ls,this.collisionVertexArray=new Ts}upload(F){this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=F.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=F.createVertexBuffer(this.collisionVertexArray,$p.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qn("CollisionBuffers",Eu);class Fu{constructor(F){this.collisionBoxArray=F.collisionBoxArray,this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.pixelRatio=F.pixelRatio,this.sourceLayerIndex=F.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Oo([]),this.placementViewportMatrix=Oo([]);const Da=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Iu(this.zoom,Da["text-size"]),this.iconSizeData=Iu(this.zoom,Da["icon-size"]);const ll=this.layers[0].layout,cl=ll.get("symbol-sort-key"),hl=ll.get("symbol-z-order");this.canOverlap="never"!==Mu(ll,"text-overlap","text-allow-overlap")||"never"!==Mu(ll,"icon-overlap","icon-allow-overlap")||ll.get("text-ignore-placement")||ll.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==hl&&!cl.isConstant(),this.sortFeaturesByY=("viewport-y"===hl||"auto"===hl&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===ll.get("symbol-placement")&&(this.writingModes=ll.get("text-writing-mode").map((F=>lm[F]))),this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id)),this.sourceID=F.sourceID}createArrays(){this.text=new Tu(new uo(this.layers,this.zoom,(F=>/^text/.test(F)))),this.icon=new Tu(new uo(this.layers,this.zoom,(F=>/^icon/.test(F)))),this.glyphOffsetArray=new ms,this.lineVertexArray=new gs,this.symbolInstances=new ys,this.textAnchorOffsets=new vs}calculateGlyphDependencies(F,Da,ll,cl,hl){for(let dl=0;dl<F.length;dl++)if(Da[F.charCodeAt(dl)]=!0,(ll||cl)&&hl){const ll=tm[F.charAt(dl)];ll&&(Da[ll.charCodeAt(0)]=!0)}}populate(F,Da,ll){const cl=this.layers[0],hl=cl.layout,dl=hl.get("text-font"),pl=hl.get("text-field"),fl=hl.get("icon-image"),Al=("constant"!==pl.value.kind||pl.value.value instanceof yt&&!pl.value.value.isEmpty()||pl.value.value.toString().length>0)&&("constant"!==dl.value.kind||dl.value.value.length>0),bl="constant"!==fl.value.kind||!!fl.value.value||Object.keys(fl.parameters).length>0,kl=hl.get("symbol-sort-key");if(this.features=[],!Al&&!bl)return;const Dl=Da.iconDependencies,Wl=Da.glyphDependencies,Ql=Da.availableImages,wc=new vi(this.zoom);for(const{feature:Sc,id:eu,index:iu,sourceLayerIndex:su}of F){const F=cl._featureFilter.needGeometry,Da=go(Sc,F);if(!cl._featureFilter.filter(wc,Da,ll))continue;let pl,fl;if(F||(Da.geometry=mo(Sc)),Al){const F=cl.getValueAndResolveTokens("text-field",Da,ll,Ql),hl=yt.factory(F),dl=this.hasRTLText=this.hasRTLText||Vu(hl);(!dl||"unavailable"===Rd.getRTLTextPluginStatus()||dl&&Rd.isParsed())&&(pl=Ml(hl,cl,Da))}if(bl){const F=cl.getValueAndResolveTokens("icon-image",Da,ll,Ql);fl=F instanceof vt?F:vt.fromString(F)}if(!pl&&!fl)continue;const cu=this.sortFeaturesByKey?kl.evaluate(Da,{},ll):void 0;if(this.features.push({id:eu,text:pl,icon:fl,index:iu,sourceLayerIndex:su,geometry:Da.geometry,properties:Sc.properties,type:fm[Sc.type],sortKey:cu}),fl&&(Dl[fl.name]=!0),pl){const F=dl.evaluate(Da,{},ll).join(","),cl="viewport"!==hl.get("text-rotation-alignment")&&"point"!==hl.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(lm.vertical)>=0;for(const Da of pl.sections)if(Da.image)Dl[Da.image.name]=!0;else{const ll=oi(pl.toString()),hl=Da.fontStack||F,dl=Wl[hl]=Wl[hl]||{};this.calculateGlyphDependencies(Da.text,dl,cl,this.allowVerticalPlacement,ll)}}}"line"===hl.get("symbol-placement")&&(this.features=function(F){const Da={},ll={},cl=[];let hl=0;function s(Da){cl.push(F[Da]),hl++}function o(F,Da,hl){const dl=ll[F];return delete ll[F],ll[Da]=dl,cl[dl].geometry[0].pop(),cl[dl].geometry[0]=cl[dl].geometry[0].concat(hl[0]),dl}function a(F,ll,hl){const dl=Da[ll];return delete Da[ll],Da[F]=dl,cl[dl].geometry[0].shift(),cl[dl].geometry[0]=hl[0].concat(cl[dl].geometry[0]),dl}function l(F,Da,ll){const cl=ll?Da[0][Da[0].length-1]:Da[0][0];return`${F}:${cl.x}:${cl.y}`}for(let dl=0;dl<F.length;dl++){const pl=F[dl],fl=pl.geometry,Al=pl.text?pl.text.toString():null;if(!Al){s(dl);continue}const bl=l(Al,fl),kl=l(Al,fl,!0);if(bl in ll&&kl in Da&&ll[bl]!==Da[kl]){const F=a(bl,kl,fl),hl=o(bl,kl,cl[F].geometry);delete Da[bl],delete ll[kl],ll[l(Al,cl[hl].geometry,!0)]=hl,cl[F].geometry=null}else bl in ll?o(bl,kl,fl):kl in Da?a(bl,kl,fl):(s(dl),Da[bl]=hl-1,ll[kl]=hl-1)}return cl.filter((F=>F.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((F,Da)=>F.sortKey-Da.sortKey))}update(F,Da,ll){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(F,Da,this.layers,ll),this.icon.programConfigurations.updatePaintArrays(F,Da,this.layers,ll))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(F){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(F),this.iconCollisionBox.upload(F)),this.text.upload(F,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(F,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(F,Da){const ll=this.lineVertexArray.length;if(void 0!==F.segment){let ll=F.dist(Da[F.segment+1]),cl=F.dist(Da[F.segment]);const hl={};for(let dl=F.segment+1;dl<Da.length;dl++)hl[dl]={x:Da[dl].x,y:Da[dl].y,tileUnitDistanceFromAnchor:ll},dl<Da.length-1&&(ll+=Da[dl+1].dist(Da[dl]));for(let dl=F.segment||0;dl>=0;dl--)hl[dl]={x:Da[dl].x,y:Da[dl].y,tileUnitDistanceFromAnchor:cl},dl>0&&(cl+=Da[dl-1].dist(Da[dl]));for(let F=0;F<Da.length;F++){const Da=hl[F];this.lineVertexArray.emplaceBack(Da.x,Da.y,Da.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ll,lineLength:this.lineVertexArray.length-ll}}addSymbols(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){const Wl=F.indexArray,Ql=F.layoutVertexArray,wc=F.segments.prepareSegment(4*Da.length,Ql,Wl,this.canOverlap?dl.sortKey:void 0),Sc=this.glyphOffsetArray.length,eu=wc.vertexLength,iu=this.allowVerticalPlacement&&pl===lm.vertical?Math.PI/2:0,su=dl.text&&dl.text.sections;for(let cu=0;cu<Da.length;cu++){const{tl:cl,tr:hl,bl:pl,br:Al,tex:bl,pixelOffsetTL:kl,pixelOffsetBR:Sc,minFontScaleX:eu,minFontScaleY:uu,glyphOffset:hu,isSDF:Lu,sectionIndex:zu}=Da[cu],Du=wc.vertexLength,Nu=hu[1];Cu(Ql,fl.x,fl.y,cl.x,Nu+cl.y,bl.x,bl.y,ll,Lu,kl.x,kl.y,eu,uu),Cu(Ql,fl.x,fl.y,hl.x,Nu+hl.y,bl.x+bl.w,bl.y,ll,Lu,Sc.x,kl.y,eu,uu),Cu(Ql,fl.x,fl.y,pl.x,Nu+pl.y,bl.x,bl.y+bl.h,ll,Lu,kl.x,Sc.y,eu,uu),Cu(Ql,fl.x,fl.y,Al.x,Nu+Al.y,bl.x+bl.w,bl.y+bl.h,ll,Lu,Sc.x,Sc.y,eu,uu),Bu(F.dynamicLayoutVertexArray,fl,iu),Wl.emplaceBack(Du,Du+1,Du+2),Wl.emplaceBack(Du+1,Du+2,Du+3),wc.vertexLength+=4,wc.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hu[0]),cu!==Da.length-1&&zu===Da[cu+1].sectionIndex||F.programConfigurations.populatePaintArrays(Ql.length,dl,dl.index,{},Dl,su&&su[zu])}F.placedSymbolArray.emplaceBack(fl.x,fl.y,Sc,this.glyphOffsetArray.length-Sc,eu,Al,bl,fl.segment,ll?ll[0]:0,ll?ll[1]:0,cl[0],cl[1],pl,0,!1,0,kl)}_addCollisionDebugVertex(F,Da,ll,cl,hl,dl){return Da.emplaceBack(0,0),F.emplaceBack(ll.x,ll.y,cl,hl,Math.round(dl.x),Math.round(dl.y))}addCollisionDebugVertices(F,ll,cl,hl,dl,pl,fl){const Al=dl.segments.prepareSegment(4,dl.layoutVertexArray,dl.indexArray),bl=Al.vertexLength,kl=dl.layoutVertexArray,Dl=dl.collisionVertexArray,Wl=fl.anchorX,Ql=fl.anchorY;this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new Da(F,ll)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new Da(cl,ll)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new Da(cl,hl)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new Da(F,hl)),Al.vertexLength+=4;const wc=dl.indexArray;wc.emplaceBack(bl,bl+1),wc.emplaceBack(bl+1,bl+2),wc.emplaceBack(bl+2,bl+3),wc.emplaceBack(bl+3,bl),Al.primitiveLength+=4}addDebugCollisionBoxes(F,Da,ll,cl){for(let hl=F;hl<Da;hl++){const F=this.collisionBoxArray.get(hl);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,cl?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,ll)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Eu(Vs,em.members,Fs),this.iconCollisionBox=new Eu(Vs,em.members,Fs);for(let F=0;F<this.symbolInstances.length;F++){const Da=this.symbolInstances.get(F);this.addDebugCollisionBoxes(Da.textBoxStartIndex,Da.textBoxEndIndex,Da,!0),this.addDebugCollisionBoxes(Da.verticalTextBoxStartIndex,Da.verticalTextBoxEndIndex,Da,!0),this.addDebugCollisionBoxes(Da.iconBoxStartIndex,Da.iconBoxEndIndex,Da,!1),this.addDebugCollisionBoxes(Da.verticalIconBoxStartIndex,Da.verticalIconBoxEndIndex,Da,!1)}}_deserializeCollisionBoxesForSymbol(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl={};for(let kl=Da;kl<ll;kl++){const Da=F.get(kl);bl.textBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.textFeatureIndex=Da.featureIndex;break}for(let kl=cl;kl<hl;kl++){const Da=F.get(kl);bl.verticalTextBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.verticalTextFeatureIndex=Da.featureIndex;break}for(let kl=dl;kl<pl;kl++){const Da=F.get(kl);bl.iconBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.iconFeatureIndex=Da.featureIndex;break}for(let kl=fl;kl<Al;kl++){const Da=F.get(kl);bl.verticalIconBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.verticalIconFeatureIndex=Da.featureIndex;break}return bl}deserializeCollisionBoxes(F){this.collisionArrays=[];for(let Da=0;Da<this.symbolInstances.length;Da++){const ll=this.symbolInstances.get(Da);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(F,ll.textBoxStartIndex,ll.textBoxEndIndex,ll.verticalTextBoxStartIndex,ll.verticalTextBoxEndIndex,ll.iconBoxStartIndex,ll.iconBoxEndIndex,ll.verticalIconBoxStartIndex,ll.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(F,Da){const ll=F.placedSymbolArray.get(Da),cl=ll.vertexStartIndex+4*ll.numGlyphs;for(let hl=ll.vertexStartIndex;hl<cl;hl+=4)F.indexArray.emplaceBack(hl,hl+1,hl+2),F.indexArray.emplaceBack(hl+1,hl+2,hl+3)}getSortedSymbolIndexes(F){if(this.sortedAngle===F&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const Da=Math.sin(F),ll=Math.cos(F),cl=[],hl=[],dl=[];for(let pl=0;pl<this.symbolInstances.length;++pl){dl.push(pl);const F=this.symbolInstances.get(pl);cl.push(0|Math.round(Da*F.anchorX+ll*F.anchorY)),hl.push(F.featureIndex)}return dl.sort(((F,Da)=>cl[F]-cl[Da]||hl[Da]-hl[F])),dl}addToSortKeyRanges(F,Da){const ll=this.sortKeyRanges[this.sortKeyRanges.length-1];ll&&ll.sortKey===Da?ll.symbolInstanceEnd=F+1:this.sortKeyRanges.push({sortKey:Da,symbolInstanceStart:F,symbolInstanceEnd:F+1})}sortFeatures(F){if(this.sortFeaturesByY&&this.sortedAngle!==F&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(F),this.sortedAngle=F,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const F of this.symbolInstanceIndexes){const Da=this.symbolInstances.get(F);this.featureSortOrder.push(Da.featureIndex),[Da.rightJustifiedTextSymbolIndex,Da.centerJustifiedTextSymbolIndex,Da.leftJustifiedTextSymbolIndex].forEach(((F,Da,ll)=>{F>=0&&ll.indexOf(F)===Da&&this.addIndicesForPlacedSymbol(this.text,F)})),Da.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Da.verticalPlacedTextSymbolIndex),Da.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Da.placedIconSymbolIndex),Da.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Da.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Am,ym;qn("SymbolBucket",Fu,{omit:["layers","collisionBoxArray","features","compareText"]}),Fu.MAX_GLYPHS=65535,Fu.addDynamicAttributes=Bu;var vm={get paint(){return ym=ym||new Ti({"icon-opacity":new Pi(Al.paint_symbol["icon-opacity"]),"icon-color":new Pi(Al.paint_symbol["icon-color"]),"icon-halo-color":new Pi(Al.paint_symbol["icon-halo-color"]),"icon-halo-width":new Pi(Al.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Pi(Al.paint_symbol["icon-halo-blur"]),"icon-translate":new zi(Al.paint_symbol["icon-translate"]),"icon-translate-anchor":new zi(Al.paint_symbol["icon-translate-anchor"]),"text-opacity":new Pi(Al.paint_symbol["text-opacity"]),"text-color":new Pi(Al.paint_symbol["text-color"],{runtimeType:wc,getOverride:F=>F.textColor,hasOverride:F=>!!F.textColor}),"text-halo-color":new Pi(Al.paint_symbol["text-halo-color"]),"text-halo-width":new Pi(Al.paint_symbol["text-halo-width"]),"text-halo-blur":new Pi(Al.paint_symbol["text-halo-blur"]),"text-translate":new zi(Al.paint_symbol["text-translate"]),"text-translate-anchor":new zi(Al.paint_symbol["text-translate-anchor"])})},get layout(){return Am=Am||new Ti({"symbol-placement":new zi(Al.layout_symbol["symbol-placement"]),"symbol-spacing":new zi(Al.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zi(Al.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Pi(Al.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zi(Al.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zi(Al.layout_symbol["icon-allow-overlap"]),"icon-overlap":new zi(Al.layout_symbol["icon-overlap"]),"icon-ignore-placement":new zi(Al.layout_symbol["icon-ignore-placement"]),"icon-optional":new zi(Al.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zi(Al.layout_symbol["icon-rotation-alignment"]),"icon-size":new Pi(Al.layout_symbol["icon-size"]),"icon-text-fit":new zi(Al.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zi(Al.layout_symbol["icon-text-fit-padding"]),"icon-image":new Pi(Al.layout_symbol["icon-image"]),"icon-rotate":new Pi(Al.layout_symbol["icon-rotate"]),"icon-padding":new Pi(Al.layout_symbol["icon-padding"]),"icon-keep-upright":new zi(Al.layout_symbol["icon-keep-upright"]),"icon-offset":new Pi(Al.layout_symbol["icon-offset"]),"icon-anchor":new Pi(Al.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zi(Al.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zi(Al.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zi(Al.layout_symbol["text-rotation-alignment"]),"text-field":new Pi(Al.layout_symbol["text-field"]),"text-font":new Pi(Al.layout_symbol["text-font"]),"text-size":new Pi(Al.layout_symbol["text-size"]),"text-max-width":new Pi(Al.layout_symbol["text-max-width"]),"text-line-height":new zi(Al.layout_symbol["text-line-height"]),"text-letter-spacing":new Pi(Al.layout_symbol["text-letter-spacing"]),"text-justify":new Pi(Al.layout_symbol["text-justify"]),"text-radial-offset":new Pi(Al.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zi(Al.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Pi(Al.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Pi(Al.layout_symbol["text-anchor"]),"text-max-angle":new zi(Al.layout_symbol["text-max-angle"]),"text-writing-mode":new zi(Al.layout_symbol["text-writing-mode"]),"text-rotate":new Pi(Al.layout_symbol["text-rotate"]),"text-padding":new zi(Al.layout_symbol["text-padding"]),"text-keep-upright":new zi(Al.layout_symbol["text-keep-upright"]),"text-transform":new Pi(Al.layout_symbol["text-transform"]),"text-offset":new Pi(Al.layout_symbol["text-offset"]),"text-allow-overlap":new zi(Al.layout_symbol["text-allow-overlap"]),"text-overlap":new zi(Al.layout_symbol["text-overlap"]),"text-ignore-placement":new zi(Al.layout_symbol["text-ignore-placement"]),"text-optional":new zi(Al.layout_symbol["text-optional"])})}};class Ou{constructor(F){if(void 0===F.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=F.property.overrides?F.property.overrides.runtimeType:kl,this.defaultValue=F}evaluate(F){if(F.formattedSection){const Da=this.defaultValue.property.overrides;if(Da&&Da.hasOverride(F.formattedSection))return Da.getOverride(F.formattedSection)}return F.feature&&F.featureState?this.defaultValue.evaluate(F.feature,F.featureState):this.defaultValue.property.specification.default}eachChild(F){this.defaultValue.isConstant()||F(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qn("FormatSectionOverride",Ou,{omit:["defaultValue"]});class Ru extends Fi{constructor(F){super(F,vm)}recalculate(F,Da){if(super.recalculate(F,Da),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const F=this.layout.get("text-writing-mode");if(F){const Da=[];for(const ll of F)Da.indexOf(ll)<0&&Da.push(ll);this.layout._values["text-writing-mode"]=Da}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(F,Da,ll,cl){const hl=this.layout.get(F).evaluate(Da,{},ll,cl),dl=this._unevaluatedLayout._values[F];return dl.isDataDriven()||$r(dl.value)||!hl?hl:function(F,Da){return Da.replace(/{([^{}]+)}/g,((Da,ll)=>F&&ll in F?String(F[ll]):""))}(Da.properties,hl)}createBucket(F){return new Fu(F)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const F of vm.paint.overridableProperties){if(!Ru.hasPaintOverride(this.layout,F))continue;const Da=this.paint.get(F),ll=new Ou(Da),cl=new Dr(ll,Da.property.specification);let hl=null;hl="constant"===Da.value.kind||"source"===Da.value.kind?new Or("source",cl):new Rr("composite",cl,Da.value.zoomStops),this.paint._values[F]=new Ii(Da.property,hl,Da.parameters)}}_handleOverridablePaintPropertyUpdate(F,Da,ll){return!(!this.layout||Da.isDataDriven()||ll.isDataDriven())&&Ru.hasPaintOverride(this.layout,F)}static hasPaintOverride(F,Da){const ll=F.get("text-field"),cl=vm.paint.properties[Da];let hl=!1;const s=F=>{for(const Da of F)if(cl.overrides&&cl.overrides.hasOverride(Da))return void(hl=!0)};if("constant"===ll.value.kind&&ll.value.value instanceof yt)s(ll.value.value.sections);else if("source"===ll.value.kind){const t=F=>{hl||(F instanceof kt&&_t(F.value)===su?s(F.value.sections):F instanceof ce?s(F.sections):F.eachChild(t))},F=ll.value;F._styleExpression&&t(F._styleExpression.expression)}return hl}}let _m;var xm={get paint(){return _m=_m||new Ti({"background-color":new zi(Al.paint_background["background-color"]),"background-pattern":new Bi(Al.paint_background["background-pattern"]),"background-opacity":new zi(Al.paint_background["background-opacity"])})}};class Uu extends Fi{constructor(F){super(F,xm)}}let bm;var wm={get paint(){return bm=bm||new Ti({"raster-opacity":new zi(Al.paint_raster["raster-opacity"]),"raster-hue-rotate":new zi(Al.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zi(Al.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zi(Al.paint_raster["raster-brightness-max"]),"raster-saturation":new zi(Al.paint_raster["raster-saturation"]),"raster-contrast":new zi(Al.paint_raster["raster-contrast"]),"raster-resampling":new zi(Al.paint_raster["raster-resampling"]),"raster-fade-duration":new zi(Al.paint_raster["raster-fade-duration"])})}};class Gu extends Fi{constructor(F){super(F,wm)}}class Xu extends Fi{constructor(F){super(F,{}),this.onAdd=F=>{this.implementation.onAdd&&this.implementation.onAdd(F,F.painter.context.gl)},this.onRemove=F=>{this.implementation.onRemove&&this.implementation.onRemove(F,F.painter.context.gl)},this.implementation=F}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}function Hu(F){if("custom"===F.type)return new Xu(F);switch(F.type){case"background":return new Uu(F);case"circle":return new jo(F);case"fill":return new Fa(F);case"fill-extrusion":return new sl(F);case"heatmap":return new Wo(F);case"hillshade":return new ea(F);case"line":return new wl(F);case"raster":return new Gu(F);case"symbol":return new Ru(F)}}class Yu{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,Da){for(const cl of F){this._layerConfigs[cl.id]=cl;const F=this._layers[cl.id]=Hu(cl);F._featureFilter=Gr(F.filter),this.keyCache[cl.id]&&delete this.keyCache[cl.id]}for(const cl of Da)delete this.keyCache[cl],delete this._layerConfigs[cl],delete this._layers[cl];this.familiesBySource={};const ll=function(F,Da){const ll={};for(let hl=0;hl<F.length;hl++){const cl=Da&&Da[F[hl].id]||en(F[hl]);Da&&(Da[F[hl].id]=cl);let dl=ll[cl];dl||(dl=ll[cl]=[]),dl.push(F[hl])}const cl=[];for(const hl in ll)cl.push(ll[hl]);return cl}(Object.values(this._layerConfigs),this.keyCache);for(const cl of ll){const F=cl.map((F=>this._layers[F.id])),Da=F[0];if("none"===Da.visibility)continue;const ll=Da.source||"";let hl=this.familiesBySource[ll];hl||(hl=this.familiesBySource[ll]={});const dl=Da.sourceLayer||"_geojsonTileLayer";let pl=hl[dl];pl||(pl=hl[dl]=[]),pl.push(F)}}}class Ju{constructor(F){this._stringToNumber={},this._numberToString=[];for(let Da=0;Da<F.length;Da++){const ll=F[Da];this._stringToNumber[ll]=Da,this._numberToString[Da]=ll}}encode(F){return this._stringToNumber[F]}decode(F){if(F>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${F} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[F]}}class Ku{constructor(F,Da,ll,cl,hl){this.type="Feature",this._vectorTileFeature=F,F._z=Da,F._x=ll,F._y=cl,this.properties=F.properties,this.id=hl}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(F){this._geometry=F}toJSON(){const F={geometry:this.geometry};for(const Da in this)"_geometry"!==Da&&"_vectorTileFeature"!==Da&&(F[Da]=this[Da]);return F}}class Wu{constructor(F,Da){this.tileID=F,this.x=F.canonical.x,this.y=F.canonical.y,this.z=F.canonical.z,this.grid=new b(Kd,16,0),this.grid3D=new b(Kd,16,0),this.featureIndexArray=new ws,this.promoteId=Da}insert(F,Da,ll,cl,hl,dl){const pl=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ll,cl,hl);const fl=dl?this.grid3D:this.grid;for(let Al=0;Al<Da.length;Al++){const F=Da[Al],ll=[1/0,1/0,-1/0,-1/0];for(let Da=0;Da<F.length;Da++){const cl=F[Da];ll[0]=Math.min(ll[0],cl.x),ll[1]=Math.min(ll[1],cl.y),ll[2]=Math.max(ll[2],cl.x),ll[3]=Math.max(ll[3],cl.y)}ll[0]<Kd&&ll[1]<Kd&&ll[2]>=0&&ll[3]>=0&&fl.insert(pl,ll[0],ll[1],ll[2],ll[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Cp.VectorTile(new om(this.rawTileData)).layers,this.sourceLayerCoder=new Ju(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(F,ll,cl,hl){this.loadVTLayers();const dl=F.params||{},pl=Kd/F.tileSize/F.scale,fl=Gr(dl.filter),Al=F.queryGeometry,bl=F.queryPadding*pl,kl=tc(Al),Dl=this.grid.query(kl.minX-bl,kl.minY-bl,kl.maxX+bl,kl.maxY+bl),Wl=tc(F.cameraQueryGeometry),Ql=this.grid3D.query(Wl.minX-bl,Wl.minY-bl,Wl.maxX+bl,Wl.maxY+bl,((ll,cl,hl,dl)=>function(F,ll,cl,hl,dl){for(const Da of F)if(ll<=Da.x&&cl<=Da.y&&hl>=Da.x&&dl>=Da.y)return!0;const pl=[new Da(ll,cl),new Da(ll,dl),new Da(hl,dl),new Da(hl,cl)];if(F.length>2)for(const Da of pl)if(Po(F,Da))return!0;for(let Da=0;Da<F.length-1;Da++)if(Co(F[Da],F[Da+1],pl))return!0;return!1}(F.cameraQueryGeometry,ll-bl,cl-bl,hl+bl,dl+bl)));for(const Da of Ql)Dl.push(Da);Dl.sort(ec);const wc={};let Sc;for(let Da=0;Da<Dl.length;Da++){const bl=Dl[Da];if(bl===Sc)continue;Sc=bl;const kl=this.featureIndexArray.get(bl);let Wl=null;this.loadMatchingFeature(wc,kl.bucketIndex,kl.sourceLayerIndex,kl.featureIndex,fl,dl.layers,dl.availableImages,ll,cl,hl,((Da,ll,cl)=>(Wl||(Wl=mo(Da)),ll.queryIntersectsFeature(Al,Da,cl,Wl,this.z,F.transform,pl,F.pixelPosMatrix))))}return wc}loadMatchingFeature(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl){const Dl=this.bucketLayerIDs[Da];if(dl&&!function(F,Da){for(let ll=0;ll<F.length;ll++)if(Da.indexOf(F[ll])>=0)return!0;return!1}(dl,Dl))return;const Wl=this.sourceLayerCoder.decode(ll),Ql=this.vtLayers[Wl].feature(cl);if(hl.needGeometry){const F=go(Ql,!0);if(!hl.filter(new vi(this.tileID.overscaledZ),F,this.tileID.canonical))return}else if(!hl.filter(new vi(this.tileID.overscaledZ),Ql))return;const wc=this.getId(Ql,Wl);for(let Sc=0;Sc<Dl.length;Sc++){const Da=Dl[Sc];if(dl&&dl.indexOf(Da)<0)continue;const ll=fl[Da];if(!ll)continue;let hl={};wc&&bl&&(hl=bl.getState(ll.sourceLayer||"_geojsonTileLayer",wc));const Wl=c({},Al[Da]);Wl.paint=Qu(Wl.paint,ll.paint,Ql,hl,pl),Wl.layout=Qu(Wl.layout,ll.layout,Ql,hl,pl);const eu=!kl||kl(Ql,ll,hl);if(!eu)continue;const iu=new Ku(Ql,this.z,this.x,this.y,wc);iu.layer=Wl;let su=F[Da];void 0===su&&(su=F[Da]=[]),su.push({featureIndex:cl,feature:iu,intersectionZ:eu})}}lookupSymbolFeatures(F,Da,ll,cl,hl,dl,pl,fl){const Al={};this.loadVTLayers();const bl=Gr(hl);for(const kl of F)this.loadMatchingFeature(Al,ll,cl,kl,bl,dl,pl,fl,Da);return Al}hasLayer(F){for(const Da of this.bucketLayerIDs)for(const ll of Da)if(F===ll)return!0;return!1}getId(F,Da){let ll=F.id;return this.promoteId&&(ll=F.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[Da]],"boolean"==typeof ll&&(ll=Number(ll))),ll}}function Qu(F,Da,ll,cl,hl){return h(F,((F,dl)=>{const pl=Da instanceof Mi?Da.get(dl):null;return pl&&pl.evaluate?pl.evaluate(ll,cl,hl):pl}))}function tc(F){let Da=1/0,ll=1/0,cl=-1/0,hl=-1/0;for(const dl of F)Da=Math.min(Da,dl.x),ll=Math.min(ll,dl.y),cl=Math.max(cl,dl.x),hl=Math.max(hl,dl.y);return{minX:Da,minY:ll,maxX:cl,maxY:hl}}function ec(F,Da){return Da-F}qn("FeatureIndex",Wu,{omit:["rawTileData","sourceLayerCoder"]});class rc extends Da{constructor(F,Da,ll,cl){super(F,Da),this.angle=ll,void 0!==cl&&(this.segment=cl)}clone(){return new rc(this.x,this.y,this.angle,this.segment)}}function nc(F,Da,ll,cl,hl){if(void 0===Da.segment||0===ll)return!0;let dl=Da,pl=Da.segment+1,fl=0;for(;fl>-ll/2;){if(pl--,pl<0)return!1;fl-=F[pl].dist(dl),dl=F[pl]}fl+=F[pl].dist(F[pl+1]),pl++;const Al=[];let bl=0;for(;fl<ll/2;){const Da=F[pl],ll=F[pl+1];if(!ll)return!1;let dl=F[pl-1].angleTo(Da)-Da.angleTo(ll);for(dl=Math.abs((dl+3*Math.PI)%(2*Math.PI)-Math.PI),Al.push({distance:fl,angleDelta:dl}),bl+=dl;fl-Al[0].distance>cl;)bl-=Al.shift().angleDelta;if(bl>hl)return!1;pl++,fl+=Da.dist(ll)}return!0}function ic(F){let Da=0;for(let ll=0;ll<F.length-1;ll++)Da+=F[ll].dist(F[ll+1]);return Da}function sc(F,Da,ll){return F?.6*Da*ll:0}function oc(F,Da){return Math.max(F?F.right-F.left:0,Da?Da.right-Da.left:0)}function ac(F,Da,ll,cl,hl,dl){const pl=sc(ll,hl,dl),fl=oc(ll,cl)*dl;let Al=0;const bl=ic(F)/2;for(let kl=0;kl<F.length-1;kl++){const ll=F[kl],cl=F[kl+1],hl=ll.dist(cl);if(Al+hl>bl){const dl=(bl-Al)/hl,Dl=cd.number(ll.x,cl.x,dl),Wl=cd.number(ll.y,cl.y,dl),Ql=new rc(Dl,Wl,cl.angleTo(ll),kl);return Ql._round(),!pl||nc(F,Ql,fl,pl,Da)?Ql:void 0}Al+=hl}}function lc(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=sc(cl,dl,pl),kl=oc(cl,hl),Dl=kl*pl,Wl=0===F[0].x||F[0].x===Al||0===F[0].y||F[0].y===Al;return Da-Dl<Da/4&&(Da=Dl+Da/4),uc(F,Wl?Da/2*fl%Da:(kl/2+2*dl)*pl*fl%Da,Da,bl,ll,Dl,Wl,!1,Al)}function uc(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=dl/2,kl=ic(F);let Dl=0,Wl=Da-ll,Ql=[];for(let wc=0;wc<F.length-1;wc++){const Da=F[wc],pl=F[wc+1],fl=Da.dist(pl),Sc=pl.angleTo(Da);for(;Wl+ll<Dl+fl;){Wl+=ll;const eu=(Wl-Dl)/fl,iu=cd.number(Da.x,pl.x,eu),su=cd.number(Da.y,pl.y,eu);if(iu>=0&&iu<Al&&su>=0&&su<Al&&Wl-bl>=0&&Wl+bl<=kl){const Da=new rc(iu,su,Sc,wc);Da._round(),cl&&!nc(F,Da,dl,cl,hl)||Ql.push(Da)}}Dl+=fl}return fl||Ql.length||pl||(Ql=uc(F,Dl/2,ll,cl,hl,dl,pl,!0,Al)),Ql}qn("Anchor",rc);function hc(F,ll,cl,hl){const dl=[],pl=F.image,fl=pl.pixelRatio,Al=pl.paddedRect.w-2,bl=pl.paddedRect.h-2;let kl={x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};const Dl=pl.stretchX||[[0,Al]],Wl=pl.stretchY||[[0,bl]],f=(F,Da)=>F+Da[1]-Da[0],Ql=Dl.reduce(f,0),wc=Wl.reduce(f,0),Sc=Al-Ql,eu=bl-wc;let iu=0,su=Ql,cu=0,uu=wc,hu=0,Lu=Sc,zu=0,Du=eu;if(pl.content&&hl){const Da=pl.content,ll=Da[2]-Da[0],cl=Da[3]-Da[1];(pl.textFitWidth||pl.textFitHeight)&&(kl=wu(F)),iu=pc(Dl,0,Da[0]),cu=pc(Wl,0,Da[1]),su=pc(Dl,Da[0],Da[2]),uu=pc(Wl,Da[1],Da[3]),hu=Da[0]-iu,zu=Da[1]-cu,Lu=ll-su,Du=cl-uu}const Nu=kl.x1,qu=kl.y1,ih=kl.x2-Nu,gh=kl.y2-qu,C=(F,hl,dl,Al)=>{const bl=dc(F.stretch-iu,su,ih,Nu),kl=yc(F.fixed-hu,Lu,F.stretch,Ql),Dl=dc(hl.stretch-cu,uu,gh,qu),Wl=yc(hl.fixed-zu,Du,hl.stretch,wc),Sc=dc(dl.stretch-iu,su,ih,Nu),eu=yc(dl.fixed-hu,Lu,dl.stretch,Ql),ed=dc(Al.stretch-cu,uu,gh,qu),td=yc(Al.fixed-zu,Du,Al.stretch,wc),id=new Da(bl,Dl),nd=new Da(Sc,Dl),rd=new Da(Sc,ed),ad=new Da(bl,ed),sd=new Da(kl/fl,Wl/fl),od=new Da(eu/fl,td/fl),ld=ll*Math.PI/180;if(ld){const F=Math.sin(ld),Da=Math.cos(ld),ll=[Da,-F,F,Da];id._matMult(ll),nd._matMult(ll),ad._matMult(ll),rd._matMult(ll)}const cd=F.stretch+F.fixed,ud=hl.stretch+hl.fixed;return{tl:id,tr:nd,bl:ad,br:rd,tex:{x:pl.paddedRect.x+1+cd,y:pl.paddedRect.y+1+ud,w:dl.stretch+dl.fixed-cd,h:Al.stretch+Al.fixed-ud},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:sd,pixelOffsetBR:od,minFontScaleX:Lu/fl/ih,minFontScaleY:Du/fl/gh,isSDF:cl}};if(hl&&(pl.stretchX||pl.stretchY)){const F=fc(Dl,Sc,Ql),Da=fc(Wl,eu,wc);for(let ll=0;ll<F.length-1;ll++){const cl=F[ll],hl=F[ll+1];for(let F=0;F<Da.length-1;F++)dl.push(C(cl,Da[F],hl,Da[F+1]))}}else dl.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Al+1},{fixed:0,stretch:bl+1}));return dl}function pc(F,Da,ll){let cl=0;for(const hl of F)cl+=Math.max(Da,Math.min(ll,hl[1]))-Math.max(Da,Math.min(ll,hl[0]));return cl}function fc(F,Da,ll){const cl=[{fixed:-1,stretch:0}];for(const[hl,dl]of F){const F=cl[cl.length-1];cl.push({fixed:hl-F.stretch,stretch:F.stretch}),cl.push({fixed:hl-F.stretch,stretch:F.stretch+(dl-hl)})}return cl.push({fixed:Da+1,stretch:ll}),cl}function dc(F,Da,ll,cl){return F/Da*ll+cl}function yc(F,Da,ll,cl){return F-Da*ll/cl}class mc{constructor(F,ll,cl,hl,dl,pl,fl,Al,bl,kl){var Dl;if(this.boxStartIndex=F.length,bl){let F=pl.top,Da=pl.bottom;const ll=pl.collisionPadding;ll&&(F-=ll[1],Da+=ll[3]);let cl=Da-F;cl>0&&(cl=Math.max(10,cl),this.circleDiameter=cl)}else{const bl=(null===(Dl=pl.image)||void 0===Dl?void 0:Dl.content)&&(pl.image.textFitWidth||pl.image.textFitHeight)?wu(pl):{x1:pl.left,y1:pl.top,x2:pl.right,y2:pl.bottom};bl.y1=bl.y1*fl-Al[0],bl.y2=bl.y2*fl+Al[2],bl.x1=bl.x1*fl-Al[3],bl.x2=bl.x2*fl+Al[1];const Wl=pl.collisionPadding;if(Wl&&(bl.x1-=Wl[0]*fl,bl.y1-=Wl[1]*fl,bl.x2+=Wl[2]*fl,bl.y2+=Wl[3]*fl),kl){const F=new Da(bl.x1,bl.y1),ll=new Da(bl.x2,bl.y1),cl=new Da(bl.x1,bl.y2),hl=new Da(bl.x2,bl.y2),dl=kl*Math.PI/180;F._rotate(dl),ll._rotate(dl),cl._rotate(dl),hl._rotate(dl),bl.x1=Math.min(F.x,ll.x,cl.x,hl.x),bl.x2=Math.max(F.x,ll.x,cl.x,hl.x),bl.y1=Math.min(F.y,ll.y,cl.y,hl.y),bl.y2=Math.max(F.y,ll.y,cl.y,hl.y)}F.emplaceBack(ll.x,ll.y,bl.x1,bl.y1,bl.x2,bl.y2,cl,hl,dl)}this.boxEndIndex=F.length}}class gc{constructor(F,Da){if(void 0===F&&(F=[]),void 0===Da&&(Da=(F,Da)=>F<Da?-1:F>Da?1:0),this.data=F,this.length=this.data.length,this.compare=Da,this.length>0)for(let ll=(this.length>>1)-1;ll>=0;ll--)this._down(ll)}push(F){this.data.push(F),this._up(this.length++)}pop(){if(0===this.length)return;const F=this.data[0],Da=this.data.pop();return--this.length>0&&(this.data[0]=Da,this._down(0)),F}peek(){return this.data[0]}_up(F){const{data:Da,compare:ll}=this,cl=Da[F];for(;F>0;){const hl=F-1>>1,dl=Da[hl];if(ll(cl,dl)>=0)break;Da[F]=dl,F=hl}Da[F]=cl}_down(F){const{data:Da,compare:ll}=this,cl=this.length>>1,hl=Da[F];for(;F<cl;){let cl=1+(F<<1);const dl=cl+1;if(dl<this.length&&ll(Da[dl],Da[cl])<0&&(cl=dl),ll(Da[cl],hl)>=0)break;Da[F]=Da[cl],F=cl}Da[F]=hl}}function xc(F,ll,cl){void 0===ll&&(ll=1),void 0===cl&&(cl=!1);let hl=1/0,dl=1/0,pl=-1/0,fl=-1/0;const Al=F[0];for(let Da=0;Da<Al.length;Da++){const F=Al[Da];(!Da||F.x<hl)&&(hl=F.x),(!Da||F.y<dl)&&(dl=F.y),(!Da||F.x>pl)&&(pl=F.x),(!Da||F.y>fl)&&(fl=F.y)}const bl=Math.min(pl-hl,fl-dl);let kl=bl/2;const Dl=new gc([],vc);if(0===bl)return new Da(hl,dl);for(let Da=hl;Da<pl;Da+=bl)for(let ll=dl;ll<fl;ll+=bl)Dl.push(new bc(Da+kl,ll+kl,kl,F));let Wl=function(F){let Da=0,ll=0,cl=0;const hl=F[0];for(let dl=0,pl=hl.length,fl=pl-1;dl<pl;fl=dl++){const F=hl[dl],pl=hl[fl],Al=F.x*pl.y-pl.x*F.y;ll+=(F.x+pl.x)*Al,cl+=(F.y+pl.y)*Al,Da+=3*Al}return new bc(ll/Da,cl/Da,0,F)}(F),Ql=Dl.length;for(;Dl.length;){const Da=Dl.pop();(Da.d>Wl.d||!Wl.d)&&(Wl=Da,cl&&console.log("found best %d after %d probes",Math.round(1e4*Da.d)/1e4,Ql)),Da.max-Wl.d<=ll||(kl=Da.h/2,Dl.push(new bc(Da.p.x-kl,Da.p.y-kl,kl,F)),Dl.push(new bc(Da.p.x+kl,Da.p.y-kl,kl,F)),Dl.push(new bc(Da.p.x-kl,Da.p.y+kl,kl,F)),Dl.push(new bc(Da.p.x+kl,Da.p.y+kl,kl,F)),Ql+=4)}return cl&&(console.log(`num probes: ${Ql}`),console.log(`best distance: ${Wl.d}`)),Wl.p}function vc(F,Da){return Da.max-F.max}function bc(F,ll,cl,hl){this.p=new Da(F,ll),this.h=cl,this.d=function(F,Da){let ll=!1,cl=1/0;for(let hl=0;hl<Da.length;hl++){const dl=Da[hl];for(let Da=0,hl=dl.length,pl=hl-1;Da<hl;pl=Da++){const hl=dl[Da],fl=dl[pl];hl.y>F.y!=fl.y>F.y&&F.x<(fl.x-hl.x)*(F.y-hl.y)/(fl.y-hl.y)+hl.x&&(ll=!ll),cl=Math.min(cl,Mo(F,hl,fl))}}return(ll?1:-1)*Math.sqrt(cl)}(this.p,hl),this.max=this.d+this.h*Math.SQRT2}var Em;!function(F){F[F.center=1]="center",F[F.left=2]="left",F[F.right=3]="right",F[F.top=4]="top",F[F.bottom=5]="bottom",F[F["top-left"]=6]="top-left",F[F["top-right"]=7]="top-right",F[F["bottom-left"]=8]="bottom-left",F[F["bottom-right"]=9]="bottom-right"}(Em||(Em={}));const Mm=Number.POSITIVE_INFINITY;function kc(F,Da){return Da[1]!==Mm?function(F,Da,ll){let cl=0,hl=0;switch(Da=Math.abs(Da),ll=Math.abs(ll),F){case"top-right":case"top-left":case"top":hl=ll-7;break;case"bottom-right":case"bottom-left":case"bottom":hl=7-ll}switch(F){case"top-right":case"bottom-right":case"right":cl=-Da;break;case"top-left":case"bottom-left":case"left":cl=Da}return[cl,hl]}(F,Da[0],Da[1]):function(F,Da){let ll=0,cl=0;Da<0&&(Da=0);const hl=Da/Math.SQRT2;switch(F){case"top-right":case"top-left":cl=hl-7;break;case"bottom-right":case"bottom-left":cl=7-hl;break;case"bottom":cl=7-Da;break;case"top":cl=Da-7}switch(F){case"top-right":case"bottom-right":ll=-hl;break;case"top-left":case"bottom-left":ll=hl;break;case"left":ll=Da;break;case"right":ll=-Da}return[ll,cl]}(F,Da[0])}function Ac(F,Da,ll){var cl;const hl=F.layout,dl=null===(cl=hl.get("text-variable-anchor-offset"))||void 0===cl?void 0:cl.evaluate(Da,{},ll);if(dl){const F=dl.values,Da=[];for(let ll=0;ll<F.length;ll+=2){const cl=Da[ll]=F[ll],hl=F[ll+1].map((F=>F*im));cl.startsWith("top")?hl[1]-=7:cl.startsWith("bottom")&&(hl[1]+=7),Da[ll+1]=hl}return new xt(Da)}const pl=hl.get("text-variable-anchor");if(pl){let cl;cl=void 0!==F._unevaluatedLayout.getValue("text-radial-offset")?[hl.get("text-radial-offset").evaluate(Da,{},ll)*im,Mm]:hl.get("text-offset").evaluate(Da,{},ll).map((F=>F*im));const dl=[];for(const F of pl)dl.push(F,kc(F,cl));return new xt(dl)}return null}function Ic(F){F.bucket.createArrays(),F.bucket.tilePixelRatio=Kd/(512*F.bucket.overscaling),F.bucket.compareText={},F.bucket.iconsNeedLinear=!1;const Da=F.bucket.layers[0],ll=Da.layout,cl=Da._unevaluatedLayout._values,hl={layoutIconSize:cl["icon-size"].possiblyEvaluate(new vi(F.bucket.zoom+1),F.canonical),layoutTextSize:cl["text-size"].possiblyEvaluate(new vi(F.bucket.zoom+1),F.canonical),textMaxSize:cl["text-size"].possiblyEvaluate(new vi(18))};if("composite"===F.bucket.textSizeData.kind){const{minZoom:Da,maxZoom:ll}=F.bucket.textSizeData;hl.compositeTextSizes=[cl["text-size"].possiblyEvaluate(new vi(Da),F.canonical),cl["text-size"].possiblyEvaluate(new vi(ll),F.canonical)]}if("composite"===F.bucket.iconSizeData.kind){const{minZoom:Da,maxZoom:ll}=F.bucket.iconSizeData;hl.compositeIconSizes=[cl["icon-size"].possiblyEvaluate(new vi(Da),F.canonical),cl["icon-size"].possiblyEvaluate(new vi(ll),F.canonical)]}const dl=ll.get("text-line-height")*im,pl="viewport"!==ll.get("text-rotation-alignment")&&"point"!==ll.get("symbol-placement"),fl=ll.get("text-keep-upright"),Al=ll.get("text-size");for(const bl of F.bucket.features){const cl=ll.get("text-font").evaluate(bl,{},F.canonical).join(","),kl=Al.evaluate(bl,{},F.canonical),Dl=hl.layoutTextSize.evaluate(bl,{},F.canonical),Wl=hl.layoutIconSize.evaluate(bl,{},F.canonical),Ql={horizontal:{},vertical:void 0},wc=bl.text;let Sc,eu=[0,0];if(wc){const hl=wc.toString(),Al=ll.get("text-letter-spacing").evaluate(bl,{},F.canonical)*im,Wl=ai(hl)?Al:0,Sc=ll.get("text-anchor").evaluate(bl,{},F.canonical),iu=Ac(Da,bl,F.canonical);if(!iu){const Da=ll.get("text-radial-offset").evaluate(bl,{},F.canonical);eu=Da?kc(Sc,[Da*im,Mm]):ll.get("text-offset").evaluate(bl,{},F.canonical).map((F=>F*im))}let su=pl?"center":ll.get("text-justify").evaluate(bl,{},F.canonical);const cu="point"===ll.get("symbol-placement")?ll.get("text-max-width").evaluate(bl,{},F.canonical)*im:1/0,b=()=>{F.bucket.allowVerticalPlacement&&oi(hl)&&(Ql.vertical=lu(wc,F.glyphMap,F.glyphPositions,F.imagePositions,cl,cu,dl,Sc,"left",Wl,eu,lm.vertical,!0,Dl,kl))};if(!pl&&iu){const Da=new Set;if("auto"===su)for(let F=0;F<iu.values.length;F+=2)Da.add(Mc(iu.values[F]));else Da.add(su);let ll=!1;for(const hl of Da)if(!Ql.horizontal[hl])if(ll)Ql.horizontal[hl]=Ql.horizontal[0];else{const Da=lu(wc,F.glyphMap,F.glyphPositions,F.imagePositions,cl,cu,dl,"center",hl,Wl,eu,lm.horizontal,!1,Dl,kl);Da&&(Ql.horizontal[hl]=Da,ll=1===Da.positionedLines.length)}b()}else{"auto"===su&&(su=Mc(Sc));const Da=lu(wc,F.glyphMap,F.glyphPositions,F.imagePositions,cl,cu,dl,Sc,su,Wl,eu,lm.horizontal,!1,Dl,kl);Da&&(Ql.horizontal[su]=Da),b(),oi(hl)&&pl&&fl&&(Ql.vertical=lu(wc,F.glyphMap,F.glyphPositions,F.imagePositions,cl,cu,dl,Sc,su,Wl,eu,lm.vertical,!1,Dl,kl))}}let iu=!1;if(bl.icon&&bl.icon.name){const Da=F.imageMap[bl.icon.name];Da&&(Sc=bu(F.imagePositions[bl.icon.name],ll.get("icon-offset").evaluate(bl,{},F.canonical),ll.get("icon-anchor").evaluate(bl,{},F.canonical)),iu=!!Da.sdf,void 0===F.bucket.sdfIcons?F.bucket.sdfIcons=iu:F.bucket.sdfIcons!==iu&&d("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Da.pixelRatio!==F.bucket.pixelRatio||0!==ll.get("icon-rotate").constantOr(1))&&(F.bucket.iconsNeedLinear=!0))}const su=Cc(Ql.horizontal)||Ql.vertical;F.bucket.iconsInText=!!su&&su.iconsInText,(su||Sc)&&zc(F.bucket,bl,Ql,Sc,F.imageMap,hl,Dl,Wl,eu,iu,F.canonical)}F.showCollisionBoxes&&F.bucket.generateCollisionDebugBuffers()}function Mc(F){switch(F){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zc(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){let Wl=pl.textMaxSize.evaluate(ll,{});void 0===Wl&&(Wl=fl);const Ql=F.layers[0].layout,wc=Ql.get("icon-offset").evaluate(ll,{},Dl),Sc=Cc(cl.horizontal),eu=fl/24,iu=F.tilePixelRatio*eu,su=F.tilePixelRatio*Wl/24,cu=F.tilePixelRatio*Al,uu=F.tilePixelRatio*Ql.get("symbol-spacing"),hu=Ql.get("text-padding")*F.tilePixelRatio,Lu=function(F,Da,ll,cl){void 0===cl&&(cl=1);const hl=F.get("icon-padding").evaluate(Da,{},ll),dl=hl&&hl.values;return[dl[0]*cl,dl[1]*cl,dl[2]*cl,dl[3]*cl]}(Ql,ll,Dl,F.tilePixelRatio),zu=Ql.get("text-max-angle")/180*Math.PI,Du="viewport"!==Ql.get("text-rotation-alignment")&&"point"!==Ql.get("symbol-placement"),Nu="map"===Ql.get("icon-rotation-alignment")&&"point"!==Ql.get("symbol-placement"),qu=Ql.get("symbol-placement"),ih=uu/2,gh=Ql.get("icon-text-fit");let ed;hl&&"none"!==gh&&(F.allowVerticalPlacement&&cl.vertical&&(ed=_u(hl,cl.vertical,gh,Ql.get("icon-text-fit-padding"),wc,eu)),Sc&&(hl=_u(hl,Sc,gh,Ql.get("icon-text-fit-padding"),wc,eu)));const B=(Da,Al)=>{Al.x<0||Al.x>=Kd||Al.y<0||Al.y>=Kd||function(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du){const Nu=F.addToLineVertexArray(Da,ll);let qu,ih,gh,ed,td=0,id=0,nd=0,rd=0,ad=-1,sd=-1;const od={};let ld=Wd("");if(F.allowVerticalPlacement&&cl.vertical){const F=fl.layout.get("text-rotate").evaluate(uu,{},zu)+90;gh=new mc(Al,Da,bl,kl,Dl,cl.vertical,Wl,Ql,wc,F),pl&&(ed=new mc(Al,Da,bl,kl,Dl,pl,eu,iu,wc,F))}if(hl){const ll=fl.layout.get("icon-rotate").evaluate(uu,{}),cl="none"!==fl.layout.get("icon-text-fit"),dl=hc(hl,ll,Lu,cl),Wl=pl?hc(pl,ll,Lu,cl):void 0;ih=new mc(Al,Da,bl,kl,Dl,hl,eu,iu,!1,ll),td=4*dl.length;const Ql=F.iconSizeData;let wc=null;"source"===Ql.kind?(wc=[pm*fl.layout.get("icon-size").evaluate(uu,{})],wc[0]>mm&&d(`${F.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Ql.kind&&(wc=[pm*hu.compositeIconSizes[0].evaluate(uu,{},zu),pm*hu.compositeIconSizes[1].evaluate(uu,{},zu)],(wc[0]>mm||wc[1]>mm)&&d(`${F.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),F.addSymbols(F.icon,dl,wc,cu,su,uu,lm.none,Da,Nu.lineStartIndex,Nu.lineLength,-1,zu),ad=F.icon.placedSymbolArray.length-1,Wl&&(id=4*Wl.length,F.addSymbols(F.icon,Wl,wc,cu,su,uu,lm.vertical,Da,Nu.lineStartIndex,Nu.lineLength,-1,zu),sd=F.icon.placedSymbolArray.length-1)}const cd=Object.keys(cl.horizontal);for(const wd of cd){const ll=cl.horizontal[wd];if(!qu){ld=Wd(ll.text);const F=fl.layout.get("text-rotate").evaluate(uu,{},zu);qu=new mc(Al,Da,bl,kl,Dl,ll,Wl,Ql,wc,F)}const hl=1===ll.positionedLines.length;if(nd+=Pc(F,Da,ll,dl,fl,wc,uu,Sc,Nu,cl.vertical?lm.horizontal:lm.horizontalOnly,hl?cd:[wd],od,ad,hu,zu),hl)break}cl.vertical&&(rd+=Pc(F,Da,cl.vertical,dl,fl,wc,uu,Sc,Nu,lm.vertical,["vertical"],od,sd,hu,zu));const ud=qu?qu.boxStartIndex:F.collisionBoxArray.length,hd=qu?qu.boxEndIndex:F.collisionBoxArray.length,dd=gh?gh.boxStartIndex:F.collisionBoxArray.length,pd=gh?gh.boxEndIndex:F.collisionBoxArray.length,md=ih?ih.boxStartIndex:F.collisionBoxArray.length,fd=ih?ih.boxEndIndex:F.collisionBoxArray.length,gd=ed?ed.boxStartIndex:F.collisionBoxArray.length,Ad=ed?ed.boxEndIndex:F.collisionBoxArray.length;let yd=-1;const Y=(F,Da)=>F&&F.circleDiameter?Math.max(F.circleDiameter,Da):Da;yd=Y(qu,yd),yd=Y(gh,yd),yd=Y(ih,yd),yd=Y(ed,yd);const vd=yd>-1?1:0;vd&&(yd*=Du/im),F.glyphOffsetArray.length>=Fu.MAX_GLYPHS&&d("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==uu.sortKey&&F.addToSortKeyRanges(F.symbolInstances.length,uu.sortKey);const _d=Ac(fl,uu,zu),[xd,bd]=function(F,Da){const ll=F.length,cl=null==Da?void 0:Da.values;if((null==cl?void 0:cl.length)>0)for(let hl=0;hl<cl.length;hl+=2){const Da=cl[hl+1];F.emplaceBack(Em[cl[hl]],Da[0],Da[1])}return[ll,F.length]}(F.textAnchorOffsets,_d);F.symbolInstances.emplaceBack(Da.x,Da.y,od.right>=0?od.right:-1,od.center>=0?od.center:-1,od.left>=0?od.left:-1,od.vertical||-1,ad,sd,ld,ud,hd,dd,pd,md,fd,gd,Ad,bl,nd,rd,td,id,vd,0,Wl,yd,xd,bd)}(F,Al,Da,cl,hl,dl,ed,F.layers[0],F.collisionBoxArray,ll.index,ll.sourceLayerIndex,F.index,iu,[hu,hu,hu,hu],Du,bl,cu,Lu,Nu,wc,ll,pl,kl,Dl,fl)};if("line"===qu)for(const td of function(F,ll,cl,hl,dl){const pl=[];for(let fl=0;fl<F.length;fl++){const ll=F[fl];let cl;for(let F=0;F<ll.length-1;F++){let fl=ll[F],Al=ll[F+1];fl.x<0&&Al.x<0||(fl.x<0?fl=new Da(0,fl.y+(0-fl.x)/(Al.x-fl.x)*(Al.y-fl.y))._round():Al.x<0&&(Al=new Da(0,fl.y+(0-fl.x)/(Al.x-fl.x)*(Al.y-fl.y))._round()),fl.y<0&&Al.y<0||(fl.y<0?fl=new Da(fl.x+(0-fl.y)/(Al.y-fl.y)*(Al.x-fl.x),0)._round():Al.y<0&&(Al=new Da(fl.x+(0-fl.y)/(Al.y-fl.y)*(Al.x-fl.x),0)._round()),fl.x>=hl&&Al.x>=hl||(fl.x>=hl?fl=new Da(hl,fl.y+(hl-fl.x)/(Al.x-fl.x)*(Al.y-fl.y))._round():Al.x>=hl&&(Al=new Da(hl,fl.y+(hl-fl.x)/(Al.x-fl.x)*(Al.y-fl.y))._round()),fl.y>=dl&&Al.y>=dl||(fl.y>=dl?fl=new Da(fl.x+(dl-fl.y)/(Al.y-fl.y)*(Al.x-fl.x),dl)._round():Al.y>=dl&&(Al=new Da(fl.x+(dl-fl.y)/(Al.y-fl.y)*(Al.x-fl.x),dl)._round()),cl&&fl.equals(cl[cl.length-1])||(cl=[fl],pl.push(cl)),cl.push(Al)))))}}return pl}(ll.geometry,0,0,Kd,Kd)){const Da=lc(td,uu,zu,cl.vertical||Sc,hl,24,su,F.overscaling,Kd);for(const ll of Da)Sc&&Bc(F,Sc.text,ih,ll)||B(td,ll)}else if("line-center"===qu){for(const Da of ll.geometry)if(Da.length>1){const F=ac(Da,zu,cl.vertical||Sc,hl,24,su);F&&B(Da,F)}}else if("Polygon"===ll.type)for(const Da of $e(ll.geometry,0)){const F=xc(Da,16);B(Da[0],new rc(F.x,F.y,0))}else if("LineString"===ll.type)for(const Da of ll.geometry)B(Da,new rc(Da[0].x,Da[0].y,0));else if("Point"===ll.type)for(const Da of ll.geometry)for(const F of Da)B([F],new rc(F.x,F.y,0))}function Pc(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){const eu=function(F,ll,cl,hl,dl,pl,fl,Al){const bl=hl.layout.get("text-rotate").evaluate(pl,{})*Math.PI/180,kl=[];for(const Dl of ll.positionedLines)for(const F of Dl.positionedGlyphs){if(!F.rect)continue;const hl=F.rect||{};let pl=4,Wl=!0,Ql=1,wc=0;const Sc=(dl||Al)&&F.vertical,eu=F.metrics.advance*F.scale/2;if(Al&&ll.verticalizable&&(wc=Dl.lineOffset/2-(F.imageName?-(im-F.metrics.width*F.scale)/2:(F.scale-1)*im)),F.imageName){const Da=fl[F.imageName];Wl=Da.sdf,Ql=Da.pixelRatio,pl=1/Ql}const iu=dl?[F.x+eu,F.y]:[0,0];let su=dl?[0,0]:[F.x+eu+cl[0],F.y+cl[1]-wc],cu=[0,0];Sc&&(cu=su,su=[0,0]);const uu=F.metrics.isDoubleResolution?2:1,hu=(F.metrics.left-pl)*F.scale-eu+su[0],Lu=(-F.metrics.top-pl)*F.scale+su[1],zu=hu+hl.w/uu*F.scale/Ql,Du=Lu+hl.h/uu*F.scale/Ql,Nu=new Da(hu,Lu),qu=new Da(zu,Lu),ih=new Da(hu,Du),gh=new Da(zu,Du);if(Sc){const ll=new Da(-eu,eu-cm),cl=-Math.PI/2,hl=12-eu,dl=new Da(22-hl,-(F.imageName?hl:0)),pl=new Da(...cu);Nu._rotateAround(cl,ll)._add(dl)._add(pl),qu._rotateAround(cl,ll)._add(dl)._add(pl),ih._rotateAround(cl,ll)._add(dl)._add(pl),gh._rotateAround(cl,ll)._add(dl)._add(pl)}if(bl){const F=Math.sin(bl),Da=Math.cos(bl),ll=[Da,-F,F,Da];Nu._matMult(ll),qu._matMult(ll),ih._matMult(ll),gh._matMult(ll)}const ed=new Da(0,0),td=new Da(0,0);kl.push({tl:Nu,tr:qu,bl:ih,br:gh,tex:hl,writingMode:ll.writingMode,glyphOffset:iu,sectionIndex:F.sectionIndex,isSDF:Wl,pixelOffsetTL:ed,pixelOffsetBR:td,minFontScaleX:0,minFontScaleY:0})}return kl}(0,cl,Al,dl,pl,fl,hl,F.allowVerticalPlacement),iu=F.textSizeData;let su=null;"source"===iu.kind?(su=[pm*dl.layout.get("text-size").evaluate(fl,{})],su[0]>mm&&d(`${F.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===iu.kind&&(su=[pm*wc.compositeTextSizes[0].evaluate(fl,{},Sc),pm*wc.compositeTextSizes[1].evaluate(fl,{},Sc)],(su[0]>mm||su[1]>mm)&&d(`${F.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),F.addSymbols(F.text,eu,su,Al,pl,fl,kl,ll,bl.lineStartIndex,bl.lineLength,Ql,Sc);for(const Da of Dl)Wl[Da]=F.text.placedSymbolArray.length-1;return 4*eu.length}function Cc(F){for(const Da in F)return F[Da];return null}function Bc(F,Da,ll,cl){const hl=F.compareText;if(Da in hl){const F=hl[Da];for(let Da=F.length-1;Da>=0;Da--)if(cl.dist(F[Da])<ll)return!0}else hl[Da]=[];return hl[Da].push(cl),!1}class Vc{constructor(F){const Da={},ll=[];for(const pl in F){const cl=F[pl],hl=Da[pl]={};for(const F in cl){const Da=cl[+F];if(!Da||0===Da.bitmap.width||0===Da.bitmap.height)continue;const dl={x:0,y:0,w:Da.bitmap.width+2,h:Da.bitmap.height+2};ll.push(dl),hl[F]={rect:dl,metrics:Da.metrics}}}const{w:cl,h:hl}=tu(ll),dl=new Yo({width:cl||1,height:hl||1});for(const pl in F){const ll=F[pl];for(const F in ll){const cl=ll[+F];if(!cl||0===cl.bitmap.width||0===cl.bitmap.height)continue;const hl=Da[pl][F].rect;Yo.copy(cl.bitmap,dl,{x:0,y:0},{x:hl.x+1,y:hl.y+1},cl.bitmap)}}this.image=dl,this.positions=Da}}function Tc(F,Da,ll){var cl=2*Math.PI*6378137/256/Math.pow(2,ll);return[F*cl-2*Math.PI*6378137/2,Da*cl-2*Math.PI*6378137/2]}qn("GlyphAtlas",Vc);const Sm=6371008.8;class Fc{constructor(F,Da){if(isNaN(F)||isNaN(Da))throw new Error(`Invalid LngLat object: (${F}, ${Da})`);if(this.lng=+F,this.lat=+Da,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fc(function(F,Da){const ll=((F-Da)%360+360)%360+Da;return ll===Da?180:ll}(this.lng,-180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(F){const Da=Math.PI/180,ll=this.lat*Da,cl=F.lat*Da,hl=Math.sin(ll)*Math.sin(cl)+Math.cos(ll)*Math.cos(cl)*Math.cos((F.lng-this.lng)*Da);return Sm*Math.acos(Math.min(hl,1))}static convert(F){if(F instanceof Fc)return F;if(Array.isArray(F)&&(2===F.length||3===F.length))return new Fc(Number(F[0]),Number(F[1]));if(!Array.isArray(F)&&"object"==typeof F&&null!==F)return new Fc(Number("lng"in F?F.lng:F.lon),Number(F.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const km=2*Math.PI*Sm;function $c(F){return km*Math.cos(F*Math.PI/180)}function Lc(F){return 360/Math.PI*Math.atan(Math.exp((180-360*F)*Math.PI/180))-90}class Oc{constructor(F,Da,ll){void 0===ll&&(ll=0),this.x=+F,this.y=+Da,this.z=+ll}static fromLngLat(F,Da){void 0===Da&&(Da=0);const ll=Fc.convert(F);return new Oc((180+ll.lng)/360,(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ll.lat*Math.PI/360)))/360,function(F,Da){return F/$c(Da)}(Da,ll.lat))}toLngLat(){return new Fc(360*this.x-180,Lc(this.y))}toAltitude(){return this.z*$c(Lc(this.y))}meterInMercatorCoordinateUnits(){return 1/km*(F=Lc(this.y),1/Math.cos(F*Math.PI/180));var F}}class Rc{constructor(F,Da,ll){if(!function(F,Da,ll){return!(F<0||F>25||ll<0||ll>=Math.pow(2,F)||Da<0||Da>=Math.pow(2,F))}(F,Da,ll))throw new Error(`x=${Da}, y=${ll}, z=${F} outside of bounds. 0<=x<${Math.pow(2,F)}, 0<=y<${Math.pow(2,F)} 0<=z<=25 `);this.z=F,this.x=Da,this.y=ll,this.key=Uc(0,F,F,Da,ll)}equals(F){return this.z===F.z&&this.x===F.x&&this.y===F.y}url(F,Da,ll){const cl=(dl=this.y,pl=this.z,fl=Tc(256*(hl=this.x),256*(dl=Math.pow(2,pl)-dl-1),pl),Al=Tc(256*(hl+1),256*(dl+1),pl),fl[0]+","+fl[1]+","+Al[0]+","+Al[1]);var hl,dl,pl,fl,Al;const bl=function(F,Da,ll){let cl,hl="";for(let dl=F;dl>0;dl--)cl=1<<dl-1,hl+=(Da&cl?1:0)+(ll&cl?2:0);return hl}(this.z,this.x,this.y);return F[(this.x+this.y)%F.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===ll?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,Da>1?"@2x":"").replace(/{quadkey}/g,bl).replace(/{bbox-epsg-3857}/g,cl)}isChildOf(F){const Da=this.z-F.z;return Da>0&&F.x===this.x>>Da&&F.y===this.y>>Da}getTilePoint(F){const ll=Math.pow(2,this.z);return new Da((F.x*ll-this.x)*Kd,(F.y*ll-this.y)*Kd)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jc{constructor(F,Da){this.wrap=F,this.canonical=Da,this.key=Uc(F,Da.z,Da.z,Da.x,Da.y)}}class qc{constructor(F,Da,ll,cl,hl){if(F<ll)throw new Error(`overscaledZ should be >= z; overscaledZ = ${F}; z = ${ll}`);this.overscaledZ=F,this.wrap=Da,this.canonical=new Rc(ll,+cl,+hl),this.key=Uc(Da,F,ll,cl,hl)}clone(){return new qc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(F){return this.overscaledZ===F.overscaledZ&&this.wrap===F.wrap&&this.canonical.equals(F.canonical)}scaledTo(F){if(F>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${F}; overscaledZ = ${this.overscaledZ}`);const Da=this.canonical.z-F;return F>this.canonical.z?new qc(F,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qc(F,this.wrap,F,this.canonical.x>>Da,this.canonical.y>>Da)}calculateScaledKey(F,Da){if(F>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${F}; overscaledZ = ${this.overscaledZ}`);const ll=this.canonical.z-F;return F>this.canonical.z?Uc(this.wrap*+Da,F,this.canonical.z,this.canonical.x,this.canonical.y):Uc(this.wrap*+Da,F,F,this.canonical.x>>ll,this.canonical.y>>ll)}isChildOf(F){if(F.wrap!==this.wrap)return!1;const Da=this.canonical.z-F.canonical.z;return 0===F.overscaledZ||F.overscaledZ<this.overscaledZ&&F.canonical.x===this.canonical.x>>Da&&F.canonical.y===this.canonical.y>>Da}children(F){if(this.overscaledZ>=F)return[new qc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const Da=this.canonical.z+1,ll=2*this.canonical.x,cl=2*this.canonical.y;return[new qc(Da,this.wrap,Da,ll,cl),new qc(Da,this.wrap,Da,ll+1,cl),new qc(Da,this.wrap,Da,ll,cl+1),new qc(Da,this.wrap,Da,ll+1,cl+1)]}isLessThan(F){return this.wrap<F.wrap||!(this.wrap>F.wrap)&&(this.overscaledZ<F.overscaledZ||!(this.overscaledZ>F.overscaledZ)&&(this.canonical.x<F.canonical.x||!(this.canonical.x>F.canonical.x)&&this.canonical.y<F.canonical.y))}wrapped(){return new qc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(F){return new qc(this.overscaledZ,F,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(F){return this.canonical.getTilePoint(new Oc(F.x-this.wrap,F.y))}}function Uc(F,Da,ll,cl,hl){(F*=2)<0&&(F=-1*F-1);const dl=1<<ll;return(dl*dl*F+dl*hl+cl).toString(36)+ll.toString(36)+Da.toString(36)}qn("CanonicalTileID",Rc),qn("OverscaledTileID",qc,{omit:["posMatrix"]});class Nc{constructor(F){this.tileID=new qc(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId,this.inFlightDependencies=[]}parse(F,Da,ll,cl){return t(this,void 0,void 0,(function*(){this.status="parsing",this.data=F,this.collisionBoxArray=new hs;const hl=new Ju(Object.keys(F.layers).sort()),dl=new Wu(this.tileID,this.promoteId);dl.bucketLayerIDs=[];const pl={},fl={featureIndex:dl,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ll},Al=Da.familiesBySource[this.source];for(const Da in Al){const cl=F.layers[Da];if(!cl)continue;1===cl.version&&d(`Vector tile source "${this.source}" layer "${Da}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bl=hl.encode(Da),kl=[];for(let F=0;F<cl.length;F++){const ll=cl.feature(F),hl=dl.getId(ll,Da);kl.push({feature:ll,id:hl,index:F,sourceLayerIndex:bl})}for(const F of Al[Da]){const Da=F[0];Da.source!==this.source&&d(`layer.source = ${Da.source} does not equal this.source = ${this.source}`),Da.minzoom&&this.zoom<Math.floor(Da.minzoom)||Da.maxzoom&&this.zoom>=Da.maxzoom||"none"!==Da.visibility&&(Zc(F,this.zoom,ll),(pl[Da.id]=Da.createBucket({index:dl.bucketLayerIDs.length,layers:F,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bl,sourceID:this.source})).populate(kl,fl,this.tileID.canonical),dl.bucketLayerIDs.push(F.map((F=>F.id))))}}const bl=h(fl.glyphDependencies,(F=>Object.keys(F).map(Number)));this.inFlightDependencies.forEach((F=>null==F?void 0:F.abort())),this.inFlightDependencies=[];let kl=Promise.resolve({});if(Object.keys(bl).length){const F=new AbortController;this.inFlightDependencies.push(F),kl=cl.sendAsync({type:"GG",data:{stacks:bl,source:this.source,tileID:this.tileID,type:"glyphs"}},F)}const Dl=Object.keys(fl.iconDependencies);let Wl=Promise.resolve({});if(Dl.length){const F=new AbortController;this.inFlightDependencies.push(F),Wl=cl.sendAsync({type:"GI",data:{icons:Dl,source:this.source,tileID:this.tileID,type:"icons"}},F)}const Ql=Object.keys(fl.patternDependencies);let wc=Promise.resolve({});if(Ql.length){const F=new AbortController;this.inFlightDependencies.push(F),wc=cl.sendAsync({type:"GI",data:{icons:Ql,source:this.source,tileID:this.tileID,type:"patterns"}},F)}const[Sc,eu,iu]=yield Promise.all([kl,Wl,wc]),su=new Vc(Sc),cu=new nu(eu,iu);for(const F in pl){const Da=pl[F];Da instanceof Fu?(Zc(Da.layers,this.zoom,ll),Ic({bucket:Da,glyphMap:Sc,glyphPositions:su.positions,imageMap:eu,imagePositions:cu.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Da.hasPattern&&(Da instanceof yl||Da instanceof Ba||Da instanceof tl)&&(Zc(Da.layers,this.zoom,ll),Da.addFeatures(fl,this.tileID.canonical,cu.patternPositions))}return this.status="done",{buckets:Object.values(pl).filter((F=>!F.isEmpty())),featureIndex:dl,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:su.image,imageAtlas:cu,glyphMap:this.returnDependencies?Sc:null,iconMap:this.returnDependencies?eu:null,glyphPositions:this.returnDependencies?su.positions:null}}))}}function Zc(F,Da,ll){const cl=new vi(Da);for(const hl of F)hl.recalculate(cl,ll)}var Tm;!function(F){F.create="create",F.load="load",F.fullLoad="fullLoad"}(Tm||(Tm={}));class Xc{constructor(F){this._marks={start:[F.url,"start"].join("#"),end:[F.url,"end"].join("#"),measure:F.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let F=performance.getEntriesByName(this._marks.measure);return 0===F.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),F=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),F}}class Hc{constructor(F,Da,ll){this.actor=F,this.layerIndex=Da,this.availableImages=ll,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(F,Da){return t(this,void 0,void 0,(function*(){const ll=yield((F,Da)=>Rn(c(F,{type:"arrayBuffer"}),Da))(F.request,Da);try{return{vectorTile:new Cp.VectorTile(new om(ll.data)),rawData:ll.data,cacheControl:ll.cacheControl,expires:ll.expires}}catch(Da){const hl=new Uint8Array(ll.data);let dl=`Unable to parse the tile at ${F.request.url}, `;throw dl+=31===hl[0]&&139===hl[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Da.message}`,new Error(dl)}}))}loadTile(F){return t(this,void 0,void 0,(function*(){const Da=F.uid,ll=!!(F&&F.request&&F.request.collectResourceTiming)&&new Xc(F.request),cl=new Nc(F);this.loading[Da]=cl;const hl=new AbortController;cl.abort=hl;try{const dl=yield this.loadVectorTile(F,hl);if(delete this.loading[Da],!dl)return null;const pl=dl.rawData,fl={};dl.expires&&(fl.expires=dl.expires),dl.cacheControl&&(fl.cacheControl=dl.cacheControl);const Al={};if(ll){const F=ll.finish();F&&(Al.resourceTiming=JSON.parse(JSON.stringify(F)))}cl.vectorTile=dl.vectorTile;const bl=cl.parse(dl.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[Da]=cl,this.fetching[Da]={rawTileData:pl,cacheControl:fl,resourceTiming:Al};try{const F=yield bl;return c({rawTileData:pl.slice(0)},F,fl,Al)}finally{delete this.fetching[Da]}}catch(F){throw delete this.loading[Da],cl.status="done",this.loaded[Da]=cl,F}}))}reloadTile(F){return t(this,void 0,void 0,(function*(){const Da=F.uid;if(!this.loaded||!this.loaded[Da])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ll=this.loaded[Da];if(ll.showCollisionBoxes=F.showCollisionBoxes,"parsing"===ll.status){const F=yield ll.parse(ll.vectorTile,this.layerIndex,this.availableImages,this.actor);let cl;if(this.fetching[Da]){const{rawTileData:ll,cacheControl:hl,resourceTiming:dl}=this.fetching[Da];delete this.fetching[Da],cl=c({rawTileData:ll.slice(0)},F,hl,dl)}else cl=F;return cl}if("done"===ll.status&&ll.vectorTile)return ll.parse(ll.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(F){return t(this,void 0,void 0,(function*(){const Da=this.loading,ll=F.uid;Da&&Da[ll]&&Da[ll].abort&&(Da[ll].abort.abort(),delete Da[ll])}))}removeTile(F){return t(this,void 0,void 0,(function*(){this.loaded&&this.loaded[F.uid]&&delete this.loaded[F.uid]}))}}class Yc{constructor(F,Da,ll,cl,hl,dl,pl){if(void 0===cl&&(cl=1),void 0===hl&&(hl=1),void 0===dl&&(dl=1),void 0===pl&&(pl=0),this.uid=F,Da.height!==Da.width)throw new RangeError("DEM tiles must be square");if(ll&&!["mapbox","terrarium","custom"].includes(ll))return void d(`"${ll}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=Da.height;const fl=this.dim=Da.height-2;switch(this.data=new Uint32Array(Da.data.buffer),ll){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=cl,this.greenFactor=hl,this.blueFactor=dl,this.baseShift=pl;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Al=0;Al<fl;Al++)this.data[this._idx(-1,Al)]=this.data[this._idx(0,Al)],this.data[this._idx(fl,Al)]=this.data[this._idx(fl-1,Al)],this.data[this._idx(Al,-1)]=this.data[this._idx(Al,0)],this.data[this._idx(Al,fl)]=this.data[this._idx(Al,fl-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(fl,-1)]=this.data[this._idx(fl-1,0)],this.data[this._idx(-1,fl)]=this.data[this._idx(0,fl-1)],this.data[this._idx(fl,fl)]=this.data[this._idx(fl-1,fl-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Al=0;Al<fl;Al++)for(let F=0;F<fl;F++){const Da=this.get(Al,F);Da>this.max&&(this.max=Da),Da<this.min&&(this.min=Da)}}get(F,Da){const ll=new Uint8Array(this.data.buffer),cl=4*this._idx(F,Da);return this.unpack(ll[cl],ll[cl+1],ll[cl+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(F,Da){if(F<-1||F>=this.dim+1||Da<-1||Da>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(Da+1)*this.stride+(F+1)}unpack(F,Da,ll){return F*this.redFactor+Da*this.greenFactor+ll*this.blueFactor-this.baseShift}getPixels(){return new Jo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(F,Da,ll){if(this.dim!==F.dim)throw new Error("dem dimension mismatch");let cl=Da*this.dim,hl=Da*this.dim+this.dim,dl=ll*this.dim,pl=ll*this.dim+this.dim;switch(Da){case-1:cl=hl-1;break;case 1:hl=cl+1}switch(ll){case-1:dl=pl-1;break;case 1:pl=dl+1}const fl=-Da*this.dim,Al=-ll*this.dim;for(let bl=dl;bl<pl;bl++)for(let Da=cl;Da<hl;Da++)this.data[this._idx(Da,bl)]=F.data[this._idx(Da+fl,bl+Al)]}}qn("DEMData",Yc);class Jc{constructor(){this.loaded={}}loadTile(F){return t(this,void 0,void 0,(function*(){const{uid:Da,encoding:ll,rawImageData:dl,redFactor:Al,greenFactor:bl,blueFactor:kl,baseShift:Dl}=F,Wl=dl.width+2,Ql=dl.height+2,wc=g(dl)?new Jo({width:Wl,height:Ql},yield function(F,Da,ll,dl,Al){return t(this,void 0,void 0,(function*(){if(function(){if(null==hl&&(hl=!1,null==cl&&(cl="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),cl)){const F=5,Da=new OffscreenCanvas(F,F).getContext("2d",{willReadFrequently:!0});if(Da){for(let cl=0;cl<F*F;cl++){const ll=4*cl;Da.fillStyle=`rgb(${ll},${ll+1},${ll+2})`,Da.fillRect(cl%F,Math.floor(cl/F),1,1)}const ll=Da.getImageData(0,0,F,F).data;for(let Da=0;Da<F*F*4;Da++)if(Da%4!=3&&ll[Da]!==Da){hl=!0;break}}}return hl||!1}())try{return yield function(F,Da,ll,cl,hl){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const Da=new VideoFrame(F,{timestamp:0});try{const ll=null==Da?void 0:Da.format;if(!ll||!ll.startsWith("BGR")&&!ll.startsWith("RGB"))throw new Error(`Unrecognized format ${ll}`);const dl=ll.startsWith("BGR"),pl=new Uint8ClampedArray(cl*hl*4);if(yield Da.copyTo(pl,function(F,Da,ll,cl,hl){const dl=4*Math.max(1,0),pl=(Math.max(0,-1)- -1)*cl*4+dl,fl=4*cl,Al=Math.max(0,-1),bl=Math.max(0,-1);return{rect:{x:Al,y:bl,width:Math.min(F.width,-1+cl)-Al,height:Math.min(F.height,-1+hl)-bl},layout:[{offset:pl,stride:fl}]}}(F,0,0,cl,hl)),dl)for(let F=0;F<pl.length;F+=4){const Da=pl[F];pl[F]=pl[F+2],pl[F+2]=Da}return pl}finally{Da.close()}}))}(F,0,0,dl,Al)}catch(t){}return function(F,Da,ll,cl,hl){const dl=F.width,Al=F.height;pl&&fl||(pl=new OffscreenCanvas(dl,Al),fl=pl.getContext("2d",{willReadFrequently:!0})),pl.width=dl,pl.height=Al,fl.drawImage(F,0,0,dl,Al);const bl=fl.getImageData(-1,-1,cl,hl);return fl.clearRect(0,0,dl,Al),bl.data}(F,0,0,dl,Al)}))}(dl,0,0,Wl,Ql)):dl,Sc=new Yc(Da,wc,ll,Al,bl,kl,Dl);return this.loaded=this.loaded||{},this.loaded[Da]=Sc,Sc}))}removeTile(F){const Da=this.loaded,ll=F.uid;Da&&Da[ll]&&delete Da[ll]}}function Kc(F,Da){if(0!==F.length){Wc(F[0],Da);for(var ll=1;ll<F.length;ll++)Wc(F[ll],!Da)}}function Wc(F,Da){for(var ll=0,cl=0,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++){var fl=(F[hl][0]-F[pl][0])*(F[pl][1]+F[hl][1]),Al=ll+fl;cl+=Math.abs(ll)>=Math.abs(fl)?ll-Al+fl:fl-Al+ll,ll=Al}ll+cl>=0!=!!Da&&F.reverse()}var Im=e((function t(F,Da){var ll,cl=F&&F.type;if("FeatureCollection"===cl)for(ll=0;ll<F.features.length;ll++)t(F.features[ll],Da);else if("GeometryCollection"===cl)for(ll=0;ll<F.geometries.length;ll++)t(F.geometries[ll],Da);else if("Feature"===cl)t(F.geometry,Da);else if("Polygon"===cl)Kc(F.coordinates,Da);else if("MultiPolygon"===cl)for(ll=0;ll<F.coordinates.length;ll++)Kc(F.coordinates[ll],Da);return F}));const Cm=Cp.VectorTileFeature.prototype.toGeoJSON;var Lm={exports:{}},zm=F,Pm=Cp.VectorTileFeature,Dm=sh;function sh(F,Da){this.options=Da||{},this.features=F,this.length=F.length}function oh(F,Da){this.id="number"==typeof F.id?F.id:void 0,this.type=F.type,this.rawGeometry=1===F.type?[F.geometry]:F.geometry,this.properties=F.tags,this.extent=Da||4096}sh.prototype.feature=function(F){return new oh(this.features[F],this.options.extent)},oh.prototype.loadGeometry=function(){var F=this.rawGeometry;this.geometry=[];for(var Da=0;Da<F.length;Da++){for(var ll=F[Da],cl=[],hl=0;hl<ll.length;hl++)cl.push(new zm(ll[hl][0],ll[hl][1]));this.geometry.push(cl)}return this.geometry},oh.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var F=this.geometry,Da=1/0,ll=-1/0,cl=1/0,hl=-1/0,dl=0;dl<F.length;dl++)for(var pl=F[dl],fl=0;fl<pl.length;fl++){var Al=pl[fl];Da=Math.min(Da,Al.x),ll=Math.max(ll,Al.x),cl=Math.min(cl,Al.y),hl=Math.max(hl,Al.y)}return[Da,cl,ll,hl]},oh.prototype.toGeoJSON=Pm.prototype.toGeoJSON;var Rm=nm,Nm=Dm;function uh(F){var Da=new Rm;return function(F,Da){for(var ll in F.layers)Da.writeMessage(3,ch,F.layers[ll])}(F,Da),Da.finish()}function ch(F,Da){var ll;Da.writeVarintField(15,F.version||1),Da.writeStringField(1,F.name||""),Da.writeVarintField(5,F.extent||4096);var cl={keys:[],values:[],keycache:{},valuecache:{}};for(ll=0;ll<F.length;ll++)cl.feature=F.feature(ll),Da.writeMessage(2,hh,cl);var hl=cl.keys;for(ll=0;ll<hl.length;ll++)Da.writeStringField(3,hl[ll]);var dl=cl.values;for(ll=0;ll<dl.length;ll++)Da.writeMessage(4,mh,dl[ll])}function hh(F,Da){var ll=F.feature;void 0!==ll.id&&Da.writeVarintField(1,ll.id),Da.writeMessage(2,ph,F),Da.writeVarintField(3,ll.type),Da.writeMessage(4,yh,ll)}function ph(F,Da){var ll=F.feature,cl=F.keys,hl=F.values,dl=F.keycache,pl=F.valuecache;for(var fl in ll.properties){var Al=ll.properties[fl],bl=dl[fl];if(null!==Al){void 0===bl&&(cl.push(fl),dl[fl]=bl=cl.length-1),Da.writeVarint(bl);var kl=typeof Al;"string"!==kl&&"boolean"!==kl&&"number"!==kl&&(Al=JSON.stringify(Al));var Dl=kl+":"+Al,Wl=pl[Dl];void 0===Wl&&(hl.push(Al),pl[Dl]=Wl=hl.length-1),Da.writeVarint(Wl)}}}function fh(F,Da){return(Da<<3)+(7&F)}function dh(F){return F<<1^F>>31}function yh(F,Da){for(var ll=F.loadGeometry(),cl=F.type,hl=0,dl=0,pl=ll.length,fl=0;fl<pl;fl++){var Al=ll[fl],bl=1;1===cl&&(bl=Al.length),Da.writeVarint(fh(1,bl));for(var kl=3===cl?Al.length-1:Al.length,Dl=0;Dl<kl;Dl++){1===Dl&&1!==cl&&Da.writeVarint(fh(2,kl-1));var Wl=Al[Dl].x-hl,Ql=Al[Dl].y-dl;Da.writeVarint(dh(Wl)),Da.writeVarint(dh(Ql)),hl+=Wl,dl+=Ql}3===cl&&Da.writeVarint(fh(7,1))}}function mh(F,Da){var ll=typeof F;"string"===ll?Da.writeStringField(1,F):"boolean"===ll?Da.writeBooleanField(7,F):"number"===ll&&(F%1!=0?Da.writeDoubleField(3,F):F<0?Da.writeSVarintField(6,F):Da.writeVarintField(5,F))}Lm.exports=uh,Lm.exports.fromVectorTileJs=uh,Lm.exports.fromGeojsonVt=function(F,Da){Da=Da||{};var ll={};for(var cl in F)ll[cl]=new Nm(F[cl].features,Da),ll[cl].name=cl,ll[cl].version=Da.version,ll[cl].extent=Da.extent;return uh({layers:ll})},Lm.exports.GeoJSONWrapper=Nm;var Um=e(Lm.exports);const Bm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vh{static from(F){if(!(F instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[Da,ll]=new Uint8Array(F,0,2);if(219!==Da)throw new Error("Data does not appear to be in a KDBush format.");const cl=ll>>4;if(1!==cl)throw new Error(`Got v${cl} data when expected v1.`);const hl=Bm[15&ll];if(!hl)throw new Error("Unrecognized array type.");const[dl]=new Uint16Array(F,2,1),[pl]=new Uint32Array(F,4,1);return new vh(pl,dl,hl,F)}constructor(F,Da,ll,cl){if(void 0===Da&&(Da=64),void 0===ll&&(ll=Float64Array),isNaN(F)||F<0)throw new Error(`Unpexpected numItems value: ${F}.`);this.numItems=+F,this.nodeSize=Math.min(Math.max(+Da,2),65535),this.ArrayType=ll,this.IndexArrayType=F<65536?Uint16Array:Uint32Array;const hl=Bm.indexOf(this.ArrayType),dl=2*F*this.ArrayType.BYTES_PER_ELEMENT,pl=F*this.IndexArrayType.BYTES_PER_ELEMENT,fl=(8-pl%8)%8;if(hl<0)throw new Error(`Unexpected typed array class: ${ll}.`);cl&&cl instanceof ArrayBuffer?(this.data=cl,this.ids=new this.IndexArrayType(this.data,8,F),this.coords=new this.ArrayType(this.data,8+pl+fl,2*F),this._pos=2*F,this._finished=!0):(this.data=new ArrayBuffer(8+dl+pl+fl),this.ids=new this.IndexArrayType(this.data,8,F),this.coords=new this.ArrayType(this.data,8+pl+fl,2*F),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+hl]),new Uint16Array(this.data,2,1)[0]=Da,new Uint32Array(this.data,4,1)[0]=F)}add(F,Da){const ll=this._pos>>1;return this.ids[ll]=ll,this.coords[this._pos++]=F,this.coords[this._pos++]=Da,ll}finish(){const F=this._pos>>1;if(F!==this.numItems)throw new Error(`Added ${F} items when expected ${this.numItems}.`);return bh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(F,Da,ll,cl){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:hl,coords:dl,nodeSize:pl}=this,fl=[0,hl.length-1,0],Al=[];for(;fl.length;){const bl=fl.pop()||0,kl=fl.pop()||0,Dl=fl.pop()||0;if(kl-Dl<=pl){for(let pl=Dl;pl<=kl;pl++){const fl=dl[2*pl],bl=dl[2*pl+1];fl>=F&&fl<=ll&&bl>=Da&&bl<=cl&&Al.push(hl[pl])}continue}const Wl=Dl+kl>>1,Ql=dl[2*Wl],wc=dl[2*Wl+1];Ql>=F&&Ql<=ll&&wc>=Da&&wc<=cl&&Al.push(hl[Wl]),(0===bl?F<=Ql:Da<=wc)&&(fl.push(Dl),fl.push(Wl-1),fl.push(1-bl)),(0===bl?ll>=Ql:cl>=wc)&&(fl.push(Wl+1),fl.push(kl),fl.push(1-bl))}return Al}within(F,Da,ll){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:cl,coords:hl,nodeSize:dl}=this,pl=[0,cl.length-1,0],fl=[],Al=ll*ll;for(;pl.length;){const bl=pl.pop()||0,kl=pl.pop()||0,Dl=pl.pop()||0;if(kl-Dl<=dl){for(let ll=Dl;ll<=kl;ll++)kh(hl[2*ll],hl[2*ll+1],F,Da)<=Al&&fl.push(cl[ll]);continue}const Wl=Dl+kl>>1,Ql=hl[2*Wl],wc=hl[2*Wl+1];kh(Ql,wc,F,Da)<=Al&&fl.push(cl[Wl]),(0===bl?F-ll<=Ql:Da-ll<=wc)&&(pl.push(Dl),pl.push(Wl-1),pl.push(1-bl)),(0===bl?F+ll>=Ql:Da+ll>=wc)&&(pl.push(Wl+1),pl.push(kl),pl.push(1-bl))}return fl}}function bh(F,Da,ll,cl,hl,dl){if(hl-cl<=ll)return;const pl=cl+hl>>1;wh(F,Da,pl,cl,hl,dl),bh(F,Da,ll,cl,pl-1,1-dl),bh(F,Da,ll,pl+1,hl,1-dl)}function wh(F,Da,ll,cl,hl,dl){for(;hl>cl;){if(hl-cl>600){const pl=hl-cl+1,fl=ll-cl+1,Al=Math.log(pl),bl=.5*Math.exp(2*Al/3),kl=.5*Math.sqrt(Al*bl*(pl-bl)/pl)*(fl-pl/2<0?-1:1);wh(F,Da,ll,Math.max(cl,Math.floor(ll-fl*bl/pl+kl)),Math.min(hl,Math.floor(ll+(pl-fl)*bl/pl+kl)),dl)}const pl=Da[2*ll+dl];let fl=cl,Al=hl;for(_h(F,Da,cl,ll),Da[2*hl+dl]>pl&&_h(F,Da,cl,hl);fl<Al;){for(_h(F,Da,fl,Al),fl++,Al--;Da[2*fl+dl]<pl;)fl++;for(;Da[2*Al+dl]>pl;)Al--}Da[2*cl+dl]===pl?_h(F,Da,cl,Al):(Al++,_h(F,Da,Al,hl)),Al<=ll&&(cl=Al+1),ll<=Al&&(hl=Al-1)}}function _h(F,Da,ll,cl){Sh(F,ll,cl),Sh(Da,2*ll,2*cl),Sh(Da,2*ll+1,2*cl+1)}function Sh(F,Da,ll){const cl=F[Da];F[Da]=F[ll],F[ll]=cl}function kh(F,Da,ll,cl){const hl=F-ll,dl=Da-cl;return hl*hl+dl*dl}const Om={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:F=>F},Fm=Math.fround||(jm=new Float32Array(1),F=>(jm[0]=+F,jm[0]));var jm;class Bh{constructor(F){this.options=Object.assign(Object.create(Om),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){const{log:Da,minZoom:ll,maxZoom:cl}=this.options;Da&&console.time("total time");const hl=`prepare ${F.length} points`;Da&&console.time(hl),this.points=F;const dl=[];for(let fl=0;fl<F.length;fl++){const Da=F[fl];if(!Da.geometry)continue;const[ll,cl]=Da.geometry.coordinates,hl=Fm(Eh(ll)),pl=Fm(Fh(cl));dl.push(hl,pl,1/0,fl,-1,1),this.options.reduce&&dl.push(0)}let pl=this.trees[cl+1]=this._createTree(dl);Da&&console.timeEnd(hl);for(let fl=cl;fl>=ll;fl--){const F=+Date.now();pl=this.trees[fl]=this._createTree(this._cluster(pl,fl)),Da&&console.log("z%d: %d clusters in %dms",fl,pl.numItems,+Date.now()-F)}return Da&&console.timeEnd("total time"),this}getClusters(F,Da){let ll=((F[0]+180)%360+360)%360-180;const cl=Math.max(-90,Math.min(90,F[1]));let hl=180===F[2]?180:((F[2]+180)%360+360)%360-180;const dl=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)ll=-180,hl=180;else if(ll>hl){const F=this.getClusters([ll,cl,180,dl],Da),pl=this.getClusters([-180,cl,hl,dl],Da);return F.concat(pl)}const pl=this.trees[this._limitZoom(Da)],fl=pl.range(Eh(ll),Fh(dl),Eh(hl),Fh(cl)),Al=pl.data,bl=[];for(const kl of fl){const F=this.stride*kl;bl.push(Al[F+5]>1?Vh(Al,F,this.clusterProps):this.points[Al[F+3]])}return bl}getChildren(F){const Da=this._getOriginId(F),ll=this._getOriginZoom(F),cl="No cluster with the specified id.",hl=this.trees[ll];if(!hl)throw new Error(cl);const dl=hl.data;if(Da*this.stride>=dl.length)throw new Error(cl);const pl=this.options.radius/(this.options.extent*Math.pow(2,ll-1)),fl=hl.within(dl[Da*this.stride],dl[Da*this.stride+1],pl),Al=[];for(const bl of fl){const Da=bl*this.stride;dl[Da+4]===F&&Al.push(dl[Da+5]>1?Vh(dl,Da,this.clusterProps):this.points[dl[Da+3]])}if(0===Al.length)throw new Error(cl);return Al}getLeaves(F,Da,ll){const cl=[];return this._appendLeaves(cl,F,Da=Da||10,ll=ll||0,0),cl}getTile(F,Da,ll){const cl=this.trees[this._limitZoom(F)],hl=Math.pow(2,F),{extent:dl,radius:pl}=this.options,fl=pl/dl,Al=(ll-fl)/hl,bl=(ll+1+fl)/hl,kl={features:[]};return this._addTileFeatures(cl.range((Da-fl)/hl,Al,(Da+1+fl)/hl,bl),cl.data,Da,ll,hl,kl),0===Da&&this._addTileFeatures(cl.range(1-fl/hl,Al,1,bl),cl.data,hl,ll,hl,kl),Da===hl-1&&this._addTileFeatures(cl.range(0,Al,fl/hl,bl),cl.data,-1,ll,hl,kl),kl.features.length?kl:null}getClusterExpansionZoom(F){let Da=this._getOriginZoom(F)-1;for(;Da<=this.options.maxZoom;){const ll=this.getChildren(F);if(Da++,1!==ll.length)break;F=ll[0].properties.cluster_id}return Da}_appendLeaves(F,Da,ll,cl,hl){const dl=this.getChildren(Da);for(const pl of dl){const Da=pl.properties;if(Da&&Da.cluster?hl+Da.point_count<=cl?hl+=Da.point_count:hl=this._appendLeaves(F,Da.cluster_id,ll,cl,hl):hl<cl?hl++:F.push(pl),F.length===ll)break}return hl}_createTree(F){const Da=new vh(F.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ll=0;ll<F.length;ll+=this.stride)Da.add(F[ll],F[ll+1]);return Da.finish(),Da.data=F,Da}_addTileFeatures(F,Da,ll,cl,hl,dl){for(const pl of F){const F=pl*this.stride,fl=Da[F+5]>1;let Al,bl,kl;if(fl)Al=Th(Da,F,this.clusterProps),bl=Da[F],kl=Da[F+1];else{const ll=this.points[Da[F+3]];Al=ll.properties;const[cl,hl]=ll.geometry.coordinates;bl=Eh(cl),kl=Fh(hl)}const Dl={type:1,geometry:[[Math.round(this.options.extent*(bl*hl-ll)),Math.round(this.options.extent*(kl*hl-cl))]],tags:Al};let Wl;Wl=fl||this.options.generateId?Da[F+3]:this.points[Da[F+3]].id,void 0!==Wl&&(Dl.id=Wl),dl.features.push(Dl)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,Da){const{radius:ll,extent:cl,reduce:hl,minPoints:dl}=this.options,pl=ll/(cl*Math.pow(2,Da)),fl=F.data,Al=[],bl=this.stride;for(let kl=0;kl<fl.length;kl+=bl){if(fl[kl+2]<=Da)continue;fl[kl+2]=Da;const ll=fl[kl],cl=fl[kl+1],Dl=F.within(fl[kl],fl[kl+1],pl),Wl=fl[kl+5];let Ql=Wl;for(const F of Dl){const ll=F*bl;fl[ll+2]>Da&&(Ql+=fl[ll+5])}if(Ql>Wl&&Ql>=dl){let F,dl=ll*Wl,pl=cl*Wl,wc=-1;const Sc=(kl/bl<<5)+(Da+1)+this.points.length;for(const ll of Dl){const cl=ll*bl;if(fl[cl+2]<=Da)continue;fl[cl+2]=Da;const Al=fl[cl+5];dl+=fl[cl]*Al,pl+=fl[cl+1]*Al,fl[cl+4]=Sc,hl&&(F||(F=this._map(fl,kl,!0),wc=this.clusterProps.length,this.clusterProps.push(F)),hl(F,this._map(fl,cl)))}fl[kl+4]=Sc,Al.push(dl/Ql,pl/Ql,1/0,Sc,-1,Ql),hl&&Al.push(wc)}else{for(let F=0;F<bl;F++)Al.push(fl[kl+F]);if(Ql>1)for(const F of Dl){const ll=F*bl;if(!(fl[ll+2]<=Da)){fl[ll+2]=Da;for(let F=0;F<bl;F++)Al.push(fl[ll+F])}}}}return Al}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,Da,ll){if(F[Da+5]>1){const cl=this.clusterProps[F[Da+6]];return ll?Object.assign({},cl):cl}const cl=this.points[F[Da+3]].properties,hl=this.options.map(cl);return ll&&hl===cl?Object.assign({},hl):hl}}function Vh(F,Da,ll){return{type:"Feature",id:F[Da+3],properties:Th(F,Da,ll),geometry:{type:"Point",coordinates:[(cl=F[Da],360*(cl-.5)),Dh(F[Da+1])]}};var cl}function Th(F,Da,ll){const cl=F[Da+5],hl=cl>=1e4?`${Math.round(cl/1e3)}k`:cl>=1e3?Math.round(cl/100)/10+"k":cl,dl=F[Da+6],pl=-1===dl?{}:Object.assign({},ll[dl]);return Object.assign(pl,{cluster:!0,cluster_id:F[Da+3],point_count:cl,point_count_abbreviated:hl})}function Eh(F){return F/360+.5}function Fh(F){const Da=Math.sin(F*Math.PI/180),ll=.5-.25*Math.log((1+Da)/(1-Da))/Math.PI;return ll<0?0:ll>1?1:ll}function Dh(F){const Da=(180-360*F)*Math.PI/180;return 360*Math.atan(Math.exp(Da))/Math.PI-90}function $h(F,Da,ll,cl){let hl=cl;const dl=Da+(ll-Da>>1);let pl,fl=ll-Da;const Al=F[Da],bl=F[Da+1],kl=F[ll],Dl=F[ll+1];for(let Wl=Da+3;Wl<ll;Wl+=3){const Da=Lh(F[Wl],F[Wl+1],Al,bl,kl,Dl);if(Da>hl)pl=Wl,hl=Da;else if(Da===hl){const F=Math.abs(Wl-dl);F<fl&&(pl=Wl,fl=F)}}hl>cl&&(pl-Da>3&&$h(F,Da,pl,cl),F[pl+2]=hl,ll-pl>3&&$h(F,pl,ll,cl))}function Lh(F,Da,ll,cl,hl,dl){let pl=hl-ll,fl=dl-cl;if(0!==pl||0!==fl){const Al=((F-ll)*pl+(Da-cl)*fl)/(pl*pl+fl*fl);Al>1?(ll=hl,cl=dl):Al>0&&(ll+=pl*Al,cl+=fl*Al)}return pl=F-ll,fl=Da-cl,pl*pl+fl*fl}function Oh(F,Da,ll,cl){const hl={id:null==F?null:F,type:Da,geometry:ll,tags:cl,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===Da||"MultiPoint"===Da||"LineString"===Da)Rh(hl,ll);else if("Polygon"===Da)Rh(hl,ll[0]);else if("MultiLineString"===Da)for(const dl of ll)Rh(hl,dl);else if("MultiPolygon"===Da)for(const dl of ll)Rh(hl,dl[0]);return hl}function Rh(F,Da){for(let ll=0;ll<Da.length;ll+=3)F.minX=Math.min(F.minX,Da[ll]),F.minY=Math.min(F.minY,Da[ll+1]),F.maxX=Math.max(F.maxX,Da[ll]),F.maxY=Math.max(F.maxY,Da[ll+1])}function jh(F,Da,ll,cl){if(!Da.geometry)return;const hl=Da.geometry.coordinates;if(hl&&0===hl.length)return;const dl=Da.geometry.type,pl=Math.pow(ll.tolerance/((1<<ll.maxZoom)*ll.extent),2);let fl=[],Al=Da.id;if(ll.promoteId?Al=Da.properties[ll.promoteId]:ll.generateId&&(Al=cl||0),"Point"===dl)qh(hl,fl);else if("MultiPoint"===dl)for(const bl of hl)qh(bl,fl);else if("LineString"===dl)Uh(hl,fl,pl,!1);else if("MultiLineString"===dl){if(ll.lineMetrics){for(const ll of hl)fl=[],Uh(ll,fl,pl,!1),F.push(Oh(Al,"LineString",fl,Da.properties));return}Nh(hl,fl,pl,!1)}else if("Polygon"===dl)Nh(hl,fl,pl,!0);else{if("MultiPolygon"!==dl){if("GeometryCollection"===dl){for(const hl of Da.geometry.geometries)jh(F,{id:Al,geometry:hl,properties:Da.properties},ll,cl);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const F of hl){const Da=[];Nh(F,Da,pl,!0),fl.push(Da)}}F.push(Oh(Al,dl,fl,Da.properties))}function qh(F,Da){Da.push(Zh(F[0]),Gh(F[1]),0)}function Uh(F,Da,ll,cl){let hl,dl,pl=0;for(let Al=0;Al<F.length;Al++){const ll=Zh(F[Al][0]),fl=Gh(F[Al][1]);Da.push(ll,fl,0),Al>0&&(pl+=cl?(hl*fl-ll*dl)/2:Math.sqrt(Math.pow(ll-hl,2)+Math.pow(fl-dl,2))),hl=ll,dl=fl}const fl=Da.length-3;Da[2]=1,$h(Da,0,fl,ll),Da[fl+2]=1,Da.size=Math.abs(pl),Da.start=0,Da.end=Da.size}function Nh(F,Da,ll,cl){for(let hl=0;hl<F.length;hl++){const dl=[];Uh(F[hl],dl,ll,cl),Da.push(dl)}}function Zh(F){return F/360+.5}function Gh(F){const Da=Math.sin(F*Math.PI/180),ll=.5-.25*Math.log((1+Da)/(1-Da))/Math.PI;return ll<0?0:ll>1?1:ll}function Xh(F,Da,ll,cl,hl,dl,pl,fl){if(cl/=Da,dl>=(ll/=Da)&&pl<cl)return F;if(pl<ll||dl>=cl)return null;const Al=[];for(const bl of F){const F=bl.geometry;let Da=bl.type;const dl=0===hl?bl.minX:bl.minY,pl=0===hl?bl.maxX:bl.maxY;if(dl>=ll&&pl<cl){Al.push(bl);continue}if(pl<ll||dl>=cl)continue;let kl=[];if("Point"===Da||"MultiPoint"===Da)Hh(F,kl,ll,cl,hl);else if("LineString"===Da)Yh(F,kl,ll,cl,hl,!1,fl.lineMetrics);else if("MultiLineString"===Da)Kh(F,kl,ll,cl,hl,!1);else if("Polygon"===Da)Kh(F,kl,ll,cl,hl,!0);else if("MultiPolygon"===Da)for(const fl of F){const F=[];Kh(fl,F,ll,cl,hl,!0),F.length&&kl.push(F)}if(kl.length){if(fl.lineMetrics&&"LineString"===Da){for(const F of kl)Al.push(Oh(bl.id,Da,F,bl.tags));continue}"LineString"!==Da&&"MultiLineString"!==Da||(1===kl.length?(Da="LineString",kl=kl[0]):Da="MultiLineString"),"Point"!==Da&&"MultiPoint"!==Da||(Da=3===kl.length?"Point":"MultiPoint"),Al.push(Oh(bl.id,Da,kl,bl.tags))}}return Al.length?Al:null}function Hh(F,Da,ll,cl,hl){for(let dl=0;dl<F.length;dl+=3){const pl=F[dl+hl];pl>=ll&&pl<=cl&&Wh(Da,F[dl],F[dl+1],F[dl+2])}}function Yh(F,Da,ll,cl,hl,dl,pl){let fl=Jh(F);const Al=0===hl?Qh:tp;let bl,kl,Dl=F.start;for(let eu=0;eu<F.length-3;eu+=3){const Wl=F[eu],Ql=F[eu+1],wc=F[eu+2],Sc=F[eu+3],iu=F[eu+4],su=0===hl?Wl:Ql,cu=0===hl?Sc:iu;let uu=!1;pl&&(bl=Math.sqrt(Math.pow(Wl-Sc,2)+Math.pow(Ql-iu,2))),su<ll?cu>ll&&(kl=Al(fl,Wl,Ql,Sc,iu,ll),pl&&(fl.start=Dl+bl*kl)):su>cl?cu<cl&&(kl=Al(fl,Wl,Ql,Sc,iu,cl),pl&&(fl.start=Dl+bl*kl)):Wh(fl,Wl,Ql,wc),cu<ll&&su>=ll&&(kl=Al(fl,Wl,Ql,Sc,iu,ll),uu=!0),cu>cl&&su<=cl&&(kl=Al(fl,Wl,Ql,Sc,iu,cl),uu=!0),!dl&&uu&&(pl&&(fl.end=Dl+bl*kl),Da.push(fl),fl=Jh(F)),pl&&(Dl+=bl)}let Wl=F.length-3;const Ql=F[Wl],wc=F[Wl+1],Sc=0===hl?Ql:wc;Sc>=ll&&Sc<=cl&&Wh(fl,Ql,wc,F[Wl+2]),Wl=fl.length-3,dl&&Wl>=3&&(fl[Wl]!==fl[0]||fl[Wl+1]!==fl[1])&&Wh(fl,fl[0],fl[1],fl[2]),fl.length&&Da.push(fl)}function Jh(F){const Da=[];return Da.size=F.size,Da.start=F.start,Da.end=F.end,Da}function Kh(F,Da,ll,cl,hl,dl){for(const pl of F)Yh(pl,Da,ll,cl,hl,dl,!1)}function Wh(F,Da,ll,cl){F.push(Da,ll,cl)}function Qh(F,Da,ll,cl,hl,dl){const pl=(dl-Da)/(cl-Da);return Wh(F,dl,ll+(hl-ll)*pl,1),pl}function tp(F,Da,ll,cl,hl,dl){const pl=(dl-ll)/(hl-ll);return Wh(F,Da+(cl-Da)*pl,dl,1),pl}function ep(F,Da){const ll=[];for(let cl=0;cl<F.length;cl++){const hl=F[cl],dl=hl.type;let pl;if("Point"===dl||"MultiPoint"===dl||"LineString"===dl)pl=rp(hl.geometry,Da);else if("MultiLineString"===dl||"Polygon"===dl){pl=[];for(const F of hl.geometry)pl.push(rp(F,Da))}else if("MultiPolygon"===dl){pl=[];for(const F of hl.geometry){const ll=[];for(const cl of F)ll.push(rp(cl,Da));pl.push(ll)}}ll.push(Oh(hl.id,dl,pl,hl.tags))}return ll}function rp(F,Da){const ll=[];ll.size=F.size,void 0!==F.start&&(ll.start=F.start,ll.end=F.end);for(let cl=0;cl<F.length;cl+=3)ll.push(F[cl]+Da,F[cl+1],F[cl+2]);return ll}function np(F,Da){if(F.transformed)return F;const ll=1<<F.z,cl=F.x,hl=F.y;for(const dl of F.features){const F=dl.geometry,pl=dl.type;if(dl.geometry=[],1===pl)for(let fl=0;fl<F.length;fl+=2)dl.geometry.push(ip(F[fl],F[fl+1],Da,ll,cl,hl));else for(let fl=0;fl<F.length;fl++){const pl=[];for(let dl=0;dl<F[fl].length;dl+=2)pl.push(ip(F[fl][dl],F[fl][dl+1],Da,ll,cl,hl));dl.geometry.push(pl)}}return F.transformed=!0,F}function ip(F,Da,ll,cl,hl,dl){return[Math.round(ll*(F*cl-hl)),Math.round(ll*(Da*cl-dl))]}function sp(F,Da,ll,cl,hl){const dl=Da===hl.maxZoom?0:hl.tolerance/((1<<Da)*hl.extent),pl={features:[],numPoints:0,numSimplified:0,numFeatures:F.length,source:null,x:ll,y:cl,z:Da,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const fl of F)op(pl,fl,dl,hl);return pl}function op(F,Da,ll,cl){const hl=Da.geometry,dl=Da.type,pl=[];if(F.minX=Math.min(F.minX,Da.minX),F.minY=Math.min(F.minY,Da.minY),F.maxX=Math.max(F.maxX,Da.maxX),F.maxY=Math.max(F.maxY,Da.maxY),"Point"===dl||"MultiPoint"===dl)for(let fl=0;fl<hl.length;fl+=3)pl.push(hl[fl],hl[fl+1]),F.numPoints++,F.numSimplified++;else if("LineString"===dl)ap(pl,hl,F,ll,!1,!1);else if("MultiLineString"===dl||"Polygon"===dl)for(let fl=0;fl<hl.length;fl++)ap(pl,hl[fl],F,ll,"Polygon"===dl,0===fl);else if("MultiPolygon"===dl)for(let fl=0;fl<hl.length;fl++){const Da=hl[fl];for(let cl=0;cl<Da.length;cl++)ap(pl,Da[cl],F,ll,!0,0===cl)}if(pl.length){let ll=Da.tags||null;if("LineString"===dl&&cl.lineMetrics){ll={};for(const F in Da.tags)ll[F]=Da.tags[F];ll.mapbox_clip_start=hl.start/hl.size,ll.mapbox_clip_end=hl.end/hl.size}const fl={geometry:pl,type:"Polygon"===dl||"MultiPolygon"===dl?3:"LineString"===dl||"MultiLineString"===dl?2:1,tags:ll};null!==Da.id&&(fl.id=Da.id),F.features.push(fl)}}function ap(F,Da,ll,cl,hl,dl){const pl=cl*cl;if(cl>0&&Da.size<(hl?pl:cl))return void(ll.numPoints+=Da.length/3);const fl=[];for(let Al=0;Al<Da.length;Al+=3)(0===cl||Da[Al+2]>pl)&&(ll.numSimplified++,fl.push(Da[Al],Da[Al+1])),ll.numPoints++;hl&&function(F,Da){let ll=0;for(let cl=0,hl=F.length,dl=hl-2;cl<hl;dl=cl,cl+=2)ll+=(F[cl]-F[dl])*(F[cl+1]+F[dl+1]);if(ll>0===Da)for(let cl=0,hl=F.length;cl<hl/2;cl+=2){const Da=F[cl],ll=F[cl+1];F[cl]=F[hl-2-cl],F[cl+1]=F[hl-1-cl],F[hl-2-cl]=Da,F[hl-1-cl]=ll}}(fl,dl),F.push(fl)}const Vm={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class up{constructor(F,Da){const ll=(Da=this.options=function(F,Da){for(const ll in Da)F[ll]=Da[ll];return F}(Object.create(Vm),Da)).debug;if(ll&&console.time("preprocess data"),Da.maxZoom<0||Da.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Da.promoteId&&Da.generateId)throw new Error("promoteId and generateId cannot be used together.");let cl=function(F,Da){const ll=[];if("FeatureCollection"===F.type)for(let cl=0;cl<F.features.length;cl++)jh(ll,F.features[cl],Da,cl);else jh(ll,"Feature"===F.type?F:{geometry:F},Da);return ll}(F,Da);this.tiles={},this.tileCoords=[],ll&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Da.indexMaxZoom,Da.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),cl=function(F,Da){const ll=Da.buffer/Da.extent;let cl=F;const hl=Xh(F,1,-1-ll,ll,0,-1,2,Da),dl=Xh(F,1,1-ll,2+ll,0,-1,2,Da);return(hl||dl)&&(cl=Xh(F,1,-ll,1+ll,0,-1,2,Da)||[],hl&&(cl=ep(hl,1).concat(cl)),dl&&(cl=cl.concat(ep(dl,-1)))),cl}(cl,Da),cl.length&&this.splitTile(cl,0,0,0),ll&&(cl.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(F,Da,ll,cl,hl,dl,pl){const fl=[F,Da,ll,cl],Al=this.options,bl=Al.debug;for(;fl.length;){cl=fl.pop(),ll=fl.pop(),Da=fl.pop(),F=fl.pop();const kl=1<<Da,Dl=cp(Da,ll,cl);let Wl=this.tiles[Dl];if(!Wl&&(bl>1&&console.time("creation"),Wl=this.tiles[Dl]=sp(F,Da,ll,cl,Al),this.tileCoords.push({z:Da,x:ll,y:cl}),bl)){bl>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Da,ll,cl,Wl.numFeatures,Wl.numPoints,Wl.numSimplified),console.timeEnd("creation"));const F=`z${Da}`;this.stats[F]=(this.stats[F]||0)+1,this.total++}if(Wl.source=F,null==hl){if(Da===Al.indexMaxZoom||Wl.numPoints<=Al.indexMaxPoints)continue}else{if(Da===Al.maxZoom||Da===hl)continue;if(null!=hl){const F=hl-Da;if(ll!==dl>>F||cl!==pl>>F)continue}}if(Wl.source=null,0===F.length)continue;bl>1&&console.time("clipping");const Ql=.5*Al.buffer/Al.extent,wc=.5-Ql,Sc=.5+Ql,eu=1+Ql;let iu=null,su=null,cu=null,uu=null,hu=Xh(F,kl,ll-Ql,ll+Sc,0,Wl.minX,Wl.maxX,Al),Lu=Xh(F,kl,ll+wc,ll+eu,0,Wl.minX,Wl.maxX,Al);F=null,hu&&(iu=Xh(hu,kl,cl-Ql,cl+Sc,1,Wl.minY,Wl.maxY,Al),su=Xh(hu,kl,cl+wc,cl+eu,1,Wl.minY,Wl.maxY,Al),hu=null),Lu&&(cu=Xh(Lu,kl,cl-Ql,cl+Sc,1,Wl.minY,Wl.maxY,Al),uu=Xh(Lu,kl,cl+wc,cl+eu,1,Wl.minY,Wl.maxY,Al),Lu=null),bl>1&&console.timeEnd("clipping"),fl.push(iu||[],Da+1,2*ll,2*cl),fl.push(su||[],Da+1,2*ll,2*cl+1),fl.push(cu||[],Da+1,2*ll+1,2*cl),fl.push(uu||[],Da+1,2*ll+1,2*cl+1)}}getTile(F,Da,ll){F=+F,Da=+Da,ll=+ll;const cl=this.options,{extent:hl,debug:dl}=cl;if(F<0||F>24)return null;const pl=1<<F,fl=cp(F,Da=Da+pl&pl-1,ll);if(this.tiles[fl])return np(this.tiles[fl],hl);dl>1&&console.log("drilling down to z%d-%d-%d",F,Da,ll);let Al,bl=F,kl=Da,Dl=ll;for(;!Al&&bl>0;)bl--,kl>>=1,Dl>>=1,Al=this.tiles[cp(bl,kl,Dl)];return Al&&Al.source?(dl>1&&(console.log("found parent tile z%d-%d-%d",bl,kl,Dl),console.time("drilling down")),this.splitTile(Al.source,bl,kl,Dl,F,Da,ll),dl>1&&console.timeEnd("drilling down"),this.tiles[fl]?np(this.tiles[fl],hl):null):null}}function cp(F,Da,ll){return 32*((1<<F)*ll+Da)+F}function hp(F,Da){return Da?F.properties[Da]:F.id}function pp(F,Da){if(null==F)return!0;if("Feature"===F.type)return null!=hp(F,Da);if("FeatureCollection"===F.type){const ll=new Set;for(const cl of F.features){const F=hp(cl,Da);if(null==F)return!1;if(ll.has(F))return!1;ll.add(F)}return!0}return!1}function fp(F,Da){const ll=new Map;if(null==F);else if("Feature"===F.type)ll.set(hp(F,Da),F);else for(const cl of F.features)ll.set(hp(cl,Da),cl);return ll}class dp extends Hc{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(F,ll){return t(this,void 0,void 0,(function*(){const ll=F.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const cl=this._geoJSONIndex.getTile(ll.z,ll.x,ll.y);if(!cl)return null;const hl=new class{constructor(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=Kd,this.length=F.length,this._features=F}feature(F){return new class{constructor(F){this._feature=F,this.extent=Kd,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))}loadGeometry(){if(1===this._feature.type){const F=[];for(const ll of this._feature.geometry)F.push([new Da(ll[0],ll[1])]);return F}{const F=[];for(const ll of this._feature.geometry){const cl=[];for(const F of ll)cl.push(new Da(F[0],F[1]));F.push(cl)}return F}}toGeoJSON(F,Da,ll){return Cm.call(this,F,Da,ll)}}(this._features[F])}}(cl.features);let dl=Um(hl);return 0===dl.byteOffset&&dl.byteLength===dl.buffer.byteLength||(dl=new Uint8Array(dl)),{vectorTile:hl,rawData:dl.buffer}}))}loadData(F){return t(this,void 0,void 0,(function*(){var Da;null===(Da=this._pendingRequest)||void 0===Da||Da.abort();const ll=!!(F&&F.request&&F.request.collectResourceTiming)&&new Xc(F.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(F,this._pendingRequest),this._geoJSONIndex=F.cluster?new Bh(function(F){let{superclusterOptions:Da,clusterProperties:ll}=F;if(!ll||!Da)return Da;const cl={},hl={},dl={accumulated:null,zoom:0},pl={properties:null},fl=Object.keys(ll);for(const Al of fl){const[F,Da]=ll[Al],dl=Lr(Da),pl=Lr("string"==typeof F?[F,["accumulated"],["get",Al]]:F);cl[Al]=dl.value,hl[Al]=pl.value}return Da.map=F=>{pl.properties=F;const Da={};for(const ll of fl)Da[ll]=cl[ll].evaluate(dl,pl);return Da},Da.reduce=(F,Da)=>{pl.properties=Da;for(const ll of fl)dl.accumulated=F[ll],F[ll]=hl[ll].evaluate(dl,pl)},Da}(F)).load((yield this._pendingData).features):(cl=yield this._pendingData,new up(cl,F.geojsonVtOptions)),this.loaded={};const Da={};if(ll){const cl=ll.finish();cl&&(Da.resourceTiming={},Da.resourceTiming[F.source]=JSON.parse(JSON.stringify(cl)))}return Da}catch(Da){if(delete this._pendingRequest,function(F){return F.message===Md}(Da))return{abandoned:!0};throw Da}var cl}))}getData(){return t(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(F){const Da=this.loaded;return Da&&Da[F.uid]?super.reloadTile(F):this.loadTile(F)}loadAndProcessGeoJSON(F,Da){return t(this,void 0,void 0,(function*(){let ll=yield this.loadGeoJSON(F,Da);if(delete this._pendingRequest,"object"!=typeof ll)throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(Im(ll,!0),F.filter){const Da=Lr(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Da.result)throw new Error(Da.value.map((F=>`${F.key}: ${F.message}`)).join(", "));const cl=ll.features.filter((F=>Da.value.evaluate({zoom:0},F)));ll={type:"FeatureCollection",features:cl}}return ll}))}loadGeoJSON(F,Da){return t(this,void 0,void 0,(function*(){const{promoteId:ll}=F;if(F.request){const cl=yield((F,Da)=>Rn(c(F,{type:"json"}),Da))(F.request,Da);return this._dataUpdateable=pp(cl.data,ll)?fp(cl.data,ll):void 0,cl.data}if("string"==typeof F.data)try{const Da=JSON.parse(F.data);return this._dataUpdateable=pp(Da,ll)?fp(Da,ll):void 0,Da}catch(ll){throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`)}if(!F.dataDiff)throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${F.source}`);return function(F,Da,ll){var cl,hl,dl,pl;if(Da.removeAll&&F.clear(),Da.remove)for(const fl of Da.remove)F.delete(fl);if(Da.add)for(const fl of Da.add){const Da=hp(fl,ll);null!=Da&&F.set(Da,fl)}if(Da.update)for(const fl of Da.update){let Da=F.get(fl.id);if(null==Da)continue;const ll=!fl.removeAllProperties&&((null===(cl=fl.removeProperties)||void 0===cl?void 0:cl.length)>0||(null===(hl=fl.addOrUpdateProperties)||void 0===hl?void 0:hl.length)>0);if((fl.newGeometry||fl.removeAllProperties||ll)&&(Da=Object.assign({},Da),F.set(fl.id,Da),ll&&(Da.properties=Object.assign({},Da.properties))),fl.newGeometry&&(Da.geometry=fl.newGeometry),fl.removeAllProperties)Da.properties={};else if((null===(dl=fl.removeProperties)||void 0===dl?void 0:dl.length)>0)for(const F of fl.removeProperties)Object.prototype.hasOwnProperty.call(Da.properties,F)&&delete Da.properties[F];if((null===(pl=fl.addOrUpdateProperties)||void 0===pl?void 0:pl.length)>0)for(const{key:F,value:cl}of fl.addOrUpdateProperties)Da.properties[F]=cl}}(this._dataUpdateable,F.dataDiff,ll),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(F){return t(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(F){return this._geoJSONIndex.getClusterExpansionZoom(F.clusterId)}getClusterChildren(F){return this._geoJSONIndex.getChildren(F.clusterId)}getClusterLeaves(F){return this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset)}}class yp{constructor(F){this.self=F,this.actor=new Yn(F),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(F,Da)=>{if(this.externalWorkerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.externalWorkerSourceTypes[F]=Da},this.self.addProtocol=Fn,this.self.removeProtocol=Dn,this.self.registerRTLTextPlugin=F=>{if(Rd.isParsed())throw new Error("RTL text plugin already registered.");Rd.setMethods(F)},this.actor.registerMessageHandler("LDT",((F,Da)=>this._getDEMWorkerSource(F,Da.source).loadTile(Da))),this.actor.registerMessageHandler("RDT",((F,Da)=>t(this,void 0,void 0,(function*(){this._getDEMWorkerSource(F,Da.source).removeTile(Da)})))),this.actor.registerMessageHandler("GCEZ",((F,Da)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(F,Da.type,Da.source).getClusterExpansionZoom(Da)})))),this.actor.registerMessageHandler("GCC",((F,Da)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(F,Da.type,Da.source).getClusterChildren(Da)})))),this.actor.registerMessageHandler("GCL",((F,Da)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(F,Da.type,Da.source).getClusterLeaves(Da)})))),this.actor.registerMessageHandler("LD",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).loadData(Da))),this.actor.registerMessageHandler("GD",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).getData())),this.actor.registerMessageHandler("LT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).loadTile(Da))),this.actor.registerMessageHandler("RT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).reloadTile(Da))),this.actor.registerMessageHandler("AT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).abortTile(Da))),this.actor.registerMessageHandler("RMT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).removeTile(Da))),this.actor.registerMessageHandler("RS",((F,Da)=>t(this,void 0,void 0,(function*(){if(!this.workerSources[F]||!this.workerSources[F][Da.type]||!this.workerSources[F][Da.type][Da.source])return;const ll=this.workerSources[F][Da.type][Da.source];delete this.workerSources[F][Da.type][Da.source],void 0!==ll.removeSource&&ll.removeSource(Da)})))),this.actor.registerMessageHandler("RM",(F=>t(this,void 0,void 0,(function*(){delete this.layerIndexes[F],delete this.availableImages[F],delete this.workerSources[F],delete this.demWorkerSources[F]})))),this.actor.registerMessageHandler("SR",((F,Da)=>t(this,void 0,void 0,(function*(){this.referrer=Da})))),this.actor.registerMessageHandler("SRPS",((F,Da)=>this._syncRTLPluginState(F,Da))),this.actor.registerMessageHandler("IS",((F,Da)=>t(this,void 0,void 0,(function*(){this.self.importScripts(Da)})))),this.actor.registerMessageHandler("SI",((F,Da)=>this._setImages(F,Da))),this.actor.registerMessageHandler("UL",((F,Da)=>t(this,void 0,void 0,(function*(){this._getLayerIndex(F).update(Da.layers,Da.removedIds)})))),this.actor.registerMessageHandler("SL",((F,Da)=>t(this,void 0,void 0,(function*(){this._getLayerIndex(F).replace(Da)}))))}_setImages(F,Da){return t(this,void 0,void 0,(function*(){this.availableImages[F]=Da;for(const ll in this.workerSources[F]){const cl=this.workerSources[F][ll];for(const F in cl)cl[F].availableImages=Da}}))}_syncRTLPluginState(F,Da){return t(this,void 0,void 0,(function*(){if(Rd.isParsed())return Rd.getState();if("loading"!==Da.pluginStatus)return Rd.setState(Da),Da;const F=Da.pluginURL;if(this.self.importScripts(F),Rd.isParsed()){const Da={pluginStatus:"loaded",pluginURL:F};return Rd.setState(Da),Da}throw Rd.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${F}`)}))}_getAvailableImages(F){let Da=this.availableImages[F];return Da||(Da=[]),Da}_getLayerIndex(F){let Da=this.layerIndexes[F];return Da||(Da=this.layerIndexes[F]=new Yu),Da}_getWorkerSource(F,Da,ll){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][Da]||(this.workerSources[F][Da]={}),!this.workerSources[F][Da][ll]){const cl={sendAsync:(Da,ll)=>(Da.targetMapId=F,this.actor.sendAsync(Da,ll))};switch(Da){case"vector":this.workerSources[F][Da][ll]=new Hc(cl,this._getLayerIndex(F),this._getAvailableImages(F));break;case"geojson":this.workerSources[F][Da][ll]=new dp(cl,this._getLayerIndex(F),this._getAvailableImages(F));break;default:this.workerSources[F][Da][ll]=new this.externalWorkerSourceTypes[Da](cl,this._getLayerIndex(F),this._getAvailableImages(F))}}return this.workerSources[F][Da][ll]}_getDEMWorkerSource(F,Da){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][Da]||(this.demWorkerSources[F][Da]=new Jc),this.demWorkerSources[F][Da]}}m(self)&&(self.worker=new yp(self))}()},927:function(F){
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */
F.exports=function(){"use strict";var F={},Da={};function define(ll,cl,hl){if(Da[ll]=hl,"index"===ll){var dl="var sharedModule = {}; ("+Da.shared+")(sharedModule); ("+Da.worker+")(sharedModule);",pl={};return Da.shared(pl),Da.index(F,pl),"undefined"!==typeof window&&F.setWorkerUrl(window.URL.createObjectURL(new Blob([dl],{type:"text/javascript"}))),F}}return define("shared",["exports"],(function(F){function e(F,Da,ll,cl){return new(ll||(ll=Promise))((function(hl,dl){function a(F){try{l(cl.next(F))}catch(F){dl(F)}}function o(F){try{l(cl.throw(F))}catch(F){dl(F)}}function l(F){var Da;F.done?hl(F.value):(Da=F.value,Da instanceof ll?Da:new ll((function(F){F(Da)}))).then(a,o)}l((cl=cl.apply(F,Da||[])).next())}))}function r(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}"function"==typeof SuppressedError&&SuppressedError;var Da=i;function i(F,Da){this.x=F,this.y=Da}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(F){return this.clone()._add(F)},sub:function(F){return this.clone()._sub(F)},multByPoint:function(F){return this.clone()._multByPoint(F)},divByPoint:function(F){return this.clone()._divByPoint(F)},mult:function(F){return this.clone()._mult(F)},div:function(F){return this.clone()._div(F)},rotate:function(F){return this.clone()._rotate(F)},rotateAround:function(F,Da){return this.clone()._rotateAround(F,Da)},matMult:function(F){return this.clone()._matMult(F)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(F){return this.x===F.x&&this.y===F.y},dist:function(F){return Math.sqrt(this.distSqr(F))},distSqr:function(F){var Da=F.x-this.x,ll=F.y-this.y;return Da*Da+ll*ll},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(F){return Math.atan2(this.y-F.y,this.x-F.x)},angleWith:function(F){return this.angleWithSep(F.x,F.y)},angleWithSep:function(F,Da){return Math.atan2(this.x*Da-this.y*F,this.x*F+this.y*Da)},_matMult:function(F){var Da=F[2]*this.x+F[3]*this.y;return this.x=F[0]*this.x+F[1]*this.y,this.y=Da,this},_add:function(F){return this.x+=F.x,this.y+=F.y,this},_sub:function(F){return this.x-=F.x,this.y-=F.y,this},_mult:function(F){return this.x*=F,this.y*=F,this},_div:function(F){return this.x/=F,this.y/=F,this},_multByPoint:function(F){return this.x*=F.x,this.y*=F.y,this},_divByPoint:function(F){return this.x/=F.x,this.y/=F.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var F=this.y;return this.y=this.x,this.x=-F,this},_rotate:function(F){var Da=Math.cos(F),ll=Math.sin(F),cl=ll*this.x+Da*this.y;return this.x=Da*this.x-ll*this.y,this.y=cl,this},_rotateAround:function(F,Da){var ll=Math.cos(F),cl=Math.sin(F),hl=Da.y+cl*(this.x-Da.x)+ll*(this.y-Da.y);return this.x=Da.x+ll*(this.x-Da.x)-cl*(this.y-Da.y),this.y=hl,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(F){return F instanceof i?F:Array.isArray(F)?new i(F[0],F[1]):F};var ll=r(Da),cl=o;function o(F,Da,ll,cl){this.cx=3*F,this.bx=3*(ll-F)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Da,this.by=3*(cl-Da)-this.cy,this.ay=1-this.cy-this.by,this.p1x=F,this.p1y=Da,this.p2x=ll,this.p2y=cl}o.prototype={sampleCurveX:function(F){return((this.ax*F+this.bx)*F+this.cx)*F},sampleCurveY:function(F){return((this.ay*F+this.by)*F+this.cy)*F},sampleCurveDerivativeX:function(F){return(3*this.ax*F+2*this.bx)*F+this.cx},solveCurveX:function(F,Da){if(void 0===Da&&(Da=1e-6),F<0)return 0;if(F>1)return 1;for(var ll=F,cl=0;cl<8;cl++){var hl=this.sampleCurveX(ll)-F;if(Math.abs(hl)<Da)return ll;var dl=this.sampleCurveDerivativeX(ll);if(Math.abs(dl)<1e-6)break;ll-=hl/dl}var pl=0,fl=1;for(ll=F,cl=0;cl<20&&(hl=this.sampleCurveX(ll),!(Math.abs(hl-F)<Da));cl++)F>hl?pl=ll:fl=ll,ll=.5*(fl-pl)+pl;return ll},solve:function(F,Da){return this.sampleCurveY(this.solveCurveX(F,Da))}};var hl=r(cl);let dl,pl;function h(){return null==dl&&(dl="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),dl}function p(){if(null==pl&&(pl=!1,h())){const F=5,Da=new OffscreenCanvas(F,F).getContext("2d",{willReadFrequently:!0});if(Da){for(let cl=0;cl<F*F;cl++){const ll=4*cl;Da.fillStyle=`rgb(${ll},${ll+1},${ll+2})`,Da.fillRect(cl%F,Math.floor(cl/F),1,1)}const ll=Da.getImageData(0,0,F,F).data;for(let Da=0;Da<F*F*4;Da++)if(Da%4!=3&&ll[Da]!==Da){pl=!0;break}}}return pl||!1}function f(F,Da,ll,cl){const dl=new hl(F,Da,ll,cl);return F=>dl.solve(F)}const fl=f(.25,.1,.25,1);function y(F,Da,ll){return Math.min(ll,Math.max(Da,F))}function m(F,Da,ll){const cl=ll-Da,hl=((F-Da)%cl+cl)%cl+Da;return hl===Da?ll:hl}function g(F,...Da){for(const ll of Da)for(const Da in ll)F[Da]=ll[Da];return F}let Al=1;function v(F,Da,ll){const cl={};for(const hl in F)cl[hl]=Da.call(this,F[hl],hl,F);return cl}function b(F,Da,ll){const cl={};for(const hl in F)Da.call(this,F[hl],hl,F)&&(cl[hl]=F[hl]);return cl}function w(F){return Array.isArray(F)?F.map(w):"object"==typeof F&&F?v(F,w):F}const bl={};function A(F){bl[F]||("undefined"!=typeof console&&console.warn(F),bl[F]=!0)}function S(F,Da,ll){return(ll.y-F.y)*(Da.x-F.x)>(Da.y-F.y)*(ll.x-F.x)}function k(F){return"undefined"!=typeof WorkerGlobalScope&&void 0!==F&&F instanceof WorkerGlobalScope}let kl=null;function I(F){return"undefined"!=typeof ImageBitmap&&F instanceof ImageBitmap}const Dl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function P(F,Da,ll,cl,hl){return e(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const dl=new VideoFrame(F,{timestamp:0});try{const pl=null==dl?void 0:dl.format;if(!pl||!pl.startsWith("BGR")&&!pl.startsWith("RGB"))throw new Error(`Unrecognized format ${pl}`);const fl=pl.startsWith("BGR"),Al=new Uint8ClampedArray(cl*hl*4);if(yield dl.copyTo(Al,function(F,Da,ll,cl,hl){const dl=4*Math.max(-Da,0),pl=(Math.max(0,ll)-ll)*cl*4+dl,fl=4*cl,Al=Math.max(0,Da),bl=Math.max(0,ll);return{rect:{x:Al,y:bl,width:Math.min(F.width,Da+cl)-Al,height:Math.min(F.height,ll+hl)-bl},layout:[{offset:pl,stride:fl}]}}(F,Da,ll,cl,hl)),fl)for(let F=0;F<Al.length;F+=4){const Da=Al[F];Al[F]=Al[F+2],Al[F+2]=Da}return Al}finally{dl.close()}}))}let Wl,Ql;const wc="AbortError";function E(){return new Error(wc)}const Sc={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function T(F){return Sc.REGISTERED_PROTOCOLS[F.substring(0,F.indexOf("://"))]}const eu="global-dispatcher";class L extends Error{constructor(F,Da,ll,cl){super(`AJAXError: ${Da} (${F}): ${ll}`),this.status=F,this.statusText=Da,this.url=ll,this.body=cl}}const D=()=>k(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,O=function(F,Da){if(/:\/\//.test(F.url)&&!/^https?:|^file:/.test(F.url)){const ll=T(F.url);if(ll)return ll(F,Da);if(k(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:F,targetMapId:eu},Da)}if(!(/^file:/.test(ll=F.url)||/^file:/.test(D())&&!/^\w+:/.test(ll))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(F,Da){return e(this,void 0,void 0,(function*(){const ll=new Request(F.url,{method:F.method||"GET",body:F.body,credentials:F.credentials,headers:F.headers,cache:F.cache,referrer:D(),signal:Da.signal});"json"!==F.type||ll.headers.has("Accept")||ll.headers.set("Accept","application/json");const cl=yield fetch(ll);if(!cl.ok){const Da=yield cl.blob();throw new L(cl.status,cl.statusText,F.url,Da)}let hl;hl="arrayBuffer"===F.type||"image"===F.type?cl.arrayBuffer():"json"===F.type?cl.json():cl.text();const dl=yield hl;if(Da.signal.aborted)throw E();return{data:dl,cacheControl:cl.headers.get("Cache-Control"),expires:cl.headers.get("Expires")}}))}(F,Da);if(k(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:F,mustQueue:!0,targetMapId:eu},Da)}var ll;return function(F,Da){return new Promise(((ll,cl)=>{var hl;const dl=new XMLHttpRequest;dl.open(F.method||"GET",F.url,!0),"arrayBuffer"!==F.type&&"image"!==F.type||(dl.responseType="arraybuffer");for(const Da in F.headers)dl.setRequestHeader(Da,F.headers[Da]);"json"===F.type&&(dl.responseType="text",(null===(hl=F.headers)||void 0===hl?void 0:hl.Accept)||dl.setRequestHeader("Accept","application/json")),dl.withCredentials="include"===F.credentials,dl.onerror=()=>{cl(new Error(dl.statusText))},dl.onload=()=>{if(!Da.signal.aborted)if((dl.status>=200&&dl.status<300||0===dl.status)&&null!==dl.response){let Da=dl.response;if("json"===F.type)try{Da=JSON.parse(dl.response)}catch(F){return void cl(F)}ll({data:Da,cacheControl:dl.getResponseHeader("Cache-Control"),expires:dl.getResponseHeader("Expires")})}else{const Da=new Blob([dl.response],{type:dl.getResponseHeader("Content-Type")});cl(new L(dl.status,dl.statusText,F.url,Da))}},Da.signal.addEventListener("abort",(()=>{dl.abort(),cl(E())})),dl.send(F.body)}))}(F,Da)};function j(F){if(!F||F.indexOf("://")<=0||0===F.indexOf("data:image/")||0===F.indexOf("blob:"))return!0;const Da=new URL(F),ll=window.location;return Da.protocol===ll.protocol&&Da.host===ll.host}function R(F,Da,ll){ll[F]&&-1!==ll[F].indexOf(Da)||(ll[F]=ll[F]||[],ll[F].push(Da))}function U(F,Da,ll){if(ll&&ll[F]){const cl=ll[F].indexOf(Da);-1!==cl&&ll[F].splice(cl,1)}}class q{constructor(F,Da={}){g(this,Da),this.type=F}}class N extends q{constructor(F,Da={}){super("error",g({error:F},Da))}}class Z{on(F,Da){return this._listeners=this._listeners||{},R(F,Da,this._listeners),this}off(F,Da){return U(F,Da,this._listeners),U(F,Da,this._oneTimeListeners),this}once(F,Da){return Da?(this._oneTimeListeners=this._oneTimeListeners||{},R(F,Da,this._oneTimeListeners),this):new Promise((Da=>this.once(F,Da)))}fire(F,Da){"string"==typeof F&&(F=new q(F,Da||{}));const ll=F.type;if(this.listens(ll)){F.target=this;const Da=this._listeners&&this._listeners[ll]?this._listeners[ll].slice():[];for(const ll of Da)ll.call(this,F);const cl=this._oneTimeListeners&&this._oneTimeListeners[ll]?this._oneTimeListeners[ll].slice():[];for(const dl of cl)U(ll,dl,this._oneTimeListeners),dl.call(this,F);const hl=this._eventedParent;hl&&(g(F,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),hl.fire(F))}else F instanceof N&&console.error(F.error);return this}listens(F){return this._listeners&&this._listeners[F]&&this._listeners[F].length>0||this._oneTimeListeners&&this._oneTimeListeners[F]&&this._oneTimeListeners[F].length>0||this._eventedParent&&this._eventedParent.listens(F)}setEventedParent(F,Da){return this._eventedParent=F,this._eventedParentData=Da,this}}var iu={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const su=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function X(F,Da){const ll={};for(const cl in F)"ref"!==cl&&(ll[cl]=F[cl]);return su.forEach((F=>{F in Da&&(ll[F]=Da[F])})),ll}function H(F,Da){if(Array.isArray(F)){if(!Array.isArray(Da)||F.length!==Da.length)return!1;for(let ll=0;ll<F.length;ll++)if(!H(F[ll],Da[ll]))return!1;return!0}if("object"==typeof F&&null!==F&&null!==Da){if("object"!=typeof Da)return!1;if(Object.keys(F).length!==Object.keys(Da).length)return!1;for(const ll in F)if(!H(F[ll],Da[ll]))return!1;return!0}return F===Da}function Y(F,Da){F.push(Da)}function J(F,Da,ll){Y(ll,{command:"addSource",args:[F,Da[F]]})}function W(F,Da,ll){Y(Da,{command:"removeSource",args:[F]}),ll[F]=!0}function Q(F,Da,ll,cl){W(F,ll,cl),J(F,Da,ll)}function tt(F,Da,ll){let cl;for(cl in F[ll])if(Object.prototype.hasOwnProperty.call(F[ll],cl)&&"data"!==cl&&!H(F[ll][cl],Da[ll][cl]))return!1;for(cl in Da[ll])if(Object.prototype.hasOwnProperty.call(Da[ll],cl)&&"data"!==cl&&!H(F[ll][cl],Da[ll][cl]))return!1;return!0}function et(F,Da,ll,cl,hl,dl){F=F||{},Da=Da||{};for(const pl in F)Object.prototype.hasOwnProperty.call(F,pl)&&(H(F[pl],Da[pl])||ll.push({command:dl,args:[cl,pl,Da[pl],hl]}));for(const pl in Da)Object.prototype.hasOwnProperty.call(Da,pl)&&!Object.prototype.hasOwnProperty.call(F,pl)&&(H(F[pl],Da[pl])||ll.push({command:dl,args:[cl,pl,Da[pl],hl]}))}function rt(F){return F.id}function nt(F,Da){return F[Da.id]=Da,F}class it{constructor(F,Da,ll,cl){this.message=(F?`${F}: `:"")+ll,cl&&(this.identifier=cl),null!=Da&&Da.__line__&&(this.line=Da.__line__)}}function st(F,...Da){for(const ll of Da)for(const Da in ll)F[Da]=ll[Da];return F}class at extends Error{constructor(F,Da){super(Da),this.message=Da,this.key=F}}class ot{constructor(F,Da=[]){this.parent=F,this.bindings={};for(const[ll,cl]of Da)this.bindings[ll]=cl}concat(F){return new ot(this,F)}get(F){if(this.bindings[F])return this.bindings[F];if(this.parent)return this.parent.get(F);throw new Error(`${F} not found in scope.`)}has(F){return!!this.bindings[F]||!!this.parent&&this.parent.has(F)}}const cu={kind:"null"},uu={kind:"number"},hu={kind:"string"},Lu={kind:"boolean"},zu={kind:"color"},Du={kind:"object"},Nu={kind:"value"},qu={kind:"collator"},ih={kind:"formatted"},gh={kind:"padding"},ed={kind:"resolvedImage"},td={kind:"variableAnchorOffsetCollection"};function bt(F,Da){return{kind:"array",itemType:F,N:Da}}function wt(F){if("array"===F.kind){const Da=wt(F.itemType);return"number"==typeof F.N?`array<${Da}, ${F.N}>`:"value"===F.itemType.kind?"array":`array<${Da}>`}return F.kind}const id=[cu,uu,hu,Lu,zu,ih,Du,bt(Nu),gh,ed,td];function At(F,Da){if("error"===Da.kind)return null;if("array"===F.kind){if("array"===Da.kind&&(0===Da.N&&"value"===Da.itemType.kind||!At(F.itemType,Da.itemType))&&("number"!=typeof F.N||F.N===Da.N))return null}else{if(F.kind===Da.kind)return null;if("value"===F.kind)for(const F of id)if(!At(F,Da))return null}return`Expected ${wt(F)} but found ${wt(Da)} instead.`}function St(F,Da){return Da.some((Da=>Da.kind===F.kind))}function kt(F,Da){return Da.some((Da=>"null"===Da?null===F:"array"===Da?Array.isArray(F):"object"===Da?F&&!Array.isArray(F)&&"object"==typeof F:Da===typeof F))}function Mt(F,Da){return"array"===F.kind&&"array"===Da.kind?F.itemType.kind===Da.itemType.kind&&"number"==typeof F.N:F.kind===Da.kind}const nd=.96422,rd=.82521,ad=4/29,sd=6/29,od=3*sd*sd,ld=sd*sd*sd,cd=Math.PI/180,ud=180/Math.PI;function Tt(F){return(F%=360)<0&&(F+=360),F}function $t([F,Da,ll,cl]){let hl,dl;const pl=Dt((.2225045*(F=Lt(F))+.7168786*(Da=Lt(Da))+.0606169*(ll=Lt(ll)))/1);F===Da&&Da===ll?hl=dl=pl:(hl=Dt((.4360747*F+.3850649*Da+.1430804*ll)/nd),dl=Dt((.0139322*F+.0971045*Da+.7141733*ll)/rd));const fl=116*pl-16;return[fl<0?0:fl,500*(hl-pl),200*(pl-dl),cl]}function Lt(F){return F<=.04045?F/12.92:Math.pow((F+.055)/1.055,2.4)}function Dt(F){return F>ld?Math.pow(F,1/3):F/od+ad}function Ot([F,Da,ll,cl]){let hl=(F+16)/116,dl=isNaN(Da)?hl:hl+Da/500,pl=isNaN(ll)?hl:hl-ll/200;return hl=1*Rt(hl),dl=nd*Rt(dl),pl=rd*Rt(pl),[jt(3.1338561*dl-1.6168667*hl-.4906146*pl),jt(-.9787684*dl+1.9161415*hl+.033454*pl),jt(.0719453*dl-.2289914*hl+1.4052427*pl),cl]}function jt(F){return(F=F<=.00304?12.92*F:1.055*Math.pow(F,1/2.4)-.055)<0?0:F>1?1:F}function Rt(F){return F>sd?F*F*F:od*(F-ad)}function Ut(F){return parseInt(F.padEnd(2,F),16)/255}function qt(F,Da){return Nt(Da?F/100:F,0,1)}function Nt(F,Da,ll){return Math.min(Math.max(Da,F),ll)}function Zt(F){return!F.some(Number.isNaN)}const hd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Kt{constructor(F,Da,ll,cl=1,hl=!0){this.r=F,this.g=Da,this.b=ll,this.a=cl,hl||(this.r*=cl,this.g*=cl,this.b*=cl,cl||this.overwriteGetter("rgb",[F,Da,ll,cl]))}static parse(F){if(F instanceof Kt)return F;if("string"!=typeof F)return;const Da=function(F){if("transparent"===(F=F.toLowerCase().trim()))return[0,0,0,0];const Da=hd[F];if(Da){const[F,ll,cl]=Da;return[F/255,ll/255,cl/255,1]}if(F.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(F)){const Da=F.length<6?1:2;let ll=1;return[Ut(F.slice(ll,ll+=Da)),Ut(F.slice(ll,ll+=Da)),Ut(F.slice(ll,ll+=Da)),Ut(F.slice(ll,ll+Da)||"ff")]}if(F.startsWith("rgb")){const Da=F.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(Da){const[F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl]=Da,Ql=[hl||" ",fl||" ",kl].join("");if("  "===Ql||"  /"===Ql||",,"===Ql||",,,"===Ql){const F=[cl,pl,bl].join(""),Da="%%%"===F?100:""===F?255:0;if(Da){const F=[Nt(+ll/Da,0,1),Nt(+dl/Da,0,1),Nt(+Al/Da,0,1),Dl?qt(+Dl,Wl):1];if(Zt(F))return F}}return}}const ll=F.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ll){const[F,Da,cl,hl,dl,pl,fl,Al,bl]=ll,kl=[cl||" ",dl||" ",fl].join("");if("  "===kl||"  /"===kl||",,"===kl||",,,"===kl){const F=[+Da,Nt(+hl,0,100),Nt(+pl,0,100),Al?qt(+Al,bl):1];if(Zt(F))return function([F,Da,ll,cl]){function i(cl){const hl=(cl+F/30)%12,dl=Da*Math.min(ll,1-ll);return ll-dl*Math.max(-1,Math.min(hl-3,9-hl,1))}return F=Tt(F),Da/=100,ll/=100,[i(0),i(8),i(4),cl]}(F)}}}(F);return Da?new Kt(...Da,!1):void 0}get rgb(){const{r:F,g:Da,b:ll,a:cl}=this,hl=cl||1/0;return this.overwriteGetter("rgb",[F/hl,Da/hl,ll/hl,cl])}get hcl(){return this.overwriteGetter("hcl",function(F){const[Da,ll,cl,hl]=$t(F),dl=Math.sqrt(ll*ll+cl*cl);return[Math.round(1e4*dl)?Tt(Math.atan2(cl,ll)*ud):NaN,dl,Da,hl]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$t(this.rgb))}overwriteGetter(F,Da){return Object.defineProperty(this,F,{value:Da}),Da}toString(){const[F,Da,ll,cl]=this.rgb;return`rgba(${[F,Da,ll].map((F=>Math.round(255*F))).join(",")},${cl})`}}Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);class Xt{constructor(F,Da,ll){this.sensitivity=F?Da?"variant":"case":Da?"accent":"base",this.locale=ll,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(F,Da){return this.collator.compare(F,Da)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ht{constructor(F,Da,ll,cl,hl){this.text=F,this.image=Da,this.scale=ll,this.fontStack=cl,this.textColor=hl}}class Yt{constructor(F){this.sections=F}static fromString(F){return new Yt([new Ht(F,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((F=>0!==F.text.length||F.image&&0!==F.image.name.length))}static factory(F){return F instanceof Yt?F:Yt.fromString(F)}toString(){return 0===this.sections.length?"":this.sections.map((F=>F.text)).join("")}}class Jt{constructor(F){this.values=F.slice()}static parse(F){if(F instanceof Jt)return F;if("number"==typeof F)return new Jt([F,F,F,F]);if(Array.isArray(F)&&!(F.length<1||F.length>4)){for(const Da of F)if("number"!=typeof Da)return;switch(F.length){case 1:F=[F[0],F[0],F[0],F[0]];break;case 2:F=[F[0],F[1],F[0],F[1]];break;case 3:F=[F[0],F[1],F[2],F[1]]}return new Jt(F)}}toString(){return JSON.stringify(this.values)}}const dd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qt{constructor(F){this.values=F.slice()}static parse(F){if(F instanceof Qt)return F;if(Array.isArray(F)&&!(F.length<1)&&F.length%2==0){for(let Da=0;Da<F.length;Da+=2){const ll=F[Da],cl=F[Da+1];if("string"!=typeof ll||!dd.has(ll))return;if(!Array.isArray(cl)||2!==cl.length||"number"!=typeof cl[0]||"number"!=typeof cl[1])return}return new Qt(F)}}toString(){return JSON.stringify(this.values)}}class te{constructor(F){this.name=F.name,this.available=F.available}toString(){return this.name}static fromString(F){return F?new te({name:F,available:!1}):null}}function ee(F,Da,ll,cl){return"number"==typeof F&&F>=0&&F<=255&&"number"==typeof Da&&Da>=0&&Da<=255&&"number"==typeof ll&&ll>=0&&ll<=255?void 0===cl||"number"==typeof cl&&cl>=0&&cl<=1?null:`Invalid rgba value [${[F,Da,ll,cl].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof cl?[F,Da,ll,cl]:[F,Da,ll]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function re(F){if(null===F||"string"==typeof F||"boolean"==typeof F||"number"==typeof F||F instanceof Kt||F instanceof Xt||F instanceof Yt||F instanceof Jt||F instanceof Qt||F instanceof te)return!0;if(Array.isArray(F)){for(const Da of F)if(!re(Da))return!1;return!0}if("object"==typeof F){for(const Da in F)if(!re(F[Da]))return!1;return!0}return!1}function ne(F){if(null===F)return cu;if("string"==typeof F)return hu;if("boolean"==typeof F)return Lu;if("number"==typeof F)return uu;if(F instanceof Kt)return zu;if(F instanceof Xt)return qu;if(F instanceof Yt)return ih;if(F instanceof Jt)return gh;if(F instanceof Qt)return td;if(F instanceof te)return ed;if(Array.isArray(F)){const Da=F.length;let ll;for(const cl of F){const F=ne(cl);if(ll){if(ll===F)continue;ll=Nu;break}ll=F}return bt(ll||Nu,Da)}return Du}function ie(F){const Da=typeof F;return null===F?"":"string"===Da||"number"===Da||"boolean"===Da?String(F):F instanceof Kt||F instanceof Yt||F instanceof Jt||F instanceof Qt||F instanceof te?F.toString():JSON.stringify(F)}class se{constructor(F,Da){this.type=F,this.value=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'literal' expression requires exactly one argument, but found ${F.length-1} instead.`);if(!re(F[1]))return Da.error("invalid value");const ll=F[1];let cl=ne(ll);const hl=Da.expectedType;return"array"!==cl.kind||0!==cl.N||!hl||"array"!==hl.kind||"number"==typeof hl.N&&0!==hl.N||(cl=hl),new se(cl,ll)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ae{constructor(F){this.name="ExpressionEvaluationError",this.message=F}toJSON(){return this.message}}const pd={string:hu,number:uu,boolean:Lu,object:Du};class le{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");let ll,cl=1;const hl=F[0];if("array"===hl){let hl,dl;if(F.length>2){const ll=F[1];if("string"!=typeof ll||!(ll in pd)||"object"===ll)return Da.error('The item type argument of "array" must be one of string, number, boolean',1);hl=pd[ll],cl++}else hl=Nu;if(F.length>3){if(null!==F[2]&&("number"!=typeof F[2]||F[2]<0||F[2]!==Math.floor(F[2])))return Da.error('The length argument to "array" must be a positive integer literal',2);dl=F[2],cl++}ll=bt(hl,dl)}else{if(!pd[hl])throw new Error(`Types doesn't contain name = ${hl}`);ll=pd[hl]}const dl=[];for(;cl<F.length;cl++){const ll=Da.parse(F[cl],cl,Nu);if(!ll)return null;dl.push(ll)}return new le(ll,dl)}evaluate(F){for(let Da=0;Da<this.args.length;Da++){const ll=this.args[Da].evaluate(F);if(!At(this.type,ne(ll)))return ll;if(Da===this.args.length-1)throw new ae(`Expected value to be of type ${wt(this.type)}, but found ${wt(ne(ll))} instead.`)}throw new Error}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}const md={"to-boolean":Lu,"to-color":zu,"to-number":uu,"to-string":hu};class ce{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");const ll=F[0];if(!md[ll])throw new Error(`Can't parse ${ll} as it is not part of the known types`);if(("to-boolean"===ll||"to-string"===ll)&&2!==F.length)return Da.error("Expected one argument.");const cl=md[ll],hl=[];for(let dl=1;dl<F.length;dl++){const ll=Da.parse(F[dl],dl,Nu);if(!ll)return null;hl.push(ll)}return new ce(cl,hl)}evaluate(F){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(F));case"color":{let Da,ll;for(const cl of this.args){if(Da=cl.evaluate(F),ll=null,Da instanceof Kt)return Da;if("string"==typeof Da){const ll=F.parseColor(Da);if(ll)return ll}else if(Array.isArray(Da)&&(ll=Da.length<3||Da.length>4?`Invalid rbga value ${JSON.stringify(Da)}: expected an array containing either three or four numeric values.`:ee(Da[0],Da[1],Da[2],Da[3]),!ll))return new Kt(Da[0]/255,Da[1]/255,Da[2]/255,Da[3])}throw new ae(ll||`Could not parse color from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"padding":{let Da;for(const ll of this.args){Da=ll.evaluate(F);const cl=Jt.parse(Da);if(cl)return cl}throw new ae(`Could not parse padding from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"variableAnchorOffsetCollection":{let Da;for(const ll of this.args){Da=ll.evaluate(F);const cl=Qt.parse(Da);if(cl)return cl}throw new ae(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof Da?Da:JSON.stringify(Da)}'`)}case"number":{let Da=null;for(const ll of this.args){if(Da=ll.evaluate(F),null===Da)return 0;const cl=Number(Da);if(!isNaN(cl))return cl}throw new ae(`Could not convert ${JSON.stringify(Da)} to number.`)}case"formatted":return Yt.fromString(ie(this.args[0].evaluate(F)));case"resolvedImage":return te.fromString(ie(this.args[0].evaluate(F)));default:return ie(this.args[0].evaluate(F))}}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}const fd=["Unknown","Point","LineString","Polygon"];class pe{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?fd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(F){let Da=this._parseColorCache[F];return Da||(Da=this._parseColorCache[F]=Kt.parse(F)),Da}}class fe{constructor(F,Da,ll=[],cl,hl=new ot,dl=[]){this.registry=F,this.path=ll,this.key=ll.map((F=>`[${F}]`)).join(""),this.scope=hl,this.errors=dl,this.expectedType=cl,this._isConstant=Da}parse(F,Da,ll,cl,hl={}){return Da?this.concat(Da,ll,cl)._parse(F,hl):this._parse(F,hl)}_parse(F,Da){function r(F,Da,ll){return"assert"===ll?new le(Da,[F]):"coerce"===ll?new ce(Da,[F]):F}if(null!==F&&"string"!=typeof F&&"boolean"!=typeof F&&"number"!=typeof F||(F=["literal",F]),Array.isArray(F)){if(0===F.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ll=F[0];if("string"!=typeof ll)return this.error(`Expression name must be a string, but found ${typeof ll} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const cl=this.registry[ll];if(cl){let ll=cl.parse(F,this);if(!ll)return null;if(this.expectedType){const F=this.expectedType,cl=ll.type;if("string"!==F.kind&&"number"!==F.kind&&"boolean"!==F.kind&&"object"!==F.kind&&"array"!==F.kind||"value"!==cl.kind)if("color"!==F.kind&&"formatted"!==F.kind&&"resolvedImage"!==F.kind||"value"!==cl.kind&&"string"!==cl.kind)if("padding"!==F.kind||"value"!==cl.kind&&"number"!==cl.kind&&"array"!==cl.kind)if("variableAnchorOffsetCollection"!==F.kind||"value"!==cl.kind&&"array"!==cl.kind){if(this.checkSubtype(F,cl))return null}else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"coerce");else ll=r(ll,F,Da.typeAnnotation||"assert")}if(!(ll instanceof se)&&"resolvedImage"!==ll.type.kind&&this._isConstant(ll)){const Da=new pe;try{ll=new se(ll.type,ll.evaluate(Da))}catch(F){return this.error(F.message),null}}return ll}return this.error(`Unknown expression "${ll}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===F?"'undefined' value invalid. Use null instead.":"object"==typeof F?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof F} instead.`)}concat(F,Da,ll){const cl="number"==typeof F?this.path.concat(F):this.path,hl=ll?this.scope.concat(ll):this.scope;return new fe(this.registry,this._isConstant,cl,Da||null,hl,this.errors)}error(F,...Da){const ll=`${this.key}${Da.map((F=>`[${F}]`)).join("")}`;this.errors.push(new at(ll,F))}checkSubtype(F,Da){const ll=At(F,Da);return ll&&this.error(ll),ll}}class de{constructor(F,Da){this.type=Da.type,this.bindings=[].concat(F),this.result=Da}evaluate(F){return this.result.evaluate(F)}eachChild(F){for(const Da of this.bindings)F(Da[1]);F(this.result)}static parse(F,Da){if(F.length<4)return Da.error(`Expected at least 3 arguments, but found ${F.length-1} instead.`);const ll=[];for(let hl=1;hl<F.length-1;hl+=2){const cl=F[hl];if("string"!=typeof cl)return Da.error(`Expected string, but found ${typeof cl} instead.`,hl);if(/[^a-zA-Z0-9_]/.test(cl))return Da.error("Variable names must contain only alphanumeric characters or '_'.",hl);const dl=Da.parse(F[hl+1],hl+1);if(!dl)return null;ll.push([cl,dl])}const cl=Da.parse(F[F.length-1],F.length-1,Da.expectedType,ll);return cl?new de(ll,cl):null}outputDefined(){return this.result.outputDefined()}}class ye{constructor(F,Da){this.type=Da.type,this.name=F,this.boundExpression=Da}static parse(F,Da){if(2!==F.length||"string"!=typeof F[1])return Da.error("'var' expression requires exactly one string literal argument.");const ll=F[1];return Da.scope.has(ll)?new ye(ll,Da.scope.get(ll)):Da.error(`Unknown variable "${ll}". Make sure "${ll}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(F){return this.boundExpression.evaluate(F)}eachChild(){}outputDefined(){return!1}}class me{constructor(F,Da,ll){this.type=F,this.index=Da,this.input=ll}static parse(F,Da){if(3!==F.length)return Da.error(`Expected 2 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,uu),cl=Da.parse(F[2],2,bt(Da.expectedType||Nu));return ll&&cl?new me(cl.type.itemType,ll,cl):null}evaluate(F){const Da=this.index.evaluate(F),ll=this.input.evaluate(F);if(Da<0)throw new ae(`Array index out of bounds: ${Da} < 0.`);if(Da>=ll.length)throw new ae(`Array index out of bounds: ${Da} > ${ll.length-1}.`);if(Da!==Math.floor(Da))throw new ae(`Array index must be an integer, but found ${Da} instead.`);return ll[Da]}eachChild(F){F(this.index),F(this.input)}outputDefined(){return!1}}class ge{constructor(F,Da){this.type=Lu,this.needle=F,this.haystack=Da}static parse(F,Da){if(3!==F.length)return Da.error(`Expected 2 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,Nu),cl=Da.parse(F[2],2,Nu);return ll&&cl?St(ll.type,[Lu,hu,uu,cu,Nu])?new ge(ll,cl):Da.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(ll.type)} instead`):null}evaluate(F){const Da=this.needle.evaluate(F),ll=this.haystack.evaluate(F);if(!ll)return!1;if(!kt(Da,["boolean","string","number","null"]))throw new ae(`Expected first argument to be of type boolean, string, number or null, but found ${wt(ne(Da))} instead.`);if(!kt(ll,["string","array"]))throw new ae(`Expected second argument to be of type array or string, but found ${wt(ne(ll))} instead.`);return ll.indexOf(Da)>=0}eachChild(F){F(this.needle),F(this.haystack)}outputDefined(){return!0}}class xe{constructor(F,Da,ll){this.type=uu,this.needle=F,this.haystack=Da,this.fromIndex=ll}static parse(F,Da){if(F.length<=2||F.length>=5)return Da.error(`Expected 3 or 4 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,Nu),cl=Da.parse(F[2],2,Nu);if(!ll||!cl)return null;if(!St(ll.type,[Lu,hu,uu,cu,Nu]))return Da.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(ll.type)} instead`);if(4===F.length){const hl=Da.parse(F[3],3,uu);return hl?new xe(ll,cl,hl):null}return new xe(ll,cl)}evaluate(F){const Da=this.needle.evaluate(F),ll=this.haystack.evaluate(F);if(!kt(Da,["boolean","string","number","null"]))throw new ae(`Expected first argument to be of type boolean, string, number or null, but found ${wt(ne(Da))} instead.`);let cl;if(this.fromIndex&&(cl=this.fromIndex.evaluate(F)),kt(ll,["string"])){const F=ll.indexOf(Da,cl);return-1===F?-1:[...ll.slice(0,F)].length}if(kt(ll,["array"]))return ll.indexOf(Da,cl);throw new ae(`Expected second argument to be of type array or string, but found ${wt(ne(ll))} instead.`)}eachChild(F){F(this.needle),F(this.haystack),this.fromIndex&&F(this.fromIndex)}outputDefined(){return!1}}class ve{constructor(F,Da,ll,cl,hl,dl){this.inputType=F,this.type=Da,this.input=ll,this.cases=cl,this.outputs=hl,this.otherwise=dl}static parse(F,Da){if(F.length<5)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if(F.length%2!=1)return Da.error("Expected an even number of arguments.");let ll,cl;Da.expectedType&&"value"!==Da.expectedType.kind&&(cl=Da.expectedType);const hl={},dl=[];for(let Al=2;Al<F.length-1;Al+=2){let pl=F[Al];const fl=F[Al+1];Array.isArray(pl)||(pl=[pl]);const bl=Da.concat(Al);if(0===pl.length)return bl.error("Expected at least one branch label.");for(const F of pl){if("number"!=typeof F&&"string"!=typeof F)return bl.error("Branch labels must be numbers or strings.");if("number"==typeof F&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return bl.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof F&&Math.floor(F)!==F)return bl.error("Numeric branch labels must be integer values.");if(ll){if(bl.checkSubtype(ll,ne(F)))return null}else ll=ne(F);if(void 0!==hl[String(F)])return bl.error("Branch labels must be unique.");hl[String(F)]=dl.length}const kl=Da.parse(fl,Al,cl);if(!kl)return null;cl=cl||kl.type,dl.push(kl)}const pl=Da.parse(F[1],1,Nu);if(!pl)return null;const fl=Da.parse(F[F.length-1],F.length-1,cl);return fl?"value"!==pl.type.kind&&Da.concat(1).checkSubtype(ll,pl.type)?null:new ve(ll,cl,pl,hl,dl,fl):null}evaluate(F){const Da=this.input.evaluate(F);return(ne(Da)===this.inputType&&this.outputs[this.cases[Da]]||this.otherwise).evaluate(F)}eachChild(F){F(this.input),this.outputs.forEach(F),F(this.otherwise)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))&&this.otherwise.outputDefined()}}class be{constructor(F,Da,ll){this.type=F,this.branches=Da,this.otherwise=ll}static parse(F,Da){if(F.length<4)return Da.error(`Expected at least 3 arguments, but found only ${F.length-1}.`);if(F.length%2!=0)return Da.error("Expected an odd number of arguments.");let ll;Da.expectedType&&"value"!==Da.expectedType.kind&&(ll=Da.expectedType);const cl=[];for(let dl=1;dl<F.length-1;dl+=2){const hl=Da.parse(F[dl],dl,Lu);if(!hl)return null;const pl=Da.parse(F[dl+1],dl+1,ll);if(!pl)return null;cl.push([hl,pl]),ll=ll||pl.type}const hl=Da.parse(F[F.length-1],F.length-1,ll);if(!hl)return null;if(!ll)throw new Error("Can't infer output type");return new be(ll,cl,hl)}evaluate(F){for(const[Da,ll]of this.branches)if(Da.evaluate(F))return ll.evaluate(F);return this.otherwise.evaluate(F)}eachChild(F){for(const[Da,ll]of this.branches)F(Da),F(ll);F(this.otherwise)}outputDefined(){return this.branches.every((([F,Da])=>Da.outputDefined()))&&this.otherwise.outputDefined()}}class we{constructor(F,Da,ll,cl){this.type=F,this.input=Da,this.beginIndex=ll,this.endIndex=cl}static parse(F,Da){if(F.length<=2||F.length>=5)return Da.error(`Expected 3 or 4 arguments, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1,Nu),cl=Da.parse(F[2],2,uu);if(!ll||!cl)return null;if(!St(ll.type,[bt(Nu),hu,Nu]))return Da.error(`Expected first argument to be of type array or string, but found ${wt(ll.type)} instead`);if(4===F.length){const hl=Da.parse(F[3],3,uu);return hl?new we(ll.type,ll,cl,hl):null}return new we(ll.type,ll,cl)}evaluate(F){const Da=this.input.evaluate(F),ll=this.beginIndex.evaluate(F);let cl;if(this.endIndex&&(cl=this.endIndex.evaluate(F)),kt(Da,["string"]))return[...Da].slice(ll,cl).join("");if(kt(Da,["array"]))return Da.slice(ll,cl);throw new ae(`Expected first argument to be of type array or string, but found ${wt(ne(Da))} instead.`)}eachChild(F){F(this.input),F(this.beginIndex),this.endIndex&&F(this.endIndex)}outputDefined(){return!1}}function _e(F,Da){const ll=F.length-1;let cl,hl,dl=0,pl=ll,fl=0;for(;dl<=pl;)if(fl=Math.floor((dl+pl)/2),cl=F[fl],hl=F[fl+1],cl<=Da){if(fl===ll||Da<hl)return fl;dl=fl+1}else{if(!(cl>Da))throw new ae("Input is not a number.");pl=fl-1}return 0}class Ae{constructor(F,Da,ll){this.type=F,this.input=Da,this.labels=[],this.outputs=[];for(const[cl,hl]of ll)this.labels.push(cl),this.outputs.push(hl)}static parse(F,Da){if(F.length-1<4)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if((F.length-1)%2!=0)return Da.error("Expected an even number of arguments.");const ll=Da.parse(F[1],1,uu);if(!ll)return null;const cl=[];let hl=null;Da.expectedType&&"value"!==Da.expectedType.kind&&(hl=Da.expectedType);for(let dl=1;dl<F.length;dl+=2){const ll=1===dl?-1/0:F[dl],pl=F[dl+1],fl=dl,Al=dl+1;if("number"!=typeof ll)return Da.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fl);if(cl.length&&cl[cl.length-1][0]>=ll)return Da.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',fl);const bl=Da.parse(pl,Al,hl);if(!bl)return null;hl=hl||bl.type,cl.push([ll,bl])}return new Ae(hl,ll,cl)}evaluate(F){const Da=this.labels,ll=this.outputs;if(1===Da.length)return ll[0].evaluate(F);const cl=this.input.evaluate(F);if(cl<=Da[0])return ll[0].evaluate(F);const hl=Da.length;return cl>=Da[hl-1]?ll[hl-1].evaluate(F):ll[_e(Da,cl)].evaluate(F)}eachChild(F){F(this.input);for(const Da of this.outputs)F(Da)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))}}function Se(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}var gd=Me;function Me(F,Da,ll,cl){this.cx=3*F,this.bx=3*(ll-F)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Da,this.by=3*(cl-Da)-this.cy,this.ay=1-this.cy-this.by,this.p1x=F,this.p1y=Da,this.p2x=ll,this.p2y=cl}Me.prototype={sampleCurveX:function(F){return((this.ax*F+this.bx)*F+this.cx)*F},sampleCurveY:function(F){return((this.ay*F+this.by)*F+this.cy)*F},sampleCurveDerivativeX:function(F){return(3*this.ax*F+2*this.bx)*F+this.cx},solveCurveX:function(F,Da){if(void 0===Da&&(Da=1e-6),F<0)return 0;if(F>1)return 1;for(var ll=F,cl=0;cl<8;cl++){var hl=this.sampleCurveX(ll)-F;if(Math.abs(hl)<Da)return ll;var dl=this.sampleCurveDerivativeX(ll);if(Math.abs(dl)<1e-6)break;ll-=hl/dl}var pl=0,fl=1;for(ll=F,cl=0;cl<20&&(hl=this.sampleCurveX(ll),!(Math.abs(hl-F)<Da));cl++)F>hl?pl=ll:fl=ll,ll=.5*(fl-pl)+pl;return ll},solve:function(F,Da){return this.sampleCurveY(this.solveCurveX(F,Da))}};var Ad=Se(gd);function ze(F,Da,ll){return F+ll*(Da-F)}function Pe(F,Da,ll){return F.map(((F,cl)=>ze(F,Da[cl],ll)))}const yd={number:ze,color:function(F,Da,ll,cl="rgb"){switch(cl){case"rgb":{const[cl,hl,dl,pl]=Pe(F.rgb,Da.rgb,ll);return new Kt(cl,hl,dl,pl,!1)}case"hcl":{const[cl,hl,dl,pl]=F.hcl,[fl,Al,bl,kl]=Da.hcl;let Dl,Wl;if(isNaN(cl)||isNaN(fl))isNaN(cl)?isNaN(fl)?Dl=NaN:(Dl=fl,1!==dl&&0!==dl||(Wl=Al)):(Dl=cl,1!==bl&&0!==bl||(Wl=hl));else{let F=fl-cl;fl>cl&&F>180?F-=360:fl<cl&&cl-fl>180&&(F+=360),Dl=cl+ll*F}const[Ql,wc,Sc,eu]=function([F,Da,ll,cl]){return F=isNaN(F)?0:F*cd,Ot([ll,Math.cos(F)*Da,Math.sin(F)*Da,cl])}([Dl,null!=Wl?Wl:ze(hl,Al,ll),ze(dl,bl,ll),ze(pl,kl,ll)]);return new Kt(Ql,wc,Sc,eu,!1)}case"lab":{const[cl,hl,dl,pl]=Ot(Pe(F.lab,Da.lab,ll));return new Kt(cl,hl,dl,pl,!1)}}},array:Pe,padding:function(F,Da,ll){return new Jt(Pe(F.values,Da.values,ll))},variableAnchorOffsetCollection:function(F,Da,ll){const cl=F.values,hl=Da.values;if(cl.length!==hl.length)throw new ae(`Cannot interpolate values of different length. from: ${F.toString()}, to: ${Da.toString()}`);const dl=[];for(let pl=0;pl<cl.length;pl+=2){if(cl[pl]!==hl[pl])throw new ae(`Cannot interpolate values containing mismatched anchors. from[${pl}]: ${cl[pl]}, to[${pl}]: ${hl[pl]}`);dl.push(cl[pl]);const[F,Da]=cl[pl+1],[fl,Al]=hl[pl+1];dl.push([ze(F,fl,ll),ze(Da,Al,ll)])}return new Qt(dl)}};class Be{constructor(F,Da,ll,cl,hl){this.type=F,this.operator=Da,this.interpolation=ll,this.input=cl,this.labels=[],this.outputs=[];for(const[dl,pl]of hl)this.labels.push(dl),this.outputs.push(pl)}static interpolationFactor(F,Da,ll,cl){let hl=0;if("exponential"===F.name)hl=Ve(Da,F.base,ll,cl);else if("linear"===F.name)hl=Ve(Da,1,ll,cl);else if("cubic-bezier"===F.name){const dl=F.controlPoints;hl=new Ad(dl[0],dl[1],dl[2],dl[3]).solve(Ve(Da,1,ll,cl))}return hl}static parse(F,Da){let[ll,cl,hl,...dl]=F;if(!Array.isArray(cl)||0===cl.length)return Da.error("Expected an interpolation type expression.",1);if("linear"===cl[0])cl={name:"linear"};else if("exponential"===cl[0]){const F=cl[1];if("number"!=typeof F)return Da.error("Exponential interpolation requires a numeric base.",1,1);cl={name:"exponential",base:F}}else{if("cubic-bezier"!==cl[0])return Da.error(`Unknown interpolation type ${String(cl[0])}`,1,0);{const F=cl.slice(1);if(4!==F.length||F.some((F=>"number"!=typeof F||F<0||F>1)))return Da.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);cl={name:"cubic-bezier",controlPoints:F}}}if(F.length-1<4)return Da.error(`Expected at least 4 arguments, but found only ${F.length-1}.`);if((F.length-1)%2!=0)return Da.error("Expected an even number of arguments.");if(hl=Da.parse(hl,2,uu),!hl)return null;const pl=[];let fl=null;"interpolate-hcl"===ll||"interpolate-lab"===ll?fl=zu:Da.expectedType&&"value"!==Da.expectedType.kind&&(fl=Da.expectedType);for(let Al=0;Al<dl.length;Al+=2){const F=dl[Al],ll=dl[Al+1],cl=Al+3,hl=Al+4;if("number"!=typeof F)return Da.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',cl);if(pl.length&&pl[pl.length-1][0]>=F)return Da.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',cl);const bl=Da.parse(ll,hl,fl);if(!bl)return null;fl=fl||bl.type,pl.push([F,bl])}return Mt(fl,uu)||Mt(fl,zu)||Mt(fl,gh)||Mt(fl,td)||Mt(fl,bt(uu))?new Be(fl,ll,cl,hl,pl):Da.error(`Type ${wt(fl)} is not interpolatable.`)}evaluate(F){const Da=this.labels,ll=this.outputs;if(1===Da.length)return ll[0].evaluate(F);const cl=this.input.evaluate(F);if(cl<=Da[0])return ll[0].evaluate(F);const hl=Da.length;if(cl>=Da[hl-1])return ll[hl-1].evaluate(F);const dl=_e(Da,cl),pl=Be.interpolationFactor(this.interpolation,cl,Da[dl],Da[dl+1]),fl=ll[dl].evaluate(F),Al=ll[dl+1].evaluate(F);switch(this.operator){case"interpolate":return yd[this.type.kind](fl,Al,pl);case"interpolate-hcl":return yd.color(fl,Al,pl,"hcl");case"interpolate-lab":return yd.color(fl,Al,pl,"lab")}}eachChild(F){F(this.input);for(const Da of this.outputs)F(Da)}outputDefined(){return this.outputs.every((F=>F.outputDefined()))}}function Ve(F,Da,ll,cl){const hl=cl-ll,dl=F-ll;return 0===hl?0:1===Da?dl/hl:(Math.pow(Da,dl)-1)/(Math.pow(Da,hl)-1)}class Ee{constructor(F,Da){this.type=F,this.args=Da}static parse(F,Da){if(F.length<2)return Da.error("Expectected at least one argument.");let ll=null;const cl=Da.expectedType;cl&&"value"!==cl.kind&&(ll=cl);const hl=[];for(const pl of F.slice(1)){const F=Da.parse(pl,1+hl.length,ll,void 0,{typeAnnotation:"omit"});if(!F)return null;ll=ll||F.type,hl.push(F)}if(!ll)throw new Error("No output type");const dl=cl&&hl.some((F=>At(cl,F.type)));return new Ee(dl?Nu:ll,hl)}evaluate(F){let Da,ll=null,cl=0;for(const hl of this.args)if(cl++,ll=hl.evaluate(F),ll&&ll instanceof te&&!ll.available&&(Da||(Da=ll.name),ll=null,cl===this.args.length&&(ll=Da)),null!==ll)break;return ll}eachChild(F){this.args.forEach(F)}outputDefined(){return this.args.every((F=>F.outputDefined()))}}function Fe(F,Da){return"=="===F||"!="===F?"boolean"===Da.kind||"string"===Da.kind||"number"===Da.kind||"null"===Da.kind||"value"===Da.kind:"string"===Da.kind||"number"===Da.kind||"value"===Da.kind}function Te(F,Da,ll,cl){return 0===cl.compare(Da,ll)}function $e(F,Da,ll){const cl="=="!==F&&"!="!==F;return class i{constructor(F,Da,ll){this.type=Lu,this.lhs=F,this.rhs=Da,this.collator=ll,this.hasUntypedArgument="value"===F.type.kind||"value"===Da.type.kind}static parse(F,Da){if(3!==F.length&&4!==F.length)return Da.error("Expected two or three arguments.");const ll=F[0];let hl=Da.parse(F[1],1,Nu);if(!hl)return null;if(!Fe(ll,hl.type))return Da.concat(1).error(`"${ll}" comparisons are not supported for type '${wt(hl.type)}'.`);let dl=Da.parse(F[2],2,Nu);if(!dl)return null;if(!Fe(ll,dl.type))return Da.concat(2).error(`"${ll}" comparisons are not supported for type '${wt(dl.type)}'.`);if(hl.type.kind!==dl.type.kind&&"value"!==hl.type.kind&&"value"!==dl.type.kind)return Da.error(`Cannot compare types '${wt(hl.type)}' and '${wt(dl.type)}'.`);cl&&("value"===hl.type.kind&&"value"!==dl.type.kind?hl=new le(dl.type,[hl]):"value"!==hl.type.kind&&"value"===dl.type.kind&&(dl=new le(hl.type,[dl])));let pl=null;if(4===F.length){if("string"!==hl.type.kind&&"string"!==dl.type.kind&&"value"!==hl.type.kind&&"value"!==dl.type.kind)return Da.error("Cannot use collator to compare non-string types.");if(pl=Da.parse(F[3],3,qu),!pl)return null}return new i(hl,dl,pl)}evaluate(hl){const dl=this.lhs.evaluate(hl),pl=this.rhs.evaluate(hl);if(cl&&this.hasUntypedArgument){const Da=ne(dl),ll=ne(pl);if(Da.kind!==ll.kind||"string"!==Da.kind&&"number"!==Da.kind)throw new ae(`Expected arguments for "${F}" to be (string, string) or (number, number), but found (${Da.kind}, ${ll.kind}) instead.`)}if(this.collator&&!cl&&this.hasUntypedArgument){const F=ne(dl),ll=ne(pl);if("string"!==F.kind||"string"!==ll.kind)return Da(hl,dl,pl)}return this.collator?ll(hl,dl,pl,this.collator.evaluate(hl)):Da(hl,dl,pl)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}}}const vd=$e("==",(function(F,Da,ll){return Da===ll}),Te),_d=$e("!=",(function(F,Da,ll){return Da!==ll}),(function(F,Da,ll,cl){return!Te(0,Da,ll,cl)})),xd=$e("<",(function(F,Da,ll){return Da<ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)<0})),bd=$e(">",(function(F,Da,ll){return Da>ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)>0})),wd=$e("<=",(function(F,Da,ll){return Da<=ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)<=0})),Ed=$e(">=",(function(F,Da,ll){return Da>=ll}),(function(F,Da,ll,cl){return cl.compare(Da,ll)>=0}));class qe{constructor(F,Da,ll){this.type=qu,this.locale=ll,this.caseSensitive=F,this.diacriticSensitive=Da}static parse(F,Da){if(2!==F.length)return Da.error("Expected one argument.");const ll=F[1];if("object"!=typeof ll||Array.isArray(ll))return Da.error("Collator options argument must be an object.");const cl=Da.parse(void 0!==ll["case-sensitive"]&&ll["case-sensitive"],1,Lu);if(!cl)return null;const hl=Da.parse(void 0!==ll["diacritic-sensitive"]&&ll["diacritic-sensitive"],1,Lu);if(!hl)return null;let dl=null;return ll.locale&&(dl=Da.parse(ll.locale,1,hu),!dl)?null:new qe(cl,hl,dl)}evaluate(F){return new Xt(this.caseSensitive.evaluate(F),this.diacriticSensitive.evaluate(F),this.locale?this.locale.evaluate(F):null)}eachChild(F){F(this.caseSensitive),F(this.diacriticSensitive),this.locale&&F(this.locale)}outputDefined(){return!1}}class Ne{constructor(F,Da,ll,cl,hl){this.type=hu,this.number=F,this.locale=Da,this.currency=ll,this.minFractionDigits=cl,this.maxFractionDigits=hl}static parse(F,Da){if(3!==F.length)return Da.error("Expected two arguments.");const ll=Da.parse(F[1],1,uu);if(!ll)return null;const cl=F[2];if("object"!=typeof cl||Array.isArray(cl))return Da.error("NumberFormat options argument must be an object.");let hl=null;if(cl.locale&&(hl=Da.parse(cl.locale,1,hu),!hl))return null;let dl=null;if(cl.currency&&(dl=Da.parse(cl.currency,1,hu),!dl))return null;let pl=null;if(cl["min-fraction-digits"]&&(pl=Da.parse(cl["min-fraction-digits"],1,uu),!pl))return null;let fl=null;return cl["max-fraction-digits"]&&(fl=Da.parse(cl["max-fraction-digits"],1,uu),!fl)?null:new Ne(ll,hl,dl,pl,fl)}evaluate(F){return new Intl.NumberFormat(this.locale?this.locale.evaluate(F):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(F):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(F):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(F):void 0}).format(this.number.evaluate(F))}eachChild(F){F(this.number),this.locale&&F(this.locale),this.currency&&F(this.currency),this.minFractionDigits&&F(this.minFractionDigits),this.maxFractionDigits&&F(this.maxFractionDigits)}outputDefined(){return!1}}class Ze{constructor(F){this.type=ih,this.sections=F}static parse(F,Da){if(F.length<2)return Da.error("Expected at least one argument.");const ll=F[1];if(!Array.isArray(ll)&&"object"==typeof ll)return Da.error("First argument must be an image or text section.");const cl=[];let hl=!1;for(let dl=1;dl<=F.length-1;++dl){const ll=F[dl];if(hl&&"object"==typeof ll&&!Array.isArray(ll)){hl=!1;let F=null;if(ll["font-scale"]&&(F=Da.parse(ll["font-scale"],1,uu),!F))return null;let dl=null;if(ll["text-font"]&&(dl=Da.parse(ll["text-font"],1,bt(hu)),!dl))return null;let pl=null;if(ll["text-color"]&&(pl=Da.parse(ll["text-color"],1,zu),!pl))return null;const fl=cl[cl.length-1];fl.scale=F,fl.font=dl,fl.textColor=pl}else{const ll=Da.parse(F[dl],1,Nu);if(!ll)return null;const pl=ll.type.kind;if("string"!==pl&&"value"!==pl&&"null"!==pl&&"resolvedImage"!==pl)return Da.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");hl=!0,cl.push({content:ll,scale:null,font:null,textColor:null})}}return new Ze(cl)}evaluate(F){return new Yt(this.sections.map((Da=>{const ll=Da.content.evaluate(F);return ne(ll)===ed?new Ht("",ll,null,null,null):new Ht(ie(ll),null,Da.scale?Da.scale.evaluate(F):null,Da.font?Da.font.evaluate(F).join(","):null,Da.textColor?Da.textColor.evaluate(F):null)})))}eachChild(F){for(const Da of this.sections)F(Da.content),Da.scale&&F(Da.scale),Da.font&&F(Da.font),Da.textColor&&F(Da.textColor)}outputDefined(){return!1}}class Ge{constructor(F){this.type=ed,this.input=F}static parse(F,Da){if(2!==F.length)return Da.error("Expected two arguments.");const ll=Da.parse(F[1],1,hu);return ll?new Ge(ll):Da.error("No image name provided.")}evaluate(F){const Da=this.input.evaluate(F),ll=te.fromString(Da);return ll&&F.availableImages&&(ll.available=F.availableImages.indexOf(Da)>-1),ll}eachChild(F){F(this.input)}outputDefined(){return!1}}class Ke{constructor(F){this.type=uu,this.input=F}static parse(F,Da){if(2!==F.length)return Da.error(`Expected 1 argument, but found ${F.length-1} instead.`);const ll=Da.parse(F[1],1);return ll?"array"!==ll.type.kind&&"string"!==ll.type.kind&&"value"!==ll.type.kind?Da.error(`Expected argument of type string or array, but found ${wt(ll.type)} instead.`):new Ke(ll):null}evaluate(F){const Da=this.input.evaluate(F);if("string"==typeof Da)return[...Da].length;if(Array.isArray(Da))return Da.length;throw new ae(`Expected value to be of type string or array, but found ${wt(ne(Da))} instead.`)}eachChild(F){F(this.input)}outputDefined(){return!1}}const Md=8192;function He(F,Da){const ll=(180+F[0])/360,cl=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+F[1]*Math.PI/360)))/360,hl=Math.pow(2,Da.z);return[Math.round(ll*hl*Md),Math.round(cl*hl*Md)]}function Ye(F,Da){const ll=Math.pow(2,Da.z);return[(hl=(F[0]/Md+Da.x)/ll,360*hl-180),(cl=(F[1]/Md+Da.y)/ll,360/Math.PI*Math.atan(Math.exp((180-360*cl)*Math.PI/180))-90)];var cl,hl}function Je(F,Da){F[0]=Math.min(F[0],Da[0]),F[1]=Math.min(F[1],Da[1]),F[2]=Math.max(F[2],Da[0]),F[3]=Math.max(F[3],Da[1])}function We(F,Da){return!(F[0]<=Da[0]||F[2]>=Da[2]||F[1]<=Da[1]||F[3]>=Da[3])}function Qe(F,Da,ll){const cl=F[0]-Da[0],hl=F[1]-Da[1],dl=F[0]-ll[0],pl=F[1]-ll[1];return cl*pl-dl*hl==0&&cl*dl<=0&&hl*pl<=0}function tr(F,Da,ll,cl){return 0!=(hl=[cl[0]-ll[0],cl[1]-ll[1]])[0]*(dl=[Da[0]-F[0],Da[1]-F[1]])[1]-hl[1]*dl[0]&&!(!ar(F,Da,ll,cl)||!ar(ll,cl,F,Da));var hl,dl}function er(F,Da,ll){for(const cl of ll)for(let ll=0;ll<cl.length-1;++ll)if(tr(F,Da,cl[ll],cl[ll+1]))return!0;return!1}function rr(F,Da,ll=!1){let cl=!1;for(const fl of Da)for(let Da=0;Da<fl.length-1;Da++){if(Qe(F,fl[Da],fl[Da+1]))return ll;(dl=fl[Da])[1]>(hl=F)[1]!=(pl=fl[Da+1])[1]>hl[1]&&hl[0]<(pl[0]-dl[0])*(hl[1]-dl[1])/(pl[1]-dl[1])+dl[0]&&(cl=!cl)}var hl,dl,pl;return cl}function nr(F,Da){for(const ll of Da)if(rr(F,ll))return!0;return!1}function ir(F,Da){for(const ll of F)if(!rr(ll,Da))return!1;for(let ll=0;ll<F.length-1;++ll)if(er(F[ll],F[ll+1],Da))return!1;return!0}function sr(F,Da){for(const ll of Da)if(ir(F,ll))return!0;return!1}function ar(F,Da,ll,cl){const hl=cl[0]-ll[0],dl=cl[1]-ll[1],pl=(F[0]-ll[0])*dl-hl*(F[1]-ll[1]),fl=(Da[0]-ll[0])*dl-hl*(Da[1]-ll[1]);return pl>0&&fl<0||pl<0&&fl>0}function or(F,Da,ll){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=[];for(let cl=0;cl<F[hl].length;cl++){const pl=He(F[hl][cl],ll);Je(Da,pl),dl.push(pl)}cl.push(dl)}return cl}function lr(F,Da,ll){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=or(F[hl],Da,ll);cl.push(dl)}return cl}function ur(F,Da,ll,cl){if(F[0]<ll[0]||F[0]>ll[2]){const Da=.5*cl;let hl=F[0]-ll[0]>Da?-cl:ll[0]-F[0]>Da?cl:0;0===hl&&(hl=F[0]-ll[2]>Da?-cl:ll[2]-F[0]>Da?cl:0),F[0]+=hl}Je(Da,F)}function cr(F,Da,ll,cl){const hl=Math.pow(2,cl.z)*Md,dl=[cl.x*Md,cl.y*Md],pl=[];for(const fl of F)for(const F of fl){const cl=[F.x+dl[0],F.y+dl[1]];ur(cl,Da,ll,hl),pl.push(cl)}return pl}function hr(F,Da,ll,cl){const hl=Math.pow(2,cl.z)*Md,dl=[cl.x*Md,cl.y*Md],pl=[];for(const Al of F){const F=[];for(const ll of Al){const cl=[ll.x+dl[0],ll.y+dl[1]];Je(Da,cl),F.push(cl)}pl.push(F)}if(Da[2]-Da[0]<=hl/2){(fl=Da)[0]=fl[1]=1/0,fl[2]=fl[3]=-1/0;for(const F of pl)for(const cl of F)ur(cl,Da,ll,hl)}var fl;return pl}class pr{constructor(F,Da){this.type=Lu,this.geojson=F,this.geometries=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'within' expression requires exactly one argument, but found ${F.length-1} instead.`);if(re(F[1])){const Da=F[1];if("FeatureCollection"===Da.type){const F=[];for(const ll of Da.features){const{type:Da,coordinates:cl}=ll.geometry;"Polygon"===Da&&F.push(cl),"MultiPolygon"===Da&&F.push(...cl)}if(F.length)return new pr(Da,{type:"MultiPolygon",coordinates:F})}else if("Feature"===Da.type){const F=Da.geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new pr(Da,Da.geometry)}else if("Polygon"===Da.type||"MultiPolygon"===Da.type)return new pr(Da,Da)}return Da.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(F){if(null!=F.geometry()&&null!=F.canonicalID()){if("Point"===F.geometryType())return function(F,Da){const ll=[1/0,1/0,-1/0,-1/0],cl=[1/0,1/0,-1/0,-1/0],hl=F.canonicalID();if("Polygon"===Da.type){const dl=or(Da.coordinates,cl,hl),pl=cr(F.geometry(),ll,cl,hl);if(!We(ll,cl))return!1;for(const F of pl)if(!rr(F,dl))return!1}if("MultiPolygon"===Da.type){const dl=lr(Da.coordinates,cl,hl),pl=cr(F.geometry(),ll,cl,hl);if(!We(ll,cl))return!1;for(const F of pl)if(!nr(F,dl))return!1}return!0}(F,this.geometries);if("LineString"===F.geometryType())return function(F,Da){const ll=[1/0,1/0,-1/0,-1/0],cl=[1/0,1/0,-1/0,-1/0],hl=F.canonicalID();if("Polygon"===Da.type){const dl=or(Da.coordinates,cl,hl),pl=hr(F.geometry(),ll,cl,hl);if(!We(ll,cl))return!1;for(const F of pl)if(!ir(F,dl))return!1}if("MultiPolygon"===Da.type){const dl=lr(Da.coordinates,cl,hl),pl=hr(F.geometry(),ll,cl,hl);if(!We(ll,cl))return!1;for(const F of pl)if(!sr(F,dl))return!1}return!0}(F,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Sd=class{constructor(F=[],Da=(F,Da)=>F<Da?-1:F>Da?1:0){if(this.data=F,this.length=this.data.length,this.compare=Da,this.length>0)for(let ll=(this.length>>1)-1;ll>=0;ll--)this._down(ll)}push(F){this.data.push(F),this._up(this.length++)}pop(){if(0===this.length)return;const F=this.data[0],Da=this.data.pop();return--this.length>0&&(this.data[0]=Da,this._down(0)),F}peek(){return this.data[0]}_up(F){const{data:Da,compare:ll}=this,cl=Da[F];for(;F>0;){const hl=F-1>>1,dl=Da[hl];if(ll(cl,dl)>=0)break;Da[F]=dl,F=hl}Da[F]=cl}_down(F){const{data:Da,compare:ll}=this,cl=this.length>>1,hl=Da[F];for(;F<cl;){let cl=1+(F<<1);const dl=cl+1;if(dl<this.length&&ll(Da[dl],Da[cl])<0&&(cl=dl),ll(Da[cl],hl)>=0)break;Da[F]=Da[cl],F=cl}Da[F]=hl}};function dr(F,Da,ll,cl,hl){yr(F,Da,ll,cl||F.length-1,hl||gr)}function yr(F,Da,ll,cl,hl){for(;cl>ll;){if(cl-ll>600){var dl=cl-ll+1,pl=Da-ll+1,fl=Math.log(dl),Al=.5*Math.exp(2*fl/3),bl=.5*Math.sqrt(fl*Al*(dl-Al)/dl)*(pl-dl/2<0?-1:1);yr(F,Da,Math.max(ll,Math.floor(Da-pl*Al/dl+bl)),Math.min(cl,Math.floor(Da+(dl-pl)*Al/dl+bl)),hl)}var kl=F[Da],Dl=ll,Wl=cl;for(mr(F,ll,Da),hl(F[cl],kl)>0&&mr(F,ll,cl);Dl<Wl;){for(mr(F,Dl,Wl),Dl++,Wl--;hl(F[Dl],kl)<0;)Dl++;for(;hl(F[Wl],kl)>0;)Wl--}0===hl(F[ll],kl)?mr(F,ll,Wl):mr(F,++Wl,cl),Wl<=Da&&(ll=Wl+1),Da<=Wl&&(cl=Wl-1)}}function mr(F,Da,ll){var cl=F[Da];F[Da]=F[ll],F[ll]=cl}function gr(F,Da){return F<Da?-1:F>Da?1:0}function xr(F,Da){if(F.length<=1)return[F];const ll=[];let cl,hl;for(const dl of F){const F=br(dl);0!==F&&(dl.area=Math.abs(F),void 0===hl&&(hl=F<0),hl===F<0?(cl&&ll.push(cl),cl=[dl]):cl.push(dl))}if(cl&&ll.push(cl),Da>1)for(let dl=0;dl<ll.length;dl++)ll[dl].length<=Da||(dr(ll[dl],Da,1,ll[dl].length-1,vr),ll[dl]=ll[dl].slice(0,Da));return ll}function vr(F,Da){return Da.area-F.area}function br(F){let Da=0;for(let ll,cl,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++)ll=F[hl],cl=F[pl],Da+=(cl.x-ll.x)*(ll.y+cl.y);return Da}const kd=1/298.257223563,Td=kd*(2-kd),Id=Math.PI/180;class Sr{constructor(F){const Da=6378.137*Id*1e3,ll=Math.cos(F*Id),cl=1/(1-Td*(1-ll*ll)),hl=Math.sqrt(cl);this.kx=Da*hl*ll,this.ky=Da*hl*cl*(1-Td)}distance(F,Da){const ll=this.wrap(F[0]-Da[0])*this.kx,cl=(F[1]-Da[1])*this.ky;return Math.sqrt(ll*ll+cl*cl)}pointOnLine(F,Da){let ll,cl,hl,dl,pl=1/0;for(let fl=0;fl<F.length-1;fl++){let Al=F[fl][0],bl=F[fl][1],kl=this.wrap(F[fl+1][0]-Al)*this.kx,Dl=(F[fl+1][1]-bl)*this.ky,Wl=0;0===kl&&0===Dl||(Wl=(this.wrap(Da[0]-Al)*this.kx*kl+(Da[1]-bl)*this.ky*Dl)/(kl*kl+Dl*Dl),Wl>1?(Al=F[fl+1][0],bl=F[fl+1][1]):Wl>0&&(Al+=kl/this.kx*Wl,bl+=Dl/this.ky*Wl)),kl=this.wrap(Da[0]-Al)*this.kx,Dl=(Da[1]-bl)*this.ky;const Ql=kl*kl+Dl*Dl;Ql<pl&&(pl=Ql,ll=Al,cl=bl,hl=fl,dl=Wl)}return{point:[ll,cl],index:hl,t:Math.max(0,Math.min(1,dl))}}wrap(F){for(;F<-180;)F+=360;for(;F>180;)F-=360;return F}}function kr(F,Da){return Da[0]-F[0]}function Mr(F){return F[1]-F[0]+1}function Ir(F,Da){return F[1]>=F[0]&&F[1]<Da}function zr(F,Da){if(F[0]>F[1])return[null,null];const ll=Mr(F);if(Da){if(2===ll)return[F,null];const Da=Math.floor(ll/2);return[[F[0],F[0]+Da],[F[0]+Da,F[1]]]}if(1===ll)return[F,null];const cl=Math.floor(ll/2)-1;return[[F[0],F[0]+cl],[F[0]+cl+1,F[1]]]}function Pr(F,Da){if(!Ir(Da,F.length))return[1/0,1/0,-1/0,-1/0];const ll=[1/0,1/0,-1/0,-1/0];for(let cl=Da[0];cl<=Da[1];++cl)Je(ll,F[cl]);return ll}function Cr(F){const Da=[1/0,1/0,-1/0,-1/0];for(const ll of F)for(const F of ll)Je(Da,F);return Da}function Br(F){return F[0]!==-1/0&&F[1]!==-1/0&&F[2]!==1/0&&F[3]!==1/0}function Vr(F,Da,ll){if(!Br(F)||!Br(Da))return NaN;let cl=0,hl=0;return F[2]<Da[0]&&(cl=Da[0]-F[2]),F[0]>Da[2]&&(cl=F[0]-Da[2]),F[1]>Da[3]&&(hl=F[1]-Da[3]),F[3]<Da[1]&&(hl=Da[1]-F[3]),ll.distance([0,0],[cl,hl])}function Er(F,Da,ll){const cl=ll.pointOnLine(Da,F);return ll.distance(F,cl.point)}function Fr(F,Da,ll,cl,hl){const dl=Math.min(Er(F,[ll,cl],hl),Er(Da,[ll,cl],hl)),pl=Math.min(Er(ll,[F,Da],hl),Er(cl,[F,Da],hl));return Math.min(dl,pl)}function Tr(F,Da,ll,cl,hl){if(!Ir(Da,F.length)||!Ir(cl,ll.length))return 1/0;let dl=1/0;for(let pl=Da[0];pl<Da[1];++pl){const Da=F[pl],fl=F[pl+1];for(let F=cl[0];F<cl[1];++F){const cl=ll[F],pl=ll[F+1];if(tr(Da,fl,cl,pl))return 0;dl=Math.min(dl,Fr(Da,fl,cl,pl,hl))}}return dl}function $r(F,Da,ll,cl,hl){if(!Ir(Da,F.length)||!Ir(cl,ll.length))return NaN;let dl=1/0;for(let pl=Da[0];pl<=Da[1];++pl)for(let Da=cl[0];Da<=cl[1];++Da)if(dl=Math.min(dl,hl.distance(F[pl],ll[Da])),0===dl)return dl;return dl}function Lr(F,Da,ll){if(rr(F,Da,!0))return 0;let cl=1/0;for(const hl of Da){const Da=hl[0],dl=hl[hl.length-1];if(Da!==dl&&(cl=Math.min(cl,Er(F,[dl,Da],ll)),0===cl))return cl;const pl=ll.pointOnLine(hl,F);if(cl=Math.min(cl,ll.distance(F,pl.point)),0===cl)return cl}return cl}function Dr(F,Da,ll,cl){if(!Ir(Da,F.length))return NaN;for(let dl=Da[0];dl<=Da[1];++dl)if(rr(F[dl],ll,!0))return 0;let hl=1/0;for(let dl=Da[0];dl<Da[1];++dl){const Da=F[dl],pl=F[dl+1];for(const F of ll)for(let ll=0,dl=F.length,fl=dl-1;ll<dl;fl=ll++){const dl=F[fl],Al=F[ll];if(tr(Da,pl,dl,Al))return 0;hl=Math.min(hl,Fr(Da,pl,dl,Al,cl))}}return hl}function Or(F,Da){for(const ll of F)for(const F of ll)if(rr(F,Da,!0))return!0;return!1}function jr(F,Da,ll,cl=1/0){const hl=Cr(F),dl=Cr(Da);if(cl!==1/0&&Vr(hl,dl,ll)>=cl)return cl;if(We(hl,dl)){if(Or(F,Da))return 0}else if(Or(Da,F))return 0;let pl=1/0;for(const fl of F)for(let F=0,cl=fl.length,hl=cl-1;F<cl;hl=F++){const cl=fl[hl],dl=fl[F];for(const F of Da)for(let Da=0,hl=F.length,fl=hl-1;Da<hl;fl=Da++){const hl=F[fl],Al=F[Da];if(tr(cl,dl,hl,Al))return 0;pl=Math.min(pl,Fr(cl,dl,hl,Al,ll))}}return pl}function Rr(F,Da,ll,cl,hl,dl){if(!dl)return;const pl=Vr(Pr(cl,dl),hl,ll);pl<Da&&F.push([pl,dl,[0,0]])}function Ur(F,Da,ll,cl,hl,dl,pl){if(!dl||!pl)return;const fl=Vr(Pr(cl,dl),Pr(hl,pl),ll);fl<Da&&F.push([fl,dl,pl])}function qr(F,Da,ll,cl,hl=1/0){let dl=Math.min(cl.distance(F[0],ll[0][0]),hl);if(0===dl)return dl;const pl=new Sd([[0,[0,F.length-1],[0,0]]],kr),fl=Cr(ll);for(;pl.length>0;){const hl=pl.pop();if(hl[0]>=dl)continue;const Al=hl[1],bl=Da?50:100;if(Mr(Al)<=bl){if(!Ir(Al,F.length))return NaN;if(Da){const Da=Dr(F,Al,ll,cl);if(isNaN(Da)||0===Da)return Da;dl=Math.min(dl,Da)}else for(let Da=Al[0];Da<=Al[1];++Da){const hl=Lr(F[Da],ll,cl);if(dl=Math.min(dl,hl),0===dl)return 0}}else{const ll=zr(Al,Da);Rr(pl,dl,cl,F,fl,ll[0]),Rr(pl,dl,cl,F,fl,ll[1])}}return dl}function Nr(F,Da,ll,cl,hl,dl=1/0){let pl=Math.min(dl,hl.distance(F[0],ll[0]));if(0===pl)return pl;const fl=new Sd([[0,[0,F.length-1],[0,ll.length-1]]],kr);for(;fl.length>0;){const dl=fl.pop();if(dl[0]>=pl)continue;const Al=dl[1],bl=dl[2],kl=Da?50:100,Dl=cl?50:100;if(Mr(Al)<=kl&&Mr(bl)<=Dl){if(!Ir(Al,F.length)&&Ir(bl,ll.length))return NaN;let dl;if(Da&&cl)dl=Tr(F,Al,ll,bl,hl),pl=Math.min(pl,dl);else if(Da&&!cl){const Da=F.slice(Al[0],Al[1]+1);for(let F=bl[0];F<=bl[1];++F)if(dl=Er(ll[F],Da,hl),pl=Math.min(pl,dl),0===pl)return pl}else if(!Da&&cl){const Da=ll.slice(bl[0],bl[1]+1);for(let ll=Al[0];ll<=Al[1];++ll)if(dl=Er(F[ll],Da,hl),pl=Math.min(pl,dl),0===pl)return pl}else dl=$r(F,Al,ll,bl,hl),pl=Math.min(pl,dl)}else{const dl=zr(Al,Da),kl=zr(bl,cl);Ur(fl,pl,hl,F,ll,dl[0],kl[0]),Ur(fl,pl,hl,F,ll,dl[0],kl[1]),Ur(fl,pl,hl,F,ll,dl[1],kl[0]),Ur(fl,pl,hl,F,ll,dl[1],kl[1])}}return pl}function Zr(F){return"MultiPolygon"===F.type?F.coordinates.map((F=>({type:"Polygon",coordinates:F}))):"MultiLineString"===F.type?F.coordinates.map((F=>({type:"LineString",coordinates:F}))):"MultiPoint"===F.type?F.coordinates.map((F=>({type:"Point",coordinates:F}))):[F]}class Gr{constructor(F,Da){this.type=uu,this.geojson=F,this.geometries=Da}static parse(F,Da){if(2!==F.length)return Da.error(`'distance' expression requires exactly one argument, but found ${F.length-1} instead.`);if(re(F[1])){const Da=F[1];if("FeatureCollection"===Da.type)return new Gr(Da,Da.features.map((F=>Zr(F.geometry))).flat());if("Feature"===Da.type)return new Gr(Da,Zr(Da.geometry));if("type"in Da&&"coordinates"in Da)return new Gr(Da,Zr(Da))}return Da.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(F){if(null!=F.geometry()&&null!=F.canonicalID()){if("Point"===F.geometryType())return function(F,Da){const ll=F.geometry(),cl=ll.flat().map((Da=>Ye([Da.x,Da.y],F.canonical)));if(0===ll.length)return NaN;const hl=new Sr(cl[0][1]);let dl=1/0;for(const pl of Da){switch(pl.type){case"Point":dl=Math.min(dl,Nr(cl,!1,[pl.coordinates],!1,hl,dl));break;case"LineString":dl=Math.min(dl,Nr(cl,!1,pl.coordinates,!0,hl,dl));break;case"Polygon":dl=Math.min(dl,qr(cl,!1,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries);if("LineString"===F.geometryType())return function(F,Da){const ll=F.geometry(),cl=ll.flat().map((Da=>Ye([Da.x,Da.y],F.canonical)));if(0===ll.length)return NaN;const hl=new Sr(cl[0][1]);let dl=1/0;for(const pl of Da){switch(pl.type){case"Point":dl=Math.min(dl,Nr(cl,!0,[pl.coordinates],!1,hl,dl));break;case"LineString":dl=Math.min(dl,Nr(cl,!0,pl.coordinates,!0,hl,dl));break;case"Polygon":dl=Math.min(dl,qr(cl,!0,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries);if("Polygon"===F.geometryType())return function(F,Da){const ll=F.geometry();if(0===ll.length||0===ll[0].length)return NaN;const cl=xr(ll,0).map((Da=>Da.map((Da=>Da.map((Da=>Ye([Da.x,Da.y],F.canonical))))))),hl=new Sr(cl[0][0][0][1]);let dl=1/0;for(const pl of Da)for(const F of cl){switch(pl.type){case"Point":dl=Math.min(dl,qr([pl.coordinates],!1,F,hl,dl));break;case"LineString":dl=Math.min(dl,qr(pl.coordinates,!0,F,hl,dl));break;case"Polygon":dl=Math.min(dl,jr(F,pl.coordinates,hl,dl))}if(0===dl)return dl}return dl}(F,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Cd={"==":vd,"!=":_d,">":bd,"<":xd,">=":Ed,"<=":wd,array:le,at:me,boolean:le,case:be,coalesce:Ee,collator:qe,format:Ze,image:Ge,in:ge,"index-of":xe,interpolate:Be,"interpolate-hcl":Be,"interpolate-lab":Be,length:Ke,let:de,literal:se,match:ve,number:le,"number-format":Ne,object:le,slice:we,step:Ae,string:le,"to-boolean":ce,"to-color":ce,"to-number":ce,"to-string":ce,var:ye,within:pr,distance:Gr};class Xr{constructor(F,Da,ll,cl){this.name=F,this.type=Da,this._evaluate=ll,this.args=cl}evaluate(F){return this._evaluate(F,this.args)}eachChild(F){this.args.forEach(F)}outputDefined(){return!1}static parse(F,Da){const ll=F[0],cl=Xr.definitions[ll];if(!cl)return Da.error(`Unknown expression "${ll}". If you wanted a literal array, use ["literal", [...]].`,0);const hl=Array.isArray(cl)?cl[0]:cl.type,dl=Array.isArray(cl)?[[cl[1],cl[2]]]:cl.overloads,pl=dl.filter((([Da])=>!Array.isArray(Da)||Da.length===F.length-1));let fl=null;for(const[Al,bl]of pl){fl=new fe(Da.registry,Qr,Da.path,null,Da.scope);const cl=[];let dl=!1;for(let Da=1;Da<F.length;Da++){const ll=F[Da],hl=Array.isArray(Al)?Al[Da-1]:Al.type,pl=fl.parse(ll,1+cl.length,hl);if(!pl){dl=!0;break}cl.push(pl)}if(!dl)if(Array.isArray(Al)&&Al.length!==cl.length)fl.error(`Expected ${Al.length} arguments, but found ${cl.length} instead.`);else{for(let F=0;F<cl.length;F++){const Da=Array.isArray(Al)?Al[F]:Al.type,ll=cl[F];fl.concat(F+1).checkSubtype(Da,ll.type)}if(0===fl.errors.length)return new Xr(ll,hl,bl,cl)}}if(1===pl.length)Da.errors.push(...fl.errors);else{const ll=(pl.length?pl:dl).map((([F])=>{return Da=F,Array.isArray(Da)?`(${Da.map(wt).join(", ")})`:`(${wt(Da.type)}...)`;var Da})).join(" | "),cl=[];for(let hl=1;hl<F.length;hl++){const ll=Da.parse(F[hl],1+cl.length);if(!ll)return null;cl.push(wt(ll.type))}Da.error(`Expected arguments of type ${ll}, but found (${cl.join(", ")}) instead.`)}return null}static register(F,Da){Xr.definitions=Da;for(const ll in Da)F[ll]=Xr}}function Hr(F,[Da,ll,cl,hl]){Da=Da.evaluate(F),ll=ll.evaluate(F),cl=cl.evaluate(F);const dl=hl?hl.evaluate(F):1,pl=ee(Da,ll,cl,dl);if(pl)throw new ae(pl);return new Kt(Da/255,ll/255,cl/255,dl,!1)}function Yr(F,Da){return F in Da}function Jr(F,Da){const ll=Da[F];return void 0===ll?null:ll}function Wr(F){return{type:F}}function Qr(F){if(F instanceof ye)return Qr(F.boundExpression);if(F instanceof Xr&&"error"===F.name)return!1;if(F instanceof qe)return!1;if(F instanceof pr)return!1;if(F instanceof Gr)return!1;const Da=F instanceof ce||F instanceof le;let ll=!0;return F.eachChild((F=>{ll=Da?ll&&Qr(F):ll&&F instanceof se})),!!ll&&tn(F)&&rn(F,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tn(F){if(F instanceof Xr){if("get"===F.name&&1===F.args.length)return!1;if("feature-state"===F.name)return!1;if("has"===F.name&&1===F.args.length)return!1;if("properties"===F.name||"geometry-type"===F.name||"id"===F.name)return!1;if(/^filter-/.test(F.name))return!1}if(F instanceof pr)return!1;if(F instanceof Gr)return!1;let Da=!0;return F.eachChild((F=>{Da&&!tn(F)&&(Da=!1)})),Da}function en(F){if(F instanceof Xr&&"feature-state"===F.name)return!1;let Da=!0;return F.eachChild((F=>{Da&&!en(F)&&(Da=!1)})),Da}function rn(F,Da){if(F instanceof Xr&&Da.indexOf(F.name)>=0)return!1;let ll=!0;return F.eachChild((F=>{ll&&!rn(F,Da)&&(ll=!1)})),ll}function nn(F){return{result:"success",value:F}}function sn(F){return{result:"error",value:F}}function an(F){return"data-driven"===F["property-type"]||"cross-faded-data-driven"===F["property-type"]}function on(F){return!!F.expression&&F.expression.parameters.indexOf("zoom")>-1}function ln(F){return!!F.expression&&F.expression.interpolated}function un(F){return F instanceof Number?"number":F instanceof String?"string":F instanceof Boolean?"boolean":Array.isArray(F)?"array":null===F?"null":typeof F}function cn(F){return"object"==typeof F&&null!==F&&!Array.isArray(F)}function hn(F){return F}function pn(F,Da){const ll="color"===Da.type,cl=F.stops&&"object"==typeof F.stops[0][0],hl=cl||!(cl||void 0!==F.property),dl=F.type||(ln(Da)?"exponential":"interval");if(ll||"padding"===Da.type){const cl=ll?Kt.parse:Jt.parse;(F=st({},F)).stops&&(F.stops=F.stops.map((F=>[F[0],cl(F[1])]))),F.default=cl(F.default?F.default:Da.default)}if(F.colorSpace&&"rgb"!==(pl=F.colorSpace)&&"hcl"!==pl&&"lab"!==pl)throw new Error(`Unknown color space: "${F.colorSpace}"`);var pl;let fl,Al,bl;if("exponential"===dl)fl=mn;else if("interval"===dl)fl=yn;else if("categorical"===dl){fl=dn,Al=Object.create(null);for(const Da of F.stops)Al[Da[0]]=Da[1];bl=typeof F.stops[0][0]}else{if("identity"!==dl)throw new Error(`Unknown function type "${dl}"`);fl=gn}if(cl){const ll={},cl=[];for(let Da=0;Da<F.stops.length;Da++){const hl=F.stops[Da],dl=hl[0].zoom;void 0===ll[dl]&&(ll[dl]={zoom:dl,type:F.type,property:F.property,default:F.default,stops:[]},cl.push(dl)),ll[dl].stops.push([hl[0].value,hl[1]])}const hl=[];for(const F of cl)hl.push([ll[F].zoom,pn(ll[F],Da)]);const dl={name:"linear"};return{kind:"composite",interpolationType:dl,interpolationFactor:Be.interpolationFactor.bind(void 0,dl),zoomStops:hl.map((F=>F[0])),evaluate:({zoom:ll},cl)=>mn({stops:hl,base:F.base},Da,ll).evaluate(ll,cl)}}if(hl){const ll="exponential"===dl?{name:"exponential",base:void 0!==F.base?F.base:1}:null;return{kind:"camera",interpolationType:ll,interpolationFactor:Be.interpolationFactor.bind(void 0,ll),zoomStops:F.stops.map((F=>F[0])),evaluate:({zoom:ll})=>fl(F,Da,ll,Al,bl)}}return{kind:"source",evaluate(ll,cl){const hl=cl&&cl.properties?cl.properties[F.property]:void 0;return void 0===hl?fn(F.default,Da.default):fl(F,Da,hl,Al,bl)}}}function fn(F,Da,ll){return void 0!==F?F:void 0!==Da?Da:void 0!==ll?ll:void 0}function dn(F,Da,ll,cl,hl){return fn(typeof ll===hl?cl[ll]:void 0,F.default,Da.default)}function yn(F,Da,ll){if("number"!==un(ll))return fn(F.default,Da.default);const cl=F.stops.length;if(1===cl)return F.stops[0][1];if(ll<=F.stops[0][0])return F.stops[0][1];if(ll>=F.stops[cl-1][0])return F.stops[cl-1][1];const hl=_e(F.stops.map((F=>F[0])),ll);return F.stops[hl][1]}function mn(F,Da,ll){const cl=void 0!==F.base?F.base:1;if("number"!==un(ll))return fn(F.default,Da.default);const hl=F.stops.length;if(1===hl)return F.stops[0][1];if(ll<=F.stops[0][0])return F.stops[0][1];if(ll>=F.stops[hl-1][0])return F.stops[hl-1][1];const dl=_e(F.stops.map((F=>F[0])),ll),pl=function(F,Da,ll,cl){const hl=cl-ll,dl=F-ll;return 0===hl?0:1===Da?dl/hl:(Math.pow(Da,dl)-1)/(Math.pow(Da,hl)-1)}(ll,cl,F.stops[dl][0],F.stops[dl+1][0]),fl=F.stops[dl][1],Al=F.stops[dl+1][1],bl=yd[Da.type]||hn;return"function"==typeof fl.evaluate?{evaluate(...Da){const ll=fl.evaluate.apply(void 0,Da),cl=Al.evaluate.apply(void 0,Da);if(void 0!==ll&&void 0!==cl)return bl(ll,cl,pl,F.colorSpace)}}:bl(fl,Al,pl,F.colorSpace)}function gn(F,Da,ll){switch(Da.type){case"color":ll=Kt.parse(ll);break;case"formatted":ll=Yt.fromString(ll.toString());break;case"resolvedImage":ll=te.fromString(ll.toString());break;case"padding":ll=Jt.parse(ll);break;default:un(ll)===Da.type||"enum"===Da.type&&Da.values[ll]||(ll=void 0)}return fn(ll,F.default,Da.default)}Xr.register(Cd,{error:[{kind:"error"},[hu],(F,[Da])=>{throw new ae(Da.evaluate(F))}],typeof:[hu,[Nu],(F,[Da])=>wt(ne(Da.evaluate(F)))],"to-rgba":[bt(uu,4),[zu],(F,[Da])=>{const[ll,cl,hl,dl]=Da.evaluate(F).rgb;return[255*ll,255*cl,255*hl,dl]}],rgb:[zu,[uu,uu,uu],Hr],rgba:[zu,[uu,uu,uu,uu],Hr],has:{type:Lu,overloads:[[[hu],(F,[Da])=>Yr(Da.evaluate(F),F.properties())],[[hu,Du],(F,[Da,ll])=>Yr(Da.evaluate(F),ll.evaluate(F))]]},get:{type:Nu,overloads:[[[hu],(F,[Da])=>Jr(Da.evaluate(F),F.properties())],[[hu,Du],(F,[Da,ll])=>Jr(Da.evaluate(F),ll.evaluate(F))]]},"feature-state":[Nu,[hu],(F,[Da])=>Jr(Da.evaluate(F),F.featureState||{})],properties:[Du,[],F=>F.properties()],"geometry-type":[hu,[],F=>F.geometryType()],id:[Nu,[],F=>F.id()],zoom:[uu,[],F=>F.globals.zoom],"heatmap-density":[uu,[],F=>F.globals.heatmapDensity||0],"line-progress":[uu,[],F=>F.globals.lineProgress||0],accumulated:[Nu,[],F=>void 0===F.globals.accumulated?null:F.globals.accumulated],"+":[uu,Wr(uu),(F,Da)=>{let ll=0;for(const cl of Da)ll+=cl.evaluate(F);return ll}],"*":[uu,Wr(uu),(F,Da)=>{let ll=1;for(const cl of Da)ll*=cl.evaluate(F);return ll}],"-":{type:uu,overloads:[[[uu,uu],(F,[Da,ll])=>Da.evaluate(F)-ll.evaluate(F)],[[uu],(F,[Da])=>-Da.evaluate(F)]]},"/":[uu,[uu,uu],(F,[Da,ll])=>Da.evaluate(F)/ll.evaluate(F)],"%":[uu,[uu,uu],(F,[Da,ll])=>Da.evaluate(F)%ll.evaluate(F)],ln2:[uu,[],()=>Math.LN2],pi:[uu,[],()=>Math.PI],e:[uu,[],()=>Math.E],"^":[uu,[uu,uu],(F,[Da,ll])=>Math.pow(Da.evaluate(F),ll.evaluate(F))],sqrt:[uu,[uu],(F,[Da])=>Math.sqrt(Da.evaluate(F))],log10:[uu,[uu],(F,[Da])=>Math.log(Da.evaluate(F))/Math.LN10],ln:[uu,[uu],(F,[Da])=>Math.log(Da.evaluate(F))],log2:[uu,[uu],(F,[Da])=>Math.log(Da.evaluate(F))/Math.LN2],sin:[uu,[uu],(F,[Da])=>Math.sin(Da.evaluate(F))],cos:[uu,[uu],(F,[Da])=>Math.cos(Da.evaluate(F))],tan:[uu,[uu],(F,[Da])=>Math.tan(Da.evaluate(F))],asin:[uu,[uu],(F,[Da])=>Math.asin(Da.evaluate(F))],acos:[uu,[uu],(F,[Da])=>Math.acos(Da.evaluate(F))],atan:[uu,[uu],(F,[Da])=>Math.atan(Da.evaluate(F))],min:[uu,Wr(uu),(F,Da)=>Math.min(...Da.map((Da=>Da.evaluate(F))))],max:[uu,Wr(uu),(F,Da)=>Math.max(...Da.map((Da=>Da.evaluate(F))))],abs:[uu,[uu],(F,[Da])=>Math.abs(Da.evaluate(F))],round:[uu,[uu],(F,[Da])=>{const ll=Da.evaluate(F);return ll<0?-Math.round(-ll):Math.round(ll)}],floor:[uu,[uu],(F,[Da])=>Math.floor(Da.evaluate(F))],ceil:[uu,[uu],(F,[Da])=>Math.ceil(Da.evaluate(F))],"filter-==":[Lu,[hu,Nu],(F,[Da,ll])=>F.properties()[Da.value]===ll.value],"filter-id-==":[Lu,[Nu],(F,[Da])=>F.id()===Da.value],"filter-type-==":[Lu,[hu],(F,[Da])=>F.geometryType()===Da.value],"filter-<":[Lu,[hu,Nu],(F,[Da,ll])=>{const cl=F.properties()[Da.value],hl=ll.value;return typeof cl==typeof hl&&cl<hl}],"filter-id-<":[Lu,[Nu],(F,[Da])=>{const ll=F.id(),cl=Da.value;return typeof ll==typeof cl&&ll<cl}],"filter->":[Lu,[hu,Nu],(F,[Da,ll])=>{const cl=F.properties()[Da.value],hl=ll.value;return typeof cl==typeof hl&&cl>hl}],"filter-id->":[Lu,[Nu],(F,[Da])=>{const ll=F.id(),cl=Da.value;return typeof ll==typeof cl&&ll>cl}],"filter-<=":[Lu,[hu,Nu],(F,[Da,ll])=>{const cl=F.properties()[Da.value],hl=ll.value;return typeof cl==typeof hl&&cl<=hl}],"filter-id-<=":[Lu,[Nu],(F,[Da])=>{const ll=F.id(),cl=Da.value;return typeof ll==typeof cl&&ll<=cl}],"filter->=":[Lu,[hu,Nu],(F,[Da,ll])=>{const cl=F.properties()[Da.value],hl=ll.value;return typeof cl==typeof hl&&cl>=hl}],"filter-id->=":[Lu,[Nu],(F,[Da])=>{const ll=F.id(),cl=Da.value;return typeof ll==typeof cl&&ll>=cl}],"filter-has":[Lu,[Nu],(F,[Da])=>Da.value in F.properties()],"filter-has-id":[Lu,[],F=>null!==F.id()&&void 0!==F.id()],"filter-type-in":[Lu,[bt(hu)],(F,[Da])=>Da.value.indexOf(F.geometryType())>=0],"filter-id-in":[Lu,[bt(Nu)],(F,[Da])=>Da.value.indexOf(F.id())>=0],"filter-in-small":[Lu,[hu,bt(Nu)],(F,[Da,ll])=>ll.value.indexOf(F.properties()[Da.value])>=0],"filter-in-large":[Lu,[hu,bt(Nu)],(F,[Da,ll])=>function(F,Da,ll,cl){for(;ll<=cl;){const hl=ll+cl>>1;if(Da[hl]===F)return!0;Da[hl]>F?cl=hl-1:ll=hl+1}return!1}(F.properties()[Da.value],ll.value,0,ll.value.length-1)],all:{type:Lu,overloads:[[[Lu,Lu],(F,[Da,ll])=>Da.evaluate(F)&&ll.evaluate(F)],[Wr(Lu),(F,Da)=>{for(const ll of Da)if(!ll.evaluate(F))return!1;return!0}]]},any:{type:Lu,overloads:[[[Lu,Lu],(F,[Da,ll])=>Da.evaluate(F)||ll.evaluate(F)],[Wr(Lu),(F,Da)=>{for(const ll of Da)if(ll.evaluate(F))return!0;return!1}]]},"!":[Lu,[Lu],(F,[Da])=>!Da.evaluate(F)],"is-supported-script":[Lu,[hu],(F,[Da])=>{const ll=F.globals&&F.globals.isSupportedScript;return!ll||ll(Da.evaluate(F))}],upcase:[hu,[hu],(F,[Da])=>Da.evaluate(F).toUpperCase()],downcase:[hu,[hu],(F,[Da])=>Da.evaluate(F).toLowerCase()],concat:[hu,Wr(Nu),(F,Da)=>Da.map((Da=>ie(Da.evaluate(F)))).join("")],"resolved-locale":[hu,[qu],(F,[Da])=>Da.evaluate(F).resolvedLocale()]});class xn{constructor(F,Da){var ll;this.expression=F,this._warningHistory={},this._evaluator=new pe,this._defaultValue=Da?"color"===(ll=Da).type&&cn(ll.default)?new Kt(0,0,0,0):"color"===ll.type?Kt.parse(ll.default)||null:"padding"===ll.type?Jt.parse(ll.default)||null:"variableAnchorOffsetCollection"===ll.type?Qt.parse(ll.default)||null:void 0===ll.default?null:ll.default:null,this._enumValues=Da&&"enum"===Da.type?Da.values:null}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._evaluator.globals=F,this._evaluator.feature=Da,this._evaluator.featureState=ll,this._evaluator.canonical=cl,this._evaluator.availableImages=hl||null,this._evaluator.formattedSection=dl,this.expression.evaluate(this._evaluator)}evaluate(F,Da,ll,cl,hl,dl){this._evaluator.globals=F,this._evaluator.feature=Da||null,this._evaluator.featureState=ll||null,this._evaluator.canonical=cl,this._evaluator.availableImages=hl||null,this._evaluator.formattedSection=dl||null;try{const F=this.expression.evaluate(this._evaluator);if(null==F||"number"==typeof F&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new ae(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,"undefined"!=typeof console&&console.warn(F.message)),this._defaultValue}}}function vn(F){return Array.isArray(F)&&F.length>0&&"string"==typeof F[0]&&F[0]in Cd}function bn(F,Da){const ll=new fe(Cd,Qr,[],Da?function(F){const Da={color:zu,string:hu,number:uu,enum:hu,boolean:Lu,formatted:ih,padding:gh,resolvedImage:ed,variableAnchorOffsetCollection:td};return"array"===F.type?bt(Da[F.value]||Nu,F.length):Da[F.type]}(Da):void 0),cl=ll.parse(F,void 0,void 0,void 0,Da&&"string"===Da.type?{typeAnnotation:"coerce"}:void 0);return cl?nn(new xn(cl,Da)):sn(ll.errors)}class wn{constructor(F,Da){this.kind=F,this._styleExpression=Da,this.isStateDependent="constant"!==F&&!en(Da.expression)}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl)}evaluate(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluate(F,Da,ll,cl,hl,dl)}}class _n{constructor(F,Da,ll,cl){this.kind=F,this.zoomStops=ll,this._styleExpression=Da,this.isStateDependent="camera"!==F&&!en(Da.expression),this.interpolationType=cl}evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluateWithoutErrorHandling(F,Da,ll,cl,hl,dl)}evaluate(F,Da,ll,cl,hl,dl){return this._styleExpression.evaluate(F,Da,ll,cl,hl,dl)}interpolationFactor(F,Da,ll){return this.interpolationType?Be.interpolationFactor(this.interpolationType,F,Da,ll):0}}function An(F,Da){const ll=bn(F,Da);if("error"===ll.result)return ll;const cl=ll.value.expression,hl=tn(cl);if(!hl&&!an(Da))return sn([new at("","data expressions not supported")]);const dl=rn(cl,["zoom"]);if(!dl&&!on(Da))return sn([new at("","zoom expressions not supported")]);const pl=kn(cl);return pl||dl?pl instanceof at?sn([pl]):pl instanceof Be&&!ln(Da)?sn([new at("",'"interpolate" expressions cannot be used with this property')]):nn(pl?new _n(hl?"camera":"composite",ll.value,pl.labels,pl instanceof Be?pl.interpolation:void 0):new wn(hl?"constant":"source",ll.value)):sn([new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sn{constructor(F,Da){this._parameters=F,this._specification=Da,st(this,pn(this._parameters,this._specification))}static deserialize(F){return new Sn(F._parameters,F._specification)}static serialize(F){return{_parameters:F._parameters,_specification:F._specification}}}function kn(F){let Da=null;if(F instanceof de)Da=kn(F.result);else if(F instanceof Ee){for(const ll of F.args)if(Da=kn(ll),Da)break}else(F instanceof Ae||F instanceof Be)&&F.input instanceof Xr&&"zoom"===F.input.name&&(Da=F);return Da instanceof at||F.eachChild((F=>{const ll=kn(F);ll instanceof at?Da=ll:!Da&&ll?Da=new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Da&&ll&&Da!==ll&&(Da=new at("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),Da}function Mn(F){if(!0===F||!1===F)return!0;if(!Array.isArray(F)||0===F.length)return!1;switch(F[0]){case"has":return F.length>=2&&"$id"!==F[1]&&"$type"!==F[1];case"in":return F.length>=3&&("string"!=typeof F[1]||Array.isArray(F[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==F.length||Array.isArray(F[1])||Array.isArray(F[2]);case"any":case"all":for(const Da of F.slice(1))if(!Mn(Da)&&"boolean"!=typeof Da)return!1;return!0;default:return!0}}const Ld={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zn(F){if(null==F)return{filter:()=>!0,needGeometry:!1};Mn(F)||(F=Bn(F));const Da=bn(F,Ld);if("error"===Da.result)throw new Error(Da.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return{filter:(F,ll,cl)=>Da.value.evaluate(F,ll,{},cl),needGeometry:Cn(F)}}function Pn(F,Da){return F<Da?-1:F>Da?1:0}function Cn(F){if(!Array.isArray(F))return!1;if("within"===F[0]||"distance"===F[0])return!0;for(let Da=1;Da<F.length;Da++)if(Cn(F[Da]))return!0;return!1}function Bn(F){if(!F)return!0;const Da=F[0];return F.length<=1?"any"!==Da:"=="===Da?Vn(F[1],F[2],"=="):"!="===Da?Tn(Vn(F[1],F[2],"==")):"<"===Da||">"===Da||"<="===Da||">="===Da?Vn(F[1],F[2],Da):"any"===Da?(ll=F.slice(1),["any"].concat(ll.map(Bn))):"all"===Da?["all"].concat(F.slice(1).map(Bn)):"none"===Da?["all"].concat(F.slice(1).map(Bn).map(Tn)):"in"===Da?En(F[1],F.slice(2)):"!in"===Da?Tn(En(F[1],F.slice(2))):"has"===Da?Fn(F[1]):"!has"!==Da||Tn(Fn(F[1]));var ll}function Vn(F,Da,ll){switch(F){case"$type":return[`filter-type-${ll}`,Da];case"$id":return[`filter-id-${ll}`,Da];default:return[`filter-${ll}`,F,Da]}}function En(F,Da){if(0===Da.length)return!1;switch(F){case"$type":return["filter-type-in",["literal",Da]];case"$id":return["filter-id-in",["literal",Da]];default:return Da.length>200&&!Da.some((F=>typeof F!=typeof Da[0]))?["filter-in-large",F,["literal",Da.sort(Pn)]]:["filter-in-small",F,["literal",Da]]}}function Fn(F){switch(F){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",F]}}function Tn(F){return["!",F]}function $n(F){const Da=typeof F;if("number"===Da||"boolean"===Da||"string"===Da||null==F)return JSON.stringify(F);if(Array.isArray(F)){let Da="[";for(const ll of F)Da+=`${$n(ll)},`;return`${Da}]`}const ll=Object.keys(F).sort();let cl="{";for(let hl=0;hl<ll.length;hl++)cl+=`${JSON.stringify(ll[hl])}:${$n(F[ll[hl]])},`;return`${cl}}`}function Ln(F){let Da="";for(const ll of su)Da+=`/${$n(F[ll])}`;return Da}function Dn(F){const Da=F.value;return Da?[new it(F.key,Da,"constants have been deprecated as of v8")]:[]}function On(F){return F instanceof Number||F instanceof String||F instanceof Boolean?F.valueOf():F}function jn(F){if(Array.isArray(F))return F.map(jn);if(F instanceof Object&&!(F instanceof Number||F instanceof String||F instanceof Boolean)){const Da={};for(const ll in F)Da[ll]=jn(F[ll]);return Da}return On(F)}function Rn(F){const Da=F.key,ll=F.value,cl=F.valueSpec||{},hl=F.objectElementValidators||{},dl=F.style,pl=F.styleSpec,fl=F.validateSpec;let Al=[];const bl=un(ll);if("object"!==bl)return[new it(Da,ll,`object expected, ${bl} found`)];for(const kl in ll){const F=kl.split(".")[0],bl=cl[F]||cl["*"];let Dl;if(hl[F])Dl=hl[F];else if(cl[F])Dl=fl;else if(hl["*"])Dl=hl["*"];else{if(!cl["*"]){Al.push(new it(Da,ll[kl],`unknown property "${kl}"`));continue}Dl=fl}Al=Al.concat(Dl({key:(Da?`${Da}.`:Da)+kl,value:ll[kl],valueSpec:bl,style:dl,styleSpec:pl,object:ll,objectKey:kl,validateSpec:fl},ll))}for(const kl in cl)hl[kl]||cl[kl].required&&void 0===cl[kl].default&&void 0===ll[kl]&&Al.push(new it(Da,ll,`missing required property "${kl}"`));return Al}function Un(F){const Da=F.value,ll=F.valueSpec,cl=F.style,hl=F.styleSpec,dl=F.key,pl=F.arrayElementValidator||F.validateSpec;if("array"!==un(Da))return[new it(dl,Da,`array expected, ${un(Da)} found`)];if(ll.length&&Da.length!==ll.length)return[new it(dl,Da,`array length ${ll.length} expected, length ${Da.length} found`)];if(ll["min-length"]&&Da.length<ll["min-length"])return[new it(dl,Da,`array length at least ${ll["min-length"]} expected, length ${Da.length} found`)];let fl={type:ll.value,values:ll.values};hl.$version<7&&(fl.function=ll.function),"object"===un(ll.value)&&(fl=ll.value);let Al=[];for(let bl=0;bl<Da.length;bl++)Al=Al.concat(pl({array:Da,arrayIndex:bl,value:Da[bl],valueSpec:fl,validateSpec:F.validateSpec,style:cl,styleSpec:hl,key:`${dl}[${bl}]`}));return Al}function qn(F){const Da=F.key,ll=F.value,cl=F.valueSpec;let hl=un(ll);return"number"===hl&&ll!=ll&&(hl="NaN"),"number"!==hl?[new it(Da,ll,`number expected, ${hl} found`)]:"minimum"in cl&&ll<cl.minimum?[new it(Da,ll,`${ll} is less than the minimum value ${cl.minimum}`)]:"maximum"in cl&&ll>cl.maximum?[new it(Da,ll,`${ll} is greater than the maximum value ${cl.maximum}`)]:[]}function Nn(F){const Da=F.valueSpec,ll=On(F.value.type);let cl,hl,dl,pl={};const fl="categorical"!==ll&&void 0===F.value.property,Al=!fl,bl="array"===un(F.value.stops)&&"array"===un(F.value.stops[0])&&"object"===un(F.value.stops[0][0]),kl=Rn({key:F.key,value:F.value,valueSpec:F.styleSpec.function,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{stops:function(F){if("identity"===ll)return[new it(F.key,F.value,'identity function may not have a "stops" property')];let Da=[];const cl=F.value;return Da=Da.concat(Un({key:F.key,value:cl,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:h})),"array"===un(cl)&&0===cl.length&&Da.push(new it(F.key,cl,"array must have at least one stop")),Da},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:Da,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return"identity"===ll&&fl&&kl.push(new it(F.key,F.value,'missing required property "property"')),"identity"===ll||F.value.stops||kl.push(new it(F.key,F.value,'missing required property "stops"')),"exponential"===ll&&F.valueSpec.expression&&!ln(F.valueSpec)&&kl.push(new it(F.key,F.value,"exponential functions not supported")),F.styleSpec.$version>=8&&(Al&&!an(F.valueSpec)?kl.push(new it(F.key,F.value,"property functions not supported")):fl&&!on(F.valueSpec)&&kl.push(new it(F.key,F.value,"zoom functions not supported"))),"categorical"!==ll&&!bl||void 0!==F.value.property||kl.push(new it(F.key,F.value,'"property" property is required')),kl;function h(F){let ll=[];const cl=F.value,fl=F.key;if("array"!==un(cl))return[new it(fl,cl,`array expected, ${un(cl)} found`)];if(2!==cl.length)return[new it(fl,cl,`array length 2 expected, length ${cl.length} found`)];if(bl){if("object"!==un(cl[0]))return[new it(fl,cl,`object expected, ${un(cl[0])} found`)];if(void 0===cl[0].zoom)return[new it(fl,cl,"object stop key must have zoom")];if(void 0===cl[0].value)return[new it(fl,cl,"object stop key must have value")];if(dl&&dl>On(cl[0].zoom))return[new it(fl,cl[0].zoom,"stop zoom values must appear in ascending order")];On(cl[0].zoom)!==dl&&(dl=On(cl[0].zoom),hl=void 0,pl={}),ll=ll.concat(Rn({key:`${fl}[0]`,value:cl[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:qn,value:p}}))}else ll=ll.concat(p({key:`${fl}[0]`,value:cl[0],valueSpec:{},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},cl));return vn(jn(cl[1]))?ll.concat([new it(`${fl}[1]`,cl[1],"expressions are not allowed in function stops.")]):ll.concat(F.validateSpec({key:`${fl}[1]`,value:cl[1],valueSpec:Da,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function p(F,dl){const fl=un(F.value),Al=On(F.value),bl=null!==F.value?F.value:dl;if(cl){if(fl!==cl)return[new it(F.key,bl,`${fl} stop domain type must match previous stop domain type ${cl}`)]}else cl=fl;if("number"!==fl&&"string"!==fl&&"boolean"!==fl)return[new it(F.key,bl,"stop domain value must be a number, string, or boolean")];if("number"!==fl&&"categorical"!==ll){let cl=`number expected, ${fl} found`;return an(Da)&&void 0===ll&&(cl+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(F.key,bl,cl)]}return"categorical"!==ll||"number"!==fl||isFinite(Al)&&Math.floor(Al)===Al?"categorical"!==ll&&"number"===fl&&void 0!==hl&&Al<hl?[new it(F.key,bl,"stop domain values must appear in ascending order")]:(hl=Al,"categorical"===ll&&Al in pl?[new it(F.key,bl,"stop domain values must be unique")]:(pl[Al]=!0,[])):[new it(F.key,bl,`integer expected, found ${Al}`)]}}function Zn(F){const Da=("property"===F.expressionContext?An:bn)(jn(F.value),F.valueSpec);if("error"===Da.result)return Da.value.map((Da=>new it(`${F.key}${Da.key}`,F.value,Da.message)));const ll=Da.value.expression||Da.value._styleExpression.expression;if("property"===F.expressionContext&&"text-font"===F.propertyKey&&!ll.outputDefined())return[new it(F.key,F.value,`Invalid data expression for "${F.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===F.expressionContext&&"layout"===F.propertyType&&!en(ll))return[new it(F.key,F.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===F.expressionContext&&!en(ll))return[new it(F.key,F.value,'"feature-state" data expressions are not supported with filters.')];if(F.expressionContext&&0===F.expressionContext.indexOf("cluster")){if(!rn(ll,["zoom","feature-state"]))return[new it(F.key,F.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===F.expressionContext&&!tn(ll))return[new it(F.key,F.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gn(F){const Da=F.key,ll=F.value,cl=F.valueSpec,hl=[];return Array.isArray(cl.values)?-1===cl.values.indexOf(On(ll))&&hl.push(new it(Da,ll,`expected one of [${cl.values.join(", ")}], ${JSON.stringify(ll)} found`)):-1===Object.keys(cl.values).indexOf(On(ll))&&hl.push(new it(Da,ll,`expected one of [${Object.keys(cl.values).join(", ")}], ${JSON.stringify(ll)} found`)),hl}function Kn(F){return Mn(jn(F.value))?Zn(st({},F,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xn(F)}function Xn(F){const Da=F.value,ll=F.key;if("array"!==un(Da))return[new it(ll,Da,`array expected, ${un(Da)} found`)];const cl=F.styleSpec;let hl,dl=[];if(Da.length<1)return[new it(ll,Da,"filter array must have at least 1 element")];switch(dl=dl.concat(Gn({key:`${ll}[0]`,value:Da[0],valueSpec:cl.filter_operator,style:F.style,styleSpec:F.styleSpec})),On(Da[0])){case"<":case"<=":case">":case">=":Da.length>=2&&"$type"===On(Da[1])&&dl.push(new it(ll,Da,`"$type" cannot be use with operator "${Da[0]}"`));case"==":case"!=":3!==Da.length&&dl.push(new it(ll,Da,`filter array for operator "${Da[0]}" must have 3 elements`));case"in":case"!in":Da.length>=2&&(hl=un(Da[1]),"string"!==hl&&dl.push(new it(`${ll}[1]`,Da[1],`string expected, ${hl} found`)));for(let pl=2;pl<Da.length;pl++)hl=un(Da[pl]),"$type"===On(Da[1])?dl=dl.concat(Gn({key:`${ll}[${pl}]`,value:Da[pl],valueSpec:cl.geometry_type,style:F.style,styleSpec:F.styleSpec})):"string"!==hl&&"number"!==hl&&"boolean"!==hl&&dl.push(new it(`${ll}[${pl}]`,Da[pl],`string, number, or boolean expected, ${hl} found`));break;case"any":case"all":case"none":for(let cl=1;cl<Da.length;cl++)dl=dl.concat(Xn({key:`${ll}[${cl}]`,value:Da[cl],style:F.style,styleSpec:F.styleSpec}));break;case"has":case"!has":hl=un(Da[1]),2!==Da.length?dl.push(new it(ll,Da,`filter array for "${Da[0]}" operator must have 2 elements`)):"string"!==hl&&dl.push(new it(`${ll}[1]`,Da[1],`string expected, ${hl} found`))}return dl}function Hn(F,Da){const ll=F.key,cl=F.validateSpec,hl=F.style,dl=F.styleSpec,pl=F.value,fl=F.objectKey,Al=dl[`${Da}_${F.layerType}`];if(!Al)return[];const bl=fl.match(/^(.*)-transition$/);if("paint"===Da&&bl&&Al[bl[1]]&&Al[bl[1]].transition)return cl({key:ll,value:pl,valueSpec:dl.transition,style:hl,styleSpec:dl});const kl=F.valueSpec||Al[fl];if(!kl)return[new it(ll,pl,`unknown property "${fl}"`)];let Dl;if("string"===un(pl)&&an(kl)&&!kl.tokens&&(Dl=/^{([^}]+)}$/.exec(pl)))return[new it(ll,pl,`"${fl}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Dl[1])} }\`.`)];const Wl=[];return"symbol"===F.layerType&&("text-field"===fl&&hl&&!hl.glyphs&&Wl.push(new it(ll,pl,'use of "text-field" requires a style "glyphs" property')),"text-font"===fl&&cn(jn(pl))&&"identity"===On(pl.type)&&Wl.push(new it(ll,pl,'"text-font" does not support identity functions'))),Wl.concat(cl({key:F.key,value:pl,valueSpec:kl,style:hl,styleSpec:dl,expressionContext:"property",propertyType:Da,propertyKey:fl}))}function Yn(F){return Hn(F,"paint")}function Jn(F){return Hn(F,"layout")}function Wn(F){let Da=[];const ll=F.value,cl=F.key,hl=F.style,dl=F.styleSpec;ll.type||ll.ref||Da.push(new it(cl,ll,'either "type" or "ref" is required'));let pl=On(ll.type);const fl=On(ll.ref);if(ll.id){const dl=On(ll.id);for(let pl=0;pl<F.arrayIndex;pl++){const F=hl.layers[pl];On(F.id)===dl&&Da.push(new it(cl,ll.id,`duplicate layer id "${ll.id}", previously used at line ${F.id.__line__}`))}}if("ref"in ll){let F;["type","source","source-layer","filter","layout"].forEach((F=>{F in ll&&Da.push(new it(cl,ll[F],`"${F}" is prohibited for ref layers`))})),hl.layers.forEach((Da=>{On(Da.id)===fl&&(F=Da)})),F?F.ref?Da.push(new it(cl,ll.ref,"ref cannot reference another ref layer")):pl=On(F.type):Da.push(new it(cl,ll.ref,`ref layer "${fl}" not found`))}else if("background"!==pl)if(ll.source){const F=hl.sources&&hl.sources[ll.source],dl=F&&On(F.type);F?"vector"===dl&&"raster"===pl?Da.push(new it(cl,ll.source,`layer "${ll.id}" requires a raster source`)):"raster-dem"!==dl&&"hillshade"===pl?Da.push(new it(cl,ll.source,`layer "${ll.id}" requires a raster-dem source`)):"raster"===dl&&"raster"!==pl?Da.push(new it(cl,ll.source,`layer "${ll.id}" requires a vector source`)):"vector"!==dl||ll["source-layer"]?"raster-dem"===dl&&"hillshade"!==pl?Da.push(new it(cl,ll.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==pl||!ll.paint||!ll.paint["line-gradient"]||"geojson"===dl&&F.lineMetrics||Da.push(new it(cl,ll,`layer "${ll.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):Da.push(new it(cl,ll,`layer "${ll.id}" must specify a "source-layer"`)):Da.push(new it(cl,ll.source,`source "${ll.source}" not found`))}else Da.push(new it(cl,ll,'missing required property "source"'));return Da=Da.concat(Rn({key:cl,value:ll,valueSpec:dl.layer,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":()=>[],type:()=>F.validateSpec({key:`${cl}.type`,value:ll.type,valueSpec:dl.layer.type,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,object:ll,objectKey:"type"}),filter:Kn,layout:F=>Rn({layer:ll,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":F=>Jn(st({layerType:pl},F))}}),paint:F=>Rn({layer:ll,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":F=>Yn(st({layerType:pl},F))}})}})),Da}function Qn(F){const Da=F.value,ll=F.key,cl=un(Da);return"string"!==cl?[new it(ll,Da,`string expected, ${cl} found`)]:[]}const zd={promoteId:function({key:F,value:Da}){if("string"===un(Da))return Qn({key:F,value:Da});{const ll=[];for(const cl in Da)ll.push(...Qn({key:`${F}.${cl}`,value:Da[cl]}));return ll}}};function ei(F){const Da=F.value,ll=F.key,cl=F.styleSpec,hl=F.style,dl=F.validateSpec;if(!Da.type)return[new it(ll,Da,'"type" is required')];const pl=On(Da.type);let fl;switch(pl){case"vector":case"raster":return fl=Rn({key:ll,value:Da,valueSpec:cl[`source_${pl.replace("-","_")}`],style:F.style,styleSpec:cl,objectElementValidators:zd,validateSpec:dl}),fl;case"raster-dem":return fl=function(F){var Da;const ll=null!==(Da=F.sourceName)&&void 0!==Da?Da:"",cl=F.value,hl=F.styleSpec,dl=hl.source_raster_dem,pl=F.style;let fl=[];const Al=un(cl);if(void 0===cl)return fl;if("object"!==Al)return fl.push(new it("source_raster_dem",cl,`object expected, ${Al} found`)),fl;const bl="custom"===On(cl.encoding),kl=["redFactor","greenFactor","blueFactor","baseShift"],Dl=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Wl in cl)!bl&&kl.includes(Wl)?fl.push(new it(Wl,cl[Wl],`In "${ll}": "${Wl}" is only valid when "encoding" is set to "custom". ${Dl} encoding found`)):dl[Wl]?fl=fl.concat(F.validateSpec({key:Wl,value:cl[Wl],valueSpec:dl[Wl],validateSpec:F.validateSpec,style:pl,styleSpec:hl})):fl.push(new it(Wl,cl[Wl],`unknown property "${Wl}"`));return fl}({sourceName:ll,value:Da,style:F.style,styleSpec:cl,validateSpec:dl}),fl;case"geojson":if(fl=Rn({key:ll,value:Da,valueSpec:cl.source_geojson,style:hl,styleSpec:cl,validateSpec:dl,objectElementValidators:zd}),Da.cluster)for(const F in Da.clusterProperties){const[cl,hl]=Da.clusterProperties[F],pl="string"==typeof cl?[cl,["accumulated"],["get",F]]:cl;fl.push(...Zn({key:`${ll}.${F}.map`,value:hl,validateSpec:dl,expressionContext:"cluster-map"})),fl.push(...Zn({key:`${ll}.${F}.reduce`,value:pl,validateSpec:dl,expressionContext:"cluster-reduce"}))}return fl;case"video":return Rn({key:ll,value:Da,valueSpec:cl.source_video,style:hl,validateSpec:dl,styleSpec:cl});case"image":return Rn({key:ll,value:Da,valueSpec:cl.source_image,style:hl,validateSpec:dl,styleSpec:cl});case"canvas":return[new it(ll,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gn({key:`${ll}.type`,value:Da.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:hl,validateSpec:dl,styleSpec:cl})}}function ri(F){const Da=F.value,ll=F.styleSpec,cl=ll.light,hl=F.style;let dl=[];const pl=un(Da);if(void 0===Da)return dl;if("object"!==pl)return dl=dl.concat([new it("light",Da,`object expected, ${pl} found`)]),dl;for(const fl in Da){const pl=fl.match(/^(.*)-transition$/);dl=dl.concat(pl&&cl[pl[1]]&&cl[pl[1]].transition?F.validateSpec({key:fl,value:Da[fl],valueSpec:ll.transition,validateSpec:F.validateSpec,style:hl,styleSpec:ll}):cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],validateSpec:F.validateSpec,style:hl,styleSpec:ll}):[new it(fl,Da[fl],`unknown property "${fl}"`)])}return dl}function ni(F){const Da=F.value,ll=F.styleSpec,cl=ll.sky,hl=F.style,dl=un(Da);if(void 0===Da)return[];if("object"!==dl)return[new it("sky",Da,`object expected, ${dl} found`)];let pl=[];for(const fl in Da)pl=pl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],style:hl,styleSpec:ll}):[new it(fl,Da[fl],`unknown property "${fl}"`)]);return pl}function ii(F){const Da=F.value,ll=F.styleSpec,cl=ll.terrain,hl=F.style;let dl=[];const pl=un(Da);if(void 0===Da)return dl;if("object"!==pl)return dl=dl.concat([new it("terrain",Da,`object expected, ${pl} found`)]),dl;for(const fl in Da)dl=dl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],validateSpec:F.validateSpec,style:hl,styleSpec:ll}):[new it(fl,Da[fl],`unknown property "${fl}"`)]);return dl}function si(F){let Da=[];const ll=F.value,cl=F.key;if(Array.isArray(ll)){const hl=[],dl=[];for(const pl in ll)ll[pl].id&&hl.includes(ll[pl].id)&&Da.push(new it(cl,ll,`all the sprites' ids must be unique, but ${ll[pl].id} is duplicated`)),hl.push(ll[pl].id),ll[pl].url&&dl.includes(ll[pl].url)&&Da.push(new it(cl,ll,`all the sprites' URLs must be unique, but ${ll[pl].url} is duplicated`)),dl.push(ll[pl].url),Da=Da.concat(Rn({key:`${cl}[${pl}]`,value:ll[pl],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:F.validateSpec}));return Da}return Qn({key:cl,value:ll})}const Pd={"*":()=>[],array:Un,boolean:function(F){const Da=F.value,ll=F.key,cl=un(Da);return"boolean"!==cl?[new it(ll,Da,`boolean expected, ${cl} found`)]:[]},number:qn,color:function(F){const Da=F.key,ll=F.value,cl=un(ll);return"string"!==cl?[new it(Da,ll,`color expected, ${cl} found`)]:Kt.parse(String(ll))?[]:[new it(Da,ll,`color expected, "${ll}" found`)]},constants:Dn,enum:Gn,filter:Kn,function:Nn,layer:Wn,object:Rn,source:ei,light:ri,sky:ni,terrain:ii,projection:function(F){const Da=F.value,ll=F.styleSpec,cl=ll.projection,hl=F.style,dl=un(Da);if(void 0===Da)return[];if("object"!==dl)return[new it("projection",Da,`object expected, ${dl} found`)];let pl=[];for(const fl in Da)pl=pl.concat(cl[fl]?F.validateSpec({key:fl,value:Da[fl],valueSpec:cl[fl],style:hl,styleSpec:ll}):[new it(fl,Da[fl],`unknown property "${fl}"`)]);return pl},string:Qn,formatted:function(F){return 0===Qn(F).length?[]:Zn(F)},resolvedImage:function(F){return 0===Qn(F).length?[]:Zn(F)},padding:function(F){const Da=F.key,ll=F.value;if("array"===un(ll)){if(ll.length<1||ll.length>4)return[new it(Da,ll,`padding requires 1 to 4 values; ${ll.length} values found`)];const cl={type:"number"};let hl=[];for(let dl=0;dl<ll.length;dl++)hl=hl.concat(F.validateSpec({key:`${Da}[${dl}]`,value:ll[dl],validateSpec:F.validateSpec,valueSpec:cl}));return hl}return qn({key:Da,value:ll,valueSpec:{}})},variableAnchorOffsetCollection:function(F){const Da=F.key,ll=F.value,cl=un(ll),hl=F.styleSpec;if("array"!==cl||ll.length<1||ll.length%2!=0)return[new it(Da,ll,"variableAnchorOffsetCollection requires a non-empty array of even length")];let dl=[];for(let pl=0;pl<ll.length;pl+=2)dl=dl.concat(Gn({key:`${Da}[${pl}]`,value:ll[pl],valueSpec:hl.layout_symbol["text-anchor"]})),dl=dl.concat(Un({key:`${Da}[${pl+1}]`,value:ll[pl+1],valueSpec:{length:2,value:"number"},validateSpec:F.validateSpec,style:F.style,styleSpec:hl}));return dl},sprite:si};function oi(F){const Da=F.value,ll=F.valueSpec,cl=F.styleSpec;return F.validateSpec=oi,ll.expression&&cn(On(Da))?Nn(F):ll.expression&&vn(jn(Da))?Zn(F):ll.type&&Pd[ll.type]?Pd[ll.type](F):Rn(st({},F,{valueSpec:ll.type?cl[ll.type]:ll}))}function li(F){const Da=F.value,ll=F.key,cl=Qn(F);return cl.length||(-1===Da.indexOf("{fontstack}")&&cl.push(new it(ll,Da,'"glyphs" url must include a "{fontstack}" token')),-1===Da.indexOf("{range}")&&cl.push(new it(ll,Da,'"glyphs" url must include a "{range}" token'))),cl}function ui(F,Da=iu){let ll=[];return ll=ll.concat(oi({key:"",value:F,valueSpec:Da.$root,styleSpec:Da,style:F,validateSpec:oi,objectElementValidators:{glyphs:li,"*":()=>[]}})),F.constants&&(ll=ll.concat(Dn({key:"constants",value:F.constants,style:F,styleSpec:Da,validateSpec:oi}))),hi(ll)}function ci(F){return function(Da){return F({...Da,validateSpec:oi})}}function hi(F){return[].concat(F).sort(((F,Da)=>F.line-Da.line))}function pi(F){return function(...Da){return hi(F.apply(this,Da))}}ui.source=pi(ci(ei)),ui.sprite=pi(ci(si)),ui.glyphs=pi(ci(li)),ui.light=pi(ci(ri)),ui.sky=pi(ci(ni)),ui.terrain=pi(ci(ii)),ui.layer=pi(ci(Wn)),ui.filter=pi(ci(Kn)),ui.paintProperty=pi(ci(Yn)),ui.layoutProperty=pi(ci(Jn));const Dd=ui,Rd=Dd.light,Nd=Dd.sky,Ud=Dd.paintProperty,Bd=Dd.layoutProperty;function xi(F,Da){let ll=!1;if(Da&&Da.length)for(const cl of Da)F.fire(new N(new Error(cl.message))),ll=!0;return ll}class vi{constructor(F,Da,ll){const cl=this.cells=[];if(F instanceof ArrayBuffer){this.arrayBuffer=F;const hl=new Int32Array(this.arrayBuffer);F=hl[0],this.d=(Da=hl[1])+2*(ll=hl[2]);for(let F=0;F<this.d*this.d;F++){const Da=hl[3+F],ll=hl[3+F+1];cl.push(Da===ll?null:hl.subarray(Da,ll))}const dl=hl[3+cl.length+1];this.keys=hl.subarray(hl[3+cl.length],dl),this.bboxes=hl.subarray(dl),this.insert=this._insertReadonly}else{this.d=Da+2*ll;for(let F=0;F<this.d*this.d;F++)cl.push([]);this.keys=[],this.bboxes=[]}this.n=Da,this.extent=F,this.padding=ll,this.scale=Da/F,this.uid=0;const hl=ll/Da*F;this.min=-hl,this.max=F+hl}insert(F,Da,ll,cl,hl){this._forEachCell(Da,ll,cl,hl,this._insertCell,this.uid++,void 0,void 0),this.keys.push(F),this.bboxes.push(Da),this.bboxes.push(ll),this.bboxes.push(cl),this.bboxes.push(hl)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(F,Da,ll,cl,hl,dl){this.cells[hl].push(dl)}query(F,Da,ll,cl,hl){const dl=this.min,pl=this.max;if(F<=dl&&Da<=dl&&pl<=ll&&pl<=cl&&!hl)return Array.prototype.slice.call(this.keys);{const dl=[];return this._forEachCell(F,Da,ll,cl,this._queryCell,dl,{},hl),dl}}_queryCell(F,Da,ll,cl,hl,dl,pl,fl){const Al=this.cells[hl];if(null!==Al){const hl=this.keys,bl=this.bboxes;for(let kl=0;kl<Al.length;kl++){const Dl=Al[kl];if(void 0===pl[Dl]){const Al=4*Dl;(fl?fl(bl[Al+0],bl[Al+1],bl[Al+2],bl[Al+3]):F<=bl[Al+2]&&Da<=bl[Al+3]&&ll>=bl[Al+0]&&cl>=bl[Al+1])?(pl[Dl]=!0,dl.push(hl[Dl])):pl[Dl]=!1}}}}_forEachCell(F,Da,ll,cl,hl,dl,pl,fl){const Al=this._convertToCellCoord(F),bl=this._convertToCellCoord(Da),kl=this._convertToCellCoord(ll),Dl=this._convertToCellCoord(cl);for(let Wl=Al;Wl<=kl;Wl++)for(let Al=bl;Al<=Dl;Al++){const bl=this.d*Al+Wl;if((!fl||fl(this._convertFromCellCoord(Wl),this._convertFromCellCoord(Al),this._convertFromCellCoord(Wl+1),this._convertFromCellCoord(Al+1)))&&hl.call(this,F,Da,ll,cl,bl,dl,pl,fl))return}}_convertFromCellCoord(F){return(F-this.padding)/this.scale}_convertToCellCoord(F){return Math.max(0,Math.min(this.d-1,Math.floor(F*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const F=this.cells,Da=3+this.cells.length+1+1;let ll=0;for(let dl=0;dl<this.cells.length;dl++)ll+=this.cells[dl].length;const cl=new Int32Array(Da+ll+this.keys.length+this.bboxes.length);cl[0]=this.extent,cl[1]=this.n,cl[2]=this.padding;let hl=Da;for(let dl=0;dl<F.length;dl++){const Da=F[dl];cl[3+dl]=hl,cl.set(Da,hl),hl+=Da.length}return cl[3+F.length]=hl,cl.set(this.keys,hl),hl+=this.keys.length,cl[3+F.length+1]=hl,cl.set(this.bboxes,hl),hl+=this.bboxes.length,cl.buffer}static serialize(F,Da){const ll=F.toArrayBuffer();return Da&&Da.push(ll),{buffer:ll}}static deserialize(F){return new vi(F.buffer)}}const Od={};function wi(F,Da,ll={}){if(Od[F])throw new Error(`${F} is already registered.`);Object.defineProperty(Da,"_classRegistryKey",{value:F,writeable:!1}),Od[F]={klass:Da,omit:ll.omit||[],shallow:ll.shallow||[]}}wi("Object",Object),wi("TransferableGridIndex",vi),wi("Color",Kt),wi("Error",Error),wi("AJAXError",L),wi("ResolvedImage",te),wi("StylePropertyFunction",Sn),wi("StyleExpression",xn,{omit:["_evaluator"]}),wi("ZoomDependentExpression",_n),wi("ZoomConstantExpression",wn),wi("CompoundExpression",Xr,{omit:["_evaluate"]});for(const tf in Cd)Cd[tf]._classRegistryKey||wi(`Expression_${tf}`,Cd[tf]);function _i(F){return F&&"undefined"!=typeof ArrayBuffer&&(F instanceof ArrayBuffer||F.constructor&&"ArrayBuffer"===F.constructor.name)}function Ai(F){return F.$name||F.constructor._classRegistryKey}function Si(F){return!function(F){if(null===F||"object"!=typeof F)return!1;const Da=Ai(F);return!(!Da||"Object"===Da)}(F)&&(null==F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||F instanceof Boolean||F instanceof Number||F instanceof String||F instanceof Date||F instanceof RegExp||F instanceof Blob||F instanceof Error||_i(F)||I(F)||ArrayBuffer.isView(F)||F instanceof ImageData)}function ki(F,Da){if(Si(F))return(_i(F)||I(F))&&Da&&Da.push(F),ArrayBuffer.isView(F)&&Da&&Da.push(F.buffer),F instanceof ImageData&&Da&&Da.push(F.data.buffer),F;if(Array.isArray(F)){const ll=[];for(const cl of F)ll.push(ki(cl,Da));return ll}if("object"!=typeof F)throw new Error("can't serialize object of type "+typeof F);const ll=Ai(F);if(!ll)throw new Error(`can't serialize object of unregistered class ${F.constructor.name}`);if(!Od[ll])throw new Error(`${ll} is not registered.`);const{klass:cl}=Od[ll],hl=cl.serialize?cl.serialize(F,Da):{};if(cl.serialize){if(Da&&hl===Da[Da.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const cl in F){if(!F.hasOwnProperty(cl))continue;if(Od[ll].omit.indexOf(cl)>=0)continue;const dl=F[cl];hl[cl]=Od[ll].shallow.indexOf(cl)>=0?dl:ki(dl,Da)}F instanceof Error&&(hl.message=F.message)}if(hl.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ll&&(hl.$name=ll),hl}function Mi(F){if(Si(F))return F;if(Array.isArray(F))return F.map(Mi);if("object"!=typeof F)throw new Error("can't deserialize object of type "+typeof F);const Da=Ai(F)||"Object";if(!Od[Da])throw new Error(`can't deserialize unregistered class ${Da}`);const{klass:ll}=Od[Da];if(!ll)throw new Error(`can't deserialize unregistered class ${Da}`);if(ll.deserialize)return ll.deserialize(F);const cl=Object.create(ll.prototype);for(const hl of Object.keys(F)){if("$name"===hl)continue;const ll=F[hl];cl[hl]=Od[Da].shallow.indexOf(hl)>=0?ll:Mi(ll)}return cl}class Ii{constructor(){this.first=!0}update(F,Da){const ll=Math.floor(F);return this.first?(this.first=!1,this.lastIntegerZoom=ll,this.lastIntegerZoomTime=0,this.lastZoom=F,this.lastFloorZoom=ll,!0):(this.lastFloorZoom>ll?(this.lastIntegerZoom=ll+1,this.lastIntegerZoomTime=Da):this.lastFloorZoom<ll&&(this.lastIntegerZoom=ll,this.lastIntegerZoomTime=Da),F!==this.lastZoom&&(this.lastZoom=F,this.lastFloorZoom=ll,!0))}}const Fd={"Latin-1 Supplement":F=>F>=128&&F<=255,"Hangul Jamo":F=>F>=4352&&F<=4607,Khmer:F=>F>=6016&&F<=6143,"General Punctuation":F=>F>=8192&&F<=8303,"Letterlike Symbols":F=>F>=8448&&F<=8527,"Number Forms":F=>F>=8528&&F<=8591,"Miscellaneous Technical":F=>F>=8960&&F<=9215,"Control Pictures":F=>F>=9216&&F<=9279,"Optical Character Recognition":F=>F>=9280&&F<=9311,"Enclosed Alphanumerics":F=>F>=9312&&F<=9471,"Geometric Shapes":F=>F>=9632&&F<=9727,"Miscellaneous Symbols":F=>F>=9728&&F<=9983,"Miscellaneous Symbols and Arrows":F=>F>=11008&&F<=11263,"Ideographic Description Characters":F=>F>=12272&&F<=12287,"CJK Symbols and Punctuation":F=>F>=12288&&F<=12351,Katakana:F=>F>=12448&&F<=12543,Kanbun:F=>F>=12688&&F<=12703,"CJK Strokes":F=>F>=12736&&F<=12783,"Enclosed CJK Letters and Months":F=>F>=12800&&F<=13055,"CJK Compatibility":F=>F>=13056&&F<=13311,"Yijing Hexagram Symbols":F=>F>=19904&&F<=19967,"Private Use Area":F=>F>=57344&&F<=63743,"Vertical Forms":F=>F>=65040&&F<=65055,"CJK Compatibility Forms":F=>F>=65072&&F<=65103,"Small Form Variants":F=>F>=65104&&F<=65135,"Halfwidth and Fullwidth Forms":F=>F>=65280&&F<=65519};function Pi(F){for(const Da of F)if(Ti(Da.charCodeAt(0)))return!0;return!1}function Ci(F){for(const Da of F)if(!Ei(Da.charCodeAt(0)))return!1;return!0}function Bi(F){const Da=F.map((F=>{try{return new RegExp(`\\p{sc=${F}}`,"u").source}catch(F){return null}})).filter((F=>F));return new RegExp(Da.join("|"),"u")}const jd=Bi(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ei(F){return!jd.test(String.fromCodePoint(F))}const Vd=Bi(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ti(F){return!(746!==F&&747!==F&&(F<4352||!(Fd["CJK Compatibility Forms"](F)&&!(F>=65097&&F<=65103)||Fd["CJK Compatibility"](F)||Fd["CJK Strokes"](F)||!(!Fd["CJK Symbols and Punctuation"](F)||F>=12296&&F<=12305||F>=12308&&F<=12319||12336===F)||Fd["Enclosed CJK Letters and Months"](F)||Fd["Ideographic Description Characters"](F)||Fd.Kanbun(F)||Fd.Katakana(F)&&12540!==F||!(!Fd["Halfwidth and Fullwidth Forms"](F)||65288===F||65289===F||65293===F||F>=65306&&F<=65310||65339===F||65341===F||65343===F||F>=65371&&F<=65503||65507===F||F>=65512&&F<=65519)||!(!Fd["Small Form Variants"](F)||F>=65112&&F<=65118||F>=65123&&F<=65126)||Fd["Vertical Forms"](F)||Fd["Yijing Hexagram Symbols"](F)||/\p{sc=Cans}/u.test(String.fromCodePoint(F))||/\p{sc=Hang}/u.test(String.fromCodePoint(F))||Vd.test(String.fromCodePoint(F)))))}function $i(F){return!(Ti(F)||function(F){return!!(Fd["Latin-1 Supplement"](F)&&(167===F||169===F||174===F||177===F||188===F||189===F||190===F||215===F||247===F)||Fd["General Punctuation"](F)&&(8214===F||8224===F||8225===F||8240===F||8241===F||8251===F||8252===F||8258===F||8263===F||8264===F||8265===F||8273===F)||Fd["Letterlike Symbols"](F)||Fd["Number Forms"](F)||Fd["Miscellaneous Technical"](F)&&(F>=8960&&F<=8967||F>=8972&&F<=8991||F>=8996&&F<=9e3||9003===F||F>=9085&&F<=9114||F>=9150&&F<=9165||9167===F||F>=9169&&F<=9179||F>=9186&&F<=9215)||Fd["Control Pictures"](F)&&9251!==F||Fd["Optical Character Recognition"](F)||Fd["Enclosed Alphanumerics"](F)||Fd["Geometric Shapes"](F)||Fd["Miscellaneous Symbols"](F)&&!(F>=9754&&F<=9759)||Fd["Miscellaneous Symbols and Arrows"](F)&&(F>=11026&&F<=11055||F>=11088&&F<=11097||F>=11192&&F<=11243)||Fd["CJK Symbols and Punctuation"](F)||Fd.Katakana(F)||Fd["Private Use Area"](F)||Fd["CJK Compatibility Forms"](F)||Fd["Small Form Variants"](F)||Fd["Halfwidth and Fullwidth Forms"](F)||8734===F||8756===F||8757===F||F>=9984&&F<=10087||F>=10102&&F<=10131||65532===F||65533===F)}(F))}const Gd=Bi(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Di(F){return Gd.test(String.fromCodePoint(F))}function Oi(F,Da){return!(!Da&&Di(F)||F>=2304&&F<=3583||F>=3840&&F<=4255||Fd.Khmer(F))}function ji(F){for(const Da of F)if(Di(Da.charCodeAt(0)))return!0;return!1}const qd=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(F){this.pluginStatus=F.pluginStatus,this.pluginURL=F.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(F){this.applyArabicShaping=F.applyArabicShaping,this.processBidirectionalText=F.processBidirectionalText,this.processStyledBidirectionalText=F.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ui{constructor(F,Da){this.zoom=F,Da?(this.now=Da.now,this.fadeDuration=Da.fadeDuration,this.zoomHistory=Da.zoomHistory,this.transition=Da.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ii,this.transition={})}isSupportedScript(F){return function(F,Da){for(const ll of F)if(!Oi(ll.charCodeAt(0),Da))return!1;return!0}(F,"loaded"===qd.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const F=this.zoom,Da=F-Math.floor(F),ll=this.crossFadingFactor();return F>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:Da+(1-Da)*ll}:{fromScale:.5,toScale:1,t:1-(1-ll)*Da}}}class qi{constructor(F,Da){this.property=F,this.value=Da,this.expression=function(F,Da){if(cn(F))return new Sn(F,Da);if(vn(F)){const ll=An(F,Da);if("error"===ll.result)throw new Error(ll.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return ll.value}{let ll=F;return"color"===Da.type&&"string"==typeof F?ll=Kt.parse(F):"padding"!==Da.type||"number"!=typeof F&&!Array.isArray(F)?"variableAnchorOffsetCollection"===Da.type&&Array.isArray(F)&&(ll=Qt.parse(F)):ll=Jt.parse(F),{kind:"constant",evaluate:()=>ll}}}(void 0===Da?F.specification.default:Da,F.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(F,Da,ll){return this.property.possiblyEvaluate(this,F,Da,ll)}}class Ni{constructor(F){this.property=F,this.value=new qi(F,void 0)}transitioned(F,Da){return new Gi(this.property,this.value,Da,g({},F.transition,this.transition),F.now)}untransitioned(){return new Gi(this.property,this.value,null,{},0)}}class Zi{constructor(F){this._properties=F,this._values=Object.create(F.defaultTransitionablePropertyValues)}getValue(F){return w(this._values[F].value.value)}setValue(F,Da){Object.prototype.hasOwnProperty.call(this._values,F)||(this._values[F]=new Ni(this._values[F].property)),this._values[F].value=new qi(this._values[F].property,null===Da?void 0:w(Da))}getTransition(F){return w(this._values[F].transition)}setTransition(F,Da){Object.prototype.hasOwnProperty.call(this._values,F)||(this._values[F]=new Ni(this._values[F].property)),this._values[F].transition=w(Da)||void 0}serialize(){const F={};for(const Da of Object.keys(this._values)){const ll=this.getValue(Da);void 0!==ll&&(F[Da]=ll);const cl=this.getTransition(Da);void 0!==cl&&(F[`${Da}-transition`]=cl)}return F}transitioned(F,Da){const ll=new Ki(this._properties);for(const cl of Object.keys(this._values))ll._values[cl]=this._values[cl].transitioned(F,Da._values[cl]);return ll}untransitioned(){const F=new Ki(this._properties);for(const Da of Object.keys(this._values))F._values[Da]=this._values[Da].untransitioned();return F}}class Gi{constructor(F,Da,ll,cl,hl){this.property=F,this.value=Da,this.begin=hl+cl.delay||0,this.end=this.begin+cl.duration||0,F.specification.transition&&(cl.delay||cl.duration)&&(this.prior=ll)}possiblyEvaluate(F,Da,ll){const cl=F.now||0,hl=this.value.possiblyEvaluate(F,Da,ll),dl=this.prior;if(dl){if(cl>this.end)return this.prior=null,hl;if(this.value.isDataDriven())return this.prior=null,hl;if(cl<this.begin)return dl.possiblyEvaluate(F,Da,ll);{const pl=(cl-this.begin)/(this.end-this.begin);return this.property.interpolate(dl.possiblyEvaluate(F,Da,ll),hl,function(F){if(F<=0)return 0;if(F>=1)return 1;const Da=F*F,ll=Da*F;return 4*(F<.5?ll:3*(F-Da)+ll-.75)}(pl))}}return hl}}class Ki{constructor(F){this._properties=F,this._values=Object.create(F.defaultTransitioningPropertyValues)}possiblyEvaluate(F,Da,ll){const cl=new Yi(this._properties);for(const hl of Object.keys(this._values))cl._values[hl]=this._values[hl].possiblyEvaluate(F,Da,ll);return cl}hasTransition(){for(const F of Object.keys(this._values))if(this._values[F].prior)return!0;return!1}}class Xi{constructor(F){this._properties=F,this._values=Object.create(F.defaultPropertyValues)}hasValue(F){return void 0!==this._values[F].value}getValue(F){return w(this._values[F].value)}setValue(F,Da){this._values[F]=new qi(this._values[F].property,null===Da?void 0:w(Da))}serialize(){const F={};for(const Da of Object.keys(this._values)){const ll=this.getValue(Da);void 0!==ll&&(F[Da]=ll)}return F}possiblyEvaluate(F,Da,ll){const cl=new Yi(this._properties);for(const hl of Object.keys(this._values))cl._values[hl]=this._values[hl].possiblyEvaluate(F,Da,ll);return cl}}class Hi{constructor(F,Da,ll){this.property=F,this.value=Da,this.parameters=ll}isConstant(){return"constant"===this.value.kind}constantOr(F){return"constant"===this.value.kind?this.value.value:F}evaluate(F,Da,ll,cl){return this.property.evaluate(this.value,this.parameters,F,Da,ll,cl)}}class Yi{constructor(F){this._properties=F,this._values=Object.create(F.defaultPossiblyEvaluatedValues)}get(F){return this._values[F]}}class Ji{constructor(F){this.specification=F}possiblyEvaluate(F,Da){if(F.isDataDriven())throw new Error("Value should not be data driven");return F.expression.evaluate(Da)}interpolate(F,Da,ll){const cl=yd[this.specification.type];return cl?cl(F,Da,ll):F}}class Wi{constructor(F,Da){this.specification=F,this.overrides=Da}possiblyEvaluate(F,Da,ll,cl){return new Hi(this,"constant"===F.expression.kind||"camera"===F.expression.kind?{kind:"constant",value:F.expression.evaluate(Da,null,{},ll,cl)}:F.expression,Da)}interpolate(F,Da,ll){if("constant"!==F.value.kind||"constant"!==Da.value.kind)return F;if(void 0===F.value.value||void 0===Da.value.value)return new Hi(this,{kind:"constant",value:void 0},F.parameters);const cl=yd[this.specification.type];if(cl){const hl=cl(F.value.value,Da.value.value,ll);return new Hi(this,{kind:"constant",value:hl},F.parameters)}return F}evaluate(F,Da,ll,cl,hl,dl){return"constant"===F.kind?F.value:F.evaluate(Da,ll,cl,hl,dl)}}class Qi extends Wi{possiblyEvaluate(F,Da,ll,cl){if(void 0===F.value)return new Hi(this,{kind:"constant",value:void 0},Da);if("constant"===F.expression.kind){const hl=F.expression.evaluate(Da,null,{},ll,cl),dl="resolvedImage"===F.property.specification.type&&"string"!=typeof hl?hl.name:hl,pl=this._calculate(dl,dl,dl,Da);return new Hi(this,{kind:"constant",value:pl},Da)}if("camera"===F.expression.kind){const ll=this._calculate(F.expression.evaluate({zoom:Da.zoom-1}),F.expression.evaluate({zoom:Da.zoom}),F.expression.evaluate({zoom:Da.zoom+1}),Da);return new Hi(this,{kind:"constant",value:ll},Da)}return new Hi(this,F.expression,Da)}evaluate(F,Da,ll,cl,hl,dl){if("source"===F.kind){const pl=F.evaluate(Da,ll,cl,hl,dl);return this._calculate(pl,pl,pl,Da)}return"composite"===F.kind?this._calculate(F.evaluate({zoom:Math.floor(Da.zoom)-1},ll,cl),F.evaluate({zoom:Math.floor(Da.zoom)},ll,cl),F.evaluate({zoom:Math.floor(Da.zoom)+1},ll,cl),Da):F.value}_calculate(F,Da,ll,cl){return cl.zoom>cl.zoomHistory.lastIntegerZoom?{from:F,to:Da}:{from:ll,to:Da}}interpolate(F){return F}}class ts{constructor(F){this.specification=F}possiblyEvaluate(F,Da,ll,cl){if(void 0!==F.value){if("constant"===F.expression.kind){const hl=F.expression.evaluate(Da,null,{},ll,cl);return this._calculate(hl,hl,hl,Da)}return this._calculate(F.expression.evaluate(new Ui(Math.floor(Da.zoom-1),Da)),F.expression.evaluate(new Ui(Math.floor(Da.zoom),Da)),F.expression.evaluate(new Ui(Math.floor(Da.zoom+1),Da)),Da)}}_calculate(F,Da,ll,cl){return cl.zoom>cl.zoomHistory.lastIntegerZoom?{from:F,to:Da}:{from:ll,to:Da}}interpolate(F){return F}}class es{constructor(F){this.specification=F}possiblyEvaluate(F,Da,ll,cl){return!!F.expression.evaluate(Da,null,{},ll,cl)}interpolate(){return!1}}class rs{constructor(F){this.properties=F,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const Da in F){const ll=F[Da];ll.specification.overridable&&this.overridableProperties.push(Da);const cl=this.defaultPropertyValues[Da]=new qi(ll,void 0),hl=this.defaultTransitionablePropertyValues[Da]=new Ni(ll);this.defaultTransitioningPropertyValues[Da]=hl.untransitioned(),this.defaultPossiblyEvaluatedValues[Da]=cl.possiblyEvaluate({})}}}wi("DataDrivenProperty",Wi),wi("DataConstantProperty",Ji),wi("CrossFadedDataDrivenProperty",Qi),wi("CrossFadedProperty",ts),wi("ColorRampProperty",es);const Hd="-transition";class is extends Z{constructor(F,Da){if(super(),this.id=F.id,this.type=F.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==F.type&&(this.metadata=F.metadata,this.minzoom=F.minzoom,this.maxzoom=F.maxzoom,"background"!==F.type&&(this.source=F.source,this.sourceLayer=F["source-layer"],this.filter=F.filter),Da.layout&&(this._unevaluatedLayout=new Xi(Da.layout)),Da.paint)){this._transitionablePaint=new Zi(Da.paint);for(const Da in F.paint)this.setPaintProperty(Da,F.paint[Da],{validate:!1});for(const Da in F.layout)this.setLayoutProperty(Da,F.layout[Da],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yi(Da.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(F){return"visibility"===F?this.visibility:this._unevaluatedLayout.getValue(F)}setLayoutProperty(F,Da,ll={}){null!=Da&&this._validate(Bd,`layers.${this.id}.layout.${F}`,F,Da,ll)||("visibility"!==F?this._unevaluatedLayout.setValue(F,Da):this.visibility=Da)}getPaintProperty(F){return F.endsWith(Hd)?this._transitionablePaint.getTransition(F.slice(0,-11)):this._transitionablePaint.getValue(F)}setPaintProperty(F,Da,ll={}){if(null!=Da&&this._validate(Ud,`layers.${this.id}.paint.${F}`,F,Da,ll))return!1;if(F.endsWith(Hd))return this._transitionablePaint.setTransition(F.slice(0,-11),Da||void 0),!1;{const ll=this._transitionablePaint._values[F],cl="cross-faded-data-driven"===ll.property.specification["property-type"],hl=ll.value.isDataDriven(),dl=ll.value;this._transitionablePaint.setValue(F,Da),this._handleSpecialPaintPropertyUpdate(F);const pl=this._transitionablePaint._values[F].value;return pl.isDataDriven()||hl||cl||this._handleOverridablePaintPropertyUpdate(F,dl,pl)}}_handleSpecialPaintPropertyUpdate(F){}_handleOverridablePaintPropertyUpdate(F,Da,ll){return!1}isHidden(F){return!!(this.minzoom&&F<this.minzoom)||!!(this.maxzoom&&F>=this.maxzoom)||"none"===this.visibility}updateTransitions(F){this._transitioningPaint=this._transitionablePaint.transitioned(F,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(F,Da){F.getCrossfadeParameters&&(this._crossfadeParameters=F.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(F,void 0,Da)),this.paint=this._transitioningPaint.possiblyEvaluate(F,void 0,Da)}serialize(){const F={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(F.layout=F.layout||{},F.layout.visibility=this.visibility),b(F,((F,Da)=>!(void 0===F||"layout"===Da&&!Object.keys(F).length||"paint"===Da&&!Object.keys(F).length)))}_validate(F,Da,ll,cl,hl={}){return(!hl||!1!==hl.validate)&&xi(this,F.call(Dd,{key:Da,layerType:this.type,objectKey:ll,value:cl,styleSpec:iu,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const F in this.paint._values){const Da=this.paint.get(F);if(Da instanceof Hi&&an(Da.property.specification)&&("source"===Da.value.kind||"composite"===Da.value.kind)&&Da.value.isStateDependent)return!0}return!1}}const Zd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class as{constructor(F,Da){this._structArray=F,this._pos1=Da*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class os{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(F,Da){return F._trim(),Da&&(F.isTransferred=!0,Da.push(F.arrayBuffer)),{length:F.length,arrayBuffer:F.arrayBuffer}}static deserialize(F){const Da=Object.create(this.prototype);return Da.arrayBuffer=F.arrayBuffer,Da.length=F.length,Da.capacity=F.arrayBuffer.byteLength/Da.bytesPerElement,Da._refreshViews(),Da}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(F){this.reserve(F),this.length=F}reserve(F){if(F>this.capacity){this.capacity=Math.max(F,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const Da=this.uint8;this._refreshViews(),Da&&this.uint8.set(Da)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ls(F,Da=1){let ll=0,cl=0;return{members:F.map((F=>{const hl=Zd[F.type].BYTES_PER_ELEMENT,dl=ll=us(ll,Math.max(Da,hl)),pl=F.components||1;return cl=Math.max(cl,hl),ll+=hl*pl,{name:F.name,type:F.type,components:pl,offset:dl}})),size:us(ll,Math.max(cl,Da)),alignment:Da}}function us(F,Da){return Math.ceil(F/Da)*Da}class cs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.int16[cl+0]=Da,this.int16[cl+1]=ll,F}}cs.prototype.bytesPerElement=4,wi("StructArrayLayout2i4",cs);class hs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.int16[hl+0]=Da,this.int16[hl+1]=ll,this.int16[hl+2]=cl,F}}hs.prototype.bytesPerElement=6,wi("StructArrayLayout3i6",hs);class ps extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl){const hl=this.length;return this.resize(hl+1),this.emplace(hl,F,Da,ll,cl)}emplace(F,Da,ll,cl,hl){const dl=4*F;return this.int16[dl+0]=Da,this.int16[dl+1]=ll,this.int16[dl+2]=cl,this.int16[dl+3]=hl,F}}ps.prototype.bytesPerElement=8,wi("StructArrayLayout4i8",ps);class fs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=6*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.int16[fl+2]=cl,this.int16[fl+3]=hl,this.int16[fl+4]=dl,this.int16[fl+5]=pl,F}}fs.prototype.bytesPerElement=12,wi("StructArrayLayout2i4i12",fs);class ds extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=4*F,Al=8*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.uint8[Al+4]=cl,this.uint8[Al+5]=hl,this.uint8[Al+6]=dl,this.uint8[Al+7]=pl,F}}ds.prototype.bytesPerElement=8,wi("StructArrayLayout2i4ub8",ds);class ys extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.float32[cl+0]=Da,this.float32[cl+1]=ll,F}}ys.prototype.bytesPerElement=8,wi("StructArrayLayout2f8",ys);class ms extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){const kl=this.length;return this.resize(kl+1),this.emplace(kl,F,Da,ll,cl,hl,dl,pl,fl,Al,bl)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl){const Dl=10*F;return this.uint16[Dl+0]=Da,this.uint16[Dl+1]=ll,this.uint16[Dl+2]=cl,this.uint16[Dl+3]=hl,this.uint16[Dl+4]=dl,this.uint16[Dl+5]=pl,this.uint16[Dl+6]=fl,this.uint16[Dl+7]=Al,this.uint16[Dl+8]=bl,this.uint16[Dl+9]=kl,F}}ms.prototype.bytesPerElement=20,wi("StructArrayLayout10ui20",ms);class gs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){const Wl=this.length;return this.resize(Wl+1),this.emplace(Wl,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=12*F;return this.int16[Ql+0]=Da,this.int16[Ql+1]=ll,this.int16[Ql+2]=cl,this.int16[Ql+3]=hl,this.uint16[Ql+4]=dl,this.uint16[Ql+5]=pl,this.uint16[Ql+6]=fl,this.uint16[Ql+7]=Al,this.int16[Ql+8]=bl,this.int16[Ql+9]=kl,this.int16[Ql+10]=Dl,this.int16[Ql+11]=Wl,F}}gs.prototype.bytesPerElement=24,wi("StructArrayLayout4i4ui4i24",gs);class xs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.float32[hl+0]=Da,this.float32[hl+1]=ll,this.float32[hl+2]=cl,F}}xs.prototype.bytesPerElement=12,wi("StructArrayLayout3f12",xs);class vs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.uint32[1*F+0]=Da,F}}vs.prototype.bytesPerElement=4,wi("StructArrayLayout1ul4",vs);class bs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=this.length;return this.resize(bl+1),this.emplace(bl,F,Da,ll,cl,hl,dl,pl,fl,Al)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){const kl=10*F,Dl=5*F;return this.int16[kl+0]=Da,this.int16[kl+1]=ll,this.int16[kl+2]=cl,this.int16[kl+3]=hl,this.int16[kl+4]=dl,this.int16[kl+5]=pl,this.uint32[Dl+3]=fl,this.uint16[kl+8]=Al,this.uint16[kl+9]=bl,F}}bs.prototype.bytesPerElement=20,wi("StructArrayLayout6i1ul2ui20",bs);class ws extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=6*F;return this.int16[fl+0]=Da,this.int16[fl+1]=ll,this.int16[fl+2]=cl,this.int16[fl+3]=hl,this.int16[fl+4]=dl,this.int16[fl+5]=pl,F}}ws.prototype.bytesPerElement=12,wi("StructArrayLayout2i2i2i12",ws);class _s extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl){const dl=this.length;return this.resize(dl+1),this.emplace(dl,F,Da,ll,cl,hl)}emplace(F,Da,ll,cl,hl,dl){const pl=4*F,fl=8*F;return this.float32[pl+0]=Da,this.float32[pl+1]=ll,this.float32[pl+2]=cl,this.int16[fl+6]=hl,this.int16[fl+7]=dl,F}}_s.prototype.bytesPerElement=16,wi("StructArrayLayout2f1f2i16",_s);class As extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl){const pl=this.length;return this.resize(pl+1),this.emplace(pl,F,Da,ll,cl,hl,dl)}emplace(F,Da,ll,cl,hl,dl,pl){const fl=16*F,Al=4*F,bl=8*F;return this.uint8[fl+0]=Da,this.uint8[fl+1]=ll,this.float32[Al+1]=cl,this.float32[Al+2]=hl,this.int16[bl+6]=dl,this.int16[bl+7]=pl,F}}As.prototype.bytesPerElement=16,wi("StructArrayLayout2ub2f2i16",As);class Ss extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.uint16[hl+0]=Da,this.uint16[hl+1]=ll,this.uint16[hl+2]=cl,F}}Ss.prototype.bytesPerElement=6,wi("StructArrayLayout3ui6",Ss);class ks extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu){const iu=this.length;return this.resize(iu+1),this.emplace(iu,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu){const su=24*F,cu=12*F,uu=48*F;return this.int16[su+0]=Da,this.int16[su+1]=ll,this.uint16[su+2]=cl,this.uint16[su+3]=hl,this.uint32[cu+2]=dl,this.uint32[cu+3]=pl,this.uint32[cu+4]=fl,this.uint16[su+10]=Al,this.uint16[su+11]=bl,this.uint16[su+12]=kl,this.float32[cu+7]=Dl,this.float32[cu+8]=Wl,this.uint8[uu+36]=Ql,this.uint8[uu+37]=wc,this.uint8[uu+38]=Sc,this.uint32[cu+10]=eu,this.int16[su+22]=iu,F}}ks.prototype.bytesPerElement=48,wi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ks);class Ms extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih){const gh=this.length;return this.resize(gh+1),this.emplace(gh,F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih)}emplace(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu,qu,ih,gh){const ed=32*F,td=16*F;return this.int16[ed+0]=Da,this.int16[ed+1]=ll,this.int16[ed+2]=cl,this.int16[ed+3]=hl,this.int16[ed+4]=dl,this.int16[ed+5]=pl,this.int16[ed+6]=fl,this.int16[ed+7]=Al,this.uint16[ed+8]=bl,this.uint16[ed+9]=kl,this.uint16[ed+10]=Dl,this.uint16[ed+11]=Wl,this.uint16[ed+12]=Ql,this.uint16[ed+13]=wc,this.uint16[ed+14]=Sc,this.uint16[ed+15]=eu,this.uint16[ed+16]=iu,this.uint16[ed+17]=su,this.uint16[ed+18]=cu,this.uint16[ed+19]=uu,this.uint16[ed+20]=hu,this.uint16[ed+21]=Lu,this.uint16[ed+22]=zu,this.uint32[td+12]=Du,this.float32[td+13]=Nu,this.float32[td+14]=qu,this.uint16[ed+30]=ih,this.uint16[ed+31]=gh,F}}Ms.prototype.bytesPerElement=64,wi("StructArrayLayout8i15ui1ul2f2ui64",Ms);class Is extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.float32[1*F+0]=Da,F}}Is.prototype.bytesPerElement=4,wi("StructArrayLayout1f4",Is);class zs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=3*F;return this.uint16[6*F+0]=Da,this.float32[hl+1]=ll,this.float32[hl+2]=cl,F}}zs.prototype.bytesPerElement=12,wi("StructArrayLayout1ui2f12",zs);class Ps extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da,ll){const cl=this.length;return this.resize(cl+1),this.emplace(cl,F,Da,ll)}emplace(F,Da,ll,cl){const hl=4*F;return this.uint32[2*F+0]=Da,this.uint16[hl+2]=ll,this.uint16[hl+3]=cl,F}}Ps.prototype.bytesPerElement=8,wi("StructArrayLayout1ul2ui8",Ps);class Cs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F,Da){const ll=this.length;return this.resize(ll+1),this.emplace(ll,F,Da)}emplace(F,Da,ll){const cl=2*F;return this.uint16[cl+0]=Da,this.uint16[cl+1]=ll,F}}Cs.prototype.bytesPerElement=4,wi("StructArrayLayout2ui4",Cs);class Bs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(F){const Da=this.length;return this.resize(Da+1),this.emplace(Da,F)}emplace(F,Da){return this.uint16[1*F+0]=Da,F}}Bs.prototype.bytesPerElement=2,wi("StructArrayLayout1ui2",Bs);class Vs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(F,Da,ll,cl){const hl=this.length;return this.resize(hl+1),this.emplace(hl,F,Da,ll,cl)}emplace(F,Da,ll,cl,hl){const dl=4*F;return this.float32[dl+0]=Da,this.float32[dl+1]=ll,this.float32[dl+2]=cl,this.float32[dl+3]=hl,F}}Vs.prototype.bytesPerElement=16,wi("StructArrayLayout4f16",Vs);class Es extends as{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ll(this.anchorPointX,this.anchorPointY)}}Es.prototype.size=20;class Fs extends bs{get(F){return new Es(this,F)}}wi("CollisionBoxArray",Fs);class Ts extends as{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(F){this._structArray.uint8[this._pos1+37]=F}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(F){this._structArray.uint8[this._pos1+38]=F}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(F){this._structArray.uint32[this._pos4+10]=F}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ts.prototype.size=48;class $s extends ks{get(F){return new Ts(this,F)}}wi("PlacedSymbolArray",$s);class Ls extends as{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(F){this._structArray.uint32[this._pos4+12]=F}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ls.prototype.size=64;class Ds extends Ms{get(F){return new Ls(this,F)}}wi("SymbolInstanceArray",Ds);class Os extends Is{getoffsetX(F){return this.float32[1*F+0]}}wi("GlyphOffsetArray",Os);class js extends hs{getx(F){return this.int16[3*F+0]}gety(F){return this.int16[3*F+1]}gettileUnitDistanceFromAnchor(F){return this.int16[3*F+2]}}wi("SymbolLineVertexArray",js);class Rs extends as{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Rs.prototype.size=12;class Us extends zs{get(F){return new Rs(this,F)}}wi("TextAnchorOffsetArray",Us);class qs extends as{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qs.prototype.size=8;class Ns extends Ps{get(F){return new qs(this,F)}}wi("FeatureIndexArray",Ns);class Zs extends cs{}class Gs extends cs{}class Ks extends cs{}class Xs extends fs{}class Hs extends ds{}class Ys extends ys{}class Js extends ms{}class Ws extends gs{}class Qs extends xs{}class ta extends vs{}class ea extends ws{}class ra extends As{}class na extends Ss{}class ia extends Cs{}const Wd=ls([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kd}=Wd;class oa{constructor(F=[]){this.segments=F}prepareSegment(F,Da,ll,cl){let hl=this.segments[this.segments.length-1];return F>oa.MAX_VERTEX_ARRAY_LENGTH&&A(`Max vertices per segment is ${oa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${F}`),(!hl||hl.vertexLength+F>oa.MAX_VERTEX_ARRAY_LENGTH||hl.sortKey!==cl)&&(hl={vertexOffset:Da.length,primitiveOffset:ll.length,vertexLength:0,primitiveLength:0},void 0!==cl&&(hl.sortKey=cl),this.segments.push(hl)),hl}get(){return this.segments}destroy(){for(const F of this.segments)for(const Da in F.vaos)F.vaos[Da].destroy()}static simpleSegment(F,Da,ll,cl){return new oa([{vertexOffset:F,primitiveOffset:Da,vertexLength:ll,primitiveLength:cl,vaos:{},sortKey:0}])}}function la(F,Da){return 256*(F=y(Math.floor(F),0,255))+y(Math.floor(Da),0,255)}oa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wi("SegmentVector",oa);const Qd=ls([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xd={exports:{}},Yd={exports:{}};Yd.exports=function(F,Da){var ll,cl,hl,dl,pl,fl,Al,bl;for(cl=F.length-(ll=3&F.length),hl=Da,pl=3432918353,fl=461845907,bl=0;bl<cl;)Al=255&F.charCodeAt(bl)|(255&F.charCodeAt(++bl))<<8|(255&F.charCodeAt(++bl))<<16|(255&F.charCodeAt(++bl))<<24,++bl,hl=27492+(65535&(dl=5*(65535&(hl=(hl^=Al=(65535&(Al=(Al=(65535&Al)*pl+(((Al>>>16)*pl&65535)<<16)&4294967295)<<15|Al>>>17))*fl+(((Al>>>16)*fl&65535)<<16)&4294967295)<<13|hl>>>19))+((5*(hl>>>16)&65535)<<16)&4294967295))+((58964+(dl>>>16)&65535)<<16);switch(Al=0,ll){case 3:Al^=(255&F.charCodeAt(bl+2))<<16;case 2:Al^=(255&F.charCodeAt(bl+1))<<8;case 1:hl^=Al=(65535&(Al=(Al=(65535&(Al^=255&F.charCodeAt(bl)))*pl+(((Al>>>16)*pl&65535)<<16)&4294967295)<<15|Al>>>17))*fl+(((Al>>>16)*fl&65535)<<16)&4294967295}return hl^=F.length,hl=2246822507*(65535&(hl^=hl>>>16))+((2246822507*(hl>>>16)&65535)<<16)&4294967295,hl=3266489909*(65535&(hl^=hl>>>13))+((3266489909*(hl>>>16)&65535)<<16)&4294967295,(hl^=hl>>>16)>>>0};var Jd=Yd.exports,$d={exports:{}};$d.exports=function(F,Da){for(var ll,cl=F.length,hl=Da^cl,dl=0;cl>=4;)ll=1540483477*(65535&(ll=255&F.charCodeAt(dl)|(255&F.charCodeAt(++dl))<<8|(255&F.charCodeAt(++dl))<<16|(255&F.charCodeAt(++dl))<<24))+((1540483477*(ll>>>16)&65535)<<16),hl=1540483477*(65535&hl)+((1540483477*(hl>>>16)&65535)<<16)^(ll=1540483477*(65535&(ll^=ll>>>24))+((1540483477*(ll>>>16)&65535)<<16)),cl-=4,++dl;switch(cl){case 3:hl^=(255&F.charCodeAt(dl+2))<<16;case 2:hl^=(255&F.charCodeAt(dl+1))<<8;case 1:hl=1540483477*(65535&(hl^=255&F.charCodeAt(dl)))+((1540483477*(hl>>>16)&65535)<<16)}return hl=1540483477*(65535&(hl^=hl>>>13))+((1540483477*(hl>>>16)&65535)<<16),(hl^=hl>>>15)>>>0};var lp=Jd,mp=$d.exports;Xd.exports=lp,Xd.exports.murmur3=lp,Xd.exports.murmur2=mp;var gp=r(Xd.exports);class ga{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(F,Da,ll,cl){this.ids.push(xa(F)),this.positions.push(Da,ll,cl)}getPositions(F){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const Da=xa(F);let ll=0,cl=this.ids.length-1;for(;ll<cl;){const F=ll+cl>>1;this.ids[F]>=Da?cl=F:ll=F+1}const hl=[];for(;this.ids[ll]===Da;)hl.push({index:this.positions[3*ll],start:this.positions[3*ll+1],end:this.positions[3*ll+2]}),ll++;return hl}static serialize(F,Da){const ll=new Float64Array(F.ids),cl=new Uint32Array(F.positions);return va(ll,cl,0,ll.length-1),Da&&Da.push(ll.buffer,cl.buffer),{ids:ll,positions:cl}}static deserialize(F){const Da=new ga;return Da.ids=F.ids,Da.positions=F.positions,Da.indexed=!0,Da}}function xa(F){const Da=+F;return!isNaN(Da)&&Da<=Number.MAX_SAFE_INTEGER?Da:gp(String(F))}function va(F,Da,ll,cl){for(;ll<cl;){const hl=F[ll+cl>>1];let dl=ll-1,pl=cl+1;for(;;){do{dl++}while(F[dl]<hl);do{pl--}while(F[pl]>hl);if(dl>=pl)break;ba(F,dl,pl),ba(Da,3*dl,3*pl),ba(Da,3*dl+1,3*pl+1),ba(Da,3*dl+2,3*pl+2)}pl-ll<cl-pl?(va(F,Da,ll,pl),ll=pl+1):(va(F,Da,pl+1,cl),cl=pl)}}function ba(F,Da,ll){const cl=F[Da];F[Da]=F[ll],F[ll]=cl}wi("FeaturePositionMap",ga);class wa{constructor(F,Da){this.gl=F.gl,this.location=Da}}class _a extends wa{constructor(F,Da){super(F,Da),this.current=0}set(F){this.current!==F&&(this.current=F,this.gl.uniform1f(this.location,F))}}class Aa extends wa{constructor(F,Da){super(F,Da),this.current=[0,0,0,0]}set(F){F[0]===this.current[0]&&F[1]===this.current[1]&&F[2]===this.current[2]&&F[3]===this.current[3]||(this.current=F,this.gl.uniform4f(this.location,F[0],F[1],F[2],F[3]))}}class Sa extends wa{constructor(F,Da){super(F,Da),this.current=Kt.transparent}set(F){F.r===this.current.r&&F.g===this.current.g&&F.b===this.current.b&&F.a===this.current.a||(this.current=F,this.gl.uniform4f(this.location,F.r,F.g,F.b,F.a))}}const Ap=new Float32Array(16);function Ma(F){return[la(255*F.r,255*F.g),la(255*F.b,255*F.a)]}class Ia{constructor(F,Da,ll){this.value=F,this.uniformNames=Da.map((F=>`u_${F}`)),this.type=ll}setUniform(F,Da,ll){F.set(ll.constantOr(this.value))}getBinding(F,Da,ll){return"color"===this.type?new Sa(F,Da):new _a(F,Da)}}class za{constructor(F,Da){this.uniformNames=Da.map((F=>`u_${F}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(F,Da){this.pixelRatioFrom=Da.pixelRatio,this.pixelRatioTo=F.pixelRatio,this.patternFrom=Da.tlbr,this.patternTo=F.tlbr}setUniform(F,Da,ll,cl){const hl="u_pattern_to"===cl?this.patternTo:"u_pattern_from"===cl?this.patternFrom:"u_pixel_ratio_to"===cl?this.pixelRatioTo:"u_pixel_ratio_from"===cl?this.pixelRatioFrom:null;hl&&F.set(hl)}getBinding(F,Da,ll){return"u_pattern"===ll.substr(0,9)?new Aa(F,Da):new _a(F,Da)}}class Pa{constructor(F,Da,ll,cl){this.expression=F,this.type=ll,this.maxValue=0,this.paintVertexAttributes=Da.map((F=>({name:`a_${F}`,type:"Float32",components:"color"===ll?2:1,offset:0}))),this.paintVertexArray=new cl}populatePaintArray(F,Da,ll,cl,hl){const dl=this.paintVertexArray.length,pl=this.expression.evaluate(new Ui(0),Da,{},cl,[],hl);this.paintVertexArray.resize(F),this._setPaintValue(dl,F,pl)}updatePaintArray(F,Da,ll,cl){const hl=this.expression.evaluate({zoom:0},ll,cl);this._setPaintValue(F,Da,hl)}_setPaintValue(F,Da,ll){if("color"===this.type){const cl=Ma(ll);for(let ll=F;ll<Da;ll++)this.paintVertexArray.emplace(ll,cl[0],cl[1])}else{for(let cl=F;cl<Da;cl++)this.paintVertexArray.emplace(cl,ll);this.maxValue=Math.max(this.maxValue,Math.abs(ll))}}upload(F){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=F.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ca{constructor(F,Da,ll,cl,hl,dl){this.expression=F,this.uniformNames=Da.map((F=>`u_${F}_t`)),this.type=ll,this.useIntegerZoom=cl,this.zoom=hl,this.maxValue=0,this.paintVertexAttributes=Da.map((F=>({name:`a_${F}`,type:"Float32",components:"color"===ll?4:2,offset:0}))),this.paintVertexArray=new dl}populatePaintArray(F,Da,ll,cl,hl){const dl=this.expression.evaluate(new Ui(this.zoom),Da,{},cl,[],hl),pl=this.expression.evaluate(new Ui(this.zoom+1),Da,{},cl,[],hl),fl=this.paintVertexArray.length;this.paintVertexArray.resize(F),this._setPaintValue(fl,F,dl,pl)}updatePaintArray(F,Da,ll,cl){const hl=this.expression.evaluate({zoom:this.zoom},ll,cl),dl=this.expression.evaluate({zoom:this.zoom+1},ll,cl);this._setPaintValue(F,Da,hl,dl)}_setPaintValue(F,Da,ll,cl){if("color"===this.type){const hl=Ma(ll),dl=Ma(cl);for(let ll=F;ll<Da;ll++)this.paintVertexArray.emplace(ll,hl[0],hl[1],dl[0],dl[1])}else{for(let hl=F;hl<Da;hl++)this.paintVertexArray.emplace(hl,ll,cl);this.maxValue=Math.max(this.maxValue,Math.abs(ll),Math.abs(cl))}}upload(F){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=F.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(F,Da){const ll=this.useIntegerZoom?Math.floor(Da.zoom):Da.zoom,cl=y(this.expression.interpolationFactor(ll,this.zoom,this.zoom+1),0,1);F.set(cl)}getBinding(F,Da,ll){return new _a(F,Da)}}class Ba{constructor(F,Da,ll,cl,hl,dl){this.expression=F,this.type=Da,this.useIntegerZoom=ll,this.zoom=cl,this.layerId=dl,this.zoomInPaintVertexArray=new hl,this.zoomOutPaintVertexArray=new hl}populatePaintArray(F,Da,ll){const cl=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(F),this.zoomOutPaintVertexArray.resize(F),this._setPaintValues(cl,F,Da.patterns&&Da.patterns[this.layerId],ll)}updatePaintArray(F,Da,ll,cl,hl){this._setPaintValues(F,Da,ll.patterns&&ll.patterns[this.layerId],hl)}_setPaintValues(F,Da,ll,cl){if(!cl||!ll)return;const{min:hl,mid:dl,max:pl}=ll,fl=cl[hl],Al=cl[dl],bl=cl[pl];if(fl&&Al&&bl)for(let kl=F;kl<Da;kl++)this.zoomInPaintVertexArray.emplace(kl,Al.tl[0],Al.tl[1],Al.br[0],Al.br[1],fl.tl[0],fl.tl[1],fl.br[0],fl.br[1],Al.pixelRatio,fl.pixelRatio),this.zoomOutPaintVertexArray.emplace(kl,Al.tl[0],Al.tl[1],Al.br[0],Al.br[1],bl.tl[0],bl.tl[1],bl.br[0],bl.br[1],Al.pixelRatio,bl.pixelRatio)}upload(F){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=F.createVertexBuffer(this.zoomInPaintVertexArray,Qd.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=F.createVertexBuffer(this.zoomOutPaintVertexArray,Qd.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Va{constructor(F,Da,ll){this.binders={},this._buffers=[];const cl=[];for(const hl in F.paint._values){if(!ll(hl))continue;const dl=F.paint.get(hl);if(!(dl instanceof Hi&&an(dl.property.specification)))continue;const pl=Fa(hl,F.type),fl=dl.value,Al=dl.property.specification.type,bl=dl.property.useIntegerZoom,kl=dl.property.specification["property-type"],Dl="cross-faded"===kl||"cross-faded-data-driven"===kl;if("constant"===fl.kind)this.binders[hl]=Dl?new za(fl.value,pl):new Ia(fl.value,pl,Al),cl.push(`/u_${hl}`);else if("source"===fl.kind||Dl){const ll=Ta(hl,Al,"source");this.binders[hl]=Dl?new Ba(fl,Al,bl,Da,ll,F.id):new Pa(fl,pl,Al,ll),cl.push(`/a_${hl}`)}else{const F=Ta(hl,Al,"composite");this.binders[hl]=new Ca(fl,pl,Al,bl,Da,F),cl.push(`/z_${hl}`)}}this.cacheKey=cl.sort().join("")}getMaxValue(F){const Da=this.binders[F];return Da instanceof Pa||Da instanceof Ca?Da.maxValue:0}populatePaintArrays(F,Da,ll,cl,hl){for(const dl in this.binders){const pl=this.binders[dl];(pl instanceof Pa||pl instanceof Ca||pl instanceof Ba)&&pl.populatePaintArray(F,Da,ll,cl,hl)}}setConstantPatternPositions(F,Da){for(const ll in this.binders){const cl=this.binders[ll];cl instanceof za&&cl.setConstantPatternPositions(F,Da)}}updatePaintArrays(F,Da,ll,cl,hl){let dl=!1;for(const pl in F){const fl=Da.getPositions(pl);for(const Da of fl){const fl=ll.feature(Da.index);for(const ll in this.binders){const Al=this.binders[ll];if((Al instanceof Pa||Al instanceof Ca||Al instanceof Ba)&&!0===Al.expression.isStateDependent){const bl=cl.paint.get(ll);Al.expression=bl.value,Al.updatePaintArray(Da.start,Da.end,fl,F[pl],hl),dl=!0}}}}return dl}defines(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];(ll instanceof Ia||ll instanceof za)&&F.push(...ll.uniformNames.map((F=>`#define HAS_UNIFORM_${F}`)))}return F}getBinderAttributes(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];if(ll instanceof Pa||ll instanceof Ca)for(let Da=0;Da<ll.paintVertexAttributes.length;Da++)F.push(ll.paintVertexAttributes[Da].name);else if(ll instanceof Ba)for(let Da=0;Da<Qd.members.length;Da++)F.push(Qd.members[Da].name)}return F}getBinderUniforms(){const F=[];for(const Da in this.binders){const ll=this.binders[Da];if(ll instanceof Ia||ll instanceof za||ll instanceof Ca)for(const Da of ll.uniformNames)F.push(Da)}return F}getPaintVertexBuffers(){return this._buffers}getUniforms(F,Da){const ll=[];for(const cl in this.binders){const hl=this.binders[cl];if(hl instanceof Ia||hl instanceof za||hl instanceof Ca)for(const dl of hl.uniformNames)if(Da[dl]){const pl=hl.getBinding(F,Da[dl],dl);ll.push({name:dl,property:cl,binding:pl})}}return ll}setUniforms(F,Da,ll,cl){for(const{name:hl,property:dl,binding:pl}of Da)this.binders[dl].setUniform(pl,cl,ll.get(dl),hl)}updatePaintBuffers(F){this._buffers=[];for(const Da in this.binders){const ll=this.binders[Da];if(F&&ll instanceof Ba){const Da=2===F.fromScale?ll.zoomInPaintVertexBuffer:ll.zoomOutPaintVertexBuffer;Da&&this._buffers.push(Da)}else(ll instanceof Pa||ll instanceof Ca)&&ll.paintVertexBuffer&&this._buffers.push(ll.paintVertexBuffer)}}upload(F){for(const Da in this.binders){const ll=this.binders[Da];(ll instanceof Pa||ll instanceof Ca||ll instanceof Ba)&&ll.upload(F)}this.updatePaintBuffers()}destroy(){for(const F in this.binders){const Da=this.binders[F];(Da instanceof Pa||Da instanceof Ca||Da instanceof Ba)&&Da.destroy()}}}class Ea{constructor(F,Da,ll=()=>!0){this.programConfigurations={};for(const cl of F)this.programConfigurations[cl.id]=new Va(cl,Da,ll);this.needsUpload=!1,this._featureMap=new ga,this._bufferOffset=0}populatePaintArrays(F,Da,ll,cl,hl,dl){for(const pl in this.programConfigurations)this.programConfigurations[pl].populatePaintArrays(F,Da,cl,hl,dl);void 0!==Da.id&&this._featureMap.add(Da.id,ll,this._bufferOffset,F),this._bufferOffset=F,this.needsUpload=!0}updatePaintArrays(F,Da,ll,cl){for(const hl of ll)this.needsUpload=this.programConfigurations[hl.id].updatePaintArrays(F,this._featureMap,Da,hl,cl)||this.needsUpload}get(F){return this.programConfigurations[F]}upload(F){if(this.needsUpload){for(const Da in this.programConfigurations)this.programConfigurations[Da].upload(F);this.needsUpload=!1}}destroy(){for(const F in this.programConfigurations)this.programConfigurations[F].destroy()}}function Fa(F,Da){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[F]||[F.replace(`${Da}-`,"").replace(/-/g,"_")]}function Ta(F,Da,ll){const cl={color:{source:ys,composite:Vs},number:{source:Is,composite:ys}},hl=function(F){return{"line-pattern":{source:Js,composite:Js},"fill-pattern":{source:Js,composite:Js},"fill-extrusion-pattern":{source:Js,composite:Js}}[F]}(F);return hl&&hl[ll]||cl[Da][ll]}wi("ConstantBinder",Ia),wi("CrossFadedConstantBinder",za),wi("SourceExpressionBinder",Pa),wi("CrossFadedCompositeBinder",Ba),wi("CompositeExpressionBinder",Ca),wi("ProgramConfiguration",Va,{omit:["_buffers"]}),wi("ProgramConfigurationSet",Ea);const vp=8192,_p=Math.pow(2,14)-1,xp=-_p-1;function Oa(F){const Da=vp/F.extent,ll=F.loadGeometry();for(let cl=0;cl<ll.length;cl++){const F=ll[cl];for(let ll=0;ll<F.length;ll++){const cl=F[ll],hl=Math.round(cl.x*Da),dl=Math.round(cl.y*Da);cl.x=y(hl,xp,_p),cl.y=y(dl,xp,_p),(hl<cl.x||hl>cl.x+1||dl<cl.y||dl>cl.y+1)&&A("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return ll}function ja(F,Da){return{type:F.type,id:F.id,properties:F.properties,geometry:Da?Oa(F):[]}}function Ra(F,Da,ll,cl,hl){F.emplaceBack(2*Da+(cl+1)/2,2*ll+(hl+1)/2)}class Ua{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.layoutVertexArray=new Gs,this.indexArray=new na,this.segments=new oa,this.programConfigurations=new Ea(F.layers,F.zoom),this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){const cl=this.layers[0],hl=[];let dl=null,pl=!1;"circle"===cl.type&&(dl=cl.layout.get("circle-sort-key"),pl=!dl.isConstant());for(const{feature:fl,id:Al,index:bl,sourceLayerIndex:kl}of F){const F=this.layers[0]._featureFilter.needGeometry,Da=ja(fl,F);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Da,ll))continue;const cl=pl?dl.evaluate(Da,{},ll):void 0,Dl={id:Al,properties:fl.properties,type:fl.type,sourceLayerIndex:kl,index:bl,geometry:F?Da.geometry:Oa(fl),patterns:{},sortKey:cl};hl.push(Dl)}pl&&hl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const fl of hl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=fl,pl=F[hl].feature;this.addFeature(fl,cl,hl,ll),Da.featureIndex.insert(pl,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,Kd),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(F,Da,ll,cl){for(const hl of Da)for(const Da of hl){const ll=Da.x,cl=Da.y;if(ll<0||ll>=vp||cl<0||cl>=vp)continue;const hl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,F.sortKey),dl=hl.vertexLength;Ra(this.layoutVertexArray,ll,cl,-1,-1),Ra(this.layoutVertexArray,ll,cl,1,-1),Ra(this.layoutVertexArray,ll,cl,1,1),Ra(this.layoutVertexArray,ll,cl,-1,1),this.indexArray.emplaceBack(dl,dl+1,dl+2),this.indexArray.emplaceBack(dl,dl+3,dl+2),hl.vertexLength+=4,hl.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,{},cl)}}function qa(F,Da){for(let ll=0;ll<F.length;ll++)if(Wa(Da,F[ll]))return!0;for(let ll=0;ll<Da.length;ll++)if(Wa(F,Da[ll]))return!0;return!!Ka(F,Da)}function Na(F,Da,ll){return!!Wa(F,Da)||!!Ha(Da,F,ll)}function Za(F,Da){if(1===F.length)return Ja(Da,F[0]);for(let ll=0;ll<Da.length;ll++){const cl=Da[ll];for(let Da=0;Da<cl.length;Da++)if(Wa(F,cl[Da]))return!0}for(let ll=0;ll<F.length;ll++)if(Ja(Da,F[ll]))return!0;for(let ll=0;ll<Da.length;ll++)if(Ka(F,Da[ll]))return!0;return!1}function Ga(F,Da,ll){if(F.length>1){if(Ka(F,Da))return!0;for(let cl=0;cl<Da.length;cl++)if(Ha(Da[cl],F,ll))return!0}for(let cl=0;cl<F.length;cl++)if(Ha(F[cl],Da,ll))return!0;return!1}function Ka(F,Da){if(0===F.length||0===Da.length)return!1;for(let ll=0;ll<F.length-1;ll++){const cl=F[ll],hl=F[ll+1];for(let F=0;F<Da.length-1;F++)if(Xa(cl,hl,Da[F],Da[F+1]))return!0}return!1}function Xa(F,Da,ll,cl){return S(F,ll,cl)!==S(Da,ll,cl)&&S(F,Da,ll)!==S(F,Da,cl)}function Ha(F,Da,ll){const cl=ll*ll;if(1===Da.length)return F.distSqr(Da[0])<cl;for(let hl=1;hl<Da.length;hl++)if(Ya(F,Da[hl-1],Da[hl])<cl)return!0;return!1}function Ya(F,Da,ll){const cl=Da.distSqr(ll);if(0===cl)return F.distSqr(Da);const hl=((F.x-Da.x)*(ll.x-Da.x)+(F.y-Da.y)*(ll.y-Da.y))/cl;return F.distSqr(hl<0?Da:hl>1?ll:ll.sub(Da)._mult(hl)._add(Da))}function Ja(F,Da){let ll,cl,hl,dl=!1;for(let pl=0;pl<F.length;pl++){ll=F[pl];for(let F=0,pl=ll.length-1;F<ll.length;pl=F++)cl=ll[F],hl=ll[pl],cl.y>Da.y!=hl.y>Da.y&&Da.x<(hl.x-cl.x)*(Da.y-cl.y)/(hl.y-cl.y)+cl.x&&(dl=!dl)}return dl}function Wa(F,Da){let ll=!1;for(let cl=0,hl=F.length-1;cl<F.length;hl=cl++){const dl=F[cl],pl=F[hl];dl.y>Da.y!=pl.y>Da.y&&Da.x<(pl.x-dl.x)*(Da.y-dl.y)/(pl.y-dl.y)+dl.x&&(ll=!ll)}return ll}function Qa(F,Da,ll){const cl=ll[0],hl=ll[2];if(F.x<cl.x&&Da.x<cl.x||F.x>hl.x&&Da.x>hl.x||F.y<cl.y&&Da.y<cl.y||F.y>hl.y&&Da.y>hl.y)return!1;const dl=S(F,Da,ll[0]);return dl!==S(F,Da,ll[1])||dl!==S(F,Da,ll[2])||dl!==S(F,Da,ll[3])}function to(F,Da,ll){const cl=Da.paint.get(F).value;return"constant"===cl.kind?cl.value:ll.programConfigurations.get(Da.id).getMaxValue(F)}function eo(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])}function ro(F,Da,cl,hl,dl){if(!Da[0]&&!Da[1])return F;const pl=ll.convert(Da)._mult(dl);"viewport"===cl&&pl._rotate(-hl);const fl=[];for(let ll=0;ll<F.length;ll++)fl.push(F[ll].sub(pl));return fl}let bp,wp;wi("CircleBucket",Ua,{omit:["layers"]});var Ep={get paint(){return wp=wp||new rs({"circle-radius":new Wi(iu.paint_circle["circle-radius"]),"circle-color":new Wi(iu.paint_circle["circle-color"]),"circle-blur":new Wi(iu.paint_circle["circle-blur"]),"circle-opacity":new Wi(iu.paint_circle["circle-opacity"]),"circle-translate":new Ji(iu.paint_circle["circle-translate"]),"circle-translate-anchor":new Ji(iu.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ji(iu.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ji(iu.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wi(iu.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wi(iu.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wi(iu.paint_circle["circle-stroke-opacity"])})},get layout(){return bp=bp||new rs({"circle-sort-key":new Wi(iu.layout_circle["circle-sort-key"])})}},Mp=1e-6,Sp="undefined"!=typeof Float32Array?Float32Array:Array;function lo(F){return F[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F}function uo(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2],pl=Da[3],fl=Da[4],Al=Da[5],bl=Da[6],kl=Da[7],Dl=Da[8],Wl=Da[9],Ql=Da[10],wc=Da[11],Sc=Da[12],eu=Da[13],iu=Da[14],su=Da[15],cu=ll[0],uu=ll[1],hu=ll[2],Lu=ll[3];return F[0]=cu*cl+uu*fl+hu*Dl+Lu*Sc,F[1]=cu*hl+uu*Al+hu*Wl+Lu*eu,F[2]=cu*dl+uu*bl+hu*Ql+Lu*iu,F[3]=cu*pl+uu*kl+hu*wc+Lu*su,F[4]=(cu=ll[4])*cl+(uu=ll[5])*fl+(hu=ll[6])*Dl+(Lu=ll[7])*Sc,F[5]=cu*hl+uu*Al+hu*Wl+Lu*eu,F[6]=cu*dl+uu*bl+hu*Ql+Lu*iu,F[7]=cu*pl+uu*kl+hu*wc+Lu*su,F[8]=(cu=ll[8])*cl+(uu=ll[9])*fl+(hu=ll[10])*Dl+(Lu=ll[11])*Sc,F[9]=cu*hl+uu*Al+hu*Wl+Lu*eu,F[10]=cu*dl+uu*bl+hu*Ql+Lu*iu,F[11]=cu*pl+uu*kl+hu*wc+Lu*su,F[12]=(cu=ll[12])*cl+(uu=ll[13])*fl+(hu=ll[14])*Dl+(Lu=ll[15])*Sc,F[13]=cu*hl+uu*Al+hu*Wl+Lu*eu,F[14]=cu*dl+uu*bl+hu*Ql+Lu*iu,F[15]=cu*pl+uu*kl+hu*wc+Lu*su,F}Math.hypot||(Math.hypot=function(){for(var F=0,Da=arguments.length;Da--;)F+=arguments[Da]*arguments[Da];return Math.sqrt(F)});var kp,Tp=uo;function po(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2],pl=Da[3];return F[0]=ll[0]*cl+ll[4]*hl+ll[8]*dl+ll[12]*pl,F[1]=ll[1]*cl+ll[5]*hl+ll[9]*dl+ll[13]*pl,F[2]=ll[2]*cl+ll[6]*hl+ll[10]*dl+ll[14]*pl,F[3]=ll[3]*cl+ll[7]*hl+ll[11]*dl+ll[15]*pl,F}kp=new Sp(4),Sp!=Float32Array&&(kp[0]=0,kp[1]=0,kp[2]=0,kp[3]=0);class fo extends is{constructor(F){super(F,Ep)}createBucket(F){return new Ua(F)}queryRadius(F){const Da=F;return to("circle-radius",this,Da)+to("circle-stroke-width",this,Da)+eo(this.paint.get("circle-translate"))}queryIntersectsFeature(F,Da,ll,cl,hl,dl,pl,fl){const Al=ro(F,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),dl.angle,pl),bl=this.paint.get("circle-radius").evaluate(Da,ll)+this.paint.get("circle-stroke-width").evaluate(Da,ll),kl="map"===this.paint.get("circle-pitch-alignment"),Dl=kl?Al:function(F,Da){return F.map((F=>yo(F,Da)))}(Al,fl),Wl=kl?bl*pl:bl;for(const Ql of cl)for(const F of Ql){const Da=kl?F:yo(F,fl);let ll=Wl;const cl=po([],[F.x,F.y,0,1],fl);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ll*=cl[3]/dl.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ll*=dl.cameraToCenterDistance/cl[3]),Na(Dl,Da,ll))return!0}return!1}}function yo(F,Da){const cl=po([],[F.x,F.y,0,1],Da);return new ll(cl[0]/cl[3],cl[1]/cl[3])}class mo extends Ua{}let Ip;wi("HeatmapBucket",mo,{omit:["layers"]});var Cp={get paint(){return Ip=Ip||new rs({"heatmap-radius":new Wi(iu.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wi(iu.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ji(iu.paint_heatmap["heatmap-intensity"]),"heatmap-color":new es(iu.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ji(iu.paint_heatmap["heatmap-opacity"])})}};function vo(F,{width:Da,height:ll},cl,hl){if(hl){if(hl instanceof Uint8ClampedArray)hl=new Uint8Array(hl.buffer);else if(hl.length!==Da*ll*cl)throw new RangeError(`mismatched image size. expected: ${hl.length} but got: ${Da*ll*cl}`)}else hl=new Uint8Array(Da*ll*cl);return F.width=Da,F.height=ll,F.data=hl,F}function bo(F,{width:Da,height:ll},cl){if(Da===F.width&&ll===F.height)return;const hl=vo({},{width:Da,height:ll},cl);wo(F,hl,{x:0,y:0},{x:0,y:0},{width:Math.min(F.width,Da),height:Math.min(F.height,ll)},cl),F.width=Da,F.height=ll,F.data=hl.data}function wo(F,Da,ll,cl,hl,dl){if(0===hl.width||0===hl.height)return Da;if(hl.width>F.width||hl.height>F.height||ll.x>F.width-hl.width||ll.y>F.height-hl.height)throw new RangeError("out of range source coordinates for image copy");if(hl.width>Da.width||hl.height>Da.height||cl.x>Da.width-hl.width||cl.y>Da.height-hl.height)throw new RangeError("out of range destination coordinates for image copy");const pl=F.data,fl=Da.data;if(pl===fl)throw new Error("srcData equals dstData, so image is already copied");for(let Al=0;Al<hl.height;Al++){const bl=((ll.y+Al)*F.width+ll.x)*dl,kl=((cl.y+Al)*Da.width+cl.x)*dl;for(let F=0;F<hl.width*dl;F++)fl[kl+F]=pl[bl+F]}return Da}class _o{constructor(F,Da){vo(this,F,1,Da)}resize(F){bo(this,F,1)}clone(){return new _o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(F,Da,ll,cl,hl){wo(F,Da,ll,cl,hl,1)}}class Ao{constructor(F,Da){vo(this,F,4,Da)}resize(F){bo(this,F,4)}replace(F,Da){Da?this.data.set(F):this.data=F instanceof Uint8ClampedArray?new Uint8Array(F.buffer):F}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(F,Da,ll,cl,hl){wo(F,Da,ll,cl,hl,4)}}function So(F){const Da={},ll=F.resolution||256,cl=F.clips?F.clips.length:1,hl=F.image||new Ao({width:ll,height:cl});if(Math.log(ll)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${ll}`);const s=(ll,cl,dl)=>{Da[F.evaluationKey]=dl;const pl=F.expression.evaluate(Da);hl.data[ll+cl+0]=Math.floor(255*pl.r/pl.a),hl.data[ll+cl+1]=Math.floor(255*pl.g/pl.a),hl.data[ll+cl+2]=Math.floor(255*pl.b/pl.a),hl.data[ll+cl+3]=Math.floor(255*pl.a)};if(F.clips)for(let dl=0,pl=0;dl<cl;++dl,pl+=4*ll)for(let Da=0,cl=0;Da<ll;Da++,cl+=4){const hl=Da/(ll-1),{start:fl,end:Al}=F.clips[dl];s(pl,cl,fl*(1-hl)+Al*hl)}else for(let dl=0,pl=0;dl<ll;dl++,pl+=4)s(0,pl,dl/(ll-1));return hl}wi("AlphaImage",_o),wi("RGBAImage",Ao);const Lp="big-fb";class Mo extends is{createBucket(F){return new mo(F)}constructor(F){super(F,Cp),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(F){"heatmap-color"===F&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=So({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Lp)&&this.heatmapFbos.delete(Lp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let zp;var Pp={get paint(){return zp=zp||new rs({"hillshade-illumination-direction":new Ji(iu.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ji(iu.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ji(iu.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ji(iu.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ji(iu.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ji(iu.paint_hillshade["hillshade-accent-color"])})}};class Po extends is{constructor(F){super(F,Pp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Dp=ls([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rp}=Dp;function Vo(F,Da,ll=2){const cl=Da&&Da.length,hl=cl?Da[0]*ll:F.length;let dl=Eo(F,0,hl,ll,!0);const pl=[];if(!dl||dl.next===dl.prev)return pl;let fl,Al,bl;if(cl&&(dl=function(F,Da,ll,cl){const hl=[];for(let dl=0,pl=Da.length;dl<pl;dl++){const ll=Eo(F,Da[dl]*cl,dl<pl-1?Da[dl+1]*cl:F.length,cl,!1);ll===ll.next&&(ll.steiner=!0),hl.push(No(ll))}hl.sort(jo);for(let dl=0;dl<hl.length;dl++)ll=Ro(hl[dl],ll);return ll}(F,Da,dl,ll)),F.length>80*ll){fl=1/0,Al=1/0;let Da=-1/0,cl=-1/0;for(let dl=ll;dl<hl;dl+=ll){const ll=F[dl],hl=F[dl+1];ll<fl&&(fl=ll),hl<Al&&(Al=hl),ll>Da&&(Da=ll),hl>cl&&(cl=hl)}bl=Math.max(Da-fl,cl-Al),bl=0!==bl?32767/bl:0}return To(dl,pl,ll,fl,Al,bl,0),pl}function Eo(F,Da,ll,cl,hl){let dl;if(hl===function(F,Da,ll,cl){let hl=0;for(let dl=Da,pl=ll-cl;dl<ll;dl+=cl)hl+=(F[pl]-F[dl])*(F[dl+1]+F[pl+1]),pl=dl;return hl}(F,Da,ll,cl)>0)for(let pl=Da;pl<ll;pl+=cl)dl=tl(pl/cl|0,F[pl],F[pl+1],dl);else for(let pl=ll-cl;pl>=Da;pl-=cl)dl=tl(pl/cl|0,F[pl],F[pl+1],dl);return dl&&Xo(dl,dl.next)&&(el(dl),dl=dl.next),dl}function Fo(F,Da){if(!F)return F;Da||(Da=F);let ll,cl=F;do{if(ll=!1,cl.steiner||!Xo(cl,cl.next)&&0!==Ko(cl.prev,cl,cl.next))cl=cl.next;else{if(el(cl),cl=Da=cl.prev,cl===cl.next)break;ll=!0}}while(ll||cl!==Da);return Da}function To(F,Da,ll,cl,hl,dl,pl){if(!F)return;!pl&&dl&&function(F,Da,ll,cl){let hl=F;do{0===hl.z&&(hl.z=qo(hl.x,hl.y,Da,ll,cl)),hl.prevZ=hl.prev,hl.nextZ=hl.next,hl=hl.next}while(hl!==F);hl.prevZ.nextZ=null,hl.prevZ=null,function(F){let Da,ll=1;do{let cl,hl=F;F=null;let dl=null;for(Da=0;hl;){Da++;let pl=hl,fl=0;for(let F=0;F<ll&&(fl++,pl=pl.nextZ,pl);F++);let Al=ll;for(;fl>0||Al>0&&pl;)0!==fl&&(0===Al||!pl||hl.z<=pl.z)?(cl=hl,hl=hl.nextZ,fl--):(cl=pl,pl=pl.nextZ,Al--),dl?dl.nextZ=cl:F=cl,cl.prevZ=dl,dl=cl;hl=pl}dl.nextZ=null,ll*=2}while(Da>1)}(hl)}(F,cl,hl,dl);let fl=F;for(;F.prev!==F.next;){const Al=F.prev,bl=F.next;if(dl?Lo(F,cl,hl,dl):$o(F))Da.push(Al.i,F.i,bl.i),el(F),F=bl.next,fl=bl.next;else if((F=bl)===fl){pl?1===pl?To(F=Do(Fo(F),Da),Da,ll,cl,hl,dl,2):2===pl&&Oo(F,Da,ll,cl,hl,dl):To(Fo(F),Da,ll,cl,hl,dl,1);break}}}function $o(F){const Da=F.prev,ll=F,cl=F.next;if(Ko(Da,ll,cl)>=0)return!1;const hl=Da.x,dl=ll.x,pl=cl.x,fl=Da.y,Al=ll.y,bl=cl.y,kl=hl<dl?hl<pl?hl:pl:dl<pl?dl:pl,Dl=fl<Al?fl<bl?fl:bl:Al<bl?Al:bl,Wl=hl>dl?hl>pl?hl:pl:dl>pl?dl:pl,Ql=fl>Al?fl>bl?fl:bl:Al>bl?Al:bl;let wc=cl.next;for(;wc!==Da;){if(wc.x>=kl&&wc.x<=Wl&&wc.y>=Dl&&wc.y<=Ql&&Zo(hl,fl,dl,Al,pl,bl,wc.x,wc.y)&&Ko(wc.prev,wc,wc.next)>=0)return!1;wc=wc.next}return!0}function Lo(F,Da,ll,cl){const hl=F.prev,dl=F,pl=F.next;if(Ko(hl,dl,pl)>=0)return!1;const fl=hl.x,Al=dl.x,bl=pl.x,kl=hl.y,Dl=dl.y,Wl=pl.y,Ql=fl<Al?fl<bl?fl:bl:Al<bl?Al:bl,wc=kl<Dl?kl<Wl?kl:Wl:Dl<Wl?Dl:Wl,Sc=fl>Al?fl>bl?fl:bl:Al>bl?Al:bl,eu=kl>Dl?kl>Wl?kl:Wl:Dl>Wl?Dl:Wl,iu=qo(Ql,wc,Da,ll,cl),su=qo(Sc,eu,Da,ll,cl);let cu=F.prevZ,uu=F.nextZ;for(;cu&&cu.z>=iu&&uu&&uu.z<=su;){if(cu.x>=Ql&&cu.x<=Sc&&cu.y>=wc&&cu.y<=eu&&cu!==hl&&cu!==pl&&Zo(fl,kl,Al,Dl,bl,Wl,cu.x,cu.y)&&Ko(cu.prev,cu,cu.next)>=0)return!1;if(cu=cu.prevZ,uu.x>=Ql&&uu.x<=Sc&&uu.y>=wc&&uu.y<=eu&&uu!==hl&&uu!==pl&&Zo(fl,kl,Al,Dl,bl,Wl,uu.x,uu.y)&&Ko(uu.prev,uu,uu.next)>=0)return!1;uu=uu.nextZ}for(;cu&&cu.z>=iu;){if(cu.x>=Ql&&cu.x<=Sc&&cu.y>=wc&&cu.y<=eu&&cu!==hl&&cu!==pl&&Zo(fl,kl,Al,Dl,bl,Wl,cu.x,cu.y)&&Ko(cu.prev,cu,cu.next)>=0)return!1;cu=cu.prevZ}for(;uu&&uu.z<=su;){if(uu.x>=Ql&&uu.x<=Sc&&uu.y>=wc&&uu.y<=eu&&uu!==hl&&uu!==pl&&Zo(fl,kl,Al,Dl,bl,Wl,uu.x,uu.y)&&Ko(uu.prev,uu,uu.next)>=0)return!1;uu=uu.nextZ}return!0}function Do(F,Da){let ll=F;do{const cl=ll.prev,hl=ll.next.next;!Xo(cl,hl)&&Ho(cl,ll,ll.next,hl)&&Wo(cl,hl)&&Wo(hl,cl)&&(Da.push(cl.i,ll.i,hl.i),el(ll),el(ll.next),ll=F=hl),ll=ll.next}while(ll!==F);return Fo(ll)}function Oo(F,Da,ll,cl,hl,dl){let pl=F;do{let F=pl.next.next;for(;F!==pl.prev;){if(pl.i!==F.i&&Go(pl,F)){let fl=Qo(pl,F);return pl=Fo(pl,pl.next),fl=Fo(fl,fl.next),To(pl,Da,ll,cl,hl,dl,0),void To(fl,Da,ll,cl,hl,dl,0)}F=F.next}pl=pl.next}while(pl!==F)}function jo(F,Da){return F.x-Da.x}function Ro(F,Da){const ll=function(F,Da){let ll=Da;const cl=F.x,hl=F.y;let dl,pl=-1/0;do{if(hl<=ll.y&&hl>=ll.next.y&&ll.next.y!==ll.y){const F=ll.x+(hl-ll.y)*(ll.next.x-ll.x)/(ll.next.y-ll.y);if(F<=cl&&F>pl&&(pl=F,dl=ll.x<ll.next.x?ll:ll.next,F===cl))return dl}ll=ll.next}while(ll!==Da);if(!dl)return null;const fl=dl,Al=dl.x,bl=dl.y;let kl=1/0;ll=dl;do{if(cl>=ll.x&&ll.x>=Al&&cl!==ll.x&&Zo(hl<bl?cl:pl,hl,Al,bl,hl<bl?pl:cl,hl,ll.x,ll.y)){const Da=Math.abs(hl-ll.y)/(cl-ll.x);Wo(ll,F)&&(Da<kl||Da===kl&&(ll.x>dl.x||ll.x===dl.x&&Uo(dl,ll)))&&(dl=ll,kl=Da)}ll=ll.next}while(ll!==fl);return dl}(F,Da);if(!ll)return Da;const cl=Qo(ll,F);return Fo(cl,cl.next),Fo(ll,ll.next)}function Uo(F,Da){return Ko(F.prev,F,Da.prev)<0&&Ko(Da.next,F,F.next)<0}function qo(F,Da,ll,cl,hl){return(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=(F-ll)*hl|0)|F<<8))|F<<4))|F<<2))|F<<1))|(Da=1431655765&((Da=858993459&((Da=252645135&((Da=16711935&((Da=(Da-cl)*hl|0)|Da<<8))|Da<<4))|Da<<2))|Da<<1))<<1}function No(F){let Da=F,ll=F;do{(Da.x<ll.x||Da.x===ll.x&&Da.y<ll.y)&&(ll=Da),Da=Da.next}while(Da!==F);return ll}function Zo(F,Da,ll,cl,hl,dl,pl,fl){return(hl-pl)*(Da-fl)>=(F-pl)*(dl-fl)&&(F-pl)*(cl-fl)>=(ll-pl)*(Da-fl)&&(ll-pl)*(dl-fl)>=(hl-pl)*(cl-fl)}function Go(F,Da){return F.next.i!==Da.i&&F.prev.i!==Da.i&&!function(F,Da){let ll=F;do{if(ll.i!==F.i&&ll.next.i!==F.i&&ll.i!==Da.i&&ll.next.i!==Da.i&&Ho(ll,ll.next,F,Da))return!0;ll=ll.next}while(ll!==F);return!1}(F,Da)&&(Wo(F,Da)&&Wo(Da,F)&&function(F,Da){let ll=F,cl=!1;const hl=(F.x+Da.x)/2,dl=(F.y+Da.y)/2;do{ll.y>dl!=ll.next.y>dl&&ll.next.y!==ll.y&&hl<(ll.next.x-ll.x)*(dl-ll.y)/(ll.next.y-ll.y)+ll.x&&(cl=!cl),ll=ll.next}while(ll!==F);return cl}(F,Da)&&(Ko(F.prev,F,Da.prev)||Ko(F,Da.prev,Da))||Xo(F,Da)&&Ko(F.prev,F,F.next)>0&&Ko(Da.prev,Da,Da.next)>0)}function Ko(F,Da,ll){return(Da.y-F.y)*(ll.x-Da.x)-(Da.x-F.x)*(ll.y-Da.y)}function Xo(F,Da){return F.x===Da.x&&F.y===Da.y}function Ho(F,Da,ll,cl){const hl=Jo(Ko(F,Da,ll)),dl=Jo(Ko(F,Da,cl)),pl=Jo(Ko(ll,cl,F)),fl=Jo(Ko(ll,cl,Da));return hl!==dl&&pl!==fl||!(0!==hl||!Yo(F,ll,Da))||!(0!==dl||!Yo(F,cl,Da))||!(0!==pl||!Yo(ll,F,cl))||!(0!==fl||!Yo(ll,Da,cl))}function Yo(F,Da,ll){return Da.x<=Math.max(F.x,ll.x)&&Da.x>=Math.min(F.x,ll.x)&&Da.y<=Math.max(F.y,ll.y)&&Da.y>=Math.min(F.y,ll.y)}function Jo(F){return F>0?1:F<0?-1:0}function Wo(F,Da){return Ko(F.prev,F,F.next)<0?Ko(F,Da,F.next)>=0&&Ko(F,F.prev,Da)>=0:Ko(F,Da,F.prev)<0||Ko(F,F.next,Da)<0}function Qo(F,Da){const ll=rl(F.i,F.x,F.y),cl=rl(Da.i,Da.x,Da.y),hl=F.next,dl=Da.prev;return F.next=Da,Da.prev=F,ll.next=hl,hl.prev=ll,cl.next=ll,ll.prev=cl,dl.next=cl,cl.prev=dl,cl}function tl(F,Da,ll,cl){const hl=rl(F,Da,ll);return cl?(hl.next=cl.next,hl.prev=cl,cl.next.prev=hl,cl.next=hl):(hl.prev=hl,hl.next=hl),hl}function el(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function rl(F,Da,ll){return{i:F,x:Da,y:ll,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function nl(F,Da,ll){const cl=ll.patternDependencies;let hl=!1;for(const dl of Da){const Da=dl.paint.get(`${F}-pattern`);Da.isConstant()||(hl=!0);const ll=Da.constantOr(null);ll&&(hl=!0,cl[ll.to]=!0,cl[ll.from]=!0)}return hl}function il(F,Da,ll,cl,hl){const dl=hl.patternDependencies;for(const pl of Da){const Da=pl.paint.get(`${F}-pattern`).value;if("constant"!==Da.kind){let F=Da.evaluate({zoom:cl-1},ll,{},hl.availableImages),fl=Da.evaluate({zoom:cl},ll,{},hl.availableImages),Al=Da.evaluate({zoom:cl+1},ll,{},hl.availableImages);F=F&&F.name?F.name:F,fl=fl&&fl.name?fl.name:fl,Al=Al&&Al.name?Al.name:Al,dl[F]=!0,dl[fl]=!0,dl[Al]=!0,ll.patterns[pl.id]={min:F,mid:fl,max:Al}}}return ll}class sl{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ks,this.indexArray=new na,this.indexArray2=new ia,this.programConfigurations=new Ea(F.layers,F.zoom),this.segments=new oa,this.segments2=new oa,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.hasPattern=nl("fill",this.layers,Da);const cl=this.layers[0].layout.get("fill-sort-key"),hl=!cl.isConstant(),dl=[];for(const{feature:pl,id:fl,index:Al,sourceLayerIndex:bl}of F){const F=this.layers[0]._featureFilter.needGeometry,kl=ja(pl,F);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),kl,ll))continue;const Dl=hl?cl.evaluate(kl,{},ll,Da.availableImages):void 0,Wl={id:fl,properties:pl.properties,type:pl.type,sourceLayerIndex:bl,index:Al,geometry:F?kl.geometry:Oa(pl),patterns:{},sortKey:Dl};dl.push(Wl)}hl&&dl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const pl of dl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=pl;if(this.hasPattern){const F=il("fill",this.layers,pl,this.zoom,Da);this.patternFeatures.push(F)}else this.addFeature(pl,cl,hl,ll,{});Da.featureIndex.insert(F[hl].feature,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}addFeatures(F,Da,ll){for(const cl of this.patternFeatures)this.addFeature(cl,cl.geometry,cl.index,Da,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,Rp),this.indexBuffer=F.createIndexBuffer(this.indexArray),this.indexBuffer2=F.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(F,Da,ll,cl,hl){for(const dl of xr(Da,500)){let F=0;for(const fl of dl)F+=fl.length;const Da=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray),ll=Da.vertexLength,cl=[],hl=[];for(const fl of dl){if(0===fl.length)continue;fl!==dl[0]&&hl.push(cl.length/2);const F=this.segments2.prepareSegment(fl.length,this.layoutVertexArray,this.indexArray2),Da=F.vertexLength;this.layoutVertexArray.emplaceBack(fl[0].x,fl[0].y),this.indexArray2.emplaceBack(Da+fl.length-1,Da),cl.push(fl[0].x),cl.push(fl[0].y);for(let ll=1;ll<fl.length;ll++)this.layoutVertexArray.emplaceBack(fl[ll].x,fl[ll].y),this.indexArray2.emplaceBack(Da+ll-1,Da+ll),cl.push(fl[ll].x),cl.push(fl[ll].y);F.vertexLength+=fl.length,F.primitiveLength+=fl.length}const pl=Vo(cl,hl);for(let dl=0;dl<pl.length;dl+=3)this.indexArray.emplaceBack(ll+pl[dl],ll+pl[dl+1],ll+pl[dl+2]);Da.vertexLength+=F,Da.primitiveLength+=pl.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}}let Np,Up;wi("FillBucket",sl,{omit:["layers","patternFeatures"]});var Bp={get paint(){return Up=Up||new rs({"fill-antialias":new Ji(iu.paint_fill["fill-antialias"]),"fill-opacity":new Wi(iu.paint_fill["fill-opacity"]),"fill-color":new Wi(iu.paint_fill["fill-color"]),"fill-outline-color":new Wi(iu.paint_fill["fill-outline-color"]),"fill-translate":new Ji(iu.paint_fill["fill-translate"]),"fill-translate-anchor":new Ji(iu.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qi(iu.paint_fill["fill-pattern"])})},get layout(){return Np=Np||new rs({"fill-sort-key":new Wi(iu.layout_fill["fill-sort-key"])})}};class ul extends is{constructor(F){super(F,Bp)}recalculate(F,Da){super.recalculate(F,Da);const ll=this.paint._values["fill-outline-color"];"constant"===ll.value.kind&&void 0===ll.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(F){return new sl(F)}queryRadius(){return eo(this.paint.get("fill-translate"))}queryIntersectsFeature(F,Da,ll,cl,hl,dl,pl){return Za(ro(F,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),dl.angle,pl),cl)}isTileClipped(){return!0}}const Op=ls([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Fp=ls([{name:"a_centroid",components:2,type:"Int16"}],4),{members:jp}=Op;var Vp={},Gp=Da,qp=ml;function ml(F,Da,ll,cl,hl){this.properties={},this.extent=ll,this.type=0,this._pbf=F,this._geometry=-1,this._keys=cl,this._values=hl,F.readFields(gl,this,Da)}function gl(F,Da,ll){1==F?Da.id=ll.readVarint():2==F?function(F,Da){for(var ll=F.readVarint()+F.pos;F.pos<ll;){var cl=Da._keys[F.readVarint()],hl=Da._values[F.readVarint()];Da.properties[cl]=hl}}(ll,Da):3==F?Da.type=ll.readVarint():4==F&&(Da._geometry=ll.pos)}function xl(F){for(var Da,ll,cl=0,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++)cl+=((ll=F[pl]).x-(Da=F[hl]).x)*(Da.y+ll.y);return cl}ml.types=["Unknown","Point","LineString","Polygon"],ml.prototype.loadGeometry=function(){var F=this._pbf;F.pos=this._geometry;for(var Da,ll=F.readVarint()+F.pos,cl=1,hl=0,dl=0,pl=0,fl=[];F.pos<ll;){if(hl<=0){var Al=F.readVarint();cl=7&Al,hl=Al>>3}if(hl--,1===cl||2===cl)dl+=F.readSVarint(),pl+=F.readSVarint(),1===cl&&(Da&&fl.push(Da),Da=[]),Da.push(new Gp(dl,pl));else{if(7!==cl)throw new Error("unknown command "+cl);Da&&Da.push(Da[0].clone())}}return Da&&fl.push(Da),fl},ml.prototype.bbox=function(){var F=this._pbf;F.pos=this._geometry;for(var Da=F.readVarint()+F.pos,ll=1,cl=0,hl=0,dl=0,pl=1/0,fl=-1/0,Al=1/0,bl=-1/0;F.pos<Da;){if(cl<=0){var kl=F.readVarint();ll=7&kl,cl=kl>>3}if(cl--,1===ll||2===ll)(hl+=F.readSVarint())<pl&&(pl=hl),hl>fl&&(fl=hl),(dl+=F.readSVarint())<Al&&(Al=dl),dl>bl&&(bl=dl);else if(7!==ll)throw new Error("unknown command "+ll)}return[pl,Al,fl,bl]},ml.prototype.toGeoJSON=function(F,Da,ll){var cl,hl,dl=this.extent*Math.pow(2,ll),pl=this.extent*F,fl=this.extent*Da,Al=this.loadGeometry(),bl=ml.types[this.type];function c(F){for(var Da=0;Da<F.length;Da++){var ll=F[Da];F[Da]=[360*(ll.x+pl)/dl-180,360/Math.PI*Math.atan(Math.exp((180-360*(ll.y+fl)/dl)*Math.PI/180))-90]}}switch(this.type){case 1:var kl=[];for(cl=0;cl<Al.length;cl++)kl[cl]=Al[cl][0];c(Al=kl);break;case 2:for(cl=0;cl<Al.length;cl++)c(Al[cl]);break;case 3:for(Al=function(F){var Da=F.length;if(Da<=1)return[F];for(var ll,cl,hl=[],dl=0;dl<Da;dl++){var pl=xl(F[dl]);0!==pl&&(void 0===cl&&(cl=pl<0),cl===pl<0?(ll&&hl.push(ll),ll=[F[dl]]):ll.push(F[dl]))}return ll&&hl.push(ll),hl}(Al),cl=0;cl<Al.length;cl++)for(hl=0;hl<Al[cl].length;hl++)c(Al[cl][hl])}1===Al.length?Al=Al[0]:bl="Multi"+bl;var Dl={type:"Feature",geometry:{type:bl,coordinates:Al},properties:this.properties};return"id"in this&&(Dl.id=this.id),Dl};var Hp=qp,Zp=wl;function wl(F,Da){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=F,this._keys=[],this._values=[],this._features=[],F.readFields(_l,this,Da),this.length=this._features.length}function _l(F,Da,ll){15===F?Da.version=ll.readVarint():1===F?Da.name=ll.readString():5===F?Da.extent=ll.readVarint():2===F?Da._features.push(ll.pos):3===F?Da._keys.push(ll.readString()):4===F&&Da._values.push(function(F){for(var Da=null,ll=F.readVarint()+F.pos;F.pos<ll;){var cl=F.readVarint()>>3;Da=1===cl?F.readString():2===cl?F.readFloat():3===cl?F.readDouble():4===cl?F.readVarint64():5===cl?F.readVarint():6===cl?F.readSVarint():7===cl?F.readBoolean():null}return Da}(ll))}wl.prototype.feature=function(F){if(F<0||F>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[F];var Da=this._pbf.readVarint()+this._pbf.pos;return new Hp(this._pbf,Da,this.extent,this._keys,this._values)};var Wp=Zp;function Sl(F,Da,ll){if(3===F){var cl=new Wp(ll,ll.readVarint()+ll.pos);cl.length&&(Da[cl.name]=cl)}}Vp.VectorTile=function(F,Da){this.layers=F.readFields(Sl,{},Da)},Vp.VectorTileFeature=qp,Vp.VectorTileLayer=Zp;const Kp=Vp.VectorTileFeature.types,Qp=Math.pow(2,13);function Il(F,Da,ll,cl,hl,dl,pl,fl){F.emplaceBack(Da,ll,2*Math.floor(cl*Qp)+pl,hl*Qp*2,dl*Qp*2,Math.round(fl))}class zl{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.layoutVertexArray=new Xs,this.centroidVertexArray=new Zs,this.indexArray=new na,this.programConfigurations=new Ea(F.layers,F.zoom),this.segments=new oa,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.features=[],this.hasPattern=nl("fill-extrusion",this.layers,Da);for(const{feature:cl,id:hl,index:dl,sourceLayerIndex:pl}of F){const F=this.layers[0]._featureFilter.needGeometry,fl=ja(cl,F);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),fl,ll))continue;const Al={id:hl,sourceLayerIndex:pl,index:dl,geometry:F?fl.geometry:Oa(cl),properties:cl.properties,type:cl.type,patterns:{}};this.hasPattern?this.features.push(il("fill-extrusion",this.layers,Al,this.zoom,Da)):this.addFeature(Al,Al.geometry,dl,ll,{}),Da.featureIndex.insert(cl,Al.geometry,dl,pl,this.index,!0)}}addFeatures(F,Da,ll){for(const cl of this.features){const{geometry:F}=cl;this.addFeature(cl,F,cl.index,Da,ll)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,jp),this.centroidVertexBuffer=F.createVertexBuffer(this.centroidVertexArray,Fp.members,!0),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(F,Da,ll,cl,hl){for(const dl of xr(Da,500)){const Da={x:0,y:0,vertexCount:0};let ll=0;for(const F of dl)ll+=F.length;let cl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const F of dl){if(0===F.length)continue;if(Cl(F))continue;let ll=0;for(let hl=0;hl<F.length;hl++){const dl=F[hl];if(hl>=1){const pl=F[hl-1];if(!Pl(dl,pl)){cl.vertexLength+4>oa.MAX_VERTEX_ARRAY_LENGTH&&(cl=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const F=dl.sub(pl)._perp()._unit(),hl=pl.dist(dl);ll+hl>32768&&(ll=0),Il(this.layoutVertexArray,dl.x,dl.y,F.x,F.y,0,0,ll),Il(this.layoutVertexArray,dl.x,dl.y,F.x,F.y,0,1,ll),Da.x+=2*dl.x,Da.y+=2*dl.y,Da.vertexCount+=2,ll+=hl,Il(this.layoutVertexArray,pl.x,pl.y,F.x,F.y,0,0,ll),Il(this.layoutVertexArray,pl.x,pl.y,F.x,F.y,0,1,ll),Da.x+=2*pl.x,Da.y+=2*pl.y,Da.vertexCount+=2;const fl=cl.vertexLength;this.indexArray.emplaceBack(fl,fl+2,fl+1),this.indexArray.emplaceBack(fl+1,fl+2,fl+3),cl.vertexLength+=4,cl.primitiveLength+=2}}}}if(cl.vertexLength+ll>oa.MAX_VERTEX_ARRAY_LENGTH&&(cl=this.segments.prepareSegment(ll,this.layoutVertexArray,this.indexArray)),"Polygon"!==Kp[F.type])continue;const hl=[],pl=[],fl=cl.vertexLength;for(const F of dl)if(0!==F.length){F!==dl[0]&&pl.push(hl.length/2);for(let ll=0;ll<F.length;ll++){const cl=F[ll];Il(this.layoutVertexArray,cl.x,cl.y,0,0,1,1,0),Da.x+=cl.x,Da.y+=cl.y,Da.vertexCount+=1,hl.push(cl.x),hl.push(cl.y)}}const Al=Vo(hl,pl);for(let F=0;F<Al.length;F+=3)this.indexArray.emplaceBack(fl+Al[F],fl+Al[F+2],fl+Al[F+1]);cl.primitiveLength+=Al.length/3,cl.vertexLength+=ll;for(let F=0;F<Da.vertexCount;F++){const F=Math.floor(Da.x/Da.vertexCount),ll=Math.floor(Da.y/Da.vertexCount);this.centroidVertexArray.emplaceBack(F,ll)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}}function Pl(F,Da){return F.x===Da.x&&(F.x<0||F.x>vp)||F.y===Da.y&&(F.y<0||F.y>vp)}function Cl(F){return F.every((F=>F.x<0))||F.every((F=>F.x>vp))||F.every((F=>F.y<0))||F.every((F=>F.y>vp))}let Xp;wi("FillExtrusionBucket",zl,{omit:["layers","features"]});var Yp={get paint(){return Xp=Xp||new rs({"fill-extrusion-opacity":new Ji(iu["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wi(iu["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ji(iu["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ji(iu["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qi(iu["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wi(iu["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wi(iu["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ji(iu["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class El extends is{constructor(F){super(F,Yp)}createBucket(F){return new zl(F)}queryRadius(){return eo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(F,Da,cl,hl,dl,pl,fl,Al){const bl=ro(F,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),pl.angle,fl),kl=this.paint.get("fill-extrusion-height").evaluate(Da,cl),Dl=this.paint.get("fill-extrusion-base").evaluate(Da,cl),Wl=function(F,Da){const cl=[];for(const hl of F){const F=[hl.x,hl.y,0,1];po(F,F,Da),cl.push(new ll(F[0]/F[3],F[1]/F[3]))}return cl}(bl,Al),Ql=function(F,Da,cl,hl){const dl=[],pl=[],fl=hl[8]*Da,Al=hl[9]*Da,bl=hl[10]*Da,kl=hl[11]*Da,Dl=hl[8]*cl,Wl=hl[9]*cl,Ql=hl[10]*cl,wc=hl[11]*cl;for(const Sc of F){const F=[],Da=[];for(const cl of Sc){const dl=cl.x,pl=cl.y,Sc=hl[0]*dl+hl[4]*pl+hl[12],eu=hl[1]*dl+hl[5]*pl+hl[13],iu=hl[2]*dl+hl[6]*pl+hl[14],su=hl[3]*dl+hl[7]*pl+hl[15],cu=iu+bl,uu=su+kl,hu=Sc+Dl,Lu=eu+Wl,zu=iu+Ql,Du=su+wc,Nu=new ll((Sc+fl)/uu,(eu+Al)/uu);Nu.z=cu/uu,F.push(Nu);const qu=new ll(hu/Du,Lu/Du);qu.z=zu/Du,Da.push(qu)}dl.push(F),pl.push(Da)}return[dl,pl]}(hl,Dl,kl,Al);return function(F,Da,ll){let cl=1/0;Za(ll,Da)&&(cl=Tl(ll,Da[0]));for(let hl=0;hl<Da.length;hl++){const dl=Da[hl],pl=F[hl];for(let F=0;F<dl.length-1;F++){const Da=dl[F],hl=[Da,dl[F+1],pl[F+1],pl[F],Da];qa(ll,hl)&&(cl=Math.min(cl,Tl(ll,hl)))}}return cl!==1/0&&cl}(Ql[0],Ql[1],Wl)}}function Fl(F,Da){return F.x*Da.x+F.y*Da.y}function Tl(F,Da){if(1===F.length){let ll=0;const cl=Da[ll++];let hl;for(;!hl||cl.equals(hl);)if(hl=Da[ll++],!hl)return 1/0;for(;ll<Da.length;ll++){const dl=Da[ll],pl=F[0],fl=hl.sub(cl),Al=dl.sub(cl),bl=pl.sub(cl),kl=Fl(fl,fl),Dl=Fl(fl,Al),Wl=Fl(Al,Al),Ql=Fl(bl,fl),wc=Fl(bl,Al),Sc=kl*Wl-Dl*Dl,eu=(Wl*Ql-Dl*wc)/Sc,iu=(kl*wc-Dl*Ql)/Sc,su=cl.z*(1-eu-iu)+hl.z*eu+dl.z*iu;if(isFinite(su))return su}return 1/0}{let F=1/0;for(const ll of Da)F=Math.min(F,ll.z);return F}}const Jp=ls([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$p}=Jp,em=ls([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tm}=em,im=Vp.VectorTileFeature.types,nm=Math.cos(Math.PI/180*37.5),rm=Math.pow(2,14)/.5;class ql{constructor(F){this.zoom=F.zoom,this.overscaling=F.overscaling,this.layers=F.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=F.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((F=>{this.gradients[F.id]={}})),this.layoutVertexArray=new Hs,this.layoutVertexArray2=new Ys,this.indexArray=new na,this.programConfigurations=new Ea(F.layers,F.zoom),this.segments=new oa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id))}populate(F,Da,ll){this.hasPattern=nl("line",this.layers,Da);const cl=this.layers[0].layout.get("line-sort-key"),hl=!cl.isConstant(),dl=[];for(const{feature:pl,id:fl,index:Al,sourceLayerIndex:bl}of F){const F=this.layers[0]._featureFilter.needGeometry,Da=ja(pl,F);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Da,ll))continue;const kl=hl?cl.evaluate(Da,{},ll):void 0,Dl={id:fl,properties:pl.properties,type:pl.type,sourceLayerIndex:bl,index:Al,geometry:F?Da.geometry:Oa(pl),patterns:{},sortKey:kl};dl.push(Dl)}hl&&dl.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const pl of dl){const{geometry:cl,index:hl,sourceLayerIndex:dl}=pl;if(this.hasPattern){const F=il("line",this.layers,pl,this.zoom,Da);this.patternFeatures.push(F)}else this.addFeature(pl,cl,hl,ll,{});Da.featureIndex.insert(F[hl].feature,cl,hl,dl,this.index)}}update(F,Da,ll){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(F,Da,this.stateDependentLayers,ll)}addFeatures(F,Da,ll){for(const cl of this.patternFeatures)this.addFeature(cl,cl.geometry,cl.index,Da,ll)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(F){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=F.createVertexBuffer(this.layoutVertexArray2,tm)),this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,$p),this.indexBuffer=F.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(F),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(F){if(F.properties&&Object.prototype.hasOwnProperty.call(F.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(F.properties,"mapbox_clip_end"))return{start:+F.properties.mapbox_clip_start,end:+F.properties.mapbox_clip_end}}addFeature(F,Da,ll,cl,hl){const dl=this.layers[0].layout,pl=dl.get("line-join").evaluate(F,{}),fl=dl.get("line-cap"),Al=dl.get("line-miter-limit"),bl=dl.get("line-round-limit");this.lineClips=this.lineFeatureClips(F);for(const kl of Da)this.addLine(kl,F,pl,fl,Al,bl);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,F,ll,hl,cl)}addLine(F,Da,ll,cl,hl,dl){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Da=0;Da<F.length-1;Da++)this.totalDistance+=F[Da].dist(F[Da+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const pl="Polygon"===im[Da.type];let fl=F.length;for(;fl>=2&&F[fl-1].equals(F[fl-2]);)fl--;let Al=0;for(;Al<fl-1&&F[Al].equals(F[Al+1]);)Al++;if(fl<(pl?3:2))return;"bevel"===ll&&(hl=1.05);const bl=this.overscaling<=16?15*vp/(512*this.overscaling):0,kl=this.segments.prepareSegment(10*fl,this.layoutVertexArray,this.indexArray);let Dl,Wl,Ql,wc,Sc;this.e1=this.e2=-1,pl&&(Dl=F[fl-2],Sc=F[Al].sub(Dl)._unit()._perp());for(let eu=Al;eu<fl;eu++){if(Ql=eu===fl-1?pl?F[Al+1]:void 0:F[eu+1],Ql&&F[eu].equals(Ql))continue;Sc&&(wc=Sc),Dl&&(Wl=Dl),Dl=F[eu],Sc=Ql?Ql.sub(Dl)._unit()._perp():wc,wc=wc||Sc;let Da=wc.add(Sc);0===Da.x&&0===Da.y||Da._unit();const iu=wc.x*Sc.x+wc.y*Sc.y,su=Da.x*Sc.x+Da.y*Sc.y,cu=0!==su?1/su:1/0,uu=2*Math.sqrt(2-2*su),hu=su<nm&&Wl&&Ql,Lu=wc.x*Sc.y-wc.y*Sc.x>0;if(hu&&eu>Al){const F=Dl.dist(Wl);if(F>2*bl){const Da=Dl.sub(Dl.sub(Wl)._mult(bl/F)._round());this.updateDistance(Wl,Da),this.addCurrentVertex(Da,wc,0,0,kl),Wl=Da}}const zu=Wl&&Ql;let Du=zu?ll:pl?"butt":cl;if(zu&&"round"===Du&&(cu<dl?Du="miter":cu<=2&&(Du="fakeround")),"miter"===Du&&cu>hl&&(Du="bevel"),"bevel"===Du&&(cu>2&&(Du="flipbevel"),cu<hl&&(Du="miter")),Wl&&this.updateDistance(Wl,Dl),"miter"===Du)Da._mult(cu),this.addCurrentVertex(Dl,Da,0,0,kl);else if("flipbevel"===Du){if(cu>100)Da=Sc.mult(-1);else{const F=cu*wc.add(Sc).mag()/wc.sub(Sc).mag();Da._perp()._mult(F*(Lu?-1:1))}this.addCurrentVertex(Dl,Da,0,0,kl),this.addCurrentVertex(Dl,Da.mult(-1),0,0,kl)}else if("bevel"===Du||"fakeround"===Du){const F=-Math.sqrt(cu*cu-1),Da=Lu?F:0,ll=Lu?0:F;if(Wl&&this.addCurrentVertex(Dl,wc,Da,ll,kl),"fakeround"===Du){const F=Math.round(180*uu/Math.PI/20);for(let Da=1;Da<F;Da++){let ll=Da/F;if(.5!==ll){const F=ll-.5;ll+=ll*F*(ll-1)*((1.0904+iu*(iu*(3.55645-1.43519*iu)-3.2452))*F*F+(.848013+iu*(.215638*iu-1.06021)))}const cl=Sc.sub(wc)._mult(ll)._add(wc)._unit()._mult(Lu?-1:1);this.addHalfVertex(Dl,cl.x,cl.y,!1,Lu,0,kl)}}Ql&&this.addCurrentVertex(Dl,Sc,-Da,-ll,kl)}else if("butt"===Du)this.addCurrentVertex(Dl,Da,0,0,kl);else if("square"===Du){const F=Wl?1:-1;this.addCurrentVertex(Dl,Da,F,F,kl)}else"round"===Du&&(Wl&&(this.addCurrentVertex(Dl,wc,0,0,kl),this.addCurrentVertex(Dl,wc,1,1,kl,!0)),Ql&&(this.addCurrentVertex(Dl,Sc,-1,-1,kl,!0),this.addCurrentVertex(Dl,Sc,0,0,kl)));if(hu&&eu<fl-1){const F=Dl.dist(Ql);if(F>2*bl){const Da=Dl.add(Ql.sub(Dl)._mult(bl/F)._round());this.updateDistance(Dl,Da),this.addCurrentVertex(Da,Sc,0,0,kl),Dl=Da}}}}addCurrentVertex(F,Da,ll,cl,hl,dl=!1){const pl=Da.y*cl-Da.x,fl=-Da.y-Da.x*cl;this.addHalfVertex(F,Da.x+Da.y*ll,Da.y-Da.x*ll,dl,!1,ll,hl),this.addHalfVertex(F,pl,fl,dl,!0,-cl,hl),this.distance>rm/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(F,Da,ll,cl,hl,dl))}addHalfVertex({x:F,y:Da},ll,cl,hl,dl,pl,fl){const Al=.5*(this.lineClips?this.scaledDistance*(rm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((F<<1)+(hl?1:0),(Da<<1)+(dl?1:0),Math.round(63*ll)+128,Math.round(63*cl)+128,1+(0===pl?0:pl<0?-1:1)|(63&Al)<<2,Al>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const bl=fl.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,bl),fl.primitiveLength++),dl?this.e2=bl:this.e1=bl}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(F,Da){this.distance+=F.dist(Da),this.updateScaledDistance()}}let am,sm;wi("LineBucket",ql,{omit:["layers","patternFeatures"]});var om={get paint(){return sm=sm||new rs({"line-opacity":new Wi(iu.paint_line["line-opacity"]),"line-color":new Wi(iu.paint_line["line-color"]),"line-translate":new Ji(iu.paint_line["line-translate"]),"line-translate-anchor":new Ji(iu.paint_line["line-translate-anchor"]),"line-width":new Wi(iu.paint_line["line-width"]),"line-gap-width":new Wi(iu.paint_line["line-gap-width"]),"line-offset":new Wi(iu.paint_line["line-offset"]),"line-blur":new Wi(iu.paint_line["line-blur"]),"line-dasharray":new ts(iu.paint_line["line-dasharray"]),"line-pattern":new Qi(iu.paint_line["line-pattern"]),"line-gradient":new es(iu.paint_line["line-gradient"])})},get layout(){return am=am||new rs({"line-cap":new Ji(iu.layout_line["line-cap"]),"line-join":new Wi(iu.layout_line["line-join"]),"line-miter-limit":new Ji(iu.layout_line["line-miter-limit"]),"line-round-limit":new Ji(iu.layout_line["line-round-limit"]),"line-sort-key":new Wi(iu.layout_line["line-sort-key"])})}};class Kl extends Wi{possiblyEvaluate(F,Da){return Da=new Ui(Math.floor(Da.zoom),{now:Da.now,fadeDuration:Da.fadeDuration,zoomHistory:Da.zoomHistory,transition:Da.transition}),super.possiblyEvaluate(F,Da)}evaluate(F,Da,ll,cl){return Da=g({},Da,{zoom:Math.floor(Da.zoom)}),super.evaluate(F,Da,ll,cl)}}let lm;class Hl extends is{constructor(F){super(F,om),this.gradientVersion=0,lm||(lm=new Kl(om.paint.properties["line-width"].specification),lm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(F){if("line-gradient"===F){const F=this.gradientExpression();this.stepInterpolant=!!function(F){return void 0!==F._styleExpression}(F)&&F._styleExpression.expression instanceof Ae,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(F,Da){super.recalculate(F,Da),this.paint._values["line-floorwidth"]=lm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,F)}createBucket(F){return new ql(F)}queryRadius(F){const Da=F,ll=Yl(to("line-width",this,Da),to("line-gap-width",this,Da)),cl=to("line-offset",this,Da);return ll/2+Math.abs(cl)+eo(this.paint.get("line-translate"))}queryIntersectsFeature(F,Da,cl,hl,dl,pl,fl){const Al=ro(F,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),pl.angle,fl),bl=fl/2*Yl(this.paint.get("line-width").evaluate(Da,cl),this.paint.get("line-gap-width").evaluate(Da,cl)),kl=this.paint.get("line-offset").evaluate(Da,cl);return kl&&(hl=function(F,Da){const cl=[];for(let hl=0;hl<F.length;hl++){const dl=F[hl],pl=[];for(let F=0;F<dl.length;F++){const cl=dl[F-1],hl=dl[F],fl=dl[F+1],Al=0===F?new ll(0,0):hl.sub(cl)._unit()._perp(),bl=F===dl.length-1?new ll(0,0):fl.sub(hl)._unit()._perp(),kl=Al._add(bl)._unit(),Dl=kl.x*bl.x+kl.y*bl.y;0!==Dl&&kl._mult(1/Dl),pl.push(kl._mult(Da)._add(hl))}cl.push(pl)}return cl}(hl,kl*fl)),function(F,Da,ll){for(let cl=0;cl<Da.length;cl++){const hl=Da[cl];if(F.length>=3)for(let Da=0;Da<hl.length;Da++)if(Wa(F,hl[Da]))return!0;if(Ga(F,hl,ll))return!0}return!1}(Al,hl,bl)}isTileClipped(){return!0}}function Yl(F,Da){return Da>0?Da+2*F:F}const cm=ls([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),um=ls([{name:"a_projected_pos",components:3,type:"Float32"}],4);ls([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hm=ls([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ls([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dm=ls([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pm=ls([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ru(F,Da,ll){return F.sections.forEach((F=>{F.text=function(F,Da,ll){const cl=Da.layout.get("text-transform").evaluate(ll,{});return"uppercase"===cl?F=F.toLocaleUpperCase():"lowercase"===cl&&(F=F.toLocaleLowerCase()),qd.applyArabicShaping&&(F=qd.applyArabicShaping(F)),F}(F.text,Da,ll)})),F}ls([{name:"triangle",components:3,type:"Uint16"}]),ls([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ls([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ls([{type:"Float32",name:"offsetX"}]),ls([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ls([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const mm={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var fm=24,gm=lu,au=function(F,Da,ll,cl,hl){var dl,pl,fl=8*hl-cl-1,Al=(1<<fl)-1,bl=Al>>1,kl=-7,Dl=ll?hl-1:0,Wl=ll?-1:1,Ql=F[Da+Dl];for(Dl+=Wl,dl=Ql&(1<<-kl)-1,Ql>>=-kl,kl+=fl;kl>0;dl=256*dl+F[Da+Dl],Dl+=Wl,kl-=8);for(pl=dl&(1<<-kl)-1,dl>>=-kl,kl+=cl;kl>0;pl=256*pl+F[Da+Dl],Dl+=Wl,kl-=8);if(0===dl)dl=1-bl;else{if(dl===Al)return pl?NaN:1/0*(Ql?-1:1);pl+=Math.pow(2,cl),dl-=bl}return(Ql?-1:1)*pl*Math.pow(2,dl-cl)},ou=function(F,Da,ll,cl,hl,dl){var pl,fl,Al,bl=8*dl-hl-1,kl=(1<<bl)-1,Dl=kl>>1,Wl=23===hl?Math.pow(2,-24)-Math.pow(2,-77):0,Ql=cl?0:dl-1,wc=cl?1:-1,Sc=Da<0||0===Da&&1/Da<0?1:0;for(Da=Math.abs(Da),isNaN(Da)||Da===1/0?(fl=isNaN(Da)?1:0,pl=kl):(pl=Math.floor(Math.log(Da)/Math.LN2),Da*(Al=Math.pow(2,-pl))<1&&(pl--,Al*=2),(Da+=pl+Dl>=1?Wl/Al:Wl*Math.pow(2,1-Dl))*Al>=2&&(pl++,Al/=2),pl+Dl>=kl?(fl=0,pl=kl):pl+Dl>=1?(fl=(Da*Al-1)*Math.pow(2,hl),pl+=Dl):(fl=Da*Math.pow(2,Dl-1)*Math.pow(2,hl),pl=0));hl>=8;F[ll+Ql]=255&fl,Ql+=wc,fl/=256,hl-=8);for(pl=pl<<hl|fl,bl+=hl;bl>0;F[ll+Ql]=255&pl,Ql+=wc,pl/=256,bl-=8);F[ll+Ql-wc]|=128*Sc};function lu(F){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(F)?F:new Uint8Array(F||0),this.pos=0,this.type=0,this.length=this.buf.length}lu.Varint=0,lu.Fixed64=1,lu.Bytes=2,lu.Fixed32=5;var Am=4294967296,ym=1/Am,vm="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function pu(F){return F.type===lu.Bytes?F.readVarint()+F.pos:F.pos+1}function fu(F,Da,ll){return ll?4294967296*Da+(F>>>0):4294967296*(Da>>>0)+(F>>>0)}function du(F,Da,ll){var cl=Da<=16383?1:Da<=2097151?2:Da<=268435455?3:Math.floor(Math.log(Da)/(7*Math.LN2));ll.realloc(cl);for(var hl=ll.pos-1;hl>=F;hl--)ll.buf[hl+cl]=ll.buf[hl]}function yu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeVarint(F[ll])}function mu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSVarint(F[ll])}function gu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFloat(F[ll])}function xu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeDouble(F[ll])}function vu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeBoolean(F[ll])}function bu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFixed32(F[ll])}function wu(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSFixed32(F[ll])}function _u(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeFixed64(F[ll])}function Au(F,Da){for(var ll=0;ll<F.length;ll++)Da.writeSFixed64(F[ll])}function Su(F,Da){return(F[Da]|F[Da+1]<<8|F[Da+2]<<16)+16777216*F[Da+3]}function ku(F,Da,ll){F[ll]=Da,F[ll+1]=Da>>>8,F[ll+2]=Da>>>16,F[ll+3]=Da>>>24}function Mu(F,Da){return(F[Da]|F[Da+1]<<8|F[Da+2]<<16)+(F[Da+3]<<24)}lu.prototype={destroy:function(){this.buf=null},readFields:function(F,Da,ll){for(ll=ll||this.length;this.pos<ll;){var cl=this.readVarint(),hl=cl>>3,dl=this.pos;this.type=7&cl,F(hl,Da,this),this.pos===dl&&this.skip(cl)}return Da},readMessage:function(F,Da){return this.readFields(F,Da,this.readVarint()+this.pos)},readFixed32:function(){var F=Su(this.buf,this.pos);return this.pos+=4,F},readSFixed32:function(){var F=Mu(this.buf,this.pos);return this.pos+=4,F},readFixed64:function(){var F=Su(this.buf,this.pos)+Su(this.buf,this.pos+4)*Am;return this.pos+=8,F},readSFixed64:function(){var F=Su(this.buf,this.pos)+Mu(this.buf,this.pos+4)*Am;return this.pos+=8,F},readFloat:function(){var F=au(this.buf,this.pos,!0,23,4);return this.pos+=4,F},readDouble:function(){var F=au(this.buf,this.pos,!0,52,8);return this.pos+=8,F},readVarint:function(F){var Da,ll,cl=this.buf;return Da=127&(ll=cl[this.pos++]),ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<7,ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<14,ll<128?Da:(Da|=(127&(ll=cl[this.pos++]))<<21,ll<128?Da:function(F,Da,ll){var cl,hl,dl=ll.buf;if(cl=(112&(hl=dl[ll.pos++]))>>4,hl<128)return fu(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<3,hl<128)return fu(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<10,hl<128)return fu(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<17,hl<128)return fu(F,cl,Da);if(cl|=(127&(hl=dl[ll.pos++]))<<24,hl<128)return fu(F,cl,Da);if(cl|=(1&(hl=dl[ll.pos++]))<<31,hl<128)return fu(F,cl,Da);throw new Error("Expected varint not more than 10 bytes")}(Da|=(15&(ll=cl[this.pos]))<<28,F,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var F=this.readVarint();return F%2==1?(F+1)/-2:F/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var F=this.readVarint()+this.pos,Da=this.pos;return this.pos=F,F-Da>=12&&vm?function(F,Da,ll){return vm.decode(F.subarray(Da,ll))}(this.buf,Da,F):function(F,Da,ll){for(var cl="",hl=Da;hl<ll;){var dl,pl,fl,Al=F[hl],bl=null,kl=Al>239?4:Al>223?3:Al>191?2:1;if(hl+kl>ll)break;1===kl?Al<128&&(bl=Al):2===kl?128==(192&(dl=F[hl+1]))&&(bl=(31&Al)<<6|63&dl)<=127&&(bl=null):3===kl?(pl=F[hl+2],128==(192&(dl=F[hl+1]))&&128==(192&pl)&&((bl=(15&Al)<<12|(63&dl)<<6|63&pl)<=2047||bl>=55296&&bl<=57343)&&(bl=null)):4===kl&&(pl=F[hl+2],fl=F[hl+3],128==(192&(dl=F[hl+1]))&&128==(192&pl)&&128==(192&fl)&&((bl=(15&Al)<<18|(63&dl)<<12|(63&pl)<<6|63&fl)<=65535||bl>=1114112)&&(bl=null)),null===bl?(bl=65533,kl=1):bl>65535&&(bl-=65536,cl+=String.fromCharCode(bl>>>10&1023|55296),bl=56320|1023&bl),cl+=String.fromCharCode(bl),hl+=kl}return cl}(this.buf,Da,F)},readBytes:function(){var F=this.readVarint()+this.pos,Da=this.buf.subarray(this.pos,F);return this.pos=F,Da},readPackedVarint:function(F,Da){if(this.type!==lu.Bytes)return F.push(this.readVarint(Da));var ll=pu(this);for(F=F||[];this.pos<ll;)F.push(this.readVarint(Da));return F},readPackedSVarint:function(F){if(this.type!==lu.Bytes)return F.push(this.readSVarint());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readSVarint());return F},readPackedBoolean:function(F){if(this.type!==lu.Bytes)return F.push(this.readBoolean());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readBoolean());return F},readPackedFloat:function(F){if(this.type!==lu.Bytes)return F.push(this.readFloat());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readFloat());return F},readPackedDouble:function(F){if(this.type!==lu.Bytes)return F.push(this.readDouble());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readDouble());return F},readPackedFixed32:function(F){if(this.type!==lu.Bytes)return F.push(this.readFixed32());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readFixed32());return F},readPackedSFixed32:function(F){if(this.type!==lu.Bytes)return F.push(this.readSFixed32());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readSFixed32());return F},readPackedFixed64:function(F){if(this.type!==lu.Bytes)return F.push(this.readFixed64());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readFixed64());return F},readPackedSFixed64:function(F){if(this.type!==lu.Bytes)return F.push(this.readSFixed64());var Da=pu(this);for(F=F||[];this.pos<Da;)F.push(this.readSFixed64());return F},skip:function(F){var Da=7&F;if(Da===lu.Varint)for(;this.buf[this.pos++]>127;);else if(Da===lu.Bytes)this.pos=this.readVarint()+this.pos;else if(Da===lu.Fixed32)this.pos+=4;else{if(Da!==lu.Fixed64)throw new Error("Unimplemented type: "+Da);this.pos+=8}},writeTag:function(F,Da){this.writeVarint(F<<3|Da)},realloc:function(F){for(var Da=this.length||16;Da<this.pos+F;)Da*=2;if(Da!==this.length){var ll=new Uint8Array(Da);ll.set(this.buf),this.buf=ll,this.length=Da}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(F){this.realloc(4),ku(this.buf,F,this.pos),this.pos+=4},writeSFixed32:function(F){this.realloc(4),ku(this.buf,F,this.pos),this.pos+=4},writeFixed64:function(F){this.realloc(8),ku(this.buf,-1&F,this.pos),ku(this.buf,Math.floor(F*ym),this.pos+4),this.pos+=8},writeSFixed64:function(F){this.realloc(8),ku(this.buf,-1&F,this.pos),ku(this.buf,Math.floor(F*ym),this.pos+4),this.pos+=8},writeVarint:function(F){(F=+F||0)>268435455||F<0?function(F,Da){var ll,cl;if(F>=0?(ll=F%4294967296|0,cl=F/4294967296|0):(cl=~(-F/4294967296),4294967295^(ll=~(-F%4294967296))?ll=ll+1|0:(ll=0,cl=cl+1|0)),F>=0x10000000000000000||F<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Da.realloc(10),function(F,Da,ll){ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,F>>>=7,ll.buf[ll.pos++]=127&F|128,ll.buf[ll.pos]=127&(F>>>=7)}(ll,0,Da),function(F,Da){var ll=(7&F)<<4;Da.buf[Da.pos++]|=ll|((F>>>=3)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F|((F>>>=7)?128:0),F&&(Da.buf[Da.pos++]=127&F)))))}(cl,Da)}(F,this):(this.realloc(4),this.buf[this.pos++]=127&F|(F>127?128:0),F<=127||(this.buf[this.pos++]=127&(F>>>=7)|(F>127?128:0),F<=127||(this.buf[this.pos++]=127&(F>>>=7)|(F>127?128:0),F<=127||(this.buf[this.pos++]=F>>>7&127))))},writeSVarint:function(F){this.writeVarint(F<0?2*-F-1:2*F)},writeBoolean:function(F){this.writeVarint(Boolean(F))},writeString:function(F){F=String(F),this.realloc(4*F.length),this.pos++;var Da=this.pos;this.pos=function(F,Da,ll){for(var cl,hl,dl=0;dl<Da.length;dl++){if((cl=Da.charCodeAt(dl))>55295&&cl<57344){if(!hl){cl>56319||dl+1===Da.length?(F[ll++]=239,F[ll++]=191,F[ll++]=189):hl=cl;continue}if(cl<56320){F[ll++]=239,F[ll++]=191,F[ll++]=189,hl=cl;continue}cl=hl-55296<<10|cl-56320|65536,hl=null}else hl&&(F[ll++]=239,F[ll++]=191,F[ll++]=189,hl=null);cl<128?F[ll++]=cl:(cl<2048?F[ll++]=cl>>6|192:(cl<65536?F[ll++]=cl>>12|224:(F[ll++]=cl>>18|240,F[ll++]=cl>>12&63|128),F[ll++]=cl>>6&63|128),F[ll++]=63&cl|128)}return ll}(this.buf,F,this.pos);var ll=this.pos-Da;ll>=128&&du(Da,ll,this),this.pos=Da-1,this.writeVarint(ll),this.pos+=ll},writeFloat:function(F){this.realloc(4),ou(this.buf,F,this.pos,!0,23,4),this.pos+=4},writeDouble:function(F){this.realloc(8),ou(this.buf,F,this.pos,!0,52,8),this.pos+=8},writeBytes:function(F){var Da=F.length;this.writeVarint(Da),this.realloc(Da);for(var ll=0;ll<Da;ll++)this.buf[this.pos++]=F[ll]},writeRawMessage:function(F,Da){this.pos++;var ll=this.pos;F(Da,this);var cl=this.pos-ll;cl>=128&&du(ll,cl,this),this.pos=ll-1,this.writeVarint(cl),this.pos+=cl},writeMessage:function(F,Da,ll){this.writeTag(F,lu.Bytes),this.writeRawMessage(Da,ll)},writePackedVarint:function(F,Da){Da.length&&this.writeMessage(F,yu,Da)},writePackedSVarint:function(F,Da){Da.length&&this.writeMessage(F,mu,Da)},writePackedBoolean:function(F,Da){Da.length&&this.writeMessage(F,vu,Da)},writePackedFloat:function(F,Da){Da.length&&this.writeMessage(F,gu,Da)},writePackedDouble:function(F,Da){Da.length&&this.writeMessage(F,xu,Da)},writePackedFixed32:function(F,Da){Da.length&&this.writeMessage(F,bu,Da)},writePackedSFixed32:function(F,Da){Da.length&&this.writeMessage(F,wu,Da)},writePackedFixed64:function(F,Da){Da.length&&this.writeMessage(F,_u,Da)},writePackedSFixed64:function(F,Da){Da.length&&this.writeMessage(F,Au,Da)},writeBytesField:function(F,Da){this.writeTag(F,lu.Bytes),this.writeBytes(Da)},writeFixed32Field:function(F,Da){this.writeTag(F,lu.Fixed32),this.writeFixed32(Da)},writeSFixed32Field:function(F,Da){this.writeTag(F,lu.Fixed32),this.writeSFixed32(Da)},writeFixed64Field:function(F,Da){this.writeTag(F,lu.Fixed64),this.writeFixed64(Da)},writeSFixed64Field:function(F,Da){this.writeTag(F,lu.Fixed64),this.writeSFixed64(Da)},writeVarintField:function(F,Da){this.writeTag(F,lu.Varint),this.writeVarint(Da)},writeSVarintField:function(F,Da){this.writeTag(F,lu.Varint),this.writeSVarint(Da)},writeStringField:function(F,Da){this.writeTag(F,lu.Bytes),this.writeString(Da)},writeFloatField:function(F,Da){this.writeTag(F,lu.Fixed32),this.writeFloat(Da)},writeDoubleField:function(F,Da){this.writeTag(F,lu.Fixed64),this.writeDouble(Da)},writeBooleanField:function(F,Da){this.writeVarintField(F,Boolean(Da))}};var _m=r(gm);const xm=3;function Pu(F,Da,ll){1===F&&ll.readMessage(Cu,Da)}function Cu(F,Da,ll){if(3===F){const{id:F,bitmap:cl,width:hl,height:dl,left:pl,top:fl,advance:Al}=ll.readMessage(Bu,{});Da.push({id:F,bitmap:new _o({width:hl+2*xm,height:dl+2*xm},cl),metrics:{width:hl,height:dl,left:pl,top:fl,advance:Al}})}}function Bu(F,Da,ll){1===F?Da.id=ll.readVarint():2===F?Da.bitmap=ll.readBytes():3===F?Da.width=ll.readVarint():4===F?Da.height=ll.readVarint():5===F?Da.left=ll.readSVarint():6===F?Da.top=ll.readSVarint():7===F&&(Da.advance=ll.readVarint())}const bm=xm;function Eu(F){let Da=0,ll=0;for(const pl of F)Da+=pl.w*pl.h,ll=Math.max(ll,pl.w);F.sort(((F,Da)=>Da.h-F.h));const cl=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(Da/.95)),ll),h:1/0}];let hl=0,dl=0;for(const pl of F)for(let F=cl.length-1;F>=0;F--){const Da=cl[F];if(!(pl.w>Da.w||pl.h>Da.h)){if(pl.x=Da.x,pl.y=Da.y,dl=Math.max(dl,pl.y+pl.h),hl=Math.max(hl,pl.x+pl.w),pl.w===Da.w&&pl.h===Da.h){const Da=cl.pop();F<cl.length&&(cl[F]=Da)}else pl.h===Da.h?(Da.x+=pl.w,Da.w-=pl.w):pl.w===Da.w?(Da.y+=pl.h,Da.h-=pl.h):(cl.push({x:Da.x+pl.w,y:Da.y,w:Da.w-pl.w,h:pl.h}),Da.y+=pl.h,Da.h-=pl.h);break}}return{w:hl,h:dl,fill:Da/(hl*dl)||0}}const wm=1;class Tu{constructor(F,{pixelRatio:Da,version:ll,stretchX:cl,stretchY:hl,content:dl,textFitWidth:pl,textFitHeight:fl}){this.paddedRect=F,this.pixelRatio=Da,this.stretchX=cl,this.stretchY=hl,this.content=dl,this.version=ll,this.textFitWidth=pl,this.textFitHeight=fl}get tl(){return[this.paddedRect.x+wm,this.paddedRect.y+wm]}get br(){return[this.paddedRect.x+this.paddedRect.w-wm,this.paddedRect.y+this.paddedRect.h-wm]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*wm)/this.pixelRatio,(this.paddedRect.h-2*wm)/this.pixelRatio]}}class $u{constructor(F,Da){const ll={},cl={};this.haveRenderCallbacks=[];const hl=[];this.addImages(F,ll,hl),this.addImages(Da,cl,hl);const{w:dl,h:pl}=Eu(hl),fl=new Ao({width:dl||1,height:pl||1});for(const Al in F){const Da=F[Al],cl=ll[Al].paddedRect;Ao.copy(Da.data,fl,{x:0,y:0},{x:cl.x+wm,y:cl.y+wm},Da.data)}for(const Al in Da){const F=Da[Al],ll=cl[Al].paddedRect,hl=ll.x+wm,dl=ll.y+wm,pl=F.data.width,bl=F.data.height;Ao.copy(F.data,fl,{x:0,y:0},{x:hl,y:dl},F.data),Ao.copy(F.data,fl,{x:0,y:bl-1},{x:hl,y:dl-1},{width:pl,height:1}),Ao.copy(F.data,fl,{x:0,y:0},{x:hl,y:dl+bl},{width:pl,height:1}),Ao.copy(F.data,fl,{x:pl-1,y:0},{x:hl-1,y:dl},{width:1,height:bl}),Ao.copy(F.data,fl,{x:0,y:0},{x:hl+pl,y:dl},{width:1,height:bl})}this.image=fl,this.iconPositions=ll,this.patternPositions=cl}addImages(F,Da,ll){for(const cl in F){const hl=F[cl],dl={x:0,y:0,w:hl.data.width+2*wm,h:hl.data.height+2*wm};ll.push(dl),Da[cl]=new Tu(dl,hl),hl.hasRenderCallback&&this.haveRenderCallbacks.push(cl)}}patchUpdatedImages(F,Da){F.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ll in F.updatedImages)this.patchUpdatedImage(this.iconPositions[ll],F.getImage(ll),Da),this.patchUpdatedImage(this.patternPositions[ll],F.getImage(ll),Da)}patchUpdatedImage(F,Da,ll){if(!F||!Da)return;if(F.version===Da.version)return;F.version=Da.version;const[cl,hl]=F.tl;ll.update(Da.data,void 0,{x:cl,y:hl})}}var Em;wi("ImagePosition",Tu),wi("ImageAtlas",$u),F.ah=void 0,(Em=F.ah||(F.ah={}))[Em.none=0]="none",Em[Em.horizontal=1]="horizontal",Em[Em.vertical=2]="vertical",Em[Em.horizontalOnly=3]="horizontalOnly";const Mm=-17;class Ou{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(F,Da){const ll=new Ou;return ll.scale=F||1,ll.fontStack=Da,ll}static forImage(F){const Da=new Ou;return Da.imageName=F,Da}}class ju{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(F,Da){const ll=new ju;for(let cl=0;cl<F.sections.length;cl++){const hl=F.sections[cl];hl.image?ll.addImageSection(hl):ll.addTextSection(hl,Da)}return ll}length(){return this.text.length}getSection(F){return this.sections[this.sectionIndex[F]]}getSectionIndex(F){return this.sectionIndex[F]}getCharCode(F){return this.text.charCodeAt(F)}verticalizePunctuation(){this.text=function(F){let Da="";for(let ll=0;ll<F.length;ll++){const cl=F.charCodeAt(ll+1)||null,hl=F.charCodeAt(ll-1)||null;Da+=cl&&$i(cl)&&!mm[F[ll+1]]||hl&&$i(hl)&&!mm[F[ll-1]]||!mm[F[ll]]?F[ll]:mm[F[ll]]}return Da}(this.text)}trim(){let F=0;for(let ll=0;ll<this.text.length&&Sm[this.text.charCodeAt(ll)];ll++)F++;let Da=this.text.length;for(let ll=this.text.length-1;ll>=0&&ll>=F&&Sm[this.text.charCodeAt(ll)];ll--)Da--;this.text=this.text.substring(F,Da),this.sectionIndex=this.sectionIndex.slice(F,Da)}substring(F,Da){const ll=new ju;return ll.text=this.text.substring(F,Da),ll.sectionIndex=this.sectionIndex.slice(F,Da),ll.sections=this.sections,ll}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((F,Da)=>Math.max(F,this.sections[Da].scale)),0)}addTextSection(F,Da){this.text+=F.text,this.sections.push(Ou.forText(F.scale,F.fontStack||Da));const ll=this.sections.length-1;for(let cl=0;cl<F.text.length;++cl)this.sectionIndex.push(ll)}addImageSection(F){const Da=F.image?F.image.name:"";if(0===Da.length)return void A("Can't add FormattedSection with an empty image.");const ll=this.getNextImageSectionCharCode();ll?(this.text+=String.fromCharCode(ll),this.sections.push(Ou.forImage(Da)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ru(Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){const eu=ju.fromFeature(Da,dl);let iu;Wl===F.ah.vertical&&eu.verticalizePunctuation();const{processBidirectionalText:su,processStyledBidirectionalText:cu}=qd;if(su&&1===eu.sections.length){iu=[];const F=su(eu.toString(),Yu(eu,kl,pl,ll,hl,wc));for(const Da of F){const F=new ju;F.text=Da,F.sections=eu.sections;for(let ll=0;ll<Da.length;ll++)F.sectionIndex.push(0);iu.push(F)}}else if(cu){iu=[];const F=cu(eu.text,eu.sectionIndex,Yu(eu,kl,pl,ll,hl,wc));for(const Da of F){const F=new ju;F.text=Da[0],F.sectionIndex=Da[1],F.sections=eu.sections,iu.push(F)}}else iu=function(F,Da){const ll=[],cl=F.text;let hl=0;for(const dl of Da)ll.push(F.substring(hl,dl)),hl=dl;return hl<cl.length&&ll.push(F.substring(hl,cl.length)),ll}(eu,Yu(eu,kl,pl,ll,hl,wc));const uu=[],hu={positionedLines:uu,text:eu.toString(),top:Dl[1],bottom:Dl[1],left:Dl[0],right:Dl[0],writingMode:Wl,iconsInText:!1,verticalizable:!1};return function(Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){let Ql=0,wc=Mm,Sc=0,eu=0;const iu="right"===Al?1:"left"===Al?0:.5;let su=0;for(const zu of dl){zu.trim();const dl=zu.getMaxScale(),fl=(dl-1)*fm,Al={positionedGlyphs:[],lineOffset:0};Da.positionedLines[su]=Al;const uu=Al.positionedGlyphs;let hu=0;if(!zu.length()){wc+=pl,++su;continue}for(let pl=0;pl<zu.length();pl++){const Al=zu.getSection(pl),Sc=zu.getSectionIndex(pl),eu=zu.getCharCode(pl);let iu=0,su=null,Lu=null,Du=null,Nu=fm;const qu=!(bl===F.ah.horizontal||!Dl&&!Ti(eu)||Dl&&(Sm[eu]||(cu=eu,/\p{sc=Arab}/u.test(String.fromCodePoint(cu)))));if(Al.imageName){const F=hl[Al.imageName];if(!F)continue;Du=Al.imageName,Da.iconsInText=Da.iconsInText||!0,Lu=F.paddedRect;const ll=F.displaySize;Al.scale=Al.scale*fm/Wl,su={width:ll[0],height:ll[1],left:wm,top:-bm,advance:qu?ll[1]:ll[0]},iu=fl+(fm-ll[1]*Al.scale),Nu=su.advance;const cl=qu?ll[0]*Al.scale-fm*dl:ll[1]*Al.scale-fm*dl;cl>0&&cl>hu&&(hu=cl)}else{const F=cl[Al.fontStack],Da=F&&F[eu];if(Da&&Da.rect)Lu=Da.rect,su=Da.metrics;else{const F=ll[Al.fontStack],Da=F&&F[eu];if(!Da)continue;su=Da.metrics}iu=(dl-Al.scale)*fm}qu?(Da.verticalizable=!0,uu.push({glyph:eu,imageName:Du,x:Ql,y:wc+iu,vertical:qu,scale:Al.scale,fontStack:Al.fontStack,sectionIndex:Sc,metrics:su,rect:Lu}),Ql+=Nu*Al.scale+kl):(uu.push({glyph:eu,imageName:Du,x:Ql,y:wc+iu,vertical:qu,scale:Al.scale,fontStack:Al.fontStack,sectionIndex:Sc,metrics:su,rect:Lu}),Ql+=su.advance*Al.scale+kl)}0!==uu.length&&(Sc=Math.max(Ql-kl,Sc),Wu(uu,0,uu.length-1,iu,hu)),Ql=0;const Lu=pl*dl+hu;Al.lineOffset=Math.max(hu,fl),wc+=Lu,eu=Math.max(Lu,eu),++su}var cu;const uu=wc-Mm,{horizontalAlign:hu,verticalAlign:Lu}=Ju(fl);(function(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=(Da-ll)*hl;let kl=0;kl=dl!==pl?-fl*cl-Mm:(-cl*Al+.5)*pl;for(const Dl of F)for(const F of Dl.positionedGlyphs)F.x+=bl,F.y+=kl})(Da.positionedLines,iu,hu,Lu,Sc,eu,pl,uu,dl.length),Da.top+=-Lu*uu,Da.bottom=Da.top+uu,Da.left+=-hu*Sc,Da.right=Da.left+Sc}(hu,ll,cl,hl,iu,fl,Al,bl,Wl,kl,Ql,Sc),!function(F){for(const Da of F)if(0!==Da.positionedGlyphs.length)return!1;return!0}(uu)&&hu}const Sm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},km={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Tm={40:!0};function Zu(F,Da,ll,cl,hl,dl){if(Da.imageName){const F=cl[Da.imageName];return F?F.displaySize[0]*Da.scale*fm/dl+hl:0}{const cl=ll[Da.fontStack],dl=cl&&cl[F];return dl?dl.metrics.advance*Da.scale+hl:0}}function Gu(F,Da,ll,cl){const hl=Math.pow(F-Da,2);return cl?F<Da?hl/2:2*hl:hl+Math.abs(ll)*ll}function Ku(F,Da,ll){let cl=0;return 10===F&&(cl-=1e4),ll&&(cl+=150),40!==F&&65288!==F||(cl+=50),41!==Da&&65289!==Da||(cl+=50),cl}function Xu(F,Da,ll,cl,hl,dl){let pl=null,fl=Gu(Da,ll,hl,dl);for(const Al of cl){const F=Gu(Da-Al.x,ll,hl,dl)+Al.badness;F<=fl&&(pl=Al,fl=F)}return{index:F,x:Da,priorBreak:pl,badness:fl}}function Hu(F){return F?Hu(F.priorBreak).concat(F.index):[]}function Yu(F,Da,ll,cl,hl,dl){if(!F)return[];const pl=[],fl=function(F,Da,ll,cl,hl,dl){let pl=0;for(let fl=0;fl<F.length();fl++){const ll=F.getSection(fl);pl+=Zu(F.getCharCode(fl),ll,cl,hl,Da,dl)}return pl/Math.max(1,Math.ceil(pl/ll))}(F,Da,ll,cl,hl,dl),Al=F.text.indexOf("\u200b")>=0;let bl=0;for(let Dl=0;Dl<F.length();Dl++){const ll=F.getSection(Dl),Wl=F.getCharCode(Dl);if(Sm[Wl]||(bl+=Zu(Wl,ll,cl,hl,Da,dl)),Dl<F.length()-1){const Da=!((kl=Wl)<11904)&&(!!Fd["CJK Compatibility Forms"](kl)||!!Fd["CJK Compatibility"](kl)||!!Fd["CJK Strokes"](kl)||!!Fd["CJK Symbols and Punctuation"](kl)||!!Fd["Enclosed CJK Letters and Months"](kl)||!!Fd["Halfwidth and Fullwidth Forms"](kl)||!!Fd["Ideographic Description Characters"](kl)||!!Fd["Vertical Forms"](kl)||Vd.test(String.fromCodePoint(kl)));(km[Wl]||Da||ll.imageName||Dl!==F.length()-2&&Tm[F.getCharCode(Dl+1)])&&pl.push(Xu(Dl+1,bl,fl,pl,Ku(Wl,F.getCharCode(Dl+1),Da&&Al),!1))}}var kl;return Hu(Xu(F.length(),bl,fl,pl,0,!0))}function Ju(F){let Da=.5,ll=.5;switch(F){case"right":case"top-right":case"bottom-right":Da=1;break;case"left":case"top-left":case"bottom-left":Da=0}switch(F){case"bottom":case"bottom-right":case"bottom-left":ll=1;break;case"top":case"top-right":case"top-left":ll=0}return{horizontalAlign:Da,verticalAlign:ll}}function Wu(F,Da,ll,cl,hl){if(!cl&&!hl)return;const dl=F[ll],pl=(F[ll].x+dl.metrics.advance*dl.scale)*cl;for(let fl=Da;fl<=ll;fl++)F[fl].x-=pl,F[fl].y+=hl}function Qu(F,Da,ll){const{horizontalAlign:cl,verticalAlign:hl}=Ju(ll),dl=Da[0]-F.displaySize[0]*cl,pl=Da[1]-F.displaySize[1]*hl;return{image:F,top:pl,bottom:pl+F.displaySize[1],left:dl,right:dl+F.displaySize[0]}}function tc(F){var Da,ll;let cl=F.left,hl=F.top,dl=F.right-cl,pl=F.bottom-hl;const fl=null!==(Da=F.image.textFitWidth)&&void 0!==Da?Da:"stretchOrShrink",Al=null!==(ll=F.image.textFitHeight)&&void 0!==ll?ll:"stretchOrShrink",bl=(F.image.content[2]-F.image.content[0])/(F.image.content[3]-F.image.content[1]);if("proportional"===Al){if("stretchOnly"===fl&&dl/pl<bl||"proportional"===fl){const F=Math.ceil(pl*bl);cl*=F/dl,dl=F}}else if("proportional"===fl&&"stretchOnly"===Al&&0!==bl&&dl/pl>bl){const F=Math.ceil(dl/bl);hl*=F/pl,pl=F}return{x1:cl,y1:hl,x2:cl+dl,y2:hl+pl}}function ec(F,Da,ll,cl,hl,dl){const pl=F.image;let fl;if(pl.content){const F=pl.content,Da=pl.pixelRatio||1;fl=[F[0]/Da,F[1]/Da,pl.displaySize[0]-F[2]/Da,pl.displaySize[1]-F[3]/Da]}const Al=Da.left*dl,bl=Da.right*dl;let kl,Dl,Wl,Ql;"width"===ll||"both"===ll?(Ql=hl[0]+Al-cl[3],Dl=hl[0]+bl+cl[1]):(Ql=hl[0]+(Al+bl-pl.displaySize[0])/2,Dl=Ql+pl.displaySize[0]);const wc=Da.top*dl,Sc=Da.bottom*dl;return"height"===ll||"both"===ll?(kl=hl[1]+wc-cl[0],Wl=hl[1]+Sc+cl[2]):(kl=hl[1]+(wc+Sc-pl.displaySize[1])/2,Wl=kl+pl.displaySize[1]),{image:pl,top:kl,right:Dl,bottom:Wl,left:Ql,collisionPadding:fl}}const Im=255,Cm=128,Lm=Im*Cm;function sc(F,Da){const{expression:ll}=Da;if("constant"===ll.kind)return{kind:"constant",layoutSize:ll.evaluate(new Ui(F+1))};if("source"===ll.kind)return{kind:"source"};{const{zoomStops:Da,interpolationType:cl}=ll;let hl=0;for(;hl<Da.length&&Da[hl]<=F;)hl++;hl=Math.max(0,hl-1);let dl=hl;for(;dl<Da.length&&Da[dl]<F+1;)dl++;dl=Math.min(Da.length-1,dl);const pl=Da[hl],fl=Da[dl];return"composite"===ll.kind?{kind:"composite",minZoom:pl,maxZoom:fl,interpolationType:cl}:{kind:"camera",minZoom:pl,maxZoom:fl,minSize:ll.evaluate(new Ui(pl)),maxSize:ll.evaluate(new Ui(fl)),interpolationType:cl}}}function ac(F,Da,ll){let cl="never";const hl=F.get(Da);return hl?cl=hl:F.get(ll)&&(cl="always"),cl}const zm=Vp.VectorTileFeature.types,Pm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uc(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=fl?Math.min(Lm,Math.round(fl[0])):0,wc=fl?Math.min(Lm,Math.round(fl[1])):0;F.emplaceBack(Da,ll,Math.round(32*cl),Math.round(32*hl),dl,pl,(Ql<<1)+(Al?1:0),wc,16*bl,16*kl,256*Dl,256*Wl)}function cc(F,Da,ll){F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll),F.emplaceBack(Da.x,Da.y,ll)}function hc(F){for(const Da of F.sections)if(ji(Da.text))return!0;return!1}class pc{constructor(F){this.layoutVertexArray=new Ws,this.indexArray=new na,this.programConfigurations=F,this.segments=new oa,this.dynamicLayoutVertexArray=new Qs,this.opacityVertexArray=new ta,this.hasVisibleVertices=!1,this.placedSymbolArray=new $s}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(F,Da,ll,cl){this.isEmpty()||(ll&&(this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,cm.members),this.indexBuffer=F.createIndexBuffer(this.indexArray,Da),this.dynamicLayoutVertexBuffer=F.createVertexBuffer(this.dynamicLayoutVertexArray,um.members,!0),this.opacityVertexBuffer=F.createVertexBuffer(this.opacityVertexArray,Pm,!0),this.opacityVertexBuffer.itemSize=1),(ll||cl)&&this.programConfigurations.upload(F))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wi("SymbolBuffers",pc);class fc{constructor(F,Da,ll){this.layoutVertexArray=new F,this.layoutAttributes=Da,this.indexArray=new ll,this.segments=new oa,this.collisionVertexArray=new ra}upload(F){this.layoutVertexBuffer=F.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=F.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=F.createVertexBuffer(this.collisionVertexArray,hm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wi("CollisionBuffers",fc);class dc{constructor(Da){this.collisionBoxArray=Da.collisionBoxArray,this.zoom=Da.zoom,this.overscaling=Da.overscaling,this.layers=Da.layers,this.layerIds=this.layers.map((F=>F.id)),this.index=Da.index,this.pixelRatio=Da.pixelRatio,this.sourceLayerIndex=Da.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=lo([]),this.placementViewportMatrix=lo([]);const ll=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sc(this.zoom,ll["text-size"]),this.iconSizeData=sc(this.zoom,ll["icon-size"]);const cl=this.layers[0].layout,hl=cl.get("symbol-sort-key"),dl=cl.get("symbol-z-order");this.canOverlap="never"!==ac(cl,"text-overlap","text-allow-overlap")||"never"!==ac(cl,"icon-overlap","icon-allow-overlap")||cl.get("text-ignore-placement")||cl.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==dl&&!hl.isConstant(),this.sortFeaturesByY=("viewport-y"===dl||"auto"===dl&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===cl.get("symbol-placement")&&(this.writingModes=cl.get("text-writing-mode").map((Da=>F.ah[Da]))),this.stateDependentLayerIds=this.layers.filter((F=>F.isStateDependent())).map((F=>F.id)),this.sourceID=Da.sourceID}createArrays(){this.text=new pc(new Ea(this.layers,this.zoom,(F=>/^text/.test(F)))),this.icon=new pc(new Ea(this.layers,this.zoom,(F=>/^icon/.test(F)))),this.glyphOffsetArray=new Os,this.lineVertexArray=new js,this.symbolInstances=new Ds,this.textAnchorOffsets=new Us}calculateGlyphDependencies(F,Da,ll,cl,hl){for(let dl=0;dl<F.length;dl++)if(Da[F.charCodeAt(dl)]=!0,(ll||cl)&&hl){const ll=mm[F.charAt(dl)];ll&&(Da[ll.charCodeAt(0)]=!0)}}populate(Da,ll,cl){const hl=this.layers[0],dl=hl.layout,pl=dl.get("text-font"),fl=dl.get("text-field"),Al=dl.get("icon-image"),bl=("constant"!==fl.value.kind||fl.value.value instanceof Yt&&!fl.value.value.isEmpty()||fl.value.value.toString().length>0)&&("constant"!==pl.value.kind||pl.value.value.length>0),kl="constant"!==Al.value.kind||!!Al.value.value||Object.keys(Al.parameters).length>0,Dl=dl.get("symbol-sort-key");if(this.features=[],!bl&&!kl)return;const Wl=ll.iconDependencies,Ql=ll.glyphDependencies,wc=ll.availableImages,Sc=new Ui(this.zoom);for(const{feature:eu,id:iu,index:su,sourceLayerIndex:cu}of Da){const Da=hl._featureFilter.needGeometry,ll=ja(eu,Da);if(!hl._featureFilter.filter(Sc,ll,cl))continue;let fl,Al;if(Da||(ll.geometry=Oa(eu)),bl){const F=hl.getValueAndResolveTokens("text-field",ll,cl,wc),Da=Yt.factory(F),dl=this.hasRTLText=this.hasRTLText||hc(Da);(!dl||"unavailable"===qd.getRTLTextPluginStatus()||dl&&qd.isParsed())&&(fl=ru(Da,hl,ll))}if(kl){const F=hl.getValueAndResolveTokens("icon-image",ll,cl,wc);Al=F instanceof te?F:te.fromString(F)}if(!fl&&!Al)continue;const uu=this.sortFeaturesByKey?Dl.evaluate(ll,{},cl):void 0;if(this.features.push({id:iu,text:fl,icon:Al,index:su,sourceLayerIndex:cu,geometry:ll.geometry,properties:eu.properties,type:zm[eu.type],sortKey:uu}),Al&&(Wl[Al.name]=!0),fl){const Da=pl.evaluate(ll,{},cl).join(","),hl="viewport"!==dl.get("text-rotation-alignment")&&"point"!==dl.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(F.ah.vertical)>=0;for(const F of fl.sections)if(F.image)Wl[F.image.name]=!0;else{const ll=Pi(fl.toString()),cl=F.fontStack||Da,dl=Ql[cl]=Ql[cl]||{};this.calculateGlyphDependencies(F.text,dl,hl,this.allowVerticalPlacement,ll)}}}"line"===dl.get("symbol-placement")&&(this.features=function(F){const Da={},ll={},cl=[];let hl=0;function s(Da){cl.push(F[Da]),hl++}function a(F,Da,hl){const dl=ll[F];return delete ll[F],ll[Da]=dl,cl[dl].geometry[0].pop(),cl[dl].geometry[0]=cl[dl].geometry[0].concat(hl[0]),dl}function o(F,ll,hl){const dl=Da[ll];return delete Da[ll],Da[F]=dl,cl[dl].geometry[0].shift(),cl[dl].geometry[0]=hl[0].concat(cl[dl].geometry[0]),dl}function l(F,Da,ll){const cl=ll?Da[0][Da[0].length-1]:Da[0][0];return`${F}:${cl.x}:${cl.y}`}for(let dl=0;dl<F.length;dl++){const pl=F[dl],fl=pl.geometry,Al=pl.text?pl.text.toString():null;if(!Al){s(dl);continue}const bl=l(Al,fl),kl=l(Al,fl,!0);if(bl in ll&&kl in Da&&ll[bl]!==Da[kl]){const F=o(bl,kl,fl),hl=a(bl,kl,cl[F].geometry);delete Da[bl],delete ll[kl],ll[l(Al,cl[hl].geometry,!0)]=hl,cl[F].geometry=null}else bl in ll?a(bl,kl,fl):kl in Da?o(bl,kl,fl):(s(dl),Da[bl]=hl-1,ll[kl]=hl-1)}return cl.filter((F=>F.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((F,Da)=>F.sortKey-Da.sortKey))}update(F,Da,ll){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(F,Da,this.layers,ll),this.icon.programConfigurations.updatePaintArrays(F,Da,this.layers,ll))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(F){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(F),this.iconCollisionBox.upload(F)),this.text.upload(F,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(F,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(F,Da){const ll=this.lineVertexArray.length;if(void 0!==F.segment){let ll=F.dist(Da[F.segment+1]),cl=F.dist(Da[F.segment]);const hl={};for(let dl=F.segment+1;dl<Da.length;dl++)hl[dl]={x:Da[dl].x,y:Da[dl].y,tileUnitDistanceFromAnchor:ll},dl<Da.length-1&&(ll+=Da[dl+1].dist(Da[dl]));for(let dl=F.segment||0;dl>=0;dl--)hl[dl]={x:Da[dl].x,y:Da[dl].y,tileUnitDistanceFromAnchor:cl},dl>0&&(cl+=Da[dl-1].dist(Da[dl]));for(let F=0;F<Da.length;F++){const Da=hl[F];this.lineVertexArray.emplaceBack(Da.x,Da.y,Da.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ll,lineLength:this.lineVertexArray.length-ll}}addSymbols(Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=Da.indexArray,wc=Da.layoutVertexArray,Sc=Da.segments.prepareSegment(4*ll.length,wc,Ql,this.canOverlap?pl.sortKey:void 0),eu=this.glyphOffsetArray.length,iu=Sc.vertexLength,su=this.allowVerticalPlacement&&fl===F.ah.vertical?Math.PI/2:0,cu=pl.text&&pl.text.sections;for(let F=0;F<ll.length;F++){const{tl:hl,tr:dl,bl:fl,br:bl,tex:kl,pixelOffsetTL:Dl,pixelOffsetBR:eu,minFontScaleX:iu,minFontScaleY:uu,glyphOffset:hu,isSDF:Lu,sectionIndex:zu}=ll[F],Du=Sc.vertexLength,Nu=hu[1];uc(wc,Al.x,Al.y,hl.x,Nu+hl.y,kl.x,kl.y,cl,Lu,Dl.x,Dl.y,iu,uu),uc(wc,Al.x,Al.y,dl.x,Nu+dl.y,kl.x+kl.w,kl.y,cl,Lu,eu.x,Dl.y,iu,uu),uc(wc,Al.x,Al.y,fl.x,Nu+fl.y,kl.x,kl.y+kl.h,cl,Lu,Dl.x,eu.y,iu,uu),uc(wc,Al.x,Al.y,bl.x,Nu+bl.y,kl.x+kl.w,kl.y+kl.h,cl,Lu,eu.x,eu.y,iu,uu),cc(Da.dynamicLayoutVertexArray,Al,su),Ql.emplaceBack(Du,Du+1,Du+2),Ql.emplaceBack(Du+1,Du+2,Du+3),Sc.vertexLength+=4,Sc.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hu[0]),F!==ll.length-1&&zu===ll[F+1].sectionIndex||Da.programConfigurations.populatePaintArrays(wc.length,pl,pl.index,{},Wl,cu&&cu[zu])}Da.placedSymbolArray.emplaceBack(Al.x,Al.y,eu,this.glyphOffsetArray.length-eu,iu,bl,kl,Al.segment,cl?cl[0]:0,cl?cl[1]:0,hl[0],hl[1],fl,0,!1,0,Dl)}_addCollisionDebugVertex(F,Da,ll,cl,hl,dl){return Da.emplaceBack(0,0),F.emplaceBack(ll.x,ll.y,cl,hl,Math.round(dl.x),Math.round(dl.y))}addCollisionDebugVertices(F,Da,cl,hl,dl,pl,fl){const Al=dl.segments.prepareSegment(4,dl.layoutVertexArray,dl.indexArray),bl=Al.vertexLength,kl=dl.layoutVertexArray,Dl=dl.collisionVertexArray,Wl=fl.anchorX,Ql=fl.anchorY;this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new ll(F,Da)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new ll(cl,Da)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new ll(cl,hl)),this._addCollisionDebugVertex(kl,Dl,pl,Wl,Ql,new ll(F,hl)),Al.vertexLength+=4;const wc=dl.indexArray;wc.emplaceBack(bl,bl+1),wc.emplaceBack(bl+1,bl+2),wc.emplaceBack(bl+2,bl+3),wc.emplaceBack(bl+3,bl),Al.primitiveLength+=4}addDebugCollisionBoxes(F,Da,ll,cl){for(let hl=F;hl<Da;hl++){const F=this.collisionBoxArray.get(hl);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,cl?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,ll)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fc(ea,dm.members,ia),this.iconCollisionBox=new fc(ea,dm.members,ia);for(let F=0;F<this.symbolInstances.length;F++){const Da=this.symbolInstances.get(F);this.addDebugCollisionBoxes(Da.textBoxStartIndex,Da.textBoxEndIndex,Da,!0),this.addDebugCollisionBoxes(Da.verticalTextBoxStartIndex,Da.verticalTextBoxEndIndex,Da,!0),this.addDebugCollisionBoxes(Da.iconBoxStartIndex,Da.iconBoxEndIndex,Da,!1),this.addDebugCollisionBoxes(Da.verticalIconBoxStartIndex,Da.verticalIconBoxEndIndex,Da,!1)}}_deserializeCollisionBoxesForSymbol(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl={};for(let kl=Da;kl<ll;kl++){const Da=F.get(kl);bl.textBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.textFeatureIndex=Da.featureIndex;break}for(let kl=cl;kl<hl;kl++){const Da=F.get(kl);bl.verticalTextBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.verticalTextFeatureIndex=Da.featureIndex;break}for(let kl=dl;kl<pl;kl++){const Da=F.get(kl);bl.iconBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.iconFeatureIndex=Da.featureIndex;break}for(let kl=fl;kl<Al;kl++){const Da=F.get(kl);bl.verticalIconBox={x1:Da.x1,y1:Da.y1,x2:Da.x2,y2:Da.y2,anchorPointX:Da.anchorPointX,anchorPointY:Da.anchorPointY},bl.verticalIconFeatureIndex=Da.featureIndex;break}return bl}deserializeCollisionBoxes(F){this.collisionArrays=[];for(let Da=0;Da<this.symbolInstances.length;Da++){const ll=this.symbolInstances.get(Da);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(F,ll.textBoxStartIndex,ll.textBoxEndIndex,ll.verticalTextBoxStartIndex,ll.verticalTextBoxEndIndex,ll.iconBoxStartIndex,ll.iconBoxEndIndex,ll.verticalIconBoxStartIndex,ll.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(F,Da){const ll=F.placedSymbolArray.get(Da),cl=ll.vertexStartIndex+4*ll.numGlyphs;for(let hl=ll.vertexStartIndex;hl<cl;hl+=4)F.indexArray.emplaceBack(hl,hl+1,hl+2),F.indexArray.emplaceBack(hl+1,hl+2,hl+3)}getSortedSymbolIndexes(F){if(this.sortedAngle===F&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const Da=Math.sin(F),ll=Math.cos(F),cl=[],hl=[],dl=[];for(let pl=0;pl<this.symbolInstances.length;++pl){dl.push(pl);const F=this.symbolInstances.get(pl);cl.push(0|Math.round(Da*F.anchorX+ll*F.anchorY)),hl.push(F.featureIndex)}return dl.sort(((F,Da)=>cl[F]-cl[Da]||hl[Da]-hl[F])),dl}addToSortKeyRanges(F,Da){const ll=this.sortKeyRanges[this.sortKeyRanges.length-1];ll&&ll.sortKey===Da?ll.symbolInstanceEnd=F+1:this.sortKeyRanges.push({sortKey:Da,symbolInstanceStart:F,symbolInstanceEnd:F+1})}sortFeatures(F){if(this.sortFeaturesByY&&this.sortedAngle!==F&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(F),this.sortedAngle=F,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const F of this.symbolInstanceIndexes){const Da=this.symbolInstances.get(F);this.featureSortOrder.push(Da.featureIndex),[Da.rightJustifiedTextSymbolIndex,Da.centerJustifiedTextSymbolIndex,Da.leftJustifiedTextSymbolIndex].forEach(((F,Da,ll)=>{F>=0&&ll.indexOf(F)===Da&&this.addIndicesForPlacedSymbol(this.text,F)})),Da.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Da.verticalPlacedTextSymbolIndex),Da.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Da.placedIconSymbolIndex),Da.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Da.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Dm,Rm;wi("SymbolBucket",dc,{omit:["layers","collisionBoxArray","features","compareText"]}),dc.MAX_GLYPHS=65535,dc.addDynamicAttributes=cc;var Nm={get paint(){return Rm=Rm||new rs({"icon-opacity":new Wi(iu.paint_symbol["icon-opacity"]),"icon-color":new Wi(iu.paint_symbol["icon-color"]),"icon-halo-color":new Wi(iu.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wi(iu.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wi(iu.paint_symbol["icon-halo-blur"]),"icon-translate":new Ji(iu.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ji(iu.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wi(iu.paint_symbol["text-opacity"]),"text-color":new Wi(iu.paint_symbol["text-color"],{runtimeType:zu,getOverride:F=>F.textColor,hasOverride:F=>!!F.textColor}),"text-halo-color":new Wi(iu.paint_symbol["text-halo-color"]),"text-halo-width":new Wi(iu.paint_symbol["text-halo-width"]),"text-halo-blur":new Wi(iu.paint_symbol["text-halo-blur"]),"text-translate":new Ji(iu.paint_symbol["text-translate"]),"text-translate-anchor":new Ji(iu.paint_symbol["text-translate-anchor"])})},get layout(){return Dm=Dm||new rs({"symbol-placement":new Ji(iu.layout_symbol["symbol-placement"]),"symbol-spacing":new Ji(iu.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ji(iu.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wi(iu.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ji(iu.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ji(iu.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ji(iu.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ji(iu.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ji(iu.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ji(iu.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wi(iu.layout_symbol["icon-size"]),"icon-text-fit":new Ji(iu.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ji(iu.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wi(iu.layout_symbol["icon-image"]),"icon-rotate":new Wi(iu.layout_symbol["icon-rotate"]),"icon-padding":new Wi(iu.layout_symbol["icon-padding"]),"icon-keep-upright":new Ji(iu.layout_symbol["icon-keep-upright"]),"icon-offset":new Wi(iu.layout_symbol["icon-offset"]),"icon-anchor":new Wi(iu.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ji(iu.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ji(iu.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ji(iu.layout_symbol["text-rotation-alignment"]),"text-field":new Wi(iu.layout_symbol["text-field"]),"text-font":new Wi(iu.layout_symbol["text-font"]),"text-size":new Wi(iu.layout_symbol["text-size"]),"text-max-width":new Wi(iu.layout_symbol["text-max-width"]),"text-line-height":new Ji(iu.layout_symbol["text-line-height"]),"text-letter-spacing":new Wi(iu.layout_symbol["text-letter-spacing"]),"text-justify":new Wi(iu.layout_symbol["text-justify"]),"text-radial-offset":new Wi(iu.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ji(iu.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Wi(iu.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Wi(iu.layout_symbol["text-anchor"]),"text-max-angle":new Ji(iu.layout_symbol["text-max-angle"]),"text-writing-mode":new Ji(iu.layout_symbol["text-writing-mode"]),"text-rotate":new Wi(iu.layout_symbol["text-rotate"]),"text-padding":new Ji(iu.layout_symbol["text-padding"]),"text-keep-upright":new Ji(iu.layout_symbol["text-keep-upright"]),"text-transform":new Wi(iu.layout_symbol["text-transform"]),"text-offset":new Wi(iu.layout_symbol["text-offset"]),"text-allow-overlap":new Ji(iu.layout_symbol["text-allow-overlap"]),"text-overlap":new Ji(iu.layout_symbol["text-overlap"]),"text-ignore-placement":new Ji(iu.layout_symbol["text-ignore-placement"]),"text-optional":new Ji(iu.layout_symbol["text-optional"])})}};class xc{constructor(F){if(void 0===F.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=F.property.overrides?F.property.overrides.runtimeType:cu,this.defaultValue=F}evaluate(F){if(F.formattedSection){const Da=this.defaultValue.property.overrides;if(Da&&Da.hasOverride(F.formattedSection))return Da.getOverride(F.formattedSection)}return F.feature&&F.featureState?this.defaultValue.evaluate(F.feature,F.featureState):this.defaultValue.property.specification.default}eachChild(F){this.defaultValue.isConstant()||F(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wi("FormatSectionOverride",xc,{omit:["defaultValue"]});class vc extends is{constructor(F){super(F,Nm)}recalculate(F,Da){if(super.recalculate(F,Da),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const F=this.layout.get("text-writing-mode");if(F){const Da=[];for(const ll of F)Da.indexOf(ll)<0&&Da.push(ll);this.layout._values["text-writing-mode"]=Da}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(F,Da,ll,cl){const hl=this.layout.get(F).evaluate(Da,{},ll,cl),dl=this._unevaluatedLayout._values[F];return dl.isDataDriven()||vn(dl.value)||!hl?hl:function(F,Da){return Da.replace(/{([^{}]+)}/g,((Da,ll)=>F&&ll in F?String(F[ll]):""))}(Da.properties,hl)}createBucket(F){return new dc(F)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const F of Nm.paint.overridableProperties){if(!vc.hasPaintOverride(this.layout,F))continue;const Da=this.paint.get(F),ll=new xc(Da),cl=new xn(ll,Da.property.specification);let hl=null;hl="constant"===Da.value.kind||"source"===Da.value.kind?new wn("source",cl):new _n("composite",cl,Da.value.zoomStops),this.paint._values[F]=new Hi(Da.property,hl,Da.parameters)}}_handleOverridablePaintPropertyUpdate(F,Da,ll){return!(!this.layout||Da.isDataDriven()||ll.isDataDriven())&&vc.hasPaintOverride(this.layout,F)}static hasPaintOverride(F,Da){const ll=F.get("text-field"),cl=Nm.paint.properties[Da];let hl=!1;const s=F=>{for(const Da of F)if(cl.overrides&&cl.overrides.hasOverride(Da))return void(hl=!0)};if("constant"===ll.value.kind&&ll.value.value instanceof Yt)s(ll.value.value.sections);else if("source"===ll.value.kind){const t=F=>{hl||(F instanceof se&&ne(F.value)===ih?s(F.value.sections):F instanceof Ze?s(F.sections):F.eachChild(t))},F=ll.value;F._styleExpression&&t(F._styleExpression.expression)}return hl}}let Um;var Bm={get paint(){return Um=Um||new rs({"background-color":new Ji(iu.paint_background["background-color"]),"background-pattern":new ts(iu.paint_background["background-pattern"]),"background-opacity":new Ji(iu.paint_background["background-opacity"])})}};class _c extends is{constructor(F){super(F,Bm)}}let Om;var Fm={get paint(){return Om=Om||new rs({"raster-opacity":new Ji(iu.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ji(iu.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ji(iu.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ji(iu.paint_raster["raster-brightness-max"]),"raster-saturation":new Ji(iu.paint_raster["raster-saturation"]),"raster-contrast":new Ji(iu.paint_raster["raster-contrast"]),"raster-resampling":new Ji(iu.paint_raster["raster-resampling"]),"raster-fade-duration":new Ji(iu.paint_raster["raster-fade-duration"])})}};class kc extends is{constructor(F){super(F,Fm)}}class Mc extends is{constructor(F){super(F,{}),this.onAdd=F=>{this.implementation.onAdd&&this.implementation.onAdd(F,F.painter.context.gl)},this.onRemove=F=>{this.implementation.onRemove&&this.implementation.onRemove(F,F.painter.context.gl)},this.implementation=F}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ic{constructor(F){this._methodToThrottle=F,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const jm=6371008.8;class Pc{constructor(F,Da){if(isNaN(F)||isNaN(Da))throw new Error(`Invalid LngLat object: (${F}, ${Da})`);if(this.lng=+F,this.lat=+Da,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pc(m(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(F){const Da=Math.PI/180,ll=this.lat*Da,cl=F.lat*Da,hl=Math.sin(ll)*Math.sin(cl)+Math.cos(ll)*Math.cos(cl)*Math.cos((F.lng-this.lng)*Da);return jm*Math.acos(Math.min(hl,1))}static convert(F){if(F instanceof Pc)return F;if(Array.isArray(F)&&(2===F.length||3===F.length))return new Pc(Number(F[0]),Number(F[1]));if(!Array.isArray(F)&&"object"==typeof F&&null!==F)return new Pc(Number("lng"in F?F.lng:F.lon),Number(F.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Vm=2*Math.PI*jm;function Bc(F){return Vm*Math.cos(F*Math.PI/180)}function Vc(F){return(180+F)/360}function Ec(F){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+F*Math.PI/360)))/360}function Fc(F,Da){return F/Bc(Da)}function Tc(F){return 360/Math.PI*Math.atan(Math.exp((180-360*F)*Math.PI/180))-90}class $c{constructor(F,Da,ll=0){this.x=+F,this.y=+Da,this.z=+ll}static fromLngLat(F,Da=0){const ll=Pc.convert(F);return new $c(Vc(ll.lng),Ec(ll.lat),Fc(Da,ll.lat))}toLngLat(){return new Pc(360*this.x-180,Tc(this.y))}toAltitude(){return this.z*Bc(Tc(this.y))}meterInMercatorCoordinateUnits(){return 1/Vm*(F=Tc(this.y),1/Math.cos(F*Math.PI/180));var F}}function Lc(F,Da,ll){var cl=2*Math.PI*6378137/256/Math.pow(2,ll);return[F*cl-2*Math.PI*6378137/2,Da*cl-2*Math.PI*6378137/2]}class Dc{constructor(F,Da,ll){if(!function(F,Da,ll){return!(F<0||F>25||ll<0||ll>=Math.pow(2,F)||Da<0||Da>=Math.pow(2,F))}(F,Da,ll))throw new Error(`x=${Da}, y=${ll}, z=${F} outside of bounds. 0<=x<${Math.pow(2,F)}, 0<=y<${Math.pow(2,F)} 0<=z<=25 `);this.z=F,this.x=Da,this.y=ll,this.key=Rc(0,F,F,Da,ll)}equals(F){return this.z===F.z&&this.x===F.x&&this.y===F.y}url(F,Da,ll){const cl=(dl=this.y,pl=this.z,fl=Lc(256*(hl=this.x),256*(dl=Math.pow(2,pl)-dl-1),pl),Al=Lc(256*(hl+1),256*(dl+1),pl),fl[0]+","+fl[1]+","+Al[0]+","+Al[1]);var hl,dl,pl,fl,Al;const bl=function(F,Da,ll){let cl,hl="";for(let dl=F;dl>0;dl--)cl=1<<dl-1,hl+=(Da&cl?1:0)+(ll&cl?2:0);return hl}(this.z,this.x,this.y);return F[(this.x+this.y)%F.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===ll?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,Da>1?"@2x":"").replace(/{quadkey}/g,bl).replace(/{bbox-epsg-3857}/g,cl)}isChildOf(F){const Da=this.z-F.z;return Da>0&&F.x===this.x>>Da&&F.y===this.y>>Da}getTilePoint(F){const Da=Math.pow(2,this.z);return new ll((F.x*Da-this.x)*vp,(F.y*Da-this.y)*vp)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Oc{constructor(F,Da){this.wrap=F,this.canonical=Da,this.key=Rc(F,Da.z,Da.z,Da.x,Da.y)}}class jc{constructor(F,Da,ll,cl,hl){if(F<ll)throw new Error(`overscaledZ should be >= z; overscaledZ = ${F}; z = ${ll}`);this.overscaledZ=F,this.wrap=Da,this.canonical=new Dc(ll,+cl,+hl),this.key=Rc(Da,F,ll,cl,hl)}clone(){return new jc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(F){return this.overscaledZ===F.overscaledZ&&this.wrap===F.wrap&&this.canonical.equals(F.canonical)}scaledTo(F){if(F>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${F}; overscaledZ = ${this.overscaledZ}`);const Da=this.canonical.z-F;return F>this.canonical.z?new jc(F,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jc(F,this.wrap,F,this.canonical.x>>Da,this.canonical.y>>Da)}calculateScaledKey(F,Da){if(F>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${F}; overscaledZ = ${this.overscaledZ}`);const ll=this.canonical.z-F;return F>this.canonical.z?Rc(this.wrap*+Da,F,this.canonical.z,this.canonical.x,this.canonical.y):Rc(this.wrap*+Da,F,F,this.canonical.x>>ll,this.canonical.y>>ll)}isChildOf(F){if(F.wrap!==this.wrap)return!1;const Da=this.canonical.z-F.canonical.z;return 0===F.overscaledZ||F.overscaledZ<this.overscaledZ&&F.canonical.x===this.canonical.x>>Da&&F.canonical.y===this.canonical.y>>Da}children(F){if(this.overscaledZ>=F)return[new jc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const Da=this.canonical.z+1,ll=2*this.canonical.x,cl=2*this.canonical.y;return[new jc(Da,this.wrap,Da,ll,cl),new jc(Da,this.wrap,Da,ll+1,cl),new jc(Da,this.wrap,Da,ll,cl+1),new jc(Da,this.wrap,Da,ll+1,cl+1)]}isLessThan(F){return this.wrap<F.wrap||!(this.wrap>F.wrap)&&(this.overscaledZ<F.overscaledZ||!(this.overscaledZ>F.overscaledZ)&&(this.canonical.x<F.canonical.x||!(this.canonical.x>F.canonical.x)&&this.canonical.y<F.canonical.y))}wrapped(){return new jc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(F){return new jc(this.overscaledZ,F,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Oc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(F){return this.canonical.getTilePoint(new $c(F.x-this.wrap,F.y))}}function Rc(F,Da,ll,cl,hl){(F*=2)<0&&(F=-1*F-1);const dl=1<<ll;return(dl*dl*F+dl*hl+cl).toString(36)+ll.toString(36)+Da.toString(36)}wi("CanonicalTileID",Dc),wi("OverscaledTileID",jc,{omit:["posMatrix"]});class Uc{constructor(F,Da,ll,cl=1,hl=1,dl=1,pl=0){if(this.uid=F,Da.height!==Da.width)throw new RangeError("DEM tiles must be square");if(ll&&!["mapbox","terrarium","custom"].includes(ll))return void A(`"${ll}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=Da.height;const fl=this.dim=Da.height-2;switch(this.data=new Uint32Array(Da.data.buffer),ll){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=cl,this.greenFactor=hl,this.blueFactor=dl,this.baseShift=pl;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Al=0;Al<fl;Al++)this.data[this._idx(-1,Al)]=this.data[this._idx(0,Al)],this.data[this._idx(fl,Al)]=this.data[this._idx(fl-1,Al)],this.data[this._idx(Al,-1)]=this.data[this._idx(Al,0)],this.data[this._idx(Al,fl)]=this.data[this._idx(Al,fl-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(fl,-1)]=this.data[this._idx(fl-1,0)],this.data[this._idx(-1,fl)]=this.data[this._idx(0,fl-1)],this.data[this._idx(fl,fl)]=this.data[this._idx(fl-1,fl-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Al=0;Al<fl;Al++)for(let F=0;F<fl;F++){const Da=this.get(Al,F);Da>this.max&&(this.max=Da),Da<this.min&&(this.min=Da)}}get(F,Da){const ll=new Uint8Array(this.data.buffer),cl=4*this._idx(F,Da);return this.unpack(ll[cl],ll[cl+1],ll[cl+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(F,Da){if(F<-1||F>=this.dim+1||Da<-1||Da>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(Da+1)*this.stride+(F+1)}unpack(F,Da,ll){return F*this.redFactor+Da*this.greenFactor+ll*this.blueFactor-this.baseShift}getPixels(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(F,Da,ll){if(this.dim!==F.dim)throw new Error("dem dimension mismatch");let cl=Da*this.dim,hl=Da*this.dim+this.dim,dl=ll*this.dim,pl=ll*this.dim+this.dim;switch(Da){case-1:cl=hl-1;break;case 1:hl=cl+1}switch(ll){case-1:dl=pl-1;break;case 1:pl=dl+1}const fl=-Da*this.dim,Al=-ll*this.dim;for(let bl=dl;bl<pl;bl++)for(let Da=cl;Da<hl;Da++)this.data[this._idx(Da,bl)]=F.data[this._idx(Da+fl,bl+Al)]}}wi("DEMData",Uc);class qc{constructor(F){this._stringToNumber={},this._numberToString=[];for(let Da=0;Da<F.length;Da++){const ll=F[Da];this._stringToNumber[ll]=Da,this._numberToString[Da]=ll}}encode(F){return this._stringToNumber[F]}decode(F){if(F>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${F} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[F]}}class Nc{constructor(F,Da,ll,cl,hl){this.type="Feature",this._vectorTileFeature=F,F._z=Da,F._x=ll,F._y=cl,this.properties=F.properties,this.id=hl}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(F){this._geometry=F}toJSON(){const F={geometry:this.geometry};for(const Da in this)"_geometry"!==Da&&"_vectorTileFeature"!==Da&&(F[Da]=this[Da]);return F}}class Zc{constructor(F,Da){this.tileID=F,this.x=F.canonical.x,this.y=F.canonical.y,this.z=F.canonical.z,this.grid=new vi(vp,16,0),this.grid3D=new vi(vp,16,0),this.featureIndexArray=new Ns,this.promoteId=Da}insert(F,Da,ll,cl,hl,dl){const pl=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ll,cl,hl);const fl=dl?this.grid3D:this.grid;for(let Al=0;Al<Da.length;Al++){const F=Da[Al],ll=[1/0,1/0,-1/0,-1/0];for(let Da=0;Da<F.length;Da++){const cl=F[Da];ll[0]=Math.min(ll[0],cl.x),ll[1]=Math.min(ll[1],cl.y),ll[2]=Math.max(ll[2],cl.x),ll[3]=Math.max(ll[3],cl.y)}ll[0]<vp&&ll[1]<vp&&ll[2]>=0&&ll[3]>=0&&fl.insert(pl,ll[0],ll[1],ll[2],ll[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vp.VectorTile(new _m(this.rawTileData)).layers,this.sourceLayerCoder=new qc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(F,Da,cl,hl){this.loadVTLayers();const dl=F.params||{},pl=vp/F.tileSize/F.scale,fl=zn(dl.filter),Al=F.queryGeometry,bl=F.queryPadding*pl,kl=Kc(Al),Dl=this.grid.query(kl.minX-bl,kl.minY-bl,kl.maxX+bl,kl.maxY+bl),Wl=Kc(F.cameraQueryGeometry),Ql=this.grid3D.query(Wl.minX-bl,Wl.minY-bl,Wl.maxX+bl,Wl.maxY+bl,((Da,cl,hl,dl)=>function(F,Da,cl,hl,dl){for(const ll of F)if(Da<=ll.x&&cl<=ll.y&&hl>=ll.x&&dl>=ll.y)return!0;const pl=[new ll(Da,cl),new ll(Da,dl),new ll(hl,dl),new ll(hl,cl)];if(F.length>2)for(const ll of pl)if(Wa(F,ll))return!0;for(let ll=0;ll<F.length-1;ll++)if(Qa(F[ll],F[ll+1],pl))return!0;return!1}(F.cameraQueryGeometry,Da-bl,cl-bl,hl+bl,dl+bl)));for(const ll of Ql)Dl.push(ll);Dl.sort(Xc);const wc={};let Sc;for(let ll=0;ll<Dl.length;ll++){const bl=Dl[ll];if(bl===Sc)continue;Sc=bl;const kl=this.featureIndexArray.get(bl);let Wl=null;this.loadMatchingFeature(wc,kl.bucketIndex,kl.sourceLayerIndex,kl.featureIndex,fl,dl.layers,dl.availableImages,Da,cl,hl,((Da,ll,cl)=>(Wl||(Wl=Oa(Da)),ll.queryIntersectsFeature(Al,Da,cl,Wl,this.z,F.transform,pl,F.pixelPosMatrix))))}return wc}loadMatchingFeature(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl){const Dl=this.bucketLayerIDs[Da];if(dl&&!function(F,Da){for(let ll=0;ll<F.length;ll++)if(Da.indexOf(F[ll])>=0)return!0;return!1}(dl,Dl))return;const Wl=this.sourceLayerCoder.decode(ll),Ql=this.vtLayers[Wl].feature(cl);if(hl.needGeometry){const F=ja(Ql,!0);if(!hl.filter(new Ui(this.tileID.overscaledZ),F,this.tileID.canonical))return}else if(!hl.filter(new Ui(this.tileID.overscaledZ),Ql))return;const wc=this.getId(Ql,Wl);for(let Sc=0;Sc<Dl.length;Sc++){const Da=Dl[Sc];if(dl&&dl.indexOf(Da)<0)continue;const ll=fl[Da];if(!ll)continue;let hl={};wc&&bl&&(hl=bl.getState(ll.sourceLayer||"_geojsonTileLayer",wc));const Wl=g({},Al[Da]);Wl.paint=Gc(Wl.paint,ll.paint,Ql,hl,pl),Wl.layout=Gc(Wl.layout,ll.layout,Ql,hl,pl);const eu=!kl||kl(Ql,ll,hl);if(!eu)continue;const iu=new Nc(Ql,this.z,this.x,this.y,wc);iu.layer=Wl;let su=F[Da];void 0===su&&(su=F[Da]=[]),su.push({featureIndex:cl,feature:iu,intersectionZ:eu})}}lookupSymbolFeatures(F,Da,ll,cl,hl,dl,pl,fl){const Al={};this.loadVTLayers();const bl=zn(hl);for(const kl of F)this.loadMatchingFeature(Al,ll,cl,kl,bl,dl,pl,fl,Da);return Al}hasLayer(F){for(const Da of this.bucketLayerIDs)for(const ll of Da)if(F===ll)return!0;return!1}getId(F,Da){let ll=F.id;return this.promoteId&&(ll=F.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[Da]],"boolean"==typeof ll&&(ll=Number(ll))),ll}}function Gc(F,Da,ll,cl,hl){return v(F,((F,dl)=>{const pl=Da instanceof Yi?Da.get(dl):null;return pl&&pl.evaluate?pl.evaluate(ll,cl,hl):pl}))}function Kc(F){let Da=1/0,ll=1/0,cl=-1/0,hl=-1/0;for(const dl of F)Da=Math.min(Da,dl.x),ll=Math.min(ll,dl.y),cl=Math.max(cl,dl.x),hl=Math.max(hl,dl.y);return{minX:Da,minY:ll,maxX:cl,maxY:hl}}function Xc(F,Da){return Da-F}function Hc(F,Da,cl,hl,dl){const pl=[];for(let fl=0;fl<F.length;fl++){const Al=F[fl];let bl;for(let F=0;F<Al.length-1;F++){let fl=Al[F],kl=Al[F+1];fl.x<Da&&kl.x<Da||(fl.x<Da?fl=new ll(Da,fl.y+(Da-fl.x)/(kl.x-fl.x)*(kl.y-fl.y))._round():kl.x<Da&&(kl=new ll(Da,fl.y+(Da-fl.x)/(kl.x-fl.x)*(kl.y-fl.y))._round()),fl.y<cl&&kl.y<cl||(fl.y<cl?fl=new ll(fl.x+(cl-fl.y)/(kl.y-fl.y)*(kl.x-fl.x),cl)._round():kl.y<cl&&(kl=new ll(fl.x+(cl-fl.y)/(kl.y-fl.y)*(kl.x-fl.x),cl)._round()),fl.x>=hl&&kl.x>=hl||(fl.x>=hl?fl=new ll(hl,fl.y+(hl-fl.x)/(kl.x-fl.x)*(kl.y-fl.y))._round():kl.x>=hl&&(kl=new ll(hl,fl.y+(hl-fl.x)/(kl.x-fl.x)*(kl.y-fl.y))._round()),fl.y>=dl&&kl.y>=dl||(fl.y>=dl?fl=new ll(fl.x+(dl-fl.y)/(kl.y-fl.y)*(kl.x-fl.x),dl)._round():kl.y>=dl&&(kl=new ll(fl.x+(dl-fl.y)/(kl.y-fl.y)*(kl.x-fl.x),dl)._round()),bl&&fl.equals(bl[bl.length-1])||(bl=[fl],pl.push(bl)),bl.push(kl)))))}}return pl}wi("FeatureIndex",Zc,{omit:["rawTileData","sourceLayerCoder"]});class Yc extends ll{constructor(F,Da,ll,cl){super(F,Da),this.angle=ll,void 0!==cl&&(this.segment=cl)}clone(){return new Yc(this.x,this.y,this.angle,this.segment)}}function Jc(F,Da,ll,cl,hl){if(void 0===Da.segment||0===ll)return!0;let dl=Da,pl=Da.segment+1,fl=0;for(;fl>-ll/2;){if(pl--,pl<0)return!1;fl-=F[pl].dist(dl),dl=F[pl]}fl+=F[pl].dist(F[pl+1]),pl++;const Al=[];let bl=0;for(;fl<ll/2;){const Da=F[pl],ll=F[pl+1];if(!ll)return!1;let dl=F[pl-1].angleTo(Da)-Da.angleTo(ll);for(dl=Math.abs((dl+3*Math.PI)%(2*Math.PI)-Math.PI),Al.push({distance:fl,angleDelta:dl}),bl+=dl;fl-Al[0].distance>cl;)bl-=Al.shift().angleDelta;if(bl>hl)return!1;pl++,fl+=Da.dist(ll)}return!0}function Wc(F){let Da=0;for(let ll=0;ll<F.length-1;ll++)Da+=F[ll].dist(F[ll+1]);return Da}function Qc(F,Da,ll){return F?.6*Da*ll:0}function th(F,Da){return Math.max(F?F.right-F.left:0,Da?Da.right-Da.left:0)}function eh(F,Da,ll,cl,hl,dl){const pl=Qc(ll,hl,dl),fl=th(ll,cl)*dl;let Al=0;const bl=Wc(F)/2;for(let kl=0;kl<F.length-1;kl++){const ll=F[kl],cl=F[kl+1],hl=ll.dist(cl);if(Al+hl>bl){const dl=(bl-Al)/hl,Dl=yd.number(ll.x,cl.x,dl),Wl=yd.number(ll.y,cl.y,dl),Ql=new Yc(Dl,Wl,cl.angleTo(ll),kl);return Ql._round(),!pl||Jc(F,Ql,fl,pl,Da)?Ql:void 0}Al+=hl}}function rh(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=Qc(cl,dl,pl),kl=th(cl,hl),Dl=kl*pl,Wl=0===F[0].x||F[0].x===Al||0===F[0].y||F[0].y===Al;return Da-Dl<Da/4&&(Da=Dl+Da/4),nh(F,Wl?Da/2*fl%Da:(kl/2+2*dl)*pl*fl%Da,Da,bl,ll,Dl,Wl,!1,Al)}function nh(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=dl/2,kl=Wc(F);let Dl=0,Wl=Da-ll,Ql=[];for(let wc=0;wc<F.length-1;wc++){const Da=F[wc],pl=F[wc+1],fl=Da.dist(pl),Sc=pl.angleTo(Da);for(;Wl+ll<Dl+fl;){Wl+=ll;const eu=(Wl-Dl)/fl,iu=yd.number(Da.x,pl.x,eu),su=yd.number(Da.y,pl.y,eu);if(iu>=0&&iu<Al&&su>=0&&su<Al&&Wl-bl>=0&&Wl+bl<=kl){const Da=new Yc(iu,su,Sc,wc);Da._round(),cl&&!Jc(F,Da,dl,cl,hl)||Ql.push(Da)}}Dl+=fl}return fl||Ql.length||pl||(Ql=nh(F,Dl/2,ll,cl,hl,dl,pl,!0,Al)),Ql}wi("Anchor",Yc);const Gm=wm;function sh(F,Da,cl,hl){const dl=[],pl=F.image,fl=pl.pixelRatio,Al=pl.paddedRect.w-2*Gm,bl=pl.paddedRect.h-2*Gm;let kl={x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};const Dl=pl.stretchX||[[0,Al]],Wl=pl.stretchY||[[0,bl]],f=(F,Da)=>F+Da[1]-Da[0],Ql=Dl.reduce(f,0),wc=Wl.reduce(f,0),Sc=Al-Ql,eu=bl-wc;let iu=0,su=Ql,cu=0,uu=wc,hu=0,Lu=Sc,zu=0,Du=eu;if(pl.content&&hl){const Da=pl.content,ll=Da[2]-Da[0],cl=Da[3]-Da[1];(pl.textFitWidth||pl.textFitHeight)&&(kl=tc(F)),iu=ah(Dl,0,Da[0]),cu=ah(Wl,0,Da[1]),su=ah(Dl,Da[0],Da[2]),uu=ah(Wl,Da[1],Da[3]),hu=Da[0]-iu,zu=Da[1]-cu,Lu=ll-su,Du=cl-uu}const Nu=kl.x1,qu=kl.y1,ih=kl.x2-Nu,gh=kl.y2-qu,C=(F,hl,dl,Al)=>{const bl=lh(F.stretch-iu,su,ih,Nu),kl=uh(F.fixed-hu,Lu,F.stretch,Ql),Dl=lh(hl.stretch-cu,uu,gh,qu),Wl=uh(hl.fixed-zu,Du,hl.stretch,wc),Sc=lh(dl.stretch-iu,su,ih,Nu),eu=uh(dl.fixed-hu,Lu,dl.stretch,Ql),ed=lh(Al.stretch-cu,uu,gh,qu),td=uh(Al.fixed-zu,Du,Al.stretch,wc),id=new ll(bl,Dl),nd=new ll(Sc,Dl),rd=new ll(Sc,ed),ad=new ll(bl,ed),sd=new ll(kl/fl,Wl/fl),od=new ll(eu/fl,td/fl),ld=Da*Math.PI/180;if(ld){const F=Math.sin(ld),Da=Math.cos(ld),ll=[Da,-F,F,Da];id._matMult(ll),nd._matMult(ll),ad._matMult(ll),rd._matMult(ll)}const cd=F.stretch+F.fixed,ud=hl.stretch+hl.fixed;return{tl:id,tr:nd,bl:ad,br:rd,tex:{x:pl.paddedRect.x+Gm+cd,y:pl.paddedRect.y+Gm+ud,w:dl.stretch+dl.fixed-cd,h:Al.stretch+Al.fixed-ud},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:sd,pixelOffsetBR:od,minFontScaleX:Lu/fl/ih,minFontScaleY:Du/fl/gh,isSDF:cl}};if(hl&&(pl.stretchX||pl.stretchY)){const F=oh(Dl,Sc,Ql),Da=oh(Wl,eu,wc);for(let ll=0;ll<F.length-1;ll++){const cl=F[ll],hl=F[ll+1];for(let F=0;F<Da.length-1;F++)dl.push(C(cl,Da[F],hl,Da[F+1]))}}else dl.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Al+1},{fixed:0,stretch:bl+1}));return dl}function ah(F,Da,ll){let cl=0;for(const hl of F)cl+=Math.max(Da,Math.min(ll,hl[1]))-Math.max(Da,Math.min(ll,hl[0]));return cl}function oh(F,Da,ll){const cl=[{fixed:-Gm,stretch:0}];for(const[hl,dl]of F){const F=cl[cl.length-1];cl.push({fixed:hl-F.stretch,stretch:F.stretch}),cl.push({fixed:hl-F.stretch,stretch:F.stretch+(dl-hl)})}return cl.push({fixed:Da+Gm,stretch:ll}),cl}function lh(F,Da,ll,cl){return F/Da*ll+cl}function uh(F,Da,ll,cl){return F-Da*ll/cl}class ch{constructor(F,Da,cl,hl,dl,pl,fl,Al,bl,kl){var Dl;if(this.boxStartIndex=F.length,bl){let F=pl.top,Da=pl.bottom;const ll=pl.collisionPadding;ll&&(F-=ll[1],Da+=ll[3]);let cl=Da-F;cl>0&&(cl=Math.max(10,cl),this.circleDiameter=cl)}else{const bl=(null===(Dl=pl.image)||void 0===Dl?void 0:Dl.content)&&(pl.image.textFitWidth||pl.image.textFitHeight)?tc(pl):{x1:pl.left,y1:pl.top,x2:pl.right,y2:pl.bottom};bl.y1=bl.y1*fl-Al[0],bl.y2=bl.y2*fl+Al[2],bl.x1=bl.x1*fl-Al[3],bl.x2=bl.x2*fl+Al[1];const Wl=pl.collisionPadding;if(Wl&&(bl.x1-=Wl[0]*fl,bl.y1-=Wl[1]*fl,bl.x2+=Wl[2]*fl,bl.y2+=Wl[3]*fl),kl){const F=new ll(bl.x1,bl.y1),Da=new ll(bl.x2,bl.y1),cl=new ll(bl.x1,bl.y2),hl=new ll(bl.x2,bl.y2),dl=kl*Math.PI/180;F._rotate(dl),Da._rotate(dl),cl._rotate(dl),hl._rotate(dl),bl.x1=Math.min(F.x,Da.x,cl.x,hl.x),bl.x2=Math.max(F.x,Da.x,cl.x,hl.x),bl.y1=Math.min(F.y,Da.y,cl.y,hl.y),bl.y2=Math.max(F.y,Da.y,cl.y,hl.y)}F.emplaceBack(Da.x,Da.y,bl.x1,bl.y1,bl.x2,bl.y2,cl,hl,dl)}this.boxEndIndex=F.length}}class hh{constructor(F=[],Da=(F,Da)=>F<Da?-1:F>Da?1:0){if(this.data=F,this.length=this.data.length,this.compare=Da,this.length>0)for(let ll=(this.length>>1)-1;ll>=0;ll--)this._down(ll)}push(F){this.data.push(F),this._up(this.length++)}pop(){if(0===this.length)return;const F=this.data[0],Da=this.data.pop();return--this.length>0&&(this.data[0]=Da,this._down(0)),F}peek(){return this.data[0]}_up(F){const{data:Da,compare:ll}=this,cl=Da[F];for(;F>0;){const hl=F-1>>1,dl=Da[hl];if(ll(cl,dl)>=0)break;Da[F]=dl,F=hl}Da[F]=cl}_down(F){const{data:Da,compare:ll}=this,cl=this.length>>1,hl=Da[F];for(;F<cl;){let cl=1+(F<<1);const dl=cl+1;if(dl<this.length&&ll(Da[dl],Da[cl])<0&&(cl=dl),ll(Da[cl],hl)>=0)break;Da[F]=Da[cl],F=cl}Da[F]=hl}}function ph(F,Da=1,cl=!1){let hl=1/0,dl=1/0,pl=-1/0,fl=-1/0;const Al=F[0];for(let ll=0;ll<Al.length;ll++){const F=Al[ll];(!ll||F.x<hl)&&(hl=F.x),(!ll||F.y<dl)&&(dl=F.y),(!ll||F.x>pl)&&(pl=F.x),(!ll||F.y>fl)&&(fl=F.y)}const bl=Math.min(pl-hl,fl-dl);let kl=bl/2;const Dl=new hh([],fh);if(0===bl)return new ll(hl,dl);for(let ll=hl;ll<pl;ll+=bl)for(let Da=dl;Da<fl;Da+=bl)Dl.push(new dh(ll+kl,Da+kl,kl,F));let Wl=function(F){let Da=0,ll=0,cl=0;const hl=F[0];for(let dl=0,pl=hl.length,fl=pl-1;dl<pl;fl=dl++){const F=hl[dl],pl=hl[fl],Al=F.x*pl.y-pl.x*F.y;ll+=(F.x+pl.x)*Al,cl+=(F.y+pl.y)*Al,Da+=3*Al}return new dh(ll/Da,cl/Da,0,F)}(F),Ql=Dl.length;for(;Dl.length;){const ll=Dl.pop();(ll.d>Wl.d||!Wl.d)&&(Wl=ll,cl&&console.log("found best %d after %d probes",Math.round(1e4*ll.d)/1e4,Ql)),ll.max-Wl.d<=Da||(kl=ll.h/2,Dl.push(new dh(ll.p.x-kl,ll.p.y-kl,kl,F)),Dl.push(new dh(ll.p.x+kl,ll.p.y-kl,kl,F)),Dl.push(new dh(ll.p.x-kl,ll.p.y+kl,kl,F)),Dl.push(new dh(ll.p.x+kl,ll.p.y+kl,kl,F)),Ql+=4)}return cl&&(console.log(`num probes: ${Ql}`),console.log(`best distance: ${Wl.d}`)),Wl.p}function fh(F,Da){return Da.max-F.max}function dh(F,Da,cl,hl){this.p=new ll(F,Da),this.h=cl,this.d=function(F,Da){let ll=!1,cl=1/0;for(let hl=0;hl<Da.length;hl++){const dl=Da[hl];for(let Da=0,hl=dl.length,pl=hl-1;Da<hl;pl=Da++){const hl=dl[Da],fl=dl[pl];hl.y>F.y!=fl.y>F.y&&F.x<(fl.x-hl.x)*(F.y-hl.y)/(fl.y-hl.y)+hl.x&&(ll=!ll),cl=Math.min(cl,Ya(F,hl,fl))}}return(ll?1:-1)*Math.sqrt(cl)}(this.p,hl),this.max=this.d+this.h*Math.SQRT2}var qm;F.aq=void 0,(qm=F.aq||(F.aq={}))[qm.center=1]="center",qm[qm.left=2]="left",qm[qm.right=3]="right",qm[qm.top=4]="top",qm[qm.bottom=5]="bottom",qm[qm["top-left"]=6]="top-left",qm[qm["top-right"]=7]="top-right",qm[qm["bottom-left"]=8]="bottom-left",qm[qm["bottom-right"]=9]="bottom-right";const Hm=7,Zm=Number.POSITIVE_INFINITY;function xh(F,Da){return Da[1]!==Zm?function(F,Da,ll){let cl=0,hl=0;switch(Da=Math.abs(Da),ll=Math.abs(ll),F){case"top-right":case"top-left":case"top":hl=ll-Hm;break;case"bottom-right":case"bottom-left":case"bottom":hl=-ll+Hm}switch(F){case"top-right":case"bottom-right":case"right":cl=-Da;break;case"top-left":case"bottom-left":case"left":cl=Da}return[cl,hl]}(F,Da[0],Da[1]):function(F,Da){let ll=0,cl=0;Da<0&&(Da=0);const hl=Da/Math.SQRT2;switch(F){case"top-right":case"top-left":cl=hl-Hm;break;case"bottom-right":case"bottom-left":cl=-hl+Hm;break;case"bottom":cl=-Da+Hm;break;case"top":cl=Da-Hm}switch(F){case"top-right":case"bottom-right":ll=-hl;break;case"top-left":case"bottom-left":ll=hl;break;case"left":ll=Da;break;case"right":ll=-Da}return[ll,cl]}(F,Da[0])}function vh(F,Da,ll){var cl;const hl=F.layout,dl=null===(cl=hl.get("text-variable-anchor-offset"))||void 0===cl?void 0:cl.evaluate(Da,{},ll);if(dl){const F=dl.values,Da=[];for(let ll=0;ll<F.length;ll+=2){const cl=Da[ll]=F[ll],hl=F[ll+1].map((F=>F*fm));cl.startsWith("top")?hl[1]-=Hm:cl.startsWith("bottom")&&(hl[1]+=Hm),Da[ll+1]=hl}return new Qt(Da)}const pl=hl.get("text-variable-anchor");if(pl){let cl;cl=void 0!==F._unevaluatedLayout.getValue("text-radial-offset")?[hl.get("text-radial-offset").evaluate(Da,{},ll)*fm,Zm]:hl.get("text-offset").evaluate(Da,{},ll).map((F=>F*fm));const dl=[];for(const F of pl)dl.push(F,xh(F,cl));return new Qt(dl)}return null}function bh(F){switch(F){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wh(Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){let Wl=pl.textMaxSize.evaluate(ll,{});void 0===Wl&&(Wl=fl);const Ql=Da.layers[0].layout,wc=Ql.get("icon-offset").evaluate(ll,{},Dl),Sc=Ah(cl.horizontal),eu=fl/24,iu=Da.tilePixelRatio*eu,su=Da.tilePixelRatio*Wl/24,cu=Da.tilePixelRatio*Al,uu=Da.tilePixelRatio*Ql.get("symbol-spacing"),hu=Ql.get("text-padding")*Da.tilePixelRatio,Lu=function(F,Da,ll,cl=1){const hl=F.get("icon-padding").evaluate(Da,{},ll),dl=hl&&hl.values;return[dl[0]*cl,dl[1]*cl,dl[2]*cl,dl[3]*cl]}(Ql,ll,Dl,Da.tilePixelRatio),zu=Ql.get("text-max-angle")/180*Math.PI,Du="viewport"!==Ql.get("text-rotation-alignment")&&"point"!==Ql.get("symbol-placement"),Nu="map"===Ql.get("icon-rotation-alignment")&&"point"!==Ql.get("symbol-placement"),qu=Ql.get("symbol-placement"),ih=uu/2,gh=Ql.get("icon-text-fit");let ed;hl&&"none"!==gh&&(Da.allowVerticalPlacement&&cl.vertical&&(ed=ec(hl,cl.vertical,gh,Ql.get("icon-text-fit-padding"),wc,eu)),Sc&&(hl=ec(hl,Sc,gh,Ql.get("icon-text-fit-padding"),wc,eu)));const B=(Al,Wl)=>{Wl.x<0||Wl.x>=vp||Wl.y<0||Wl.y>=vp||function(Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu,uu,hu,Lu,zu,Du,Nu){const qu=Da.addToLineVertexArray(ll,cl);let ih,gh,ed,td,id=0,nd=0,rd=0,ad=0,sd=-1,od=-1;const ld={};let cd=gp("");if(Da.allowVerticalPlacement&&hl.vertical){const F=Al.layout.get("text-rotate").evaluate(hu,{},Du)+90;ed=new ch(bl,ll,kl,Dl,Wl,hl.vertical,Ql,wc,Sc,F),fl&&(td=new ch(bl,ll,kl,Dl,Wl,fl,iu,su,Sc,F))}if(dl){const cl=Al.layout.get("icon-rotate").evaluate(hu,{}),hl="none"!==Al.layout.get("icon-text-fit"),pl=sh(dl,cl,zu,hl),Ql=fl?sh(fl,cl,zu,hl):void 0;gh=new ch(bl,ll,kl,Dl,Wl,dl,iu,su,!1,cl),id=4*pl.length;const wc=Da.iconSizeData;let Sc=null;"source"===wc.kind?(Sc=[Cm*Al.layout.get("icon-size").evaluate(hu,{})],Sc[0]>Lm&&A(`${Da.layerIds[0]}: Value for "icon-size" is >= ${Im}. Reduce your "icon-size".`)):"composite"===wc.kind&&(Sc=[Cm*Lu.compositeIconSizes[0].evaluate(hu,{},Du),Cm*Lu.compositeIconSizes[1].evaluate(hu,{},Du)],(Sc[0]>Lm||Sc[1]>Lm)&&A(`${Da.layerIds[0]}: Value for "icon-size" is >= ${Im}. Reduce your "icon-size".`)),Da.addSymbols(Da.icon,pl,Sc,uu,cu,hu,F.ah.none,ll,qu.lineStartIndex,qu.lineLength,-1,Du),sd=Da.icon.placedSymbolArray.length-1,Ql&&(nd=4*Ql.length,Da.addSymbols(Da.icon,Ql,Sc,uu,cu,hu,F.ah.vertical,ll,qu.lineStartIndex,qu.lineLength,-1,Du),od=Da.icon.placedSymbolArray.length-1)}const ud=Object.keys(hl.horizontal);for(const Ed of ud){const cl=hl.horizontal[Ed];if(!ih){cd=gp(cl.text);const F=Al.layout.get("text-rotate").evaluate(hu,{},Du);ih=new ch(bl,ll,kl,Dl,Wl,cl,Ql,wc,Sc,F)}const dl=1===cl.positionedLines.length;if(rd+=_h(Da,ll,cl,pl,Al,Sc,hu,eu,qu,hl.vertical?F.ah.horizontal:F.ah.horizontalOnly,dl?ud:[Ed],ld,sd,Lu,Du),dl)break}hl.vertical&&(ad+=_h(Da,ll,hl.vertical,pl,Al,Sc,hu,eu,qu,F.ah.vertical,["vertical"],ld,od,Lu,Du));const hd=ih?ih.boxStartIndex:Da.collisionBoxArray.length,dd=ih?ih.boxEndIndex:Da.collisionBoxArray.length,pd=ed?ed.boxStartIndex:Da.collisionBoxArray.length,md=ed?ed.boxEndIndex:Da.collisionBoxArray.length,fd=gh?gh.boxStartIndex:Da.collisionBoxArray.length,gd=gh?gh.boxEndIndex:Da.collisionBoxArray.length,Ad=td?td.boxStartIndex:Da.collisionBoxArray.length,yd=td?td.boxEndIndex:Da.collisionBoxArray.length;let vd=-1;const Y=(F,Da)=>F&&F.circleDiameter?Math.max(F.circleDiameter,Da):Da;vd=Y(ih,vd),vd=Y(ed,vd),vd=Y(gh,vd),vd=Y(td,vd);const _d=vd>-1?1:0;_d&&(vd*=Nu/fm),Da.glyphOffsetArray.length>=dc.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==hu.sortKey&&Da.addToSortKeyRanges(Da.symbolInstances.length,hu.sortKey);const xd=vh(Al,hu,Du),[bd,wd]=function(Da,ll){const cl=Da.length,hl=null==ll?void 0:ll.values;if((null==hl?void 0:hl.length)>0)for(let dl=0;dl<hl.length;dl+=2){const ll=hl[dl+1];Da.emplaceBack(F.aq[hl[dl]],ll[0],ll[1])}return[cl,Da.length]}(Da.textAnchorOffsets,xd);Da.symbolInstances.emplaceBack(ll.x,ll.y,ld.right>=0?ld.right:-1,ld.center>=0?ld.center:-1,ld.left>=0?ld.left:-1,ld.vertical||-1,sd,od,cd,hd,dd,pd,md,fd,gd,Ad,yd,kl,rd,ad,id,nd,_d,0,Ql,vd,bd,wd)}(Da,Wl,Al,cl,hl,dl,ed,Da.layers[0],Da.collisionBoxArray,ll.index,ll.sourceLayerIndex,Da.index,iu,[hu,hu,hu,hu],Du,bl,cu,Lu,Nu,wc,ll,pl,kl,Dl,fl)};if("line"===qu)for(const F of Hc(ll.geometry,0,0,vp,vp)){const ll=rh(F,uu,zu,cl.vertical||Sc,hl,24,su,Da.overscaling,vp);for(const cl of ll)Sc&&Sh(Da,Sc.text,ih,cl)||B(F,cl)}else if("line-center"===qu){for(const F of ll.geometry)if(F.length>1){const Da=eh(F,zu,cl.vertical||Sc,hl,24,su);Da&&B(F,Da)}}else if("Polygon"===ll.type)for(const F of xr(ll.geometry,0)){const Da=ph(F,16);B(F[0],new Yc(Da.x,Da.y,0))}else if("LineString"===ll.type)for(const F of ll.geometry)B(F,new Yc(F[0].x,F[0].y,0));else if("Point"===ll.type)for(const F of ll.geometry)for(const Da of F)B([Da],new Yc(Da.x,Da.y,0))}function _h(F,Da,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){const eu=function(F,Da,cl,hl,dl,pl,fl,Al){const bl=hl.layout.get("text-rotate").evaluate(pl,{})*Math.PI/180,kl=[];for(const Dl of Da.positionedLines)for(const F of Dl.positionedGlyphs){if(!F.rect)continue;const hl=F.rect||{};let pl=bm+1,Wl=!0,Ql=1,wc=0;const Sc=(dl||Al)&&F.vertical,eu=F.metrics.advance*F.scale/2;if(Al&&Da.verticalizable&&(wc=Dl.lineOffset/2-(F.imageName?-(fm-F.metrics.width*F.scale)/2:(F.scale-1)*fm)),F.imageName){const Da=fl[F.imageName];Wl=Da.sdf,Ql=Da.pixelRatio,pl=wm/Ql}const iu=dl?[F.x+eu,F.y]:[0,0];let su=dl?[0,0]:[F.x+eu+cl[0],F.y+cl[1]-wc],cu=[0,0];Sc&&(cu=su,su=[0,0]);const uu=F.metrics.isDoubleResolution?2:1,hu=(F.metrics.left-pl)*F.scale-eu+su[0],Lu=(-F.metrics.top-pl)*F.scale+su[1],zu=hu+hl.w/uu*F.scale/Ql,Du=Lu+hl.h/uu*F.scale/Ql,Nu=new ll(hu,Lu),qu=new ll(zu,Lu),ih=new ll(hu,Du),gh=new ll(zu,Du);if(Sc){const Da=new ll(-eu,eu-Mm),cl=-Math.PI/2,hl=fm/2-eu,dl=new ll(5-Mm-hl,-(F.imageName?hl:0)),pl=new ll(...cu);Nu._rotateAround(cl,Da)._add(dl)._add(pl),qu._rotateAround(cl,Da)._add(dl)._add(pl),ih._rotateAround(cl,Da)._add(dl)._add(pl),gh._rotateAround(cl,Da)._add(dl)._add(pl)}if(bl){const F=Math.sin(bl),Da=Math.cos(bl),ll=[Da,-F,F,Da];Nu._matMult(ll),qu._matMult(ll),ih._matMult(ll),gh._matMult(ll)}const ed=new ll(0,0),td=new ll(0,0);kl.push({tl:Nu,tr:qu,bl:ih,br:gh,tex:hl,writingMode:Da.writingMode,glyphOffset:iu,sectionIndex:F.sectionIndex,isSDF:Wl,pixelOffsetTL:ed,pixelOffsetBR:td,minFontScaleX:0,minFontScaleY:0})}return kl}(0,cl,Al,dl,pl,fl,hl,F.allowVerticalPlacement),iu=F.textSizeData;let su=null;"source"===iu.kind?(su=[Cm*dl.layout.get("text-size").evaluate(fl,{})],su[0]>Lm&&A(`${F.layerIds[0]}: Value for "text-size" is >= ${Im}. Reduce your "text-size".`)):"composite"===iu.kind&&(su=[Cm*wc.compositeTextSizes[0].evaluate(fl,{},Sc),Cm*wc.compositeTextSizes[1].evaluate(fl,{},Sc)],(su[0]>Lm||su[1]>Lm)&&A(`${F.layerIds[0]}: Value for "text-size" is >= ${Im}. Reduce your "text-size".`)),F.addSymbols(F.text,eu,su,Al,pl,fl,kl,Da,bl.lineStartIndex,bl.lineLength,Ql,Sc);for(const ll of Dl)Wl[ll]=F.text.placedSymbolArray.length-1;return 4*eu.length}function Ah(F){for(const Da in F)return F[Da];return null}function Sh(F,Da,ll,cl){const hl=F.compareText;if(Da in hl){const F=hl[Da];for(let Da=F.length-1;Da>=0;Da--)if(cl.dist(F[Da])<ll)return!0}else hl[Da]=[];return hl[Da].push(cl),!1}const Wm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Mh{static from(F){if(!(F instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[Da,ll]=new Uint8Array(F,0,2);if(219!==Da)throw new Error("Data does not appear to be in a KDBush format.");const cl=ll>>4;if(1!==cl)throw new Error(`Got v${cl} data when expected v1.`);const hl=Wm[15&ll];if(!hl)throw new Error("Unrecognized array type.");const[dl]=new Uint16Array(F,2,1),[pl]=new Uint32Array(F,4,1);return new Mh(pl,dl,hl,F)}constructor(F,Da=64,ll=Float64Array,cl){if(isNaN(F)||F<0)throw new Error(`Unpexpected numItems value: ${F}.`);this.numItems=+F,this.nodeSize=Math.min(Math.max(+Da,2),65535),this.ArrayType=ll,this.IndexArrayType=F<65536?Uint16Array:Uint32Array;const hl=Wm.indexOf(this.ArrayType),dl=2*F*this.ArrayType.BYTES_PER_ELEMENT,pl=F*this.IndexArrayType.BYTES_PER_ELEMENT,fl=(8-pl%8)%8;if(hl<0)throw new Error(`Unexpected typed array class: ${ll}.`);cl&&cl instanceof ArrayBuffer?(this.data=cl,this.ids=new this.IndexArrayType(this.data,8,F),this.coords=new this.ArrayType(this.data,8+pl+fl,2*F),this._pos=2*F,this._finished=!0):(this.data=new ArrayBuffer(8+dl+pl+fl),this.ids=new this.IndexArrayType(this.data,8,F),this.coords=new this.ArrayType(this.data,8+pl+fl,2*F),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+hl]),new Uint16Array(this.data,2,1)[0]=Da,new Uint32Array(this.data,4,1)[0]=F)}add(F,Da){const ll=this._pos>>1;return this.ids[ll]=ll,this.coords[this._pos++]=F,this.coords[this._pos++]=Da,ll}finish(){const F=this._pos>>1;if(F!==this.numItems)throw new Error(`Added ${F} items when expected ${this.numItems}.`);return Ih(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(F,Da,ll,cl){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:hl,coords:dl,nodeSize:pl}=this,fl=[0,hl.length-1,0],Al=[];for(;fl.length;){const bl=fl.pop()||0,kl=fl.pop()||0,Dl=fl.pop()||0;if(kl-Dl<=pl){for(let pl=Dl;pl<=kl;pl++){const fl=dl[2*pl],bl=dl[2*pl+1];fl>=F&&fl<=ll&&bl>=Da&&bl<=cl&&Al.push(hl[pl])}continue}const Wl=Dl+kl>>1,Ql=dl[2*Wl],wc=dl[2*Wl+1];Ql>=F&&Ql<=ll&&wc>=Da&&wc<=cl&&Al.push(hl[Wl]),(0===bl?F<=Ql:Da<=wc)&&(fl.push(Dl),fl.push(Wl-1),fl.push(1-bl)),(0===bl?ll>=Ql:cl>=wc)&&(fl.push(Wl+1),fl.push(kl),fl.push(1-bl))}return Al}within(F,Da,ll){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:cl,coords:hl,nodeSize:dl}=this,pl=[0,cl.length-1,0],fl=[],Al=ll*ll;for(;pl.length;){const bl=pl.pop()||0,kl=pl.pop()||0,Dl=pl.pop()||0;if(kl-Dl<=dl){for(let ll=Dl;ll<=kl;ll++)Bh(hl[2*ll],hl[2*ll+1],F,Da)<=Al&&fl.push(cl[ll]);continue}const Wl=Dl+kl>>1,Ql=hl[2*Wl],wc=hl[2*Wl+1];Bh(Ql,wc,F,Da)<=Al&&fl.push(cl[Wl]),(0===bl?F-ll<=Ql:Da-ll<=wc)&&(pl.push(Dl),pl.push(Wl-1),pl.push(1-bl)),(0===bl?F+ll>=Ql:Da+ll>=wc)&&(pl.push(Wl+1),pl.push(kl),pl.push(1-bl))}return fl}}function Ih(F,Da,ll,cl,hl,dl){if(hl-cl<=ll)return;const pl=cl+hl>>1;zh(F,Da,pl,cl,hl,dl),Ih(F,Da,ll,cl,pl-1,1-dl),Ih(F,Da,ll,pl+1,hl,1-dl)}function zh(F,Da,ll,cl,hl,dl){for(;hl>cl;){if(hl-cl>600){const pl=hl-cl+1,fl=ll-cl+1,Al=Math.log(pl),bl=.5*Math.exp(2*Al/3),kl=.5*Math.sqrt(Al*bl*(pl-bl)/pl)*(fl-pl/2<0?-1:1);zh(F,Da,ll,Math.max(cl,Math.floor(ll-fl*bl/pl+kl)),Math.min(hl,Math.floor(ll+(pl-fl)*bl/pl+kl)),dl)}const pl=Da[2*ll+dl];let fl=cl,Al=hl;for(Ph(F,Da,cl,ll),Da[2*hl+dl]>pl&&Ph(F,Da,cl,hl);fl<Al;){for(Ph(F,Da,fl,Al),fl++,Al--;Da[2*fl+dl]<pl;)fl++;for(;Da[2*Al+dl]>pl;)Al--}Da[2*cl+dl]===pl?Ph(F,Da,cl,Al):(Al++,Ph(F,Da,Al,hl)),Al<=ll&&(cl=Al+1),ll<=Al&&(hl=Al-1)}}function Ph(F,Da,ll,cl){Ch(F,ll,cl),Ch(Da,2*ll,2*cl),Ch(Da,2*ll+1,2*cl+1)}function Ch(F,Da,ll){const cl=F[Da];F[Da]=F[ll],F[ll]=cl}function Bh(F,Da,ll,cl){const hl=F-ll,dl=Da-cl;return hl*hl+dl*dl}var Km;F.bg=void 0,(Km=F.bg||(F.bg={})).create="create",Km.load="load",Km.fullLoad="fullLoad";let Qm=null,Xm=[];const Ym=1e3/60,Jm="loadTime",$m="fullLoadTime",ef={mark(F){performance.mark(F)},frame(F){const Da=F;null!=Qm&&Xm.push(Da-Qm),Qm=Da},clearMetrics(){Qm=null,Xm=[],performance.clearMeasures(Jm),performance.clearMeasures($m);for(const Da in F.bg)performance.clearMarks(F.bg[Da])},getPerformanceMetrics(){performance.measure(Jm,F.bg.create,F.bg.load),performance.measure($m,F.bg.create,F.bg.fullLoad);const Da=performance.getEntriesByName(Jm)[0].duration,ll=performance.getEntriesByName($m)[0].duration,cl=Xm.length,hl=1/(Xm.reduce(((F,Da)=>F+Da),0)/cl/1e3),dl=Xm.filter((F=>F>Ym)).reduce(((F,Da)=>F+(Da-Ym)/Ym),0);return{loadTime:Da,fullLoadTime:ll,fps:hl,percentDroppedFrames:dl/(cl+dl)*100,totalFrames:cl}}};F.$=class extends ps{},F.A=Sp,F.B=Nd,F.C=function(F){if(null==kl){const Da=F.navigator?F.navigator.userAgent:null;kl=!!F.safari||!(!Da||!(/\b(iPad|iPhone|iPod)\b/.test(Da)||Da.match("Safari")&&!Da.match("Chrome")))}return kl},F.D=Ji,F.E=Z,F.F=class{constructor(F,Da){this.target=F,this.mapId=Da,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Ic((()=>this.process())),this.subscription=function(F,Da,ll){return F.addEventListener(Da,ll,!1),{unsubscribe:()=>{F.removeEventListener(Da,ll,!1)}}}(this.target,"message",(F=>this.receive(F))),this.globalScope=k(self)?F:window}registerMessageHandler(F,Da){this.messageHandlers[F]=Da}sendAsync(F,Da){return new Promise(((ll,cl)=>{const hl=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[hl]={resolve:ll,reject:cl},Da&&Da.signal.addEventListener("abort",(()=>{delete this.resolveRejects[hl];const Da={id:hl,type:"<cancel>",origin:location.origin,targetMapId:F.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Da)}),{once:!0});const dl=[],pl=Object.assign(Object.assign({},F),{id:hl,sourceMapId:this.mapId,origin:location.origin,data:ki(F.data,dl)});this.target.postMessage(pl,{transfer:dl})}))}receive(F){const Da=F.data,ll=Da.id;if(!("file://"!==Da.origin&&"file://"!==location.origin&&"resource://android"!==Da.origin&&"resource://android"!==location.origin&&Da.origin!==location.origin||Da.targetMapId&&this.mapId!==Da.targetMapId)){if("<cancel>"===Da.type){delete this.tasks[ll];const F=this.abortControllers[ll];return delete this.abortControllers[ll],void(F&&F.abort())}if(k(self)||Da.mustQueue)return this.tasks[ll]=Da,this.taskQueue.push(ll),void this.invoker.trigger();this.processTask(ll,Da)}}process(){if(0===this.taskQueue.length)return;const F=this.taskQueue.shift(),Da=this.tasks[F];delete this.tasks[F],this.taskQueue.length>0&&this.invoker.trigger(),Da&&this.processTask(F,Da)}processTask(F,Da){return e(this,void 0,void 0,(function*(){if("<response>"===Da.type){const ll=this.resolveRejects[F];if(delete this.resolveRejects[F],!ll)return;return void(Da.error?ll.reject(Mi(Da.error)):ll.resolve(Mi(Da.data)))}if(!this.messageHandlers[Da.type])return void this.completeTask(F,new Error(`Could not find a registered handler for ${Da.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const ll=Mi(Da.data),cl=new AbortController;this.abortControllers[F]=cl;try{const hl=yield this.messageHandlers[Da.type](Da.sourceMapId,ll,cl);this.completeTask(F,null,hl)}catch(ll){this.completeTask(F,ll)}}))}completeTask(F,Da,ll){const cl=[];delete this.abortControllers[F];const hl={id:F,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:Da?ki(Da):null,data:ki(ll,cl)};this.target.postMessage(hl,{transfer:cl})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},F.G=eu,F.H=function(){var F=new Sp(16);return Sp!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[11]=0,F[12]=0,F[13]=0,F[14]=0),F[0]=1,F[5]=1,F[10]=1,F[15]=1,F},F.I=Tu,F.J=function(F,Da,ll){var cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc=ll[0],eu=ll[1],iu=ll[2];return Da===F?(F[12]=Da[0]*Sc+Da[4]*eu+Da[8]*iu+Da[12],F[13]=Da[1]*Sc+Da[5]*eu+Da[9]*iu+Da[13],F[14]=Da[2]*Sc+Da[6]*eu+Da[10]*iu+Da[14],F[15]=Da[3]*Sc+Da[7]*eu+Da[11]*iu+Da[15]):(hl=Da[1],dl=Da[2],pl=Da[3],fl=Da[4],Al=Da[5],bl=Da[6],kl=Da[7],Dl=Da[8],Wl=Da[9],Ql=Da[10],wc=Da[11],F[0]=cl=Da[0],F[1]=hl,F[2]=dl,F[3]=pl,F[4]=fl,F[5]=Al,F[6]=bl,F[7]=kl,F[8]=Dl,F[9]=Wl,F[10]=Ql,F[11]=wc,F[12]=cl*Sc+fl*eu+Dl*iu+Da[12],F[13]=hl*Sc+Al*eu+Wl*iu+Da[13],F[14]=dl*Sc+bl*eu+Ql*iu+Da[14],F[15]=pl*Sc+kl*eu+wc*iu+Da[15]),F},F.K=function(F,Da,ll){var cl=ll[0],hl=ll[1],dl=ll[2];return F[0]=Da[0]*cl,F[1]=Da[1]*cl,F[2]=Da[2]*cl,F[3]=Da[3]*cl,F[4]=Da[4]*hl,F[5]=Da[5]*hl,F[6]=Da[6]*hl,F[7]=Da[7]*hl,F[8]=Da[8]*dl,F[9]=Da[9]*dl,F[10]=Da[10]*dl,F[11]=Da[11]*dl,F[12]=Da[12],F[13]=Da[13],F[14]=Da[14],F[15]=Da[15],F},F.L=uo,F.M=function(F,Da){const ll={};for(let cl=0;cl<Da.length;cl++){const hl=Da[cl];hl in F&&(ll[hl]=F[hl])}return ll},F.N=Pc,F.O=Vc,F.P=ll,F.Q=Ec,F.R=Ao,F.S=jc,F.T=Zi,F.U=h,F.V=p,F.W=P,F.X=vp,F.Y=ls,F.Z=$c,F._=e,F.a=Sc,F.a$=function(F,Da){var ll=F[0],cl=F[1],hl=F[2],dl=F[3],pl=F[4],fl=F[5],Al=F[6],bl=F[7],kl=F[8],Dl=F[9],Wl=F[10],Ql=F[11],wc=F[12],Sc=F[13],eu=F[14],iu=F[15],su=Da[0],cu=Da[1],uu=Da[2],hu=Da[3],Lu=Da[4],zu=Da[5],Du=Da[6],Nu=Da[7],qu=Da[8],ih=Da[9],gh=Da[10],ed=Da[11],td=Da[12],id=Da[13],nd=Da[14],rd=Da[15];return Math.abs(ll-su)<=Mp*Math.max(1,Math.abs(ll),Math.abs(su))&&Math.abs(cl-cu)<=Mp*Math.max(1,Math.abs(cl),Math.abs(cu))&&Math.abs(hl-uu)<=Mp*Math.max(1,Math.abs(hl),Math.abs(uu))&&Math.abs(dl-hu)<=Mp*Math.max(1,Math.abs(dl),Math.abs(hu))&&Math.abs(pl-Lu)<=Mp*Math.max(1,Math.abs(pl),Math.abs(Lu))&&Math.abs(fl-zu)<=Mp*Math.max(1,Math.abs(fl),Math.abs(zu))&&Math.abs(Al-Du)<=Mp*Math.max(1,Math.abs(Al),Math.abs(Du))&&Math.abs(bl-Nu)<=Mp*Math.max(1,Math.abs(bl),Math.abs(Nu))&&Math.abs(kl-qu)<=Mp*Math.max(1,Math.abs(kl),Math.abs(qu))&&Math.abs(Dl-ih)<=Mp*Math.max(1,Math.abs(Dl),Math.abs(ih))&&Math.abs(Wl-gh)<=Mp*Math.max(1,Math.abs(Wl),Math.abs(gh))&&Math.abs(Ql-ed)<=Mp*Math.max(1,Math.abs(Ql),Math.abs(ed))&&Math.abs(wc-td)<=Mp*Math.max(1,Math.abs(wc),Math.abs(td))&&Math.abs(Sc-id)<=Mp*Math.max(1,Math.abs(Sc),Math.abs(id))&&Math.abs(eu-nd)<=Mp*Math.max(1,Math.abs(eu),Math.abs(nd))&&Math.abs(iu-rd)<=Mp*Math.max(1,Math.abs(iu),Math.abs(rd))},F.a0=oa,F.a1=Dc,F.a2=it,F.a3=F=>{const Da=window.document.createElement("video");return Da.muted=!0,new Promise((ll=>{Da.onloadstart=()=>{ll(Da)};for(const cl of F){const F=window.document.createElement("source");j(cl)||(Da.crossOrigin="Anonymous"),F.src=cl,Da.appendChild(F)}}))},F.a4=function(){return Al++},F.a5=Fs,F.a6=dc,F.a7=zn,F.a8=ja,F.a9=Nc,F.aA=function(F){if("custom"===F.type)return new Mc(F);switch(F.type){case"background":return new _c(F);case"circle":return new fo(F);case"fill":return new ul(F);case"fill-extrusion":return new El(F);case"heatmap":return new Mo(F);case"hillshade":return new Po(F);case"line":return new Hl(F);case"raster":return new kc(F);case"symbol":return new vc(F)}},F.aB=w,F.aC=function(F,Da){if(!F)return[{command:"setStyle",args:[Da]}];let ll=[];try{if(!H(F.version,Da.version))return[{command:"setStyle",args:[Da]}];H(F.center,Da.center)||ll.push({command:"setCenter",args:[Da.center]}),H(F.zoom,Da.zoom)||ll.push({command:"setZoom",args:[Da.zoom]}),H(F.bearing,Da.bearing)||ll.push({command:"setBearing",args:[Da.bearing]}),H(F.pitch,Da.pitch)||ll.push({command:"setPitch",args:[Da.pitch]}),H(F.sprite,Da.sprite)||ll.push({command:"setSprite",args:[Da.sprite]}),H(F.glyphs,Da.glyphs)||ll.push({command:"setGlyphs",args:[Da.glyphs]}),H(F.transition,Da.transition)||ll.push({command:"setTransition",args:[Da.transition]}),H(F.light,Da.light)||ll.push({command:"setLight",args:[Da.light]}),H(F.terrain,Da.terrain)||ll.push({command:"setTerrain",args:[Da.terrain]}),H(F.sky,Da.sky)||ll.push({command:"setSky",args:[Da.sky]}),H(F.projection,Da.projection)||ll.push({command:"setProjection",args:[Da.projection]});const cl={},hl=[];!function(F,Da,ll,cl){let hl;for(hl in Da=Da||{},F=F||{})Object.prototype.hasOwnProperty.call(F,hl)&&(Object.prototype.hasOwnProperty.call(Da,hl)||W(hl,ll,cl));for(hl in Da)Object.prototype.hasOwnProperty.call(Da,hl)&&(Object.prototype.hasOwnProperty.call(F,hl)?H(F[hl],Da[hl])||("geojson"===F[hl].type&&"geojson"===Da[hl].type&&tt(F,Da,hl)?Y(ll,{command:"setGeoJSONSourceData",args:[hl,Da[hl].data]}):Q(hl,Da,ll,cl)):J(hl,Da,ll))}(F.sources,Da.sources,hl,cl);const dl=[];F.layers&&F.layers.forEach((F=>{"source"in F&&cl[F.source]?ll.push({command:"removeLayer",args:[F.id]}):dl.push(F)})),ll=ll.concat(hl),function(F,Da,ll){Da=Da||[];const cl=(F=F||[]).map(rt),hl=Da.map(rt),dl=F.reduce(nt,{}),pl=Da.reduce(nt,{}),fl=cl.slice(),Al=Object.create(null);let bl,kl,Dl,Wl,Ql;for(let wc=0,Sc=0;wc<cl.length;wc++)bl=cl[wc],Object.prototype.hasOwnProperty.call(pl,bl)?Sc++:(Y(ll,{command:"removeLayer",args:[bl]}),fl.splice(fl.indexOf(bl,Sc),1));for(let wc=0,Sc=0;wc<hl.length;wc++)bl=hl[hl.length-1-wc],fl[fl.length-1-wc]!==bl&&(Object.prototype.hasOwnProperty.call(dl,bl)?(Y(ll,{command:"removeLayer",args:[bl]}),fl.splice(fl.lastIndexOf(bl,fl.length-Sc),1)):Sc++,Wl=fl[fl.length-wc],Y(ll,{command:"addLayer",args:[pl[bl],Wl]}),fl.splice(fl.length-wc,0,bl),Al[bl]=!0);for(let wc=0;wc<hl.length;wc++)if(bl=hl[wc],kl=dl[bl],Dl=pl[bl],!Al[bl]&&!H(kl,Dl))if(H(kl.source,Dl.source)&&H(kl["source-layer"],Dl["source-layer"])&&H(kl.type,Dl.type)){for(Ql in et(kl.layout,Dl.layout,ll,bl,null,"setLayoutProperty"),et(kl.paint,Dl.paint,ll,bl,null,"setPaintProperty"),H(kl.filter,Dl.filter)||Y(ll,{command:"setFilter",args:[bl,Dl.filter]}),H(kl.minzoom,Dl.minzoom)&&H(kl.maxzoom,Dl.maxzoom)||Y(ll,{command:"setLayerZoomRange",args:[bl,Dl.minzoom,Dl.maxzoom]}),kl)Object.prototype.hasOwnProperty.call(kl,Ql)&&"layout"!==Ql&&"paint"!==Ql&&"filter"!==Ql&&"metadata"!==Ql&&"minzoom"!==Ql&&"maxzoom"!==Ql&&(0===Ql.indexOf("paint.")?et(kl[Ql],Dl[Ql],ll,bl,Ql.slice(6),"setPaintProperty"):H(kl[Ql],Dl[Ql])||Y(ll,{command:"setLayerProperty",args:[bl,Ql,Dl[Ql]]}));for(Ql in Dl)Object.prototype.hasOwnProperty.call(Dl,Ql)&&!Object.prototype.hasOwnProperty.call(kl,Ql)&&"layout"!==Ql&&"paint"!==Ql&&"filter"!==Ql&&"metadata"!==Ql&&"minzoom"!==Ql&&"maxzoom"!==Ql&&(0===Ql.indexOf("paint.")?et(kl[Ql],Dl[Ql],ll,bl,Ql.slice(6),"setPaintProperty"):H(kl[Ql],Dl[Ql])||Y(ll,{command:"setLayerProperty",args:[bl,Ql,Dl[Ql]]}))}else Y(ll,{command:"removeLayer",args:[bl]}),Wl=fl[fl.lastIndexOf(bl)+1],Y(ll,{command:"addLayer",args:[Dl,Wl]})}(dl,Da.layers,ll)}catch(F){console.warn("Unable to compute style diff:",F),ll=[{command:"setStyle",args:[Da]}]}return ll},F.aD=function(F){const Da=[],ll=F.id;return void 0===ll&&Da.push({message:`layers.${ll}: missing required property "id"`}),void 0===F.render&&Da.push({message:`layers.${ll}: missing required method "render"`}),F.renderingMode&&"2d"!==F.renderingMode&&"3d"!==F.renderingMode&&Da.push({message:`layers.${ll}: property "renderingMode" must be either "2d" or "3d"`}),Da},F.aE=function t(F,Da){if(Array.isArray(F)){if(!Array.isArray(Da)||F.length!==Da.length)return!1;for(let ll=0;ll<F.length;ll++)if(!t(F[ll],Da[ll]))return!1;return!0}if("object"==typeof F&&null!==F&&null!==Da){if("object"!=typeof Da)return!1;if(Object.keys(F).length!==Object.keys(Da).length)return!1;for(const ll in F)if(!t(F[ll],Da[ll]))return!1;return!0}return F===Da},F.aF=v,F.aG=b,F.aH=class extends wa{constructor(F,Da){super(F,Da),this.current=0}set(F){this.current!==F&&(this.current=F,this.gl.uniform1i(this.location,F))}},F.aI=_a,F.aJ=class extends wa{constructor(F,Da){super(F,Da),this.current=Ap}set(F){if(F[12]!==this.current[12]||F[0]!==this.current[0])return this.current=F,void this.gl.uniformMatrix4fv(this.location,!1,F);for(let Da=1;Da<16;Da++)if(F[Da]!==this.current[Da]){this.current=F,this.gl.uniformMatrix4fv(this.location,!1,F);break}}},F.aK=Aa,F.aL=Sa,F.aM=Kt,F.aN=class extends wa{constructor(F,Da){super(F,Da),this.current=[0,0,0]}set(F){F[0]===this.current[0]&&F[1]===this.current[1]&&F[2]===this.current[2]||(this.current=F,this.gl.uniform3f(this.location,F[0],F[1],F[2]))}},F.aO=class extends wa{constructor(F,Da){super(F,Da),this.current=[0,0]}set(F){F[0]===this.current[0]&&F[1]===this.current[1]||(this.current=F,this.gl.uniform2f(this.location,F[0],F[1]))}},F.aP=function(F,Da,ll,cl,hl,dl,pl){var fl=1/(Da-ll),Al=1/(cl-hl),bl=1/(dl-pl);return F[0]=-2*fl,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=-2*Al,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=2*bl,F[11]=0,F[12]=(Da+ll)*fl,F[13]=(hl+cl)*Al,F[14]=(pl+dl)*bl,F[15]=1,F},F.aQ=Tp,F.aR=class extends _s{},F.aS=pm,F.aT=class extends Ss{},F.aU=Lp,F.aV=function(F){return F<=1?1:Math.pow(2,Math.ceil(Math.log(F)/Math.LN2))},F.aW=So,F.aX=Zs,F.aY=na,F.aZ=class extends Bs{},F.a_=function(F,Da){return F[0]===Da[0]&&F[1]===Da[1]&&F[2]===Da[2]&&F[3]===Da[3]&&F[4]===Da[4]&&F[5]===Da[5]&&F[6]===Da[6]&&F[7]===Da[7]&&F[8]===Da[8]&&F[9]===Da[9]&&F[10]===Da[10]&&F[11]===Da[11]&&F[12]===Da[12]&&F[13]===Da[13]&&F[14]===Da[14]&&F[15]===Da[15]},F.aa=function(F){const Da={};if(F.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((F,ll,cl,hl)=>{const dl=cl||hl;return Da[ll]=!dl||dl.toLowerCase(),""})),Da["max-age"]){const F=parseInt(Da["max-age"],10);isNaN(F)?delete Da["max-age"]:Da["max-age"]=F}return Da},F.ab=function(F,Da){const ll=[];for(const cl in F)cl in Da||ll.push(cl);return ll},F.ac=y,F.ad=function(F,Da,ll){var cl=Math.sin(ll),hl=Math.cos(ll),dl=Da[0],pl=Da[1],fl=Da[2],Al=Da[3],bl=Da[4],kl=Da[5],Dl=Da[6],Wl=Da[7];return Da!==F&&(F[8]=Da[8],F[9]=Da[9],F[10]=Da[10],F[11]=Da[11],F[12]=Da[12],F[13]=Da[13],F[14]=Da[14],F[15]=Da[15]),F[0]=dl*hl+bl*cl,F[1]=pl*hl+kl*cl,F[2]=fl*hl+Dl*cl,F[3]=Al*hl+Wl*cl,F[4]=bl*hl-dl*cl,F[5]=kl*hl-pl*cl,F[6]=Dl*hl-fl*cl,F[7]=Wl*hl-Al*cl,F},F.ae=function(F){var Da=new Sp(16);return Da[0]=F[0],Da[1]=F[1],Da[2]=F[2],Da[3]=F[3],Da[4]=F[4],Da[5]=F[5],Da[6]=F[6],Da[7]=F[7],Da[8]=F[8],Da[9]=F[9],Da[10]=F[10],Da[11]=F[11],Da[12]=F[12],Da[13]=F[13],Da[14]=F[14],Da[15]=F[15],Da},F.af=po,F.ag=function(F,Da){let ll=0,cl=0;if("constant"===F.kind)cl=F.layoutSize;else if("source"!==F.kind){const{interpolationType:hl,minZoom:dl,maxZoom:pl}=F,fl=hl?y(Be.interpolationFactor(hl,Da,dl,pl),0,1):0;"camera"===F.kind?cl=yd.number(F.minSize,F.maxSize,fl):ll=fl}return{uSizeT:ll,uSize:cl}},F.ai=function(F,{uSize:Da,uSizeT:ll},{lowerSize:cl,upperSize:hl}){return"source"===F.kind?cl/Cm:"composite"===F.kind?yd.number(cl/Cm,hl/Cm,ll):Da},F.aj=cc,F.ak=function(F,Da,cl,hl){const dl=Da.y-F.y,pl=Da.x-F.x,fl=hl.y-cl.y,Al=hl.x-cl.x,bl=fl*pl-Al*dl;if(0===bl)return null;const kl=(Al*(F.y-cl.y)-fl*(F.x-cl.x))/bl;return new ll(F.x+kl*pl,F.y+kl*dl)},F.al=Hc,F.am=qa,F.an=lo,F.ao=function(F){let Da=1/0,ll=1/0,cl=-1/0,hl=-1/0;for(const dl of F)Da=Math.min(Da,dl.x),ll=Math.min(ll,dl.y),cl=Math.max(cl,dl.x),hl=Math.max(hl,dl.y);return[Da,ll,cl,hl]},F.ap=fm,F.ar=ac,F.as=function(F,Da){var ll=Da[0],cl=Da[1],hl=Da[2],dl=Da[3],pl=Da[4],fl=Da[5],Al=Da[6],bl=Da[7],kl=Da[8],Dl=Da[9],Wl=Da[10],Ql=Da[11],wc=Da[12],Sc=Da[13],eu=Da[14],iu=Da[15],su=ll*fl-cl*pl,cu=ll*Al-hl*pl,uu=ll*bl-dl*pl,hu=cl*Al-hl*fl,Lu=cl*bl-dl*fl,zu=hl*bl-dl*Al,Du=kl*Sc-Dl*wc,Nu=kl*eu-Wl*wc,qu=kl*iu-Ql*wc,ih=Dl*eu-Wl*Sc,gh=Dl*iu-Ql*Sc,ed=Wl*iu-Ql*eu,td=su*ed-cu*gh+uu*ih+hu*qu-Lu*Nu+zu*Du;return td?(F[0]=(fl*ed-Al*gh+bl*ih)*(td=1/td),F[1]=(hl*gh-cl*ed-dl*ih)*td,F[2]=(Sc*zu-eu*Lu+iu*hu)*td,F[3]=(Wl*Lu-Dl*zu-Ql*hu)*td,F[4]=(Al*qu-pl*ed-bl*Nu)*td,F[5]=(ll*ed-hl*qu+dl*Nu)*td,F[6]=(eu*uu-wc*zu-iu*cu)*td,F[7]=(kl*zu-Wl*uu+Ql*cu)*td,F[8]=(pl*gh-fl*qu+bl*Du)*td,F[9]=(cl*qu-ll*gh-dl*Du)*td,F[10]=(wc*Lu-Sc*uu+iu*su)*td,F[11]=(Dl*uu-kl*Lu-Ql*su)*td,F[12]=(fl*Nu-pl*ih-Al*Du)*td,F[13]=(ll*ih-cl*Nu+hl*Du)*td,F[14]=(Sc*cu-wc*hu-eu*su)*td,F[15]=(kl*hu-Dl*cu+Wl*su)*td,F):null},F.at=bh,F.au=Ju,F.av=Mh,F.aw=function(){const F={},Da=iu.$version;for(const ll in iu.$root){const cl=iu.$root[ll];if(cl.required){let hl=null;hl="version"===ll?Da:"array"===cl.type?[]:{},null!=hl&&(F[ll]=hl)}}return F},F.ax=Ii,F.ay=D,F.az=function(F){F=F.slice();const Da=Object.create(null);for(let ll=0;ll<F.length;ll++)Da[F[ll].id]=F[ll];for(let ll=0;ll<F.length;ll++)"ref"in F[ll]&&(F[ll]=X(F[ll],Da[F[ll].ref]));return F},F.b=I,F.b0=function(F,Da){return F[0]=Da[0],F[1]=Da[1],F[2]=Da[2],F[3]=Da[3],F[4]=Da[4],F[5]=Da[5],F[6]=Da[6],F[7]=Da[7],F[8]=Da[8],F[9]=Da[9],F[10]=Da[10],F[11]=Da[11],F[12]=Da[12],F[13]=Da[13],F[14]=Da[14],F[15]=Da[15],F},F.b1=function(F,Da,ll){return F[0]=Da[0]*ll[0],F[1]=Da[1]*ll[1],F[2]=Da[2]*ll[2],F[3]=Da[3]*ll[3],F},F.b2=function(F,Da){return F[0]*Da[0]+F[1]*Da[1]+F[2]*Da[2]+F[3]*Da[3]},F.b3=m,F.b4=Oc,F.b5=Fc,F.b6=function(F,Da,ll,cl,hl){var dl,pl=1/Math.tan(Da/2);return F[0]=pl/ll,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=pl,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[11]=-1,F[12]=0,F[13]=0,F[15]=0,null!=hl&&hl!==1/0?(F[10]=(hl+cl)*(dl=1/(cl-hl)),F[14]=2*hl*cl*dl):(F[10]=-1,F[14]=-2*cl),F},F.b7=function(F,Da,ll){var cl=Math.sin(ll),hl=Math.cos(ll),dl=Da[4],pl=Da[5],fl=Da[6],Al=Da[7],bl=Da[8],kl=Da[9],Dl=Da[10],Wl=Da[11];return Da!==F&&(F[0]=Da[0],F[1]=Da[1],F[2]=Da[2],F[3]=Da[3],F[12]=Da[12],F[13]=Da[13],F[14]=Da[14],F[15]=Da[15]),F[4]=dl*hl+bl*cl,F[5]=pl*hl+kl*cl,F[6]=fl*hl+Dl*cl,F[7]=Al*hl+Wl*cl,F[8]=bl*hl-dl*cl,F[9]=kl*hl-pl*cl,F[10]=Dl*hl-fl*cl,F[11]=Wl*hl-Al*cl,F},F.b8=f,F.b9=fl,F.bA=gm,F.bB=function(F){return F.message===wc},F.bC=bn,F.bD=qd,F.ba=function(F){return F*Math.PI/180},F.bb=function(F,Da){const{x:ll,y:cl}=$c.fromLngLat(Da);return!(F<0||F>25||cl<0||cl>=1||ll<0||ll>=1)},F.bc=function(F,Da){return F[0]=Da[0],F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=Da[1],F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=Da[2],F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1,F},F.bd=class extends hs{},F.be=jm,F.bf=ef,F.bh=L,F.bi=function(F,Da){Sc.REGISTERED_PROTOCOLS[F]=Da},F.bj=function(F){delete Sc.REGISTERED_PROTOCOLS[F]},F.bk=function(F,Da){const ll={};for(let hl=0;hl<F.length;hl++){const cl=Da&&Da[F[hl].id]||Ln(F[hl]);Da&&(Da[F[hl].id]=cl);let dl=ll[cl];dl||(dl=ll[cl]=[]),dl.push(F[hl])}const cl=[];for(const hl in ll)cl.push(ll[hl]);return cl},F.bl=wi,F.bm=qc,F.bn=Zc,F.bo=$u,F.bp=function(Da){Da.bucket.createArrays(),Da.bucket.tilePixelRatio=vp/(512*Da.bucket.overscaling),Da.bucket.compareText={},Da.bucket.iconsNeedLinear=!1;const ll=Da.bucket.layers[0],cl=ll.layout,hl=ll._unevaluatedLayout._values,dl={layoutIconSize:hl["icon-size"].possiblyEvaluate(new Ui(Da.bucket.zoom+1),Da.canonical),layoutTextSize:hl["text-size"].possiblyEvaluate(new Ui(Da.bucket.zoom+1),Da.canonical),textMaxSize:hl["text-size"].possiblyEvaluate(new Ui(18))};if("composite"===Da.bucket.textSizeData.kind){const{minZoom:F,maxZoom:ll}=Da.bucket.textSizeData;dl.compositeTextSizes=[hl["text-size"].possiblyEvaluate(new Ui(F),Da.canonical),hl["text-size"].possiblyEvaluate(new Ui(ll),Da.canonical)]}if("composite"===Da.bucket.iconSizeData.kind){const{minZoom:F,maxZoom:ll}=Da.bucket.iconSizeData;dl.compositeIconSizes=[hl["icon-size"].possiblyEvaluate(new Ui(F),Da.canonical),hl["icon-size"].possiblyEvaluate(new Ui(ll),Da.canonical)]}const pl=cl.get("text-line-height")*fm,fl="viewport"!==cl.get("text-rotation-alignment")&&"point"!==cl.get("symbol-placement"),Al=cl.get("text-keep-upright"),bl=cl.get("text-size");for(const kl of Da.bucket.features){const hl=cl.get("text-font").evaluate(kl,{},Da.canonical).join(","),Dl=bl.evaluate(kl,{},Da.canonical),Wl=dl.layoutTextSize.evaluate(kl,{},Da.canonical),Ql=dl.layoutIconSize.evaluate(kl,{},Da.canonical),wc={horizontal:{},vertical:void 0},Sc=kl.text;let eu,iu=[0,0];if(Sc){const dl=Sc.toString(),bl=cl.get("text-letter-spacing").evaluate(kl,{},Da.canonical)*fm,Ql=Ci(dl)?bl:0,eu=cl.get("text-anchor").evaluate(kl,{},Da.canonical),su=vh(ll,kl,Da.canonical);if(!su){const F=cl.get("text-radial-offset").evaluate(kl,{},Da.canonical);iu=F?xh(eu,[F*fm,Zm]):cl.get("text-offset").evaluate(kl,{},Da.canonical).map((F=>F*fm))}let cu=fl?"center":cl.get("text-justify").evaluate(kl,{},Da.canonical);const uu="point"===cl.get("symbol-placement")?cl.get("text-max-width").evaluate(kl,{},Da.canonical)*fm:1/0,w=()=>{Da.bucket.allowVerticalPlacement&&Pi(dl)&&(wc.vertical=Ru(Sc,Da.glyphMap,Da.glyphPositions,Da.imagePositions,hl,uu,pl,eu,"left",Ql,iu,F.ah.vertical,!0,Wl,Dl))};if(!fl&&su){const ll=new Set;if("auto"===cu)for(let F=0;F<su.values.length;F+=2)ll.add(bh(su.values[F]));else ll.add(cu);let cl=!1;for(const dl of ll)if(!wc.horizontal[dl])if(cl)wc.horizontal[dl]=wc.horizontal[0];else{const ll=Ru(Sc,Da.glyphMap,Da.glyphPositions,Da.imagePositions,hl,uu,pl,"center",dl,Ql,iu,F.ah.horizontal,!1,Wl,Dl);ll&&(wc.horizontal[dl]=ll,cl=1===ll.positionedLines.length)}w()}else{"auto"===cu&&(cu=bh(eu));const ll=Ru(Sc,Da.glyphMap,Da.glyphPositions,Da.imagePositions,hl,uu,pl,eu,cu,Ql,iu,F.ah.horizontal,!1,Wl,Dl);ll&&(wc.horizontal[cu]=ll),w(),Pi(dl)&&fl&&Al&&(wc.vertical=Ru(Sc,Da.glyphMap,Da.glyphPositions,Da.imagePositions,hl,uu,pl,eu,cu,Ql,iu,F.ah.vertical,!1,Wl,Dl))}}let su=!1;if(kl.icon&&kl.icon.name){const F=Da.imageMap[kl.icon.name];F&&(eu=Qu(Da.imagePositions[kl.icon.name],cl.get("icon-offset").evaluate(kl,{},Da.canonical),cl.get("icon-anchor").evaluate(kl,{},Da.canonical)),su=!!F.sdf,void 0===Da.bucket.sdfIcons?Da.bucket.sdfIcons=su:Da.bucket.sdfIcons!==su&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(F.pixelRatio!==Da.bucket.pixelRatio||0!==cl.get("icon-rotate").constantOr(1))&&(Da.bucket.iconsNeedLinear=!0))}const cu=Ah(wc.horizontal)||wc.vertical;Da.bucket.iconsInText=!!cu&&cu.iconsInText,(cu||eu)&&wh(Da.bucket,kl,wc,eu,Da.imageMap,dl,Wl,Ql,iu,su,Da.canonical)}Da.showCollisionBoxes&&Da.bucket.generateCollisionDebugBuffers()},F.bq=ql,F.br=sl,F.bs=zl,F.bt=Vp,F.bu=_m,F.bv=class{constructor(F){this._marks={start:[F.url,"start"].join("#"),end:[F.url,"end"].join("#"),measure:F.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let F=performance.getEntriesByName(this._marks.measure);return 0===F.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),F=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),F}},F.bw=function(F,Da,ll,cl,hl){return e(this,void 0,void 0,(function*(){if(p())try{return yield P(F,Da,ll,cl,hl)}catch(F){}return function(F,Da,ll,cl,hl){const dl=F.width,pl=F.height;Wl&&Ql||(Wl=new OffscreenCanvas(dl,pl),Ql=Wl.getContext("2d",{willReadFrequently:!0})),Wl.width=dl,Wl.height=pl,Ql.drawImage(F,0,0,dl,pl);const fl=Ql.getImageData(Da,ll,cl,hl);return Ql.clearRect(0,0,dl,pl),fl.data}(F,Da,ll,cl,hl)}))},F.bx=Uc,F.by=r,F.bz=Da,F.c=E,F.d=F=>e(void 0,void 0,void 0,(function*(){if(0===F.byteLength)return createImageBitmap(new ImageData(1,1));const Da=new Blob([new Uint8Array(F)],{type:"image/png"});try{return createImageBitmap(Da)}catch(F){throw new Error(`Could not load image because of ${F.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),F.e=g,F.f=F=>new Promise(((Da,ll)=>{const cl=new Image;cl.onload=()=>{Da(cl),URL.revokeObjectURL(cl.src),cl.onload=null,window.requestAnimationFrame((()=>{cl.src=Dl}))},cl.onerror=()=>ll(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const hl=new Blob([new Uint8Array(F)],{type:"image/png"});cl.src=F.byteLength?URL.createObjectURL(hl):Dl})),F.g=T,F.h=(F,Da)=>O(g(F,{type:"json"}),Da),F.i=k,F.j=N,F.k=q,F.l=(F,Da)=>O(g(F,{type:"arrayBuffer"}),Da),F.m=O,F.n=function(F){return new _m(F).readFields(Pu,[])},F.o=_o,F.p=Eu,F.q=rs,F.r=Rd,F.s=j,F.t=xi,F.u=Dd,F.v=iu,F.w=A,F.x=function([F,Da,ll]){return Da+=90,Da*=Math.PI/180,ll*=Math.PI/180,{x:F*Math.cos(Da)*Math.sin(ll),y:F*Math.sin(Da)*Math.sin(ll),z:F*Math.cos(ll)}},F.y=yd,F.z=Ui})),define("worker",["./shared"],(function(F){class t{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(Da,ll){for(const hl of Da){this._layerConfigs[hl.id]=hl;const Da=this._layers[hl.id]=F.aA(hl);Da._featureFilter=F.a7(Da.filter),this.keyCache[hl.id]&&delete this.keyCache[hl.id]}for(const F of ll)delete this.keyCache[F],delete this._layerConfigs[F],delete this._layers[F];this.familiesBySource={};const cl=F.bk(Object.values(this._layerConfigs),this.keyCache);for(const F of cl){const Da=F.map((F=>this._layers[F.id])),ll=Da[0];if("none"===ll.visibility)continue;const cl=ll.source||"";let hl=this.familiesBySource[cl];hl||(hl=this.familiesBySource[cl]={});const dl=ll.sourceLayer||"_geojsonTileLayer";let pl=hl[dl];pl||(pl=hl[dl]=[]),pl.push(Da)}}}class o{constructor(Da){const ll={},cl=[];for(const F in Da){const hl=Da[F],dl=ll[F]={};for(const F in hl){const Da=hl[+F];if(!Da||0===Da.bitmap.width||0===Da.bitmap.height)continue;const ll={x:0,y:0,w:Da.bitmap.width+2,h:Da.bitmap.height+2};cl.push(ll),dl[F]={rect:ll,metrics:Da.metrics}}}const{w:hl,h:dl}=F.p(cl),pl=new F.o({width:hl||1,height:dl||1});for(const fl in Da){const cl=Da[fl];for(const Da in cl){const hl=cl[+Da];if(!hl||0===hl.bitmap.width||0===hl.bitmap.height)continue;const dl=ll[fl][Da].rect;F.o.copy(hl.bitmap,pl,{x:0,y:0},{x:dl.x+1,y:dl.y+1},hl.bitmap)}}this.image=pl,this.positions=ll}}F.bl("GlyphAtlas",o);class i{constructor(Da){this.tileID=new F.S(Da.tileID.overscaledZ,Da.tileID.wrap,Da.tileID.canonical.z,Da.tileID.canonical.x,Da.tileID.canonical.y),this.uid=Da.uid,this.zoom=Da.zoom,this.pixelRatio=Da.pixelRatio,this.tileSize=Da.tileSize,this.source=Da.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Da.showCollisionBoxes,this.collectResourceTiming=!!Da.collectResourceTiming,this.returnDependencies=!!Da.returnDependencies,this.promoteId=Da.promoteId,this.inFlightDependencies=[]}parse(Da,ll,cl,hl){return F._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Da,this.collisionBoxArray=new F.a5;const dl=new F.bm(Object.keys(Da.layers).sort()),pl=new F.bn(this.tileID,this.promoteId);pl.bucketLayerIDs=[];const fl={},Al={featureIndex:pl,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:cl},bl=ll.familiesBySource[this.source];for(const ll in bl){const hl=Da.layers[ll];if(!hl)continue;1===hl.version&&F.w(`Vector tile source "${this.source}" layer "${ll}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const kl=dl.encode(ll),Dl=[];for(let F=0;F<hl.length;F++){const Da=hl.feature(F),cl=pl.getId(Da,ll);Dl.push({feature:Da,id:cl,index:F,sourceLayerIndex:kl})}for(const Da of bl[ll]){const ll=Da[0];ll.source!==this.source&&F.w(`layer.source = ${ll.source} does not equal this.source = ${this.source}`),ll.minzoom&&this.zoom<Math.floor(ll.minzoom)||ll.maxzoom&&this.zoom>=ll.maxzoom||"none"!==ll.visibility&&(s(Da,this.zoom,cl),(fl[ll.id]=ll.createBucket({index:pl.bucketLayerIDs.length,layers:Da,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:kl,sourceID:this.source})).populate(Dl,Al,this.tileID.canonical),pl.bucketLayerIDs.push(Da.map((F=>F.id))))}}const kl=F.aF(Al.glyphDependencies,(F=>Object.keys(F).map(Number)));this.inFlightDependencies.forEach((F=>null==F?void 0:F.abort())),this.inFlightDependencies=[];let Dl=Promise.resolve({});if(Object.keys(kl).length){const F=new AbortController;this.inFlightDependencies.push(F),Dl=hl.sendAsync({type:"GG",data:{stacks:kl,source:this.source,tileID:this.tileID,type:"glyphs"}},F)}const Wl=Object.keys(Al.iconDependencies);let Ql=Promise.resolve({});if(Wl.length){const F=new AbortController;this.inFlightDependencies.push(F),Ql=hl.sendAsync({type:"GI",data:{icons:Wl,source:this.source,tileID:this.tileID,type:"icons"}},F)}const wc=Object.keys(Al.patternDependencies);let Sc=Promise.resolve({});if(wc.length){const F=new AbortController;this.inFlightDependencies.push(F),Sc=hl.sendAsync({type:"GI",data:{icons:wc,source:this.source,tileID:this.tileID,type:"patterns"}},F)}const[eu,iu,su]=yield Promise.all([Dl,Ql,Sc]),cu=new o(eu),uu=new F.bo(iu,su);for(const Da in fl){const ll=fl[Da];ll instanceof F.a6?(s(ll.layers,this.zoom,cl),F.bp({bucket:ll,glyphMap:eu,glyphPositions:cu.positions,imageMap:iu,imagePositions:uu.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ll.hasPattern&&(ll instanceof F.bq||ll instanceof F.br||ll instanceof F.bs)&&(s(ll.layers,this.zoom,cl),ll.addFeatures(Al,this.tileID.canonical,uu.patternPositions))}return this.status="done",{buckets:Object.values(fl).filter((F=>!F.isEmpty())),featureIndex:pl,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:cu.image,imageAtlas:uu,glyphMap:this.returnDependencies?eu:null,iconMap:this.returnDependencies?iu:null,glyphPositions:this.returnDependencies?cu.positions:null}}))}}function s(Da,ll,cl){const hl=new F.z(ll);for(const F of Da)F.recalculate(hl,cl)}class r{constructor(F,Da,ll){this.actor=F,this.layerIndex=Da,this.availableImages=ll,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Da,ll){return F._(this,void 0,void 0,(function*(){const cl=yield F.l(Da.request,ll);try{return{vectorTile:new F.bt.VectorTile(new F.bu(cl.data)),rawData:cl.data,cacheControl:cl.cacheControl,expires:cl.expires}}catch(F){const hl=new Uint8Array(cl.data);let dl=`Unable to parse the tile at ${Da.request.url}, `;throw dl+=31===hl[0]&&139===hl[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${F.message}`,new Error(dl)}}))}loadTile(Da){return F._(this,void 0,void 0,(function*(){const ll=Da.uid,cl=!!(Da&&Da.request&&Da.request.collectResourceTiming)&&new F.bv(Da.request),hl=new i(Da);this.loading[ll]=hl;const dl=new AbortController;hl.abort=dl;try{const pl=yield this.loadVectorTile(Da,dl);if(delete this.loading[ll],!pl)return null;const fl=pl.rawData,Al={};pl.expires&&(Al.expires=pl.expires),pl.cacheControl&&(Al.cacheControl=pl.cacheControl);const bl={};if(cl){const F=cl.finish();F&&(bl.resourceTiming=JSON.parse(JSON.stringify(F)))}hl.vectorTile=pl.vectorTile;const kl=hl.parse(pl.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ll]=hl,this.fetching[ll]={rawTileData:fl,cacheControl:Al,resourceTiming:bl};try{const Da=yield kl;return F.e({rawTileData:fl.slice(0)},Da,Al,bl)}finally{delete this.fetching[ll]}}catch(F){throw delete this.loading[ll],hl.status="done",this.loaded[ll]=hl,F}}))}reloadTile(Da){return F._(this,void 0,void 0,(function*(){const ll=Da.uid;if(!this.loaded||!this.loaded[ll])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const cl=this.loaded[ll];if(cl.showCollisionBoxes=Da.showCollisionBoxes,"parsing"===cl.status){const Da=yield cl.parse(cl.vectorTile,this.layerIndex,this.availableImages,this.actor);let hl;if(this.fetching[ll]){const{rawTileData:cl,cacheControl:dl,resourceTiming:pl}=this.fetching[ll];delete this.fetching[ll],hl=F.e({rawTileData:cl.slice(0)},Da,dl,pl)}else hl=Da;return hl}if("done"===cl.status&&cl.vectorTile)return cl.parse(cl.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(Da){return F._(this,void 0,void 0,(function*(){const F=this.loading,ll=Da.uid;F&&F[ll]&&F[ll].abort&&(F[ll].abort.abort(),delete F[ll])}))}removeTile(Da){return F._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Da.uid]&&delete this.loaded[Da.uid]}))}}class n{constructor(){this.loaded={}}loadTile(Da){return F._(this,void 0,void 0,(function*(){const{uid:ll,encoding:cl,rawImageData:hl,redFactor:dl,greenFactor:pl,blueFactor:fl,baseShift:Al}=Da,bl=hl.width+2,kl=hl.height+2,Dl=F.b(hl)?new F.R({width:bl,height:kl},yield F.bw(hl,-1,-1,bl,kl)):hl,Wl=new F.bx(ll,Dl,cl,dl,pl,fl,Al);return this.loaded=this.loaded||{},this.loaded[ll]=Wl,Wl}))}removeTile(F){const Da=this.loaded,ll=F.uid;Da&&Da[ll]&&delete Da[ll]}}function a(F,Da){if(0!==F.length){l(F[0],Da);for(var ll=1;ll<F.length;ll++)l(F[ll],!Da)}}function l(F,Da){for(var ll=0,cl=0,hl=0,dl=F.length,pl=dl-1;hl<dl;pl=hl++){var fl=(F[hl][0]-F[pl][0])*(F[pl][1]+F[hl][1]),Al=ll+fl;cl+=Math.abs(ll)>=Math.abs(fl)?ll-Al+fl:fl-Al+ll,ll=Al}ll+cl>=0!=!!Da&&F.reverse()}var Da=F.by((function e(F,Da){var ll,cl=F&&F.type;if("FeatureCollection"===cl)for(ll=0;ll<F.features.length;ll++)e(F.features[ll],Da);else if("GeometryCollection"===cl)for(ll=0;ll<F.geometries.length;ll++)e(F.geometries[ll],Da);else if("Feature"===cl)e(F.geometry,Da);else if("Polygon"===cl)a(F.coordinates,Da);else if("MultiPolygon"===cl)for(ll=0;ll<F.coordinates.length;ll++)a(F.coordinates[ll],Da);return F}));const ll=F.bt.VectorTileFeature.prototype.toGeoJSON;var cl={exports:{}},hl=F.bz,dl=F.bt.VectorTileFeature,pl=p;function p(F,Da){this.options=Da||{},this.features=F,this.length=F.length}function m(F,Da){this.id="number"==typeof F.id?F.id:void 0,this.type=F.type,this.rawGeometry=1===F.type?[F.geometry]:F.geometry,this.properties=F.tags,this.extent=Da||4096}p.prototype.feature=function(F){return new m(this.features[F],this.options.extent)},m.prototype.loadGeometry=function(){var F=this.rawGeometry;this.geometry=[];for(var Da=0;Da<F.length;Da++){for(var ll=F[Da],cl=[],dl=0;dl<ll.length;dl++)cl.push(new hl(ll[dl][0],ll[dl][1]));this.geometry.push(cl)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var F=this.geometry,Da=1/0,ll=-1/0,cl=1/0,hl=-1/0,dl=0;dl<F.length;dl++)for(var pl=F[dl],fl=0;fl<pl.length;fl++){var Al=pl[fl];Da=Math.min(Da,Al.x),ll=Math.max(ll,Al.x),cl=Math.min(cl,Al.y),hl=Math.max(hl,Al.y)}return[Da,cl,ll,hl]},m.prototype.toGeoJSON=dl.prototype.toGeoJSON;var fl=F.bA,Al=pl;function w(F){var Da=new fl;return function(F,Da){for(var ll in F.layers)Da.writeMessage(3,x,F.layers[ll])}(F,Da),Da.finish()}function x(F,Da){var ll;Da.writeVarintField(15,F.version||1),Da.writeStringField(1,F.name||""),Da.writeVarintField(5,F.extent||4096);var cl={keys:[],values:[],keycache:{},valuecache:{}};for(ll=0;ll<F.length;ll++)cl.feature=F.feature(ll),Da.writeMessage(2,b,cl);var hl=cl.keys;for(ll=0;ll<hl.length;ll++)Da.writeStringField(3,hl[ll]);var dl=cl.values;for(ll=0;ll<dl.length;ll++)Da.writeMessage(4,P,dl[ll])}function b(F,Da){var ll=F.feature;void 0!==ll.id&&Da.writeVarintField(1,ll.id),Da.writeMessage(2,S,F),Da.writeVarintField(3,ll.type),Da.writeMessage(4,I,ll)}function S(F,Da){var ll=F.feature,cl=F.keys,hl=F.values,dl=F.keycache,pl=F.valuecache;for(var fl in ll.properties){var Al=ll.properties[fl],bl=dl[fl];if(null!==Al){void 0===bl&&(cl.push(fl),dl[fl]=bl=cl.length-1),Da.writeVarint(bl);var kl=typeof Al;"string"!==kl&&"boolean"!==kl&&"number"!==kl&&(Al=JSON.stringify(Al));var Dl=kl+":"+Al,Wl=pl[Dl];void 0===Wl&&(hl.push(Al),pl[Dl]=Wl=hl.length-1),Da.writeVarint(Wl)}}}function _(F,Da){return(Da<<3)+(7&F)}function M(F){return F<<1^F>>31}function I(F,Da){for(var ll=F.loadGeometry(),cl=F.type,hl=0,dl=0,pl=ll.length,fl=0;fl<pl;fl++){var Al=ll[fl],bl=1;1===cl&&(bl=Al.length),Da.writeVarint(_(1,bl));for(var kl=3===cl?Al.length-1:Al.length,Dl=0;Dl<kl;Dl++){1===Dl&&1!==cl&&Da.writeVarint(_(2,kl-1));var Wl=Al[Dl].x-hl,Ql=Al[Dl].y-dl;Da.writeVarint(M(Wl)),Da.writeVarint(M(Ql)),hl+=Wl,dl+=Ql}3===cl&&Da.writeVarint(_(7,1))}}function P(F,Da){var ll=typeof F;"string"===ll?Da.writeStringField(1,F):"boolean"===ll?Da.writeBooleanField(7,F):"number"===ll&&(F%1!=0?Da.writeDoubleField(3,F):F<0?Da.writeSVarintField(6,F):Da.writeVarintField(5,F))}cl.exports=w,cl.exports.fromVectorTileJs=w,cl.exports.fromGeojsonVt=function(F,Da){Da=Da||{};var ll={};for(var cl in F)ll[cl]=new Al(F[cl].features,Da),ll[cl].name=cl,ll[cl].version=Da.version,ll[cl].extent=Da.extent;return w({layers:ll})},cl.exports.GeoJSONWrapper=Al;var bl=F.by(cl.exports);const kl={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:F=>F},Dl=Math.fround||(Wl=new Float32Array(1),F=>(Wl[0]=+F,Wl[0]));var Wl;const Ql=3,wc=5,Sc=6;class z{constructor(F){this.options=Object.assign(Object.create(kl),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){const{log:Da,minZoom:ll,maxZoom:cl}=this.options;Da&&console.time("total time");const hl=`prepare ${F.length} points`;Da&&console.time(hl),this.points=F;const dl=[];for(let fl=0;fl<F.length;fl++){const Da=F[fl];if(!Da.geometry)continue;const[ll,cl]=Da.geometry.coordinates,hl=Dl(G(ll)),pl=Dl(j(cl));dl.push(hl,pl,1/0,fl,-1,1),this.options.reduce&&dl.push(0)}let pl=this.trees[cl+1]=this._createTree(dl);Da&&console.timeEnd(hl);for(let fl=cl;fl>=ll;fl--){const F=+Date.now();pl=this.trees[fl]=this._createTree(this._cluster(pl,fl)),Da&&console.log("z%d: %d clusters in %dms",fl,pl.numItems,+Date.now()-F)}return Da&&console.timeEnd("total time"),this}getClusters(F,Da){let ll=((F[0]+180)%360+360)%360-180;const cl=Math.max(-90,Math.min(90,F[1]));let hl=180===F[2]?180:((F[2]+180)%360+360)%360-180;const dl=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)ll=-180,hl=180;else if(ll>hl){const F=this.getClusters([ll,cl,180,dl],Da),pl=this.getClusters([-180,cl,hl,dl],Da);return F.concat(pl)}const pl=this.trees[this._limitZoom(Da)],fl=pl.range(G(ll),j(dl),G(hl),j(cl)),Al=pl.data,bl=[];for(const kl of fl){const F=this.stride*kl;bl.push(Al[F+wc]>1?A(Al,F,this.clusterProps):this.points[Al[F+Ql]])}return bl}getChildren(F){const Da=this._getOriginId(F),ll=this._getOriginZoom(F),cl="No cluster with the specified id.",hl=this.trees[ll];if(!hl)throw new Error(cl);const dl=hl.data;if(Da*this.stride>=dl.length)throw new Error(cl);const pl=this.options.radius/(this.options.extent*Math.pow(2,ll-1)),fl=hl.within(dl[Da*this.stride],dl[Da*this.stride+1],pl),Al=[];for(const bl of fl){const Da=bl*this.stride;dl[Da+4]===F&&Al.push(dl[Da+wc]>1?A(dl,Da,this.clusterProps):this.points[dl[Da+Ql]])}if(0===Al.length)throw new Error(cl);return Al}getLeaves(F,Da,ll){const cl=[];return this._appendLeaves(cl,F,Da=Da||10,ll=ll||0,0),cl}getTile(F,Da,ll){const cl=this.trees[this._limitZoom(F)],hl=Math.pow(2,F),{extent:dl,radius:pl}=this.options,fl=pl/dl,Al=(ll-fl)/hl,bl=(ll+1+fl)/hl,kl={features:[]};return this._addTileFeatures(cl.range((Da-fl)/hl,Al,(Da+1+fl)/hl,bl),cl.data,Da,ll,hl,kl),0===Da&&this._addTileFeatures(cl.range(1-fl/hl,Al,1,bl),cl.data,hl,ll,hl,kl),Da===hl-1&&this._addTileFeatures(cl.range(0,Al,fl/hl,bl),cl.data,-1,ll,hl,kl),kl.features.length?kl:null}getClusterExpansionZoom(F){let Da=this._getOriginZoom(F)-1;for(;Da<=this.options.maxZoom;){const ll=this.getChildren(F);if(Da++,1!==ll.length)break;F=ll[0].properties.cluster_id}return Da}_appendLeaves(F,Da,ll,cl,hl){const dl=this.getChildren(Da);for(const pl of dl){const Da=pl.properties;if(Da&&Da.cluster?hl+Da.point_count<=cl?hl+=Da.point_count:hl=this._appendLeaves(F,Da.cluster_id,ll,cl,hl):hl<cl?hl++:F.push(pl),F.length===ll)break}return hl}_createTree(Da){const ll=new F.av(Da.length/this.stride|0,this.options.nodeSize,Float32Array);for(let F=0;F<Da.length;F+=this.stride)ll.add(Da[F],Da[F+1]);return ll.finish(),ll.data=Da,ll}_addTileFeatures(F,Da,ll,cl,hl,dl){for(const pl of F){const F=pl*this.stride,fl=Da[F+wc]>1;let Al,bl,kl;if(fl)Al=E(Da,F,this.clusterProps),bl=Da[F],kl=Da[F+1];else{const ll=this.points[Da[F+Ql]];Al=ll.properties;const[cl,hl]=ll.geometry.coordinates;bl=G(cl),kl=j(hl)}const Dl={type:1,geometry:[[Math.round(this.options.extent*(bl*hl-ll)),Math.round(this.options.extent*(kl*hl-cl))]],tags:Al};let Wl;Wl=fl||this.options.generateId?Da[F+Ql]:this.points[Da[F+Ql]].id,void 0!==Wl&&(Dl.id=Wl),dl.features.push(Dl)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,Da){const{radius:ll,extent:cl,reduce:hl,minPoints:dl}=this.options,pl=ll/(cl*Math.pow(2,Da)),fl=F.data,Al=[],bl=this.stride;for(let kl=0;kl<fl.length;kl+=bl){if(fl[kl+2]<=Da)continue;fl[kl+2]=Da;const ll=fl[kl],cl=fl[kl+1],Dl=F.within(fl[kl],fl[kl+1],pl),Wl=fl[kl+wc];let Ql=Wl;for(const F of Dl){const ll=F*bl;fl[ll+2]>Da&&(Ql+=fl[ll+wc])}if(Ql>Wl&&Ql>=dl){let F,dl=ll*Wl,pl=cl*Wl,Sc=-1;const eu=(kl/bl<<5)+(Da+1)+this.points.length;for(const ll of Dl){const cl=ll*bl;if(fl[cl+2]<=Da)continue;fl[cl+2]=Da;const Al=fl[cl+wc];dl+=fl[cl]*Al,pl+=fl[cl+1]*Al,fl[cl+4]=eu,hl&&(F||(F=this._map(fl,kl,!0),Sc=this.clusterProps.length,this.clusterProps.push(F)),hl(F,this._map(fl,cl)))}fl[kl+4]=eu,Al.push(dl/Ql,pl/Ql,1/0,eu,-1,Ql),hl&&Al.push(Sc)}else{for(let F=0;F<bl;F++)Al.push(fl[kl+F]);if(Ql>1)for(const F of Dl){const ll=F*bl;if(!(fl[ll+2]<=Da)){fl[ll+2]=Da;for(let F=0;F<bl;F++)Al.push(fl[ll+F])}}}}return Al}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,Da,ll){if(F[Da+wc]>1){const cl=this.clusterProps[F[Da+Sc]];return ll?Object.assign({},cl):cl}const cl=this.points[F[Da+Ql]].properties,hl=this.options.map(cl);return ll&&hl===cl?Object.assign({},hl):hl}}function A(F,Da,ll){return{type:"Feature",id:F[Da+Ql],properties:E(F,Da,ll),geometry:{type:"Point",coordinates:[(cl=F[Da],360*(cl-.5)),R(F[Da+1])]}};var cl}function E(F,Da,ll){const cl=F[Da+wc],hl=cl>=1e4?`${Math.round(cl/1e3)}k`:cl>=1e3?Math.round(cl/100)/10+"k":cl,dl=F[Da+Sc],pl=-1===dl?{}:Object.assign({},ll[dl]);return Object.assign(pl,{cluster:!0,cluster_id:F[Da+Ql],point_count:cl,point_count_abbreviated:hl})}function G(F){return F/360+.5}function j(F){const Da=Math.sin(F*Math.PI/180),ll=.5-.25*Math.log((1+Da)/(1-Da))/Math.PI;return ll<0?0:ll>1?1:ll}function R(F){const Da=(180-360*F)*Math.PI/180;return 360*Math.atan(Math.exp(Da))/Math.PI-90}function Z(F,Da,ll,cl){let hl=cl;const dl=Da+(ll-Da>>1);let pl,fl=ll-Da;const Al=F[Da],bl=F[Da+1],kl=F[ll],Dl=F[ll+1];for(let Wl=Da+3;Wl<ll;Wl+=3){const Da=N(F[Wl],F[Wl+1],Al,bl,kl,Dl);if(Da>hl)pl=Wl,hl=Da;else if(Da===hl){const F=Math.abs(Wl-dl);F<fl&&(pl=Wl,fl=F)}}hl>cl&&(pl-Da>3&&Z(F,Da,pl,cl),F[pl+2]=hl,ll-pl>3&&Z(F,pl,ll,cl))}function N(F,Da,ll,cl,hl,dl){let pl=hl-ll,fl=dl-cl;if(0!==pl||0!==fl){const Al=((F-ll)*pl+(Da-cl)*fl)/(pl*pl+fl*fl);Al>1?(ll=hl,cl=dl):Al>0&&(ll+=pl*Al,cl+=fl*Al)}return pl=F-ll,fl=Da-cl,pl*pl+fl*fl}function J(F,Da,ll,cl){const hl={id:null==F?null:F,type:Da,geometry:ll,tags:cl,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===Da||"MultiPoint"===Da||"LineString"===Da)W(hl,ll);else if("Polygon"===Da)W(hl,ll[0]);else if("MultiLineString"===Da)for(const dl of ll)W(hl,dl);else if("MultiPolygon"===Da)for(const dl of ll)W(hl,dl[0]);return hl}function W(F,Da){for(let ll=0;ll<Da.length;ll+=3)F.minX=Math.min(F.minX,Da[ll]),F.minY=Math.min(F.minY,Da[ll+1]),F.maxX=Math.max(F.maxX,Da[ll]),F.maxY=Math.max(F.maxY,Da[ll+1])}function Y(F,Da,ll,cl){if(!Da.geometry)return;const hl=Da.geometry.coordinates;if(hl&&0===hl.length)return;const dl=Da.geometry.type,pl=Math.pow(ll.tolerance/((1<<ll.maxZoom)*ll.extent),2);let fl=[],Al=Da.id;if(ll.promoteId?Al=Da.properties[ll.promoteId]:ll.generateId&&(Al=cl||0),"Point"===dl)V(hl,fl);else if("MultiPoint"===dl)for(const bl of hl)V(bl,fl);else if("LineString"===dl)X(hl,fl,pl,!1);else if("MultiLineString"===dl){if(ll.lineMetrics){for(const ll of hl)fl=[],X(ll,fl,pl,!1),F.push(J(Al,"LineString",fl,Da.properties));return}q(hl,fl,pl,!1)}else if("Polygon"===dl)q(hl,fl,pl,!0);else{if("MultiPolygon"!==dl){if("GeometryCollection"===dl){for(const hl of Da.geometry.geometries)Y(F,{id:Al,geometry:hl,properties:Da.properties},ll,cl);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const F of hl){const Da=[];q(F,Da,pl,!0),fl.push(Da)}}F.push(J(Al,dl,fl,Da.properties))}function V(F,Da){Da.push(H(F[0]),B(F[1]),0)}function X(F,Da,ll,cl){let hl,dl,pl=0;for(let Al=0;Al<F.length;Al++){const ll=H(F[Al][0]),fl=B(F[Al][1]);Da.push(ll,fl,0),Al>0&&(pl+=cl?(hl*fl-ll*dl)/2:Math.sqrt(Math.pow(ll-hl,2)+Math.pow(fl-dl,2))),hl=ll,dl=fl}const fl=Da.length-3;Da[2]=1,Z(Da,0,fl,ll),Da[fl+2]=1,Da.size=Math.abs(pl),Da.start=0,Da.end=Da.size}function q(F,Da,ll,cl){for(let hl=0;hl<F.length;hl++){const dl=[];X(F[hl],dl,ll,cl),Da.push(dl)}}function H(F){return F/360+.5}function B(F){const Da=Math.sin(F*Math.PI/180),ll=.5-.25*Math.log((1+Da)/(1-Da))/Math.PI;return ll<0?0:ll>1?1:ll}function U(F,Da,ll,cl,hl,dl,pl,fl){if(cl/=Da,dl>=(ll/=Da)&&pl<cl)return F;if(pl<ll||dl>=cl)return null;const Al=[];for(const bl of F){const F=bl.geometry;let Da=bl.type;const dl=0===hl?bl.minX:bl.minY,pl=0===hl?bl.maxX:bl.maxY;if(dl>=ll&&pl<cl){Al.push(bl);continue}if(pl<ll||dl>=cl)continue;let kl=[];if("Point"===Da||"MultiPoint"===Da)$(F,kl,ll,cl,hl);else if("LineString"===Da)K(F,kl,ll,cl,hl,!1,fl.lineMetrics);else if("MultiLineString"===Da)ee(F,kl,ll,cl,hl,!1);else if("Polygon"===Da)ee(F,kl,ll,cl,hl,!0);else if("MultiPolygon"===Da)for(const fl of F){const F=[];ee(fl,F,ll,cl,hl,!0),F.length&&kl.push(F)}if(kl.length){if(fl.lineMetrics&&"LineString"===Da){for(const F of kl)Al.push(J(bl.id,Da,F,bl.tags));continue}"LineString"!==Da&&"MultiLineString"!==Da||(1===kl.length?(Da="LineString",kl=kl[0]):Da="MultiLineString"),"Point"!==Da&&"MultiPoint"!==Da||(Da=3===kl.length?"Point":"MultiPoint"),Al.push(J(bl.id,Da,kl,bl.tags))}}return Al.length?Al:null}function $(F,Da,ll,cl,hl){for(let dl=0;dl<F.length;dl+=3){const pl=F[dl+hl];pl>=ll&&pl<=cl&&te(Da,F[dl],F[dl+1],F[dl+2])}}function K(F,Da,ll,cl,hl,dl,pl){let fl=Q(F);const Al=0===hl?oe:ie;let bl,kl,Dl=F.start;for(let eu=0;eu<F.length-3;eu+=3){const Wl=F[eu],Ql=F[eu+1],wc=F[eu+2],Sc=F[eu+3],iu=F[eu+4],su=0===hl?Wl:Ql,cu=0===hl?Sc:iu;let uu=!1;pl&&(bl=Math.sqrt(Math.pow(Wl-Sc,2)+Math.pow(Ql-iu,2))),su<ll?cu>ll&&(kl=Al(fl,Wl,Ql,Sc,iu,ll),pl&&(fl.start=Dl+bl*kl)):su>cl?cu<cl&&(kl=Al(fl,Wl,Ql,Sc,iu,cl),pl&&(fl.start=Dl+bl*kl)):te(fl,Wl,Ql,wc),cu<ll&&su>=ll&&(kl=Al(fl,Wl,Ql,Sc,iu,ll),uu=!0),cu>cl&&su<=cl&&(kl=Al(fl,Wl,Ql,Sc,iu,cl),uu=!0),!dl&&uu&&(pl&&(fl.end=Dl+bl*kl),Da.push(fl),fl=Q(F)),pl&&(Dl+=bl)}let Wl=F.length-3;const Ql=F[Wl],wc=F[Wl+1],Sc=0===hl?Ql:wc;Sc>=ll&&Sc<=cl&&te(fl,Ql,wc,F[Wl+2]),Wl=fl.length-3,dl&&Wl>=3&&(fl[Wl]!==fl[0]||fl[Wl+1]!==fl[1])&&te(fl,fl[0],fl[1],fl[2]),fl.length&&Da.push(fl)}function Q(F){const Da=[];return Da.size=F.size,Da.start=F.start,Da.end=F.end,Da}function ee(F,Da,ll,cl,hl,dl){for(const pl of F)K(pl,Da,ll,cl,hl,dl,!1)}function te(F,Da,ll,cl){F.push(Da,ll,cl)}function oe(F,Da,ll,cl,hl,dl){const pl=(dl-Da)/(cl-Da);return te(F,dl,ll+(hl-ll)*pl,1),pl}function ie(F,Da,ll,cl,hl,dl){const pl=(dl-ll)/(hl-ll);return te(F,Da+(cl-Da)*pl,dl,1),pl}function se(F,Da){const ll=[];for(let cl=0;cl<F.length;cl++){const hl=F[cl],dl=hl.type;let pl;if("Point"===dl||"MultiPoint"===dl||"LineString"===dl)pl=re(hl.geometry,Da);else if("MultiLineString"===dl||"Polygon"===dl){pl=[];for(const F of hl.geometry)pl.push(re(F,Da))}else if("MultiPolygon"===dl){pl=[];for(const F of hl.geometry){const ll=[];for(const cl of F)ll.push(re(cl,Da));pl.push(ll)}}ll.push(J(hl.id,dl,pl,hl.tags))}return ll}function re(F,Da){const ll=[];ll.size=F.size,void 0!==F.start&&(ll.start=F.start,ll.end=F.end);for(let cl=0;cl<F.length;cl+=3)ll.push(F[cl]+Da,F[cl+1],F[cl+2]);return ll}function ne(F,Da){if(F.transformed)return F;const ll=1<<F.z,cl=F.x,hl=F.y;for(const dl of F.features){const F=dl.geometry,pl=dl.type;if(dl.geometry=[],1===pl)for(let fl=0;fl<F.length;fl+=2)dl.geometry.push(ae(F[fl],F[fl+1],Da,ll,cl,hl));else for(let fl=0;fl<F.length;fl++){const pl=[];for(let dl=0;dl<F[fl].length;dl+=2)pl.push(ae(F[fl][dl],F[fl][dl+1],Da,ll,cl,hl));dl.geometry.push(pl)}}return F.transformed=!0,F}function ae(F,Da,ll,cl,hl,dl){return[Math.round(ll*(F*cl-hl)),Math.round(ll*(Da*cl-dl))]}function le(F,Da,ll,cl,hl){const dl=Da===hl.maxZoom?0:hl.tolerance/((1<<Da)*hl.extent),pl={features:[],numPoints:0,numSimplified:0,numFeatures:F.length,source:null,x:ll,y:cl,z:Da,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const fl of F)ce(pl,fl,dl,hl);return pl}function ce(F,Da,ll,cl){const hl=Da.geometry,dl=Da.type,pl=[];if(F.minX=Math.min(F.minX,Da.minX),F.minY=Math.min(F.minY,Da.minY),F.maxX=Math.max(F.maxX,Da.maxX),F.maxY=Math.max(F.maxY,Da.maxY),"Point"===dl||"MultiPoint"===dl)for(let fl=0;fl<hl.length;fl+=3)pl.push(hl[fl],hl[fl+1]),F.numPoints++,F.numSimplified++;else if("LineString"===dl)ue(pl,hl,F,ll,!1,!1);else if("MultiLineString"===dl||"Polygon"===dl)for(let fl=0;fl<hl.length;fl++)ue(pl,hl[fl],F,ll,"Polygon"===dl,0===fl);else if("MultiPolygon"===dl)for(let fl=0;fl<hl.length;fl++){const Da=hl[fl];for(let cl=0;cl<Da.length;cl++)ue(pl,Da[cl],F,ll,!0,0===cl)}if(pl.length){let ll=Da.tags||null;if("LineString"===dl&&cl.lineMetrics){ll={};for(const F in Da.tags)ll[F]=Da.tags[F];ll.mapbox_clip_start=hl.start/hl.size,ll.mapbox_clip_end=hl.end/hl.size}const fl={geometry:pl,type:"Polygon"===dl||"MultiPolygon"===dl?3:"LineString"===dl||"MultiLineString"===dl?2:1,tags:ll};null!==Da.id&&(fl.id=Da.id),F.features.push(fl)}}function ue(F,Da,ll,cl,hl,dl){const pl=cl*cl;if(cl>0&&Da.size<(hl?pl:cl))return void(ll.numPoints+=Da.length/3);const fl=[];for(let Al=0;Al<Da.length;Al+=3)(0===cl||Da[Al+2]>pl)&&(ll.numSimplified++,fl.push(Da[Al],Da[Al+1])),ll.numPoints++;hl&&function(F,Da){let ll=0;for(let cl=0,hl=F.length,dl=hl-2;cl<hl;dl=cl,cl+=2)ll+=(F[cl]-F[dl])*(F[cl+1]+F[dl+1]);if(ll>0===Da)for(let cl=0,hl=F.length;cl<hl/2;cl+=2){const Da=F[cl],ll=F[cl+1];F[cl]=F[hl-2-cl],F[cl+1]=F[hl-1-cl],F[hl-2-cl]=Da,F[hl-1-cl]=ll}}(fl,dl),F.push(fl)}const eu={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class de{constructor(F,Da){const ll=(Da=this.options=function(F,Da){for(const ll in Da)F[ll]=Da[ll];return F}(Object.create(eu),Da)).debug;if(ll&&console.time("preprocess data"),Da.maxZoom<0||Da.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Da.promoteId&&Da.generateId)throw new Error("promoteId and generateId cannot be used together.");let cl=function(F,Da){const ll=[];if("FeatureCollection"===F.type)for(let cl=0;cl<F.features.length;cl++)Y(ll,F.features[cl],Da,cl);else Y(ll,"Feature"===F.type?F:{geometry:F},Da);return ll}(F,Da);this.tiles={},this.tileCoords=[],ll&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Da.indexMaxZoom,Da.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),cl=function(F,Da){const ll=Da.buffer/Da.extent;let cl=F;const hl=U(F,1,-1-ll,ll,0,-1,2,Da),dl=U(F,1,1-ll,2+ll,0,-1,2,Da);return(hl||dl)&&(cl=U(F,1,-ll,1+ll,0,-1,2,Da)||[],hl&&(cl=se(hl,1).concat(cl)),dl&&(cl=cl.concat(se(dl,-1)))),cl}(cl,Da),cl.length&&this.splitTile(cl,0,0,0),ll&&(cl.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(F,Da,ll,cl,hl,dl,pl){const fl=[F,Da,ll,cl],Al=this.options,bl=Al.debug;for(;fl.length;){cl=fl.pop(),ll=fl.pop(),Da=fl.pop(),F=fl.pop();const kl=1<<Da,Dl=fe(Da,ll,cl);let Wl=this.tiles[Dl];if(!Wl&&(bl>1&&console.time("creation"),Wl=this.tiles[Dl]=le(F,Da,ll,cl,Al),this.tileCoords.push({z:Da,x:ll,y:cl}),bl)){bl>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Da,ll,cl,Wl.numFeatures,Wl.numPoints,Wl.numSimplified),console.timeEnd("creation"));const F=`z${Da}`;this.stats[F]=(this.stats[F]||0)+1,this.total++}if(Wl.source=F,null==hl){if(Da===Al.indexMaxZoom||Wl.numPoints<=Al.indexMaxPoints)continue}else{if(Da===Al.maxZoom||Da===hl)continue;if(null!=hl){const F=hl-Da;if(ll!==dl>>F||cl!==pl>>F)continue}}if(Wl.source=null,0===F.length)continue;bl>1&&console.time("clipping");const Ql=.5*Al.buffer/Al.extent,wc=.5-Ql,Sc=.5+Ql,eu=1+Ql;let iu=null,su=null,cu=null,uu=null,hu=U(F,kl,ll-Ql,ll+Sc,0,Wl.minX,Wl.maxX,Al),Lu=U(F,kl,ll+wc,ll+eu,0,Wl.minX,Wl.maxX,Al);F=null,hu&&(iu=U(hu,kl,cl-Ql,cl+Sc,1,Wl.minY,Wl.maxY,Al),su=U(hu,kl,cl+wc,cl+eu,1,Wl.minY,Wl.maxY,Al),hu=null),Lu&&(cu=U(Lu,kl,cl-Ql,cl+Sc,1,Wl.minY,Wl.maxY,Al),uu=U(Lu,kl,cl+wc,cl+eu,1,Wl.minY,Wl.maxY,Al),Lu=null),bl>1&&console.timeEnd("clipping"),fl.push(iu||[],Da+1,2*ll,2*cl),fl.push(su||[],Da+1,2*ll,2*cl+1),fl.push(cu||[],Da+1,2*ll+1,2*cl),fl.push(uu||[],Da+1,2*ll+1,2*cl+1)}}getTile(F,Da,ll){F=+F,Da=+Da,ll=+ll;const cl=this.options,{extent:hl,debug:dl}=cl;if(F<0||F>24)return null;const pl=1<<F,fl=fe(F,Da=Da+pl&pl-1,ll);if(this.tiles[fl])return ne(this.tiles[fl],hl);dl>1&&console.log("drilling down to z%d-%d-%d",F,Da,ll);let Al,bl=F,kl=Da,Dl=ll;for(;!Al&&bl>0;)bl--,kl>>=1,Dl>>=1,Al=this.tiles[fe(bl,kl,Dl)];return Al&&Al.source?(dl>1&&(console.log("found parent tile z%d-%d-%d",bl,kl,Dl),console.time("drilling down")),this.splitTile(Al.source,bl,kl,Dl,F,Da,ll),dl>1&&console.timeEnd("drilling down"),this.tiles[fl]?ne(this.tiles[fl],hl):null):null}}function fe(F,Da,ll){return 32*((1<<F)*ll+Da)+F}function ge(F,Da){return Da?F.properties[Da]:F.id}function pe(F,Da){if(null==F)return!0;if("Feature"===F.type)return null!=ge(F,Da);if("FeatureCollection"===F.type){const ll=new Set;for(const cl of F.features){const F=ge(cl,Da);if(null==F)return!1;if(ll.has(F))return!1;ll.add(F)}return!0}return!1}function me(F,Da){const ll=new Map;if(null==F);else if("Feature"===F.type)ll.set(ge(F,Da),F);else for(const cl of F.features)ll.set(ge(cl,Da),cl);return ll}class ye extends r{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Da,cl){return F._(this,void 0,void 0,(function*(){const cl=Da.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const hl=this._geoJSONIndex.getTile(cl.z,cl.x,cl.y);if(!hl)return null;const dl=new class{constructor(Da){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=F.X,this.length=Da.length,this._features=Da}feature(Da){return new class{constructor(Da){this._feature=Da,this.extent=F.X,this.type=Da.type,this.properties=Da.tags,"id"in Da&&!isNaN(Da.id)&&(this.id=parseInt(Da.id,10))}loadGeometry(){if(1===this._feature.type){const Da=[];for(const ll of this._feature.geometry)Da.push([new F.P(ll[0],ll[1])]);return Da}{const Da=[];for(const ll of this._feature.geometry){const cl=[];for(const Da of ll)cl.push(new F.P(Da[0],Da[1]));Da.push(cl)}return Da}}toGeoJSON(F,Da,cl){return ll.call(this,F,Da,cl)}}(this._features[Da])}}(hl.features);let pl=bl(dl);return 0===pl.byteOffset&&pl.byteLength===pl.buffer.byteLength||(pl=new Uint8Array(pl)),{vectorTile:dl,rawData:pl.buffer}}))}loadData(Da){return F._(this,void 0,void 0,(function*(){var ll;null===(ll=this._pendingRequest)||void 0===ll||ll.abort();const cl=!!(Da&&Da.request&&Da.request.collectResourceTiming)&&new F.bv(Da.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Da,this._pendingRequest),this._geoJSONIndex=Da.cluster?new z(function({superclusterOptions:Da,clusterProperties:ll}){if(!ll||!Da)return Da;const cl={},hl={},dl={accumulated:null,zoom:0},pl={properties:null},fl=Object.keys(ll);for(const Al of fl){const[Da,dl]=ll[Al],pl=F.bC(dl),fl=F.bC("string"==typeof Da?[Da,["accumulated"],["get",Al]]:Da);cl[Al]=pl.value,hl[Al]=fl.value}return Da.map=F=>{pl.properties=F;const Da={};for(const ll of fl)Da[ll]=cl[ll].evaluate(dl,pl);return Da},Da.reduce=(F,Da)=>{pl.properties=Da;for(const ll of fl)dl.accumulated=F[ll],F[ll]=hl[ll].evaluate(dl,pl)},Da}(Da)).load((yield this._pendingData).features):(hl=yield this._pendingData,new de(hl,Da.geojsonVtOptions)),this.loaded={};const ll={};if(cl){const F=cl.finish();F&&(ll.resourceTiming={},ll.resourceTiming[Da.source]=JSON.parse(JSON.stringify(F)))}return ll}catch(Da){if(delete this._pendingRequest,F.bB(Da))return{abandoned:!0};throw Da}var hl}))}getData(){return F._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(F){const Da=this.loaded;return Da&&Da[F.uid]?super.reloadTile(F):this.loadTile(F)}loadAndProcessGeoJSON(ll,cl){return F._(this,void 0,void 0,(function*(){let hl=yield this.loadGeoJSON(ll,cl);if(delete this._pendingRequest,"object"!=typeof hl)throw new Error(`Input data given to '${ll.source}' is not a valid GeoJSON object.`);if(Da(hl,!0),ll.filter){const Da=F.bC(ll.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Da.result)throw new Error(Da.value.map((F=>`${F.key}: ${F.message}`)).join(", "));const cl=hl.features.filter((F=>Da.value.evaluate({zoom:0},F)));hl={type:"FeatureCollection",features:cl}}return hl}))}loadGeoJSON(Da,ll){return F._(this,void 0,void 0,(function*(){const{promoteId:cl}=Da;if(Da.request){const hl=yield F.h(Da.request,ll);return this._dataUpdateable=pe(hl.data,cl)?me(hl.data,cl):void 0,hl.data}if("string"==typeof Da.data)try{const F=JSON.parse(Da.data);return this._dataUpdateable=pe(F,cl)?me(F,cl):void 0,F}catch(F){throw new Error(`Input data given to '${Da.source}' is not a valid GeoJSON object.`)}if(!Da.dataDiff)throw new Error(`Input data given to '${Da.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Da.source}`);return function(F,Da,ll){var cl,hl,dl,pl;if(Da.removeAll&&F.clear(),Da.remove)for(const fl of Da.remove)F.delete(fl);if(Da.add)for(const fl of Da.add){const Da=ge(fl,ll);null!=Da&&F.set(Da,fl)}if(Da.update)for(const fl of Da.update){let Da=F.get(fl.id);if(null==Da)continue;const ll=!fl.removeAllProperties&&((null===(cl=fl.removeProperties)||void 0===cl?void 0:cl.length)>0||(null===(hl=fl.addOrUpdateProperties)||void 0===hl?void 0:hl.length)>0);if((fl.newGeometry||fl.removeAllProperties||ll)&&(Da=Object.assign({},Da),F.set(fl.id,Da),ll&&(Da.properties=Object.assign({},Da.properties))),fl.newGeometry&&(Da.geometry=fl.newGeometry),fl.removeAllProperties)Da.properties={};else if((null===(dl=fl.removeProperties)||void 0===dl?void 0:dl.length)>0)for(const F of fl.removeProperties)Object.prototype.hasOwnProperty.call(Da.properties,F)&&delete Da.properties[F];if((null===(pl=fl.addOrUpdateProperties)||void 0===pl?void 0:pl.length)>0)for(const{key:F,value:cl}of fl.addOrUpdateProperties)Da.properties[F]=cl}}(this._dataUpdateable,Da.dataDiff,cl),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(Da){return F._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(F){return this._geoJSONIndex.getClusterExpansionZoom(F.clusterId)}getClusterChildren(F){return this._geoJSONIndex.getChildren(F.clusterId)}getClusterLeaves(F){return this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset)}}class ve{constructor(Da){this.self=Da,this.actor=new F.F(Da),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(F,Da)=>{if(this.externalWorkerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.externalWorkerSourceTypes[F]=Da},this.self.addProtocol=F.bi,this.self.removeProtocol=F.bj,this.self.registerRTLTextPlugin=Da=>{if(F.bD.isParsed())throw new Error("RTL text plugin already registered.");F.bD.setMethods(Da)},this.actor.registerMessageHandler("LDT",((F,Da)=>this._getDEMWorkerSource(F,Da.source).loadTile(Da))),this.actor.registerMessageHandler("RDT",((Da,ll)=>F._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Da,ll.source).removeTile(ll)})))),this.actor.registerMessageHandler("GCEZ",((Da,ll)=>F._(this,void 0,void 0,(function*(){return this._getWorkerSource(Da,ll.type,ll.source).getClusterExpansionZoom(ll)})))),this.actor.registerMessageHandler("GCC",((Da,ll)=>F._(this,void 0,void 0,(function*(){return this._getWorkerSource(Da,ll.type,ll.source).getClusterChildren(ll)})))),this.actor.registerMessageHandler("GCL",((Da,ll)=>F._(this,void 0,void 0,(function*(){return this._getWorkerSource(Da,ll.type,ll.source).getClusterLeaves(ll)})))),this.actor.registerMessageHandler("LD",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).loadData(Da))),this.actor.registerMessageHandler("GD",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).getData())),this.actor.registerMessageHandler("LT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).loadTile(Da))),this.actor.registerMessageHandler("RT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).reloadTile(Da))),this.actor.registerMessageHandler("AT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).abortTile(Da))),this.actor.registerMessageHandler("RMT",((F,Da)=>this._getWorkerSource(F,Da.type,Da.source).removeTile(Da))),this.actor.registerMessageHandler("RS",((Da,ll)=>F._(this,void 0,void 0,(function*(){if(!this.workerSources[Da]||!this.workerSources[Da][ll.type]||!this.workerSources[Da][ll.type][ll.source])return;const F=this.workerSources[Da][ll.type][ll.source];delete this.workerSources[Da][ll.type][ll.source],void 0!==F.removeSource&&F.removeSource(ll)})))),this.actor.registerMessageHandler("RM",(Da=>F._(this,void 0,void 0,(function*(){delete this.layerIndexes[Da],delete this.availableImages[Da],delete this.workerSources[Da],delete this.demWorkerSources[Da]})))),this.actor.registerMessageHandler("SR",((Da,ll)=>F._(this,void 0,void 0,(function*(){this.referrer=ll})))),this.actor.registerMessageHandler("SRPS",((F,Da)=>this._syncRTLPluginState(F,Da))),this.actor.registerMessageHandler("IS",((Da,ll)=>F._(this,void 0,void 0,(function*(){this.self.importScripts(ll)})))),this.actor.registerMessageHandler("SI",((F,Da)=>this._setImages(F,Da))),this.actor.registerMessageHandler("UL",((Da,ll)=>F._(this,void 0,void 0,(function*(){this._getLayerIndex(Da).update(ll.layers,ll.removedIds)})))),this.actor.registerMessageHandler("SL",((Da,ll)=>F._(this,void 0,void 0,(function*(){this._getLayerIndex(Da).replace(ll)}))))}_setImages(Da,ll){return F._(this,void 0,void 0,(function*(){this.availableImages[Da]=ll;for(const F in this.workerSources[Da]){const cl=this.workerSources[Da][F];for(const F in cl)cl[F].availableImages=ll}}))}_syncRTLPluginState(Da,ll){return F._(this,void 0,void 0,(function*(){if(F.bD.isParsed())return F.bD.getState();if("loading"!==ll.pluginStatus)return F.bD.setState(ll),ll;const Da=ll.pluginURL;if(this.self.importScripts(Da),F.bD.isParsed()){const ll={pluginStatus:"loaded",pluginURL:Da};return F.bD.setState(ll),ll}throw F.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Da}`)}))}_getAvailableImages(F){let Da=this.availableImages[F];return Da||(Da=[]),Da}_getLayerIndex(F){let Da=this.layerIndexes[F];return Da||(Da=this.layerIndexes[F]=new t),Da}_getWorkerSource(F,Da,ll){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][Da]||(this.workerSources[F][Da]={}),!this.workerSources[F][Da][ll]){const cl={sendAsync:(Da,ll)=>(Da.targetMapId=F,this.actor.sendAsync(Da,ll))};switch(Da){case"vector":this.workerSources[F][Da][ll]=new r(cl,this._getLayerIndex(F),this._getAvailableImages(F));break;case"geojson":this.workerSources[F][Da][ll]=new ye(cl,this._getLayerIndex(F),this._getAvailableImages(F));break;default:this.workerSources[F][Da][ll]=new this.externalWorkerSourceTypes[Da](cl,this._getLayerIndex(F),this._getAvailableImages(F))}}return this.workerSources[F][Da][ll]}_getDEMWorkerSource(F,Da){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][Da]||(this.demWorkerSources[F][Da]=new n),this.demWorkerSources[F][Da]}}return F.i(self)&&(self.worker=new ve(self)),ve})),define("index",["exports","./shared"],(function(F,Da){var ll="4.7.1";let cl,hl;const dl={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:F=>new Promise(((ll,cl)=>{const hl=requestAnimationFrame(ll);F.signal.addEventListener("abort",(()=>{cancelAnimationFrame(hl),cl(Da.c())}))})),getImageData(F,Da=0){return this.getImageCanvasContext(F).getImageData(-Da,-Da,F.width+2*Da,F.height+2*Da)},getImageCanvasContext(F){const Da=window.document.createElement("canvas"),ll=Da.getContext("2d",{willReadFrequently:!0});if(!ll)throw new Error("failed to create canvas 2d context");return Da.width=F.width,Da.height=F.height,ll.drawImage(F,0,0,F.width,F.height),ll},resolveURL:F=>(cl||(cl=document.createElement("a")),cl.href=F,cl.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==hl&&(hl=matchMedia("(prefers-reduced-motion: reduce)")),hl.matches)}};class r{static testProp(F){if(!r.docStyle)return F[0];for(let Da=0;Da<F.length;Da++)if(F[Da]in r.docStyle)return F[Da];return F[0]}static create(F,Da,ll){const cl=window.document.createElement(F);return void 0!==Da&&(cl.className=Da),ll&&ll.appendChild(cl),cl}static createNS(F,Da){return window.document.createElementNS(F,Da)}static disableDrag(){r.docStyle&&r.selectProp&&(r.userSelect=r.docStyle[r.selectProp],r.docStyle[r.selectProp]="none")}static enableDrag(){r.docStyle&&r.selectProp&&(r.docStyle[r.selectProp]=r.userSelect)}static setTransform(F,Da){F.style[r.transformProp]=Da}static addEventListener(F,Da,ll,cl={}){F.addEventListener(Da,ll,"passive"in cl?cl:cl.capture)}static removeEventListener(F,Da,ll,cl={}){F.removeEventListener(Da,ll,"passive"in cl?cl:cl.capture)}static suppressClickInternal(F){F.preventDefault(),F.stopPropagation(),window.removeEventListener("click",r.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",r.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",r.suppressClickInternal,!0)}),0)}static getScale(F){const Da=F.getBoundingClientRect();return{x:Da.width/F.offsetWidth||1,y:Da.height/F.offsetHeight||1,boundingClientRect:Da}}static getPoint(F,ll,cl){const hl=ll.boundingClientRect;return new Da.P((cl.clientX-hl.left)/ll.x-F.clientLeft,(cl.clientY-hl.top)/ll.y-F.clientTop)}static mousePos(F,Da){const ll=r.getScale(F);return r.getPoint(F,ll,Da)}static touchPos(F,Da){const ll=[],cl=r.getScale(F);for(let hl=0;hl<Da.length;hl++)ll.push(r.getPoint(F,cl,Da[hl]));return ll}static mouseButton(F){return F.button}static remove(F){F.parentNode&&F.parentNode.removeChild(F)}}r.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,r.selectProp=r.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),r.transformProp=r.testProp(["transform","WebkitTransform"]);const pl={supported:!1,testSupport:function(F){!bl&&Al&&(kl?d(F):fl=F)}};let fl,Al,bl=!1,kl=!1;function d(F){const Da=F.createTexture();F.bindTexture(F.TEXTURE_2D,Da);try{if(F.texImage2D(F.TEXTURE_2D,0,F.RGBA,F.RGBA,F.UNSIGNED_BYTE,Al),F.isContextLost())return;pl.supported=!0}catch(F){}F.deleteTexture(Da),bl=!0}var Dl;"undefined"!=typeof document&&(Al=document.createElement("img"),Al.onload=()=>{fl&&d(fl),fl=null,kl=!0},Al.onerror=()=>{bl=!0,fl=null},Al.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(F){let ll,cl,hl,dl;F.resetRequestQueue=()=>{ll=[],cl=0,hl=0,dl={}},F.addThrottleControl=F=>{const Da=hl++;return dl[Da]=F,Da},F.removeThrottleControl=F=>{delete dl[F],l()},F.getImage=(F,cl,hl=!0)=>new Promise(((dl,fl)=>{pl.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),Da.e(F,{type:"image"}),ll.push({abortController:cl,requestParameters:F,supportImageRefresh:hl,state:"queued",onError:F=>{fl(F)},onSuccess:F=>{dl(F)}}),l()}));const r=F=>Da._(this,void 0,void 0,(function*(){F.state="running";const{requestParameters:ll,supportImageRefresh:hl,onError:dl,onSuccess:pl,abortController:fl}=F,Al=!1===hl&&!Da.i(self)&&!Da.g(ll.url)&&(!ll.headers||Object.keys(ll.headers).reduce(((F,Da)=>F&&"accept"===Da),!0));cl++;const bl=Al?h(ll,fl):Da.m(ll,fl);try{const ll=yield bl;delete F.abortController,F.state="completed",ll.data instanceof HTMLImageElement||Da.b(ll.data)?pl(ll):ll.data&&pl({data:yield(kl=ll.data,"function"==typeof createImageBitmap?Da.d(kl):Da.f(kl)),cacheControl:ll.cacheControl,expires:ll.expires})}catch(Da){delete F.abortController,dl(Da)}finally{cl--,l()}var kl})),l=()=>{const F=(()=>{for(const F of Object.keys(dl))if(dl[F]())return!0;return!1})()?Da.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:Da.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Da=cl;Da<F&&ll.length>0;Da++){const F=ll.shift();F.abortController.signal.aborted?Da--:r(F)}},h=(F,ll)=>new Promise(((cl,hl)=>{const dl=new Image,pl=F.url,fl=F.credentials;fl&&"include"===fl?dl.crossOrigin="use-credentials":(fl&&"same-origin"===fl||!Da.s(pl))&&(dl.crossOrigin="anonymous"),ll.signal.addEventListener("abort",(()=>{dl.src="",hl(Da.c())})),dl.fetchPriority="high",dl.onload=()=>{dl.onerror=dl.onload=null,cl({data:dl})},dl.onerror=()=>{dl.onerror=dl.onload=null,ll.signal.aborted||hl(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},dl.src=pl}))}(Dl||(Dl={})),Dl.resetRequestQueue();class p{constructor(F){this._transformRequestFn=F}transformRequest(F,Da){return this._transformRequestFn&&this._transformRequestFn(F,Da)||{url:F}}setTransformRequest(F){this._transformRequestFn=F}}function m(F){var ll=new Da.A(3);return ll[0]=F[0],ll[1]=F[1],ll[2]=F[2],ll}var Wl,g=function(F,Da,ll){return F[0]=Da[0]-ll[0],F[1]=Da[1]-ll[1],F[2]=Da[2]-ll[2],F};Wl=new Da.A(3),Da.A!=Float32Array&&(Wl[0]=0,Wl[1]=0,Wl[2]=0);var v=function(F){var Da=F[0],ll=F[1];return Da*Da+ll*ll};function x(F){const Da=[];if("string"==typeof F)Da.push({id:"default",url:F});else if(F&&F.length>0){const ll=[];for(const{id:cl,url:hl}of F){const F=`${cl}${hl}`;-1===ll.indexOf(F)&&(ll.push(F),Da.push({id:cl,url:hl}))}}return Da}function y(F,Da,ll){const cl=F.split("?");return cl[0]+=`${Da}${ll}`,cl.join("?")}!function(){var F=new Da.A(2);Da.A!=Float32Array&&(F[0]=0,F[1]=0)}();class b{constructor(F,Da,ll,cl){this.context=F,this.format=ll,this.texture=F.gl.createTexture(),this.update(Da,cl)}update(F,ll,cl){const{width:hl,height:dl}=F,pl=!(this.size&&this.size[0]===hl&&this.size[1]===dl||cl),{context:fl}=this,{gl:Al}=fl;if(this.useMipmap=Boolean(ll&&ll.useMipmap),Al.bindTexture(Al.TEXTURE_2D,this.texture),fl.pixelStoreUnpackFlipY.set(!1),fl.pixelStoreUnpack.set(1),fl.pixelStoreUnpackPremultiplyAlpha.set(this.format===Al.RGBA&&(!ll||!1!==ll.premultiply)),pl)this.size=[hl,dl],F instanceof HTMLImageElement||F instanceof HTMLCanvasElement||F instanceof HTMLVideoElement||F instanceof ImageData||Da.b(F)?Al.texImage2D(Al.TEXTURE_2D,0,this.format,this.format,Al.UNSIGNED_BYTE,F):Al.texImage2D(Al.TEXTURE_2D,0,this.format,hl,dl,0,this.format,Al.UNSIGNED_BYTE,F.data);else{const{x:ll,y:pl}=cl||{x:0,y:0};F instanceof HTMLImageElement||F instanceof HTMLCanvasElement||F instanceof HTMLVideoElement||F instanceof ImageData||Da.b(F)?Al.texSubImage2D(Al.TEXTURE_2D,0,ll,pl,Al.RGBA,Al.UNSIGNED_BYTE,F):Al.texSubImage2D(Al.TEXTURE_2D,0,ll,pl,hl,dl,Al.RGBA,Al.UNSIGNED_BYTE,F.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Al.generateMipmap(Al.TEXTURE_2D)}bind(F,Da,ll){const{context:cl}=this,{gl:hl}=cl;hl.bindTexture(hl.TEXTURE_2D,this.texture),ll!==hl.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(ll=hl.LINEAR),F!==this.filter&&(hl.texParameteri(hl.TEXTURE_2D,hl.TEXTURE_MAG_FILTER,F),hl.texParameteri(hl.TEXTURE_2D,hl.TEXTURE_MIN_FILTER,ll||F),this.filter=F),Da!==this.wrap&&(hl.texParameteri(hl.TEXTURE_2D,hl.TEXTURE_WRAP_S,Da),hl.texParameteri(hl.TEXTURE_2D,hl.TEXTURE_WRAP_T,Da),this.wrap=Da)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:F}=this.context;F.deleteTexture(this.texture),this.texture=null}}function w(F){const{userImage:Da}=F;return!!(Da&&Da.render&&Da.render())&&(F.data.replace(new Uint8Array(Da.data.buffer)),!0)}class T extends Da.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new Da.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(F){if(this.loaded!==F&&(this.loaded=F,F)){for(const{ids:F,promiseResolve:Da}of this.requestors)Da(this._getImagesForIds(F));this.requestors=[]}}getImage(F){const ll=this.images[F];if(ll&&!ll.data&&ll.spriteData){const F=ll.spriteData;ll.data=new Da.R({width:F.width,height:F.height},F.context.getImageData(F.x,F.y,F.width,F.height).data),ll.spriteData=null}return ll}addImage(F,Da){if(this.images[F])throw new Error(`Image id ${F} already exist, use updateImage instead`);this._validate(F,Da)&&(this.images[F]=Da)}_validate(F,ll){let cl=!0;const hl=ll.data||ll.spriteData;return this._validateStretch(ll.stretchX,hl&&hl.width)||(this.fire(new Da.j(new Error(`Image "${F}" has invalid "stretchX" value`))),cl=!1),this._validateStretch(ll.stretchY,hl&&hl.height)||(this.fire(new Da.j(new Error(`Image "${F}" has invalid "stretchY" value`))),cl=!1),this._validateContent(ll.content,ll)||(this.fire(new Da.j(new Error(`Image "${F}" has invalid "content" value`))),cl=!1),cl}_validateStretch(F,Da){if(!F)return!0;let ll=0;for(const cl of F){if(cl[0]<ll||cl[1]<cl[0]||Da<cl[1])return!1;ll=cl[1]}return!0}_validateContent(F,Da){if(!F)return!0;if(4!==F.length)return!1;const ll=Da.spriteData,cl=ll&&ll.width||Da.data.width,hl=ll&&ll.height||Da.data.height;return!(F[0]<0||cl<F[0]||F[1]<0||hl<F[1]||F[2]<0||cl<F[2]||F[3]<0||hl<F[3]||F[2]<F[0]||F[3]<F[1])}updateImage(F,Da,ll=!0){const cl=this.getImage(F);if(ll&&(cl.data.width!==Da.data.width||cl.data.height!==Da.data.height))throw new Error(`size mismatch between old image (${cl.data.width}x${cl.data.height}) and new image (${Da.data.width}x${Da.data.height}).`);Da.version=cl.version+1,this.images[F]=Da,this.updatedImages[F]=!0}removeImage(F){const Da=this.images[F];delete this.images[F],delete this.patterns[F],Da.userImage&&Da.userImage.onRemove&&Da.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(F){return new Promise(((Da,ll)=>{let cl=!0;if(!this.isLoaded())for(const hl of F)this.images[hl]||(cl=!1);this.isLoaded()||cl?Da(this._getImagesForIds(F)):this.requestors.push({ids:F,promiseResolve:Da})}))}_getImagesForIds(F){const ll={};for(const cl of F){let F=this.getImage(cl);F||(this.fire(new Da.k("styleimagemissing",{id:cl})),F=this.getImage(cl)),F?ll[cl]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,textFitWidth:F.textFitWidth,textFitHeight:F.textFitHeight,hasRenderCallback:Boolean(F.userImage&&F.userImage.render)}:Da.w(`Image "${cl}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return ll}getPixelSize(){const{width:F,height:Da}=this.atlasImage;return{width:F,height:Da}}getPattern(F){const ll=this.patterns[F],cl=this.getImage(F);if(!cl)return null;if(ll&&ll.position.version===cl.version)return ll.position;if(ll)ll.position.version=cl.version;else{const ll={w:cl.data.width+2,h:cl.data.height+2,x:0,y:0},hl=new Da.I(ll,cl);this.patterns[F]={bin:ll,position:hl}}return this._updatePatternAtlas(),this.patterns[F].position}bind(F){const Da=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b(F,this.atlasImage,Da.RGBA),this.atlasTexture.bind(Da.LINEAR,Da.CLAMP_TO_EDGE)}_updatePatternAtlas(){const F=[];for(const Da in this.patterns)F.push(this.patterns[Da].bin);const{w:ll,h:cl}=Da.p(F),hl=this.atlasImage;hl.resize({width:ll||1,height:cl||1});for(const dl in this.patterns){const{bin:F}=this.patterns[dl],ll=F.x+1,cl=F.y+1,pl=this.getImage(dl).data,fl=pl.width,Al=pl.height;Da.R.copy(pl,hl,{x:0,y:0},{x:ll,y:cl},{width:fl,height:Al}),Da.R.copy(pl,hl,{x:0,y:Al-1},{x:ll,y:cl-1},{width:fl,height:1}),Da.R.copy(pl,hl,{x:0,y:0},{x:ll,y:cl+Al},{width:fl,height:1}),Da.R.copy(pl,hl,{x:fl-1,y:0},{x:ll-1,y:cl},{width:1,height:Al}),Da.R.copy(pl,hl,{x:0,y:0},{x:ll+fl,y:cl},{width:1,height:Al})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(F){for(const ll of F){if(this.callbackDispatchedThisFrame[ll])continue;this.callbackDispatchedThisFrame[ll]=!0;const F=this.getImage(ll);F||Da.w(`Image with ID: "${ll}" was not found`),w(F)&&this.updateImage(ll,F)}}}const Ql=1e20;function E(F,Da,ll,cl,hl,dl,pl,fl,Al){for(let bl=Da;bl<Da+cl;bl++)P(F,ll*dl+bl,dl,hl,pl,fl,Al);for(let bl=ll;bl<ll+hl;bl++)P(F,bl*dl+Da,1,cl,pl,fl,Al)}function P(F,Da,ll,cl,hl,dl,pl){dl[0]=0,pl[0]=-Ql,pl[1]=Ql,hl[0]=F[Da];for(let fl=1,Al=0,bl=0;fl<cl;fl++){hl[fl]=F[Da+fl*ll];const cl=fl*fl;do{const F=dl[Al];bl=(hl[fl]-hl[F]+cl-F*F)/(fl-F)/2}while(bl<=pl[Al]&&--Al>-1);Al++,dl[Al]=fl,pl[Al]=bl,pl[Al+1]=Ql}for(let fl=0,Al=0;fl<cl;fl++){for(;pl[Al+1]<fl;)Al++;const cl=dl[Al],bl=fl-cl;F[Da+fl*ll]=hl[cl]+bl*bl}}class C{constructor(F,Da){this.requestManager=F,this.localIdeographFontFamily=Da,this.entries={}}setURL(F){this.url=F}getGlyphs(F){return Da._(this,void 0,void 0,(function*(){const Da=[];for(const hl in F)for(const ll of F[hl])Da.push(this._getAndCacheGlyphsPromise(hl,ll));const ll=yield Promise.all(Da),cl={};for(const{stack:F,id:hl,glyph:dl}of ll)cl[F]||(cl[F]={}),cl[F][hl]=dl&&{id:dl.id,bitmap:dl.bitmap.clone(),metrics:dl.metrics};return cl}))}_getAndCacheGlyphsPromise(F,ll){return Da._(this,void 0,void 0,(function*(){let Da=this.entries[F];Da||(Da=this.entries[F]={glyphs:{},requests:{},ranges:{}});let cl=Da.glyphs[ll];if(void 0!==cl)return{stack:F,id:ll,glyph:cl};if(cl=this._tinySDF(Da,F,ll),cl)return Da.glyphs[ll]=cl,{stack:F,id:ll,glyph:cl};const hl=Math.floor(ll/256);if(256*hl>65535)throw new Error("glyphs > 65535 not supported");if(Da.ranges[hl])return{stack:F,id:ll,glyph:cl};if(!this.url)throw new Error("glyphsUrl is not set");if(!Da.requests[hl]){const ll=C.loadGlyphRange(F,hl,this.url,this.requestManager);Da.requests[hl]=ll}const dl=yield Da.requests[hl];for(const F in dl)this._doesCharSupportLocalGlyph(+F)||(Da.glyphs[+F]=dl[+F]);return Da.ranges[hl]=!0,{stack:F,id:ll,glyph:dl[ll]||null}}))}_doesCharSupportLocalGlyph(F){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(F))}_tinySDF(F,ll,cl){const hl=this.localIdeographFontFamily;if(!hl)return;if(!this._doesCharSupportLocalGlyph(cl))return;let dl=F.tinySDF;if(!dl){let Da="400";/bold/i.test(ll)?Da="900":/medium/i.test(ll)?Da="500":/light/i.test(ll)&&(Da="200"),dl=F.tinySDF=new C.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:hl,fontWeight:Da})}const pl=dl.draw(String.fromCharCode(cl));return{id:cl,bitmap:new Da.o({width:pl.width||60,height:pl.height||60},pl.data),metrics:{width:pl.glyphWidth/2||24,height:pl.glyphHeight/2||24,left:pl.glyphLeft/2+.5||0,top:pl.glyphTop/2-27.5||-8,advance:pl.glyphAdvance/2||24,isDoubleResolution:!0}}}}C.loadGlyphRange=function(F,ll,cl,hl){return Da._(this,void 0,void 0,(function*(){const dl=256*ll,pl=dl+255,fl=hl.transformRequest(cl.replace("{fontstack}",F).replace("{range}",`${dl}-${pl}`),"Glyphs"),Al=yield Da.l(fl,new AbortController);if(!Al||!Al.data)throw new Error(`Could not load glyph range. range: ${ll}, ${dl}-${pl}`);const bl={};for(const F of Da.n(Al.data))bl[F.id]=F;return bl}))},C.TinySDF=class{constructor({fontSize:F=24,buffer:Da=3,radius:ll=8,cutoff:cl=.25,fontFamily:hl="sans-serif",fontWeight:dl="normal",fontStyle:pl="normal"}={}){this.buffer=Da,this.cutoff=cl,this.radius=ll;const fl=this.size=F+4*Da,Al=this._createCanvas(fl),bl=this.ctx=Al.getContext("2d",{willReadFrequently:!0});bl.font=`${pl} ${dl} ${F}px ${hl}`,bl.textBaseline="alphabetic",bl.textAlign="left",bl.fillStyle="black",this.gridOuter=new Float64Array(fl*fl),this.gridInner=new Float64Array(fl*fl),this.f=new Float64Array(fl),this.z=new Float64Array(fl+1),this.v=new Uint16Array(fl)}_createCanvas(F){const Da=document.createElement("canvas");return Da.width=Da.height=F,Da}draw(F){const{width:Da,actualBoundingBoxAscent:ll,actualBoundingBoxDescent:cl,actualBoundingBoxLeft:hl,actualBoundingBoxRight:dl}=this.ctx.measureText(F),pl=Math.ceil(ll),fl=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(dl-hl))),Al=Math.min(this.size-this.buffer,pl+Math.ceil(cl)),bl=fl+2*this.buffer,kl=Al+2*this.buffer,Dl=Math.max(bl*kl,0),Wl=new Uint8ClampedArray(Dl),wc={data:Wl,width:bl,height:kl,glyphWidth:fl,glyphHeight:Al,glyphTop:pl,glyphLeft:0,glyphAdvance:Da};if(0===fl||0===Al)return wc;const{ctx:Sc,buffer:eu,gridInner:iu,gridOuter:su}=this;Sc.clearRect(eu,eu,fl,Al),Sc.fillText(F,eu,eu+pl);const cu=Sc.getImageData(eu,eu,fl,Al);su.fill(Ql,0,Dl),iu.fill(0,0,Dl);for(let uu=0;uu<Al;uu++)for(let F=0;F<fl;F++){const Da=cu.data[4*(uu*fl+F)+3]/255;if(0===Da)continue;const ll=(uu+eu)*bl+F+eu;if(1===Da)su[ll]=0,iu[ll]=Ql;else{const F=.5-Da;su[ll]=F>0?F*F:0,iu[ll]=F<0?F*F:0}}E(su,0,0,bl,kl,bl,this.f,this.v,this.z),E(iu,eu,eu,fl,Al,bl,this.f,this.v,this.z);for(let Ql=0;Ql<Dl;Ql++){const F=Math.sqrt(su[Ql])-Math.sqrt(iu[Ql]);Wl[Ql]=Math.round(255-255*(F/this.radius+this.cutoff))}return wc}};class S{constructor(){this.specification=Da.v.light.position}possiblyEvaluate(F,ll){return Da.x(F.expression.evaluate(ll))}interpolate(F,ll,cl){return{x:Da.y.number(F.x,ll.x,cl),y:Da.y.number(F.y,ll.y,cl),z:Da.y.number(F.z,ll.z,cl)}}}let wc;class D extends Da.E{constructor(F){super(),wc=wc||new Da.q({anchor:new Da.D(Da.v.light.anchor),position:new S,color:new Da.D(Da.v.light.color),intensity:new Da.D(Da.v.light.intensity)}),this._transitionable=new Da.T(wc),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(F,ll={}){if(!this._validate(Da.r,F,ll))for(const Da in F){const ll=F[Da];Da.endsWith("-transition")?this._transitionable.setTransition(Da.slice(0,-11),ll):this._transitionable.setValue(Da,ll)}}updateTransitions(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(F){this.properties=this._transitioning.possiblyEvaluate(F)}_validate(F,ll,cl){return(!cl||!1!==cl.validate)&&Da.t(this,F.call(Da.u,{value:ll,style:{glyphs:!0,sprite:!0},styleSpec:Da.v}))}}const Sc=new Da.q({"sky-color":new Da.D(Da.v.sky["sky-color"]),"horizon-color":new Da.D(Da.v.sky["horizon-color"]),"fog-color":new Da.D(Da.v.sky["fog-color"]),"fog-ground-blend":new Da.D(Da.v.sky["fog-ground-blend"]),"horizon-fog-blend":new Da.D(Da.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new Da.D(Da.v.sky["sky-horizon-blend"]),"atmosphere-blend":new Da.D(Da.v.sky["atmosphere-blend"])});class A extends Da.E{constructor(F){super(),this._transitionable=new Da.T(Sc),this.setSky(F),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new Da.z(0))}setSky(F,ll={}){if(!this._validate(Da.B,F,ll)){F||(F={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const Da in F){const ll=F[Da];Da.endsWith("-transition")?this._transitionable.setTransition(Da.slice(0,-11),ll):this._transitionable.setValue(Da,ll)}}}getSky(){return this._transitionable.serialize()}updateTransitions(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(F){this.properties=this._transitioning.possiblyEvaluate(F)}_validate(F,ll,cl={}){return!1!==(null==cl?void 0:cl.validate)&&Da.t(this,F.call(Da.u,Da.e({value:ll,style:{glyphs:!0,sprite:!0},styleSpec:Da.v})))}calculateFogBlendOpacity(F){return F<60?0:F<70?(F-60)/10:1}}class R{constructor(F,Da){this.width=F,this.height=Da,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(F,Da){const ll=F.join(",")+String(Da);return this.dashEntry[ll]||(this.dashEntry[ll]=this.addDash(F,Da)),this.dashEntry[ll]}getDashRanges(F,Da,ll){const cl=[];let hl=F.length%2==1?-F[F.length-1]*ll:0,dl=F[0]*ll,pl=!0;cl.push({left:hl,right:dl,isDash:pl,zeroLength:0===F[0]});let fl=F[0];for(let Al=1;Al<F.length;Al++){pl=!pl;const Da=F[Al];hl=fl*ll,fl+=Da,dl=fl*ll,cl.push({left:hl,right:dl,isDash:pl,zeroLength:0===Da})}return cl}addRoundDash(F,Da,ll){const cl=Da/2;for(let hl=-ll;hl<=ll;hl++){const Da=this.width*(this.nextRow+ll+hl);let dl=0,pl=F[dl];for(let fl=0;fl<this.width;fl++){fl/pl.right>1&&(pl=F[++dl]);const Al=Math.abs(fl-pl.left),bl=Math.abs(fl-pl.right),kl=Math.min(Al,bl);let Dl;const Wl=hl/ll*(cl+1);if(pl.isDash){const F=cl-Math.abs(Wl);Dl=Math.sqrt(kl*kl+F*F)}else Dl=cl-Math.sqrt(kl*kl+Wl*Wl);this.data[Da+fl]=Math.max(0,Math.min(255,Dl+128))}}}addRegularDash(F){for(let pl=F.length-1;pl>=0;--pl){const Da=F[pl],ll=F[pl+1];Da.zeroLength?F.splice(pl,1):ll&&ll.isDash===Da.isDash&&(ll.left=Da.left,F.splice(pl,1))}const Da=F[0],ll=F[F.length-1];Da.isDash===ll.isDash&&(Da.left=ll.left-this.width,ll.right=Da.right+this.width);const cl=this.width*this.nextRow;let hl=0,dl=F[hl];for(let pl=0;pl<this.width;pl++){pl/dl.right>1&&(dl=F[++hl]);const Da=Math.abs(pl-dl.left),ll=Math.abs(pl-dl.right),fl=Math.min(Da,ll);this.data[cl+pl]=Math.max(0,Math.min(255,(dl.isDash?fl:-fl)+128))}}addDash(F,ll){const cl=ll?7:0,hl=2*cl+1;if(this.nextRow+hl>this.height)return Da.w("LineAtlas out of space"),null;let dl=0;for(let Da=0;Da<F.length;Da++)dl+=F[Da];if(0!==dl){const Da=this.width/dl,hl=this.getDashRanges(F,this.width,Da);ll?this.addRoundDash(hl,Da,cl):this.addRegularDash(hl)}const pl={y:(this.nextRow+cl+.5)/this.height,height:2*cl/this.height,width:dl};return this.nextRow+=hl,this.dirty=!0,pl}bind(F){const Da=F.gl;this.texture?(Da.bindTexture(Da.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Da.texSubImage2D(Da.TEXTURE_2D,0,0,0,this.width,this.height,Da.ALPHA,Da.UNSIGNED_BYTE,this.data))):(this.texture=Da.createTexture(),Da.bindTexture(Da.TEXTURE_2D,this.texture),Da.texParameteri(Da.TEXTURE_2D,Da.TEXTURE_WRAP_S,Da.REPEAT),Da.texParameteri(Da.TEXTURE_2D,Da.TEXTURE_WRAP_T,Da.REPEAT),Da.texParameteri(Da.TEXTURE_2D,Da.TEXTURE_MIN_FILTER,Da.LINEAR),Da.texParameteri(Da.TEXTURE_2D,Da.TEXTURE_MAG_FILTER,Da.LINEAR),Da.texImage2D(Da.TEXTURE_2D,0,Da.ALPHA,this.width,this.height,0,Da.ALPHA,Da.UNSIGNED_BYTE,this.data))}}const eu="maplibre_preloaded_worker_pool";class L{constructor(){this.active={}}acquire(F){if(!this.workers)for(this.workers=[];this.workers.length<L.workerCount;)this.workers.push(new Worker(Da.a.WORKER_URL));return this.active[F]=!0,this.workers.slice()}release(F){delete this.active[F],0===this.numActive()&&(this.workers.forEach((F=>{F.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[eu]}numActive(){return Object.keys(this.active).length}}const iu=Math.floor(dl.hardwareConcurrency/2);let su,cu;function N(){return su||(su=new L),su}L.workerCount=Da.C(globalThis)?Math.max(Math.min(iu,3),1):1;class U{constructor(F,ll){this.workerPool=F,this.actors=[],this.currentActor=0,this.id=ll;const cl=this.workerPool.acquire(ll);for(let hl=0;hl<cl.length;hl++){const F=new Da.F(cl[hl],ll);F.name=`Worker ${hl}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(F,Da){const ll=[];for(const cl of this.actors)ll.push(cl.sendAsync({type:F,data:Da}));return Promise.all(ll)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(F=!0){this.actors.forEach((F=>{F.remove()})),this.actors=[],F&&this.workerPool.release(this.id)}registerMessageHandler(F,Da){for(const ll of this.actors)ll.registerMessageHandler(F,Da)}}function j(){return cu||(cu=new U(N(),Da.G),cu.registerMessageHandler("GR",((F,ll,cl)=>Da.m(ll,cl)))),cu}function Z(F,ll){const cl=Da.H();return Da.J(cl,cl,[1,1,0]),Da.K(cl,cl,[.5*F.width,.5*F.height,1]),Da.L(cl,cl,F.calculatePosMatrix(ll.toUnwrapped()))}function q(F,Da,ll,cl,hl,dl){const pl=function(F,Da,ll){if(F)for(const cl of F){const F=Da[cl];if(F&&F.source===ll&&"fill-extrusion"===F.type)return!0}else for(const cl in Da){const F=Da[cl];if(F.source===ll&&"fill-extrusion"===F.type)return!0}return!1}(hl&&hl.layers,Da,F.id),fl=dl.maxPitchScaleFactor(),Al=F.tilesIn(cl,fl,pl);Al.sort(V);const bl=[];for(const Dl of Al)bl.push({wrappedTileID:Dl.tileID.wrapped().key,queryResults:Dl.tile.queryRenderedFeatures(Da,ll,F._state,Dl.queryGeometry,Dl.cameraQueryGeometry,Dl.scale,hl,dl,fl,Z(F.transform,Dl.tileID))});const kl=function(F){const Da={},ll={};for(const cl of F){const F=cl.queryResults,hl=cl.wrappedTileID,dl=ll[hl]=ll[hl]||{};for(const ll in F){const cl=F[ll],hl=dl[ll]=dl[ll]||{},pl=Da[ll]=Da[ll]||[];for(const F of cl)hl[F.featureIndex]||(hl[F.featureIndex]=!0,pl.push(F))}}return Da}(bl);for(const Dl in kl)kl[Dl].forEach((Da=>{const ll=Da.feature,cl=F.getFeatureState(ll.layer["source-layer"],ll.id);ll.source=ll.layer.source,ll.layer["source-layer"]&&(ll.sourceLayer=ll.layer["source-layer"]),ll.state=cl}));return kl}function V(F,Da){const ll=F.tileID,cl=Da.tileID;return ll.overscaledZ-cl.overscaledZ||ll.canonical.y-cl.canonical.y||ll.wrap-cl.wrap||ll.canonical.x-cl.canonical.x}function G(F,ll,cl){return Da._(this,void 0,void 0,(function*(){let hl=F;if(F.url?hl=(yield Da.h(ll.transformRequest(F.url,"Source"),cl)).data:yield dl.frameAsync(cl),!hl)return null;const pl=Da.M(Da.e(hl,F),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in hl&&hl.vector_layers&&(pl.vectorLayerIds=hl.vector_layers.map((F=>F.id))),pl}))}class H{constructor(F,Da){F&&(Da?this.setSouthWest(F).setNorthEast(Da):Array.isArray(F)&&(4===F.length?this.setSouthWest([F[0],F[1]]).setNorthEast([F[2],F[3]]):this.setSouthWest(F[0]).setNorthEast(F[1])))}setNorthEast(F){return this._ne=F instanceof Da.N?new Da.N(F.lng,F.lat):Da.N.convert(F),this}setSouthWest(F){return this._sw=F instanceof Da.N?new Da.N(F.lng,F.lat):Da.N.convert(F),this}extend(F){const ll=this._sw,cl=this._ne;let hl,dl;if(F instanceof Da.N)hl=F,dl=F;else{if(!(F instanceof H))return Array.isArray(F)?4===F.length||F.every(Array.isArray)?this.extend(H.convert(F)):this.extend(Da.N.convert(F)):F&&("lng"in F||"lon"in F)&&"lat"in F?this.extend(Da.N.convert(F)):this;if(hl=F._sw,dl=F._ne,!hl||!dl)return this}return ll||cl?(ll.lng=Math.min(hl.lng,ll.lng),ll.lat=Math.min(hl.lat,ll.lat),cl.lng=Math.max(dl.lng,cl.lng),cl.lat=Math.max(dl.lat,cl.lat)):(this._sw=new Da.N(hl.lng,hl.lat),this._ne=new Da.N(dl.lng,dl.lat)),this}getCenter(){return new Da.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Da.N(this.getWest(),this.getNorth())}getSouthEast(){return new Da.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(F){const{lng:ll,lat:cl}=Da.N.convert(F);let hl=this._sw.lng<=ll&&ll<=this._ne.lng;return this._sw.lng>this._ne.lng&&(hl=this._sw.lng>=ll&&ll>=this._ne.lng),this._sw.lat<=cl&&cl<=this._ne.lat&&hl}static convert(F){return F instanceof H?F:F?new H(F):F}static fromLngLat(F,ll=0){const cl=360*ll/40075017,hl=cl/Math.cos(Math.PI/180*F.lat);return new H(new Da.N(F.lng-hl,F.lat-cl),new Da.N(F.lng+hl,F.lat+cl))}adjustAntiMeridian(){const F=new Da.N(this._sw.lng,this._sw.lat),ll=new Da.N(this._ne.lng,this._ne.lat);return new H(F,F.lng>ll.lng?new Da.N(ll.lng+360,ll.lat):ll)}}class W{constructor(F,Da,ll){this.bounds=H.convert(this.validateBounds(F)),this.minzoom=Da||0,this.maxzoom=ll||24}validateBounds(F){return Array.isArray(F)&&4===F.length?[Math.max(-180,F[0]),Math.max(-90,F[1]),Math.min(180,F[2]),Math.min(90,F[3])]:[-180,-90,180,90]}contains(F){const ll=Math.pow(2,F.z),cl=Math.floor(Da.O(this.bounds.getWest())*ll),hl=Math.floor(Da.Q(this.bounds.getNorth())*ll),dl=Math.ceil(Da.O(this.bounds.getEast())*ll),pl=Math.ceil(Da.Q(this.bounds.getSouth())*ll);return F.x>=cl&&F.x<dl&&F.y>=hl&&F.y<pl}}class $ extends Da.E{constructor(F,ll,cl,hl){if(super(),this.id=F,this.dispatcher=cl,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,Da.e(this,Da.M(ll,["url","scheme","tileSize","promoteId"])),this._options=Da.e({type:"vector"},ll),this._collectResourceTiming=ll.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(hl)}load(){return Da._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new Da.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const F=yield G(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),F&&(Da.e(this,F),F.bounds&&(this.tileBounds=new W(F.bounds,this.minzoom,this.maxzoom)),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"content"})))}catch(F){this._tileJSONRequest=null,this.fire(new Da.j(F))}}))}loaded(){return this._loaded}hasTile(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)}onAdd(F){this.map=F,this.load()}setSourceProperty(F){this._tileJSONRequest&&this._tileJSONRequest.abort(),F(),this.load()}setTiles(F){return this.setSourceProperty((()=>{this._options.tiles=F})),this}setUrl(F){return this.setSourceProperty((()=>{this.url=F,this._options.url=F})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return Da.e({},this._options)}loadTile(F){return Da._(this,void 0,void 0,(function*(){const Da=F.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),ll={request:this.map._requestManager.transformRequest(Da,"Tile"),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};ll.request.collectResourceTiming=this._collectResourceTiming;let cl="RT";if(F.actor&&"expired"!==F.state){if("loading"===F.state)return new Promise(((Da,ll)=>{F.reloadPromise={resolve:Da,reject:ll}}))}else F.actor=this.dispatcher.getActor(),cl="LT";F.abortController=new AbortController;try{const Da=yield F.actor.sendAsync({type:cl,data:ll},F.abortController);if(delete F.abortController,F.aborted)return;this._afterTileLoadWorkerResponse(F,Da)}catch(Da){if(delete F.abortController,F.aborted)return;if(Da&&404!==Da.status)throw Da;this._afterTileLoadWorkerResponse(F,null)}}))}_afterTileLoadWorkerResponse(F,Da){if(Da&&Da.resourceTiming&&(F.resourceTiming=Da.resourceTiming),Da&&this.map._refreshExpiredTiles&&F.setExpiryData(Da),F.loadVectorData(Da,this.map.painter),F.reloadPromise){const Da=F.reloadPromise;F.reloadPromise=null,this.loadTile(F).then(Da.resolve).catch(Da.reject)}}abortTile(F){return Da._(this,void 0,void 0,(function*(){F.abortController&&(F.abortController.abort(),delete F.abortController),F.actor&&(yield F.actor.sendAsync({type:"AT",data:{uid:F.uid,type:this.type,source:this.id}}))}))}unloadTile(F){return Da._(this,void 0,void 0,(function*(){F.unloadVectorData(),F.actor&&(yield F.actor.sendAsync({type:"RMT",data:{uid:F.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class X extends Da.E{constructor(F,ll,cl,hl){super(),this.id=F,this.dispatcher=cl,this.setEventedParent(hl),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=Da.e({type:"raster"},ll),Da.e(this,Da.M(ll,["url","scheme","tileSize"]))}load(){return Da._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new Da.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const F=yield G(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,F&&(Da.e(this,F),F.bounds&&(this.tileBounds=new W(F.bounds,this.minzoom,this.maxzoom)),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"content"})))}catch(F){this._tileJSONRequest=null,this.fire(new Da.j(F))}}))}loaded(){return this._loaded}onAdd(F){this.map=F,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(F){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),F(),this.load()}setTiles(F){return this.setSourceProperty((()=>{this._options.tiles=F})),this}setUrl(F){return this.setSourceProperty((()=>{this.url=F,this._options.url=F})),this}serialize(){return Da.e({},this._options)}hasTile(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)}loadTile(F){return Da._(this,void 0,void 0,(function*(){const Da=F.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);F.abortController=new AbortController;try{const ll=yield Dl.getImage(this.map._requestManager.transformRequest(Da,"Tile"),F.abortController,this.map._refreshExpiredTiles);if(delete F.abortController,F.aborted)return void(F.state="unloaded");if(ll&&ll.data){this.map._refreshExpiredTiles&&ll.cacheControl&&ll.expires&&F.setExpiryData({cacheControl:ll.cacheControl,expires:ll.expires});const Da=this.map.painter.context,cl=Da.gl,hl=ll.data;F.texture=this.map.painter.getTileTexture(hl.width),F.texture?F.texture.update(hl,{useMipmap:!0}):(F.texture=new b(Da,hl,cl.RGBA,{useMipmap:!0}),F.texture.bind(cl.LINEAR,cl.CLAMP_TO_EDGE,cl.LINEAR_MIPMAP_NEAREST)),F.state="loaded"}}catch(Da){if(delete F.abortController,F.aborted)F.state="unloaded";else if(Da)throw F.state="errored",Da}}))}abortTile(F){return Da._(this,void 0,void 0,(function*(){F.abortController&&(F.abortController.abort(),delete F.abortController)}))}unloadTile(F){return Da._(this,void 0,void 0,(function*(){F.texture&&this.map.painter.saveTileTexture(F.texture)}))}hasTransition(){return!1}}class K extends X{constructor(F,ll,cl,hl){super(F,ll,cl,hl),this.type="raster-dem",this.maxzoom=22,this._options=Da.e({type:"raster-dem"},ll),this.encoding=ll.encoding||"mapbox",this.redFactor=ll.redFactor,this.greenFactor=ll.greenFactor,this.blueFactor=ll.blueFactor,this.baseShift=ll.baseShift}loadTile(F){return Da._(this,void 0,void 0,(function*(){const ll=F.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),cl=this.map._requestManager.transformRequest(ll,"Tile");F.neighboringTiles=this._getNeighboringTiles(F.tileID),F.abortController=new AbortController;try{const ll=yield Dl.getImage(cl,F.abortController,this.map._refreshExpiredTiles);if(delete F.abortController,F.aborted)return void(F.state="unloaded");if(ll&&ll.data){const cl=ll.data;this.map._refreshExpiredTiles&&ll.cacheControl&&ll.expires&&F.setExpiryData({cacheControl:ll.cacheControl,expires:ll.expires});const hl=Da.b(cl)&&Da.U()?cl:yield this.readImageNow(cl),dl={type:this.type,uid:F.uid,source:this.id,rawImageData:hl,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!F.actor||"expired"===F.state){F.actor=this.dispatcher.getActor();const Da=yield F.actor.sendAsync({type:"LDT",data:dl});F.dem=Da,F.needsHillshadePrepare=!0,F.needsTerrainPrepare=!0,F.state="loaded"}}}catch(Da){if(delete F.abortController,F.aborted)F.state="unloaded";else if(Da)throw F.state="errored",Da}}))}readImageNow(F){return Da._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&Da.V()){const ll=F.width+2,cl=F.height+2;try{return new Da.R({width:ll,height:cl},yield Da.W(F,-1,-1,ll,cl))}catch(F){}}return dl.getImageData(F,1)}))}_getNeighboringTiles(F){const ll=F.canonical,cl=Math.pow(2,ll.z),hl=(ll.x-1+cl)%cl,dl=0===ll.x?F.wrap-1:F.wrap,pl=(ll.x+1+cl)%cl,fl=ll.x+1===cl?F.wrap+1:F.wrap,Al={};return Al[new Da.S(F.overscaledZ,dl,ll.z,hl,ll.y).key]={backfilled:!1},Al[new Da.S(F.overscaledZ,fl,ll.z,pl,ll.y).key]={backfilled:!1},ll.y>0&&(Al[new Da.S(F.overscaledZ,dl,ll.z,hl,ll.y-1).key]={backfilled:!1},Al[new Da.S(F.overscaledZ,F.wrap,ll.z,ll.x,ll.y-1).key]={backfilled:!1},Al[new Da.S(F.overscaledZ,fl,ll.z,pl,ll.y-1).key]={backfilled:!1}),ll.y+1<cl&&(Al[new Da.S(F.overscaledZ,dl,ll.z,hl,ll.y+1).key]={backfilled:!1},Al[new Da.S(F.overscaledZ,F.wrap,ll.z,ll.x,ll.y+1).key]={backfilled:!1},Al[new Da.S(F.overscaledZ,fl,ll.z,pl,ll.y+1).key]={backfilled:!1}),Al}unloadTile(F){return Da._(this,void 0,void 0,(function*(){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&(yield F.actor.sendAsync({type:"RDT",data:{type:this.type,uid:F.uid,source:this.id}}))}))}}class J extends Da.E{constructor(F,ll,cl,hl){super(),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=cl.getActor(),this.setEventedParent(hl),this._data=ll.data,this._options=Da.e({},ll),this._collectResourceTiming=ll.collectResourceTiming,void 0!==ll.maxzoom&&(this.maxzoom=ll.maxzoom),ll.type&&(this.type=ll.type),ll.attribution&&(this.attribution=ll.attribution),this.promoteId=ll.promoteId;const dl=Da.X/this.tileSize;void 0!==ll.clusterMaxZoom&&this.maxzoom<=ll.clusterMaxZoom&&Da.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${ll.clusterMaxZoom}".`),this.workerOptions=Da.e({source:this.id,cluster:ll.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ll.buffer?ll.buffer:128)*dl,tolerance:(void 0!==ll.tolerance?ll.tolerance:.375)*dl,extent:Da.X,maxZoom:this.maxzoom,lineMetrics:ll.lineMetrics||!1,generateId:ll.generateId||!1},superclusterOptions:{maxZoom:void 0!==ll.clusterMaxZoom?ll.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,ll.clusterMinPoints||2),extent:Da.X,radius:(ll.clusterRadius||50)*dl,log:!1,generateId:ll.generateId||!1},clusterProperties:ll.clusterProperties,filter:ll.filter},ll.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return Da._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(F){this.map=F,this.load()}setData(F){return this._data=F,this._updateWorkerData(),this}updateData(F){return this._updateWorkerData(F),this}getData(){return Da._(this,void 0,void 0,(function*(){const F=Da.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:F})}))}setClusterOptions(F){return this.workerOptions.cluster=F.cluster,F&&(void 0!==F.clusterRadius&&(this.workerOptions.superclusterOptions.radius=F.clusterRadius),void 0!==F.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=F.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(F){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:F,source:this.id}})}getClusterChildren(F){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:F,source:this.id}})}getClusterLeaves(F,Da,ll){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:F,limit:Da,offset:ll}})}_updateWorkerData(F){return Da._(this,void 0,void 0,(function*(){const ll=Da.e({type:this.type},this.workerOptions);F?ll.dataDiff=F:"string"==typeof this._data?(ll.request=this.map._requestManager.transformRequest(dl.resolveURL(this._data),"Source"),ll.request.collectResourceTiming=this._collectResourceTiming):ll.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new Da.k("dataloading",{dataType:"source"}));try{const F=yield this.actor.sendAsync({type:"LD",data:ll});if(this._pendingLoads--,this._removed||F.abandoned)return void this.fire(new Da.k("dataabort",{dataType:"source"}));let cl=null;F.resourceTiming&&F.resourceTiming[this.id]&&(cl=F.resourceTiming[this.id].slice(0));const hl={dataType:"source"};this._collectResourceTiming&&cl&&cl.length>0&&Da.e(hl,{resourceTiming:cl}),this.fire(new Da.k("data",Object.assign(Object.assign({},hl),{sourceDataType:"metadata"}))),this.fire(new Da.k("data",Object.assign(Object.assign({},hl),{sourceDataType:"content"})))}catch(F){if(this._pendingLoads--,this._removed)return void this.fire(new Da.k("dataabort",{dataType:"source"}));this.fire(new Da.j(F))}}))}loaded(){return 0===this._pendingLoads}loadTile(F){return Da._(this,void 0,void 0,(function*(){const Da=F.actor?"RT":"LT";F.actor=this.actor;const ll={type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};F.abortController=new AbortController;const cl=yield this.actor.sendAsync({type:Da,data:ll},F.abortController);delete F.abortController,F.unloadVectorData(),F.aborted||F.loadVectorData(cl,this.map.painter,"RT"===Da)}))}abortTile(F){return Da._(this,void 0,void 0,(function*(){F.abortController&&(F.abortController.abort(),delete F.abortController),F.aborted=!0}))}unloadTile(F){return Da._(this,void 0,void 0,(function*(){F.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:F.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return Da.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var uu=Da.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Q extends Da.E{constructor(F,Da,ll,cl){super(),this.id=F,this.dispatcher=ll,this.coordinates=Da.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(cl),this.options=Da}load(F){return Da._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new Da.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const Da=yield Dl.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,Da&&Da.data&&(this.image=Da.data,F&&(this.coordinates=F),this._finishLoading())}catch(F){this._request=null,this._loaded=!0,this.fire(new Da.j(F))}}))}loaded(){return this._loaded}updateImage(F){return F.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=F.url,this.load(F.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(F){this.map=F,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(F){this.coordinates=F;const ll=F.map(Da.Z.fromLngLat);this.tileID=function(F){let ll=1/0,cl=1/0,hl=-1/0,dl=-1/0;for(const Da of F)ll=Math.min(ll,Da.x),cl=Math.min(cl,Da.y),hl=Math.max(hl,Da.x),dl=Math.max(dl,Da.y);const pl=Math.max(hl-ll,dl-cl),fl=Math.max(0,Math.floor(-Math.log(pl)/Math.LN2)),Al=Math.pow(2,fl);return new Da.a1(fl,Math.floor((ll+hl)/2*Al),Math.floor((cl+dl)/2*Al))}(ll),this.minzoom=this.maxzoom=this.tileID.z;const cl=ll.map((F=>this.tileID.getTilePoint(F)._round()));return this._boundsArray=new Da.$,this._boundsArray.emplaceBack(cl[0].x,cl[0].y,0,0),this._boundsArray.emplaceBack(cl[1].x,cl[1].y,Da.X,0),this._boundsArray.emplaceBack(cl[3].x,cl[3].y,0,Da.X),this._boundsArray.emplaceBack(cl[2].x,cl[2].y,Da.X,Da.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new Da.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const F=this.map.painter.context,ll=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,uu.members)),this.boundsSegments||(this.boundsSegments=Da.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b(F,this.image,ll.RGBA),this.texture.bind(ll.LINEAR,ll.CLAMP_TO_EDGE));let cl=!1;for(const Da in this.tiles){const F=this.tiles[Da];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture,cl=!0)}cl&&this.fire(new Da.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(F){return Da._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={}):F.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class tt extends Q{constructor(F,Da,ll,cl){super(F,Da,ll,cl),this.roundZoom=!0,this.type="video",this.options=Da}load(){return Da._(this,void 0,void 0,(function*(){this._loaded=!1;const F=this.options;this.urls=[];for(const Da of F.urls)this.urls.push(this.map._requestManager.transformRequest(Da,"Source").url);try{const F=yield Da.a3(this.urls);if(this._loaded=!0,!F)return;this.video=F,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(F){this.fire(new Da.j(F))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(F){if(this.video){const ll=this.video.seekable;F<ll.start(0)||F>ll.end(0)?this.fire(new Da.j(new Da.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ll.start(0)} and ${ll.end(0)}-second mark.`))):this.video.currentTime=F}}getVideo(){return this.video}onAdd(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const F=this.map.painter.context,ll=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,uu.members)),this.boundsSegments||(this.boundsSegments=Da.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ll.LINEAR,ll.CLAMP_TO_EDGE),ll.texSubImage2D(ll.TEXTURE_2D,0,0,0,ll.RGBA,ll.UNSIGNED_BYTE,this.video)):(this.texture=new b(F,this.video,ll.RGBA),this.texture.bind(ll.LINEAR,ll.CLAMP_TO_EDGE));let cl=!1;for(const Da in this.tiles){const F=this.tiles[Da];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture,cl=!0)}cl&&this.fire(new Da.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class et extends Q{constructor(F,ll,cl,hl){super(F,ll,cl,hl),ll.coordinates?Array.isArray(ll.coordinates)&&4===ll.coordinates.length&&!ll.coordinates.some((F=>!Array.isArray(F)||2!==F.length||F.some((F=>"number"!=typeof F))))||this.fire(new Da.j(new Da.a2(`sources.${F}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new Da.j(new Da.a2(`sources.${F}`,null,'missing required property "coordinates"'))),ll.animate&&"boolean"!=typeof ll.animate&&this.fire(new Da.j(new Da.a2(`sources.${F}`,null,'optional "animate" property must be a boolean value'))),ll.canvas?"string"==typeof ll.canvas||ll.canvas instanceof HTMLCanvasElement||this.fire(new Da.j(new Da.a2(`sources.${F}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new Da.j(new Da.a2(`sources.${F}`,null,'missing required property "canvas"'))),this.options=ll,this.animate=void 0===ll.animate||ll.animate}load(){return Da._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new Da.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const ll=this.map.painter.context,cl=ll.gl;this.boundsBuffer||(this.boundsBuffer=ll.createVertexBuffer(this._boundsArray,uu.members)),this.boundsSegments||(this.boundsSegments=Da.a0.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b(ll,this.canvas,cl.RGBA,{premultiply:!0});let hl=!1;for(const Da in this.tiles){const F=this.tiles[Da];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture,hl=!0)}hl&&this.fire(new Da.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const F of[this.canvas.width,this.canvas.height])if(isNaN(F)||F<=0)return!0;return!1}}const hu={},at=F=>{switch(F){case"geojson":return J;case"image":return Q;case"raster":return X;case"raster-dem":return K;case"vector":return $;case"video":return tt;case"canvas":return et}return hu[F]},Lu="RTLPluginLoaded";class ot extends Da.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=j()}_syncState(F){return this.status=F,this.dispatcher.broadcast("SRPS",{pluginStatus:F,pluginURL:this.url}).catch((F=>{throw this.status="error",F}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(F){return Da._(this,arguments,void 0,(function*(F,Da=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=dl.resolveURL(F),!this.url)throw new Error(`requested url ${F} is invalid`);if("unavailable"===this.status){if(!Da)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()}))}_requestImport(){return Da._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new Da.k(Lu))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let zu=null;function nt(){return zu||(zu=new ot),zu}class lt{constructor(F,ll){this.timeAdded=0,this.fadeEndTime=0,this.tileID=F,this.uid=Da.a4(),this.uses=0,this.tileSize=ll,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(F){const Da=F+this.timeAdded;Da<this.fadeEndTime||(this.fadeEndTime=Da)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(F){this.demTexture&&F.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(F,ll,cl){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",F){F.featureIndex&&(this.latestFeatureIndex=F.featureIndex,F.rawTileData?(this.latestRawTileData=F.rawTileData,this.latestFeatureIndex.rawTileData=F.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=F.collisionBoxArray,this.buckets=function(F,Da){const ll={};if(!Da)return ll;for(const cl of F){const F=cl.layerIds.map((F=>Da.getLayer(F))).filter(Boolean);if(0!==F.length){cl.layers=F,cl.stateDependentLayerIds&&(cl.stateDependentLayers=cl.stateDependentLayerIds.map((Da=>F.filter((F=>F.id===Da))[0])));for(const Da of F)ll[Da.id]=cl}}return ll}(F.buckets,ll.style),this.hasSymbolBuckets=!1;for(const F in this.buckets){const ll=this.buckets[F];if(ll instanceof Da.a6){if(this.hasSymbolBuckets=!0,!cl)break;ll.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const F in this.buckets){const ll=this.buckets[F];if(ll instanceof Da.a6&&ll.hasRTLText){this.hasRTLText=!0,nt().lazyLoad();break}}this.queryPadding=0;for(const F in this.buckets){const Da=this.buckets[F];this.queryPadding=Math.max(this.queryPadding,ll.style.getLayer(F).queryRadius(Da))}F.imageAtlas&&(this.imageAtlas=F.imageAtlas),F.glyphAtlasImage&&(this.glyphAtlasImage=F.glyphAtlasImage)}else this.collisionBoxArray=new Da.a5}unloadVectorData(){for(const F in this.buckets)this.buckets[F].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(F){return this.buckets[F.id]}upload(F){for(const ll in this.buckets){const Da=this.buckets[ll];Da.uploadPending()&&Da.upload(F)}const Da=F.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new b(F,this.imageAtlas.image,Da.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new b(F,this.glyphAtlasImage,Da.ALPHA),this.glyphAtlasImage=null)}prepare(F){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(F,this.imageAtlasTexture)}queryRenderedFeatures(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:cl,cameraQueryGeometry:hl,scale:dl,tileSize:this.tileSize,pixelPosMatrix:bl,transform:fl,params:pl,queryPadding:this.queryPadding*Al},F,Da,ll):{}}querySourceFeatures(F,ll){const cl=this.latestFeatureIndex;if(!cl||!cl.rawTileData)return;const hl=cl.loadVTLayers(),dl=ll&&ll.sourceLayer?ll.sourceLayer:"",pl=hl._geojsonTileLayer||hl[dl];if(!pl)return;const fl=Da.a7(ll&&ll.filter),{z:Al,x:bl,y:kl}=this.tileID.canonical,Dl={z:Al,x:bl,y:kl};for(let Wl=0;Wl<pl.length;Wl++){const ll=pl.feature(Wl);if(fl.needGeometry){const F=Da.a8(ll,!0);if(!fl.filter(new Da.z(this.tileID.overscaledZ),F,this.tileID.canonical))continue}else if(!fl.filter(new Da.z(this.tileID.overscaledZ),ll))continue;const hl=cl.getId(ll,dl),Ql=new Da.a9(ll,Al,bl,kl,hl);Ql.tile=Dl,F.push(Ql)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(F){const ll=this.expirationTime;if(F.cacheControl){const ll=Da.aa(F.cacheControl);ll["max-age"]&&(this.expirationTime=Date.now()+1e3*ll["max-age"])}else F.expires&&(this.expirationTime=new Date(F.expires).getTime());if(this.expirationTime){const F=Date.now();let Da=!1;if(this.expirationTime>F)Da=!1;else if(ll)if(this.expirationTime<ll)Da=!0;else{const cl=this.expirationTime-ll;cl?this.expirationTime=F+Math.max(cl,3e4):Da=!0}else Da=!0;Da?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(F,Da){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(F).length)return;const ll=this.latestFeatureIndex.loadVTLayers();for(const cl in this.buckets){if(!Da.style.hasLayer(cl))continue;const hl=this.buckets[cl],dl=hl.layers[0].sourceLayer||"_geojsonTileLayer",pl=ll[dl],fl=F[dl];if(!pl||!fl||0===Object.keys(fl).length)continue;hl.update(fl,pl,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Al=Da&&Da.style&&Da.style.getLayer(cl);Al&&(this.queryPadding=Math.max(this.queryPadding,Al.queryRadius(hl)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<dl.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(F){this.symbolFadeHoldUntil=dl.now()+F}setDependencies(F,Da){const ll={};for(const cl of Da)ll[cl]=!0;this.dependencies[F]=ll}hasDependency(F,Da){for(const ll of F){const F=this.dependencies[ll];if(F)for(const ll of Da)if(F[ll])return!0}return!1}}class ht{constructor(F,Da){this.max=F,this.onRemove=Da,this.reset()}reset(){for(const F in this.data)for(const Da of this.data[F])Da.timeout&&clearTimeout(Da.timeout),this.onRemove(Da.value);return this.data={},this.order=[],this}add(F,Da,ll){const cl=F.wrapped().key;void 0===this.data[cl]&&(this.data[cl]=[]);const hl={value:Da,timeout:void 0};if(void 0!==ll&&(hl.timeout=setTimeout((()=>{this.remove(F,hl)}),ll)),this.data[cl].push(hl),this.order.push(cl),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(F){return F.wrapped().key in this.data}getAndRemove(F){return this.has(F)?this._getAndRemoveByKey(F.wrapped().key):null}_getAndRemoveByKey(F){const Da=this.data[F].shift();return Da.timeout&&clearTimeout(Da.timeout),0===this.data[F].length&&delete this.data[F],this.order.splice(this.order.indexOf(F),1),Da.value}getByKey(F){const Da=this.data[F];return Da?Da[0].value:null}get(F){return this.has(F)?this.data[F.wrapped().key][0].value:null}remove(F,Da){if(!this.has(F))return this;const ll=F.wrapped().key,cl=void 0===Da?0:this.data[ll].indexOf(Da),hl=this.data[ll][cl];return this.data[ll].splice(cl,1),hl.timeout&&clearTimeout(hl.timeout),0===this.data[ll].length&&delete this.data[ll],this.onRemove(hl.value),this.order.splice(this.order.indexOf(ll),1),this}setMaxSize(F){for(this.max=F;this.order.length>this.max;){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}filter(F){const Da=[];for(const ll in this.data)for(const cl of this.data[ll])F(cl.value)||Da.push(cl);for(const ll of Da)this.remove(ll.value.tileID,ll)}}class ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(F,ll,cl){const hl=String(ll);if(this.stateChanges[F]=this.stateChanges[F]||{},this.stateChanges[F][hl]=this.stateChanges[F][hl]||{},Da.e(this.stateChanges[F][hl],cl),null===this.deletedStates[F]){this.deletedStates[F]={};for(const Da in this.state[F])Da!==hl&&(this.deletedStates[F][Da]=null)}else if(this.deletedStates[F]&&null===this.deletedStates[F][hl]){this.deletedStates[F][hl]={};for(const Da in this.state[F][hl])cl[Da]||(this.deletedStates[F][hl][Da]=null)}else for(const Da in cl)this.deletedStates[F]&&this.deletedStates[F][hl]&&null===this.deletedStates[F][hl][Da]&&delete this.deletedStates[F][hl][Da]}removeFeatureState(F,Da,ll){if(null===this.deletedStates[F])return;const cl=String(Da);if(this.deletedStates[F]=this.deletedStates[F]||{},ll&&void 0!==Da)null!==this.deletedStates[F][cl]&&(this.deletedStates[F][cl]=this.deletedStates[F][cl]||{},this.deletedStates[F][cl][ll]=null);else if(void 0!==Da)if(this.stateChanges[F]&&this.stateChanges[F][cl])for(ll in this.deletedStates[F][cl]={},this.stateChanges[F][cl])this.deletedStates[F][cl][ll]=null;else this.deletedStates[F][cl]=null;else this.deletedStates[F]=null}getState(F,ll){const cl=String(ll),hl=Da.e({},(this.state[F]||{})[cl],(this.stateChanges[F]||{})[cl]);if(null===this.deletedStates[F])return{};if(this.deletedStates[F]){const Da=this.deletedStates[F][ll];if(null===Da)return{};for(const F in Da)delete hl[F]}return hl}initializeTileState(F,Da){F.setFeatureState(this.state,Da)}coalesceChanges(F,ll){const cl={};for(const hl in this.stateChanges){this.state[hl]=this.state[hl]||{};const F={};for(const ll in this.stateChanges[hl])this.state[hl][ll]||(this.state[hl][ll]={}),Da.e(this.state[hl][ll],this.stateChanges[hl][ll]),F[ll]=this.state[hl][ll];cl[hl]=F}for(const hl in this.deletedStates){this.state[hl]=this.state[hl]||{};const F={};if(null===this.deletedStates[hl])for(const Da in this.state[hl])F[Da]={},this.state[hl][Da]={};else for(const Da in this.deletedStates[hl]){if(null===this.deletedStates[hl][Da])this.state[hl][Da]={};else for(const F of Object.keys(this.deletedStates[hl][Da]))delete this.state[hl][Da][F];F[Da]=this.state[hl][Da]}cl[hl]=cl[hl]||{},Da.e(cl[hl],F)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(cl).length)for(const Da in F)F[Da].setFeatureState(cl,ll)}}class ut extends Da.E{constructor(F,Da,ll){super(),this.id=F,this.dispatcher=ll,this.on("data",(F=>this._dataHandler(F))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((F,Da,ll,cl)=>{const hl=new(at(Da.type))(F,Da,ll,cl);if(hl.id!==F)throw new Error(`Expected Source id to be ${F} instead of ${hl.id}`);return hl})(F,Da,ll,this),this._tiles={},this._cache=new ht(0,(F=>this._unloadTile(F))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ct,this._didEmitContent=!1,this._updated=!1}onAdd(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._maxTileCacheZoomLevels=F?F._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(F)}onRemove(F){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(F)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const F in this._tiles){const Da=this._tiles[F];if("loaded"!==Da.state&&"errored"!==Da.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(F,ll,cl){return Da._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(F),this._tileLoaded(F,ll,cl)}catch(ll){F.state="errored",404!==ll.status?this._source.fire(new Da.j(ll,{tile:F})):this.update(this.transform,this.terrain)}}))}_unloadTile(F){this._source.unloadTile&&this._source.unloadTile(F)}_abortTile(F){this._source.abortTile&&this._source.abortTile(F),this._source.fire(new Da.k("dataabort",{tile:F,coord:F.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(F){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const Da in this._tiles){const ll=this._tiles[Da];ll.upload(F),ll.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((F=>F.tileID)).sort(dt).map((F=>F.key))}getRenderableIds(F){const ll=[];for(const Da in this._tiles)this._isIdRenderable(Da,F)&&ll.push(this._tiles[Da]);return F?ll.sort(((F,ll)=>{const cl=F.tileID,hl=ll.tileID,dl=new Da.P(cl.canonical.x,cl.canonical.y)._rotate(this.transform.angle),pl=new Da.P(hl.canonical.x,hl.canonical.y)._rotate(this.transform.angle);return cl.overscaledZ-hl.overscaledZ||pl.y-dl.y||pl.x-dl.x})).map((F=>F.tileID.key)):ll.map((F=>F.tileID)).sort(dt).map((F=>F.key))}hasRenderableParent(F){const Da=this.findLoadedParent(F,0);return!!Da&&this._isIdRenderable(Da.tileID.key)}_isIdRenderable(F,Da){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(Da||!this._tiles[F].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const F in this._tiles)"errored"!==this._tiles[F].state&&this._reloadTile(F,"reloading")}}_reloadTile(F,ll){return Da._(this,void 0,void 0,(function*(){const Da=this._tiles[F];Da&&("loading"!==Da.state&&(Da.state=ll),yield this._loadTile(Da,F,ll))}))}_tileLoaded(F,ll,cl){F.timeAdded=dl.now(),"expired"===cl&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(ll,F),"raster-dem"===this.getSource().type&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),F.aborted||this._source.fire(new Da.k("data",{dataType:"source",tile:F,coord:F.tileID}))}_backfillDEM(F){const Da=this.getRenderableIds();for(let ll=0;ll<Da.length;ll++){const cl=Da[ll];if(F.neighboringTiles&&F.neighboringTiles[cl]){const Da=this.getTileByID(cl);i(F,Da),i(Da,F)}}function i(F,Da){F.needsHillshadePrepare=!0,F.needsTerrainPrepare=!0;let ll=Da.tileID.canonical.x-F.tileID.canonical.x;const cl=Da.tileID.canonical.y-F.tileID.canonical.y,hl=Math.pow(2,F.tileID.canonical.z),dl=Da.tileID.key;0===ll&&0===cl||Math.abs(cl)>1||(Math.abs(ll)>1&&(1===Math.abs(ll+hl)?ll+=hl:1===Math.abs(ll-hl)&&(ll-=hl)),Da.dem&&F.dem&&(F.dem.backfillBorder(Da.dem,ll,cl),F.neighboringTiles&&F.neighboringTiles[dl]&&(F.neighboringTiles[dl].backfilled=!0)))}}getTile(F){return this.getTileByID(F.key)}getTileByID(F){return this._tiles[F]}_retainLoadedChildren(F,Da,ll,cl){for(const hl in this._tiles){let dl=this._tiles[hl];if(cl[hl]||!dl.hasData()||dl.tileID.overscaledZ<=Da||dl.tileID.overscaledZ>ll)continue;let pl=dl.tileID;for(;dl&&dl.tileID.overscaledZ>Da+1;){const F=dl.tileID.scaledTo(dl.tileID.overscaledZ-1);dl=this._tiles[F.key],dl&&dl.hasData()&&(pl=F)}let fl=pl;for(;fl.overscaledZ>Da;)if(fl=fl.scaledTo(fl.overscaledZ-1),F[fl.key]){cl[pl.key]=pl;break}}}findLoadedParent(F,Da){if(F.key in this._loadedParentTiles){const ll=this._loadedParentTiles[F.key];return ll&&ll.tileID.overscaledZ>=Da?ll:null}for(let ll=F.overscaledZ-1;ll>=Da;ll--){const Da=F.scaledTo(ll),cl=this._getLoadedTile(Da);if(cl)return cl}}findLoadedSibling(F){return this._getLoadedTile(F)}_getLoadedTile(F){const Da=this._tiles[F.key];return Da&&Da.hasData()?Da:this._cache.getByKey(F.wrapped().key)}updateCacheSize(F){const ll=Math.ceil(F.width/this._source.tileSize)+1,cl=Math.ceil(F.height/this._source.tileSize)+1,hl=Math.floor(ll*cl*(null===this._maxTileCacheZoomLevels?Da.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),dl="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,hl):hl;this._cache.setMaxSize(dl)}handleWrapJump(F){const Da=Math.round((F-(void 0===this._prevLng?F:this._prevLng))/360);if(this._prevLng=F,Da){const F={};for(const ll in this._tiles){const cl=this._tiles[ll];cl.tileID=cl.tileID.unwrapTo(cl.tileID.wrap+Da),F[cl.tileID.key]=cl}this._tiles=F;for(const Da in this._timers)clearTimeout(this._timers[Da]),delete this._timers[Da];for(const Da in this._tiles)this._setTileReloadTimer(Da,this._tiles[Da])}}_updateCoveredAndRetainedTiles(F,Da,ll,cl,hl,pl){const fl={},Al={},bl=Object.keys(F),kl=dl.now();for(const dl of bl){const ll=F[dl],cl=this._tiles[dl];if(!cl||0!==cl.fadeEndTime&&cl.fadeEndTime<=kl)continue;const hl=this.findLoadedParent(ll,Da),pl=this.findLoadedSibling(ll),bl=hl||pl||null;bl&&(this._addTile(bl.tileID),fl[bl.tileID.key]=bl.tileID),Al[dl]=ll}this._retainLoadedChildren(Al,cl,ll,F);for(const dl in fl)F[dl]||(this._coveredTiles[dl]=!0,F[dl]=fl[dl]);if(pl){const Da={},ll={};for(const F of hl)this._tiles[F.key].hasData()?Da[F.key]=F:ll[F.key]=F;for(const cl in ll){const hl=ll[cl].children(this._source.maxzoom);this._tiles[hl[0].key]&&this._tiles[hl[1].key]&&this._tiles[hl[2].key]&&this._tiles[hl[3].key]&&(Da[hl[0].key]=F[hl[0].key]=hl[0],Da[hl[1].key]=F[hl[1].key]=hl[1],Da[hl[2].key]=F[hl[2].key]=hl[2],Da[hl[3].key]=F[hl[3].key]=hl[3],delete ll[cl])}for(const cl in ll){const hl=ll[cl],dl=this.findLoadedParent(hl,this._source.minzoom),pl=this.findLoadedSibling(hl),fl=dl||pl||null;if(fl){Da[fl.tileID.key]=F[fl.tileID.key]=fl.tileID;for(const F in Da)Da[F].isChildOf(fl.tileID)&&delete Da[F]}}for(const F in this._tiles)Da[F]||(this._coveredTiles[F]=!0)}}update(F,ll){if(!this._sourceLoaded||this._paused)return;let cl;this.transform=F,this.terrain=ll,this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?cl=F.getVisibleUnwrappedCoordinates(this._source.tileID).map((F=>new Da.S(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y))):(cl=F.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:ll}),this._source.hasTile&&(cl=cl.filter((F=>this._source.hasTile(F))))):cl=[];const hl=F.coveringZoomLevel(this._source),dl=Math.max(hl-ut.maxOverzooming,this._source.minzoom),pl=Math.max(hl+ut.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const Da of cl)if(Da.canonical.z>this._source.minzoom){const ll=Da.scaledTo(Da.canonical.z-1);F[ll.key]=ll;const cl=Da.scaledTo(Math.max(this._source.minzoom,Math.min(Da.canonical.z,5)));F[cl.key]=cl}cl=cl.concat(Object.values(F))}const fl=0===cl.length&&!this._updated&&this._didEmitContent;this._updated=!0,fl&&this.fire(new Da.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Al=this._updateRetainedTiles(cl,hl);_t(this._source.type)&&this._updateCoveredAndRetainedTiles(Al,dl,pl,hl,cl,ll);for(const Da in Al)this._tiles[Da].clearFadeHold();const bl=Da.ab(this._tiles,Al);for(const Da of bl){const F=this._tiles[Da];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(Da)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)}_updateRetainedTiles(F,Da){var ll;const cl={},hl={},dl=Math.max(Da-ut.maxOverzooming,this._source.minzoom),pl=Math.max(Da+ut.maxUnderzooming,this._source.minzoom),fl={};for(const Al of F){const F=this._addTile(Al);cl[Al.key]=Al,F.hasData()||Da<this._source.maxzoom&&(fl[Al.key]=Al)}this._retainLoadedChildren(fl,Da,pl,cl);for(const Al of F){let F=this._tiles[Al.key];if(F.hasData())continue;if(Da+1>this._source.maxzoom){const F=Al.children(this._source.maxzoom)[0],Da=this.getTile(F);if(Da&&Da.hasData()){cl[F.key]=F;continue}}else{const F=Al.children(this._source.maxzoom);if(cl[F[0].key]&&cl[F[1].key]&&cl[F[2].key]&&cl[F[3].key])continue}let pl=F.wasRequested();for(let Da=Al.overscaledZ-1;Da>=dl;--Da){const dl=Al.scaledTo(Da);if(hl[dl.key])break;if(hl[dl.key]=!0,F=this.getTile(dl),!F&&pl&&(F=this._addTile(dl)),F){const Da=F.hasData();if((Da||!(null===(ll=this.map)||void 0===ll?void 0:ll.cancelPendingTileRequestsWhileZooming)||pl)&&(cl[dl.key]=dl),pl=F.wasRequested(),Da)break}}}return cl}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const F in this._tiles){const Da=[];let ll,cl=this._tiles[F].tileID;for(;cl.overscaledZ>0;){if(cl.key in this._loadedParentTiles){ll=this._loadedParentTiles[cl.key];break}Da.push(cl.key);const F=cl.scaledTo(cl.overscaledZ-1);if(ll=this._getLoadedTile(F),ll)break;cl=F}for(const F of Da)this._loadedParentTiles[F]=ll}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const F in this._tiles){const Da=this._tiles[F].tileID,ll=this._getLoadedTile(Da);this._loadedSiblingTiles[Da.key]=ll}}_addTile(F){let ll=this._tiles[F.key];if(ll)return ll;ll=this._cache.getAndRemove(F),ll&&(this._setTileReloadTimer(F.key,ll),ll.tileID=F,this._state.initializeTileState(ll,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,ll)));const cl=ll;return ll||(ll=new lt(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(ll,F.key,ll.state)),ll.uses++,this._tiles[F.key]=ll,cl||this._source.fire(new Da.k("dataloading",{tile:ll,coord:ll.tileID,dataType:"source"})),ll}_setTileReloadTimer(F,Da){F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);const ll=Da.getExpiryTimeout();ll&&(this._timers[F]=setTimeout((()=>{this._reloadTile(F,"expired"),delete this._timers[F]}),ll))}_removeTile(F){const Da=this._tiles[F];Da&&(Da.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),Da.uses>0||(Da.hasData()&&"reloading"!==Da.state?this._cache.add(Da.tileID,Da,Da.getExpiryTimeout()):(Da.aborted=!0,this._abortTile(Da),this._unloadTile(Da))))}_dataHandler(F){const Da=F.sourceDataType;"source"===F.dataType&&"metadata"===Da&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===F.dataType&&"content"===Da&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const F in this._tiles)this._removeTile(F);this._cache.reset()}tilesIn(F,ll,cl){const hl=[],dl=this.transform;if(!dl)return hl;const pl=cl?dl.getCameraQueryGeometry(F):F,fl=F.map((F=>dl.pointCoordinate(F,this.terrain))),Al=pl.map((F=>dl.pointCoordinate(F,this.terrain))),bl=this.getIds();let kl=1/0,Dl=1/0,Wl=-1/0,Ql=-1/0;for(const Da of Al)kl=Math.min(kl,Da.x),Dl=Math.min(Dl,Da.y),Wl=Math.max(Wl,Da.x),Ql=Math.max(Ql,Da.y);for(let wc=0;wc<bl.length;wc++){const F=this._tiles[bl[wc]];if(F.holdingForFade())continue;const cl=F.tileID,pl=Math.pow(2,dl.zoom-F.tileID.overscaledZ),Sc=ll*F.queryPadding*Da.X/F.tileSize/pl,eu=[cl.getTilePoint(new Da.Z(kl,Dl)),cl.getTilePoint(new Da.Z(Wl,Ql))];if(eu[0].x-Sc<Da.X&&eu[0].y-Sc<Da.X&&eu[1].x+Sc>=0&&eu[1].y+Sc>=0){const Da=fl.map((F=>cl.getTilePoint(F))),ll=Al.map((F=>cl.getTilePoint(F)));hl.push({tile:F,tileID:cl,queryGeometry:Da,cameraQueryGeometry:ll,scale:pl})}}return hl}getVisibleCoordinates(F){const Da=this.getRenderableIds(F).map((F=>this._tiles[F].tileID));for(const ll of Da)ll.posMatrix=this.transform.calculatePosMatrix(ll.toUnwrapped());return Da}hasTransition(){if(this._source.hasTransition())return!0;if(_t(this._source.type)){const F=dl.now();for(const Da in this._tiles)if(this._tiles[Da].fadeEndTime>=F)return!0}return!1}setFeatureState(F,Da,ll){this._state.updateState(F=F||"_geojsonTileLayer",Da,ll)}removeFeatureState(F,Da,ll){this._state.removeFeatureState(F=F||"_geojsonTileLayer",Da,ll)}getFeatureState(F,Da){return this._state.getState(F=F||"_geojsonTileLayer",Da)}setDependencies(F,Da,ll){const cl=this._tiles[F];cl&&cl.setDependencies(Da,ll)}reloadTilesForDependencies(F,Da){for(const ll in this._tiles)this._tiles[ll].hasDependency(F,Da)&&this._reloadTile(ll,"reloading");this._cache.filter((ll=>!ll.hasDependency(F,Da)))}}function dt(F,Da){const ll=Math.abs(2*F.wrap)-+(F.wrap<0),cl=Math.abs(2*Da.wrap)-+(Da.wrap<0);return F.overscaledZ-Da.overscaledZ||cl-ll||Da.canonical.y-F.canonical.y||Da.canonical.x-F.canonical.x}function _t(F){return"raster"===F||"image"===F||"video"===F}ut.maxOverzooming=10,ut.maxUnderzooming=3;class pt{constructor(F,Da){this.reset(F,Da)}reset(F,Da){this.points=F||[],this._distances=[0];for(let ll=1;ll<this.points.length;ll++)this._distances[ll]=this._distances[ll-1]+this.points[ll].dist(this.points[ll-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Da||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(F){if(1===this.points.length)return this.points[0];F=Da.ac(F,0,1);let ll=1,cl=this._distances[ll];const hl=F*this.paddedLength+this.padding;for(;cl<hl&&ll<this._distances.length;)cl=this._distances[++ll];const dl=ll-1,pl=this._distances[dl],fl=cl-pl,Al=fl>0?(hl-pl)/fl:0;return this.points[dl].mult(1-Al).add(this.points[ll].mult(Al))}}function mt(F,Da){let ll=!0;return"always"===F||"never"!==F&&"never"!==Da||(ll=!1),ll}class ft{constructor(F,Da,ll){const cl=this.boxCells=[],hl=this.circleCells=[];this.xCellCount=Math.ceil(F/ll),this.yCellCount=Math.ceil(Da/ll);for(let dl=0;dl<this.xCellCount*this.yCellCount;dl++)cl.push([]),hl.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=F,this.height=Da,this.xScale=this.xCellCount/F,this.yScale=this.yCellCount/Da,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(F,Da,ll,cl,hl){this._forEachCell(Da,ll,cl,hl,this._insertBoxCell,this.boxUid++),this.boxKeys.push(F),this.bboxes.push(Da),this.bboxes.push(ll),this.bboxes.push(cl),this.bboxes.push(hl)}insertCircle(F,Da,ll,cl){this._forEachCell(Da-cl,ll-cl,Da+cl,ll+cl,this._insertCircleCell,this.circleUid++),this.circleKeys.push(F),this.circles.push(Da),this.circles.push(ll),this.circles.push(cl)}_insertBoxCell(F,Da,ll,cl,hl,dl){this.boxCells[hl].push(dl)}_insertCircleCell(F,Da,ll,cl,hl,dl){this.circleCells[hl].push(dl)}_query(F,Da,ll,cl,hl,dl,pl){if(ll<0||F>this.width||cl<0||Da>this.height)return[];const fl=[];if(F<=0&&Da<=0&&this.width<=ll&&this.height<=cl){if(hl)return[{key:null,x1:F,y1:Da,x2:ll,y2:cl}];for(let F=0;F<this.boxKeys.length;F++)fl.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const Da=this.circles[3*F],ll=this.circles[3*F+1],cl=this.circles[3*F+2];fl.push({key:this.circleKeys[F],x1:Da-cl,y1:ll-cl,x2:Da+cl,y2:ll+cl})}}else this._forEachCell(F,Da,ll,cl,this._queryCell,fl,{hitTest:hl,overlapMode:dl,seenUids:{box:{},circle:{}}},pl);return fl}query(F,Da,ll,cl){return this._query(F,Da,ll,cl,!1,null)}hitTest(F,Da,ll,cl,hl,dl){return this._query(F,Da,ll,cl,!0,hl,dl).length>0}hitTestCircle(F,Da,ll,cl,hl){const dl=F-ll,pl=F+ll,fl=Da-ll,Al=Da+ll;if(pl<0||dl>this.width||Al<0||fl>this.height)return!1;const bl=[];return this._forEachCell(dl,fl,pl,Al,this._queryCellCircle,bl,{hitTest:!0,overlapMode:cl,circle:{x:F,y:Da,radius:ll},seenUids:{box:{},circle:{}}},hl),bl.length>0}_queryCell(F,Da,ll,cl,hl,dl,pl,fl){const{seenUids:Al,hitTest:bl,overlapMode:kl}=pl,Dl=this.boxCells[hl];if(null!==Dl){const hl=this.bboxes;for(const pl of Dl)if(!Al.box[pl]){Al.box[pl]=!0;const Dl=4*pl,Wl=this.boxKeys[pl];if(F<=hl[Dl+2]&&Da<=hl[Dl+3]&&ll>=hl[Dl+0]&&cl>=hl[Dl+1]&&(!fl||fl(Wl))&&(!bl||!mt(kl,Wl.overlapMode))&&(dl.push({key:Wl,x1:hl[Dl],y1:hl[Dl+1],x2:hl[Dl+2],y2:hl[Dl+3]}),bl))return!0}}const Wl=this.circleCells[hl];if(null!==Wl){const hl=this.circles;for(const pl of Wl)if(!Al.circle[pl]){Al.circle[pl]=!0;const Dl=3*pl,Wl=this.circleKeys[pl];if(this._circleAndRectCollide(hl[Dl],hl[Dl+1],hl[Dl+2],F,Da,ll,cl)&&(!fl||fl(Wl))&&(!bl||!mt(kl,Wl.overlapMode))){const F=hl[Dl],Da=hl[Dl+1],ll=hl[Dl+2];if(dl.push({key:Wl,x1:F-ll,y1:Da-ll,x2:F+ll,y2:Da+ll}),bl)return!0}}}return!1}_queryCellCircle(F,Da,ll,cl,hl,dl,pl,fl){const{circle:Al,seenUids:bl,overlapMode:kl}=pl,Dl=this.boxCells[hl];if(null!==Dl){const F=this.bboxes;for(const Da of Dl)if(!bl.box[Da]){bl.box[Da]=!0;const ll=4*Da,cl=this.boxKeys[Da];if(this._circleAndRectCollide(Al.x,Al.y,Al.radius,F[ll+0],F[ll+1],F[ll+2],F[ll+3])&&(!fl||fl(cl))&&!mt(kl,cl.overlapMode))return dl.push(!0),!0}}const Wl=this.circleCells[hl];if(null!==Wl){const F=this.circles;for(const Da of Wl)if(!bl.circle[Da]){bl.circle[Da]=!0;const ll=3*Da,cl=this.circleKeys[Da];if(this._circlesCollide(F[ll],F[ll+1],F[ll+2],Al.x,Al.y,Al.radius)&&(!fl||fl(cl))&&!mt(kl,cl.overlapMode))return dl.push(!0),!0}}}_forEachCell(F,Da,ll,cl,hl,dl,pl,fl){const Al=this._convertToXCellCoord(F),bl=this._convertToYCellCoord(Da),kl=this._convertToXCellCoord(ll),Dl=this._convertToYCellCoord(cl);for(let Wl=Al;Wl<=kl;Wl++)for(let Al=bl;Al<=Dl;Al++)if(hl.call(this,F,Da,ll,cl,this.xCellCount*Al+Wl,dl,pl,fl))return}_convertToXCellCoord(F){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(F*this.xScale)))}_convertToYCellCoord(F){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(F*this.yScale)))}_circlesCollide(F,Da,ll,cl,hl,dl){const pl=cl-F,fl=hl-Da,Al=ll+dl;return Al*Al>pl*pl+fl*fl}_circleAndRectCollide(F,Da,ll,cl,hl,dl,pl){const fl=(dl-cl)/2,Al=Math.abs(F-(cl+fl));if(Al>fl+ll)return!1;const bl=(pl-hl)/2,kl=Math.abs(Da-(hl+bl));if(kl>bl+ll)return!1;if(Al<=fl||kl<=bl)return!0;const Dl=Al-fl,Wl=kl-bl;return Dl*Dl+Wl*Wl<=ll*ll}}function gt(F,ll,cl,hl,dl){const pl=Da.H();return ll?(Da.K(pl,pl,[1/dl,1/dl,1]),cl||Da.ad(pl,pl,hl.angle)):Da.L(pl,hl.labelPlaneMatrix,F),pl}function vt(F,ll,cl,hl,dl){if(ll){const ll=Da.ae(F);return Da.K(ll,ll,[dl,dl,1]),cl||Da.ad(ll,ll,-hl.angle),ll}return hl.glCoordMatrix}function xt(F,ll,cl,hl){let dl;hl?(dl=[F,ll,hl(F,ll),1],Da.af(dl,dl,cl)):(dl=[F,ll,0,1],kt(dl,dl,cl));const pl=dl[3];return{point:new Da.P(dl[0]/pl,dl[1]/pl),signedDistanceFromCamera:pl,isOccluded:!1}}function yt(F,Da){return.5+F/Da*.5}function bt(F,Da){return F.x>=-Da[0]&&F.x<=Da[0]&&F.y>=-Da[1]&&F.y<=Da[1]}function wt(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){const eu=hl?F.textSizeData:F.iconSizeData,iu=Da.ag(eu,cl.transform.zoom),su=[256/cl.width*2+1,256/cl.height*2+1],cu=hl?F.text.dynamicLayoutVertexArray:F.icon.dynamicLayoutVertexArray;cu.clear();const uu=F.lineVertexArray,hu=hl?F.text.placedSymbolArray:F.icon.placedSymbolArray,Lu=cl.transform.width/cl.transform.height;let zu=!1;for(let Du=0;Du<hu.length;Du++){const hl=hu.get(Du);if(hl.hidden||hl.writingMode===Da.ah.vertical&&!zu){Rt(hl.numGlyphs,cu);continue}zu=!1;const Nu=xt(hl.anchorX,hl.anchorY,ll,Sc);if(!bt(Nu.point,su)){Rt(hl.numGlyphs,cu);continue}const qu=yt(cl.transform.cameraToCenterDistance,Nu.signedDistanceFromCamera),ih=Da.ai(eu,iu,hl),gh=fl?ih/qu:ih*qu,ed={getElevation:Sc,labelPlaneMatrix:dl,lineVertexArray:uu,pitchWithMap:fl,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:kl,tileAnchorPoint:new Da.P(hl.anchorX,hl.anchorY),unwrappedTileID:Dl,width:Wl,height:Ql,translation:wc},td=Et(ed,hl,gh,!1,Al,ll,pl,F.glyphOffsetArray,cu,Lu,bl);zu=td.useVertical,(td.notEnoughRoom||zu||td.needsFlipping&&Et(ed,hl,gh,!0,Al,ll,pl,F.glyphOffsetArray,cu,Lu,bl).notEnoughRoom)&&Rt(hl.numGlyphs,cu)}hl?F.text.dynamicLayoutVertexBuffer.updateData(cu):F.icon.dynamicLayoutVertexBuffer.updateData(cu)}function Tt(F,Da,ll,cl,hl,dl,pl,fl){const Al=dl.glyphStartIndex+dl.numGlyphs,bl=dl.lineStartIndex,kl=dl.lineStartIndex+dl.lineLength,Dl=Da.getoffsetX(dl.glyphStartIndex),Wl=Da.getoffsetX(Al-1),Ql=Mt(F*Dl,ll,cl,hl,dl.segment,bl,kl,fl,pl);if(!Ql)return null;const wc=Mt(F*Wl,ll,cl,hl,dl.segment,bl,kl,fl,pl);return wc?fl.projectionCache.anyProjectionOccluded?null:{first:Ql,last:wc}:null}function It(F,ll,cl,hl){return F===Da.ah.horizontal&&Math.abs(cl.y-ll.y)>Math.abs(cl.x-ll.x)*hl?{useVertical:!0}:(F===Da.ah.vertical?ll.y<cl.y:ll.x>cl.x)?{needsFlipping:!0}:null}function Et(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl){const Wl=cl/24,Ql=ll.lineOffsetX*Wl,wc=ll.lineOffsetY*Wl;let Sc;if(ll.numGlyphs>1){const Da=ll.glyphStartIndex+ll.numGlyphs,cl=ll.lineStartIndex,pl=ll.lineStartIndex+ll.lineLength,bl=Tt(Wl,Al,Ql,wc,hl,ll,Dl,F);if(!bl)return{notEnoughRoom:!0};const eu=xt(bl.first.point.x,bl.first.point.y,fl,F.getElevation).point,iu=xt(bl.last.point.x,bl.last.point.y,fl,F.getElevation).point;if(dl&&!hl){const F=It(ll.writingMode,eu,iu,kl);if(F)return F}Sc=[bl.first];for(let dl=ll.glyphStartIndex+1;dl<Da-1;dl++)Sc.push(Mt(Wl*Al.getoffsetX(dl),Ql,wc,hl,ll.segment,cl,pl,F,Dl));Sc.push(bl.last)}else{if(dl&&!hl){const cl=xt(F.tileAnchorPoint.x,F.tileAnchorPoint.y,pl,F.getElevation).point,hl=ll.lineStartIndex+ll.segment+1,dl=new Da.P(F.lineVertexArray.getx(hl),F.lineVertexArray.gety(hl)),fl=xt(dl.x,dl.y,pl,F.getElevation),Al=fl.signedDistanceFromCamera>0?fl.point:function(F,Da,ll,cl,hl,dl){return Pt(F,Da,ll,1,hl,dl)}(F.tileAnchorPoint,dl,cl,0,pl,F),bl=It(ll.writingMode,cl,Al,kl);if(bl)return bl}const cl=Mt(Wl*Al.getoffsetX(ll.glyphStartIndex),Ql,wc,hl,ll.segment,ll.lineStartIndex,ll.lineStartIndex+ll.lineLength,F,Dl);if(!cl||F.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Sc=[cl]}for(const eu of Sc)Da.aj(bl,eu.point,eu.angle);return{}}function Pt(F,Da,ll,cl,hl,dl){const pl=F.add(F.sub(Da)._unit()),fl=void 0!==hl?xt(pl.x,pl.y,hl,dl.getElevation).point:St(pl.x,pl.y,dl).point,Al=ll.sub(fl);return ll.add(Al._mult(cl/Al.mag()))}function Ct(F,ll,cl){const hl=ll.projectionCache;if(hl.projections[F])return hl.projections[F];const dl=new Da.P(ll.lineVertexArray.getx(F),ll.lineVertexArray.gety(F)),pl=St(dl.x,dl.y,ll);if(pl.signedDistanceFromCamera>0)return hl.projections[F]=pl.point,hl.anyProjectionOccluded=hl.anyProjectionOccluded||pl.isOccluded,pl.point;const fl=F-cl.direction;return function(F,Da,ll,cl,hl){return Pt(F,Da,ll,cl,void 0,hl)}(0===cl.distanceFromAnchor?ll.tileAnchorPoint:new Da.P(ll.lineVertexArray.getx(fl),ll.lineVertexArray.gety(fl)),dl,cl.previousVertex,cl.absOffsetX-cl.distanceFromAnchor+1,ll)}function St(F,Da,ll){const cl=F+ll.translation[0],hl=Da+ll.translation[1];let dl;return!ll.pitchWithMap&&ll.projection.useSpecialProjectionForSymbols?(dl=ll.projection.projectTileCoordinates(cl,hl,ll.unwrappedTileID,ll.getElevation),dl.point.x=(.5*dl.point.x+.5)*ll.width,dl.point.y=(.5*-dl.point.y+.5)*ll.height):(dl=xt(cl,hl,ll.labelPlaneMatrix,ll.getElevation),dl.isOccluded=!1),dl}function zt(F,Da,ll){return F._unit()._perp()._mult(Da*ll)}function Dt(F,ll,cl,hl,dl,pl,fl,Al,bl){if(Al.projectionCache.offsets[F])return Al.projectionCache.offsets[F];const kl=cl.add(ll);if(F+bl.direction<hl||F+bl.direction>=dl)return Al.projectionCache.offsets[F]=kl,kl;const Dl=Ct(F+bl.direction,Al,bl),Wl=zt(Dl.sub(cl),fl,bl.direction),Ql=cl.add(Wl),wc=Dl.add(Wl);return Al.projectionCache.offsets[F]=Da.ak(pl,kl,Ql,wc)||kl,Al.projectionCache.offsets[F]}function Mt(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=cl?F-Da:F+Da;let kl=bl>0?1:-1,Dl=0;cl&&(kl*=-1,Dl=Math.PI),kl<0&&(Dl+=Math.PI);let Wl,Ql=kl>0?dl+hl:dl+hl+1;fl.projectionCache.cachedAnchorPoint?Wl=fl.projectionCache.cachedAnchorPoint:(Wl=St(fl.tileAnchorPoint.x,fl.tileAnchorPoint.y,fl).point,fl.projectionCache.cachedAnchorPoint=Wl);let wc,Sc,eu=Wl,iu=Wl,su=0,cu=0;const uu=Math.abs(bl),hu=[];let Lu;for(;su+cu<=uu;){if(Ql+=kl,Ql<dl||Ql>=pl)return null;su+=cu,iu=eu,Sc=wc;const F={absOffsetX:uu,direction:kl,distanceFromAnchor:su,previousVertex:iu};if(eu=Ct(Ql,fl,F),0===ll)hu.push(iu),Lu=eu.sub(iu);else{let Da;const cl=eu.sub(iu);Da=0===cl.mag()?zt(Ct(Ql+kl,fl,F).sub(eu),ll,kl):zt(cl,ll,kl),Sc||(Sc=iu.add(Da)),wc=Dt(Ql,Da,eu,dl,pl,Sc,ll,fl,F),hu.push(Sc),Lu=wc.sub(Sc)}cu=Lu.mag()}const zu=Lu._mult((uu-su)/cu)._add(Sc||iu),Du=Dl+Math.atan2(eu.y-iu.y,eu.x-iu.x);return hu.push(zu),{point:zu,angle:Al?Du:0,path:hu}}const Du=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rt(F,Da){for(let ll=0;ll<F;ll++){const F=Da.length;Da.resize(F+4),Da.float32.set(Du,3*F)}}function kt(F,Da,ll){const cl=Da[0],hl=Da[1];return F[0]=ll[0]*cl+ll[4]*hl+ll[12],F[1]=ll[1]*cl+ll[5]*hl+ll[13],F[3]=ll[3]*cl+ll[7]*hl+ll[15],F}const Nu=100;class Ft{constructor(F,Da,ll=new ft(F.width+200,F.height+200,25),cl=new ft(F.width+200,F.height+200,25)){this.transform=F,this.mapProjection=Da,this.grid=ll,this.ignoredGrid=cl,this.pitchFactor=Math.cos(F._pitch)*F.cameraToCenterDistance,this.screenRightBoundary=F.width+Nu,this.screenBottomBoundary=F.height+Nu,this.gridRightBoundary=F.width+200,this.gridBottomBoundary=F.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl){const Dl=F.anchorPointX+fl[0],Wl=F.anchorPointY+fl[1],Ql=this.projectAndGetPerspectiveRatio(cl,Dl,Wl,hl,bl),wc=ll*Ql.perspectiveRatio;let Sc;if(dl||pl)Sc=this._projectCollisionBox(F,wc,cl,hl,dl,pl,fl,Ql,bl,kl);else{const Da=Ql.point.x+(kl?kl.x*wc:0),ll=Ql.point.y+(kl?kl.y*wc:0);Sc={allPointsOccluded:!1,box:[Da+F.x1*wc,ll+F.y1*wc,Da+F.x2*wc,ll+F.y2*wc]}}const[eu,iu,su,cu]=Sc.box;return this.mapProjection.useSpecialProjectionForSymbols&&(dl?Sc.allPointsOccluded:this.mapProjection.isOccluded(Dl,Wl,hl))||Ql.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(eu,iu,su,cu)||"always"!==Da&&this.grid.hitTest(eu,iu,su,cu,Da,Al)?{box:[eu,iu,su,cu],placeable:!1,offscreen:!1}:{box:[eu,iu,su,cu],placeable:!0,offscreen:this.isOffscreen(eu,iu,su,cu)}}placeCollisionCircles(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu){const iu=[],su=new Da.P(ll.anchorX,ll.anchorY),cu=this.getPerspectiveRatio(pl,su.x,su.y,fl,eu),uu=(Dl?dl/cu:dl*cu)/Da.ap,hu={getElevation:eu,labelPlaneMatrix:Al,lineVertexArray:cl,pitchWithMap:Dl,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:su,unwrappedTileID:fl,width:this.transform.width,height:this.transform.height,translation:Sc},Lu=Tt(uu,hl,ll.lineOffsetX*uu,ll.lineOffsetY*uu,!1,ll,!1,hu);let zu=!1,Du=!1,qu=!0;if(Lu){const ll=.5*Ql*cu+wc,cl=new Da.P(-100,-100),hl=new Da.P(this.screenRightBoundary,this.screenBottomBoundary),dl=new pt,pl=Lu.first,fl=Lu.last;let Al=[];for(let F=pl.path.length-1;F>=1;F--)Al.push(pl.path[F]);for(let F=1;F<fl.path.length;F++)Al.push(fl.path[F]);const Dl=2.5*ll;if(bl){const F=this.projectPathToScreenSpace(Al,hu,bl);Al=F.some((F=>F.signedDistanceFromCamera<=0))?[]:F.map((F=>F.point))}let Sc=[];if(Al.length>0){const F=Al[0].clone(),ll=Al[0].clone();for(let Da=1;Da<Al.length;Da++)F.x=Math.min(F.x,Al[Da].x),F.y=Math.min(F.y,Al[Da].y),ll.x=Math.max(ll.x,Al[Da].x),ll.y=Math.max(ll.y,Al[Da].y);Sc=F.x>=cl.x&&ll.x<=hl.x&&F.y>=cl.y&&ll.y<=hl.y?[Al]:ll.x<cl.x||F.x>hl.x||ll.y<cl.y||F.y>hl.y?[]:Da.al([Al],cl.x,cl.y,hl.x,hl.y)}for(const Da of Sc){dl.reset(Da,.25*ll);let cl=0;cl=dl.length<=.5*ll?1:Math.ceil(dl.paddedLength/Dl)+1;for(let Da=0;Da<cl;Da++){const hl=Da/Math.max(cl-1,1),pl=dl.lerp(hl),fl=pl.x+Nu,Al=pl.y+Nu;iu.push(fl,Al,ll,0);const bl=fl-ll,Dl=Al-ll,Ql=fl+ll,wc=Al+ll;if(qu=qu&&this.isOffscreen(bl,Dl,Ql,wc),Du=Du||this.isInsideGrid(bl,Dl,Ql,wc),"always"!==F&&this.grid.hitTestCircle(fl,Al,ll,F,Wl)&&(zu=!0,!kl))return{circles:[],offscreen:!1,collisionDetected:zu}}}}return{circles:!kl&&zu||!Du||cu<this.perspectiveRatioCutoff?[]:iu,offscreen:qu,collisionDetected:zu}}projectPathToScreenSpace(F,Da,ll){return F.map((F=>xt(F.x,F.y,ll,Da.getElevation)))}queryRenderedSymbols(F){if(0===F.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const ll=[];let cl=1/0,hl=1/0,dl=-1/0,pl=-1/0;for(const kl of F){const F=new Da.P(kl.x+Nu,kl.y+Nu);cl=Math.min(cl,F.x),hl=Math.min(hl,F.y),dl=Math.max(dl,F.x),pl=Math.max(pl,F.y),ll.push(F)}const fl=this.grid.query(cl,hl,dl,pl).concat(this.ignoredGrid.query(cl,hl,dl,pl)),Al={},bl={};for(const kl of fl){const F=kl.key;if(void 0===Al[F.bucketInstanceId]&&(Al[F.bucketInstanceId]={}),Al[F.bucketInstanceId][F.featureIndex])continue;const cl=[new Da.P(kl.x1,kl.y1),new Da.P(kl.x2,kl.y1),new Da.P(kl.x2,kl.y2),new Da.P(kl.x1,kl.y2)];Da.am(ll,cl)&&(Al[F.bucketInstanceId][F.featureIndex]=!0,void 0===bl[F.bucketInstanceId]&&(bl[F.bucketInstanceId]=[]),bl[F.bucketInstanceId].push(F.featureIndex))}return bl}insertCollisionBox(F,Da,ll,cl,hl,dl){(ll?this.ignoredGrid:this.grid).insert({bucketInstanceId:cl,featureIndex:hl,collisionGroupID:dl,overlapMode:Da},F[0],F[1],F[2],F[3])}insertCollisionCircles(F,Da,ll,cl,hl,dl){const pl=ll?this.ignoredGrid:this.grid,fl={bucketInstanceId:cl,featureIndex:hl,collisionGroupID:dl,overlapMode:Da};for(let Al=0;Al<F.length;Al+=4)pl.insertCircle(fl,F[Al],F[Al+1],F[Al+2])}projectAndGetPerspectiveRatio(F,ll,cl,hl,dl){let pl;dl?(pl=[ll,cl,dl(ll,cl),1],Da.af(pl,pl,F)):(pl=[ll,cl,0,1],kt(pl,pl,F));const fl=pl[3];return{point:new Da.P((pl[0]/fl+1)/2*this.transform.width+Nu,(-pl[1]/fl+1)/2*this.transform.height+Nu),perspectiveRatio:.5+this.transform.cameraToCenterDistance/fl*.5,isOccluded:!1,signedDistanceFromCamera:fl}}getPerspectiveRatio(F,Da,ll,cl,hl){const dl=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(Da,ll,cl,hl):xt(Da,ll,F,hl);return.5+this.transform.cameraToCenterDistance/dl.signedDistanceFromCamera*.5}isOffscreen(F,Da,ll,cl){return ll<Nu||F>=this.screenRightBoundary||cl<Nu||Da>this.screenBottomBoundary}isInsideGrid(F,Da,ll,cl){return ll>=0&&F<this.gridRightBoundary&&cl>=0&&Da<this.gridBottomBoundary}getViewportMatrix(){const F=Da.an([]);return Da.J(F,F,[-100,-100,0]),F}_projectCollisionBox(F,ll,cl,hl,dl,pl,fl,Al,bl,kl){let Dl=new Da.P(1,0),Wl=new Da.P(0,1);const Ql=new Da.P(F.anchorPointX+fl[0],F.anchorPointY+fl[1]);if(pl&&!dl){const F=this.projectAndGetPerspectiveRatio(cl,Ql.x+1,Ql.y,hl,bl).point.sub(Al.point).unit(),ll=Math.atan(F.y/F.x)+(F.x<0?Math.PI:0),dl=Math.sin(ll),pl=Math.cos(ll);Dl=new Da.P(pl,dl),Wl=new Da.P(-dl,pl)}else if(!pl&&dl){const F=-this.transform.angle,ll=Math.sin(F),cl=Math.cos(F);Dl=new Da.P(cl,ll),Wl=new Da.P(-ll,cl)}let wc=Al.point,Sc=ll;if(dl){wc=Ql;const F=this.transform.zoom-Math.floor(this.transform.zoom);Sc=Math.pow(2,-F),Sc*=this.mapProjection.getPitchedTextCorrection(this.transform,Ql,hl),kl||(Sc*=Da.ac(.5+Al.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}kl&&(wc=wc.add(Dl.mult(kl.x*Sc)).add(Wl.mult(kl.y*Sc)));const eu=F.x1*Sc,iu=F.x2*Sc,su=(eu+iu)/2,cu=F.y1*Sc,uu=F.y2*Sc,hu=(cu+uu)/2,Lu=[{offsetX:eu,offsetY:cu},{offsetX:su,offsetY:cu},{offsetX:iu,offsetY:cu},{offsetX:iu,offsetY:hu},{offsetX:iu,offsetY:uu},{offsetX:su,offsetY:uu},{offsetX:eu,offsetY:uu},{offsetX:eu,offsetY:hu}];let zu=[];for(const{offsetX:Nu,offsetY:qu}of Lu)zu.push(new Da.P(wc.x+Dl.x*Nu+Wl.x*qu,wc.y+Dl.y*Nu+Wl.y*qu));let Du=!1;if(dl){const F=zu.map((F=>this.projectAndGetPerspectiveRatio(cl,F.x,F.y,hl,bl)));Du=F.some((F=>!F.isOccluded)),zu=F.map((F=>F.point))}else Du=!0;return{box:Da.ao(zu),allPointsOccluded:!Du}}}function Bt(F,ll,cl){return ll*(Da.X/(F.tileSize*Math.pow(2,cl-F.tileID.overscaledZ)))}class Ot{constructor(F,Da,ll,cl){this.opacity=F?Math.max(0,Math.min(1,F.opacity+(F.placed?Da:-Da))):cl&&ll?1:0,this.placed=ll}isHidden(){return 0===this.opacity&&!this.placed}}class Nt{constructor(F,Da,ll,cl,hl){this.text=new Ot(F?F.text:null,Da,ll,hl),this.icon=new Ot(F?F.icon:null,Da,cl,hl)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ut{constructor(F,Da,ll){this.text=F,this.icon=Da,this.skipFade=ll}}class jt{constructor(){this.invProjMatrix=Da.H(),this.viewportMatrix=Da.H(),this.circles=[]}}class Zt{constructor(F,Da,ll,cl,hl){this.bucketInstanceId=F,this.featureIndex=Da,this.sourceLayerIndex=ll,this.bucketIndex=cl,this.tileID=hl}}class qt{constructor(F){this.crossSourceCollisions=F,this.maxGroupID=0,this.collisionGroups={}}get(F){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[F]){const Da=++this.maxGroupID;this.collisionGroups[F]={ID:Da,predicate:F=>F.collisionGroupID===Da}}return this.collisionGroups[F]}}function Vt(F,ll,cl,hl,dl){const{horizontalAlign:pl,verticalAlign:fl}=Da.au(F);return new Da.P(-(pl-.5)*ll+hl[0]*dl,-(fl-.5)*cl+hl[1]*dl)}class Gt{constructor(F,Da,ll,cl,hl,dl){this.transform=F.clone(),this.terrain=ll,this.collisionIndex=new Ft(this.transform,Da),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=cl,this.retainedQueryData={},this.collisionGroups=new qt(hl),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=dl,dl&&(dl.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(F){const Da=this.terrain;return Da?(ll,cl)=>Da.getElevation(F,ll,cl):null}getBucketParts(F,ll,cl,hl){const dl=cl.getBucket(ll),pl=cl.latestFeatureIndex;if(!dl||!pl||ll.id!==dl.layerIds[0])return;const fl=cl.collisionBoxArray,Al=dl.layers[0].layout,bl=dl.layers[0].paint,kl=Math.pow(2,this.transform.zoom-cl.tileID.overscaledZ),Dl=cl.tileSize/Da.X,Wl=cl.tileID.toUnwrapped(),Ql=this.transform.calculatePosMatrix(Wl),wc="map"===Al.get("text-pitch-alignment"),Sc="map"===Al.get("text-rotation-alignment"),eu=Bt(cl,1,this.transform.zoom),iu=this.collisionIndex.mapProjection.translatePosition(this.transform,cl,bl.get("text-translate"),bl.get("text-translate-anchor")),su=this.collisionIndex.mapProjection.translatePosition(this.transform,cl,bl.get("icon-translate"),bl.get("icon-translate-anchor")),cu=gt(Ql,wc,Sc,this.transform,eu);let uu=null;if(wc){const F=vt(Ql,wc,Sc,this.transform,eu);uu=Da.L([],this.transform.labelPlaneMatrix,F)}this.retainedQueryData[dl.bucketInstanceId]=new Zt(dl.bucketInstanceId,pl,dl.sourceLayerIndex,dl.index,cl.tileID);const hu={bucket:dl,layout:Al,translationText:iu,translationIcon:su,posMatrix:Ql,unwrappedTileID:Wl,textLabelPlaneMatrix:cu,labelToScreenMatrix:uu,scale:kl,textPixelRatio:Dl,holdingForFade:cl.holdingForFade(),collisionBoxArray:fl,partiallyEvaluatedTextSize:Da.ag(dl.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(dl.sourceID)};if(hl)for(const Da of dl.sortKeyRanges){const{sortKey:ll,symbolInstanceStart:cl,symbolInstanceEnd:hl}=Da;F.push({sortKey:ll,symbolInstanceStart:cl,symbolInstanceEnd:hl,parameters:hu})}else F.push({symbolInstanceStart:0,symbolInstanceEnd:dl.symbolInstances.length,parameters:hu})}attemptAnchorPlacement(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu,su,cu){const uu=Da.aq[F.textAnchor],hu=[F.textOffset0,F.textOffset1],Lu=Vt(uu,cl,hl,hu,dl),zu=this.collisionIndex.placeCollisionBox(ll,Wl,Al,bl,kl,fl,pl,eu,Dl.predicate,cu,Lu);if((!su||this.collisionIndex.placeCollisionBox(su,Wl,Al,bl,kl,fl,pl,iu,Dl.predicate,cu,Lu).placeable)&&zu.placeable){let F;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ql.crossTileID]&&this.prevPlacement.placements[Ql.crossTileID]&&this.prevPlacement.placements[Ql.crossTileID].text&&(F=this.prevPlacement.variableOffsets[Ql.crossTileID].anchor),0===Ql.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ql.crossTileID]={textOffset:hu,width:cl,height:hl,anchor:uu,textBoxScale:dl,prevAnchor:F},this.markUsedJustification(wc,uu,Ql,Sc),wc.allowVerticalPlacement&&(this.markUsedOrientation(wc,Sc,Ql),this.placedOrientations[Ql.crossTileID]=Sc),{shift:Lu,placedGlyphBoxes:zu}}}placeLayerBucketPart(F,ll,cl){const{bucket:hl,layout:dl,translationText:pl,translationIcon:fl,posMatrix:Al,unwrappedTileID:bl,textLabelPlaneMatrix:kl,labelToScreenMatrix:Dl,textPixelRatio:Wl,holdingForFade:Ql,collisionBoxArray:wc,partiallyEvaluatedTextSize:Sc,collisionGroup:eu}=F.parameters,iu=dl.get("text-optional"),su=dl.get("icon-optional"),cu=Da.ar(dl,"text-overlap","text-allow-overlap"),uu="always"===cu,hu=Da.ar(dl,"icon-overlap","icon-allow-overlap"),Lu="always"===hu,zu="map"===dl.get("text-rotation-alignment"),Du="map"===dl.get("text-pitch-alignment"),Nu="none"!==dl.get("icon-text-fit"),qu="viewport-y"===dl.get("symbol-z-order"),ih=uu&&(Lu||!hl.hasIconData()||su),gh=Lu&&(uu||!hl.hasTextData()||iu);!hl.collisionArrays&&wc&&hl.deserializeCollisionBoxes(wc);const ed=this._getTerrainElevationFunc(this.retainedQueryData[hl.bucketInstanceId].tileID),D=(F,wc,Lu)=>{var qu,td;if(ll[F.crossTileID])return;if(Ql)return void(this.placements[F.crossTileID]=new Ut(!1,!1,!1));let id=!1,nd=!1,rd=!0,ad=null,sd={box:null,placeable:!1,offscreen:null},od={box:null,placeable:!1,offscreen:null},ld=null,cd=null,ud=null,hd=0,dd=0,pd=0;wc.textFeatureIndex?hd=wc.textFeatureIndex:F.useRuntimeCollisionCircles&&(hd=F.featureIndex),wc.verticalTextFeatureIndex&&(dd=wc.verticalTextFeatureIndex);const md=wc.textBox;if(md){const i=ll=>{let cl=Da.ah.horizontal;if(hl.allowVerticalPlacement&&!ll&&this.prevPlacement){const Da=this.prevPlacement.placedOrientations[F.crossTileID];Da&&(this.placedOrientations[F.crossTileID]=Da,cl=Da,this.markUsedOrientation(hl,cl,F))}return cl},o=(ll,cl)=>{if(hl.allowVerticalPlacement&&F.numVerticalGlyphVertices>0&&wc.verticalTextBox){for(const F of hl.writingModes)if(F===Da.ah.vertical?(sd=cl(),od=sd):sd=ll(),sd&&sd.placeable)break}else sd=ll()},ll=F.textAnchorOffsetStartIndex,dl=F.textAnchorOffsetEndIndex;if(dl===ll){const a=(Da,ll)=>{const cl=this.collisionIndex.placeCollisionBox(Da,cu,Wl,Al,bl,Du,zu,pl,eu.predicate,ed);return cl&&cl.placeable&&(this.markUsedOrientation(hl,ll,F),this.placedOrientations[F.crossTileID]=ll),cl};o((()=>a(md,Da.ah.horizontal)),(()=>{const ll=wc.verticalTextBox;return hl.allowVerticalPlacement&&F.numVerticalGlyphVertices>0&&ll?a(ll,Da.ah.vertical):{box:null,offscreen:null}})),i(sd&&sd.placeable)}else{let kl=Da.aq[null===(td=null===(qu=this.prevPlacement)||void 0===qu?void 0:qu.variableOffsets[F.crossTileID])||void 0===td?void 0:td.anchor];const m=(Dl,Ql,wc)=>{const Sc=Dl.x2-Dl.x1,iu=Dl.y2-Dl.y1,su=F.textBoxScale,uu=Nu&&"never"===hu?Ql:null;let Lu=null,qu="never"===cu?1:2,ih="never";kl&&qu++;for(let Da=0;Da<qu;Da++){for(let Da=ll;Da<dl;Da++){const ll=hl.textAnchorOffsets.get(Da);if(kl&&ll.textAnchor!==kl)continue;const cl=this.attemptAnchorPlacement(ll,Dl,Sc,iu,su,zu,Du,Wl,Al,bl,eu,ih,F,hl,wc,pl,fl,uu,ed);if(cl&&(Lu=cl.placedGlyphBoxes,Lu&&Lu.placeable))return id=!0,ad=cl.shift,Lu}kl?kl=null:ih=cu}return cl&&!Lu&&(Lu={box:this.collisionIndex.placeCollisionBox(md,"always",Wl,Al,bl,Du,zu,pl,eu.predicate,ed,new Da.P(0,0)).box,offscreen:!1,placeable:!1}),Lu};o((()=>m(md,wc.iconBox,Da.ah.horizontal)),(()=>{const ll=wc.verticalTextBox;return hl.allowVerticalPlacement&&(!sd||!sd.placeable)&&F.numVerticalGlyphVertices>0&&ll?m(ll,wc.verticalIconBox,Da.ah.vertical):{box:null,occluded:!0,offscreen:null}})),sd&&(id=sd.placeable,rd=sd.offscreen);const Dl=i(sd&&sd.placeable);if(!id&&this.prevPlacement){const Da=this.prevPlacement.variableOffsets[F.crossTileID];Da&&(this.variableOffsets[F.crossTileID]=Da,this.markUsedJustification(hl,Da.anchor,F,Dl))}}}if(ld=sd,id=ld&&ld.placeable,rd=ld&&ld.offscreen,F.useRuntimeCollisionCircles){const ll=hl.text.placedSymbolArray.get(F.centerJustifiedTextSymbolIndex),fl=Da.ai(hl.textSizeData,Sc,ll),Wl=dl.get("text-padding");cd=this.collisionIndex.placeCollisionCircles(cu,ll,hl.lineVertexArray,hl.glyphOffsetArray,fl,Al,bl,kl,Dl,cl,Du,eu.predicate,F.collisionCircleDiameter,Wl,pl,ed),cd.circles.length&&cd.collisionDetected&&!cl&&Da.w("Collisions detected, but collision boxes are not shown"),id=uu||cd.circles.length>0&&!cd.collisionDetected,rd=rd&&cd.offscreen}if(wc.iconFeatureIndex&&(pd=wc.iconFeatureIndex),wc.iconBox){const t=F=>this.collisionIndex.placeCollisionBox(F,hu,Wl,Al,bl,Du,zu,fl,eu.predicate,ed,Nu&&ad?ad:void 0);od&&od.placeable&&wc.verticalIconBox?(ud=t(wc.verticalIconBox),nd=ud.placeable):(ud=t(wc.iconBox),nd=ud.placeable),rd=rd&&ud.offscreen}const fd=iu||0===F.numHorizontalGlyphVertices&&0===F.numVerticalGlyphVertices,gd=su||0===F.numIconVertices;fd||gd?gd?fd||(nd=nd&&id):id=nd&&id:nd=id=nd&&id;const Ad=nd&&ud.placeable;if(id&&ld.placeable&&this.collisionIndex.insertCollisionBox(ld.box,cu,dl.get("text-ignore-placement"),hl.bucketInstanceId,od&&od.placeable&&dd?dd:hd,eu.ID),Ad&&this.collisionIndex.insertCollisionBox(ud.box,hu,dl.get("icon-ignore-placement"),hl.bucketInstanceId,pd,eu.ID),cd&&id&&this.collisionIndex.insertCollisionCircles(cd.circles,cu,dl.get("text-ignore-placement"),hl.bucketInstanceId,hd,eu.ID),cl&&this.storeCollisionData(hl.bucketInstanceId,Lu,wc,ld,ud,cd),0===F.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===hl.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[F.crossTileID]=new Ut(id||ih,nd||gh,rd||hl.justReloaded),ll[F.crossTileID]=!0};if(qu){if(0!==F.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Da=hl.getSortedSymbolIndexes(this.transform.angle);for(let F=Da.length-1;F>=0;--F){const ll=Da[F];D(hl.symbolInstances.get(ll),hl.collisionArrays[ll],ll)}}else for(let Da=F.symbolInstanceStart;Da<F.symbolInstanceEnd;Da++)D(hl.symbolInstances.get(Da),hl.collisionArrays[Da],Da);if(cl&&hl.bucketInstanceId in this.collisionCircleArrays){const F=this.collisionCircleArrays[hl.bucketInstanceId];Da.as(F.invProjMatrix,Al),F.viewportMatrix=this.collisionIndex.getViewportMatrix()}hl.justReloaded=!1}storeCollisionData(F,Da,ll,cl,hl,dl){if(ll.textBox||ll.iconBox){let dl,pl;this.collisionBoxArrays.has(F)?dl=this.collisionBoxArrays.get(F):(dl=new Map,this.collisionBoxArrays.set(F,dl)),dl.has(Da)?pl=dl.get(Da):(pl={text:null,icon:null},dl.set(Da,pl)),ll.textBox&&(pl.text=cl.box),ll.iconBox&&(pl.icon=hl.box)}if(dl){let Da=this.collisionCircleArrays[F];void 0===Da&&(Da=this.collisionCircleArrays[F]=new jt);for(let F=0;F<dl.circles.length;F+=4)Da.circles.push(dl.circles[F+0]),Da.circles.push(dl.circles[F+1]),Da.circles.push(dl.circles[F+2]),Da.circles.push(dl.collisionDetected?1:0)}}markUsedJustification(F,ll,cl,hl){let dl;dl=hl===Da.ah.vertical?cl.verticalPlacedTextSymbolIndex:{left:cl.leftJustifiedTextSymbolIndex,center:cl.centerJustifiedTextSymbolIndex,right:cl.rightJustifiedTextSymbolIndex}[Da.at(ll)];const pl=[cl.leftJustifiedTextSymbolIndex,cl.centerJustifiedTextSymbolIndex,cl.rightJustifiedTextSymbolIndex,cl.verticalPlacedTextSymbolIndex];for(const Da of pl)Da>=0&&(F.text.placedSymbolArray.get(Da).crossTileID=dl>=0&&Da!==dl?0:cl.crossTileID)}markUsedOrientation(F,ll,cl){const hl=ll===Da.ah.horizontal||ll===Da.ah.horizontalOnly?ll:0,dl=ll===Da.ah.vertical?ll:0,pl=[cl.leftJustifiedTextSymbolIndex,cl.centerJustifiedTextSymbolIndex,cl.rightJustifiedTextSymbolIndex];for(const Da of pl)F.text.placedSymbolArray.get(Da).placedOrientation=hl;cl.verticalPlacedTextSymbolIndex&&(F.text.placedSymbolArray.get(cl.verticalPlacedTextSymbolIndex).placedOrientation=dl)}commit(F){this.commitTime=F,this.zoomAtLastRecencyCheck=this.transform.zoom;const Da=this.prevPlacement;let ll=!1;this.prevZoomAdjustment=Da?Da.zoomAdjustment(this.transform.zoom):0;const cl=Da?Da.symbolFadeChange(F):1,hl=Da?Da.opacities:{},dl=Da?Da.variableOffsets:{},pl=Da?Da.placedOrientations:{};for(const fl in this.placements){const F=this.placements[fl],Da=hl[fl];Da?(this.opacities[fl]=new Nt(Da,cl,F.text,F.icon),ll=ll||F.text!==Da.text.placed||F.icon!==Da.icon.placed):(this.opacities[fl]=new Nt(null,cl,F.text,F.icon,F.skipFade),ll=ll||F.text||F.icon)}for(const fl in hl){const F=hl[fl];if(!this.opacities[fl]){const Da=new Nt(F,cl,!1,!1);Da.isHidden()||(this.opacities[fl]=Da,ll=ll||F.text.placed||F.icon.placed)}}for(const fl in dl)this.variableOffsets[fl]||!this.opacities[fl]||this.opacities[fl].isHidden()||(this.variableOffsets[fl]=dl[fl]);for(const fl in pl)this.placedOrientations[fl]||!this.opacities[fl]||this.opacities[fl].isHidden()||(this.placedOrientations[fl]=pl[fl]);if(Da&&void 0===Da.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");ll?this.lastPlacementChangeTime=F:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=Da?Da.lastPlacementChangeTime:F)}updateLayerOpacities(F,Da){const ll={};for(const cl of Da){const Da=cl.getBucket(F);Da&&cl.latestFeatureIndex&&F.id===Da.layerIds[0]&&this.updateBucketOpacities(Da,cl.tileID,ll,cl.collisionBoxArray)}}updateBucketOpacities(F,ll,cl,hl){F.hasTextData()&&(F.text.opacityVertexArray.clear(),F.text.hasVisibleVertices=!1),F.hasIconData()&&(F.icon.opacityVertexArray.clear(),F.icon.hasVisibleVertices=!1),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexArray.clear(),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexArray.clear();const dl=F.layers[0],pl=dl.layout,fl=new Nt(null,0,!1,!1,!0),Al=pl.get("text-allow-overlap"),bl=pl.get("icon-allow-overlap"),kl=dl._unevaluatedLayout.hasValue("text-variable-anchor")||dl._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Dl="map"===pl.get("text-rotation-alignment"),Wl="map"===pl.get("text-pitch-alignment"),Ql="none"!==pl.get("icon-text-fit"),wc=new Nt(null,0,Al&&(bl||!F.hasIconData()||pl.get("icon-optional")),bl&&(Al||!F.hasTextData()||pl.get("text-optional")),!0);!F.collisionArrays&&hl&&(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData())&&F.deserializeCollisionBoxes(hl);const m=(F,Da,ll)=>{for(let cl=0;cl<Da/4;cl++)F.opacityVertexArray.emplaceBack(ll);F.hasVisibleVertices=F.hasVisibleVertices||ll!==rd},Sc=this.collisionBoxArrays.get(F.bucketInstanceId);for(let eu=0;eu<F.symbolInstances.length;eu++){const ll=F.symbolInstances.get(eu),{numHorizontalGlyphVertices:hl,numVerticalGlyphVertices:dl,crossTileID:pl}=ll;let Al=this.opacities[pl];cl[pl]?Al=fl:Al||(Al=wc,this.opacities[pl]=Al),cl[pl]=!0;const bl=ll.numIconVertices>0,iu=this.placedOrientations[ll.crossTileID],su=iu===Da.ah.vertical,cu=iu===Da.ah.horizontal||iu===Da.ah.horizontalOnly;if(hl>0||dl>0){const Da=te(Al.text);m(F.text,hl,su?rd:Da),m(F.text,dl,cu?rd:Da);const cl=Al.text.isHidden();[ll.rightJustifiedTextSymbolIndex,ll.centerJustifiedTextSymbolIndex,ll.leftJustifiedTextSymbolIndex].forEach((Da=>{Da>=0&&(F.text.placedSymbolArray.get(Da).hidden=cl||su?1:0)})),ll.verticalPlacedTextSymbolIndex>=0&&(F.text.placedSymbolArray.get(ll.verticalPlacedTextSymbolIndex).hidden=cl||cu?1:0);const pl=this.variableOffsets[ll.crossTileID];pl&&this.markUsedJustification(F,pl.anchor,ll,iu);const fl=this.placedOrientations[ll.crossTileID];fl&&(this.markUsedJustification(F,"left",ll,fl),this.markUsedOrientation(F,fl,ll))}if(bl){const Da=te(Al.icon),cl=!(Ql&&ll.verticalPlacedIconSymbolIndex&&su);ll.placedIconSymbolIndex>=0&&(m(F.icon,ll.numIconVertices,cl?Da:rd),F.icon.placedSymbolArray.get(ll.placedIconSymbolIndex).hidden=Al.icon.isHidden()),ll.verticalPlacedIconSymbolIndex>=0&&(m(F.icon,ll.numVerticalIconVertices,cl?rd:Da),F.icon.placedSymbolArray.get(ll.verticalPlacedIconSymbolIndex).hidden=Al.icon.isHidden())}const uu=Sc&&Sc.has(eu)?Sc.get(eu):{text:null,icon:null};if(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData()){const ll=F.collisionArrays[eu];if(ll){let cl=new Da.P(0,0);if(ll.textBox||ll.verticalTextBox){let Da=!0;if(kl){const F=this.variableOffsets[pl];F?(cl=Vt(F.anchor,F.width,F.height,F.textOffset,F.textBoxScale),Dl&&cl._rotate(Wl?this.transform.angle:-this.transform.angle)):Da=!1}if(ll.textBox||ll.verticalTextBox){let hl;ll.textBox&&(hl=su),ll.verticalTextBox&&(hl=cu),Ht(F.textCollisionBox.collisionVertexArray,Al.text.placed,!Da||hl,uu.text,cl.x,cl.y)}}if(ll.iconBox||ll.verticalIconBox){const Da=Boolean(!cu&&ll.verticalIconBox);let hl;ll.iconBox&&(hl=Da),ll.verticalIconBox&&(hl=!Da),Ht(F.iconCollisionBox.collisionVertexArray,Al.icon.placed,hl,uu.icon,Ql?cl.x:0,Ql?cl.y:0)}}}}if(F.sortFeatures(this.transform.angle),this.retainedQueryData[F.bucketInstanceId]&&(this.retainedQueryData[F.bucketInstanceId].featureSortOrder=F.featureSortOrder),F.hasTextData()&&F.text.opacityVertexBuffer&&F.text.opacityVertexBuffer.updateData(F.text.opacityVertexArray),F.hasIconData()&&F.icon.opacityVertexBuffer&&F.icon.opacityVertexBuffer.updateData(F.icon.opacityVertexArray),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexBuffer&&F.iconCollisionBox.collisionVertexBuffer.updateData(F.iconCollisionBox.collisionVertexArray),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexBuffer&&F.textCollisionBox.collisionVertexBuffer.updateData(F.textCollisionBox.collisionVertexArray),F.text.opacityVertexArray.length!==F.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${F.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${F.text.layoutVertexArray.length}) / 4`);if(F.icon.opacityVertexArray.length!==F.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${F.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${F.icon.layoutVertexArray.length}) / 4`);if(F.bucketInstanceId in this.collisionCircleArrays){const Da=this.collisionCircleArrays[F.bucketInstanceId];F.placementInvProjMatrix=Da.invProjMatrix,F.placementViewportMatrix=Da.viewportMatrix,F.collisionCircleArray=Da.circles,delete this.collisionCircleArrays[F.bucketInstanceId]}}symbolFadeChange(F){return 0===this.fadeDuration?1:(F-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(F){return Math.max(0,(this.transform.zoom-F)/1.5)}hasTransitions(F){return this.stale||F-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(F,Da){const ll=this.zoomAtLastRecencyCheck===Da?1-this.zoomAdjustment(Da):1;return this.zoomAtLastRecencyCheck=Da,this.commitTime+this.fadeDuration*ll>F}setStale(){this.stale=!0}}function Ht(F,Da,ll,cl,hl,dl){cl&&0!==cl.length||(cl=[0,0,0,0]);const pl=cl[0]-Nu,fl=cl[1]-Nu,Al=cl[2]-Nu,bl=cl[3]-Nu;F.emplaceBack(Da?1:0,ll?1:0,hl||0,dl||0,pl,fl),F.emplaceBack(Da?1:0,ll?1:0,hl||0,dl||0,Al,fl),F.emplaceBack(Da?1:0,ll?1:0,hl||0,dl||0,Al,bl),F.emplaceBack(Da?1:0,ll?1:0,hl||0,dl||0,pl,bl)}const qu=Math.pow(2,25),ih=Math.pow(2,24),gh=Math.pow(2,17),ed=Math.pow(2,16),td=Math.pow(2,9),id=Math.pow(2,8),nd=Math.pow(2,1);function te(F){if(0===F.opacity&&!F.placed)return 0;if(1===F.opacity&&F.placed)return 4294967295;const Da=F.placed?1:0,ll=Math.floor(127*F.opacity);return ll*qu+Da*ih+ll*gh+Da*ed+ll*td+Da*id+ll*nd+Da}const rd=0;function ie(){return{isOccluded:(F,Da,ll)=>!1,getPitchedTextCorrection:(F,Da,ll)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(F,Da,ll,cl){throw new Error("Not implemented.")},translatePosition:(F,Da,ll,cl)=>function(F,Da,ll,cl,hl=!1){if(!ll[0]&&!ll[1])return[0,0];const dl=hl?"map"===cl?F.angle:0:"viewport"===cl?-F.angle:0;if(dl){const F=Math.sin(dl),Da=Math.cos(dl);ll=[ll[0]*Da-ll[1]*F,ll[0]*F+ll[1]*Da]}return[hl?ll[0]:Bt(Da,ll[0],F.zoom),hl?ll[1]:Bt(Da,ll[1],F.zoom)]}(F,Da,ll,cl),getCircleRadiusCorrection:F=>1}}class ae{constructor(F){this._sortAcrossTiles="viewport-y"!==F.layout.get("symbol-z-order")&&!F.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(F,Da,ll,cl,hl){const dl=this._bucketParts;for(;this._currentTileIndex<F.length;)if(Da.getBucketParts(dl,cl,F[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,hl())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,dl.sort(((F,Da)=>F.sortKey-Da.sortKey)));this._currentPartIndex<dl.length;)if(Da.placeLayerBucketPart(dl[this._currentPartIndex],this._seenCrossTileIDs,ll),this._currentPartIndex++,hl())return!0;return!1}}class se{constructor(F,Da,ll,cl,hl,dl,pl,fl){this.placement=new Gt(F,ie(),Da,dl,pl,fl),this._currentPlacementIndex=ll.length-1,this._forceFullPlacement=cl,this._showCollisionBoxes=hl,this._done=!1}isDone(){return this._done}continuePlacement(F,Da,ll){const cl=dl.now(),s=()=>!this._forceFullPlacement&&dl.now()-cl>2;for(;this._currentPlacementIndex>=0;){const cl=Da[F[this._currentPlacementIndex]],hl=this.placement.collisionIndex.transform.zoom;if("symbol"===cl.type&&(!cl.minzoom||cl.minzoom<=hl)&&(!cl.maxzoom||cl.maxzoom>hl)){if(this._inProgressLayer||(this._inProgressLayer=new ae(cl)),this._inProgressLayer.continuePlacement(ll[cl.source],this.placement,this._showCollisionBoxes,cl,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(F){return this.placement.commit(F),this.placement}}const ad=512/Da.X/2;class re{constructor(F,ll,cl){this.tileID=F,this.bucketInstanceId=cl,this._symbolsByKey={};const hl=new Map;for(let Da=0;Da<ll.length;Da++){const F=ll.get(Da),cl=F.key,dl=hl.get(cl);dl?dl.push(F):hl.set(cl,[F])}for(const[dl,pl]of hl){const F={positions:pl.map((F=>({x:Math.floor(F.anchorX*ad),y:Math.floor(F.anchorY*ad)}))),crossTileIDs:pl.map((F=>F.crossTileID))};if(F.positions.length>128){const ll=new Da.av(F.positions.length,16,Uint16Array);for(const{x:Da,y:cl}of F.positions)ll.add(Da,cl);ll.finish(),delete F.positions,F.index=ll}this._symbolsByKey[dl]=F}}getScaledCoordinates(F,ll){const{x:cl,y:hl,z:dl}=this.tileID.canonical,{x:pl,y:fl,z:Al}=ll.canonical,bl=ad/Math.pow(2,Al-dl),kl=(fl*Da.X+F.anchorY)*bl,Dl=hl*Da.X*ad;return{x:Math.floor((pl*Da.X+F.anchorX)*bl-cl*Da.X*ad),y:Math.floor(kl-Dl)}}findMatches(F,Da,ll){const cl=this.tileID.canonical.z<Da.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Da.canonical.z);for(let hl=0;hl<F.length;hl++){const dl=F.get(hl);if(dl.crossTileID)continue;const pl=this._symbolsByKey[dl.key];if(!pl)continue;const fl=this.getScaledCoordinates(dl,Da);if(pl.index){const F=pl.index.range(fl.x-cl,fl.y-cl,fl.x+cl,fl.y+cl).sort();for(const Da of F){const F=pl.crossTileIDs[Da];if(!ll[F]){ll[F]=!0,dl.crossTileID=F;break}}}else if(pl.positions)for(let F=0;F<pl.positions.length;F++){const Da=pl.positions[F],hl=pl.crossTileIDs[F];if(Math.abs(Da.x-fl.x)<=cl&&Math.abs(Da.y-fl.y)<=cl&&!ll[hl]){ll[hl]=!0,dl.crossTileID=hl;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:F})=>F))}}class ne{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class le{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(F){const Da=Math.round((F-this.lng)/360);if(0!==Da)for(const ll in this.indexes){const F=this.indexes[ll],cl={};for(const ll in F){const hl=F[ll];hl.tileID=hl.tileID.unwrapTo(hl.tileID.wrap+Da),cl[hl.tileID.key]=hl}this.indexes[ll]=cl}this.lng=F}addBucket(F,Da,ll){if(this.indexes[F.overscaledZ]&&this.indexes[F.overscaledZ][F.key]){if(this.indexes[F.overscaledZ][F.key].bucketInstanceId===Da.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(F.overscaledZ,this.indexes[F.overscaledZ][F.key])}for(let hl=0;hl<Da.symbolInstances.length;hl++)Da.symbolInstances.get(hl).crossTileID=0;this.usedCrossTileIDs[F.overscaledZ]||(this.usedCrossTileIDs[F.overscaledZ]={});const cl=this.usedCrossTileIDs[F.overscaledZ];for(const hl in this.indexes){const ll=this.indexes[hl];if(Number(hl)>F.overscaledZ)for(const hl in ll){const dl=ll[hl];dl.tileID.isChildOf(F)&&dl.findMatches(Da.symbolInstances,F,cl)}else{const dl=ll[F.scaledTo(Number(hl)).key];dl&&dl.findMatches(Da.symbolInstances,F,cl)}}for(let hl=0;hl<Da.symbolInstances.length;hl++){const F=Da.symbolInstances.get(hl);F.crossTileID||(F.crossTileID=ll.generate(),cl[F.crossTileID]=!0)}return void 0===this.indexes[F.overscaledZ]&&(this.indexes[F.overscaledZ]={}),this.indexes[F.overscaledZ][F.key]=new re(F,Da.symbolInstances,Da.bucketInstanceId),!0}removeBucketCrossTileIDs(F,Da){for(const ll of Da.getCrossTileIDsLists())for(const Da of ll)delete this.usedCrossTileIDs[F][Da]}removeStaleBuckets(F){let Da=!1;for(const ll in this.indexes){const cl=this.indexes[ll];for(const hl in cl)F[cl[hl].bucketInstanceId]||(this.removeBucketCrossTileIDs(ll,cl[hl]),delete cl[hl],Da=!0)}return Da}}class he{constructor(){this.layerIndexes={},this.crossTileIDs=new ne,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(F,Da,ll){let cl=this.layerIndexes[F.id];void 0===cl&&(cl=this.layerIndexes[F.id]=new le);let hl=!1;const dl={};cl.handleWrapJump(ll);for(const pl of Da){const Da=pl.getBucket(F);Da&&F.id===Da.layerIds[0]&&(Da.bucketInstanceId||(Da.bucketInstanceId=++this.maxBucketInstanceId),cl.addBucket(pl.tileID,Da,this.crossTileIDs)&&(hl=!0),dl[Da.bucketInstanceId]=!0)}return cl.removeStaleBuckets(dl)&&(hl=!0),hl}pruneUnusedLayers(F){const Da={};F.forEach((F=>{Da[F]=!0}));for(const ll in this.layerIndexes)Da[ll]||delete this.layerIndexes[ll]}}const ce=(F,ll)=>Da.t(F,ll&&ll.filter((F=>"source.canvas"!==F.identifier))),sd=Da.aw();class de extends Da.E{constructor(F,ll={}){super(),this._rtlPluginLoaded=()=>{for(const F in this.sourceCaches){const Da=this.sourceCaches[F].getSource().type;"vector"!==Da&&"geojson"!==Da||this.sourceCaches[F].reload()}},this.map=F,this.dispatcher=new U(N(),F._getMapId()),this.dispatcher.registerMessageHandler("GG",((F,Da)=>this.getGlyphs(F,Da))),this.dispatcher.registerMessageHandler("GI",((F,Da)=>this.getImages(F,Da))),this.imageManager=new T,this.imageManager.setEventedParent(this),this.glyphManager=new C(F._requestManager,ll.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new he,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new Da.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",Da.ay()),nt().on(Lu,this._rtlPluginLoaded),this.on("data",(F=>{if("source"!==F.dataType||"metadata"!==F.sourceDataType)return;const Da=this.sourceCaches[F.sourceId];if(!Da)return;const ll=Da.getSource();if(ll&&ll.vectorLayerIds)for(const cl in this._layers){const F=this._layers[cl];F.source===ll.id&&this._validateLayer(F)}}))}loadURL(F,ll={},cl){this.fire(new Da.k("dataloading",{dataType:"style"})),ll.validate="boolean"!=typeof ll.validate||ll.validate;const hl=this.map._requestManager.transformRequest(F,"Style");this._loadStyleRequest=new AbortController;const dl=this._loadStyleRequest;Da.h(hl,this._loadStyleRequest).then((F=>{this._loadStyleRequest=null,this._load(F.data,ll,cl)})).catch((F=>{this._loadStyleRequest=null,F&&!dl.signal.aborted&&this.fire(new Da.j(F))}))}loadJSON(F,ll={},cl){this.fire(new Da.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,dl.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,ll.validate=!1!==ll.validate,this._load(F,ll,cl)})).catch((()=>{}))}loadEmpty(){this.fire(new Da.k("dataloading",{dataType:"style"})),this._load(sd,{validate:!1})}_load(F,ll,cl){var hl;const dl=ll.transformStyle?ll.transformStyle(cl,F):F;if(!ll.validate||!ce(this,Da.u(dl))){this._loaded=!0,this.stylesheet=dl;for(const F in dl.sources)this.addSource(F,dl.sources[F],{validate:!1});dl.sprite?this._loadSprite(dl.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(dl.glyphs),this._createLayers(),this.light=new D(this.stylesheet.light),this.sky=new A(this.stylesheet.sky),this.map.setTerrain(null!==(hl=this.stylesheet.terrain)&&void 0!==hl?hl:null),this.fire(new Da.k("data",{dataType:"style"})),this.fire(new Da.k("style.load"))}}_createLayers(){const F=Da.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",F),this._order=F.map((F=>F.id)),this._layers={},this._serializedLayers=null;for(const ll of F){const F=Da.aA(ll);F.setEventedParent(this,{layer:{id:ll.id}}),this._layers[ll.id]=F}}_loadSprite(F,ll=!1,cl=void 0){let hl;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(F,ll,cl,hl){return Da._(this,void 0,void 0,(function*(){const pl=x(F),fl=cl>1?"@2x":"",Al={},bl={};for(const{id:F,url:cl}of pl){const dl=ll.transformRequest(y(cl,fl,".json"),"SpriteJSON");Al[F]=Da.h(dl,hl);const pl=ll.transformRequest(y(cl,fl,".png"),"SpriteImage");bl[F]=Dl.getImage(pl,hl)}return yield Promise.all([...Object.values(Al),...Object.values(bl)]),function(F,ll){return Da._(this,void 0,void 0,(function*(){const Da={};for(const cl in F){Da[cl]={};const hl=dl.getImageCanvasContext((yield ll[cl]).data),pl=(yield F[cl]).data;for(const F in pl){const{width:ll,height:dl,x:fl,y:Al,sdf:bl,pixelRatio:kl,stretchX:Dl,stretchY:Wl,content:Ql,textFitWidth:wc,textFitHeight:Sc}=pl[F];Da[cl][F]={data:null,pixelRatio:kl,sdf:bl,stretchX:Dl,stretchY:Wl,content:Ql,textFitWidth:wc,textFitHeight:Sc,spriteData:{width:ll,height:dl,x:fl,y:Al,context:hl}}}}return Da}))}(Al,bl)}))}(F,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((F=>{if(this._spriteRequest=null,F)for(const Da in F){this._spritesImagesIds[Da]=[];const cl=this._spritesImagesIds[Da]?this._spritesImagesIds[Da].filter((Da=>!(Da in F))):[];for(const F of cl)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const hl in F[Da]){const cl="default"===Da?hl:`${Da}:${hl}`;this._spritesImagesIds[Da].push(cl),cl in this.imageManager.images?this.imageManager.updateImage(cl,F[Da][hl],!1):this.imageManager.addImage(cl,F[Da][hl]),ll&&(this._changedImages[cl]=!0)}}})).catch((F=>{this._spriteRequest=null,hl=F,this.fire(new Da.j(hl))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),ll&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new Da.k("data",{dataType:"style"})),cl&&cl(hl)}))}_unloadSprite(){for(const F of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(F),this._changedImages[F]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new Da.k("data",{dataType:"style"}))}_validateLayer(F){const ll=this.sourceCaches[F.source];if(!ll)return;const cl=F.sourceLayer;if(!cl)return;const hl=ll.getSource();("geojson"===hl.type||hl.vectorLayerIds&&-1===hl.vectorLayerIds.indexOf(cl))&&this.fire(new Da.j(new Error(`Source layer "${cl}" does not exist on source "${hl.id}" as specified by style layer "${F.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(F,ll=!1){const cl=this._serializedAllLayers();if(!F||0===F.length)return Object.values(ll?Da.aB(cl):cl);const hl=[];for(const dl of F)if(cl[dl]){const F=ll?Da.aB(cl[dl]):cl[dl];hl.push(F)}return hl}_serializedAllLayers(){let F=this._serializedLayers;if(F)return F;F=this._serializedLayers={};const Da=Object.keys(this._layers);for(const ll of Da){const Da=this._layers[ll];"custom"!==Da.type&&(F[ll]=Da.serialize())}return F}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.sky&&this.sky.hasTransition())return!0;for(const F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(const F in this._layers)if(this._layers[F].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(F){if(!this._loaded)return;const ll=this._changed;if(ll){const Da=Object.keys(this._updatedLayers),ll=Object.keys(this._removedLayers);(Da.length||ll.length)&&this._updateWorkerLayers(Da,ll);for(const F in this._updatedSources){const Da=this._updatedSources[F];if("reload"===Da)this._reloadSource(F);else{if("clear"!==Da)throw new Error(`Invalid action ${Da}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const cl in this._updatedPaintProps)this._layers[cl].updateTransitions(F);this.light.updateTransitions(F),this.sky.updateTransitions(F),this._resetUpdates()}const cl={};for(const Da in this.sourceCaches){const F=this.sourceCaches[Da];cl[Da]=F.used,F.used=!1}for(const Da of this._order){const ll=this._layers[Da];ll.recalculate(F,this._availableImages),!ll.isHidden(F.zoom)&&ll.source&&(this.sourceCaches[ll.source].used=!0)}for(const hl in cl){const F=this.sourceCaches[hl];!!cl[hl]!=!!F.used&&F.fire(new Da.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:hl}))}this.light.recalculate(F),this.sky.recalculate(F),this.z=F.zoom,ll&&this.fire(new Da.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const F=Object.keys(this._changedImages);if(F.length){for(const Da in this.sourceCaches)this.sourceCaches[Da].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const F in this.sourceCaches)this.sourceCaches[F].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(F,Da){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(F,!1),removedIds:Da})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(F,ll={}){var cl;this._checkLoaded();const hl=this.serialize();if(F=ll.transformStyle?ll.transformStyle(hl,F):F,(null===(cl=ll.validate)||void 0===cl||cl)&&ce(this,Da.u(F)))return!1;(F=Da.aB(F)).layers=Da.az(F.layers);const dl=Da.aC(hl,F),pl=this._getOperationsToPerform(dl);if(pl.unimplemented.length>0)throw new Error(`Unimplemented: ${pl.unimplemented.join(", ")}.`);if(0===pl.operations.length)return!1;for(const Da of pl.operations)Da();return this.stylesheet=F,this._serializedLayers=null,!0}_getOperationsToPerform(F){const Da=[],ll=[];for(const cl of F)switch(cl.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":Da.push((()=>this.addLayer.apply(this,cl.args)));break;case"removeLayer":Da.push((()=>this.removeLayer.apply(this,cl.args)));break;case"setPaintProperty":Da.push((()=>this.setPaintProperty.apply(this,cl.args)));break;case"setLayoutProperty":Da.push((()=>this.setLayoutProperty.apply(this,cl.args)));break;case"setFilter":Da.push((()=>this.setFilter.apply(this,cl.args)));break;case"addSource":Da.push((()=>this.addSource.apply(this,cl.args)));break;case"removeSource":Da.push((()=>this.removeSource.apply(this,cl.args)));break;case"setLayerZoomRange":Da.push((()=>this.setLayerZoomRange.apply(this,cl.args)));break;case"setLight":Da.push((()=>this.setLight.apply(this,cl.args)));break;case"setGeoJSONSourceData":Da.push((()=>this.setGeoJSONSourceData.apply(this,cl.args)));break;case"setGlyphs":Da.push((()=>this.setGlyphs.apply(this,cl.args)));break;case"setSprite":Da.push((()=>this.setSprite.apply(this,cl.args)));break;case"setSky":Da.push((()=>this.setSky.apply(this,cl.args)));break;case"setTerrain":Da.push((()=>this.map.setTerrain.apply(this,cl.args)));break;case"setTransition":Da.push((()=>{}));break;default:ll.push(cl.command)}return{operations:Da,unimplemented:ll}}addImage(F,ll){if(this.getImage(F))return this.fire(new Da.j(new Error(`An image named "${F}" already exists.`)));this.imageManager.addImage(F,ll),this._afterImageUpdated(F)}updateImage(F,Da){this.imageManager.updateImage(F,Da)}getImage(F){return this.imageManager.getImage(F)}removeImage(F){if(!this.getImage(F))return this.fire(new Da.j(new Error(`An image named "${F}" does not exist.`)));this.imageManager.removeImage(F),this._afterImageUpdated(F)}_afterImageUpdated(F){this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new Da.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(F,ll,cl={}){if(this._checkLoaded(),void 0!==this.sourceCaches[F])throw new Error(`Source "${F}" already exists.`);if(!ll.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(ll).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(ll.type)>=0&&this._validate(Da.u.source,`sources.${F}`,ll,null,cl))return;this.map&&this.map._collectResourceTiming&&(ll.collectResourceTiming=!0);const hl=this.sourceCaches[F]=new ut(F,ll,this.dispatcher);hl.style=this,hl.setEventedParent(this,(()=>({isSourceLoaded:hl.loaded(),source:hl.serialize(),sourceId:F}))),hl.onAdd(this.map),this._changed=!0}removeSource(F){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error("There is no source with this ID");for(const cl in this._layers)if(this._layers[cl].source===F)return this.fire(new Da.j(new Error(`Source "${F}" cannot be removed while layer "${cl}" is using it.`)));const ll=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],ll.fire(new Da.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),ll.setEventedParent(null),ll.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(F,Da){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error(`There is no source with this ID=${F}`);const ll=this.sourceCaches[F].getSource();if("geojson"!==ll.type)throw new Error(`geojsonSource.type is ${ll.type}, which is !== 'geojson`);ll.setData(Da),this._changed=!0}getSource(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()}addLayer(F,ll,cl={}){this._checkLoaded();const hl=F.id;if(this.getLayer(hl))return void this.fire(new Da.j(new Error(`Layer "${hl}" already exists on this map.`)));let dl;if("custom"===F.type){if(ce(this,Da.aD(F)))return;dl=Da.aA(F)}else{if("source"in F&&"object"==typeof F.source&&(this.addSource(hl,F.source),F=Da.aB(F),F=Da.e(F,{source:hl})),this._validate(Da.u.layer,`layers.${hl}`,F,{arrayIndex:-1},cl))return;dl=Da.aA(F),this._validateLayer(dl),dl.setEventedParent(this,{layer:{id:hl}})}const pl=ll?this._order.indexOf(ll):this._order.length;if(ll&&-1===pl)this.fire(new Da.j(new Error(`Cannot add layer "${hl}" before non-existing layer "${ll}".`)));else{if(this._order.splice(pl,0,hl),this._layerOrderChanged=!0,this._layers[hl]=dl,this._removedLayers[hl]&&dl.source&&"custom"!==dl.type){const F=this._removedLayers[hl];delete this._removedLayers[hl],F.type!==dl.type?this._updatedSources[dl.source]="clear":(this._updatedSources[dl.source]="reload",this.sourceCaches[dl.source].pause())}this._updateLayer(dl),dl.onAdd&&dl.onAdd(this.map)}}moveLayer(F,ll){if(this._checkLoaded(),this._changed=!0,!this._layers[F])return void this.fire(new Da.j(new Error(`The layer '${F}' does not exist in the map's style and cannot be moved.`)));if(F===ll)return;const cl=this._order.indexOf(F);this._order.splice(cl,1);const hl=ll?this._order.indexOf(ll):this._order.length;ll&&-1===hl?this.fire(new Da.j(new Error(`Cannot move layer "${F}" before non-existing layer "${ll}".`))):(this._order.splice(hl,0,F),this._layerOrderChanged=!0)}removeLayer(F){this._checkLoaded();const ll=this._layers[F];if(!ll)return void this.fire(new Da.j(new Error(`Cannot remove non-existing layer "${F}".`)));ll.setEventedParent(null);const cl=this._order.indexOf(F);this._order.splice(cl,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=ll,delete this._layers[F],this._serializedLayers&&delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],ll.onRemove&&ll.onRemove(this.map)}getLayer(F){return this._layers[F]}getLayersOrder(){return[...this._order]}hasLayer(F){return F in this._layers}setLayerZoomRange(F,ll,cl){this._checkLoaded();const hl=this.getLayer(F);hl?hl.minzoom===ll&&hl.maxzoom===cl||(null!=ll&&(hl.minzoom=ll),null!=cl&&(hl.maxzoom=cl),this._updateLayer(hl)):this.fire(new Da.j(new Error(`Cannot set the zoom range of non-existing layer "${F}".`)))}setFilter(F,ll,cl={}){this._checkLoaded();const hl=this.getLayer(F);if(hl){if(!Da.aE(hl.filter,ll))return null==ll?(hl.filter=void 0,void this._updateLayer(hl)):void(this._validate(Da.u.filter,`layers.${hl.id}.filter`,ll,null,cl)||(hl.filter=Da.aB(ll),this._updateLayer(hl)))}else this.fire(new Da.j(new Error(`Cannot filter non-existing layer "${F}".`)))}getFilter(F){return Da.aB(this.getLayer(F).filter)}setLayoutProperty(F,ll,cl,hl={}){this._checkLoaded();const dl=this.getLayer(F);dl?Da.aE(dl.getLayoutProperty(ll),cl)||(dl.setLayoutProperty(ll,cl,hl),this._updateLayer(dl)):this.fire(new Da.j(new Error(`Cannot style non-existing layer "${F}".`)))}getLayoutProperty(F,ll){const cl=this.getLayer(F);if(cl)return cl.getLayoutProperty(ll);this.fire(new Da.j(new Error(`Cannot get style of non-existing layer "${F}".`)))}setPaintProperty(F,ll,cl,hl={}){this._checkLoaded();const dl=this.getLayer(F);dl?Da.aE(dl.getPaintProperty(ll),cl)||(dl.setPaintProperty(ll,cl,hl)&&this._updateLayer(dl),this._changed=!0,this._updatedPaintProps[F]=!0,this._serializedLayers=null):this.fire(new Da.j(new Error(`Cannot style non-existing layer "${F}".`)))}getPaintProperty(F,Da){return this.getLayer(F).getPaintProperty(Da)}setFeatureState(F,ll){this._checkLoaded();const cl=F.source,hl=F.sourceLayer,dl=this.sourceCaches[cl];if(void 0===dl)return void this.fire(new Da.j(new Error(`The source '${cl}' does not exist in the map's style.`)));const pl=dl.getSource().type;"geojson"===pl&&hl?this.fire(new Da.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==pl||hl?(void 0===F.id&&this.fire(new Da.j(new Error("The feature id parameter must be provided."))),dl.setFeatureState(hl,F.id,ll)):this.fire(new Da.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(F,ll){this._checkLoaded();const cl=F.source,hl=this.sourceCaches[cl];if(void 0===hl)return void this.fire(new Da.j(new Error(`The source '${cl}' does not exist in the map's style.`)));const dl=hl.getSource().type,pl="vector"===dl?F.sourceLayer:void 0;"vector"!==dl||pl?ll&&"string"!=typeof F.id&&"number"!=typeof F.id?this.fire(new Da.j(new Error("A feature id is required to remove its specific state property."))):hl.removeFeatureState(pl,F.id,ll):this.fire(new Da.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(F){this._checkLoaded();const ll=F.source,cl=F.sourceLayer,hl=this.sourceCaches[ll];if(void 0!==hl)return"vector"!==hl.getSource().type||cl?(void 0===F.id&&this.fire(new Da.j(new Error("The feature id parameter must be provided."))),hl.getFeatureState(cl,F.id)):void this.fire(new Da.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new Da.j(new Error(`The source '${ll}' does not exist in the map's style.`)))}getTransition(){return Da.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const F=Da.aF(this.sourceCaches,(F=>F.serialize())),ll=this._serializeByIds(this._order,!0),cl=this.map.getTerrain()||void 0,hl=this.stylesheet;return Da.aG({version:hl.version,name:hl.name,metadata:hl.metadata,light:hl.light,sky:hl.sky,center:hl.center,zoom:hl.zoom,bearing:hl.bearing,pitch:hl.pitch,sprite:hl.sprite,glyphs:hl.glyphs,transition:hl.transition,sources:F,layers:ll,terrain:cl},(F=>void 0!==F))}_updateLayer(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&"raster"!==this.sourceCaches[F.source].getSource().type&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(F){const e=F=>"fill-extrusion"===this._layers[F].type,Da={},ll=[];for(let hl=this._order.length-1;hl>=0;hl--){const cl=this._order[hl];if(e(cl)){Da[cl]=hl;for(const Da of F){const F=Da[cl];if(F)for(const Da of F)ll.push(Da)}}}ll.sort(((F,Da)=>Da.intersectionZ-F.intersectionZ));const cl=[];for(let hl=this._order.length-1;hl>=0;hl--){const dl=this._order[hl];if(e(dl))for(let F=ll.length-1;F>=0;F--){const dl=ll[F].feature;if(Da[dl.layer.id]<hl)break;cl.push(dl),ll.pop()}else for(const Da of F){const F=Da[dl];if(F)for(const Da of F)cl.push(Da.feature)}}return cl}queryRenderedFeatures(F,ll,cl){ll&&ll.filter&&this._validate(Da.u.filter,"queryRenderedFeatures.filter",ll.filter,null,ll);const hl={};if(ll&&ll.layers){if(!Array.isArray(ll.layers))return this.fire(new Da.j(new Error("parameters.layers must be an Array."))),[];for(const F of ll.layers){const ll=this._layers[F];if(!ll)return this.fire(new Da.j(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];hl[ll.source]=!0}}const dl=[];ll.availableImages=this._availableImages;const pl=this._serializedAllLayers();for(const Da in this.sourceCaches)ll.layers&&!hl[Da]||dl.push(q(this.sourceCaches[Da],this._layers,pl,F,ll,cl));return this.placement&&dl.push(function(F,Da,ll,cl,hl,dl,pl){const fl={},Al=dl.queryRenderedSymbols(cl),bl=[];for(const kl of Object.keys(Al).map(Number))bl.push(pl[kl]);bl.sort(V);for(const kl of bl){const ll=kl.featureIndex.lookupSymbolFeatures(Al[kl.bucketInstanceId],Da,kl.bucketIndex,kl.sourceLayerIndex,hl.filter,hl.layers,hl.availableImages,F);for(const F in ll){const Da=fl[F]=fl[F]||[],cl=ll[F];cl.sort(((F,Da)=>{const ll=kl.featureSortOrder;if(ll){const cl=ll.indexOf(F.featureIndex);return ll.indexOf(Da.featureIndex)-cl}return Da.featureIndex-F.featureIndex}));for(const F of cl)Da.push(F)}}for(const kl in fl)fl[kl].forEach((Da=>{const cl=Da.feature,hl=ll[F[kl].source].getFeatureState(cl.layer["source-layer"],cl.id);cl.source=cl.layer.source,cl.layer["source-layer"]&&(cl.sourceLayer=cl.layer["source-layer"]),cl.state=hl}));return fl}(this._layers,pl,this.sourceCaches,F,ll,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(dl)}querySourceFeatures(F,ll){ll&&ll.filter&&this._validate(Da.u.filter,"querySourceFeatures.filter",ll.filter,null,ll);const cl=this.sourceCaches[F];return cl?function(F,Da){const ll=F.getRenderableIds().map((Da=>F.getTileByID(Da))),cl=[],hl={};for(let dl=0;dl<ll.length;dl++){const F=ll[dl],pl=F.tileID.canonical.key;hl[pl]||(hl[pl]=!0,F.querySourceFeatures(cl,Da))}return cl}(cl,ll):[]}getLight(){return this.light.getLight()}setLight(F,ll={}){this._checkLoaded();const cl=this.light.getLight();let hl=!1;for(const dl in F)if(!Da.aE(F[dl],cl[dl])){hl=!0;break}if(!hl)return;const pl={now:dl.now(),transition:Da.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,ll),this.light.updateTransitions(pl)}getSky(){var F;return null===(F=this.stylesheet)||void 0===F?void 0:F.sky}setSky(F,ll={}){const cl=this.getSky();let hl=!1;if(!F&&!cl)return;if(F&&!cl)hl=!0;else if(!F&&cl)hl=!0;else for(const dl in F)if(!Da.aE(F[dl],cl[dl])){hl=!0;break}if(!hl)return;const pl={now:dl.now(),transition:Da.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=F,this.sky.setSky(F,ll),this.sky.updateTransitions(pl)}_validate(F,ll,cl,hl,dl={}){return(!dl||!1!==dl.validate)&&ce(this,F.call(Da.u,Da.e({key:ll,style:this.serialize(),value:cl,styleSpec:Da.v},hl)))}_remove(F=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),nt().off(Lu,this._rtlPluginLoaded);for(const Da in this._layers)this._layers[Da].setEventedParent(null);for(const Da in this.sourceCaches){const F=this.sourceCaches[Da];F.setEventedParent(null),F.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),F&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(F)}_clearSource(F){this.sourceCaches[F].clearTiles()}_reloadSource(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()}_updateSources(F){for(const Da in this.sourceCaches)this.sourceCaches[Da].update(F,this.map.terrain)}_generateCollisionBoxes(){for(const F in this.sourceCaches)this._reloadSource(F)}_updatePlacement(F,Da,ll,cl,hl=!1){let pl=!1,fl=!1;const Al={};for(const dl of this._order){const Da=this._layers[dl];if("symbol"!==Da.type)continue;if(!Al[Da.source]){const F=this.sourceCaches[Da.source];Al[Da.source]=F.getRenderableIds(!0).map((Da=>F.getTileByID(Da))).sort(((F,Da)=>Da.tileID.overscaledZ-F.tileID.overscaledZ||(F.tileID.isLessThan(Da.tileID)?-1:1)))}const ll=this.crossTileSymbolIndex.addLayer(Da,Al[Da.source],F.center.lng);pl=pl||ll}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((hl=hl||this._layerOrderChanged||0===ll)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(dl.now(),F.zoom))&&(this.pauseablePlacement=new se(F,this.map.terrain,this._order,hl,Da,ll,cl,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Al),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(dl.now()),fl=!0),pl&&this.pauseablePlacement.placement.setStale()),fl||pl)for(const dl of this._order){const F=this._layers[dl];"symbol"===F.type&&this.placement.updateLayerOpacities(F,Al[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(dl.now())}_releaseSymbolFadeTiles(){for(const F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()}getImages(F,ll){return Da._(this,void 0,void 0,(function*(){const F=yield this.imageManager.getImages(ll.icons);this._updateTilesForChangedImages();const Da=this.sourceCaches[ll.source];return Da&&Da.setDependencies(ll.tileID.key,ll.type,ll.icons),F}))}getGlyphs(F,ll){return Da._(this,void 0,void 0,(function*(){const F=yield this.glyphManager.getGlyphs(ll.stacks),Da=this.sourceCaches[ll.source];return Da&&Da.setDependencies(ll.tileID.key,ll.type,[""]),F}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(F,ll={}){this._checkLoaded(),F&&this._validate(Da.u.glyphs,"glyphs",F,null,ll)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=F,this.glyphManager.entries={},this.glyphManager.setURL(F))}addSprite(F,ll,cl={},hl){this._checkLoaded();const dl=[{id:F,url:ll}],pl=[...x(this.stylesheet.sprite),...dl];this._validate(Da.u.sprite,"sprite",pl,null,cl)||(this.stylesheet.sprite=pl,this._loadSprite(dl,!0,hl))}removeSprite(F){this._checkLoaded();const ll=x(this.stylesheet.sprite);if(ll.find((Da=>Da.id===F))){if(this._spritesImagesIds[F])for(const Da of this._spritesImagesIds[F])this.imageManager.removeImage(Da),this._changedImages[Da]=!0;ll.splice(ll.findIndex((Da=>Da.id===F)),1),this.stylesheet.sprite=ll.length>0?ll:void 0,delete this._spritesImagesIds[F],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new Da.k("data",{dataType:"style"}))}else this.fire(new Da.j(new Error(`Sprite "${F}" doesn't exists on this map.`)))}getSprite(){return x(this.stylesheet.sprite)}setSprite(F,ll={},cl){this._checkLoaded(),F&&this._validate(Da.u.sprite,"sprite",F,null,ll)||(this.stylesheet.sprite=F,F?this._loadSprite(F,!0,cl):(this._unloadSprite(),cl&&cl(null)))}}var od=Da.Y([{name:"a_pos",type:"Int16",components:2}]);const ld={prelude:me("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:me("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:me("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:me("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:me("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:me("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),heatmapTexture:me("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:me("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:me("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:me("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:me("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:me("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:me("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:me("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:me("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:me("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:me("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:me("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:me("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:me("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:me("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:me("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:me("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:me("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:me("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:me("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:me("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:me("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:me("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:me("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function me(F,Da){const ll=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,cl=Da.match(/attribute ([\w]+) ([\w]+)/g),hl=F.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),dl=Da.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),pl=dl?dl.concat(hl):hl,fl={};return{fragmentSource:F=F.replace(ll,((F,Da,ll,cl,hl)=>(fl[hl]=!0,"define"===Da?`\n#ifndef HAS_UNIFORM_u_${hl}\nvarying ${ll} ${cl} ${hl};\n#else\nuniform ${ll} ${cl} u_${hl};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${hl}\n    ${ll} ${cl} ${hl} = u_${hl};\n#endif\n`))),vertexSource:Da=Da.replace(ll,((F,Da,ll,cl,hl)=>{const dl="float"===cl?"vec2":"vec4",pl=hl.match(/color/)?"color":dl;return fl[hl]?"define"===Da?`\n#ifndef HAS_UNIFORM_u_${hl}\nuniform lowp float u_${hl}_t;\nattribute ${ll} ${dl} a_${hl};\nvarying ${ll} ${cl} ${hl};\n#else\nuniform ${ll} ${cl} u_${hl};\n#endif\n`:"vec4"===pl?`\n#ifndef HAS_UNIFORM_u_${hl}\n    ${hl} = a_${hl};\n#else\n    ${ll} ${cl} ${hl} = u_${hl};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${hl}\n    ${hl} = unpack_mix_${pl}(a_${hl}, u_${hl}_t);\n#else\n    ${ll} ${cl} ${hl} = u_${hl};\n#endif\n`:"define"===Da?`\n#ifndef HAS_UNIFORM_u_${hl}\nuniform lowp float u_${hl}_t;\nattribute ${ll} ${dl} a_${hl};\n#else\nuniform ${ll} ${cl} u_${hl};\n#endif\n`:"vec4"===pl?`\n#ifndef HAS_UNIFORM_u_${hl}\n    ${ll} ${cl} ${hl} = a_${hl};\n#else\n    ${ll} ${cl} ${hl} = u_${hl};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${hl}\n    ${ll} ${cl} ${hl} = unpack_mix_${pl}(a_${hl}, u_${hl}_t);\n#else\n    ${ll} ${cl} ${hl} = u_${hl};\n#endif\n`})),staticAttributes:cl,staticUniforms:pl}}class fe{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(F,Da,ll,cl,hl,dl,pl,fl,Al){this.context=F;let bl=this.boundPaintVertexBuffers.length!==cl.length;for(let kl=0;!bl&&kl<cl.length;kl++)this.boundPaintVertexBuffers[kl]!==cl[kl]&&(bl=!0);!this.vao||this.boundProgram!==Da||this.boundLayoutVertexBuffer!==ll||bl||this.boundIndexBuffer!==hl||this.boundVertexOffset!==dl||this.boundDynamicVertexBuffer!==pl||this.boundDynamicVertexBuffer2!==fl||this.boundDynamicVertexBuffer3!==Al?this.freshBind(Da,ll,cl,hl,dl,pl,fl,Al):(F.bindVertexArray.set(this.vao),pl&&pl.bind(),hl&&hl.dynamicDraw&&hl.bind(),fl&&fl.bind(),Al&&Al.bind())}freshBind(F,Da,ll,cl,hl,dl,pl,fl){const Al=F.numAttributes,bl=this.context,kl=bl.gl;this.vao&&this.destroy(),this.vao=bl.createVertexArray(),bl.bindVertexArray.set(this.vao),this.boundProgram=F,this.boundLayoutVertexBuffer=Da,this.boundPaintVertexBuffers=ll,this.boundIndexBuffer=cl,this.boundVertexOffset=hl,this.boundDynamicVertexBuffer=dl,this.boundDynamicVertexBuffer2=pl,this.boundDynamicVertexBuffer3=fl,Da.enableAttributes(kl,F);for(const Dl of ll)Dl.enableAttributes(kl,F);dl&&dl.enableAttributes(kl,F),pl&&pl.enableAttributes(kl,F),fl&&fl.enableAttributes(kl,F),Da.bind(),Da.setVertexAttribPointers(kl,F,hl);for(const Dl of ll)Dl.bind(),Dl.setVertexAttribPointers(kl,F,hl);dl&&(dl.bind(),dl.setVertexAttribPointers(kl,F,hl)),cl&&cl.bind(),pl&&(pl.bind(),pl.setVertexAttribPointers(kl,F,hl)),fl&&(fl.bind(),fl.setVertexAttribPointers(kl,F,hl)),bl.currentNumAttributes=Al}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ge=(F,ll,cl,hl,dl)=>({u_matrix:F,u_texture:0,u_ele_delta:ll,u_fog_matrix:cl,u_fog_color:hl?hl.properties.get("fog-color"):Da.aM.white,u_fog_ground_blend:hl?hl.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:hl?hl.calculateFogBlendOpacity(dl):0,u_horizon_color:hl?hl.properties.get("horizon-color"):Da.aM.white,u_horizon_fog_blend:hl?hl.properties.get("horizon-fog-blend"):1});function ve(F){const Da=[];for(let ll=0;ll<F.length;ll++){if(null===F[ll])continue;const cl=F[ll].split(" ");Da.push(cl.pop())}return Da}class xe{constructor(F,ll,cl,hl,dl,pl){const fl=F.gl;this.program=fl.createProgram();const Al=ve(ll.staticAttributes),bl=cl?cl.getBinderAttributes():[],kl=Al.concat(bl),Dl=ld.prelude.staticUniforms?ve(ld.prelude.staticUniforms):[],Wl=ll.staticUniforms?ve(ll.staticUniforms):[],Ql=cl?cl.getBinderUniforms():[],wc=Dl.concat(Wl).concat(Ql),Sc=[];for(const Da of wc)Sc.indexOf(Da)<0&&Sc.push(Da);const eu=cl?cl.defines():[];dl&&eu.push("#define OVERDRAW_INSPECTOR;"),pl&&eu.push("#define TERRAIN3D;");const iu=eu.concat(ld.prelude.fragmentSource,ll.fragmentSource).join("\n"),su=eu.concat(ld.prelude.vertexSource,ll.vertexSource).join("\n"),cu=fl.createShader(fl.FRAGMENT_SHADER);if(fl.isContextLost())return void(this.failedToCreate=!0);if(fl.shaderSource(cu,iu),fl.compileShader(cu),!fl.getShaderParameter(cu,fl.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${fl.getShaderInfoLog(cu)}`);fl.attachShader(this.program,cu);const uu=fl.createShader(fl.VERTEX_SHADER);if(fl.isContextLost())return void(this.failedToCreate=!0);if(fl.shaderSource(uu,su),fl.compileShader(uu),!fl.getShaderParameter(uu,fl.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${fl.getShaderInfoLog(uu)}`);fl.attachShader(this.program,uu),this.attributes={};const hu={};this.numAttributes=kl.length;for(let Da=0;Da<this.numAttributes;Da++)kl[Da]&&(fl.bindAttribLocation(this.program,Da,kl[Da]),this.attributes[kl[Da]]=Da);if(fl.linkProgram(this.program),!fl.getProgramParameter(this.program,fl.LINK_STATUS))throw new Error(`Program failed to link: ${fl.getProgramInfoLog(this.program)}`);fl.deleteShader(uu),fl.deleteShader(cu);for(let Da=0;Da<Sc.length;Da++){const F=Sc[Da];if(F&&!hu[F]){const Da=fl.getUniformLocation(this.program,F);Da&&(hu[F]=Da)}}this.fixedUniforms=hl(F,hu),this.terrainUniforms=((F,ll)=>({u_depth:new Da.aH(F,ll.u_depth),u_terrain:new Da.aH(F,ll.u_terrain),u_terrain_dim:new Da.aI(F,ll.u_terrain_dim),u_terrain_matrix:new Da.aJ(F,ll.u_terrain_matrix),u_terrain_unpack:new Da.aK(F,ll.u_terrain_unpack),u_terrain_exaggeration:new Da.aI(F,ll.u_terrain_exaggeration)}))(F,hu),this.binderUniforms=cl?cl.getUniforms(F,hu):[]}draw(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc,eu,iu){const su=F.gl;if(this.failedToCreate)return;if(F.program.set(this.program),F.setDepthMode(ll),F.setStencilMode(cl),F.setColorMode(hl),F.setCullFace(dl),fl){F.activeTexture.set(su.TEXTURE2),su.bindTexture(su.TEXTURE_2D,fl.depthTexture),F.activeTexture.set(su.TEXTURE3),su.bindTexture(su.TEXTURE_2D,fl.texture);for(const F in this.terrainUniforms)this.terrainUniforms[F].set(fl[F])}for(const uu in this.fixedUniforms)this.fixedUniforms[uu].set(pl[uu]);wc&&wc.setUniforms(F,this.binderUniforms,Wl,{zoom:Ql});let cu=0;switch(Da){case su.LINES:cu=2;break;case su.TRIANGLES:cu=3;break;case su.LINE_STRIP:cu=1}for(const uu of Dl.get()){const ll=uu.vaos||(uu.vaos={});(ll[Al]||(ll[Al]=new fe)).bind(F,this,bl,wc?wc.getPaintVertexBuffers():[],kl,uu.vertexOffset,Sc,eu,iu),su.drawElements(Da,uu.primitiveLength*cu,su.UNSIGNED_SHORT,uu.primitiveOffset*cu*2)}}}function ye(F,Da,ll){const cl=1/Bt(ll,1,Da.transform.tileZoom),hl=Math.pow(2,ll.tileID.overscaledZ),dl=ll.tileSize*Math.pow(2,Da.transform.tileZoom)/hl,pl=dl*(ll.tileID.canonical.x+ll.tileID.wrap*hl),fl=dl*ll.tileID.canonical.y;return{u_image:0,u_texsize:ll.imageAtlasTexture.size,u_scale:[cl,F.fromScale,F.toScale],u_fade:F.t,u_pixel_coord_upper:[pl>>16,fl>>16],u_pixel_coord_lower:[65535&pl,65535&fl]}}const be=(F,ll,cl,hl)=>{const dl=ll.style.light,pl=dl.properties.get("position"),fl=[pl.x,pl.y,pl.z],Al=function(){var F=new Da.A(9);return Da.A!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[5]=0,F[6]=0,F[7]=0),F[0]=1,F[4]=1,F[8]=1,F}();"viewport"===dl.properties.get("anchor")&&function(F,Da){var ll=Math.sin(Da),cl=Math.cos(Da);F[0]=cl,F[1]=ll,F[2]=0,F[3]=-ll,F[4]=cl,F[5]=0,F[6]=0,F[7]=0,F[8]=1}(Al,-ll.transform.angle),function(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2];F[0]=cl*ll[0]+hl*ll[3]+dl*ll[6],F[1]=cl*ll[1]+hl*ll[4]+dl*ll[7],F[2]=cl*ll[2]+hl*ll[5]+dl*ll[8]}(fl,fl,Al);const bl=dl.properties.get("color");return{u_matrix:F,u_lightpos:fl,u_lightintensity:dl.properties.get("intensity"),u_lightcolor:[bl.r,bl.g,bl.b],u_vertical_gradient:+cl,u_opacity:hl}},we=(F,ll,cl,hl,dl,pl,fl)=>Da.e(be(F,ll,cl,hl),ye(pl,ll,fl),{u_height_factor:-Math.pow(2,dl.overscaledZ)/fl.tileSize/8}),Te=F=>({u_matrix:F}),Ie=(F,ll,cl,hl)=>Da.e(Te(F),ye(cl,ll,hl)),Ee=(F,Da)=>({u_matrix:F,u_world:Da}),Pe=(F,ll,cl,hl,dl)=>Da.e(Ie(F,ll,cl,hl),{u_world:dl}),Ce=(F,Da,ll,cl)=>{const hl=F.transform;let dl,pl;if("map"===cl.paint.get("circle-pitch-alignment")){const F=Bt(ll,1,hl.zoom);dl=!0,pl=[F,F]}else dl=!1,pl=hl.pixelsToGLUnits;return{u_camera_to_center_distance:hl.cameraToCenterDistance,u_scale_with_map:+("map"===cl.paint.get("circle-pitch-scale")),u_matrix:F.translatePosMatrix(Da.posMatrix,ll,cl.paint.get("circle-translate"),cl.paint.get("circle-translate-anchor")),u_pitch_with_map:+dl,u_device_pixel_ratio:F.pixelRatio,u_extrude_scale:pl}},Se=(F,Da,ll)=>({u_matrix:F,u_inv_matrix:Da,u_camera_to_center_distance:ll.cameraToCenterDistance,u_viewport_size:[ll.width,ll.height]}),ze=(F,Da,ll=1)=>({u_matrix:F,u_color:Da,u_overlay:0,u_overlay_scale:ll}),De=F=>({u_matrix:F}),Me=(F,Da,ll,cl)=>({u_matrix:F,u_extrude_scale:Bt(Da,1,ll),u_intensity:cl}),Ae=(F,ll,cl,hl)=>{const dl=Da.H();Da.aP(dl,0,F.width,F.height,0,0,1);const pl=F.context.gl;return{u_matrix:dl,u_world:[pl.drawingBufferWidth,pl.drawingBufferHeight],u_image:cl,u_color_ramp:hl,u_opacity:ll.paint.get("heatmap-opacity")}};function Re(F,ll){const cl=Math.pow(2,ll.canonical.z),hl=ll.canonical.y;return[new Da.Z(0,hl/cl).toLngLat().lat,new Da.Z(0,(hl+1)/cl).toLngLat().lat]}const ke=(F,Da,ll,cl)=>{const hl=F.transform;return{u_matrix:Ne(F,Da,ll,cl),u_ratio:1/Bt(Da,1,hl.zoom),u_device_pixel_ratio:F.pixelRatio,u_units_to_pixels:[1/hl.pixelsToGLUnits[0],1/hl.pixelsToGLUnits[1]]}},Le=(F,ll,cl,hl,dl)=>Da.e(ke(F,ll,cl,dl),{u_image:0,u_image_height:hl}),Fe=(F,Da,ll,cl,hl)=>{const dl=F.transform,pl=Oe(Da,dl);return{u_matrix:Ne(F,Da,ll,hl),u_texsize:Da.imageAtlasTexture.size,u_ratio:1/Bt(Da,1,dl.zoom),u_device_pixel_ratio:F.pixelRatio,u_image:0,u_scale:[pl,cl.fromScale,cl.toScale],u_fade:cl.t,u_units_to_pixels:[1/dl.pixelsToGLUnits[0],1/dl.pixelsToGLUnits[1]]}},Be=(F,ll,cl,hl,dl,pl)=>{const fl=F.lineAtlas,Al=Oe(ll,F.transform),bl="round"===cl.layout.get("line-cap"),kl=fl.getDash(hl.from,bl),Dl=fl.getDash(hl.to,bl),Wl=kl.width*dl.fromScale,Ql=Dl.width*dl.toScale;return Da.e(ke(F,ll,cl,pl),{u_patternscale_a:[Al/Wl,-kl.height/2],u_patternscale_b:[Al/Ql,-Dl.height/2],u_sdfgamma:fl.width/(256*Math.min(Wl,Ql)*F.pixelRatio)/2,u_image:0,u_tex_y_a:kl.y,u_tex_y_b:Dl.y,u_mix:dl.t})};function Oe(F,Da){return 1/Bt(F,1,Da.tileZoom)}function Ne(F,Da,ll,cl){return F.translatePosMatrix(cl?cl.posMatrix:Da.tileID.posMatrix,Da,ll.paint.get("line-translate"),ll.paint.get("line-translate-anchor"))}const Ue=(F,Da,ll,cl,hl)=>{return{u_matrix:F,u_tl_parent:Da,u_scale_parent:ll,u_buffer_scale:1,u_fade_t:cl.mix,u_opacity:cl.opacity*hl.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:hl.paint.get("raster-brightness-min"),u_brightness_high:hl.paint.get("raster-brightness-max"),u_saturation_factor:(pl=hl.paint.get("raster-saturation"),pl>0?1-1/(1.001-pl):-pl),u_contrast_factor:(dl=hl.paint.get("raster-contrast"),dl>0?1/(1-dl):1+dl),u_spin_weights:je(hl.paint.get("raster-hue-rotate"))};var dl,pl};function je(F){F*=Math.PI/180;const Da=Math.sin(F),ll=Math.cos(F);return[(2*ll+1)/3,(-Math.sqrt(3)*Da-ll+1)/3,(Math.sqrt(3)*Da-ll+1)/3]}const Ze=(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql)=>{const wc=pl.transform;return{u_is_size_zoom_constant:+("constant"===F||"source"===F),u_is_size_feature_constant:+("constant"===F||"camera"===F),u_size_t:Da?Da.uSizeT:0,u_size:Da?Da.uSize:0,u_camera_to_center_distance:wc.cameraToCenterDistance,u_pitch:wc.pitch/360*2*Math.PI,u_rotate_symbol:+ll,u_aspect_ratio:wc.width/wc.height,u_fade_change:pl.options.fadeDuration?pl.symbolFadeChange:1,u_matrix:fl,u_label_plane_matrix:Al,u_coord_matrix:bl,u_is_text:+Dl,u_pitch_with_map:+cl,u_is_along_line:hl,u_is_variable_anchor:dl,u_texsize:Wl,u_texture:0,u_translation:kl,u_pitched_scale:Ql}},qe=(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc)=>{const eu=fl.transform;return Da.e(Ze(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,Sc),{u_gamma_scale:hl?Math.cos(eu._pitch)*eu.cameraToCenterDistance:1,u_device_pixel_ratio:fl.pixelRatio,u_is_halo:+wc})},Ve=(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc)=>Da.e(qe(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,!0,Wl,!0,wc),{u_texsize_icon:Ql,u_texture_icon:1}),Ge=(F,Da,ll)=>({u_matrix:F,u_opacity:Da,u_color:ll}),He=(F,ll,cl,hl,dl,pl)=>Da.e(function(F,Da,ll,cl){const hl=ll.imageManager.getPattern(F.from.toString()),dl=ll.imageManager.getPattern(F.to.toString()),{width:pl,height:fl}=ll.imageManager.getPixelSize(),Al=Math.pow(2,cl.tileID.overscaledZ),bl=cl.tileSize*Math.pow(2,ll.transform.tileZoom)/Al,kl=bl*(cl.tileID.canonical.x+cl.tileID.wrap*Al),Dl=bl*cl.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:hl.tl,u_pattern_br_a:hl.br,u_pattern_tl_b:dl.tl,u_pattern_br_b:dl.br,u_texsize:[pl,fl],u_mix:Da.t,u_pattern_size_a:hl.displaySize,u_pattern_size_b:dl.displaySize,u_scale_a:Da.fromScale,u_scale_b:Da.toScale,u_tile_units_to_pixels:1/Bt(cl,1,ll.transform.tileZoom),u_pixel_coord_upper:[kl>>16,Dl>>16],u_pixel_coord_lower:[65535&kl,65535&Dl]}}(hl,pl,cl,dl),{u_matrix:F,u_opacity:ll}),cd={fillExtrusion:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_lightpos:new Da.aN(F,ll.u_lightpos),u_lightintensity:new Da.aI(F,ll.u_lightintensity),u_lightcolor:new Da.aN(F,ll.u_lightcolor),u_vertical_gradient:new Da.aI(F,ll.u_vertical_gradient),u_opacity:new Da.aI(F,ll.u_opacity)}),fillExtrusionPattern:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_lightpos:new Da.aN(F,ll.u_lightpos),u_lightintensity:new Da.aI(F,ll.u_lightintensity),u_lightcolor:new Da.aN(F,ll.u_lightcolor),u_vertical_gradient:new Da.aI(F,ll.u_vertical_gradient),u_height_factor:new Da.aI(F,ll.u_height_factor),u_image:new Da.aH(F,ll.u_image),u_texsize:new Da.aO(F,ll.u_texsize),u_pixel_coord_upper:new Da.aO(F,ll.u_pixel_coord_upper),u_pixel_coord_lower:new Da.aO(F,ll.u_pixel_coord_lower),u_scale:new Da.aN(F,ll.u_scale),u_fade:new Da.aI(F,ll.u_fade),u_opacity:new Da.aI(F,ll.u_opacity)}),fill:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix)}),fillPattern:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_image:new Da.aH(F,ll.u_image),u_texsize:new Da.aO(F,ll.u_texsize),u_pixel_coord_upper:new Da.aO(F,ll.u_pixel_coord_upper),u_pixel_coord_lower:new Da.aO(F,ll.u_pixel_coord_lower),u_scale:new Da.aN(F,ll.u_scale),u_fade:new Da.aI(F,ll.u_fade)}),fillOutline:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_world:new Da.aO(F,ll.u_world)}),fillOutlinePattern:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_world:new Da.aO(F,ll.u_world),u_image:new Da.aH(F,ll.u_image),u_texsize:new Da.aO(F,ll.u_texsize),u_pixel_coord_upper:new Da.aO(F,ll.u_pixel_coord_upper),u_pixel_coord_lower:new Da.aO(F,ll.u_pixel_coord_lower),u_scale:new Da.aN(F,ll.u_scale),u_fade:new Da.aI(F,ll.u_fade)}),circle:(F,ll)=>({u_camera_to_center_distance:new Da.aI(F,ll.u_camera_to_center_distance),u_scale_with_map:new Da.aH(F,ll.u_scale_with_map),u_pitch_with_map:new Da.aH(F,ll.u_pitch_with_map),u_extrude_scale:new Da.aO(F,ll.u_extrude_scale),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_matrix:new Da.aJ(F,ll.u_matrix)}),collisionBox:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_pixel_extrude_scale:new Da.aO(F,ll.u_pixel_extrude_scale)}),collisionCircle:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_inv_matrix:new Da.aJ(F,ll.u_inv_matrix),u_camera_to_center_distance:new Da.aI(F,ll.u_camera_to_center_distance),u_viewport_size:new Da.aO(F,ll.u_viewport_size)}),debug:(F,ll)=>({u_color:new Da.aL(F,ll.u_color),u_matrix:new Da.aJ(F,ll.u_matrix),u_overlay:new Da.aH(F,ll.u_overlay),u_overlay_scale:new Da.aI(F,ll.u_overlay_scale)}),clippingMask:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix)}),heatmap:(F,ll)=>({u_extrude_scale:new Da.aI(F,ll.u_extrude_scale),u_intensity:new Da.aI(F,ll.u_intensity),u_matrix:new Da.aJ(F,ll.u_matrix)}),heatmapTexture:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_world:new Da.aO(F,ll.u_world),u_image:new Da.aH(F,ll.u_image),u_color_ramp:new Da.aH(F,ll.u_color_ramp),u_opacity:new Da.aI(F,ll.u_opacity)}),hillshade:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_image:new Da.aH(F,ll.u_image),u_latrange:new Da.aO(F,ll.u_latrange),u_light:new Da.aO(F,ll.u_light),u_shadow:new Da.aL(F,ll.u_shadow),u_highlight:new Da.aL(F,ll.u_highlight),u_accent:new Da.aL(F,ll.u_accent)}),hillshadePrepare:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_image:new Da.aH(F,ll.u_image),u_dimension:new Da.aO(F,ll.u_dimension),u_zoom:new Da.aI(F,ll.u_zoom),u_unpack:new Da.aK(F,ll.u_unpack)}),line:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_ratio:new Da.aI(F,ll.u_ratio),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_units_to_pixels:new Da.aO(F,ll.u_units_to_pixels)}),lineGradient:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_ratio:new Da.aI(F,ll.u_ratio),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_units_to_pixels:new Da.aO(F,ll.u_units_to_pixels),u_image:new Da.aH(F,ll.u_image),u_image_height:new Da.aI(F,ll.u_image_height)}),linePattern:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_texsize:new Da.aO(F,ll.u_texsize),u_ratio:new Da.aI(F,ll.u_ratio),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_image:new Da.aH(F,ll.u_image),u_units_to_pixels:new Da.aO(F,ll.u_units_to_pixels),u_scale:new Da.aN(F,ll.u_scale),u_fade:new Da.aI(F,ll.u_fade)}),lineSDF:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_ratio:new Da.aI(F,ll.u_ratio),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_units_to_pixels:new Da.aO(F,ll.u_units_to_pixels),u_patternscale_a:new Da.aO(F,ll.u_patternscale_a),u_patternscale_b:new Da.aO(F,ll.u_patternscale_b),u_sdfgamma:new Da.aI(F,ll.u_sdfgamma),u_image:new Da.aH(F,ll.u_image),u_tex_y_a:new Da.aI(F,ll.u_tex_y_a),u_tex_y_b:new Da.aI(F,ll.u_tex_y_b),u_mix:new Da.aI(F,ll.u_mix)}),raster:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_tl_parent:new Da.aO(F,ll.u_tl_parent),u_scale_parent:new Da.aI(F,ll.u_scale_parent),u_buffer_scale:new Da.aI(F,ll.u_buffer_scale),u_fade_t:new Da.aI(F,ll.u_fade_t),u_opacity:new Da.aI(F,ll.u_opacity),u_image0:new Da.aH(F,ll.u_image0),u_image1:new Da.aH(F,ll.u_image1),u_brightness_low:new Da.aI(F,ll.u_brightness_low),u_brightness_high:new Da.aI(F,ll.u_brightness_high),u_saturation_factor:new Da.aI(F,ll.u_saturation_factor),u_contrast_factor:new Da.aI(F,ll.u_contrast_factor),u_spin_weights:new Da.aN(F,ll.u_spin_weights)}),symbolIcon:(F,ll)=>({u_is_size_zoom_constant:new Da.aH(F,ll.u_is_size_zoom_constant),u_is_size_feature_constant:new Da.aH(F,ll.u_is_size_feature_constant),u_size_t:new Da.aI(F,ll.u_size_t),u_size:new Da.aI(F,ll.u_size),u_camera_to_center_distance:new Da.aI(F,ll.u_camera_to_center_distance),u_pitch:new Da.aI(F,ll.u_pitch),u_rotate_symbol:new Da.aH(F,ll.u_rotate_symbol),u_aspect_ratio:new Da.aI(F,ll.u_aspect_ratio),u_fade_change:new Da.aI(F,ll.u_fade_change),u_matrix:new Da.aJ(F,ll.u_matrix),u_label_plane_matrix:new Da.aJ(F,ll.u_label_plane_matrix),u_coord_matrix:new Da.aJ(F,ll.u_coord_matrix),u_is_text:new Da.aH(F,ll.u_is_text),u_pitch_with_map:new Da.aH(F,ll.u_pitch_with_map),u_is_along_line:new Da.aH(F,ll.u_is_along_line),u_is_variable_anchor:new Da.aH(F,ll.u_is_variable_anchor),u_texsize:new Da.aO(F,ll.u_texsize),u_texture:new Da.aH(F,ll.u_texture),u_translation:new Da.aO(F,ll.u_translation),u_pitched_scale:new Da.aI(F,ll.u_pitched_scale)}),symbolSDF:(F,ll)=>({u_is_size_zoom_constant:new Da.aH(F,ll.u_is_size_zoom_constant),u_is_size_feature_constant:new Da.aH(F,ll.u_is_size_feature_constant),u_size_t:new Da.aI(F,ll.u_size_t),u_size:new Da.aI(F,ll.u_size),u_camera_to_center_distance:new Da.aI(F,ll.u_camera_to_center_distance),u_pitch:new Da.aI(F,ll.u_pitch),u_rotate_symbol:new Da.aH(F,ll.u_rotate_symbol),u_aspect_ratio:new Da.aI(F,ll.u_aspect_ratio),u_fade_change:new Da.aI(F,ll.u_fade_change),u_matrix:new Da.aJ(F,ll.u_matrix),u_label_plane_matrix:new Da.aJ(F,ll.u_label_plane_matrix),u_coord_matrix:new Da.aJ(F,ll.u_coord_matrix),u_is_text:new Da.aH(F,ll.u_is_text),u_pitch_with_map:new Da.aH(F,ll.u_pitch_with_map),u_is_along_line:new Da.aH(F,ll.u_is_along_line),u_is_variable_anchor:new Da.aH(F,ll.u_is_variable_anchor),u_texsize:new Da.aO(F,ll.u_texsize),u_texture:new Da.aH(F,ll.u_texture),u_gamma_scale:new Da.aI(F,ll.u_gamma_scale),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_is_halo:new Da.aH(F,ll.u_is_halo),u_translation:new Da.aO(F,ll.u_translation),u_pitched_scale:new Da.aI(F,ll.u_pitched_scale)}),symbolTextAndIcon:(F,ll)=>({u_is_size_zoom_constant:new Da.aH(F,ll.u_is_size_zoom_constant),u_is_size_feature_constant:new Da.aH(F,ll.u_is_size_feature_constant),u_size_t:new Da.aI(F,ll.u_size_t),u_size:new Da.aI(F,ll.u_size),u_camera_to_center_distance:new Da.aI(F,ll.u_camera_to_center_distance),u_pitch:new Da.aI(F,ll.u_pitch),u_rotate_symbol:new Da.aH(F,ll.u_rotate_symbol),u_aspect_ratio:new Da.aI(F,ll.u_aspect_ratio),u_fade_change:new Da.aI(F,ll.u_fade_change),u_matrix:new Da.aJ(F,ll.u_matrix),u_label_plane_matrix:new Da.aJ(F,ll.u_label_plane_matrix),u_coord_matrix:new Da.aJ(F,ll.u_coord_matrix),u_is_text:new Da.aH(F,ll.u_is_text),u_pitch_with_map:new Da.aH(F,ll.u_pitch_with_map),u_is_along_line:new Da.aH(F,ll.u_is_along_line),u_is_variable_anchor:new Da.aH(F,ll.u_is_variable_anchor),u_texsize:new Da.aO(F,ll.u_texsize),u_texsize_icon:new Da.aO(F,ll.u_texsize_icon),u_texture:new Da.aH(F,ll.u_texture),u_texture_icon:new Da.aH(F,ll.u_texture_icon),u_gamma_scale:new Da.aI(F,ll.u_gamma_scale),u_device_pixel_ratio:new Da.aI(F,ll.u_device_pixel_ratio),u_is_halo:new Da.aH(F,ll.u_is_halo),u_translation:new Da.aO(F,ll.u_translation),u_pitched_scale:new Da.aI(F,ll.u_pitched_scale)}),background:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_opacity:new Da.aI(F,ll.u_opacity),u_color:new Da.aL(F,ll.u_color)}),backgroundPattern:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_opacity:new Da.aI(F,ll.u_opacity),u_image:new Da.aH(F,ll.u_image),u_pattern_tl_a:new Da.aO(F,ll.u_pattern_tl_a),u_pattern_br_a:new Da.aO(F,ll.u_pattern_br_a),u_pattern_tl_b:new Da.aO(F,ll.u_pattern_tl_b),u_pattern_br_b:new Da.aO(F,ll.u_pattern_br_b),u_texsize:new Da.aO(F,ll.u_texsize),u_mix:new Da.aI(F,ll.u_mix),u_pattern_size_a:new Da.aO(F,ll.u_pattern_size_a),u_pattern_size_b:new Da.aO(F,ll.u_pattern_size_b),u_scale_a:new Da.aI(F,ll.u_scale_a),u_scale_b:new Da.aI(F,ll.u_scale_b),u_pixel_coord_upper:new Da.aO(F,ll.u_pixel_coord_upper),u_pixel_coord_lower:new Da.aO(F,ll.u_pixel_coord_lower),u_tile_units_to_pixels:new Da.aI(F,ll.u_tile_units_to_pixels)}),terrain:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_texture:new Da.aH(F,ll.u_texture),u_ele_delta:new Da.aI(F,ll.u_ele_delta),u_fog_matrix:new Da.aJ(F,ll.u_fog_matrix),u_fog_color:new Da.aL(F,ll.u_fog_color),u_fog_ground_blend:new Da.aI(F,ll.u_fog_ground_blend),u_fog_ground_blend_opacity:new Da.aI(F,ll.u_fog_ground_blend_opacity),u_horizon_color:new Da.aL(F,ll.u_horizon_color),u_horizon_fog_blend:new Da.aI(F,ll.u_horizon_fog_blend)}),terrainDepth:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_ele_delta:new Da.aI(F,ll.u_ele_delta)}),terrainCoords:(F,ll)=>({u_matrix:new Da.aJ(F,ll.u_matrix),u_texture:new Da.aH(F,ll.u_texture),u_terrain_coords_id:new Da.aI(F,ll.u_terrain_coords_id),u_ele_delta:new Da.aI(F,ll.u_ele_delta)}),sky:(F,ll)=>({u_sky_color:new Da.aL(F,ll.u_sky_color),u_horizon_color:new Da.aL(F,ll.u_horizon_color),u_horizon:new Da.aI(F,ll.u_horizon),u_sky_horizon_blend:new Da.aI(F,ll.u_sky_horizon_blend)})};class $e{constructor(F,Da,ll){this.context=F;const cl=F.gl;this.buffer=cl.createBuffer(),this.dynamicDraw=Boolean(ll),this.context.unbindVAO(),F.bindElementBuffer.set(this.buffer),cl.bufferData(cl.ELEMENT_ARRAY_BUFFER,Da.arrayBuffer,this.dynamicDraw?cl.DYNAMIC_DRAW:cl.STATIC_DRAW),this.dynamicDraw||delete Da.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(F){const Da=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),Da.bufferSubData(Da.ELEMENT_ARRAY_BUFFER,0,F.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ud={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ke{constructor(F,Da,ll,cl){this.length=Da.length,this.attributes=ll,this.itemSize=Da.bytesPerElement,this.dynamicDraw=cl,this.context=F;const hl=F.gl;this.buffer=hl.createBuffer(),F.bindVertexBuffer.set(this.buffer),hl.bufferData(hl.ARRAY_BUFFER,Da.arrayBuffer,this.dynamicDraw?hl.DYNAMIC_DRAW:hl.STATIC_DRAW),this.dynamicDraw||delete Da.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(F){if(F.length!==this.length)throw new Error(`Length of new data is ${F.length}, which doesn't match current length of ${this.length}`);const Da=this.context.gl;this.bind(),Da.bufferSubData(Da.ARRAY_BUFFER,0,F.arrayBuffer)}enableAttributes(F,Da){for(let ll=0;ll<this.attributes.length;ll++){const cl=Da.attributes[this.attributes[ll].name];void 0!==cl&&F.enableVertexAttribArray(cl)}}setVertexAttribPointers(F,Da,ll){for(let cl=0;cl<this.attributes.length;cl++){const hl=this.attributes[cl],dl=Da.attributes[hl.name];void 0!==dl&&F.vertexAttribPointer(dl,hl.components,F[ud[hl.type]],!1,this.itemSize,hl.offset+this.itemSize*(ll||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hd=new WeakMap;function Ye(F){var Da;if(hd.has(F))return hd.get(F);{const ll=null===(Da=F.getParameter(F.VERSION))||void 0===Da?void 0:Da.startsWith("WebGL 2.0");return hd.set(F,ll),ll}}class Qe{constructor(F){this.gl=F.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(F){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ti extends Qe{getDefault(){return Da.aM.transparent}set(F){const Da=this.current;(F.r!==Da.r||F.g!==Da.g||F.b!==Da.b||F.a!==Da.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)}}class ei extends Qe{getDefault(){return 1}set(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)}}class ii extends Qe{getDefault(){return 0}set(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)}}class ai extends Qe{getDefault(){return[!0,!0,!0,!0]}set(F){const Da=this.current;(F[0]!==Da[0]||F[1]!==Da[1]||F[2]!==Da[2]||F[3]!==Da[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)}}class si extends Qe{getDefault(){return!0}set(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)}}class oi extends Qe{getDefault(){return 255}set(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)}}class ri extends Qe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(F){const Da=this.current;(F.func!==Da.func||F.ref!==Da.ref||F.mask!==Da.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)}}class ni extends Qe{getDefault(){const F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]}set(F){const Da=this.current;(F[0]!==Da[0]||F[1]!==Da[1]||F[2]!==Da[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)}}class li extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;F?Da.enable(Da.STENCIL_TEST):Da.disable(Da.STENCIL_TEST),this.current=F,this.dirty=!1}}class hi extends Qe{getDefault(){return[0,1]}set(F){const Da=this.current;(F[0]!==Da[0]||F[1]!==Da[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)}}class ci extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;F?Da.enable(Da.DEPTH_TEST):Da.disable(Da.DEPTH_TEST),this.current=F,this.dirty=!1}}class ui extends Qe{getDefault(){return this.gl.LESS}set(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)}}class di extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;F?Da.enable(Da.BLEND):Da.disable(Da.BLEND),this.current=F,this.dirty=!1}}class _i extends Qe{getDefault(){const F=this.gl;return[F.ONE,F.ZERO]}set(F){const Da=this.current;(F[0]!==Da[0]||F[1]!==Da[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)}}class pi extends Qe{getDefault(){return Da.aM.transparent}set(F){const Da=this.current;(F.r!==Da.r||F.g!==Da.g||F.b!==Da.b||F.a!==Da.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)}}class mi extends Qe{getDefault(){return this.gl.FUNC_ADD}set(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)}}class fi extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;F?Da.enable(Da.CULL_FACE):Da.disable(Da.CULL_FACE),this.current=F,this.dirty=!1}}class gi extends Qe{getDefault(){return this.gl.BACK}set(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)}}class vi extends Qe{getDefault(){return this.gl.CCW}set(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)}}class xi extends Qe{getDefault(){return null}set(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)}}class yi extends Qe{getDefault(){return this.gl.TEXTURE0}set(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)}}class bi extends Qe{getDefault(){const F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]}set(F){const Da=this.current;(F[0]!==Da[0]||F[1]!==Da[1]||F[2]!==Da[2]||F[3]!==Da[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)}}class wi extends Qe{getDefault(){return null}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.bindFramebuffer(Da.FRAMEBUFFER,F),this.current=F,this.dirty=!1}}class Ti extends Qe{getDefault(){return null}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.bindRenderbuffer(Da.RENDERBUFFER,F),this.current=F,this.dirty=!1}}class Ii extends Qe{getDefault(){return null}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.bindTexture(Da.TEXTURE_2D,F),this.current=F,this.dirty=!1}}class Ei extends Qe{getDefault(){return null}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.bindBuffer(Da.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}}class Pi extends Qe{getDefault(){return null}set(F){const Da=this.gl;Da.bindBuffer(Da.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1}}class Ci extends Qe{getDefault(){return null}set(F){var Da;if(F===this.current&&!this.dirty)return;const ll=this.gl;Ye(ll)?ll.bindVertexArray(F):null===(Da=ll.getExtension("OES_vertex_array_object"))||void 0===Da||Da.bindVertexArrayOES(F),this.current=F,this.dirty=!1}}class Si extends Qe{getDefault(){return 4}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.pixelStorei(Da.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}}class zi extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.pixelStorei(Da.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}}class Di extends Qe{getDefault(){return!1}set(F){if(F===this.current&&!this.dirty)return;const Da=this.gl;Da.pixelStorei(Da.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}}class Mi extends Qe{constructor(F,Da){super(F),this.context=F,this.parent=Da}getDefault(){return null}}class Ai extends Mi{setDirty(){this.dirty=!0}set(F){if(F===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Da=this.gl;Da.framebufferTexture2D(Da.FRAMEBUFFER,Da.COLOR_ATTACHMENT0,Da.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}}class Ri extends Mi{set(F){if(F===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Da=this.gl;Da.framebufferRenderbuffer(Da.FRAMEBUFFER,Da.DEPTH_ATTACHMENT,Da.RENDERBUFFER,F),this.current=F,this.dirty=!1}}class ki extends Mi{set(F){if(F===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const Da=this.gl;Da.framebufferRenderbuffer(Da.FRAMEBUFFER,Da.DEPTH_STENCIL_ATTACHMENT,Da.RENDERBUFFER,F),this.current=F,this.dirty=!1}}class Li{constructor(F,Da,ll,cl,hl){this.context=F,this.width=Da,this.height=ll;const dl=F.gl,pl=this.framebuffer=dl.createFramebuffer();if(this.colorAttachment=new Ai(F,pl),cl)this.depthAttachment=hl?new ki(F,pl):new Ri(F,pl);else if(hl)throw new Error("Stencil cannot be set without depth");if(dl.checkFramebufferStatus(dl.FRAMEBUFFER)!==dl.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const F=this.context.gl,Da=this.colorAttachment.get();if(Da&&F.deleteTexture(Da),this.depthAttachment){const Da=this.depthAttachment.get();Da&&F.deleteRenderbuffer(Da)}F.deleteFramebuffer(this.framebuffer)}}class Fi{constructor(F,Da,ll){this.blendFunction=F,this.blendColor=Da,this.mask=ll}}Fi.Replace=[1,0],Fi.disabled=new Fi(Fi.Replace,Da.aM.transparent,[!1,!1,!1,!1]),Fi.unblended=new Fi(Fi.Replace,Da.aM.transparent,[!0,!0,!0,!0]),Fi.alphaBlended=new Fi([1,771],Da.aM.transparent,[!0,!0,!0,!0]);class Bi{constructor(F){var Da,ll;if(this.gl=F,this.clearColor=new ti(this),this.clearDepth=new ei(this),this.clearStencil=new ii(this),this.colorMask=new ai(this),this.depthMask=new si(this),this.stencilMask=new oi(this),this.stencilFunc=new ri(this),this.stencilOp=new ni(this),this.stencilTest=new li(this),this.depthRange=new hi(this),this.depthTest=new ci(this),this.depthFunc=new ui(this),this.blend=new di(this),this.blendFunc=new _i(this),this.blendColor=new pi(this),this.blendEquation=new mi(this),this.cullFace=new fi(this),this.cullFaceSide=new gi(this),this.frontFace=new vi(this),this.program=new xi(this),this.activeTexture=new yi(this),this.viewport=new bi(this),this.bindFramebuffer=new wi(this),this.bindRenderbuffer=new Ti(this),this.bindTexture=new Ii(this),this.bindVertexBuffer=new Ei(this),this.bindElementBuffer=new Pi(this),this.bindVertexArray=new Ci(this),this.pixelStoreUnpack=new Si(this),this.pixelStoreUnpackPremultiplyAlpha=new zi(this),this.pixelStoreUnpackFlipY=new Di(this),this.extTextureFilterAnisotropic=F.getExtension("EXT_texture_filter_anisotropic")||F.getExtension("MOZ_EXT_texture_filter_anisotropic")||F.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=F.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=F.getParameter(F.MAX_TEXTURE_SIZE),Ye(F)){this.HALF_FLOAT=F.HALF_FLOAT;const cl=F.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(Da=F.RGBA16F)&&void 0!==Da?Da:null==cl?void 0:cl.RGBA16F_EXT,this.RGB16F=null!==(ll=F.RGB16F)&&void 0!==ll?ll:null==cl?void 0:cl.RGB16F_EXT,F.getExtension("EXT_color_buffer_float")}else{F.getExtension("EXT_color_buffer_half_float"),F.getExtension("OES_texture_half_float_linear");const Da=F.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==Da?void 0:Da.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(F,Da){return new $e(this,F,Da)}createVertexBuffer(F,Da,ll){return new Ke(this,F,Da,ll)}createRenderbuffer(F,Da,ll){const cl=this.gl,hl=cl.createRenderbuffer();return this.bindRenderbuffer.set(hl),cl.renderbufferStorage(cl.RENDERBUFFER,F,Da,ll),this.bindRenderbuffer.set(null),hl}createFramebuffer(F,Da,ll,cl){return new Li(this,F,Da,ll,cl)}clear({color:F,depth:Da,stencil:ll}){const cl=this.gl;let hl=0;F&&(hl|=cl.COLOR_BUFFER_BIT,this.clearColor.set(F),this.colorMask.set([!0,!0,!0,!0])),void 0!==Da&&(hl|=cl.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Da),this.depthMask.set(!0)),void 0!==ll&&(hl|=cl.STENCIL_BUFFER_BIT,this.clearStencil.set(ll),this.stencilMask.set(255)),cl.clear(hl)}setCullFace(F){!1===F.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(F.mode),this.frontFace.set(F.frontFace))}setDepthMode(F){F.func!==this.gl.ALWAYS||F.mask?(this.depthTest.set(!0),this.depthFunc.set(F.func),this.depthMask.set(F.mask),this.depthRange.set(F.range)):this.depthTest.set(!1)}setStencilMode(F){F.test.func!==this.gl.ALWAYS||F.mask?(this.stencilTest.set(!0),this.stencilMask.set(F.mask),this.stencilOp.set([F.fail,F.depthFail,F.pass]),this.stencilFunc.set({func:F.test.func,ref:F.ref,mask:F.test.mask})):this.stencilTest.set(!1)}setColorMode(F){Da.aE(F.blendFunction,Fi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(F.blendFunction),this.blendColor.set(F.blendColor)),this.colorMask.set(F.mask)}createVertexArray(){var F;return Ye(this.gl)?this.gl.createVertexArray():null===(F=this.gl.getExtension("OES_vertex_array_object"))||void 0===F?void 0:F.createVertexArrayOES()}deleteVertexArray(F){var Da;return Ye(this.gl)?this.gl.deleteVertexArray(F):null===(Da=this.gl.getExtension("OES_vertex_array_object"))||void 0===Da?void 0:Da.deleteVertexArrayOES(F)}unbindVAO(){this.bindVertexArray.set(null)}}class Oi{constructor(F,Da,ll){this.func=F,this.mask=Da,this.range=ll}}Oi.ReadOnly=!1,Oi.ReadWrite=!0,Oi.disabled=new Oi(519,Oi.ReadOnly,[0,1]);const dd=7680;class Ui{constructor(F,Da,ll,cl,hl,dl){this.test=F,this.ref=Da,this.mask=ll,this.fail=cl,this.depthFail=hl,this.pass=dl}}Ui.disabled=new Ui({func:519,mask:0},0,0,dd,dd,dd);class ji{constructor(F,Da,ll){this.enable=F,this.mode=Da,this.frontFace=ll}}let pd;function qi(F,ll,cl,hl,dl){const pl=F.context,fl=pl.gl,Al=F.useProgram("collisionBox"),bl=[];let kl=0,Dl=0;for(let su=0;su<hl.length;su++){const Ql=hl[su],wc=ll.getTile(Ql).getBucket(cl);if(!wc)continue;const Sc=dl?wc.textCollisionBox:wc.iconCollisionBox,eu=wc.collisionCircleArray;if(eu.length>0){const ll=Da.H();Da.aQ(ll,wc.placementInvProjMatrix,F.transform.glCoordMatrix),Da.aQ(ll,ll,wc.placementViewportMatrix),bl.push({circleArray:eu,circleOffset:Dl,transform:Ql.posMatrix,invTransform:ll,coord:Ql}),kl+=eu.length/4,Dl=kl}Sc&&Al.draw(pl,fl.LINES,Oi.disabled,Ui.disabled,F.colorModeForRenderPass(),ji.disabled,{u_matrix:Ql.posMatrix,u_pixel_extrude_scale:[1/(Wl=F.transform).width,1/Wl.height]},F.style.map.terrain&&F.style.map.terrain.getTerrainData(Ql),cl.id,Sc.layoutVertexBuffer,Sc.indexBuffer,Sc.segments,null,F.transform.zoom,null,null,Sc.collisionVertexBuffer)}var Wl;if(!dl||!bl.length)return;const Ql=F.useProgram("collisionCircle"),wc=new Da.aR;wc.resize(4*kl),wc._trim();let Sc=0;for(const Da of bl)for(let F=0;F<Da.circleArray.length/4;F++){const ll=4*F,cl=Da.circleArray[ll+0],hl=Da.circleArray[ll+1],dl=Da.circleArray[ll+2],pl=Da.circleArray[ll+3];wc.emplace(Sc++,cl,hl,dl,pl,0),wc.emplace(Sc++,cl,hl,dl,pl,1),wc.emplace(Sc++,cl,hl,dl,pl,2),wc.emplace(Sc++,cl,hl,dl,pl,3)}(!pd||pd.length<2*kl)&&(pd=function(F){const ll=2*F,cl=new Da.aT;cl.resize(ll),cl._trim();for(let Da=0;Da<ll;Da++){const F=6*Da;cl.uint16[F+0]=4*Da+0,cl.uint16[F+1]=4*Da+1,cl.uint16[F+2]=4*Da+2,cl.uint16[F+3]=4*Da+2,cl.uint16[F+4]=4*Da+3,cl.uint16[F+5]=4*Da+0}return cl}(kl));const eu=pl.createIndexBuffer(pd,!0),iu=pl.createVertexBuffer(wc,Da.aS.members,!0);for(const su of bl){const ll=Se(su.transform,su.invTransform,F.transform);Ql.draw(pl,fl.TRIANGLES,Oi.disabled,Ui.disabled,F.colorModeForRenderPass(),ji.disabled,ll,F.style.map.terrain&&F.style.map.terrain.getTerrainData(su.coord),cl.id,iu,eu,Da.a0.simpleSegment(0,2*su.circleOffset,su.circleArray.length,su.circleArray.length/2),null,F.transform.zoom,null,null,null)}iu.destroy(),eu.destroy()}ji.disabled=new ji(!1,1029,2305),ji.backCCW=new ji(!0,1029,2305);const md=Da.an(new Float32Array(16));function Gi(F,ll,cl,hl,dl,pl){const{horizontalAlign:fl,verticalAlign:Al}=Da.au(F);return new Da.P((-(fl-.5)*ll/dl+hl[0])*pl,(-(Al-.5)*cl/dl+hl[1])*pl)}function Hi(F,ll,cl,hl,dl,pl){const fl=ll.tileAnchorPoint.add(new Da.P(ll.translation[0],ll.translation[1]));if(ll.pitchWithMap){let F=hl.mult(pl);cl||(F=F.rotate(-dl));const Da=fl.add(F);return xt(Da.x,Da.y,ll.labelPlaneMatrix,ll.getElevation).point}if(cl){const Da=St(ll.tileAnchorPoint.x+1,ll.tileAnchorPoint.y,ll).point.sub(F),cl=Math.atan(Da.y/Da.x)+(Da.x<0?Math.PI:0);return F.add(hl.rotate(cl))}return F.add(hl)}function Wi(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc){const Sc=F.text.placedSymbolArray,eu=F.text.dynamicLayoutVertexArray,iu=F.icon.dynamicLayoutVertexArray,su={};eu.clear();for(let cu=0;cu<Sc.length;cu++){const iu=Sc.get(cu),uu=iu.hidden||!iu.crossTileID||F.allowVerticalPlacement&&!iu.placedOrientation?null:hl[iu.crossTileID];if(uu){const hl=new Da.P(iu.anchorX,iu.anchorY),Sc={getElevation:wc,width:dl.width,height:dl.height,labelPlaneMatrix:pl,lineVertexArray:null,pitchWithMap:cl,projection:Dl,projectionCache:null,tileAnchorPoint:hl,translation:Wl,unwrappedTileID:Ql},cu=cl?xt(hl.x,hl.y,fl,wc):St(hl.x,hl.y,Sc),hu=yt(dl.cameraToCenterDistance,cu.signedDistanceFromCamera);let Lu=Da.ai(F.textSizeData,bl,iu)*hu/Da.ap;cl&&(Lu*=F.tilePixelRatio/Al);const{width:zu,height:Du,anchor:Nu,textOffset:qu,textBoxScale:ih}=uu,gh=Gi(Nu,zu,Du,qu,ih,Lu),ed=Dl.getPitchedTextCorrection(dl,hl.add(new Da.P(Wl[0],Wl[1])),Ql),td=Hi(cu.point,Sc,ll,gh,dl.angle,ed),id=F.allowVerticalPlacement&&iu.placedOrientation===Da.ah.vertical?Math.PI/2:0;for(let F=0;F<iu.numGlyphs;F++)Da.aj(eu,td,id);kl&&iu.associatedIconIndex>=0&&(su[iu.associatedIconIndex]={shiftedAnchor:td,angle:id})}else Rt(iu.numGlyphs,eu)}if(kl){iu.clear();const ll=F.icon.placedSymbolArray;for(let F=0;F<ll.length;F++){const cl=ll.get(F);if(cl.hidden)Rt(cl.numGlyphs,iu);else{const ll=su[F];if(ll)for(let F=0;F<cl.numGlyphs;F++)Da.aj(iu,ll.shiftedAnchor,ll.angle);else Rt(cl.numGlyphs,iu)}}F.icon.dynamicLayoutVertexBuffer.updateData(iu)}F.text.dynamicLayoutVertexBuffer.updateData(eu)}function $i(F,Da,ll){return ll.iconsInText&&Da?"symbolTextAndIcon":F?"symbolSDF":"symbolIcon"}function Xi(F,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl){const Ql=F.context,wc=Ql.gl,Sc=F.transform,eu=ie(),iu="map"===Al,su="map"===bl,cu="viewport"!==Al&&"point"!==cl.layout.get("symbol-placement"),uu=iu&&!su&&!cu,hu=!su&&cu,Lu=!cl.layout.get("symbol-sort-key").isConstant();let zu=!1;const Du=F.depthModeForSublayer(0,Oi.ReadOnly),Nu=cl._unevaluatedLayout.hasValue("text-variable-anchor")||cl._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qu=[],ih=eu.getCircleRadiusCorrection(Sc);for(const gh of hl){const hl=ll.getTile(gh),Al=hl.getBucket(cl);if(!Al)continue;const bl=dl?Al.text:Al.icon;if(!bl||!bl.segments.get().length||!bl.hasVisibleVertices)continue;const Dl=bl.programConfigurations.get(cl.id),Wl=dl||Al.sdfIcons,Ql=dl?Al.textSizeData:Al.iconSizeData,Du=su||0!==Sc.pitch,ed=F.useProgram($i(Wl,dl,Al),Dl),td=Da.ag(Ql,Sc.zoom),id=F.style.map.terrain&&F.style.map.terrain.getTerrainData(gh);let nd,rd,ad,sd,od=[0,0],ld=null;if(dl)rd=hl.glyphAtlasTexture,ad=wc.LINEAR,nd=hl.glyphAtlasTexture.size,Al.iconsInText&&(od=hl.imageAtlasTexture.size,ld=hl.imageAtlasTexture,sd=Du||F.options.rotating||F.options.zooming||"composite"===Ql.kind||"camera"===Ql.kind?wc.LINEAR:wc.NEAREST);else{const Da=1!==cl.layout.get("icon-size").constantOr(0)||Al.iconsNeedLinear;rd=hl.imageAtlasTexture,ad=Wl||F.options.rotating||F.options.zooming||Da||Du?wc.LINEAR:wc.NEAREST,nd=hl.imageAtlasTexture.size}const cd=Bt(hl,1,F.transform.zoom),ud=hu?gh.posMatrix:md,hd=gt(ud,su,iu,F.transform,cd),dd=vt(ud,su,iu,F.transform,cd),pd=vt(gh.posMatrix,su,iu,F.transform,cd),fd=eu.translatePosition(F.transform,hl,pl,fl),gd=Nu&&Al.hasTextData(),Ad="none"!==cl.layout.get("icon-text-fit")&&gd&&Al.hasIconData();if(cu){const Da=F.style.map.terrain?(Da,ll)=>F.style.map.terrain.getElevation(gh,Da,ll):null,ll="map"===cl.layout.get("text-rotation-alignment");wt(Al,gh.posMatrix,F,dl,hd,pd,su,kl,ll,eu,gh.toUnwrapped(),Sc.width,Sc.height,fd,Da)}const yd=gh.posMatrix,vd=dl&&Nu||Ad,_d=cu||vd?md:hd,xd=dd,bd=Wl&&0!==cl.paint.get(dl?"text-halo-width":"icon-halo-width").constantOr(1);let wd;wd=Wl?Al.iconsInText?Ve(Ql.kind,td,uu,su,cu,vd,F,yd,_d,xd,fd,nd,od,ih):qe(Ql.kind,td,uu,su,cu,vd,F,yd,_d,xd,fd,dl,nd,!0,ih):Ze(Ql.kind,td,uu,su,cu,vd,F,yd,_d,xd,fd,dl,nd,ih);const Ed={program:ed,buffers:bl,uniformValues:wd,atlasTexture:rd,atlasTextureIcon:ld,atlasInterpolation:ad,atlasInterpolationIcon:sd,isSDF:Wl,hasHalo:bd};if(Lu&&Al.canOverlap){zu=!0;const F=bl.segments.get();for(const ll of F)qu.push({segments:new Da.a0([ll]),sortKey:ll.sortKey,state:Ed,terrainData:id})}else qu.push({segments:bl.segments,sortKey:0,state:Ed,terrainData:id})}zu&&qu.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const Da of qu){const ll=Da.state;if(Ql.activeTexture.set(wc.TEXTURE0),ll.atlasTexture.bind(ll.atlasInterpolation,wc.CLAMP_TO_EDGE),ll.atlasTextureIcon&&(Ql.activeTexture.set(wc.TEXTURE1),ll.atlasTextureIcon&&ll.atlasTextureIcon.bind(ll.atlasInterpolationIcon,wc.CLAMP_TO_EDGE)),ll.isSDF){const hl=ll.uniformValues;ll.hasHalo&&(hl.u_is_halo=1,Ki(ll.buffers,Da.segments,cl,F,ll.program,Du,Dl,Wl,hl,Da.terrainData)),hl.u_is_halo=0}Ki(ll.buffers,Da.segments,cl,F,ll.program,Du,Dl,Wl,ll.uniformValues,Da.terrainData)}}function Ki(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){const kl=cl.context;hl.draw(kl,kl.gl.TRIANGLES,dl,pl,fl,ji.disabled,Al,bl,ll.id,F.layoutVertexBuffer,F.indexBuffer,Da,ll.paint,cl.transform.zoom,F.programConfigurations.get(ll.id),F.dynamicLayoutVertexBuffer,F.opacityVertexBuffer)}function Ji(F,ll,cl,hl){const dl=F.context,pl=dl.gl,fl=Ui.disabled,Al=new Fi([pl.ONE,pl.ONE],Da.aM.transparent,[!0,!0,!0,!0]),bl=ll.getBucket(cl);if(!bl)return;const kl=hl.key;let Dl=cl.heatmapFbos.get(kl);Dl||(Dl=Qi(dl,ll.tileSize,ll.tileSize),cl.heatmapFbos.set(kl,Dl)),dl.bindFramebuffer.set(Dl.framebuffer),dl.viewport.set([0,0,ll.tileSize,ll.tileSize]),dl.clear({color:Da.aM.transparent});const Wl=bl.programConfigurations.get(cl.id),Ql=F.useProgram("heatmap",Wl),wc=F.style.map.terrain.getTerrainData(hl);Ql.draw(dl,pl.TRIANGLES,Oi.disabled,fl,Al,ji.disabled,Me(hl.posMatrix,ll,F.transform.zoom,cl.paint.get("heatmap-intensity")),wc,cl.id,bl.layoutVertexBuffer,bl.indexBuffer,bl.segments,cl.paint,F.transform.zoom,Wl)}function Yi(F,Da,ll){const cl=F.context,hl=cl.gl;cl.setColorMode(F.colorModeForRenderPass());const dl=ta(cl,Da),pl=ll.key,fl=Da.heatmapFbos.get(pl);fl&&(cl.activeTexture.set(hl.TEXTURE0),hl.bindTexture(hl.TEXTURE_2D,fl.colorAttachment.get()),cl.activeTexture.set(hl.TEXTURE1),dl.bind(hl.LINEAR,hl.CLAMP_TO_EDGE),F.useProgram("heatmapTexture").draw(cl,hl.TRIANGLES,Oi.disabled,Ui.disabled,F.colorModeForRenderPass(),ji.disabled,Ae(F,Da,0,1),null,Da.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments,Da.paint,F.transform.zoom),fl.destroy(),Da.heatmapFbos.delete(pl))}function Qi(F,Da,ll){var cl,hl;const dl=F.gl,pl=dl.createTexture();dl.bindTexture(dl.TEXTURE_2D,pl),dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_S,dl.CLAMP_TO_EDGE),dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_WRAP_T,dl.CLAMP_TO_EDGE),dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MIN_FILTER,dl.LINEAR),dl.texParameteri(dl.TEXTURE_2D,dl.TEXTURE_MAG_FILTER,dl.LINEAR);const fl=null!==(cl=F.HALF_FLOAT)&&void 0!==cl?cl:dl.UNSIGNED_BYTE,Al=null!==(hl=F.RGBA16F)&&void 0!==hl?hl:dl.RGBA;dl.texImage2D(dl.TEXTURE_2D,0,Al,Da,ll,0,dl.RGBA,fl,null);const bl=F.createFramebuffer(Da,ll,!1,!1);return bl.colorAttachment.set(pl),bl}function ta(F,Da){return Da.colorRampTexture||(Da.colorRampTexture=new b(F,Da.colorRamp,F.gl.RGBA)),Da.colorRampTexture}function ea(F,Da,ll,cl,hl){if(!ll||!cl||!cl.imageAtlas)return;const dl=cl.imageAtlas.patternPositions;let pl=dl[ll.to.toString()],fl=dl[ll.from.toString()];if(!pl&&fl&&(pl=fl),!fl&&pl&&(fl=pl),!pl||!fl){const F=hl.getPaintProperty(Da);pl=dl[F],fl=dl[F]}pl&&fl&&F.setConstantPatternPositions(pl,fl)}function ia(F,Da,ll,cl,hl,dl,pl){const fl=F.context.gl,Al="fill-pattern",bl=ll.paint.get(Al),kl=bl&&bl.constantOr(1),Dl=ll.getCrossfadeParameters();let Wl,Ql,wc,Sc,eu;pl?(Ql=kl&&!ll.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Wl=fl.LINES):(Ql=kl?"fillPattern":"fill",Wl=fl.TRIANGLES);const iu=bl.constantOr(null);for(const su of cl){const cl=Da.getTile(su);if(kl&&!cl.patternsLoaded())continue;const bl=cl.getBucket(ll);if(!bl)continue;const cu=bl.programConfigurations.get(ll.id),uu=F.useProgram(Ql,cu),hu=F.style.map.terrain&&F.style.map.terrain.getTerrainData(su);kl&&(F.context.activeTexture.set(fl.TEXTURE0),cl.imageAtlasTexture.bind(fl.LINEAR,fl.CLAMP_TO_EDGE),cu.updatePaintBuffers(Dl)),ea(cu,Al,iu,cl,ll);const Lu=hu?su:null,zu=F.translatePosMatrix(Lu?Lu.posMatrix:su.posMatrix,cl,ll.paint.get("fill-translate"),ll.paint.get("fill-translate-anchor"));if(pl){Sc=bl.indexBuffer2,eu=bl.segments2;const Da=[fl.drawingBufferWidth,fl.drawingBufferHeight];wc="fillOutlinePattern"===Ql&&kl?Pe(zu,F,Dl,cl,Da):Ee(zu,Da)}else Sc=bl.indexBuffer,eu=bl.segments,wc=kl?Ie(zu,F,Dl,cl):Te(zu);uu.draw(F.context,Wl,hl,F.stencilModeForClipping(su),dl,ji.disabled,wc,hu,ll.id,bl.layoutVertexBuffer,Sc,eu,ll.paint,F.transform.zoom,cu)}}function aa(F,Da,ll,cl,hl,dl,pl){const fl=F.context,Al=fl.gl,bl="fill-extrusion-pattern",kl=ll.paint.get(bl),Dl=kl.constantOr(1),Wl=ll.getCrossfadeParameters(),Ql=ll.paint.get("fill-extrusion-opacity"),wc=kl.constantOr(null);for(const Sc of cl){const cl=Da.getTile(Sc),kl=cl.getBucket(ll);if(!kl)continue;const eu=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Sc),iu=kl.programConfigurations.get(ll.id),su=F.useProgram(Dl?"fillExtrusionPattern":"fillExtrusion",iu);Dl&&(F.context.activeTexture.set(Al.TEXTURE0),cl.imageAtlasTexture.bind(Al.LINEAR,Al.CLAMP_TO_EDGE),iu.updatePaintBuffers(Wl)),ea(iu,bl,wc,cl,ll);const cu=F.translatePosMatrix(Sc.posMatrix,cl,ll.paint.get("fill-extrusion-translate"),ll.paint.get("fill-extrusion-translate-anchor")),uu=ll.paint.get("fill-extrusion-vertical-gradient"),hu=Dl?we(cu,F,uu,Ql,Sc,Wl,cl):be(cu,F,uu,Ql);su.draw(fl,fl.gl.TRIANGLES,hl,dl,pl,ji.backCCW,hu,eu,ll.id,kl.layoutVertexBuffer,kl.indexBuffer,kl.segments,ll.paint,F.transform.zoom,iu,F.style.map.terrain&&kl.centroidVertexBuffer)}}function sa(F,Da,ll,cl,hl,dl,pl){const fl=F.context,Al=fl.gl,bl=ll.fbo;if(!bl)return;const kl=F.useProgram("hillshade"),Dl=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Da);fl.activeTexture.set(Al.TEXTURE0),Al.bindTexture(Al.TEXTURE_2D,bl.colorAttachment.get()),kl.draw(fl,Al.TRIANGLES,hl,dl,pl,ji.disabled,((F,Da,ll,cl)=>{const hl=ll.paint.get("hillshade-shadow-color"),dl=ll.paint.get("hillshade-highlight-color"),pl=ll.paint.get("hillshade-accent-color");let fl=ll.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ll.paint.get("hillshade-illumination-anchor")&&(fl-=F.transform.angle);const Al=!F.options.moving;return{u_matrix:cl?cl.posMatrix:F.transform.calculatePosMatrix(Da.tileID.toUnwrapped(),Al),u_image:0,u_latrange:Re(0,Da.tileID),u_light:[ll.paint.get("hillshade-exaggeration"),fl],u_shadow:hl,u_highlight:dl,u_accent:pl}})(F,ll,cl,Dl?Da:null),Dl,cl.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}function oa(F,ll,cl,hl,dl,pl){const fl=F.context,Al=fl.gl,bl=ll.dem;if(bl&&bl.data){const kl=bl.dim,Dl=bl.stride,Wl=bl.getPixels();if(fl.activeTexture.set(Al.TEXTURE1),fl.pixelStoreUnpackPremultiplyAlpha.set(!1),ll.demTexture=ll.demTexture||F.getTileTexture(Dl),ll.demTexture){const F=ll.demTexture;F.update(Wl,{premultiply:!1}),F.bind(Al.NEAREST,Al.CLAMP_TO_EDGE)}else ll.demTexture=new b(fl,Wl,Al.RGBA,{premultiply:!1}),ll.demTexture.bind(Al.NEAREST,Al.CLAMP_TO_EDGE);fl.activeTexture.set(Al.TEXTURE0);let Ql=ll.fbo;if(!Ql){const F=new b(fl,{width:kl,height:kl,data:null},Al.RGBA);F.bind(Al.LINEAR,Al.CLAMP_TO_EDGE),Ql=ll.fbo=fl.createFramebuffer(kl,kl,!0,!1),Ql.colorAttachment.set(F.texture)}fl.bindFramebuffer.set(Ql.framebuffer),fl.viewport.set([0,0,kl,kl]),F.useProgram("hillshadePrepare").draw(fl,Al.TRIANGLES,hl,dl,pl,ji.disabled,((F,ll)=>{const cl=ll.stride,hl=Da.H();return Da.aP(hl,0,Da.X,-Da.X,0,0,1),Da.J(hl,hl,[0,-Da.X,0]),{u_matrix:hl,u_image:1,u_dimension:[cl,cl],u_zoom:F.overscaledZ,u_unpack:ll.getUnpackVector()}})(ll.tileID,bl),null,cl.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments),ll.needsHillshadePrepare=!1}}function ra(F,ll,cl,hl,pl,fl){const Al=hl.paint.get("raster-fade-duration");if(!fl&&Al>0){const hl=dl.now(),fl=(hl-F.timeAdded)/Al,bl=ll?(hl-ll.timeAdded)/Al:-1,kl=cl.getSource(),Dl=pl.coveringZoomLevel({tileSize:kl.tileSize,roundZoom:kl.roundZoom}),Wl=!ll||Math.abs(ll.tileID.overscaledZ-Dl)>Math.abs(F.tileID.overscaledZ-Dl),Ql=Wl&&F.refreshedUponExpiration?1:Da.ac(Wl?fl:1-bl,0,1);return F.refreshedUponExpiration&&fl>=1&&(F.refreshedUponExpiration=!1),ll?{opacity:1,mix:1-Ql}:{opacity:Ql,mix:0}}return{opacity:1,mix:0}}const fd=new Da.aM(1,0,0,1),gd=new Da.aM(0,1,0,1),Ad=new Da.aM(0,0,1,1),yd=new Da.aM(1,0,1,1),vd=new Da.aM(0,1,1,1);function da(F,Da,ll,cl){pa(F,0,Da+ll/2,F.transform.width,ll,cl)}function _a(F,Da,ll,cl){pa(F,Da-ll/2,0,ll,F.transform.height,cl)}function pa(F,Da,ll,cl,hl,dl){const pl=F.context,fl=pl.gl;fl.enable(fl.SCISSOR_TEST),fl.scissor(Da*F.pixelRatio,ll*F.pixelRatio,cl*F.pixelRatio,hl*F.pixelRatio),pl.clear({color:dl}),fl.disable(fl.SCISSOR_TEST)}function ma(F,ll,cl){const hl=F.context,dl=hl.gl,pl=cl.posMatrix,fl=F.useProgram("debug"),Al=Oi.disabled,bl=Ui.disabled,kl=F.colorModeForRenderPass(),Dl="$debug",Wl=F.style.map.terrain&&F.style.map.terrain.getTerrainData(cl);hl.activeTexture.set(dl.TEXTURE0);const Ql=ll.getTileByID(cl.key).latestRawTileData,wc=Math.floor((Ql&&Ql.byteLength||0)/1024),Sc=ll.getTile(cl).tileSize,eu=512/Math.min(Sc,512)*(cl.overscaledZ/F.transform.zoom)*.5;let iu=cl.canonical.toString();cl.overscaledZ!==cl.canonical.z&&(iu+=` => ${cl.overscaledZ}`),function(F,Da){F.initDebugOverlayCanvas();const ll=F.debugOverlayCanvas,cl=F.context.gl,hl=F.debugOverlayCanvas.getContext("2d");hl.clearRect(0,0,ll.width,ll.height),hl.shadowColor="white",hl.shadowBlur=2,hl.lineWidth=1.5,hl.strokeStyle="white",hl.textBaseline="top",hl.font="bold 36px Open Sans, sans-serif",hl.fillText(Da,5,5),hl.strokeText(Da,5,5),F.debugOverlayTexture.update(ll),F.debugOverlayTexture.bind(cl.LINEAR,cl.CLAMP_TO_EDGE)}(F,`${iu} ${wc}kB`),fl.draw(hl,dl.TRIANGLES,Al,bl,Fi.alphaBlended,ji.disabled,ze(pl,Da.aM.transparent,eu),null,Dl,F.debugBuffer,F.quadTriangleIndexBuffer,F.debugSegments),fl.draw(hl,dl.LINE_STRIP,Al,bl,kl,ji.disabled,ze(pl,Da.aM.red),Wl,Dl,F.debugBuffer,F.tileBorderIndexBuffer,F.debugSegments)}function fa(F,Da,ll){const cl=F.context,hl=cl.gl,dl=F.colorModeForRenderPass(),pl=new Oi(hl.LEQUAL,Oi.ReadWrite,F.depthRangeFor3D),fl=F.useProgram("terrain"),Al=Da.getTerrainMesh();cl.bindFramebuffer.set(null),cl.viewport.set([0,0,F.width,F.height]);for(const bl of ll){const ll=F.renderToTexture.getTexture(bl),kl=Da.getTerrainData(bl.tileID);cl.activeTexture.set(hl.TEXTURE0),hl.bindTexture(hl.TEXTURE_2D,ll.texture);const Dl=F.transform.calculatePosMatrix(bl.tileID.toUnwrapped()),Wl=Da.getMeshFrameDelta(F.transform.zoom),Ql=F.transform.calculateFogMatrix(bl.tileID.toUnwrapped()),wc=ge(Dl,Wl,Ql,F.style.sky,F.transform.pitch);fl.draw(cl,hl.TRIANGLES,pl,Ui.disabled,dl,ji.backCCW,wc,kl,"terrain",Al.vertexBuffer,Al.indexBuffer,Al.segments)}}class ga{constructor(F,Da,ll){this.vertexBuffer=F,this.indexBuffer=Da,this.segments=ll}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class va{constructor(F,ll){this.context=new Bi(F),this.transform=ll,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:Da.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ut.maxUnderzooming+ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new he}resize(F,Da,ll){if(this.width=Math.floor(F*ll),this.height=Math.floor(Da*ll),this.pixelRatio=ll,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const cl of this.style._order)this.style._layers[cl].resize()}setup(){const F=this.context,ll=new Da.aX;ll.emplaceBack(0,0),ll.emplaceBack(Da.X,0),ll.emplaceBack(0,Da.X),ll.emplaceBack(Da.X,Da.X),this.tileExtentBuffer=F.createVertexBuffer(ll,od.members),this.tileExtentSegments=Da.a0.simpleSegment(0,0,4,2);const cl=new Da.aX;cl.emplaceBack(0,0),cl.emplaceBack(Da.X,0),cl.emplaceBack(0,Da.X),cl.emplaceBack(Da.X,Da.X),this.debugBuffer=F.createVertexBuffer(cl,od.members),this.debugSegments=Da.a0.simpleSegment(0,0,4,5);const hl=new Da.$;hl.emplaceBack(0,0,0,0),hl.emplaceBack(Da.X,0,Da.X,0),hl.emplaceBack(0,Da.X,0,Da.X),hl.emplaceBack(Da.X,Da.X,Da.X,Da.X),this.rasterBoundsBuffer=F.createVertexBuffer(hl,uu.members),this.rasterBoundsSegments=Da.a0.simpleSegment(0,0,4,2);const dl=new Da.aX;dl.emplaceBack(0,0),dl.emplaceBack(1,0),dl.emplaceBack(0,1),dl.emplaceBack(1,1),this.viewportBuffer=F.createVertexBuffer(dl,od.members),this.viewportSegments=Da.a0.simpleSegment(0,0,4,2);const pl=new Da.aZ;pl.emplaceBack(0),pl.emplaceBack(1),pl.emplaceBack(3),pl.emplaceBack(2),pl.emplaceBack(0),this.tileBorderIndexBuffer=F.createIndexBuffer(pl);const fl=new Da.aY;fl.emplaceBack(0,1,2),fl.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=F.createIndexBuffer(fl);const Al=this.context.gl;this.stencilClearMode=new Ui({func:Al.ALWAYS,mask:0},0,255,Al.ZERO,Al.ZERO,Al.ZERO)}clearStencil(){const F=this.context,ll=F.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const cl=Da.H();Da.aP(cl,0,this.width,this.height,0,0,1),Da.K(cl,cl,[ll.drawingBufferWidth,ll.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(F,ll.TRIANGLES,Oi.disabled,this.stencilClearMode,Fi.disabled,ji.disabled,De(cl),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(F,Da){if(this.currentStencilSource===F.source||!F.isTileClipped()||!Da||!Da.length)return;this.currentStencilSource=F.source;const ll=this.context,cl=ll.gl;this.nextStencilID+Da.length>256&&this.clearStencil(),ll.setColorMode(Fi.disabled),ll.setDepthMode(Oi.disabled);const hl=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const dl of Da){const F=this._tileClippingMaskIDs[dl.key]=this.nextStencilID++,Da=this.style.map.terrain&&this.style.map.terrain.getTerrainData(dl);hl.draw(ll,cl.TRIANGLES,Oi.disabled,new Ui({func:cl.ALWAYS,mask:0},F,255,cl.KEEP,cl.KEEP,cl.REPLACE),Fi.disabled,ji.disabled,De(dl.posMatrix),Da,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const F=this.nextStencilID++,Da=this.context.gl;return new Ui({func:Da.NOTEQUAL,mask:255},F,255,Da.KEEP,Da.KEEP,Da.REPLACE)}stencilModeForClipping(F){const Da=this.context.gl;return new Ui({func:Da.EQUAL,mask:255},this._tileClippingMaskIDs[F.key],0,Da.KEEP,Da.KEEP,Da.REPLACE)}stencilConfigForOverlap(F){const Da=this.context.gl,ll=F.sort(((F,Da)=>Da.overscaledZ-F.overscaledZ)),cl=ll[ll.length-1].overscaledZ,hl=ll[0].overscaledZ-cl+1;if(hl>1){this.currentStencilSource=void 0,this.nextStencilID+hl>256&&this.clearStencil();const F={};for(let ll=0;ll<hl;ll++)F[ll+cl]=new Ui({func:Da.GEQUAL,mask:255},ll+this.nextStencilID,255,Da.KEEP,Da.KEEP,Da.REPLACE);return this.nextStencilID+=hl,[F,ll]}return[{[cl]:Ui.disabled},ll]}colorModeForRenderPass(){const F=this.context.gl;if(this._showOverdrawInspector){const ll=1/8;return new Fi([F.CONSTANT_COLOR,F.ONE],new Da.aM(ll,ll,ll,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Fi.unblended:Fi.alphaBlended}depthModeForSublayer(F,Da,ll){if(!this.opaquePassEnabledForLayer())return Oi.disabled;const cl=1-((1+this.currentLayer)*this.numSublayers+F)*this.depthEpsilon;return new Oi(ll||this.context.gl.LEQUAL,Da,[cl,cl])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(F,ll){this.style=F,this.options=ll,this.lineAtlas=F.lineAtlas,this.imageManager=F.imageManager,this.glyphManager=F.glyphManager,this.symbolFadeChange=F.placement.symbolFadeChange(dl.now()),this.imageManager.beginFrame();const cl=this.style._order,hl=this.style.sourceCaches,pl={},fl={},Al={};for(const Da in hl){const F=hl[Da];F.used&&F.prepare(this.context),pl[Da]=F.getVisibleCoordinates(),fl[Da]=pl[Da].slice().reverse(),Al[Da]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Da=0;Da<cl.length;Da++)if(this.style._layers[cl[Da]].is3D()){this.opaquePassCutoff=Da;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Da of cl){const F=this.style._layers[Da];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const ll=fl[F.source];("custom"===F.type||ll.length)&&this.renderLayer(this,hl[F.source],F,ll)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:ll.showOverdrawInspector?Da.aM.black:Da.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(F,ll){const cl=F.context,hl=cl.gl,dl=((F,Da,ll)=>({u_sky_color:F.properties.get("sky-color"),u_horizon_color:F.properties.get("horizon-color"),u_horizon:(Da.height/2+Da.getHorizon())*ll,u_sky_horizon_blend:F.properties.get("sky-horizon-blend")*Da.height/2*ll}))(ll,F.style.map.transform,F.pixelRatio),pl=new Oi(hl.LEQUAL,Oi.ReadWrite,[0,1]),fl=Ui.disabled,Al=F.colorModeForRenderPass(),bl=F.useProgram("sky");if(!ll.mesh){const F=new Da.aX;F.emplaceBack(-1,-1),F.emplaceBack(1,-1),F.emplaceBack(1,1),F.emplaceBack(-1,1);const hl=new Da.aY;hl.emplaceBack(0,1,2),hl.emplaceBack(0,2,3),ll.mesh=new ga(cl.createVertexBuffer(F,od.members),cl.createIndexBuffer(hl),Da.a0.simpleSegment(0,0,F.length,hl.length))}bl.draw(cl,hl.TRIANGLES,pl,fl,Al,ji.disabled,dl,void 0,"sky",ll.mesh.vertexBuffer,ll.mesh.indexBuffer,ll.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=ll.showOverdrawInspector,this.depthRangeFor3D=[0,1-(F._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=cl.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[cl[this.currentLayer]],Da=hl[F.source],ll=pl[F.source];this._renderTileClippingMasks(F,ll),this.renderLayer(this,Da,F,ll)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<cl.length;this.currentLayer++){const F=this.style._layers[cl[this.currentLayer]],Da=hl[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F))continue;const ll=("symbol"===F.type?Al:fl)[F.source];this._renderTileClippingMasks(F,pl[F.source]),this.renderLayer(this,Da,F,ll)}if(this.options.showTileBoundaries){const F=function(F,Da){let ll=null;const cl=Object.values(F._layers).flatMap((ll=>ll.source&&!ll.isHidden(Da)?[F.sourceCaches[ll.source]]:[])),hl=cl.filter((F=>"vector"===F.getSource().type)),dl=cl.filter((F=>"vector"!==F.getSource().type)),r=F=>{(!ll||ll.getSource().maxzoom<F.getSource().maxzoom)&&(ll=F)};return hl.forEach((F=>r(F))),ll||dl.forEach((F=>r(F))),ll}(this.style,this.transform.zoom);F&&function(F,Da,ll){for(let cl=0;cl<ll.length;cl++)ma(F,Da,ll[cl])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const Da=F.transform.padding;da(F,F.transform.height-(Da.top||0),3,fd),da(F,Da.bottom||0,3,gd),_a(F,Da.left||0,3,Ad),_a(F,F.transform.width-(Da.right||0),3,yd);const ll=F.transform.centerPoint;!function(F,Da,ll,cl){pa(F,Da-1,ll-10,2,20,cl),pa(F,Da-10,ll-1,20,2,cl)}(F,ll.x,F.transform.height-ll.y,vd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(F){if(!this.style||!this.style.map||!this.style.map.terrain)return;const ll=this.terrainFacilitator.matrix,cl=this.transform.modelViewProjectionMatrix;let hl=this.terrainFacilitator.dirty;hl||(hl=F?!Da.a_(ll,cl):!Da.a$(ll,cl)),hl||(hl=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),hl&&(Da.b0(ll,cl),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(F,ll){const cl=F.context,hl=cl.gl,dl=Fi.unblended,pl=new Oi(hl.LEQUAL,Oi.ReadWrite,[0,1]),fl=ll.getTerrainMesh(),Al=ll.sourceCache.getRenderableTiles(),bl=F.useProgram("terrainDepth");cl.bindFramebuffer.set(ll.getFramebuffer("depth").framebuffer),cl.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),cl.clear({color:Da.aM.transparent,depth:1});for(const Da of Al){const Al=ll.getTerrainData(Da.tileID),kl={u_matrix:F.transform.calculatePosMatrix(Da.tileID.toUnwrapped()),u_ele_delta:ll.getMeshFrameDelta(F.transform.zoom)};bl.draw(cl,hl.TRIANGLES,pl,Ui.disabled,dl,ji.backCCW,kl,Al,"terrain",fl.vertexBuffer,fl.indexBuffer,fl.segments)}cl.bindFramebuffer.set(null),cl.viewport.set([0,0,F.width,F.height])}(this,this.style.map.terrain),function(F,ll){const cl=F.context,hl=cl.gl,dl=Fi.unblended,pl=new Oi(hl.LEQUAL,Oi.ReadWrite,[0,1]),fl=ll.getTerrainMesh(),Al=ll.getCoordsTexture(),bl=ll.sourceCache.getRenderableTiles(),kl=F.useProgram("terrainCoords");cl.bindFramebuffer.set(ll.getFramebuffer("coords").framebuffer),cl.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),cl.clear({color:Da.aM.transparent,depth:1}),ll.coordsIndex=[];for(const Da of bl){const bl=ll.getTerrainData(Da.tileID);cl.activeTexture.set(hl.TEXTURE0),hl.bindTexture(hl.TEXTURE_2D,Al.texture);const Dl={u_matrix:F.transform.calculatePosMatrix(Da.tileID.toUnwrapped()),u_terrain_coords_id:(255-ll.coordsIndex.length)/255,u_texture:0,u_ele_delta:ll.getMeshFrameDelta(F.transform.zoom)};kl.draw(cl,hl.TRIANGLES,pl,Ui.disabled,dl,ji.backCCW,Dl,bl,"terrain",fl.vertexBuffer,fl.indexBuffer,fl.segments),ll.coordsIndex.push(Da.tileID.key)}cl.bindFramebuffer.set(null),cl.viewport.set([0,0,F.width,F.height])}(this,this.style.map.terrain))}renderLayer(F,ll,cl,hl){if(!cl.isHidden(this.transform.zoom)&&("background"===cl.type||"custom"===cl.type||(hl||[]).length))switch(this.id=cl.id,cl.type){case"symbol":!function(F,ll,cl,hl,dl){if("translucent"!==F.renderPass)return;const pl=Ui.disabled,fl=F.colorModeForRenderPass();(cl._unevaluatedLayout.hasValue("text-variable-anchor")||cl._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(F,ll,cl,hl,dl,pl,fl,Al,bl){const kl=ll.transform,Dl=ie(),Wl="map"===dl,Ql="map"===pl;for(const wc of F){const F=hl.getTile(wc),dl=F.getBucket(cl);if(!dl||!dl.text||!dl.text.segments.get().length)continue;const pl=Da.ag(dl.textSizeData,kl.zoom),Sc=Bt(F,1,ll.transform.zoom),eu=gt(wc.posMatrix,Ql,Wl,ll.transform,Sc),iu="none"!==cl.layout.get("icon-text-fit")&&dl.hasIconData();if(pl){const Da=Math.pow(2,kl.zoom-F.tileID.overscaledZ),cl=ll.style.map.terrain?(F,Da)=>ll.style.map.terrain.getElevation(wc,F,Da):null,hl=Dl.translatePosition(kl,F,fl,Al);Wi(dl,Wl,Ql,bl,kl,eu,wc.posMatrix,Da,pl,iu,Dl,hl,wc.toUnwrapped(),cl)}}}(hl,F,cl,ll,cl.layout.get("text-rotation-alignment"),cl.layout.get("text-pitch-alignment"),cl.paint.get("text-translate"),cl.paint.get("text-translate-anchor"),dl),0!==cl.paint.get("icon-opacity").constantOr(1)&&Xi(F,ll,cl,hl,!1,cl.paint.get("icon-translate"),cl.paint.get("icon-translate-anchor"),cl.layout.get("icon-rotation-alignment"),cl.layout.get("icon-pitch-alignment"),cl.layout.get("icon-keep-upright"),pl,fl),0!==cl.paint.get("text-opacity").constantOr(1)&&Xi(F,ll,cl,hl,!0,cl.paint.get("text-translate"),cl.paint.get("text-translate-anchor"),cl.layout.get("text-rotation-alignment"),cl.layout.get("text-pitch-alignment"),cl.layout.get("text-keep-upright"),pl,fl),ll.map.showCollisionBoxes&&(qi(F,ll,cl,hl,!0),qi(F,ll,cl,hl,!1))}(F,ll,cl,hl,this.style.placement.variableOffsets);break;case"circle":!function(F,ll,cl,hl){if("translucent"!==F.renderPass)return;const dl=cl.paint.get("circle-opacity"),pl=cl.paint.get("circle-stroke-width"),fl=cl.paint.get("circle-stroke-opacity"),Al=!cl.layout.get("circle-sort-key").isConstant();if(0===dl.constantOr(1)&&(0===pl.constantOr(1)||0===fl.constantOr(1)))return;const bl=F.context,kl=bl.gl,Dl=F.depthModeForSublayer(0,Oi.ReadOnly),Wl=Ui.disabled,Ql=F.colorModeForRenderPass(),wc=[];for(let Sc=0;Sc<hl.length;Sc++){const dl=hl[Sc],pl=ll.getTile(dl),fl=pl.getBucket(cl);if(!fl)continue;const bl=fl.programConfigurations.get(cl.id),kl=F.useProgram("circle",bl),Dl=fl.layoutVertexBuffer,Wl=fl.indexBuffer,Ql=F.style.map.terrain&&F.style.map.terrain.getTerrainData(dl),eu={programConfiguration:bl,program:kl,layoutVertexBuffer:Dl,indexBuffer:Wl,uniformValues:Ce(F,dl,pl,cl),terrainData:Ql};if(Al){const F=fl.segments.get();for(const ll of F)wc.push({segments:new Da.a0([ll]),sortKey:ll.sortKey,state:eu})}else wc.push({segments:fl.segments,sortKey:0,state:eu})}Al&&wc.sort(((F,Da)=>F.sortKey-Da.sortKey));for(const Da of wc){const{programConfiguration:ll,program:hl,layoutVertexBuffer:dl,indexBuffer:pl,uniformValues:fl,terrainData:Al}=Da.state;hl.draw(bl,kl.TRIANGLES,Dl,Wl,Ql,ji.disabled,fl,Al,cl.id,dl,pl,Da.segments,cl.paint,F.transform.zoom,ll)}}(F,ll,cl,hl);break;case"heatmap":!function(F,ll,cl,hl){if(0===cl.paint.get("heatmap-opacity"))return;const dl=F.context;if(F.style.map.terrain){for(const Da of hl){const hl=ll.getTile(Da);ll.hasRenderableParent(Da)||("offscreen"===F.renderPass?Ji(F,hl,cl,Da):"translucent"===F.renderPass&&Yi(F,cl,Da))}dl.viewport.set([0,0,F.width,F.height])}else"offscreen"===F.renderPass?function(F,ll,cl,hl){const dl=F.context,pl=dl.gl,fl=Ui.disabled,Al=new Fi([pl.ONE,pl.ONE],Da.aM.transparent,[!0,!0,!0,!0]);(function(F,ll,cl){const hl=F.gl;F.activeTexture.set(hl.TEXTURE1),F.viewport.set([0,0,ll.width/4,ll.height/4]);let dl=cl.heatmapFbos.get(Da.aU);dl?(hl.bindTexture(hl.TEXTURE_2D,dl.colorAttachment.get()),F.bindFramebuffer.set(dl.framebuffer)):(dl=Qi(F,ll.width/4,ll.height/4),cl.heatmapFbos.set(Da.aU,dl))})(dl,F,cl),dl.clear({color:Da.aM.transparent});for(let Da=0;Da<hl.length;Da++){const bl=hl[Da];if(ll.hasRenderableParent(bl))continue;const kl=ll.getTile(bl),Dl=kl.getBucket(cl);if(!Dl)continue;const Wl=Dl.programConfigurations.get(cl.id),Ql=F.useProgram("heatmap",Wl),{zoom:wc}=F.transform;Ql.draw(dl,pl.TRIANGLES,Oi.disabled,fl,Al,ji.disabled,Me(bl.posMatrix,kl,wc,cl.paint.get("heatmap-intensity")),null,cl.id,Dl.layoutVertexBuffer,Dl.indexBuffer,Dl.segments,cl.paint,F.transform.zoom,Wl)}dl.viewport.set([0,0,F.width,F.height])}(F,ll,cl,hl):"translucent"===F.renderPass&&function(F,ll){const cl=F.context,hl=cl.gl;cl.setColorMode(F.colorModeForRenderPass());const dl=ll.heatmapFbos.get(Da.aU);dl&&(cl.activeTexture.set(hl.TEXTURE0),hl.bindTexture(hl.TEXTURE_2D,dl.colorAttachment.get()),cl.activeTexture.set(hl.TEXTURE1),ta(cl,ll).bind(hl.LINEAR,hl.CLAMP_TO_EDGE),F.useProgram("heatmapTexture").draw(cl,hl.TRIANGLES,Oi.disabled,Ui.disabled,F.colorModeForRenderPass(),ji.disabled,Ae(F,ll,0,1),null,ll.id,F.viewportBuffer,F.quadTriangleIndexBuffer,F.viewportSegments,ll.paint,F.transform.zoom))}(F,cl)}(F,ll,cl,hl);break;case"line":!function(F,ll,cl,hl){if("translucent"!==F.renderPass)return;const dl=cl.paint.get("line-opacity"),pl=cl.paint.get("line-width");if(0===dl.constantOr(1)||0===pl.constantOr(1))return;const fl=F.depthModeForSublayer(0,Oi.ReadOnly),Al=F.colorModeForRenderPass(),bl=cl.paint.get("line-dasharray"),kl=cl.paint.get("line-pattern"),Dl=kl.constantOr(1),Wl=cl.paint.get("line-gradient"),Ql=cl.getCrossfadeParameters(),wc=Dl?"linePattern":bl?"lineSDF":Wl?"lineGradient":"line",Sc=F.context,eu=Sc.gl;let iu=!0;for(const su of hl){const hl=ll.getTile(su);if(Dl&&!hl.patternsLoaded())continue;const dl=hl.getBucket(cl);if(!dl)continue;const pl=dl.programConfigurations.get(cl.id),cu=F.context.program.get(),uu=F.useProgram(wc,pl),hu=iu||uu.program!==cu,Lu=F.style.map.terrain&&F.style.map.terrain.getTerrainData(su),zu=kl.constantOr(null);if(zu&&hl.imageAtlas){const F=hl.imageAtlas,Da=F.patternPositions[zu.to.toString()],ll=F.patternPositions[zu.from.toString()];Da&&ll&&pl.setConstantPatternPositions(Da,ll)}const Du=Lu?su:null,Nu=Dl?Fe(F,hl,cl,Ql,Du):bl?Be(F,hl,cl,bl,Ql,Du):Wl?Le(F,hl,cl,dl.lineClipsArray.length,Du):ke(F,hl,cl,Du);if(Dl)Sc.activeTexture.set(eu.TEXTURE0),hl.imageAtlasTexture.bind(eu.LINEAR,eu.CLAMP_TO_EDGE),pl.updatePaintBuffers(Ql);else if(bl&&(hu||F.lineAtlas.dirty))Sc.activeTexture.set(eu.TEXTURE0),F.lineAtlas.bind(Sc);else if(Wl){const hl=dl.gradients[cl.id];let pl=hl.texture;if(cl.gradientVersion!==hl.version){let fl=256;if(cl.stepInterpolant){const cl=ll.getSource().maxzoom,hl=su.canonical.z===cl?Math.ceil(1<<F.transform.maxZoom-su.canonical.z):1;fl=Da.ac(Da.aV(dl.maxLineLength/Da.X*1024*hl),256,Sc.maxTextureSize)}hl.gradient=Da.aW({expression:cl.gradientExpression(),evaluationKey:"lineProgress",resolution:fl,image:hl.gradient||void 0,clips:dl.lineClipsArray}),hl.texture?hl.texture.update(hl.gradient):hl.texture=new b(Sc,hl.gradient,eu.RGBA),hl.version=cl.gradientVersion,pl=hl.texture}Sc.activeTexture.set(eu.TEXTURE0),pl.bind(cl.stepInterpolant?eu.NEAREST:eu.LINEAR,eu.CLAMP_TO_EDGE)}uu.draw(Sc,eu.TRIANGLES,fl,F.stencilModeForClipping(su),Al,ji.disabled,Nu,Lu,cl.id,dl.layoutVertexBuffer,dl.indexBuffer,dl.segments,cl.paint,F.transform.zoom,pl,dl.layoutVertexBuffer2),iu=!1}}(F,ll,cl,hl);break;case"fill":!function(F,ll,cl,hl){const dl=cl.paint.get("fill-color"),pl=cl.paint.get("fill-opacity");if(0===pl.constantOr(1))return;const fl=F.colorModeForRenderPass(),Al=cl.paint.get("fill-pattern"),bl=F.opaquePassEnabledForLayer()&&!Al.constantOr(1)&&1===dl.constantOr(Da.aM.transparent).a&&1===pl.constantOr(0)?"opaque":"translucent";if(F.renderPass===bl){const Da=F.depthModeForSublayer(1,"opaque"===F.renderPass?Oi.ReadWrite:Oi.ReadOnly);ia(F,ll,cl,hl,Da,fl,!1)}if("translucent"===F.renderPass&&cl.paint.get("fill-antialias")){const Da=F.depthModeForSublayer(cl.getPaintProperty("fill-outline-color")?2:0,Oi.ReadOnly);ia(F,ll,cl,hl,Da,fl,!0)}}(F,ll,cl,hl);break;case"fill-extrusion":!function(F,Da,ll,cl){const hl=ll.paint.get("fill-extrusion-opacity");if(0!==hl&&"translucent"===F.renderPass){const dl=new Oi(F.context.gl.LEQUAL,Oi.ReadWrite,F.depthRangeFor3D);if(1!==hl||ll.paint.get("fill-extrusion-pattern").constantOr(1))aa(F,Da,ll,cl,dl,Ui.disabled,Fi.disabled),aa(F,Da,ll,cl,dl,F.stencilModeFor3D(),F.colorModeForRenderPass());else{const hl=F.colorModeForRenderPass();aa(F,Da,ll,cl,dl,Ui.disabled,hl)}}}(F,ll,cl,hl);break;case"hillshade":!function(F,Da,ll,cl){if("offscreen"!==F.renderPass&&"translucent"!==F.renderPass)return;const hl=F.context,dl=F.depthModeForSublayer(0,Oi.ReadOnly),pl=F.colorModeForRenderPass(),[fl,Al]="translucent"===F.renderPass?F.stencilConfigForOverlap(cl):[{},cl];for(const bl of Al){const cl=Da.getTile(bl);void 0!==cl.needsHillshadePrepare&&cl.needsHillshadePrepare&&"offscreen"===F.renderPass?oa(F,cl,ll,dl,Ui.disabled,pl):"translucent"===F.renderPass&&sa(F,bl,cl,ll,dl,fl[bl.overscaledZ],pl)}hl.viewport.set([0,0,F.width,F.height])}(F,ll,cl,hl);break;case"raster":!function(F,Da,ll,cl){if("translucent"!==F.renderPass)return;if(0===ll.paint.get("raster-opacity"))return;if(!cl.length)return;const hl=F.context,dl=hl.gl,pl=Da.getSource(),fl=F.useProgram("raster"),Al=F.colorModeForRenderPass(),[bl,kl]=pl instanceof Q?[{},cl]:F.stencilConfigForOverlap(cl),Dl=kl[kl.length-1].overscaledZ,Wl=!F.options.moving;for(const Ql of kl){const cl=F.depthModeForSublayer(Ql.overscaledZ-Dl,1===ll.paint.get("raster-opacity")?Oi.ReadWrite:Oi.ReadOnly,dl.LESS),kl=Da.getTile(Ql);kl.registerFadeDuration(ll.paint.get("raster-fade-duration"));const wc=Da.findLoadedParent(Ql,0),Sc=Da.findLoadedSibling(Ql),eu=ra(kl,wc||Sc||null,Da,ll,F.transform,F.style.map.terrain);let iu,su;const cu="nearest"===ll.paint.get("raster-resampling")?dl.NEAREST:dl.LINEAR;hl.activeTexture.set(dl.TEXTURE0),kl.texture.bind(cu,dl.CLAMP_TO_EDGE,dl.LINEAR_MIPMAP_NEAREST),hl.activeTexture.set(dl.TEXTURE1),wc?(wc.texture.bind(cu,dl.CLAMP_TO_EDGE,dl.LINEAR_MIPMAP_NEAREST),iu=Math.pow(2,wc.tileID.overscaledZ-kl.tileID.overscaledZ),su=[kl.tileID.canonical.x*iu%1,kl.tileID.canonical.y*iu%1]):kl.texture.bind(cu,dl.CLAMP_TO_EDGE,dl.LINEAR_MIPMAP_NEAREST),kl.texture.useMipmap&&hl.extTextureFilterAnisotropic&&F.transform.pitch>20&&dl.texParameterf(dl.TEXTURE_2D,hl.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,hl.extTextureFilterAnisotropicMax);const uu=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Ql),hu=uu?Ql:null,Lu=hu?hu.posMatrix:F.transform.calculatePosMatrix(Ql.toUnwrapped(),Wl),zu=Ue(Lu,su||[0,0],iu||1,eu,ll);pl instanceof Q?fl.draw(hl,dl.TRIANGLES,cl,Ui.disabled,Al,ji.disabled,zu,uu,ll.id,pl.boundsBuffer,F.quadTriangleIndexBuffer,pl.boundsSegments):fl.draw(hl,dl.TRIANGLES,cl,bl[Ql.overscaledZ],Al,ji.disabled,zu,uu,ll.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}}(F,ll,cl,hl);break;case"background":!function(F,Da,ll,cl){const hl=ll.paint.get("background-color"),dl=ll.paint.get("background-opacity");if(0===dl)return;const pl=F.context,fl=pl.gl,Al=F.transform,bl=Al.tileSize,kl=ll.paint.get("background-pattern");if(F.isPatternMissing(kl))return;const Dl=!kl&&1===hl.a&&1===dl&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass!==Dl)return;const Wl=Ui.disabled,Ql=F.depthModeForSublayer(0,"opaque"===Dl?Oi.ReadWrite:Oi.ReadOnly),wc=F.colorModeForRenderPass(),Sc=F.useProgram(kl?"backgroundPattern":"background"),eu=cl||Al.coveringTiles({tileSize:bl,terrain:F.style.map.terrain});kl&&(pl.activeTexture.set(fl.TEXTURE0),F.imageManager.bind(F.context));const iu=ll.getCrossfadeParameters();for(const su of eu){const Da=cl?su.posMatrix:F.transform.calculatePosMatrix(su.toUnwrapped()),Al=kl?He(Da,dl,F,kl,{tileID:su,tileSize:bl},iu):Ge(Da,dl,hl),Dl=F.style.map.terrain&&F.style.map.terrain.getTerrainData(su);Sc.draw(pl,fl.TRIANGLES,Ql,Wl,wc,ji.disabled,Al,Dl,ll.id,F.tileExtentBuffer,F.quadTriangleIndexBuffer,F.tileExtentSegments)}}(F,0,cl,hl);break;case"custom":!function(F,Da,ll){const cl=F.context,hl=ll.implementation;if("offscreen"===F.renderPass){const Da=hl.prerender;Da&&(F.setCustomLayerDefaults(),cl.setColorMode(F.colorModeForRenderPass()),Da.call(hl,cl.gl,F.transform.customLayerMatrix()),cl.setDirty(),F.setBaseState())}else if("translucent"===F.renderPass){F.setCustomLayerDefaults(),cl.setColorMode(F.colorModeForRenderPass()),cl.setStencilMode(Ui.disabled);const Da="3d"===hl.renderingMode?new Oi(F.context.gl.LEQUAL,Oi.ReadWrite,F.depthRangeFor3D):F.depthModeForSublayer(0,Oi.ReadOnly);cl.setDepthMode(Da),hl.render(cl.gl,F.transform.customLayerMatrix(),{farZ:F.transform.farZ,nearZ:F.transform.nearZ,fov:F.transform._fov,modelViewProjectionMatrix:F.transform.modelViewProjectionMatrix,projectionMatrix:F.transform.projectionMatrix}),cl.setDirty(),F.setBaseState(),cl.bindFramebuffer.set(null)}}(F,0,cl)}}translatePosMatrix(F,ll,cl,hl,dl){if(!cl[0]&&!cl[1])return F;const pl=dl?"map"===hl?this.transform.angle:0:"viewport"===hl?-this.transform.angle:0;if(pl){const F=Math.sin(pl),Da=Math.cos(pl);cl=[cl[0]*Da-cl[1]*F,cl[0]*F+cl[1]*Da]}const fl=[dl?cl[0]:Bt(ll,cl[0],this.transform.zoom),dl?cl[1]:Bt(ll,cl[1],this.transform.zoom),0],Al=new Float32Array(16);return Da.J(Al,F,fl),Al}saveTileTexture(F){const Da=this._tileTextures[F.size[0]];Da?Da.push(F):this._tileTextures[F.size[0]]=[F]}getTileTexture(F){const Da=this._tileTextures[F];return Da&&Da.length>0?Da.pop():null}isPatternMissing(F){if(!F)return!1;if(!F.from||!F.to)return!0;const Da=this.imageManager.getPattern(F.from.toString()),ll=this.imageManager.getPattern(F.to.toString());return!Da||!ll}useProgram(F,Da){this.cache=this.cache||{};const ll=F+(Da?Da.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[ll]||(this.cache[ll]=new xe(this.context,ld[F],Da,cd[F],this._showOverdrawInspector,this.style.map.terrain)),this.cache[ll]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const F=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(F.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:F,drawingBufferHeight:Da}=this.context.gl;return this.width!==F||this.height!==Da}}class xa{constructor(F,Da){this.points=F,this.planes=Da}static fromInvProjectionMatrix(F,ll,cl){const hl=Math.pow(2,cl),dl=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((cl=>{const dl=1/(cl=Da.af([],cl,F))[3]/ll*hl;return Da.b1(cl,cl,[dl,dl,1/cl[3],dl])})),pl=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((F=>{const Da=function(F,Da){var ll=Da[0],cl=Da[1],hl=Da[2],dl=ll*ll+cl*cl+hl*hl;return dl>0&&(dl=1/Math.sqrt(dl)),F[0]=Da[0]*dl,F[1]=Da[1]*dl,F[2]=Da[2]*dl,F}([],function(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2],pl=ll[0],fl=ll[1],Al=ll[2];return F[0]=hl*Al-dl*fl,F[1]=dl*pl-cl*Al,F[2]=cl*fl-hl*pl,F}([],g([],dl[F[0]],dl[F[1]]),g([],dl[F[2]],dl[F[1]]))),ll=-((cl=Da)[0]*(hl=dl[F[1]])[0]+cl[1]*hl[1]+cl[2]*hl[2]);var cl,hl;return Da.concat(ll)}));return new xa(dl,pl)}}class ya{constructor(F,Da){this.min=F,this.max=Da,this.center=function(F,Da){return F[0]=.5*Da[0],F[1]=.5*Da[1],F[2]=.5*Da[2],F}([],function(F,Da,ll){return F[0]=Da[0]+ll[0],F[1]=Da[1]+ll[1],F[2]=Da[2]+ll[2],F}([],this.min,this.max))}quadrant(F){const Da=[F%2==0,F<2],ll=m(this.min),cl=m(this.max);for(let hl=0;hl<Da.length;hl++)ll[hl]=Da[hl]?this.min[hl]:this.center[hl],cl[hl]=Da[hl]?this.center[hl]:this.max[hl];return cl[2]=this.max[2],new ya(ll,cl)}distanceX(F){return Math.max(Math.min(this.max[0],F[0]),this.min[0])-F[0]}distanceY(F){return Math.max(Math.min(this.max[1],F[1]),this.min[1])-F[1]}intersects(F){const ll=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let cl=!0;for(let hl=0;hl<F.planes.length;hl++){const dl=F.planes[hl];let pl=0;for(let F=0;F<ll.length;F++)Da.b2(dl,ll[F])>=0&&pl++;if(0===pl)return 0;pl!==ll.length&&(cl=!1)}if(cl)return 2;for(let Da=0;Da<3;Da++){let ll=Number.MAX_VALUE,cl=-Number.MAX_VALUE;for(let hl=0;hl<F.points.length;hl++){const dl=F.points[hl][Da]-this.min[Da];ll=Math.min(ll,dl),cl=Math.max(cl,dl)}if(cl<0||ll>this.max[Da]-this.min[Da])return 0}return 1}}class ba{constructor(F=0,Da=0,ll=0,cl=0){if(isNaN(F)||F<0||isNaN(Da)||Da<0||isNaN(ll)||ll<0||isNaN(cl)||cl<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=F,this.bottom=Da,this.left=ll,this.right=cl}interpolate(F,ll,cl){return null!=ll.top&&null!=F.top&&(this.top=Da.y.number(F.top,ll.top,cl)),null!=ll.bottom&&null!=F.bottom&&(this.bottom=Da.y.number(F.bottom,ll.bottom,cl)),null!=ll.left&&null!=F.left&&(this.left=Da.y.number(F.left,ll.left,cl)),null!=ll.right&&null!=F.right&&(this.right=Da.y.number(F.right,ll.right,cl)),this}getCenter(F,ll){const cl=Da.ac((this.left+F-this.right)/2,0,F),hl=Da.ac((this.top+ll-this.bottom)/2,0,ll);return new Da.P(cl,hl)}equals(F){return this.top===F.top&&this.bottom===F.bottom&&this.left===F.left&&this.right===F.right}clone(){return new ba(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const _d=85.051129;class Ta{constructor(F,ll,cl,hl,dl){this.tileSize=512,this._renderWorldCopies=void 0===dl||!!dl,this._minZoom=F||0,this._maxZoom=ll||22,this._minPitch=null==cl?0:cl,this._maxPitch=null==hl?60:hl,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Da.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ba,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const F=new Ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return F.apply(this),F}apply(F){this.tileSize=F.tileSize,this.latRange=F.latRange,this.lngRange=F.lngRange,this.width=F.width,this.height=F.height,this._center=F._center,this._elevation=F._elevation,this.minElevationForCurrentTile=F.minElevationForCurrentTile,this.zoom=F.zoom,this.angle=F.angle,this._fov=F._fov,this._pitch=F._pitch,this._unmodified=F._unmodified,this._edgeInsets=F._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(F){this._minZoom!==F&&(this._minZoom=F,this.zoom=Math.max(this.zoom,F))}get maxZoom(){return this._maxZoom}set maxZoom(F){this._maxZoom!==F&&(this._maxZoom=F,this.zoom=Math.min(this.zoom,F))}get minPitch(){return this._minPitch}set minPitch(F){this._minPitch!==F&&(this._minPitch=F,this.pitch=Math.max(this.pitch,F))}get maxPitch(){return this._maxPitch}set maxPitch(F){this._maxPitch!==F&&(this._maxPitch=F,this.pitch=Math.min(this.pitch,F))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(F){void 0===F?F=!0:null===F&&(F=!1),this._renderWorldCopies=F}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new Da.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(F){const ll=-Da.b3(F,-180,180)*Math.PI/180;this.angle!==ll&&(this._unmodified=!1,this.angle=ll,this._calcMatrices(),this.rotationMatrix=function(){var F=new Da.A(4);return Da.A!=Float32Array&&(F[1]=0,F[2]=0),F[0]=1,F[3]=1,F}(),function(F,Da,ll){var cl=Da[0],hl=Da[1],dl=Da[2],pl=Da[3],fl=Math.sin(ll),Al=Math.cos(ll);F[0]=cl*Al+dl*fl,F[1]=hl*Al+pl*fl,F[2]=cl*-fl+dl*Al,F[3]=hl*-fl+pl*Al}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(F){const ll=Da.ac(F,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ll&&(this._unmodified=!1,this._pitch=ll,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(F){F=Math.max(.01,Math.min(60,F)),this._fov!==F&&(this._unmodified=!1,this._fov=F/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(F){const Da=Math.min(Math.max(F,this.minZoom),this.maxZoom);this._zoom!==Da&&(this._unmodified=!1,this._zoom=Da,this.tileZoom=Math.max(0,Math.floor(Da)),this.scale=this.zoomScale(Da),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(F){F.lat===this._center.lat&&F.lng===this._center.lng||(this._unmodified=!1,this._center=F,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(F){F!==this._elevation&&(this._elevation=F,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(F){this._edgeInsets.equals(F)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,F,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(F){return this._edgeInsets.equals(F)}interpolatePadding(F,Da,ll){this._unmodified=!1,this._edgeInsets.interpolate(F,Da,ll),this._constrain(),this._calcMatrices()}coveringZoomLevel(F){const Da=(F.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/F.tileSize));return Math.max(0,Da)}getVisibleUnwrappedCoordinates(F){const ll=[new Da.b4(0,F)];if(this._renderWorldCopies){const cl=this.pointCoordinate(new Da.P(0,0)),hl=this.pointCoordinate(new Da.P(this.width,0)),dl=this.pointCoordinate(new Da.P(this.width,this.height)),pl=this.pointCoordinate(new Da.P(0,this.height)),fl=Math.floor(Math.min(cl.x,hl.x,dl.x,pl.x)),Al=Math.floor(Math.max(cl.x,hl.x,dl.x,pl.x)),bl=1;for(let kl=fl-bl;kl<=Al+bl;kl++)0!==kl&&ll.push(new Da.b4(kl,F))}return ll}coveringTiles(F){var ll,cl;let hl=this.coveringZoomLevel(F);const dl=hl;if(void 0!==F.minzoom&&hl<F.minzoom)return[];void 0!==F.maxzoom&&hl>F.maxzoom&&(hl=F.maxzoom);const pl=this.pointCoordinate(this.getCameraPoint()),fl=Da.Z.fromLngLat(this.center),Al=Math.pow(2,hl),bl=[Al*pl.x,Al*pl.y,0],kl=[Al*fl.x,Al*fl.y,0],Dl=xa.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,hl);let Wl=F.minzoom||0;!F.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Wl=hl);const Ql=F.terrain?2/Math.min(this.tileSize,F.tileSize)*this.tileSize:3,p=F=>({aabb:new ya([F*Al,0,0],[(F+1)*Al,Al,0]),zoom:0,x:0,y:0,wrap:F,fullyVisible:!1}),wc=[],Sc=[],eu=hl,iu=F.reparseOverscaled?dl:hl;if(this._renderWorldCopies)for(let Da=1;Da<=3;Da++)wc.push(p(-Da)),wc.push(p(Da));for(wc.push(p(0));wc.length>0;){const hl=wc.pop(),dl=hl.x,pl=hl.y;let fl=hl.fullyVisible;if(!fl){const F=hl.aabb.intersects(Dl);if(0===F)continue;fl=2===F}const Al=F.terrain?bl:kl,su=hl.aabb.distanceX(Al),cu=hl.aabb.distanceY(Al),uu=Math.max(Math.abs(su),Math.abs(cu));if(hl.zoom===eu||uu>Ql+(1<<eu-hl.zoom)-2&&hl.zoom>=Wl){const F=eu-hl.zoom,ll=bl[0]-.5-(dl<<F),cl=bl[1]-.5-(pl<<F);Sc.push({tileID:new Da.S(hl.zoom===eu?iu:hl.zoom,hl.wrap,hl.zoom,dl,pl),distanceSq:v([kl[0]-.5-dl,kl[1]-.5-pl]),tileDistanceToCamera:Math.sqrt(ll*ll+cl*cl)})}else for(let bl=0;bl<4;bl++){const Al=(dl<<1)+bl%2,kl=(pl<<1)+(bl>>1),Dl=hl.zoom+1;let Wl=hl.aabb.quadrant(bl);if(F.terrain){const dl=new Da.S(Dl,hl.wrap,Dl,Al,kl),pl=F.terrain.getMinMaxElevation(dl),fl=null!==(ll=pl.minElevation)&&void 0!==ll?ll:this.elevation,bl=null!==(cl=pl.maxElevation)&&void 0!==cl?cl:this.elevation;Wl=new ya([Wl.min[0],Wl.min[1],fl],[Wl.max[0],Wl.max[1],bl])}wc.push({aabb:Wl,zoom:Dl,x:Al,y:kl,wrap:hl.wrap,fullyVisible:fl})}}return Sc.sort(((F,Da)=>F.distanceSq-Da.distanceSq)).map((F=>F.tileID))}resize(F,Da){this.width=F,this.height=Da,this.pixelsToGLUnits=[2/F,-2/Da],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(F){return Math.pow(2,F)}scaleZoom(F){return Math.log(F)/Math.LN2}project(F){const ll=Da.ac(F.lat,-85.051129,_d);return new Da.P(Da.O(F.lng)*this.worldSize,Da.Q(ll)*this.worldSize)}unproject(F){return new Da.Z(F.x/this.worldSize,F.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(F){const ll=this.elevation,cl=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,hl=this.pointLocation(this.centerPoint,F),dl=F.getElevationForLngLatZoom(hl,this.tileZoom);if(!(this.elevation-dl))return;const pl=cl+ll-dl,fl=Math.cos(this._pitch)*this.cameraToCenterDistance/pl/Da.b5(1,hl.lat),Al=this.scaleZoom(fl/this.tileSize);this._elevation=dl,this._center=hl,this.zoom=Al}setLocationAtPoint(F,ll){const cl=this.pointCoordinate(ll),hl=this.pointCoordinate(this.centerPoint),dl=this.locationCoordinate(F),pl=new Da.Z(dl.x-(cl.x-hl.x),dl.y-(cl.y-hl.y));this.center=this.coordinateLocation(pl),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(F,Da){return Da?this.coordinatePoint(this.locationCoordinate(F),Da.getElevationForLngLatZoom(F,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(F))}pointLocation(F,Da){return this.coordinateLocation(this.pointCoordinate(F,Da))}locationCoordinate(F){return Da.Z.fromLngLat(F)}coordinateLocation(F){return F&&F.toLngLat()}pointCoordinate(F,ll){if(ll){const Da=ll.pointCoordinate(F);if(null!=Da)return Da}const cl=[F.x,F.y,0,1],hl=[F.x,F.y,1,1];Da.af(cl,cl,this.pixelMatrixInverse),Da.af(hl,hl,this.pixelMatrixInverse);const dl=cl[3],pl=hl[3],fl=cl[1]/dl,Al=hl[1]/pl,bl=cl[2]/dl,kl=hl[2]/pl,Dl=bl===kl?0:(0-bl)/(kl-bl);return new Da.Z(Da.y.number(cl[0]/dl,hl[0]/pl,Dl)/this.worldSize,Da.y.number(fl,Al,Dl)/this.worldSize)}coordinatePoint(F,ll=0,cl=this.pixelMatrix){const hl=[F.x*this.worldSize,F.y*this.worldSize,ll,1];return Da.af(hl,hl,cl),new Da.P(hl[0]/hl[3],hl[1]/hl[3])}getBounds(){const F=Math.max(0,this.height/2-this.getHorizon());return(new H).extend(this.pointLocation(new Da.P(0,F))).extend(this.pointLocation(new Da.P(this.width,F))).extend(this.pointLocation(new Da.P(this.width,this.height))).extend(this.pointLocation(new Da.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new H([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(F){F?(this.lngRange=[F.getWest(),F.getEast()],this.latRange=[F.getSouth(),F.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,_d])}calculateTileMatrix(F){const ll=F.canonical,cl=this.worldSize/this.zoomScale(ll.z),hl=ll.x+Math.pow(2,ll.z)*F.wrap,dl=Da.an(new Float64Array(16));return Da.J(dl,dl,[hl*cl,ll.y*cl,0]),Da.K(dl,dl,[cl/Da.X,cl/Da.X,1]),dl}calculatePosMatrix(F,ll=!1){const cl=F.key,hl=ll?this._alignedPosMatrixCache:this._posMatrixCache;if(hl[cl])return hl[cl];const dl=this.calculateTileMatrix(F);return Da.L(dl,ll?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,dl),hl[cl]=new Float32Array(dl),hl[cl]}calculateFogMatrix(F){const ll=F.key,cl=this._fogMatrixCache;if(cl[ll])return cl[ll];const hl=this.calculateTileMatrix(F);return Da.L(hl,this.fogMatrix,hl),cl[ll]=new Float32Array(hl),cl[ll]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(F,ll){ll=Da.ac(+ll,this.minZoom,this.maxZoom);const cl={center:new Da.N(F.lng,F.lat),zoom:ll};let hl=this.lngRange;if(!this._renderWorldCopies&&null===hl){const F=180-1e-10;hl=[-F,F]}const dl=this.tileSize*this.zoomScale(cl.zoom);let pl=0,fl=dl,Al=0,bl=dl,kl=0,Dl=0;const{x:Wl,y:Ql}=this.size;if(this.latRange){const F=this.latRange;pl=Da.Q(F[1])*dl,fl=Da.Q(F[0])*dl,fl-pl<Ql&&(kl=Ql/(fl-pl))}hl&&(Al=Da.b3(Da.O(hl[0])*dl,0,dl),bl=Da.b3(Da.O(hl[1])*dl,0,dl),bl<Al&&(bl+=dl),bl-Al<Wl&&(Dl=Wl/(bl-Al)));const{x:wc,y:Sc}=this.project.call({worldSize:dl},F);let eu,iu;const su=Math.max(Dl||0,kl||0);if(su){const F=new Da.P(Dl?(bl+Al)/2:wc,kl?(fl+pl)/2:Sc);return cl.center=this.unproject.call({worldSize:dl},F).wrap(),cl.zoom+=this.scaleZoom(su),cl}if(this.latRange){const F=Ql/2;Sc-F<pl&&(iu=pl+F),Sc+F>fl&&(iu=fl-F)}if(hl){const F=(Al+bl)/2;let ll=wc;this._renderWorldCopies&&(ll=Da.b3(wc,F-dl/2,F+dl/2));const cl=Wl/2;ll-cl<Al&&(eu=Al+cl),ll+cl>bl&&(eu=bl-cl)}if(void 0!==eu||void 0!==iu){const F=new Da.P(null!=eu?eu:wc,null!=iu?iu:Sc);cl.center=this.unproject.call({worldSize:dl},F).wrap()}return cl}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const F=this._unmodified,{center:Da,zoom:ll}=this.getConstrained(this.center,this.zoom);this.center=Da,this.zoom=ll,this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const F=this.centerOffset,ll=this.point.x,cl=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=Da.b5(1,this.center.lat)*this.worldSize;let hl=Da.an(new Float64Array(16));Da.K(hl,hl,[this.width/2,-this.height/2,1]),Da.J(hl,hl,[1,-1,0]),this.labelPlaneMatrix=hl,hl=Da.an(new Float64Array(16)),Da.K(hl,hl,[1,-1,1]),Da.J(hl,hl,[-1,-1,0]),Da.K(hl,hl,[2/this.width,2/this.height,1]),this.glCoordMatrix=hl;const dl=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),pl=Math.min(this.elevation,this.minElevationForCurrentTile),fl=dl-pl*this._pixelPerMeter/Math.cos(this._pitch),Al=pl<0?fl:dl,bl=Math.PI/2+this._pitch,kl=this._fov*(.5+F.y/this.height),Dl=Math.sin(kl)*Al/Math.sin(Da.ac(Math.PI-bl-kl,.01,Math.PI-.01)),Wl=this.getHorizon(),Ql=2*Math.atan(Wl/this.cameraToCenterDistance)*(.5+F.y/(2*Wl)),wc=Math.sin(Ql)*Al/Math.sin(Da.ac(Math.PI-bl-Ql,.01,Math.PI-.01)),Sc=Math.min(Dl,wc);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Sc+Al),this.nearZ=this.height/50,hl=new Float64Array(16),Da.b6(hl,this._fov,this.width/this.height,this.nearZ,this.farZ),hl[8]=2*-F.x/this.width,hl[9]=2*F.y/this.height,this.projectionMatrix=Da.ae(hl),Da.K(hl,hl,[1,-1,1]),Da.J(hl,hl,[0,0,-this.cameraToCenterDistance]),Da.b7(hl,hl,this._pitch),Da.ad(hl,hl,this.angle),Da.J(hl,hl,[-ll,-cl,0]),this.mercatorMatrix=Da.K([],hl,[this.worldSize,this.worldSize,this.worldSize]),Da.K(hl,hl,[1,1,this._pixelPerMeter]),this.pixelMatrix=Da.L(new Float64Array(16),this.labelPlaneMatrix,hl),Da.J(hl,hl,[0,0,-this.elevation]),this.modelViewProjectionMatrix=hl,this.invModelViewProjectionMatrix=Da.as([],hl),this.fogMatrix=new Float64Array(16),Da.b6(this.fogMatrix,this._fov,this.width/this.height,dl,this.farZ),this.fogMatrix[8]=2*-F.x/this.width,this.fogMatrix[9]=2*F.y/this.height,Da.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),Da.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),Da.b7(this.fogMatrix,this.fogMatrix,this._pitch),Da.ad(this.fogMatrix,this.fogMatrix,this.angle),Da.J(this.fogMatrix,this.fogMatrix,[-ll,-cl,0]),Da.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),Da.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=Da.L(new Float64Array(16),this.labelPlaneMatrix,hl);const eu=this.width%2/2,iu=this.height%2/2,su=Math.cos(this.angle),cu=Math.sin(this.angle),uu=ll-Math.round(ll)+su*eu+cu*iu,hu=cl-Math.round(cl)+su*iu+cu*eu,Lu=new Float64Array(hl);if(Da.J(Lu,Lu,[uu>.5?uu-1:uu,hu>.5?hu-1:hu,0]),this.alignedModelViewProjectionMatrix=Lu,hl=Da.as(new Float64Array(16),this.pixelMatrix),!hl)throw new Error("failed to invert matrix");this.pixelMatrixInverse=hl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const F=this.pointCoordinate(new Da.P(0,0)),ll=[F.x*this.worldSize,F.y*this.worldSize,0,1];return Da.af(ll,ll,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const F=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new Da.P(0,F))}getCameraQueryGeometry(F){const ll=this.getCameraPoint();if(1===F.length)return[F[0],ll];{let cl=ll.x,hl=ll.y,dl=ll.x,pl=ll.y;for(const Da of F)cl=Math.min(cl,Da.x),hl=Math.min(hl,Da.y),dl=Math.max(dl,Da.x),pl=Math.max(pl,Da.y);return[new Da.P(cl,hl),new Da.P(dl,hl),new Da.P(dl,pl),new Da.P(cl,pl),new Da.P(cl,hl)]}}lngLatToCameraDepth(F,ll){const cl=this.locationCoordinate(F),hl=[cl.x*this.worldSize,cl.y*this.worldSize,ll,1];return Da.af(hl,hl,this.modelViewProjectionMatrix),hl[2]/hl[3]}}function Ia(F,Da){let ll,cl=!1,hl=null,dl=null;const r=()=>{hl=null,cl&&(F.apply(dl,ll),hl=setTimeout(r,Da),cl=!1)};return(...F)=>(cl=!0,dl=this,ll=F,hl||r(),hl)}class Ea{constructor(F){this._getCurrentHash=()=>{const F=window.location.hash.replace("#","");if(this._hashName){let Da;return F.split("&").map((F=>F.split("="))).forEach((F=>{F[0]===this._hashName&&(Da=F)})),(Da&&Da[1]||"").split("/")}return F.split("/")},this._onHashChange=()=>{const F=this._getCurrentHash();if(F.length>=3&&!F.some((F=>isNaN(F)))){const Da=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(F[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+F[2],+F[1]],zoom:+F[0],bearing:Da,pitch:+(F[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const F=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,F)},this._removeHash=()=>{const F=this._getCurrentHash();if(0===F.length)return;const Da=F.join("/");let ll=Da;ll.split("&").length>0&&(ll=ll.split("&")[0]),this._hashName&&(ll=`${this._hashName}=${Da}`);let cl=window.location.hash.replace(ll,"");cl.startsWith("#&")?cl=cl.slice(0,1)+cl.slice(2):"#"===cl&&(cl="");let hl=window.location.href.replace(/(#.+)?$/,cl);hl=hl.replace("&&","&"),window.history.replaceState(window.history.state,null,hl)},this._updateHash=Ia(this._updateHashUnthrottled,300),this._hashName=F&&encodeURIComponent(F)}addTo(F){return this._map=F,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(F){const Da=this._map.getCenter(),ll=Math.round(100*this._map.getZoom())/100,cl=Math.ceil((ll*Math.LN2+Math.log(512/360/.5))/Math.LN10),hl=Math.pow(10,cl),dl=Math.round(Da.lng*hl)/hl,pl=Math.round(Da.lat*hl)/hl,fl=this._map.getBearing(),Al=this._map.getPitch();let bl="";if(bl+=F?`/${dl}/${pl}/${ll}`:`${ll}/${pl}/${dl}`,(fl||Al)&&(bl+="/"+Math.round(10*fl)/10),Al&&(bl+=`/${Math.round(Al)}`),this._hashName){const F=this._hashName;let Da=!1;const ll=window.location.hash.slice(1).split("&").map((ll=>{const cl=ll.split("=")[0];return cl===F?(Da=!0,`${cl}=${bl}`):ll})).filter((F=>F));return Da||ll.push(`${F}=${bl}`),`#${ll.join("&")}`}return`#${bl}`}}const xd={linearity:.3,easing:Da.b8(0,0,.3,1)},bd=Da.e({deceleration:2500,maxSpeed:1400},xd),wd=Da.e({deceleration:20,maxSpeed:1400},xd),Ed=Da.e({deceleration:1e3,maxSpeed:360},xd),Md=Da.e({deceleration:1e3,maxSpeed:90},xd);class Ma{constructor(F){this._map=F,this.clear()}clear(){this._inertiaBuffer=[]}record(F){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:dl.now(),settings:F})}_drainInertiaBuffer(){const F=this._inertiaBuffer,Da=dl.now();for(;F.length>0&&Da-F[0].time>160;)F.shift()}_onMoveEnd(F){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const ll={zoom:0,bearing:0,pitch:0,pan:new Da.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:Da}of this._inertiaBuffer)ll.zoom+=Da.zoomDelta||0,ll.bearing+=Da.bearingDelta||0,ll.pitch+=Da.pitchDelta||0,Da.panDelta&&ll.pan._add(Da.panDelta),Da.around&&(ll.around=Da.around),Da.pinchAround&&(ll.pinchAround=Da.pinchAround);const cl=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,hl={};if(ll.pan.mag()){const dl=Ra(ll.pan.mag(),cl,Da.e({},bd,F||{}));hl.offset=ll.pan.mult(dl.amount/ll.pan.mag()),hl.center=this._map.transform.center,Aa(hl,dl)}if(ll.zoom){const F=Ra(ll.zoom,cl,wd);hl.zoom=this._map.transform.zoom+F.amount,Aa(hl,F)}if(ll.bearing){const F=Ra(ll.bearing,cl,Ed);hl.bearing=this._map.transform.bearing+Da.ac(F.amount,-179,179),Aa(hl,F)}if(ll.pitch){const F=Ra(ll.pitch,cl,Md);hl.pitch=this._map.transform.pitch+F.amount,Aa(hl,F)}if(hl.zoom||hl.bearing){const F=void 0===ll.pinchAround?ll.around:ll.pinchAround;hl.around=F?this._map.unproject(F):this._map.getCenter()}return this.clear(),Da.e(hl,{noMoveStart:!0})}}function Aa(F,Da){(!F.duration||F.duration<Da.duration)&&(F.duration=Da.duration,F.easing=Da.easing)}function Ra(F,ll,cl){const{maxSpeed:hl,linearity:dl,deceleration:pl}=cl,fl=Da.ac(F*dl/(ll/1e3),-hl,hl),Al=Math.abs(fl)/(pl*dl);return{easing:cl.easing,duration:1e3*Al,amount:fl*(Al/2)}}class ka extends Da.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(F,ll,cl,hl={}){const dl=r.mousePos(ll.getCanvas(),cl),pl=ll.unproject(dl);super(F,Da.e({point:dl,lngLat:pl,originalEvent:cl},hl)),this._defaultPrevented=!1,this.target=ll}}class La extends Da.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(F,ll,cl){const hl="touchend"===F?cl.changedTouches:cl.touches,dl=r.touchPos(ll.getCanvasContainer(),hl),pl=dl.map((F=>ll.unproject(F))),fl=dl.reduce(((F,Da,ll,cl)=>F.add(Da.div(cl.length))),new Da.P(0,0));super(F,{points:dl,point:fl,lngLats:pl,lngLat:ll.unproject(fl),originalEvent:cl}),this._defaultPrevented=!1}}class Fa extends Da.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(F,Da,ll){super(F,{originalEvent:ll}),this._defaultPrevented=!1}}class Ba{constructor(F,Da){this._map=F,this._clickTolerance=Da.clickTolerance}reset(){delete this._mousedownPos}wheel(F){return this._firePreventable(new Fa(F.type,this._map,F))}mousedown(F,Da){return this._mousedownPos=Da,this._firePreventable(new ka(F.type,this._map,F))}mouseup(F){this._map.fire(new ka(F.type,this._map,F))}click(F,Da){this._mousedownPos&&this._mousedownPos.dist(Da)>=this._clickTolerance||this._map.fire(new ka(F.type,this._map,F))}dblclick(F){return this._firePreventable(new ka(F.type,this._map,F))}mouseover(F){this._map.fire(new ka(F.type,this._map,F))}mouseout(F){this._map.fire(new ka(F.type,this._map,F))}touchstart(F){return this._firePreventable(new La(F.type,this._map,F))}touchmove(F){this._map.fire(new La(F.type,this._map,F))}touchend(F){this._map.fire(new La(F.type,this._map,F))}touchcancel(F){this._map.fire(new La(F.type,this._map,F))}_firePreventable(F){if(this._map.fire(F),F.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oa{constructor(F){this._map=F}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(F){this._map.fire(new ka(F.type,this._map,F))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ka("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(F){this._delayContextMenu?this._contextMenuEvent=F:this._ignoreContextMenu||this._map.fire(new ka(F.type,this._map,F)),this._map.listens("contextmenu")&&F.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(F){this._map=F}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(F){return this.transform.pointLocation(Da.P.convert(F),this._map.terrain)}}class Ua{constructor(F,Da){this._map=F,this._tr=new Na(F),this._el=F.getCanvasContainer(),this._container=F.getContainer(),this._clickTolerance=Da.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(F,Da){this.isEnabled()&&F.shiftKey&&0===F.button&&(r.disableDrag(),this._startPos=this._lastPos=Da,this._active=!0)}mousemoveWindow(F,Da){if(!this._active)return;const ll=Da;if(this._lastPos.equals(ll)||!this._box&&ll.dist(this._startPos)<this._clickTolerance)return;const cl=this._startPos;this._lastPos=ll,this._box||(this._box=r.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",F));const hl=Math.min(cl.x,ll.x),dl=Math.max(cl.x,ll.x),pl=Math.min(cl.y,ll.y),fl=Math.max(cl.y,ll.y);r.setTransform(this._box,`translate(${hl}px,${pl}px)`),this._box.style.width=dl-hl+"px",this._box.style.height=fl-pl+"px"}mouseupWindow(F,ll){if(!this._active)return;if(0!==F.button)return;const cl=this._startPos,hl=ll;if(this.reset(),r.suppressClick(),cl.x!==hl.x||cl.y!==hl.y)return this._map.fire(new Da.k("boxzoomend",{originalEvent:F})),{cameraAnimation:F=>F.fitScreenCoordinates(cl,hl,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",F)}keydown(F){this._active&&27===F.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",F))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(F,ll){return this._map.fire(new Da.k(F,{originalEvent:ll}))}}function ja(F,Da){if(F.length!==Da.length)throw new Error(`The number of touches and points are not equal - touches ${F.length}, points ${Da.length}`);const ll={};for(let cl=0;cl<F.length;cl++)ll[F[cl].identifier]=Da[cl];return ll}class Za{constructor(F){this.reset(),this.numTouches=F.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(F,ll,cl){(this.centroid||cl.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=F.timeStamp),cl.length===this.numTouches&&(this.centroid=function(F){const ll=new Da.P(0,0);for(const Da of F)ll._add(Da);return ll.div(F.length)}(ll),this.touches=ja(cl,ll)))}touchmove(F,Da,ll){if(this.aborted||!this.centroid)return;const cl=ja(ll,Da);for(const hl in this.touches){const F=cl[hl];(!F||F.dist(this.touches[hl])>30)&&(this.aborted=!0)}}touchend(F,Da,ll){if((!this.centroid||F.timeStamp-this.startTime>500)&&(this.aborted=!0),0===ll.length){const F=!this.aborted&&this.centroid;if(this.reset(),F)return F}}}class qa{constructor(F){this.singleTap=new Za(F),this.numTaps=F.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(F,Da,ll){this.singleTap.touchstart(F,Da,ll)}touchmove(F,Da,ll){this.singleTap.touchmove(F,Da,ll)}touchend(F,Da,ll){const cl=this.singleTap.touchend(F,Da,ll);if(cl){const Da=F.timeStamp-this.lastTime<500,ll=!this.lastTap||this.lastTap.dist(cl)<30;if(Da&&ll||this.reset(),this.count++,this.lastTime=F.timeStamp,this.lastTap=cl,this.count===this.numTaps)return this.reset(),cl}}}class Va{constructor(F){this._tr=new Na(F),this._zoomIn=new qa({numTouches:1,numTaps:2}),this._zoomOut=new qa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(F,Da,ll){this._zoomIn.touchstart(F,Da,ll),this._zoomOut.touchstart(F,Da,ll)}touchmove(F,Da,ll){this._zoomIn.touchmove(F,Da,ll),this._zoomOut.touchmove(F,Da,ll)}touchend(F,Da,ll){const cl=this._zoomIn.touchend(F,Da,ll),hl=this._zoomOut.touchend(F,Da,ll),dl=this._tr;return cl?(this._active=!0,F.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:Da=>Da.easeTo({duration:300,zoom:dl.zoom+1,around:dl.unproject(cl)},{originalEvent:F})}):hl?(this._active=!0,F.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:Da=>Da.easeTo({duration:300,zoom:dl.zoom-1,around:dl.unproject(hl)},{originalEvent:F})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ga{constructor(F){this._enabled=!!F.enable,this._moveStateManager=F.moveStateManager,this._clickTolerance=F.clickTolerance||1,this._moveFunction=F.move,this._activateOnStart=!!F.activateOnStart,F.assignEvents(this),this.reset()}reset(F){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(F)}_move(...F){const Da=this._moveFunction(...F);if(Da.bearingDelta||Da.pitchDelta||Da.around||Da.panDelta)return this._active=!0,Da}dragStart(F,Da){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(F)&&(this._moveStateManager.startMove(F),this._lastPoint=Da.length?Da[0]:Da,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(F,Da){if(!this.isEnabled())return;const ll=this._lastPoint;if(!ll)return;if(F.preventDefault(),!this._moveStateManager.isValidMoveEvent(F))return void this.reset(F);const cl=Da.length?Da[0]:Da;return!this._moved&&cl.dist(ll)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=cl,this._move(ll,cl))}dragEnd(F){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(F)&&(this._moved&&r.suppressClick(),this.reset(F))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Sd={0:1,2:2};class Wa{constructor(F){this._correctEvent=F.checkCorrectEvent}startMove(F){const Da=r.mouseButton(F);this._eventButton=Da}endMove(F){delete this._eventButton}isValidStartEvent(F){return this._correctEvent(F)}isValidMoveEvent(F){return!function(F,Da){const ll=Sd[Da];return void 0===F.buttons||(F.buttons&ll)!==ll}(F,this._eventButton)}isValidEndEvent(F){return r.mouseButton(F)===this._eventButton}}class $a{constructor(){this._firstTouch=void 0}_isOneFingerTouch(F){return 1===F.targetTouches.length}_isSameTouchEvent(F){return F.targetTouches[0].identifier===this._firstTouch}startMove(F){this._firstTouch=F.targetTouches[0].identifier}endMove(F){delete this._firstTouch}isValidStartEvent(F){return this._isOneFingerTouch(F)}isValidMoveEvent(F){return this._isOneFingerTouch(F)&&this._isSameTouchEvent(F)}isValidEndEvent(F){return this._isOneFingerTouch(F)&&this._isSameTouchEvent(F)}}const Xa=F=>{F.mousedown=F.dragStart,F.mousemoveWindow=F.dragMove,F.mouseup=F.dragEnd,F.contextmenu=F=>{F.preventDefault()}},Ka=({enable:F,clickTolerance:Da,bearingDegreesPerPixelMoved:ll=.8})=>{const cl=new Wa({checkCorrectEvent:F=>0===r.mouseButton(F)&&F.ctrlKey||2===r.mouseButton(F)});return new Ga({clickTolerance:Da,move:(F,Da)=>({bearingDelta:(Da.x-F.x)*ll}),moveStateManager:cl,enable:F,assignEvents:Xa})},Ja=({enable:F,clickTolerance:Da,pitchDegreesPerPixelMoved:ll=-.5})=>{const cl=new Wa({checkCorrectEvent:F=>0===r.mouseButton(F)&&F.ctrlKey||2===r.mouseButton(F)});return new Ga({clickTolerance:Da,move:(F,Da)=>({pitchDelta:(Da.y-F.y)*ll}),moveStateManager:cl,enable:F,assignEvents:Xa})};class Ya{constructor(F,Da){this._clickTolerance=F.clickTolerance||1,this._map=Da,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new Da.P(0,0)}_shouldBePrevented(F){return F<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(F,Da,ll){return this._calculateTransform(F,Da,ll)}touchmove(F,Da,ll){if(this._active){if(!this._shouldBePrevented(ll.length))return F.preventDefault(),this._calculateTransform(F,Da,ll);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",F)}}touchend(F,Da,ll){this._calculateTransform(F,Da,ll),this._active&&this._shouldBePrevented(ll.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(F,ll,cl){cl.length>0&&(this._active=!0);const hl=ja(cl,ll),dl=new Da.P(0,0),pl=new Da.P(0,0);let fl=0;for(const Da in hl){const F=hl[Da],ll=this._touches[Da];ll&&(dl._add(F),pl._add(F.sub(ll)),fl++,hl[Da]=F)}if(this._touches=hl,this._shouldBePrevented(fl)||!pl.mag())return;const Al=pl.div(fl);return this._sum._add(Al),this._sum.mag()<this._clickTolerance?void 0:{around:dl.div(fl),panDelta:Al}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(F,Da,ll){this._firstTwoTouches||ll.length<2||(this._firstTwoTouches=[ll[0].identifier,ll[1].identifier],this._start([Da[0],Da[1]]))}touchmove(F,Da,ll){if(!this._firstTwoTouches)return;F.preventDefault();const[cl,hl]=this._firstTwoTouches,dl=ts(ll,Da,cl),pl=ts(ll,Da,hl);if(!dl||!pl)return;const fl=this._aroundCenter?null:dl.add(pl).div(2);return this._move([dl,pl],fl,F)}touchend(F,Da,ll){if(!this._firstTwoTouches)return;const[cl,hl]=this._firstTwoTouches,dl=ts(ll,Da,cl),pl=ts(ll,Da,hl);dl&&pl||(this._active&&r.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(F){this._enabled=!0,this._aroundCenter=!!F&&"center"===F.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ts(F,Da,ll){for(let cl=0;cl<F.length;cl++)if(F[cl].identifier===ll)return Da[cl]}function es(F,Da){return Math.log(F/Da)/Math.LN2}class is extends Qa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(F){this._startDistance=this._distance=F[0].dist(F[1])}_move(F,Da){const ll=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(es(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:es(this._distance,ll),pinchAround:Da}}}function as(F,Da){return 180*F.angleWith(Da)/Math.PI}class ss extends Qa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])}_move(F,Da,ll){const cl=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:as(this._vector,cl),pinchAround:Da}}_isBelowThreshold(F){this._minDiameter=Math.min(this._minDiameter,F.mag());const Da=25/(Math.PI*this._minDiameter)*360,ll=as(F,this._startVector);return Math.abs(ll)<Da}}function os(F){return Math.abs(F.y)>Math.abs(F.x)}class rs extends Qa{constructor(F){super(),this._currentTouchCount=0,this._map=F}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(F,Da,ll){super.touchstart(F,Da,ll),this._currentTouchCount=ll.length}_start(F){this._lastPoints=F,os(F[0].sub(F[1]))&&(this._valid=!1)}_move(F,Da,ll){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const cl=F[0].sub(this._lastPoints[0]),hl=F[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(cl,hl,ll.timeStamp),this._valid?(this._lastPoints=F,this._active=!0,{pitchDelta:(cl.y+hl.y)/2*-.5}):void 0}gestureBeginsVertically(F,Da,ll){if(void 0!==this._valid)return this._valid;const cl=F.mag()>=2,hl=Da.mag()>=2;if(!cl&&!hl)return;if(!cl||!hl)return void 0===this._firstMove&&(this._firstMove=ll),ll-this._firstMove<100&&void 0;const dl=F.y>0==Da.y>0;return os(F)&&os(Da)&&dl}}const kd={panStep:100,bearingStep:15,pitchStep:10};class ls{constructor(F){this._tr=new Na(F);const Da=kd;this._panStep=Da.panStep,this._bearingStep=Da.bearingStep,this._pitchStep=Da.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(F){if(F.altKey||F.ctrlKey||F.metaKey)return;let Da=0,ll=0,cl=0,hl=0,dl=0;switch(F.keyCode){case 61:case 107:case 171:case 187:Da=1;break;case 189:case 109:case 173:Da=-1;break;case 37:F.shiftKey?ll=-1:(F.preventDefault(),hl=-1);break;case 39:F.shiftKey?ll=1:(F.preventDefault(),hl=1);break;case 38:F.shiftKey?cl=1:(F.preventDefault(),dl=-1);break;case 40:F.shiftKey?cl=-1:(F.preventDefault(),dl=1);break;default:return}return this._rotationDisabled&&(ll=0,cl=0),{cameraAnimation:pl=>{const fl=this._tr;pl.easeTo({duration:300,easeId:"keyboardHandler",easing:hs,zoom:Da?Math.round(fl.zoom)+Da*(F.shiftKey?2:1):fl.zoom,bearing:fl.bearing+ll*this._bearingStep,pitch:fl.pitch+cl*this._pitchStep,offset:[-hl*this._panStep,-dl*this._panStep],center:fl.center},{originalEvent:F})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function hs(F){return F*(2-F)}const Td=4.000244140625;class us{constructor(F,Da){this._onTimeout=F=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(F)},this._map=F,this._tr=new Na(F),this._triggerRenderFrame=Da,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(F){this._defaultZoomRate=F}setWheelZoomRate(F){this._wheelZoomRate=F}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(F){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!F&&"center"===F.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(F){return!!this._map.cooperativeGestures.isEnabled()&&!(F.ctrlKey||this._map.cooperativeGestures.isBypassed(F))}wheel(F){if(!this.isEnabled())return;if(this._shouldBePrevented(F))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",F);let Da=F.deltaMode===WheelEvent.DOM_DELTA_LINE?40*F.deltaY:F.deltaY;const ll=dl.now(),cl=ll-(this._lastWheelEventTime||0);this._lastWheelEventTime=ll,0!==Da&&Da%Td==0?this._type="wheel":0!==Da&&Math.abs(Da)<4?this._type="trackpad":cl>400?(this._type=null,this._lastValue=Da,this._timeout=setTimeout(this._onTimeout,40,F)):this._type||(this._type=Math.abs(cl*Da)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Da+=this._lastValue)),F.shiftKey&&Da&&(Da/=4),this._type&&(this._lastWheelEvent=F,this._delta-=Da,this._active||this._start(F)),F.preventDefault()}_start(F){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const ll=r.mousePos(this._map.getCanvas(),F),cl=this._tr;this._around=ll.y>cl.transform.height/2-cl.transform.getHorizon()?Da.N.convert(this._aroundCenter?cl.center:cl.unproject(ll)):Da.N.convert(cl.center),this._aroundPoint=cl.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const F=this._tr.transform;if(0!==this._delta){const Da="wheel"===this._type&&Math.abs(this._delta)>Td?this._wheelZoomRate:this._defaultZoomRate;let ll=2/(1+Math.exp(-Math.abs(this._delta*Da)));this._delta<0&&0!==ll&&(ll=1/ll);const cl="number"==typeof this._targetZoom?F.zoomScale(this._targetZoom):F.scale;this._targetZoom=Math.min(F.maxZoom,Math.max(F.minZoom,F.scaleZoom(cl*ll))),"wheel"===this._type&&(this._startZoom=F.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const ll="number"==typeof this._targetZoom?this._targetZoom:F.zoom,cl=this._startZoom,hl=this._easing;let pl,fl=!1;const Al=dl.now()-this._lastWheelEventTime;if("wheel"===this._type&&cl&&hl&&Al){const F=Math.min(Al/200,1),dl=hl(F);pl=Da.y.number(cl,ll,dl),F<1?this._frameId||(this._frameId=!0):fl=!0}else pl=ll,fl=!0;return this._active=!0,fl&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!fl,zoomDelta:pl-F.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(F){let ll=Da.b9;if(this._prevEase){const F=this._prevEase,cl=(dl.now()-F.start)/F.duration,hl=F.easing(cl+.01)-F.easing(cl),pl=.27/Math.sqrt(hl*hl+1e-4)*.01,fl=Math.sqrt(.0729-pl*pl);ll=Da.b8(pl,fl,.25,1)}return this._prevEase={start:dl.now(),duration:F,easing:ll},ll}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ds{constructor(F,Da){this._clickZoom=F,this._tapZoom=Da}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _s{constructor(F){this._tr=new Na(F),this.reset()}reset(){this._active=!1}dblclick(F,Da){return F.preventDefault(),{cameraAnimation:ll=>{ll.easeTo({duration:300,zoom:this._tr.zoom+(F.shiftKey?-1:1),around:this._tr.unproject(Da)},{originalEvent:F})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps{constructor(){this._tap=new qa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(F,Da,ll){if(!this._swipePoint)if(this._tapTime){const cl=Da[0],hl=F.timeStamp-this._tapTime<500,dl=this._tapPoint.dist(cl)<30;hl&&dl?ll.length>0&&(this._swipePoint=cl,this._swipeTouch=ll[0].identifier):this.reset()}else this._tap.touchstart(F,Da,ll)}touchmove(F,Da,ll){if(this._tapTime){if(this._swipePoint){if(ll[0].identifier!==this._swipeTouch)return;const cl=Da[0],hl=cl.y-this._swipePoint.y;return this._swipePoint=cl,F.preventDefault(),this._active=!0,{zoomDelta:hl/128}}}else this._tap.touchmove(F,Da,ll)}touchend(F,Da,ll){if(this._tapTime)this._swipePoint&&0===ll.length&&this.reset();else{const cl=this._tap.touchend(F,Da,ll);cl&&(this._tapTime=F.timeStamp,this._tapPoint=cl)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ms{constructor(F,Da,ll){this._el=F,this._mousePan=Da,this._touchPan=ll}enable(F){this._inertiaOptions=F||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fs{constructor(F,Da,ll){this._pitchWithRotate=F.pitchWithRotate,this._mouseRotate=Da,this._mousePitch=ll}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class gs{constructor(F,Da,ll,cl){this._el=F,this._touchZoom=Da,this._touchRotate=ll,this._tapDragZoom=cl,this._rotationDisabled=!1,this._enabled=!0}enable(F){this._touchZoom.enable(F),this._rotationDisabled||this._touchRotate.enable(F),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class vs{constructor(F,Da){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=F,this._options=Da,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const F=this._map.getCanvasContainer();F.classList.add("maplibregl-cooperative-gestures"),this._container=r.create("div","maplibregl-cooperative-gesture-screen",F);let Da=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(Da=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const ll=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),cl=document.createElement("div");cl.className="maplibregl-desktop-message",cl.textContent=Da,this._container.appendChild(cl);const hl=document.createElement("div");hl.className="maplibregl-mobile-message",hl.textContent=ll,this._container.appendChild(hl),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(r.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(F){return F[this._bypassKey]}notifyGestureBlocked(F,ll){this._enabled&&(this._map.fire(new Da.k("cooperativegestureprevented",{gestureType:F,originalEvent:ll})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const xs=F=>F.zoom||F.drag||F.pitch||F.rotate;class ys extends Da.k{}function bs(F){return F.panDelta&&F.panDelta.mag()||F.zoomDelta||F.bearingDelta||F.pitchDelta}class ws{constructor(F,Da){this.handleWindowEvent=F=>{this.handleEvent(F,`${F.type}Window`)},this.handleEvent=(F,Da)=>{if("blur"===F.type)return void this.stop(!0);this._updatingCamera=!0;const ll="renderFrame"===F.type?void 0:F,cl={needsRenderFrame:!1},hl={},dl={},pl=F.touches,fl=pl?this._getMapTouches(pl):void 0,Al=fl?r.touchPos(this._map.getCanvas(),fl):r.mousePos(this._map.getCanvas(),F);for(const{handlerName:Dl,handler:Wl,allowed:Ql}of this._handlers){if(!Wl.isEnabled())continue;let pl;this._blockedByActive(dl,Ql,Dl)?Wl.reset():Wl[Da||F.type]&&(pl=Wl[Da||F.type](F,Al,fl),this.mergeHandlerResult(cl,hl,pl,Dl,ll),pl&&pl.needsRenderFrame&&this._triggerRenderFrame()),(pl||Wl.isActive())&&(dl[Dl]=Wl)}const bl={};for(const Dl in this._previousActiveHandlers)dl[Dl]||(bl[Dl]=ll);this._previousActiveHandlers=dl,(Object.keys(bl).length||bs(cl))&&(this._changes.push([cl,hl,bl]),this._triggerRenderFrame()),(Object.keys(dl).length||bs(cl))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:kl}=cl;kl&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kl(this._map))},this._map=F,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ma(F),this._bearingSnap=Da.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Da);const ll=this._el;this._listeners=[[ll,"touchstart",{passive:!0}],[ll,"touchmove",{passive:!1}],[ll,"touchend",void 0],[ll,"touchcancel",void 0],[ll,"mousedown",void 0],[ll,"mousemove",void 0],[ll,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[ll,"mouseover",void 0],[ll,"mouseout",void 0],[ll,"dblclick",void 0],[ll,"click",void 0],[ll,"keydown",{capture:!1}],[ll,"keyup",void 0],[ll,"wheel",{passive:!1}],[ll,"contextmenu",void 0],[window,"blur",void 0]];for(const[cl,hl,dl]of this._listeners)r.addEventListener(cl,hl,cl===document?this.handleWindowEvent:this.handleEvent,dl)}destroy(){for(const[F,Da,ll]of this._listeners)r.removeEventListener(F,Da,F===document?this.handleWindowEvent:this.handleEvent,ll)}_addDefaultHandlers(F){const Da=this._map,ll=Da.getCanvasContainer();this._add("mapEvent",new Ba(Da,F));const cl=Da.boxZoom=new Ua(Da,F);this._add("boxZoom",cl),F.interactive&&F.boxZoom&&cl.enable();const hl=Da.cooperativeGestures=new vs(Da,F.cooperativeGestures);this._add("cooperativeGestures",hl),F.cooperativeGestures&&hl.enable();const dl=new Va(Da),pl=new _s(Da);Da.doubleClickZoom=new ds(pl,dl),this._add("tapZoom",dl),this._add("clickZoom",pl),F.interactive&&F.doubleClickZoom&&Da.doubleClickZoom.enable();const fl=new ps;this._add("tapDragZoom",fl);const Al=Da.touchPitch=new rs(Da);this._add("touchPitch",Al),F.interactive&&F.touchPitch&&Da.touchPitch.enable(F.touchPitch);const bl=Ka(F),kl=Ja(F);Da.dragRotate=new fs(F,bl,kl),this._add("mouseRotate",bl,["mousePitch"]),this._add("mousePitch",kl,["mouseRotate"]),F.interactive&&F.dragRotate&&Da.dragRotate.enable();const Dl=(({enable:F,clickTolerance:Da})=>{const ll=new Wa({checkCorrectEvent:F=>0===r.mouseButton(F)&&!F.ctrlKey});return new Ga({clickTolerance:Da,move:(F,Da)=>({around:Da,panDelta:Da.sub(F)}),activateOnStart:!0,moveStateManager:ll,enable:F,assignEvents:Xa})})(F),Wl=new Ya(F,Da);Da.dragPan=new ms(ll,Dl,Wl),this._add("mousePan",Dl),this._add("touchPan",Wl,["touchZoom","touchRotate"]),F.interactive&&F.dragPan&&Da.dragPan.enable(F.dragPan);const Ql=new ss,wc=new is;Da.touchZoomRotate=new gs(ll,wc,Ql,fl),this._add("touchRotate",Ql,["touchPan","touchZoom"]),this._add("touchZoom",wc,["touchPan","touchRotate"]),F.interactive&&F.touchZoomRotate&&Da.touchZoomRotate.enable(F.touchZoomRotate);const Sc=Da.scrollZoom=new us(Da,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Sc,["mousePan"]),F.interactive&&F.scrollZoom&&Da.scrollZoom.enable(F.scrollZoom);const eu=Da.keyboard=new ls(Da);this._add("keyboard",eu),F.interactive&&F.keyboard&&Da.keyboard.enable(),this._add("blockableMapEvent",new Oa(Da))}_add(F,Da,ll){this._handlers.push({handlerName:F,handler:Da,allowed:ll}),this._handlersById[F]=Da}stop(F){if(!this._updatingCamera){for(const{handler:F}of this._handlers)F.reset();this._inertia.clear(),this._fireEvents({},{},F),this._changes=[]}}isActive(){for(const{handler:F}of this._handlers)if(F.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(xs(this._eventsInProgress))||this.isZooming()}_blockedByActive(F,Da,ll){for(const cl in F)if(cl!==ll&&(!Da||Da.indexOf(cl)<0))return!0;return!1}_getMapTouches(F){const Da=[];for(const ll of F)this._el.contains(ll.target)&&Da.push(ll);return Da}mergeHandlerResult(F,ll,cl,hl,dl){if(!cl)return;Da.e(F,cl);const pl={handlerName:hl,originalEvent:cl.originalEvent||dl};void 0!==cl.zoomDelta&&(ll.zoom=pl),void 0!==cl.panDelta&&(ll.drag=pl),void 0!==cl.pitchDelta&&(ll.pitch=pl),void 0!==cl.bearingDelta&&(ll.rotate=pl)}_applyChanges(){const F={},ll={},cl={};for(const[hl,dl,pl]of this._changes)hl.panDelta&&(F.panDelta=(F.panDelta||new Da.P(0,0))._add(hl.panDelta)),hl.zoomDelta&&(F.zoomDelta=(F.zoomDelta||0)+hl.zoomDelta),hl.bearingDelta&&(F.bearingDelta=(F.bearingDelta||0)+hl.bearingDelta),hl.pitchDelta&&(F.pitchDelta=(F.pitchDelta||0)+hl.pitchDelta),void 0!==hl.around&&(F.around=hl.around),void 0!==hl.pinchAround&&(F.pinchAround=hl.pinchAround),hl.noInertia&&(F.noInertia=hl.noInertia),Da.e(ll,dl),Da.e(cl,pl);this._updateMapTransform(F,ll,cl),this._changes=[]}_updateMapTransform(F,Da,ll){const cl=this._map,hl=cl._getTransformForUpdate(),dl=cl.terrain;if(!(bs(F)||dl&&this._terrainMovement))return this._fireEvents(Da,ll,!0);let{panDelta:pl,zoomDelta:fl,bearingDelta:Al,pitchDelta:bl,around:kl,pinchAround:Dl}=F;void 0!==Dl&&(kl=Dl),cl._stop(!0),kl=kl||cl.transform.centerPoint;const Wl=hl.pointLocation(pl?kl.sub(pl):kl);Al&&(hl.bearing+=Al),bl&&(hl.pitch+=bl),fl&&(hl.zoom+=fl),dl?this._terrainMovement||!Da.drag&&!Da.zoom?Da.drag&&this._terrainMovement?hl.center=hl.pointLocation(hl.centerPoint.sub(pl)):hl.setLocationAtPoint(Wl,kl):(this._terrainMovement=!0,this._map._elevationFreeze=!0,hl.setLocationAtPoint(Wl,kl)):hl.setLocationAtPoint(Wl,kl),cl._applyUpdatedTransform(hl),this._map._update(),F.noInertia||this._inertia.record(F),this._fireEvents(Da,ll,!0)}_fireEvents(F,ll,cl){const hl=xs(this._eventsInProgress),pl=xs(F),fl={};for(const Da in F){const{originalEvent:ll}=F[Da];this._eventsInProgress[Da]||(fl[`${Da}start`]=ll),this._eventsInProgress[Da]=F[Da]}!hl&&pl&&this._fireEvent("movestart",pl.originalEvent);for(const Da in fl)this._fireEvent(Da,fl[Da]);pl&&this._fireEvent("move",pl.originalEvent);for(const Da in F){const{originalEvent:ll}=F[Da];this._fireEvent(Da,ll)}const Al={};let bl;for(const Da in this._eventsInProgress){const{handlerName:F,originalEvent:cl}=this._eventsInProgress[Da];this._handlersById[F].isActive()||(delete this._eventsInProgress[Da],bl=ll[F]||cl,Al[`${Da}end`]=bl)}for(const Da in Al)this._fireEvent(Da,Al[Da]);const kl=xs(this._eventsInProgress),Dl=(hl||pl)&&!kl;if(Dl&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(cl&&Dl){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=F=>0!==F&&-this._bearingSnap<F&&F<this._bearingSnap;!F||!F.essential&&dl.prefersReducedMotion?(this._map.fire(new Da.k("moveend",{originalEvent:bl})),i(this._map.getBearing())&&this._map.resetNorth()):(i(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:bl})),this._updatingCamera=!1}}_fireEvent(F,ll){this._map.fire(new Da.k(F,ll?{originalEvent:ll}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((F=>{delete this._frameId,this.handleEvent(new ys("renderFrame",{timeStamp:F})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ts extends Da.E{constructor(F,Da){super(),this._renderFrameCallback=()=>{const F=Math.min((dl.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=Da.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new Da.N(this.transform.center.lng,this.transform.center.lat)}setCenter(F,Da){return this.jumpTo({center:F},Da)}panBy(F,ll,cl){return F=Da.P.convert(F).mult(-1),this.panTo(this.transform.center,Da.e({offset:F},ll),cl)}panTo(F,ll,cl){return this.easeTo(Da.e({center:F},ll),cl)}getZoom(){return this.transform.zoom}setZoom(F,Da){return this.jumpTo({zoom:F},Da),this}zoomTo(F,ll,cl){return this.easeTo(Da.e({zoom:F},ll),cl)}zoomIn(F,Da){return this.zoomTo(this.getZoom()+1,F,Da),this}zoomOut(F,Da){return this.zoomTo(this.getZoom()-1,F,Da),this}getBearing(){return this.transform.bearing}setBearing(F,Da){return this.jumpTo({bearing:F},Da),this}getPadding(){return this.transform.padding}setPadding(F,Da){return this.jumpTo({padding:F},Da),this}rotateTo(F,ll,cl){return this.easeTo(Da.e({bearing:F},ll),cl)}resetNorth(F,ll){return this.rotateTo(0,Da.e({duration:1e3},F),ll),this}resetNorthPitch(F,ll){return this.easeTo(Da.e({bearing:0,pitch:0,duration:1e3},F),ll),this}snapToNorth(F,Da){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,Da):this}getPitch(){return this.transform.pitch}setPitch(F,Da){return this.jumpTo({pitch:F},Da),this}cameraForBounds(F,Da){F=H.convert(F).adjustAntiMeridian();const ll=Da&&Da.bearing||0;return this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),ll,Da)}_cameraForBoxAndBearing(F,ll,cl,hl){const dl={top:0,bottom:0,right:0,left:0};if("number"==typeof(hl=Da.e({padding:dl,offset:[0,0],maxZoom:this.transform.maxZoom},hl)).padding){const F=hl.padding;hl.padding={top:F,bottom:F,right:F,left:F}}hl.padding=Da.e(dl,hl.padding);const pl=this.transform,fl=pl.padding,Al=new H(F,ll),bl=pl.project(Al.getNorthWest()),kl=pl.project(Al.getNorthEast()),Dl=pl.project(Al.getSouthEast()),Wl=pl.project(Al.getSouthWest()),Ql=Da.ba(-cl),wc=bl.rotate(Ql),Sc=kl.rotate(Ql),eu=Dl.rotate(Ql),iu=Wl.rotate(Ql),su=new Da.P(Math.max(wc.x,Sc.x,iu.x,eu.x),Math.max(wc.y,Sc.y,iu.y,eu.y)),cu=new Da.P(Math.min(wc.x,Sc.x,iu.x,eu.x),Math.min(wc.y,Sc.y,iu.y,eu.y)),uu=su.sub(cu),hu=(pl.width-(fl.left+fl.right+hl.padding.left+hl.padding.right))/uu.x,Lu=(pl.height-(fl.top+fl.bottom+hl.padding.top+hl.padding.bottom))/uu.y;if(Lu<0||hu<0)return void Da.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const zu=Math.min(pl.scaleZoom(pl.scale*Math.min(hu,Lu)),hl.maxZoom),Du=Da.P.convert(hl.offset),Nu=new Da.P((hl.padding.left-hl.padding.right)/2,(hl.padding.top-hl.padding.bottom)/2).rotate(Da.ba(cl)),qu=Du.add(Nu).mult(pl.scale/pl.zoomScale(zu));return{center:pl.unproject(bl.add(Dl).div(2).sub(qu)),zoom:zu,bearing:cl}}fitBounds(F,Da,ll){return this._fitInternal(this.cameraForBounds(F,Da),Da,ll)}fitScreenCoordinates(F,ll,cl,hl,dl){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(Da.P.convert(F)),this.transform.pointLocation(Da.P.convert(ll)),cl,hl),hl,dl)}_fitInternal(F,ll,cl){return F?(delete(ll=Da.e(F,ll)).padding,ll.linear?this.easeTo(ll,cl):this.flyTo(ll,cl)):this}jumpTo(F,ll){this.stop();const cl=this._getTransformForUpdate();let hl=!1,dl=!1,pl=!1;return"zoom"in F&&cl.zoom!==+F.zoom&&(hl=!0,cl.zoom=+F.zoom),void 0!==F.center&&(cl.center=Da.N.convert(F.center)),"bearing"in F&&cl.bearing!==+F.bearing&&(dl=!0,cl.bearing=+F.bearing),"pitch"in F&&cl.pitch!==+F.pitch&&(pl=!0,cl.pitch=+F.pitch),null==F.padding||cl.isPaddingEqual(F.padding)||(cl.padding=F.padding),this._applyUpdatedTransform(cl),this.fire(new Da.k("movestart",ll)).fire(new Da.k("move",ll)),hl&&this.fire(new Da.k("zoomstart",ll)).fire(new Da.k("zoom",ll)).fire(new Da.k("zoomend",ll)),dl&&this.fire(new Da.k("rotatestart",ll)).fire(new Da.k("rotate",ll)).fire(new Da.k("rotateend",ll)),pl&&this.fire(new Da.k("pitchstart",ll)).fire(new Da.k("pitch",ll)).fire(new Da.k("pitchend",ll)),this.fire(new Da.k("moveend",ll))}calculateCameraOptionsFromTo(F,ll,cl,hl=0){const dl=Da.Z.fromLngLat(F,ll),pl=Da.Z.fromLngLat(cl,hl),fl=pl.x-dl.x,Al=pl.y-dl.y,bl=pl.z-dl.z,kl=Math.hypot(fl,Al,bl);if(0===kl)throw new Error("Can't calculate camera options with same From and To");const Dl=Math.hypot(fl,Al),Wl=this.transform.scaleZoom(this.transform.cameraToCenterDistance/kl/this.transform.tileSize),Ql=180*Math.atan2(fl,-Al)/Math.PI;let wc=180*Math.acos(Dl/kl)/Math.PI;return wc=bl<0?90-wc:90+wc,{center:pl.toLngLat(),zoom:Wl,pitch:wc,bearing:Ql}}easeTo(F,ll){var cl;this._stop(!1,F.easeId),(!1===(F=Da.e({offset:[0,0],duration:500,easing:Da.b9},F)).animate||!F.essential&&dl.prefersReducedMotion)&&(F.duration=0);const hl=this._getTransformForUpdate(),pl=hl.zoom,fl=hl.bearing,Al=hl.pitch,bl=hl.padding,kl="bearing"in F?this._normalizeBearing(F.bearing,fl):fl,Dl="pitch"in F?+F.pitch:Al,Wl="padding"in F?F.padding:hl.padding,Ql=Da.P.convert(F.offset);let wc=hl.centerPoint.add(Ql);const Sc=hl.pointLocation(wc),{center:eu,zoom:iu}=hl.getConstrained(Da.N.convert(F.center||Sc),null!==(cl=F.zoom)&&void 0!==cl?cl:pl);this._normalizeCenter(eu,hl);const su=hl.project(Sc),cu=hl.project(eu).sub(su),uu=hl.zoomScale(iu-pl);let hu,Lu;F.around&&(hu=Da.N.convert(F.around),Lu=hl.locationPoint(hu));const zu={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||iu!==pl,this._rotating=this._rotating||fl!==kl,this._pitching=this._pitching||Dl!==Al,this._padding=!hl.isPaddingEqual(Wl),this._easeId=F.easeId,this._prepareEase(ll,F.noMoveStart,zu),this.terrain&&this._prepareElevation(eu),this._ease((cl=>{if(this._zooming&&(hl.zoom=Da.y.number(pl,iu,cl)),this._rotating&&(hl.bearing=Da.y.number(fl,kl,cl)),this._pitching&&(hl.pitch=Da.y.number(Al,Dl,cl)),this._padding&&(hl.interpolatePadding(bl,Wl,cl),wc=hl.centerPoint.add(Ql)),this.terrain&&!F.freezeElevation&&this._updateElevation(cl),hu)hl.setLocationAtPoint(hu,Lu);else{const F=hl.zoomScale(hl.zoom-pl),Da=iu>pl?Math.min(2,uu):Math.max(.5,uu),ll=Math.pow(Da,1-cl),dl=hl.unproject(su.add(cu.mult(cl*ll)).mult(F));hl.setLocationAtPoint(hl.renderWorldCopies?dl.wrap():dl,wc)}this._applyUpdatedTransform(hl),this._fireMoveEvents(ll)}),(Da=>{this.terrain&&F.freezeElevation&&this._finalizeElevation(),this._afterEase(ll,Da)}),F),this}_prepareEase(F,ll,cl={}){this._moving=!0,ll||cl.moving||this.fire(new Da.k("movestart",F)),this._zooming&&!cl.zooming&&this.fire(new Da.k("zoomstart",F)),this._rotating&&!cl.rotating&&this.fire(new Da.k("rotatestart",F)),this._pitching&&!cl.pitching&&this.fire(new Da.k("pitchstart",F))}_prepareElevation(F){this._elevationCenter=F,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(F,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(F){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const ll=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(F<1&&ll!==this._elevationTarget){const Da=this._elevationTarget-this._elevationStart;this._elevationStart+=F*(Da-(ll-(Da*F+this._elevationStart))/(1-F)),this._elevationTarget=ll}this.transform.elevation=Da.y.number(this._elevationStart,this._elevationTarget,F)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(F){const Da=F.getCameraPosition(),ll=this.terrain.getElevationForLngLatZoom(Da.lngLat,F.zoom);if(Da.altitude<ll){const cl=this.calculateCameraOptionsFromTo(Da.lngLat,ll,F.center,F.elevation);return{pitch:cl.pitch,zoom:cl.zoom}}return{}}_applyUpdatedTransform(F){const Da=[];if(this.terrain&&Da.push((F=>this._elevateCameraIfInsideTerrain(F))),this.transformCameraUpdate&&Da.push((F=>this.transformCameraUpdate(F))),!Da.length)return;const ll=F.clone();for(const cl of Da){const F=ll.clone(),{center:Da,zoom:hl,pitch:dl,bearing:pl,elevation:fl}=cl(F);Da&&(F.center=Da),void 0!==hl&&(F.zoom=hl),void 0!==dl&&(F.pitch=dl),void 0!==pl&&(F.bearing=pl),void 0!==fl&&(F.elevation=fl),ll.apply(F)}this.transform.apply(ll)}_fireMoveEvents(F){this.fire(new Da.k("move",F)),this._zooming&&this.fire(new Da.k("zoom",F)),this._rotating&&this.fire(new Da.k("rotate",F)),this._pitching&&this.fire(new Da.k("pitch",F))}_afterEase(F,ll){if(this._easeId&&ll&&this._easeId===ll)return;delete this._easeId;const cl=this._zooming,hl=this._rotating,dl=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,cl&&this.fire(new Da.k("zoomend",F)),hl&&this.fire(new Da.k("rotateend",F)),dl&&this.fire(new Da.k("pitchend",F)),this.fire(new Da.k("moveend",F))}flyTo(F,ll){var cl;if(!F.essential&&dl.prefersReducedMotion){const cl=Da.M(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(cl,ll)}this.stop(),F=Da.e({offset:[0,0],speed:1.2,curve:1.42,easing:Da.b9},F);const hl=this._getTransformForUpdate(),pl=hl.zoom,fl=hl.bearing,Al=hl.pitch,bl=hl.padding,kl="bearing"in F?this._normalizeBearing(F.bearing,fl):fl,Dl="pitch"in F?+F.pitch:Al,Wl="padding"in F?F.padding:hl.padding,Ql=Da.P.convert(F.offset);let wc=hl.centerPoint.add(Ql);const Sc=hl.pointLocation(wc),{center:eu,zoom:iu}=hl.getConstrained(Da.N.convert(F.center||Sc),null!==(cl=F.zoom)&&void 0!==cl?cl:pl);this._normalizeCenter(eu,hl);const su=hl.zoomScale(iu-pl),cu=hl.project(Sc),uu=hl.project(eu).sub(cu);let hu=F.curve;const Lu=Math.max(hl.width,hl.height),zu=Lu/su,Du=uu.mag();if("minZoom"in F){const ll=Da.ac(Math.min(F.minZoom,pl,iu),hl.minZoom,hl.maxZoom),cl=Lu/hl.zoomScale(ll-pl);hu=Math.sqrt(cl/Du*2)}const Nu=hu*hu;function P(F){const Da=(zu*zu-Lu*Lu+(F?-1:1)*Nu*Nu*Du*Du)/(2*(F?zu:Lu)*Nu*Du);return Math.log(Math.sqrt(Da*Da+1)-Da)}function C(F){return(Math.exp(F)-Math.exp(-F))/2}function S(F){return(Math.exp(F)+Math.exp(-F))/2}const qu=P(!1);let D=function(F){return S(qu)/S(qu+hu*F)},M=function(F){return Lu*((S(qu)*(C(Da=qu+hu*F)/S(Da))-C(qu))/Nu)/Du;var Da},ih=(P(!0)-qu)/hu;if(Math.abs(Du)<1e-6||!isFinite(ih)){if(Math.abs(Lu-zu)<1e-6)return this.easeTo(F,ll);const Da=zu<Lu?-1:1;ih=Math.abs(Math.log(zu/Lu))/hu,M=()=>0,D=F=>Math.exp(Da*hu*F)}return F.duration="duration"in F?+F.duration:1e3*ih/("screenSpeed"in F?+F.screenSpeed/hu:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=fl!==kl,this._pitching=Dl!==Al,this._padding=!hl.isPaddingEqual(Wl),this._prepareEase(ll,!1),this.terrain&&this._prepareElevation(eu),this._ease((cl=>{const dl=cl*ih,Sc=1/D(dl);hl.zoom=1===cl?iu:pl+hl.scaleZoom(Sc),this._rotating&&(hl.bearing=Da.y.number(fl,kl,cl)),this._pitching&&(hl.pitch=Da.y.number(Al,Dl,cl)),this._padding&&(hl.interpolatePadding(bl,Wl,cl),wc=hl.centerPoint.add(Ql)),this.terrain&&!F.freezeElevation&&this._updateElevation(cl);const su=1===cl?eu:hl.unproject(cu.add(uu.mult(M(dl))).mult(Sc));hl.setLocationAtPoint(hl.renderWorldCopies?su.wrap():su,wc),this._applyUpdatedTransform(hl),this._fireMoveEvents(ll)}),(()=>{this.terrain&&F.freezeElevation&&this._finalizeElevation(),this._afterEase(ll)}),F),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(F,Da){var ll;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const F=this._onEaseEnd;delete this._onEaseEnd,F.call(this,Da)}return F||null===(ll=this.handlers)||void 0===ll||ll.stop(!1),this}_ease(F,Da,ll){!1===ll.animate||0===ll.duration?(F(1),Da()):(this._easeStart=dl.now(),this._easeOptions=ll,this._onEaseFrame=F,this._onEaseEnd=Da,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(F,ll){F=Da.b3(F,-180,180);const cl=Math.abs(F-ll);return Math.abs(F-360-ll)<cl&&(F-=360),Math.abs(F+360-ll)<cl&&(F+=360),F}_normalizeCenter(F,Da){if(!Da.renderWorldCopies||Da.lngRange)return;const ll=F.lng-Da.center.lng;F.lng+=ll>180?-360:ll<-180?360:0}queryTerrainElevation(F){return this.terrain?this.terrain.getElevationForLngLatZoom(Da.N.convert(F),this.transform.tileZoom)-this.transform.elevation:null}}const Id={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Es{constructor(F=Id){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=F=>{!F||"metadata"!==F.sourceDataType&&"visibility"!==F.sourceDataType&&"style"!==F.dataType&&"terrain"!==F.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=F}getDefaultPosition(){return"bottom-right"}onAdd(F){return this._map=F,this._compact=this.options.compact,this._container=r.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=r.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=r.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(F,Da){const ll=this._map._getUIString(`AttributionControl.${Da}`);F.title=ll,F.setAttribute("aria-label",ll)}_updateAttributions(){if(!this._map.style)return;let F=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?F=F.concat(this.options.customAttribution.map((F=>"string"!=typeof F?"":F))):"string"==typeof this.options.customAttribution&&F.push(this.options.customAttribution)),this._map.style.stylesheet){const F=this._map.style.stylesheet;this.styleOwner=F.owner,this.styleId=F.id}const Da=this._map.style.sourceCaches;for(const cl in Da){const ll=Da[cl];if(ll.used||ll.usedForTerrain){const Da=ll.getSource();Da.attribution&&F.indexOf(Da.attribution)<0&&F.push(Da.attribution)}}F=F.filter((F=>String(F).trim())),F.sort(((F,Da)=>F.length-Da.length)),F=F.filter(((Da,ll)=>{for(let cl=ll+1;cl<F.length;cl++)if(F[cl].indexOf(Da)>=0)return!1;return!0}));const ll=F.join(" | ");ll!==this._attribHTML&&(this._attribHTML=ll,F.length?(this._innerContainer.innerHTML=ll,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ps{constructor(F={}){this._updateCompact=()=>{const F=this._container.children;if(F.length){const Da=F[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&Da.classList.add("maplibregl-compact"):Da.classList.remove("maplibregl-compact")}},this.options=F}getDefaultPosition(){return"bottom-left"}onAdd(F){this._map=F,this._compact=this.options&&this.options.compact,this._container=r.create("div","maplibregl-ctrl");const Da=r.create("a","maplibregl-ctrl-logo");return Da.target="_blank",Da.rel="noopener nofollow",Da.href="https://maplibre.org/",Da.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Da.setAttribute("rel","noopener nofollow"),this._container.appendChild(Da),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){r.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Cs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(F){const Da=++this._id;return this._queue.push({callback:F,id:Da,cancelled:!1}),Da}remove(F){const Da=this._currentlyRunning,ll=Da?this._queue.concat(Da):this._queue;for(const cl of ll)if(cl.id===F)return void(cl.cancelled=!0)}run(F=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const Da=this._currentlyRunning=this._queue;this._queue=[];for(const ll of Da)if(!ll.cancelled&&(ll.callback(F),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Cd=Da.Y([{name:"a_pos3d",type:"Int16",components:3}]);class zs extends Da.E{constructor(F){super(),this.sourceCache=F,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,F.usedForTerrain=!0,F.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(F,ll){this.sourceCache.update(F,ll),this._renderableTilesKeys=[];const cl={};for(const hl of F.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:ll}))cl[hl.key]=!0,this._renderableTilesKeys.push(hl.key),this._tiles[hl.key]||(hl.posMatrix=new Float64Array(16),Da.aP(hl.posMatrix,0,Da.X,0,Da.X,0,1),this._tiles[hl.key]=new lt(hl,this.tileSize));for(const Da in this._tiles)cl[Da]||delete this._tiles[Da]}freeRtt(F){for(const Da in this._tiles){const ll=this._tiles[Da];(!F||ll.tileID.equals(F)||ll.tileID.isChildOf(F)||F.isChildOf(ll.tileID))&&(ll.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((F=>this.getTileByID(F)))}getTileByID(F){return this._tiles[F]}getTerrainCoords(F){const ll={};for(const cl of this._renderableTilesKeys){const hl=this._tiles[cl].tileID;if(hl.canonical.equals(F.canonical)){const hl=F.clone();hl.posMatrix=new Float64Array(16),Da.aP(hl.posMatrix,0,Da.X,0,Da.X,0,1),ll[cl]=hl}else if(hl.canonical.isChildOf(F.canonical)){const dl=F.clone();dl.posMatrix=new Float64Array(16);const pl=hl.canonical.z-F.canonical.z,fl=hl.canonical.x-(hl.canonical.x>>pl<<pl),Al=hl.canonical.y-(hl.canonical.y>>pl<<pl),bl=Da.X>>pl;Da.aP(dl.posMatrix,0,bl,0,bl,0,1),Da.J(dl.posMatrix,dl.posMatrix,[-fl*bl,-Al*bl,0]),ll[cl]=dl}else if(F.canonical.isChildOf(hl.canonical)){const dl=F.clone();dl.posMatrix=new Float64Array(16);const pl=F.canonical.z-hl.canonical.z,fl=F.canonical.x-(F.canonical.x>>pl<<pl),Al=F.canonical.y-(F.canonical.y>>pl<<pl),bl=Da.X>>pl;Da.aP(dl.posMatrix,0,Da.X,0,Da.X,0,1),Da.J(dl.posMatrix,dl.posMatrix,[fl*bl,Al*bl,0]),Da.K(dl.posMatrix,dl.posMatrix,[1/2**pl,1/2**pl,0]),ll[cl]=dl}}return ll}getSourceTile(F,Da){const ll=this.sourceCache._source;let cl=F.overscaledZ-this.deltaZoom;if(cl>ll.maxzoom&&(cl=ll.maxzoom),cl<ll.minzoom)return null;this._sourceTileCache[F.key]||(this._sourceTileCache[F.key]=F.scaledTo(cl).key);let hl=this.sourceCache.getTileByID(this._sourceTileCache[F.key]);if((!hl||!hl.dem)&&Da)for(;cl>=ll.minzoom&&(!hl||!hl.dem);)hl=this.sourceCache.getTileByID(F.scaledTo(cl--).key);return hl}tilesAfterTime(F=Date.now()){return Object.values(this._tiles).filter((Da=>Da.timeAdded>=F))}}class Ds{constructor(F,Da,ll){this.painter=F,this.sourceCache=new zs(Da),this.options=ll,this.exaggeration="number"==typeof ll.exaggeration?ll.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(F,ll,cl,hl=Da.X){var dl;if(!(ll>=0&&ll<hl&&cl>=0&&cl<hl))return 0;const pl=this.getTerrainData(F),fl=null===(dl=pl.tile)||void 0===dl?void 0:dl.dem;if(!fl)return 0;const Al=function(F,Da,ll){var cl=Da[0],hl=Da[1];return F[0]=ll[0]*cl+ll[4]*hl+ll[12],F[1]=ll[1]*cl+ll[5]*hl+ll[13],F}([],[ll/hl*Da.X,cl/hl*Da.X],pl.u_terrain_matrix),bl=[Al[0]*fl.dim,Al[1]*fl.dim],kl=Math.floor(bl[0]),Dl=Math.floor(bl[1]),Wl=bl[0]-kl,Ql=bl[1]-Dl;return fl.get(kl,Dl)*(1-Wl)*(1-Ql)+fl.get(kl+1,Dl)*Wl*(1-Ql)+fl.get(kl,Dl+1)*(1-Wl)*Ql+fl.get(kl+1,Dl+1)*Wl*Ql}getElevationForLngLatZoom(F,ll){if(!Da.bb(ll,F.wrap()))return 0;const{tileID:cl,mercatorX:hl,mercatorY:dl}=this._getOverscaledTileIDFromLngLatZoom(F,ll);return this.getElevation(cl,hl%Da.X,dl%Da.X,Da.X)}getElevation(F,ll,cl,hl=Da.X){return this.getDEMElevation(F,ll,cl,hl)*this.exaggeration}getTerrainData(F){if(!this._emptyDemTexture){const F=this.painter.context,ll=new Da.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new b(F,ll,F.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new b(F,new Da.R({width:1,height:1}),F.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(F.gl.NEAREST,F.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=Da.an([])}const ll=this.sourceCache.getSourceTile(F,!0);if(ll&&ll.dem&&(!ll.demTexture||ll.needsTerrainPrepare)){const F=this.painter.context;ll.demTexture=this.painter.getTileTexture(ll.dem.stride),ll.demTexture?ll.demTexture.update(ll.dem.getPixels(),{premultiply:!1}):ll.demTexture=new b(F,ll.dem.getPixels(),F.gl.RGBA,{premultiply:!1}),ll.demTexture.bind(F.gl.NEAREST,F.gl.CLAMP_TO_EDGE),ll.needsTerrainPrepare=!1}const cl=ll&&ll+ll.tileID.key+F.key;if(cl&&!this._demMatrixCache[cl]){const cl=this.sourceCache.sourceCache._source.maxzoom;let hl=F.canonical.z-ll.tileID.canonical.z;F.overscaledZ>F.canonical.z&&(F.canonical.z>=cl?hl=F.canonical.z-cl:Da.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const dl=F.canonical.x-(F.canonical.x>>hl<<hl),pl=F.canonical.y-(F.canonical.y>>hl<<hl),fl=Da.bc(new Float64Array(16),[1/(Da.X<<hl),1/(Da.X<<hl),0]);Da.J(fl,fl,[dl*Da.X,pl*Da.X,0]),this._demMatrixCache[F.key]={matrix:fl,coord:F}}return{u_depth:2,u_terrain:3,u_terrain_dim:ll&&ll.dem&&ll.dem.dim||1,u_terrain_matrix:cl?this._demMatrixCache[F.key].matrix:this._emptyDemMatrix,u_terrain_unpack:ll&&ll.dem&&ll.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(ll&&ll.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:ll}}getFramebuffer(F){const Da=this.painter,ll=Da.width/devicePixelRatio,cl=Da.height/devicePixelRatio;return!this._fbo||this._fbo.width===ll&&this._fbo.height===cl||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new b(Da.context,{width:ll,height:cl,data:null},Da.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(Da.context.gl.NEAREST,Da.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new b(Da.context,{width:ll,height:cl,data:null},Da.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(Da.context.gl.NEAREST,Da.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=Da.context.createFramebuffer(ll,cl,!0,!1),this._fbo.depthAttachment.set(Da.context.createRenderbuffer(Da.context.gl.DEPTH_COMPONENT16,ll,cl))),this._fbo.colorAttachment.set("coords"===F?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const F=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const ll=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let Da=0,dl=0;Da<this._coordsTextureSize;Da++)for(let F=0;F<this._coordsTextureSize;F++,dl+=4)ll[dl+0]=255&F,ll[dl+1]=255&Da,ll[dl+2]=F>>8<<4|Da>>8,ll[dl+3]=0;const cl=new Da.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(ll.buffer)),hl=new b(F,cl,F.gl.RGBA,{premultiply:!1});return hl.bind(F.gl.NEAREST,F.gl.CLAMP_TO_EDGE),this._coordsTexture=hl,hl}pointCoordinate(F){this.painter.maybeDrawDepthAndCoords(!0);const ll=new Uint8Array(4),cl=this.painter.context,hl=cl.gl,dl=Math.round(F.x*this.painter.pixelRatio/devicePixelRatio),pl=Math.round(F.y*this.painter.pixelRatio/devicePixelRatio),fl=Math.round(this.painter.height/devicePixelRatio);cl.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),hl.readPixels(dl,fl-pl-1,1,1,hl.RGBA,hl.UNSIGNED_BYTE,ll),cl.bindFramebuffer.set(null);const Al=ll[0]+(ll[2]>>4<<8),bl=ll[1]+((15&ll[2])<<8),kl=this.coordsIndex[255-ll[3]],Dl=kl&&this.sourceCache.getTileByID(kl);if(!Dl)return null;const Wl=this._coordsTextureSize,Ql=(1<<Dl.tileID.canonical.z)*Wl;return new Da.Z((Dl.tileID.canonical.x*Wl+Al)/Ql+Dl.tileID.wrap,(Dl.tileID.canonical.y*Wl+bl)/Ql,this.getElevation(Dl.tileID,Al,bl,Wl))}depthAtPoint(F){const Da=new Uint8Array(4),ll=this.painter.context,cl=ll.gl;return ll.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),cl.readPixels(F.x,this.painter.height/devicePixelRatio-F.y-1,1,1,cl.RGBA,cl.UNSIGNED_BYTE,Da),ll.bindFramebuffer.set(null),(Da[0]/16777216+Da[1]/65536+Da[2]/256+Da[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const F=this.painter.context,ll=new Da.bd,cl=new Da.aY,hl=this.meshSize,dl=Da.X/hl,pl=hl*hl;for(let Da=0;Da<=hl;Da++)for(let F=0;F<=hl;F++)ll.emplaceBack(F*dl,Da*dl,0);for(let Da=0;Da<pl;Da+=hl+1)for(let F=0;F<hl;F++)cl.emplaceBack(F+Da,hl+F+Da+1,hl+F+Da+2),cl.emplaceBack(F+Da,hl+F+Da+2,F+Da+1);const fl=ll.length,Al=fl+2*(hl+1);for(const Dl of[0,1])for(let F=0;F<=hl;F++)for(const cl of[0,1])ll.emplaceBack(F*dl,Dl*Da.X,cl);for(let Da=0;Da<2*hl;Da+=2)cl.emplaceBack(Al+Da,Al+Da+1,Al+Da+3),cl.emplaceBack(Al+Da,Al+Da+3,Al+Da+2),cl.emplaceBack(fl+Da,fl+Da+3,fl+Da+1),cl.emplaceBack(fl+Da,fl+Da+2,fl+Da+3);const bl=ll.length,kl=bl+2*(hl+1);for(const Dl of[0,1])for(let F=0;F<=hl;F++)for(const cl of[0,1])ll.emplaceBack(Dl*Da.X,F*dl,cl);for(let Da=0;Da<2*hl;Da+=2)cl.emplaceBack(bl+Da,bl+Da+1,bl+Da+3),cl.emplaceBack(bl+Da,bl+Da+3,bl+Da+2),cl.emplaceBack(kl+Da,kl+Da+3,kl+Da+1),cl.emplaceBack(kl+Da,kl+Da+2,kl+Da+3);return this._mesh=new ga(F.createVertexBuffer(ll,Cd.members),F.createIndexBuffer(cl),Da.a0.simpleSegment(0,0,ll.length,cl.length)),this._mesh}getMeshFrameDelta(F){return 2*Math.PI*Da.be/Math.pow(2,F)/5}getMinTileElevationForLngLatZoom(F,Da){var ll;const{tileID:cl}=this._getOverscaledTileIDFromLngLatZoom(F,Da);return null!==(ll=this.getMinMaxElevation(cl).minElevation)&&void 0!==ll?ll:0}getMinMaxElevation(F){const Da=this.getTerrainData(F).tile,ll={minElevation:null,maxElevation:null};return Da&&Da.dem&&(ll.minElevation=Da.dem.min*this.exaggeration,ll.maxElevation=Da.dem.max*this.exaggeration),ll}_getOverscaledTileIDFromLngLatZoom(F,ll){const cl=Da.Z.fromLngLat(F.wrap()),hl=(1<<ll)*Da.X,dl=cl.x*hl,pl=cl.y*hl,fl=Math.floor(dl/Da.X),Al=Math.floor(pl/Da.X);return{tileID:new Da.S(ll,0,ll,fl,Al),mercatorX:dl,mercatorY:pl}}}class Ms{constructor(F,Da,ll){this._context=F,this._size=Da,this._tileSize=ll,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const F of this._objects)F.texture.destroy(),F.fbo.destroy()}_createObject(F){const Da=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),ll=new b(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return ll.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),Da.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),Da.colorAttachment.set(ll.texture),{id:F,fbo:Da,texture:ll,stamp:-1,inUse:!1}}getObjectForId(F){return this._objects[F]}useObject(F){F.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((Da=>F.id!==Da)),this._recentlyUsed.push(F.id)}stampObject(F){F.stamp=++this._stamp}getOrCreateFreeObject(){for(const Da of this._recentlyUsed)if(!this._objects[Da].inUse)return this._objects[Da];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const F=this._createObject(this._objects.length);return this._objects.push(F),F}freeObject(F){F.inUse=!1}freeAllObjects(){for(const F of this._objects)this.freeObject(F)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((F=>!F.inUse))}}const Ld={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Rs{constructor(F,Da){this.painter=F,this.terrain=Da,this.pool=new Ms(F.context,30,Da.sourceCache.tileSize*Da.qualityFactor)}destruct(){this.pool.destruct()}getTexture(F){return this.pool.getObjectForId(F.rtt[this._stacks.length-1].id).texture}prepareForRender(F,Da){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=F._order.filter((ll=>!F._layers[ll].isHidden(Da))),this._coordsDescendingInv={};for(const ll in F.sourceCaches){this._coordsDescendingInv[ll]={};const Da=F.sourceCaches[ll].getVisibleCoordinates();for(const F of Da){const Da=this.terrain.sourceCache.getTerrainCoords(F);for(const F in Da)this._coordsDescendingInv[ll][F]||(this._coordsDescendingInv[ll][F]=[]),this._coordsDescendingInv[ll][F].push(Da[F])}}this._coordsDescendingInvStr={};for(const ll of F._order){const Da=F._layers[ll],cl=Da.source;if(Ld[Da.type]&&!this._coordsDescendingInvStr[cl]){this._coordsDescendingInvStr[cl]={};for(const F in this._coordsDescendingInv[cl])this._coordsDescendingInvStr[cl][F]=this._coordsDescendingInv[cl][F].map((F=>F.key)).sort().join()}}for(const ll of this._renderableTiles)for(const F in this._coordsDescendingInvStr){const Da=this._coordsDescendingInvStr[F][ll.tileID.key];Da&&Da!==ll.rttCoords[F]&&(ll.rtt=[])}}renderLayer(F){if(F.isHidden(this.painter.transform.zoom))return!1;const ll=F.type,cl=this.painter,hl=this._renderableLayerIds[this._renderableLayerIds.length-1]===F.id;if(Ld[ll]&&(this._prevType&&Ld[this._prevType]||this._stacks.push([]),this._prevType=ll,this._stacks[this._stacks.length-1].push(F.id),!hl))return!0;if(Ld[this._prevType]||Ld[ll]&&hl){this._prevType=ll;const F=this._stacks.length-1,hl=this._stacks[F]||[];for(const ll of this._renderableTiles){if(this.pool.isFull()&&(fa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ll),ll.rtt[F]){const Da=this.pool.getObjectForId(ll.rtt[F].id);if(Da.stamp===ll.rtt[F].stamp){this.pool.useObject(Da);continue}}const dl=this.pool.getOrCreateFreeObject();this.pool.useObject(dl),this.pool.stampObject(dl),ll.rtt[F]={id:dl.id,stamp:dl.stamp},cl.context.bindFramebuffer.set(dl.fbo.framebuffer),cl.context.clear({color:Da.aM.transparent,stencil:0}),cl.currentStencilSource=void 0;for(let F=0;F<hl.length;F++){const Da=cl.style._layers[hl[F]],pl=Da.source?this._coordsDescendingInv[Da.source][ll.tileID.key]:[ll.tileID];cl.context.viewport.set([0,0,dl.fbo.width,dl.fbo.height]),cl._renderTileClippingMasks(Da,pl),cl.renderLayer(cl,cl.style.sourceCaches[Da.source],Da,pl),Da.source&&(ll.rttCoords[Da.source]=this._coordsDescendingInvStr[Da.source][ll.tileID.key])}}return fa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ld[ll]}return!1}}const zd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Pd=ll,Dd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Id,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:Da.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Bs=F=>{F.touchstart=F.dragStart,F.touchmoveWindow=F.dragMove,F.touchend=F.dragEnd},Rd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ns{constructor(F,ll,cl=!1){this.mousedown=F=>{this.startMouse(Da.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),r.mousePos(this.element,F)),r.addEventListener(window,"mousemove",this.mousemove),r.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,r.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{1!==F.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),r.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),r.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{1!==F.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{0===F.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const hl=F.dragRotate._mouseRotate.getClickTolerance(),dl=F.dragRotate._mousePitch.getClickTolerance();this.element=ll,this.mouseRotate=Ka({clickTolerance:hl,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:Da,bearingDegreesPerPixelMoved:ll=.8})=>{const cl=new $a;return new Ga({clickTolerance:Da,move:(F,Da)=>({bearingDelta:(Da.x-F.x)*ll}),moveStateManager:cl,enable:F,assignEvents:Bs})})({clickTolerance:hl,enable:!0}),this.map=F,cl&&(this.mousePitch=Ja({clickTolerance:dl,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:Da,pitchDegreesPerPixelMoved:ll=-.5})=>{const cl=new $a;return new Ga({clickTolerance:Da,move:(F,Da)=>({pitchDelta:(Da.y-F.y)*ll}),moveStateManager:cl,enable:F,assignEvents:Bs})})({clickTolerance:dl,enable:!0})),r.addEventListener(ll,"mousedown",this.mousedown),r.addEventListener(ll,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(ll,"touchcancel",this.reset)}startMouse(F,Da){this.mouseRotate.dragStart(F,Da),this.mousePitch&&this.mousePitch.dragStart(F,Da),r.disableDrag()}startTouch(F,Da){this.touchRotate.dragStart(F,Da),this.touchPitch&&this.touchPitch.dragStart(F,Da),r.disableDrag()}moveMouse(F,Da){const ll=this.map,{bearingDelta:cl}=this.mouseRotate.dragMove(F,Da)||{};if(cl&&ll.setBearing(ll.getBearing()+cl),this.mousePitch){const{pitchDelta:cl}=this.mousePitch.dragMove(F,Da)||{};cl&&ll.setPitch(ll.getPitch()+cl)}}moveTouch(F,Da){const ll=this.map,{bearingDelta:cl}=this.touchRotate.dragMove(F,Da)||{};if(cl&&ll.setBearing(ll.getBearing()+cl),this.touchPitch){const{pitchDelta:cl}=this.touchPitch.dragMove(F,Da)||{};cl&&ll.setPitch(ll.getPitch()+cl)}}off(){const F=this.element;r.removeEventListener(F,"mousedown",this.mousedown),r.removeEventListener(F,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),r.removeEventListener(window,"touchend",this.touchend),r.removeEventListener(F,"touchcancel",this.reset),this.offTemp()}offTemp(){r.enableDrag(),r.removeEventListener(window,"mousemove",this.mousemove),r.removeEventListener(window,"mouseup",this.mouseup),r.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),r.removeEventListener(window,"touchend",this.touchend)}}let Nd;function js(F,ll,cl){const hl=new Da.N(F.lng,F.lat);if(F=new Da.N(F.lng,F.lat),ll){const hl=new Da.N(F.lng-360,F.lat),dl=new Da.N(F.lng+360,F.lat),pl=cl.locationPoint(F).distSqr(ll);cl.locationPoint(hl).distSqr(ll)<pl?F=hl:cl.locationPoint(dl).distSqr(ll)<pl&&(F=dl)}for(;Math.abs(F.lng-cl.center.lng)>180;){const Da=cl.locationPoint(F);if(Da.x>=0&&Da.y>=0&&Da.x<=cl.width&&Da.y<=cl.height)break;F.lng>cl.center.lng?F.lng-=360:F.lng+=360}return F.lng!==hl.lng&&cl.locationPoint(F).y>cl.height/2-cl.getHorizon()?F:hl}const Ud={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qs(F,Da,ll){const cl=F.classList;for(const hl in Ud)cl.remove(`maplibregl-${ll}-anchor-${hl}`);cl.add(`maplibregl-${ll}-anchor-${Da}`)}class Vs extends Da.E{constructor(F){if(super(),this._onKeyPress=F=>{const Da=F.code,ll=F.charCode||F.keyCode;"Space"!==Da&&"Enter"!==Da&&32!==ll&&13!==ll||this.togglePopup()},this._onMapClick=F=>{const Da=F.originalEvent.target,ll=this._element;this._popup&&(Da===ll||ll.contains(Da))&&this.togglePopup()},this._update=F=>{var Da;if(!this._map)return;const ll=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==F?void 0:F.type)||"render"===(null==F?void 0:F.type)&&!ll)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?js(this._lngLat,this._flatPos,this._map.transform):null===(Da=this._lngLat)||void 0===Da?void 0:Da.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let cl="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?cl=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(cl=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let hl="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?hl="rotateX(0deg)":"map"===this._pitchAlignment&&(hl=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||F&&"moveend"!==F.type||(this._pos=this._pos.round()),r.setTransform(this._element,`${Ud[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${hl} ${cl}`),dl.frameAsync(new AbortController).then((()=>{this._updateOpacity(F&&"moveend"===F.type)})).catch((()=>{}))},this._onMove=F=>{if(!this._isDragging){const Da=this._clickTolerance||this._map._clickTolerance;this._isDragging=F.point.dist(this._pointerdownPos)>=Da}this._isDragging&&(this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new Da.k("dragstart"))),this.fire(new Da.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new Da.k("dragend")),this._state="inactive"},this._addDragHandler=F=>{this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._pointerdownPos=F.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._scale=F&&F.scale||1,this._draggable=F&&F.draggable||!1,this._clickTolerance=F&&F.clickTolerance||0,this._subpixelPositioning=F&&F.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&"auto"!==F.pitchAlignment?F.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==F?void 0:F.opacity,null==F?void 0:F.opacityWhenCovered),F&&F.element)this._element=F.element,this._offset=Da.P.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div");const ll=r.createNS("http://www.w3.org/2000/svg","svg"),cl=41,hl=27;ll.setAttributeNS(null,"display","block"),ll.setAttributeNS(null,"height",`${cl}px`),ll.setAttributeNS(null,"width",`${hl}px`),ll.setAttributeNS(null,"viewBox",`0 0 ${hl} ${cl}`);const dl=r.createNS("http://www.w3.org/2000/svg","g");dl.setAttributeNS(null,"stroke","none"),dl.setAttributeNS(null,"stroke-width","1"),dl.setAttributeNS(null,"fill","none"),dl.setAttributeNS(null,"fill-rule","evenodd");const pl=r.createNS("http://www.w3.org/2000/svg","g");pl.setAttributeNS(null,"fill-rule","nonzero");const fl=r.createNS("http://www.w3.org/2000/svg","g");fl.setAttributeNS(null,"transform","translate(3.0, 29.0)"),fl.setAttributeNS(null,"fill","#000000");const Al=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const F of Al){const Da=r.createNS("http://www.w3.org/2000/svg","ellipse");Da.setAttributeNS(null,"opacity","0.04"),Da.setAttributeNS(null,"cx","10.5"),Da.setAttributeNS(null,"cy","5.80029008"),Da.setAttributeNS(null,"rx",F.rx),Da.setAttributeNS(null,"ry",F.ry),fl.appendChild(Da)}const bl=r.createNS("http://www.w3.org/2000/svg","g");bl.setAttributeNS(null,"fill",this._color);const kl=r.createNS("http://www.w3.org/2000/svg","path");kl.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),bl.appendChild(kl);const Dl=r.createNS("http://www.w3.org/2000/svg","g");Dl.setAttributeNS(null,"opacity","0.25"),Dl.setAttributeNS(null,"fill","#000000");const Wl=r.createNS("http://www.w3.org/2000/svg","path");Wl.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Dl.appendChild(Wl);const Ql=r.createNS("http://www.w3.org/2000/svg","g");Ql.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ql.setAttributeNS(null,"fill","#FFFFFF");const wc=r.createNS("http://www.w3.org/2000/svg","g");wc.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Sc=r.createNS("http://www.w3.org/2000/svg","circle");Sc.setAttributeNS(null,"fill","#000000"),Sc.setAttributeNS(null,"opacity","0.25"),Sc.setAttributeNS(null,"cx","5.5"),Sc.setAttributeNS(null,"cy","5.5"),Sc.setAttributeNS(null,"r","5.4999962");const eu=r.createNS("http://www.w3.org/2000/svg","circle");eu.setAttributeNS(null,"fill","#FFFFFF"),eu.setAttributeNS(null,"cx","5.5"),eu.setAttributeNS(null,"cy","5.5"),eu.setAttributeNS(null,"r","5.4999962"),wc.appendChild(Sc),wc.appendChild(eu),pl.appendChild(fl),pl.appendChild(bl),pl.appendChild(Dl),pl.appendChild(Ql),pl.appendChild(wc),ll.appendChild(pl),ll.setAttributeNS(null,"height",cl*this._scale+"px"),ll.setAttributeNS(null,"width",hl*this._scale+"px"),this._element.appendChild(ll),this._offset=Da.P.convert(F&&F.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(F=>{F.preventDefault()})),this._element.addEventListener("mousedown",(F=>{F.preventDefault()})),qs(this._element,this._anchor,"marker"),F&&F.className)for(const Da of F.className.split(" "))this._element.classList.add(Da);this._popup=null}addTo(F){return this.remove(),this._map=F,this._element.setAttribute("aria-label",F._getUIString("Marker.Title")),F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),F.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(F){return this._lngLat=Da.N.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){const Da=38.1,ll=13.5,cl=Math.abs(ll)/Math.SQRT2;F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-Da],"bottom-left":[cl,-1*(Da-ll+cl)],"bottom-right":[-cl,-1*(Da-ll+cl)],left:[ll,-1*(Da-ll)],right:[-ll,-1*(Da-ll)]}:this._offset}this._popup=F,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(F){return this._subpixelPositioning=F,this}getPopup(){return this._popup}togglePopup(){const F=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:F?(F.isOpen()?F.remove():(F.setLngLat(this._lngLat),F.addTo(this._map)),this):this}_updateOpacity(F=!1){var ll,cl;if(!(null===(ll=this._map)||void 0===ll?void 0:ll.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(F)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const hl=this._map,dl=hl.terrain.depthAtPoint(this._pos),pl=hl.terrain.getElevationForLngLatZoom(this._lngLat,hl.transform.tileZoom);if(hl.transform.lngLatToCameraDepth(this._lngLat,pl)-dl<.006)return void(this._element.style.opacity=this._opacity);const fl=-this._offset.y/hl.transform._pixelPerMeter,Al=Math.sin(hl.getPitch()*Math.PI/180)*fl,bl=hl.terrain.depthAtPoint(new Da.P(this._pos.x,this._pos.y-this._offset.y)),kl=hl.transform.lngLatToCameraDepth(this._lngLat,pl+Al)-bl>.006;(null===(cl=this._popup)||void 0===cl?void 0:cl.isOpen())&&kl&&this._popup.remove(),this._element.style.opacity=kl?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(F){return this._offset=Da.P.convert(F),this._update(),this}addClassName(F){this._element.classList.add(F)}removeClassName(F){this._element.classList.remove(F)}toggleClassName(F){return this._element.classList.toggle(F)}setDraggable(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(F){return this._rotation=F||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(F){return this._rotationAlignment=F||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(F){return this._pitchAlignment=F&&"auto"!==F?F:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(F,Da){return void 0===F&&void 0===Da&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==F&&(this._opacity=F),void 0!==Da&&(this._opacityWhenCovered=Da),this._map&&this._updateOpacity(!0),this}}const Bd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Od=0,Fd=!1;const jd={maxWidth:100,unit:"metric"};function Xs(F,Da,ll){const cl=ll&&ll.maxWidth||100,hl=F._container.clientHeight/2,dl=F.unproject([0,hl]),pl=F.unproject([cl,hl]),fl=dl.distanceTo(pl);if(ll&&"imperial"===ll.unit){const ll=3.2808*fl;ll>5280?Ks(Da,cl,ll/5280,F._getUIString("ScaleControl.Miles")):Ks(Da,cl,ll,F._getUIString("ScaleControl.Feet"))}else ll&&"nautical"===ll.unit?Ks(Da,cl,fl/1852,F._getUIString("ScaleControl.NauticalMiles")):fl>=1e3?Ks(Da,cl,fl/1e3,F._getUIString("ScaleControl.Kilometers")):Ks(Da,cl,fl,F._getUIString("ScaleControl.Meters"))}function Ks(F,Da,ll,cl){const hl=function(F){const Da=Math.pow(10,`${Math.floor(F)}`.length-1);let ll=F/Da;return ll=ll>=10?10:ll>=5?5:ll>=3?3:ll>=2?2:ll>=1?1:function(F){const Da=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*Da)/Da}(ll),Da*ll}(ll);F.style.width=Da*(hl/ll)+"px",F.innerHTML=`${hl}&nbsp;${cl}`}const Vd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Gd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qs(F){if(F){if("number"==typeof F){const ll=Math.round(Math.abs(F)/Math.SQRT2);return{center:new Da.P(0,0),top:new Da.P(0,F),"top-left":new Da.P(ll,ll),"top-right":new Da.P(-ll,ll),bottom:new Da.P(0,-F),"bottom-left":new Da.P(ll,-ll),"bottom-right":new Da.P(-ll,-ll),left:new Da.P(F,0),right:new Da.P(-F,0)}}if(F instanceof Da.P||Array.isArray(F)){const ll=Da.P.convert(F);return{center:ll,top:ll,"top-left":ll,"top-right":ll,bottom:ll,"bottom-left":ll,"bottom-right":ll,left:ll,right:ll}}return{center:Da.P.convert(F.center||[0,0]),top:Da.P.convert(F.top||[0,0]),"top-left":Da.P.convert(F["top-left"]||[0,0]),"top-right":Da.P.convert(F["top-right"]||[0,0]),bottom:Da.P.convert(F.bottom||[0,0]),"bottom-left":Da.P.convert(F["bottom-left"]||[0,0]),"bottom-right":Da.P.convert(F["bottom-right"]||[0,0]),left:Da.P.convert(F.left||[0,0]),right:Da.P.convert(F.right||[0,0])}}return Qs(new Da.P(0,0))}const qd=ll;F.AJAXError=Da.bh,F.Evented=Da.E,F.LngLat=Da.N,F.MercatorCoordinate=Da.Z,F.Point=Da.P,F.addProtocol=Da.bi,F.config=Da.a,F.removeProtocol=Da.bj,F.AttributionControl=Es,F.BoxZoomHandler=Ua,F.CanvasSource=et,F.CooperativeGesturesHandler=vs,F.DoubleClickZoomHandler=ds,F.DragPanHandler=ms,F.DragRotateHandler=fs,F.EdgeInsets=ba,F.FullscreenControl=class extends Da.E{constructor(F={}){super(),this._onFullscreenChange=()=>{var F;let Da=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(F=null==Da?void 0:Da.shadowRoot)||void 0===F?void 0:F.fullscreenElement;)Da=Da.shadowRoot.fullscreenElement;Da===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,F&&F.container&&(F.container instanceof HTMLElement?this._container=F.container:Da.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(F){return this._map=F,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){r.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const F=this._fullscreenButton=r.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);r.create("span","maplibregl-ctrl-icon",F).setAttribute("aria-hidden","true"),F.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const F=this._getTitle();this._fullscreenButton.setAttribute("aria-label",F),this._fullscreenButton.title=F}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new Da.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new Da.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},F.GeoJSONSource=J,F.GeolocateControl=class extends Da.E{constructor(F){super(),this._onSuccess=F=>{if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new Da.k("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(F),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new Da.k("geolocate",F)),this._finish()}},this._updateCamera=F=>{const ll=new Da.N(F.coords.longitude,F.coords.latitude),cl=F.coords.accuracy,hl=this._map.getBearing(),dl=Da.e({bearing:hl},this.options.fitBoundsOptions),pl=H.fromLngLat(ll,cl);this._map.fitBounds(pl,dl,{geolocateSource:!0})},this._updateMarker=F=>{if(F){const ll=new Da.N(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(ll).addTo(this._map),this._userLocationDotMarker.setLngLat(ll).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=F=>{if(this._map){if(this.options.trackUserLocation)if(1===F.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const F=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===F.code&&Fd)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new Da.k("error",F)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(F=>F.preventDefault())),this._geolocateButton=r.create("button","maplibregl-ctrl-geolocate",this._container),r.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=F=>{if(this._map){if(!1===F){Da.w("Geolocation support is not available so the GeolocateControl will be disabled.");const F=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}else{const F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Vs({element:this._dotElement}),this._circleElement=r.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(F=>{F.geolocateSource||"ACTIVE_LOCK"!==this._watchState||F.originalEvent&&"resize"===F.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Da.k("trackuserlocationend")),this.fire(new Da.k("userlocationlostfocus")))}))}},this.options=Da.e({},Bd,F)}onAdd(F){return this._map=F,this._container=r.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return Da._(this,arguments,void 0,(function*(F=!1){if(void 0!==Nd&&!F)return Nd;if(void 0===window.navigator.permissions)return Nd=!!window.navigator.geolocation,Nd;try{const F=yield window.navigator.permissions.query({name:"geolocation"});Nd="denied"!==F.state}catch(F){Nd=!!window.navigator.geolocation}return Nd}))}().then((F=>this._finishSetupUI(F))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Od=0,Fd=!1}_isOutOfMapMaxBounds(F){const Da=this._map.getMaxBounds(),ll=F.coords;return Da&&(ll.longitude<Da.getWest()||ll.longitude>Da.getEast()||ll.latitude<Da.getSouth()||ll.latitude>Da.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const F=this._map.getBounds(),Da=F.getSouthEast(),ll=F.getNorthEast(),cl=Da.distanceTo(ll),hl=Math.ceil(this._accuracy/(cl/this._map._container.clientHeight)*2);this._circleElement.style.width=`${hl}px`,this._circleElement.style.height=`${hl}px`}trigger(){if(!this._setup)return Da.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new Da.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Od--,Fd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new Da.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new Da.k("trackuserlocationstart")),this.fire(new Da.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let F;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Od++,Od>1?(F={maximumAge:6e5,timeout:0},Fd=!0):(F=this.options.positionOptions,Fd=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},F.Hash=Ea,F.ImageSource=Q,F.KeyboardHandler=ls,F.LngLatBounds=H,F.LogoControl=Ps,F.Map=class extends Ts{constructor(F){Da.bf.mark(Da.bg.create);const ll=Object.assign(Object.assign({},Dd),F);if(null!=ll.minZoom&&null!=ll.maxZoom&&ll.minZoom>ll.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=ll.minPitch&&null!=ll.maxPitch&&ll.minPitch>ll.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=ll.minPitch&&ll.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=ll.maxPitch&&ll.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ta(ll.minZoom,ll.maxZoom,ll.minPitch,ll.maxPitch,ll.renderWorldCopies),{bearingSnap:ll.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Cs,this._controls=[],this._mapId=Da.a4(),this._contextLost=F=>{F.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new Da.k("webglcontextlost",{originalEvent:F}))},this._contextRestored=F=>{this._setupPainter(),this.resize(),this._update(),this.fire(new Da.k("webglcontextrestored",{originalEvent:F}))},this._onMapScroll=F=>{if(F.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=ll.interactive,this._maxTileCacheSize=ll.maxTileCacheSize,this._maxTileCacheZoomLevels=ll.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===ll.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===ll.preserveDrawingBuffer,this._antialias=!0===ll.antialias,this._trackResize=!0===ll.trackResize,this._bearingSnap=ll.bearingSnap,this._refreshExpiredTiles=!0===ll.refreshExpiredTiles,this._fadeDuration=ll.fadeDuration,this._crossSourceCollisions=!0===ll.crossSourceCollisions,this._collectResourceTiming=!0===ll.collectResourceTiming,this._locale=Object.assign(Object.assign({},zd),ll.locale),this._clickTolerance=ll.clickTolerance,this._overridePixelRatio=ll.pixelRatio,this._maxCanvasSize=ll.maxCanvasSize,this.transformCameraUpdate=ll.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===ll.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=Dl.addThrottleControl((()=>this.isMoving())),this._requestManager=new p(ll.transformRequest),"string"==typeof ll.container){if(this._container=document.getElementById(ll.container),!this._container)throw new Error(`Container '${ll.container}' not found.`)}else{if(!(ll.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ll.container}if(ll.maxBounds&&this.setMaxBounds(ll.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let F=!1;const Da=Ia((F=>{this._trackResize&&!this._removed&&(this.resize(F),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ll=>{F?Da(ll):F=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ws(this,ll),this._hash=ll.hash&&new Ea("string"==typeof ll.hash&&ll.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ll.center,zoom:ll.zoom,bearing:ll.bearing,pitch:ll.pitch}),ll.bounds&&(this.resize(),this.fitBounds(ll.bounds,Da.e({},ll.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ll.localIdeographFontFamily,this._validateStyle=ll.validateStyle,ll.style&&this.setStyle(ll.style,{localIdeographFontFamily:ll.localIdeographFontFamily}),ll.attributionControl&&this.addControl(new Es("boolean"==typeof ll.attributionControl?void 0:ll.attributionControl)),ll.maplibreLogo&&this.addControl(new Ps,ll.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(F=>{this._update("style"===F.dataType),this.fire(new Da.k(`${F.dataType}data`,F))})),this.on("dataloading",(F=>{this.fire(new Da.k(`${F.dataType}dataloading`,F))})),this.on("dataabort",(F=>{this.fire(new Da.k("sourcedataabort",F))}))}_getMapId(){return this._mapId}addControl(F,ll){if(void 0===ll&&(ll=F.getDefaultPosition?F.getDefaultPosition():"top-right"),!F||!F.onAdd)return this.fire(new Da.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const cl=F.onAdd(this);this._controls.push(F);const hl=this._controlPositions[ll];return-1!==ll.indexOf("bottom")?hl.insertBefore(cl,hl.firstChild):hl.appendChild(cl),this}removeControl(F){if(!F||!F.onRemove)return this.fire(new Da.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ll=this._controls.indexOf(F);return ll>-1&&this._controls.splice(ll,1),F.onRemove(this),this}hasControl(F){return this._controls.indexOf(F)>-1}calculateCameraOptionsFromTo(F,Da,ll,cl){return null==cl&&this.terrain&&(cl=this.terrain.getElevationForLngLatZoom(ll,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(F,Da,ll,cl)}resize(F){var ll;const cl=this._containerDimensions(),hl=cl[0],dl=cl[1],pl=this._getClampedPixelRatio(hl,dl);if(this._resizeCanvas(hl,dl,pl),this.painter.resize(hl,dl,pl),this.painter.overLimit()){const F=this.painter.context.gl;this._maxCanvasSize=[F.drawingBufferWidth,F.drawingBufferHeight];const Da=this._getClampedPixelRatio(hl,dl);this._resizeCanvas(hl,dl,Da),this.painter.resize(hl,dl,Da)}this.transform.resize(hl,dl),null===(ll=this._requestedCameraState)||void 0===ll||ll.resize(hl,dl);const fl=!this._moving;return fl&&(this.stop(),this.fire(new Da.k("movestart",F)).fire(new Da.k("move",F))),this.fire(new Da.k("resize",F)),fl&&this.fire(new Da.k("moveend",F)),this}_getClampedPixelRatio(F,Da){const{0:ll,1:cl}=this._maxCanvasSize,hl=this.getPixelRatio(),dl=F*hl,pl=Da*hl;return Math.min(dl>ll?ll/dl:1,pl>cl?cl/pl:1)*hl}getPixelRatio(){var F;return null!==(F=this._overridePixelRatio)&&void 0!==F?F:devicePixelRatio}setPixelRatio(F){this._overridePixelRatio=F,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(F){return this.transform.setMaxBounds(H.convert(F)),this._update()}setMinZoom(F){if((F=null==F?-2:F)>=-2&&F<=this.transform.maxZoom)return this.transform.minZoom=F,this._update(),this.getZoom()<F&&this.setZoom(F),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(F){if((F=null==F?22:F)>=this.transform.minZoom)return this.transform.maxZoom=F,this._update(),this.getZoom()>F&&this.setZoom(F),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(F){if((F=null==F?0:F)<0)throw new Error("minPitch must be greater than or equal to 0");if(F>=0&&F<=this.transform.maxPitch)return this.transform.minPitch=F,this._update(),this.getPitch()<F&&this.setPitch(F),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(F){if((F=null==F?60:F)>85)throw new Error("maxPitch must be less than or equal to 85");if(F>=this.transform.minPitch)return this.transform.maxPitch=F,this._update(),this.getPitch()>F&&this.setPitch(F),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(F){return this.transform.renderWorldCopies=F,this._update()}project(F){return this.transform.locationPoint(Da.N.convert(F),this.style&&this.terrain)}unproject(F){return this.transform.pointLocation(Da.P.convert(F),this.terrain)}isMoving(){var F;return this._moving||(null===(F=this.handlers)||void 0===F?void 0:F.isMoving())}isZooming(){var F;return this._zooming||(null===(F=this.handlers)||void 0===F?void 0:F.isZooming())}isRotating(){var F;return this._rotating||(null===(F=this.handlers)||void 0===F?void 0:F.isRotating())}_createDelegatedListener(F,Da,ll){if("mouseenter"===F||"mouseover"===F){let cl=!1;const s=hl=>{const dl=Da.filter((F=>this.getLayer(F))),pl=0!==dl.length?this.queryRenderedFeatures(hl.point,{layers:dl}):[];pl.length?cl||(cl=!0,ll.call(this,new ka(F,this,hl.originalEvent,{features:pl}))):cl=!1};return{layers:Da,listener:ll,delegates:{mousemove:s,mouseout:()=>{cl=!1}}}}if("mouseleave"===F||"mouseout"===F){let cl=!1;const s=hl=>{const dl=Da.filter((F=>this.getLayer(F)));(0!==dl.length?this.queryRenderedFeatures(hl.point,{layers:dl}):[]).length?cl=!0:cl&&(cl=!1,ll.call(this,new ka(F,this,hl.originalEvent)))},o=Da=>{cl&&(cl=!1,ll.call(this,new ka(F,this,Da.originalEvent)))};return{layers:Da,listener:ll,delegates:{mousemove:s,mouseout:o}}}{const a=F=>{const cl=Da.filter((F=>this.getLayer(F))),hl=0!==cl.length?this.queryRenderedFeatures(F.point,{layers:cl}):[];hl.length&&(F.features=hl,ll.call(this,F),delete F.features)};return{layers:Da,listener:ll,delegates:{[F]:a}}}}_saveDelegatedListener(F,Da){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[F]=this._delegatedListeners[F]||[],this._delegatedListeners[F].push(Da)}_removeDelegatedListener(F,Da,ll){if(!this._delegatedListeners||!this._delegatedListeners[F])return;const cl=this._delegatedListeners[F];for(let hl=0;hl<cl.length;hl++){const F=cl[hl];if(F.listener===ll&&F.layers.length===Da.length&&F.layers.every((F=>Da.includes(F)))){for(const Da in F.delegates)this.off(Da,F.delegates[Da]);return void cl.splice(hl,1)}}}on(F,Da,ll){if(void 0===ll)return super.on(F,Da);const cl=this._createDelegatedListener(F,"string"==typeof Da?[Da]:Da,ll);this._saveDelegatedListener(F,cl);for(const hl in cl.delegates)this.on(hl,cl.delegates[hl]);return this}once(F,Da,ll){if(void 0===ll)return super.once(F,Da);const cl="string"==typeof Da?[Da]:Da,hl=this._createDelegatedListener(F,cl,ll);for(const dl in hl.delegates){const Da=hl.delegates[dl];hl.delegates[dl]=(...hl)=>{this._removeDelegatedListener(F,cl,ll),Da(...hl)}}this._saveDelegatedListener(F,hl);for(const dl in hl.delegates)this.once(dl,hl.delegates[dl]);return this}off(F,Da,ll){return void 0===ll?super.off(F,Da):(this._removeDelegatedListener(F,"string"==typeof Da?[Da]:Da,ll),this)}queryRenderedFeatures(F,ll){if(!this.style)return[];let cl;const hl=F instanceof Da.P||Array.isArray(F),dl=hl?F:[[0,0],[this.transform.width,this.transform.height]];if(ll=ll||(hl?{}:F)||{},dl instanceof Da.P||"number"==typeof dl[0])cl=[Da.P.convert(dl)];else{const F=Da.P.convert(dl[0]),ll=Da.P.convert(dl[1]);cl=[F,new Da.P(ll.x,F.y),ll,new Da.P(F.x,ll.y),F]}return this.style.queryRenderedFeatures(cl,ll,this.transform)}querySourceFeatures(F,Da){return this.style.querySourceFeatures(F,Da)}setStyle(F,ll){return!1!==(ll=Da.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},ll)).diff&&ll.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&F?(this._diffStyle(F,ll),this):(this._localIdeographFontFamily=ll.localIdeographFontFamily,this._updateStyle(F,ll))}setTransformRequest(F){return this._requestManager.setTransformRequest(F),this}_getUIString(F){const Da=this._locale[F];if(null==Da)throw new Error(`Missing UI string '${F}'`);return Da}_updateStyle(F,Da){if(Da.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(F,Da)));const ll=this.style&&Da.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!F)),F?(this.style=new de(this,Da||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof F?this.style.loadURL(F,Da,ll):this.style.loadJSON(F,Da,ll),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new de(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(F,ll){if("string"==typeof F){const cl=this._requestManager.transformRequest(F,"Style");Da.h(cl,new AbortController).then((F=>{this._updateDiff(F.data,ll)})).catch((F=>{F&&this.fire(new Da.j(F))}))}else"object"==typeof F&&this._updateDiff(F,ll)}_updateDiff(F,ll){try{this.style.setState(F,ll)&&this._update(!0)}catch(cl){Da.w(`Unable to perform style diff: ${cl.message||cl.error||cl}.  Rebuilding the style from scratch.`),this._updateStyle(F,ll)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():Da.w("There is no style added to the map.")}addSource(F,Da){return this._lazyInitEmptyStyle(),this.style.addSource(F,Da),this._update(!0)}isSourceLoaded(F){const ll=this.style&&this.style.sourceCaches[F];if(void 0!==ll)return ll.loaded();this.fire(new Da.j(new Error(`There is no source with ID '${F}'`)))}setTerrain(F){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),F){const ll=this.style.sourceCaches[F.source];if(!ll)throw new Error(`cannot load terrain, because there exists no source with ID: ${F.source}`);null===this.terrain&&ll.reload();for(const cl in this.style._layers){const ll=this.style._layers[cl];"hillshade"===ll.type&&ll.source===F.source&&Da.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ds(this.painter,ll,F),this.painter.renderToTexture=new Rs(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=Da=>{"style"===Da.dataType?this.terrain.sourceCache.freeRtt():"source"===Da.dataType&&Da.tile&&(Da.sourceId!==F.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(Da.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new Da.k("terrain",{terrain:F})),this}getTerrain(){var F,Da;return null!==(Da=null===(F=this.terrain)||void 0===F?void 0:F.options)&&void 0!==Da?Da:null}areTilesLoaded(){const F=this.style&&this.style.sourceCaches;for(const Da in F){const ll=F[Da]._tiles;for(const F in ll){const Da=ll[F];if("loaded"!==Da.state&&"errored"!==Da.state)return!1}}return!0}removeSource(F){return this.style.removeSource(F),this._update(!0)}getSource(F){return this.style.getSource(F)}addImage(F,ll,cl={}){const{pixelRatio:hl=1,sdf:pl=!1,stretchX:fl,stretchY:Al,content:bl,textFitWidth:kl,textFitHeight:Dl}=cl;if(this._lazyInitEmptyStyle(),!(ll instanceof HTMLImageElement||Da.b(ll))){if(void 0===ll.width||void 0===ll.height)return this.fire(new Da.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:cl,height:dl,data:Wl}=ll,Ql=ll;return this.style.addImage(F,{data:new Da.R({width:cl,height:dl},new Uint8Array(Wl)),pixelRatio:hl,stretchX:fl,stretchY:Al,content:bl,textFitWidth:kl,textFitHeight:Dl,sdf:pl,version:0,userImage:Ql}),Ql.onAdd&&Ql.onAdd(this,F),this}}{const{width:cl,height:Wl,data:Ql}=dl.getImageData(ll);this.style.addImage(F,{data:new Da.R({width:cl,height:Wl},Ql),pixelRatio:hl,stretchX:fl,stretchY:Al,content:bl,textFitWidth:kl,textFitHeight:Dl,sdf:pl,version:0})}}updateImage(F,ll){const cl=this.style.getImage(F);if(!cl)return this.fire(new Da.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const hl=ll instanceof HTMLImageElement||Da.b(ll)?dl.getImageData(ll):ll,{width:pl,height:fl,data:Al}=hl;if(void 0===pl||void 0===fl)return this.fire(new Da.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(pl!==cl.data.width||fl!==cl.data.height)return this.fire(new Da.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const bl=!(ll instanceof HTMLImageElement||Da.b(ll));return cl.data.replace(Al,bl),this.style.updateImage(F,cl),this}getImage(F){return this.style.getImage(F)}hasImage(F){return F?!!this.style.getImage(F):(this.fire(new Da.j(new Error("Missing required image id"))),!1)}removeImage(F){this.style.removeImage(F)}loadImage(F){return Dl.getImage(this._requestManager.transformRequest(F,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(F,Da){return this._lazyInitEmptyStyle(),this.style.addLayer(F,Da),this._update(!0)}moveLayer(F,Da){return this.style.moveLayer(F,Da),this._update(!0)}removeLayer(F){return this.style.removeLayer(F),this._update(!0)}getLayer(F){return this.style.getLayer(F)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(F,Da,ll){return this.style.setLayerZoomRange(F,Da,ll),this._update(!0)}setFilter(F,Da,ll={}){return this.style.setFilter(F,Da,ll),this._update(!0)}getFilter(F){return this.style.getFilter(F)}setPaintProperty(F,Da,ll,cl={}){return this.style.setPaintProperty(F,Da,ll,cl),this._update(!0)}getPaintProperty(F,Da){return this.style.getPaintProperty(F,Da)}setLayoutProperty(F,Da,ll,cl={}){return this.style.setLayoutProperty(F,Da,ll,cl),this._update(!0)}getLayoutProperty(F,Da){return this.style.getLayoutProperty(F,Da)}setGlyphs(F,Da={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(F,Da),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(F,Da,ll={}){return this._lazyInitEmptyStyle(),this.style.addSprite(F,Da,ll,(F=>{F||this._update(!0)})),this}removeSprite(F){return this._lazyInitEmptyStyle(),this.style.removeSprite(F),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(F,Da={}){return this._lazyInitEmptyStyle(),this.style.setSprite(F,Da,(F=>{F||this._update(!0)})),this}setLight(F,Da={}){return this._lazyInitEmptyStyle(),this.style.setLight(F,Da),this._update(!0)}getLight(){return this.style.getLight()}setSky(F){return this._lazyInitEmptyStyle(),this.style.setSky(F),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(F,Da){return this.style.setFeatureState(F,Da),this._update()}removeFeatureState(F,Da){return this.style.removeFeatureState(F,Da),this._update()}getFeatureState(F){return this.style.getFeatureState(F)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let F=0,Da=0;return this._container&&(F=this._container.clientWidth||400,Da=this._container.clientHeight||300),[F,Da]}_setupContainer(){const F=this._container;F.classList.add("maplibregl-map");const Da=this._canvasContainer=r.create("div","maplibregl-canvas-container",F);this._interactive&&Da.classList.add("maplibregl-interactive"),this._canvas=r.create("canvas","maplibregl-canvas",Da),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const ll=this._containerDimensions(),cl=this._getClampedPixelRatio(ll[0],ll[1]);this._resizeCanvas(ll[0],ll[1],cl);const hl=this._controlContainer=r.create("div","maplibregl-control-container",F),dl=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((F=>{dl[F]=r.create("div",`maplibregl-ctrl-${F} `,hl)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(F,Da,ll){this._canvas.width=Math.floor(ll*F),this._canvas.height=Math.floor(ll*Da),this._canvas.style.width=`${F}px`,this._canvas.style.height=`${Da}px`}_setupPainter(){const F={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let Da=null;this._canvas.addEventListener("webglcontextcreationerror",(ll=>{Da={requestedAttributes:F},ll&&(Da.statusMessage=ll.statusMessage,Da.type=ll.type)}),{once:!0});const ll=this._canvas.getContext("webgl2",F)||this._canvas.getContext("webgl",F);if(!ll){const F="Failed to initialize WebGL";throw Da?(Da.message=F,new Error(JSON.stringify(Da))):new Error(F)}this.painter=new va(ll,this.transform),pl.testSupport(ll)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(F){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||F,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(F){return this._update(),this._renderTaskQueue.add(F)}_cancelRenderFrame(F){this._renderTaskQueue.remove(F)}_render(F){const ll=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(F),this._removed)return;let cl=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,hl=dl.now();this.style.zoomHistory.update(F,hl);const pl=new Da.z(F,{now:hl,fadeDuration:ll,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),fl=pl.crossFadingFactor();1===fl&&fl===this._crossFadingFactor||(cl=!0,this._crossFadingFactor=fl),this.style.update(pl)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,ll,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:ll,showPadding:this.showPadding}),this.fire(new Da.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,Da.bf.mark(Da.bg.load),this.fire(new Da.k("load"))),this.style&&(this.style.hasTransitions()||cl)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const hl=this._sourcesDirty||this._styleDirty||this._placementDirty;return hl||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new Da.k("idle")),!this._loaded||this._fullyLoaded||hl||(this._fullyLoaded=!0,Da.bf.mark(Da.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var F;this._hash&&this._hash.remove();for(const Da of this._controls)Da.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),Dl.removeThrottleControl(this._imageQueueHandle),null===(F=this._resizeObserver)||void 0===F||F.disconnect();const ll=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==ll?void 0:ll.loseContext)&&ll.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),r.remove(this._canvasContainer),r.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),Da.bf.clearMetrics(),this._removed=!0,this.fire(new Da.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,dl.frameAsync(this._frameRequest).then((F=>{Da.bf.frame(F),this._frameRequest=null,this._render(F)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(F){this._showTileBoundaries!==F&&(this._showTileBoundaries=F,this._update())}get showPadding(){return!!this._showPadding}set showPadding(F){this._showPadding!==F&&(this._showPadding=F,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(F){this._showCollisionBoxes!==F&&(this._showCollisionBoxes=F,F?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(F){this._showOverdrawInspector!==F&&(this._showOverdrawInspector=F,this._update())}get repaint(){return!!this._repaint}set repaint(F){this._repaint!==F&&(this._repaint=F,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(F){this._vertices=F,this._update()}get version(){return Pd}getCameraTargetElevation(){return this.transform.elevation}},F.MapMouseEvent=ka,F.MapTouchEvent=La,F.MapWheelEvent=Fa,F.Marker=Vs,F.NavigationControl=class{constructor(F){this._updateZoomButtons=()=>{const F=this._map.getZoom(),Da=F===this._map.getMaxZoom(),ll=F===this._map.getMinZoom();this._zoomInButton.disabled=Da,this._zoomOutButton.disabled=ll,this._zoomInButton.setAttribute("aria-disabled",Da.toString()),this._zoomOutButton.setAttribute("aria-disabled",ll.toString())},this._rotateCompassArrow=()=>{const F=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=F},this._setButtonTitle=(F,Da)=>{const ll=this._map._getUIString(`NavigationControl.${Da}`);F.title=ll,F.setAttribute("aria-label",ll)},this.options=Da.e({},Rd,F),this._container=r.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(F=>F.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(F=>this._map.zoomIn({},{originalEvent:F}))),r.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(F=>this._map.zoomOut({},{originalEvent:F}))),r.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(F=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:F}):this._map.resetNorth({},{originalEvent:F})})),this._compassIcon=r.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(F){return this._map=F,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ns(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(F,Da){const ll=r.create("button",F,this._container);return ll.type="button",ll.addEventListener("click",Da),ll}},F.Popup=class extends Da.E{constructor(F){super(),this.remove=()=>(this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new Da.k("close"))),this),this._onMouseUp=F=>{this._update(F.point)},this._onMouseMove=F=>{this._update(F.point)},this._onDrag=F=>{this._update(F.point)},this._update=F=>{var Da;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=r.create("div","maplibregl-popup",this._map.getContainer()),this._tip=r.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?js(this._lngLat,this._flatPos,this._map.transform):null===(Da=this._lngLat)||void 0===Da?void 0:Da.wrap(),this._trackPointer&&!F)return;const ll=this._flatPos=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&F?F:this._map.transform.locationPoint(this._lngLat));let cl=this.options.anchor;const hl=Qs(this.options.offset);if(!cl){const F=this._container.offsetWidth,Da=this._container.offsetHeight;let dl;dl=ll.y+hl.bottom.y<Da?["top"]:ll.y>this._map.transform.height-Da?["bottom"]:[],ll.x<F/2?dl.push("left"):ll.x>this._map.transform.width-F/2&&dl.push("right"),cl=0===dl.length?"bottom":dl.join("-")}let dl=ll.add(hl[cl]);this.options.subpixelPositioning||(dl=dl.round()),r.setTransform(this._container,`${Ud[cl]} translate(${dl.x}px,${dl.y}px)`),qs(this._container,cl,"popup")},this._onClose=()=>{this.remove()},this.options=Da.e(Object.create(Vd),F)}addTo(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new Da.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(F){return this._lngLat=Da.N.convert(F),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(F){return this.setDOMContent(document.createTextNode(F))}setHTML(F){const Da=document.createDocumentFragment(),ll=document.createElement("body");let cl;for(ll.innerHTML=F;cl=ll.firstChild,cl;)Da.appendChild(cl);return this.setDOMContent(Da)}getMaxWidth(){var F;return null===(F=this._container)||void 0===F?void 0:F.style.maxWidth}setMaxWidth(F){return this.options.maxWidth=F,this._update(),this}setDOMContent(F){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=r.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(F),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(F){return this._container&&this._container.classList.add(F),this}removeClassName(F){return this._container&&this._container.classList.remove(F),this}setOffset(F){return this.options.offset=F,this._update(),this}toggleClassName(F){if(this._container)return this._container.classList.toggle(F)}setSubpixelPositioning(F){this.options.subpixelPositioning=F}_createCloseButton(){this.options.closeButton&&(this._closeButton=r.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const F=this._container.querySelector(Gd);F&&F.focus()}},F.RasterDEMTileSource=K,F.RasterTileSource=X,F.ScaleControl=class{constructor(F){this._onMove=()=>{Xs(this._map,this._container,this.options)},this.setUnit=F=>{this.options.unit=F,Xs(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},jd),F)}getDefaultPosition(){return"bottom-left"}onAdd(F){return this._map=F,this._container=r.create("div","maplibregl-ctrl maplibregl-ctrl-scale",F.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},F.ScrollZoomHandler=us,F.Style=de,F.TerrainControl=class{constructor(F){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=F}onAdd(F){return this._map=F,this._container=r.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=r.create("button","maplibregl-ctrl-terrain",this._container),r.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){r.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},F.TwoFingersTouchPitchHandler=rs,F.TwoFingersTouchRotateHandler=ss,F.TwoFingersTouchZoomHandler=is,F.TwoFingersTouchZoomRotateHandler=gs,F.VectorTileSource=$,F.VideoSource=tt,F.addSourceType=(F,ll)=>Da._(void 0,void 0,void 0,(function*(){if(at(F))throw new Error(`A source type called "${F}" already exists.`);((F,Da)=>{hu[F]=Da})(F,ll)})),F.clearPrewarmedResources=function(){const F=su;F&&(F.isPreloaded()&&1===F.numActive()?(F.release(eu),su=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},F.getMaxParallelImageRequests=function(){return Da.a.MAX_PARALLEL_IMAGE_REQUESTS},F.getRTLTextPluginStatus=function(){return nt().getRTLTextPluginStatus()},F.getVersion=function(){return qd},F.getWorkerCount=function(){return L.workerCount},F.getWorkerUrl=function(){return Da.a.WORKER_URL},F.importScriptInWorkers=function(F){return j().broadcast("IS",F)},F.prewarm=function(){N().acquire(eu)},F.setMaxParallelImageRequests=function(F){Da.a.MAX_PARALLEL_IMAGE_REQUESTS=F},F.setRTLTextPlugin=function(F,Da){return nt().setRTLTextPlugin(F,Da)},F.setWorkerCount=function(F){L.workerCount=F},F.setWorkerUrl=function(F){Da.a.WORKER_URL=F}})),F}()},3710:(F,Da,ll)=>{"use strict";ll.d(Da,{Kk:()=>qp});const noop=()=>{};let cl={},hl={},dl=null,pl={mark:noop,measure:noop};try{"undefined"!==typeof window&&(cl=window),"undefined"!==typeof document&&(hl=document),"undefined"!==typeof MutationObserver&&(dl=MutationObserver),"undefined"!==typeof performance&&(pl=performance)}catch(Hp){}const{userAgent:fl=""}=cl.navigator||{},Al=cl,bl=hl,kl=dl,Dl=pl,Wl=(Al.document,!!bl.documentElement&&!!bl.head&&"function"===typeof bl.addEventListener&&"function"===typeof bl.createElement),Ql=~fl.indexOf("MSIE")||~fl.indexOf("Trident/");var wc="classic",Sc="duotone",eu="sharp",iu="sharp-duotone",su=[wc,Sc,eu,iu],cu={fak:"kit","fa-kit":"kit"},uu={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},hu={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},Lu=[1,2,3,4,5,6,7,8,9,10],zu=Lu.concat([11,12,13,14,15,16,17,18,19,20]),Du={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Nu=[...Object.keys({classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Du.GROUP,Du.SWAP_OPACITY,Du.PRIMARY,Du.SECONDARY].concat(Lu.map((F=>"".concat(F,"x")))).concat(zu.map((F=>"w-".concat(F)))),qu={kit:"fak"},ih={"kit-duotone":"fakd"};const gh="___FONT_AWESOME___",ed=16,td="svg-inline--fa",id="data-fa-i2svg",nd="data-fa-pseudo-element",rd="data-prefix",ad="data-icon",sd="fontawesome-i2svg",od=["HTML","HEAD","STYLE","SCRIPT"],ld=(()=>{try{return!0}catch(F){return!1}})(),cd=[wc,eu,iu];function familyProxy(F){return new Proxy(F,{get:(F,Da)=>Da in F?F[Da]:F[wc]})}const ud={...hu};ud[wc]={...hu[wc],...cu,...uu};const hd=familyProxy(ud),dd={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}};dd[wc]={...dd[wc],...qu,...ih};const pd=familyProxy(dd),md={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}};md[wc]={...md[wc],fak:"fa-kit"};const fd=familyProxy(md),gd={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}};gd[wc]={...gd[wc],"fa-kit":"fak"};const Ad=familyProxy(gd),yd=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,vd="fa-layers-text",_d=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,xd=(familyProxy({classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}}),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),bd=Du,wd=new Set;Object.keys(pd[wc]).map(wd.add.bind(wd)),Object.keys(pd[eu]).map(wd.add.bind(wd)),Object.keys(pd[iu]).map(wd.add.bind(wd));const Ed=["kit",...Nu],Md=Al.FontAwesomeConfig||{};if(bl&&"function"===typeof bl.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((F=>{let[Da,ll]=F;const cl=function(F){return""===F||"false"!==F&&("true"===F||F)}(function(F){var Da=bl.querySelector("script["+F+"]");if(Da)return Da.getAttribute(F)}(Da));void 0!==cl&&null!==cl&&(Md[ll]=cl)}))}const Sd={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:td,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Md.familyPrefix&&(Md.cssPrefix=Md.familyPrefix);const kd={...Sd,...Md};kd.autoReplaceSvg||(kd.observeMutations=!1);const Td={};Object.keys(Sd).forEach((F=>{Object.defineProperty(Td,F,{enumerable:!0,set:function(Da){kd[F]=Da,Id.forEach((F=>F(Td)))},get:function(){return kd[F]}})})),Object.defineProperty(Td,"familyPrefix",{enumerable:!0,set:function(F){kd.cssPrefix=F,Id.forEach((F=>F(Td)))},get:function(){return kd.cssPrefix}}),Al.FontAwesomeConfig=Td;const Id=[];const Cd=ed,Ld={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function nextUniqueId(){let F=12,Da="";for(;F-- >0;)Da+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return Da}function toArray(F){const Da=[];for(let ll=(F||[]).length>>>0;ll--;)Da[ll]=F[ll];return Da}function classArray(F){return F.classList?toArray(F.classList):(F.getAttribute("class")||"").split(" ").filter((F=>F))}function htmlEscape(F){return"".concat(F).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinStyles(F){return Object.keys(F||{}).reduce(((Da,ll)=>Da+"".concat(ll,": ").concat(F[ll].trim(),";")),"")}function transformIsMeaningful(F){return F.size!==Ld.size||F.x!==Ld.x||F.y!==Ld.y||F.rotate!==Ld.rotate||F.flipX||F.flipY}function css(){const F="fa",Da=td,ll=Td.cssPrefix,cl=Td.replacementClass;let hl=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(ll!==F||cl!==Da){const dl=new RegExp("\\.".concat(F,"\\-"),"g"),pl=new RegExp("\\--".concat(F,"\\-"),"g"),fl=new RegExp("\\.".concat(Da),"g");hl=hl.replace(dl,".".concat(ll,"-")).replace(pl,"--".concat(ll,"-")).replace(fl,".".concat(cl))}return hl}let zd=!1;function ensureCss(){Td.autoAddCss&&!zd&&(!function(F){if(!F||!Wl)return;const Da=bl.createElement("style");Da.setAttribute("type","text/css"),Da.innerHTML=F;const ll=bl.head.childNodes;let cl=null;for(let hl=ll.length-1;hl>-1;hl--){const F=ll[hl],Da=(F.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Da)>-1&&(cl=F)}bl.head.insertBefore(Da,cl)}(css()),zd=!0)}var Pd={mixout:()=>({dom:{css:css,insertCss:ensureCss}}),hooks:()=>({beforeDOMElementCreation(){ensureCss()},beforeI2svg(){ensureCss()}})};const Dd=Al||{};Dd[gh]||(Dd[gh]={}),Dd[gh].styles||(Dd[gh].styles={}),Dd[gh].hooks||(Dd[gh].hooks={}),Dd[gh].shims||(Dd[gh].shims=[]);var Rd=Dd[gh];const Nd=[],listener=function(){bl.removeEventListener("DOMContentLoaded",listener),Ud=1,Nd.map((F=>F()))};let Ud=!1;function toHtml(F){const{tag:Da,attributes:ll={},children:cl=[]}=F;return"string"===typeof F?htmlEscape(F):"<".concat(Da," ").concat(function(F){return Object.keys(F||{}).reduce(((Da,ll)=>Da+"".concat(ll,'="').concat(htmlEscape(F[ll]),'" ')),"").trim()}(ll),">").concat(cl.map(toHtml).join(""),"</").concat(Da,">")}function iconFromMapping(F,Da,ll){if(F&&F[Da]&&F[Da][ll])return{prefix:Da,iconName:ll,icon:F[Da][ll]}}Wl&&(Ud=(bl.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(bl.readyState),Ud||bl.addEventListener("DOMContentLoaded",listener));var reduce=function(F,Da,ll,cl){var hl,dl,pl,fl=Object.keys(F),Al=fl.length,bl=void 0!==cl?function(F,Da){return function(ll,cl,hl,dl){return F.call(Da,ll,cl,hl,dl)}}(Da,cl):Da;for(void 0===ll?(hl=1,pl=F[fl[0]]):(hl=0,pl=ll);hl<Al;hl++)pl=bl(pl,F[dl=fl[hl]],dl,F);return pl};function toHex(F){const Da=function(F){const Da=[];let ll=0;const cl=F.length;for(;ll<cl;){const hl=F.charCodeAt(ll++);if(hl>=55296&&hl<=56319&&ll<cl){const cl=F.charCodeAt(ll++);56320==(64512&cl)?Da.push(((1023&hl)<<10)+(1023&cl)+65536):(Da.push(hl),ll--)}else Da.push(hl)}return Da}(F);return 1===Da.length?Da[0].toString(16):null}function normalizeIcons(F){return Object.keys(F).reduce(((Da,ll)=>{const cl=F[ll];return!!cl.icon?Da[cl.iconName]=cl.icon:Da[ll]=cl,Da}),{})}function defineIcons(F,Da){let ll=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:cl=!1}=ll,hl=normalizeIcons(Da);"function"!==typeof Rd.hooks.addPack||cl?Rd.styles[F]={...Rd.styles[F]||{},...hl}:Rd.hooks.addPack(F,normalizeIcons(Da)),"fas"===F&&defineIcons("fa",Da)}const{styles:Bd,shims:Od}=Rd,Fd={[wc]:Object.values(fd[wc]),[eu]:Object.values(fd[eu]),[iu]:Object.values(fd[iu])};let jd=null,Vd={},Gd={},qd={},Hd={},Zd={};const Wd={[wc]:Object.keys(hd[wc]),[eu]:Object.keys(hd[eu]),[iu]:Object.keys(hd[iu])};function getIconName(F,Da){const ll=Da.split("-"),cl=ll[0],hl=ll.slice(1).join("-");return cl!==F||""===hl||(dl=hl,~Ed.indexOf(dl))?null:hl;var dl}const build=()=>{const lookup=F=>reduce(Bd,((Da,ll,cl)=>(Da[cl]=reduce(ll,F,{}),Da)),{});Vd=lookup(((F,Da,ll)=>{if(Da[3]&&(F[Da[3]]=ll),Da[2]){Da[2].filter((F=>"number"===typeof F)).forEach((Da=>{F[Da.toString(16)]=ll}))}return F})),Gd=lookup(((F,Da,ll)=>{if(F[ll]=ll,Da[2]){Da[2].filter((F=>"string"===typeof F)).forEach((Da=>{F[Da]=ll}))}return F})),Zd=lookup(((F,Da,ll)=>{const cl=Da[2];return F[ll]=ll,cl.forEach((Da=>{F[Da]=ll})),F}));const F="far"in Bd||Td.autoFetchSvg,Da=reduce(Od,((Da,ll)=>{const cl=ll[0];let hl=ll[1];const dl=ll[2];return"far"!==hl||F||(hl="fas"),"string"===typeof cl&&(Da.names[cl]={prefix:hl,iconName:dl}),"number"===typeof cl&&(Da.unicodes[cl.toString(16)]={prefix:hl,iconName:dl}),Da}),{names:{},unicodes:{}});qd=Da.names,Hd=Da.unicodes,jd=getCanonicalPrefix(Td.styleDefault,{family:Td.familyDefault})};var Kd;function byUnicode(F,Da){return(Vd[F]||{})[Da]}function byAlias(F,Da){return(Zd[F]||{})[Da]}function byOldName(F){return qd[F]||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return jd}Kd=F=>{jd=getCanonicalPrefix(F.styleDefault,{family:Td.familyDefault})},Id.push(Kd),build();function getCanonicalPrefix(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:ll=wc}=Da,cl=hd[ll][F],hl=pd[ll][F]||pd[ll][cl],dl=F in Rd.styles?F:null;return hl||dl||null}const Qd={[wc]:Object.keys(fd[wc]),[eu]:Object.keys(fd[eu]),[iu]:Object.keys(fd[iu])};function getCanonicalIcon(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:ll=!1}=Da,cl={[wc]:"".concat(Td.cssPrefix,"-").concat(wc),[eu]:"".concat(Td.cssPrefix,"-").concat(eu),[iu]:"".concat(Td.cssPrefix,"-").concat(iu)};let hl=null,dl=wc;const pl=su.filter((F=>F!==Sc));pl.forEach((Da=>{(F.includes(cl[Da])||F.some((F=>Qd[Da].includes(F))))&&(dl=Da)}));const fl=F.reduce(((F,Da)=>{const fl=getIconName(Td.cssPrefix,Da);if(Bd[Da]?(Da=Fd[dl].includes(Da)?Ad[dl][Da]:Da,hl=Da,F.prefix=Da):Wd[dl].indexOf(Da)>-1?(hl=Da,F.prefix=getCanonicalPrefix(Da,{family:dl})):fl?F.iconName=fl:Da===Td.replacementClass||pl.some((F=>Da===cl[F]))||F.rest.push(Da),!ll&&F.prefix&&F.iconName){const Da="fa"===hl?byOldName(F.iconName):{},ll=byAlias(F.prefix,F.iconName);Da.prefix&&(hl=null),F.iconName=Da.iconName||ll||F.iconName,F.prefix=Da.prefix||F.prefix,"far"!==F.prefix||Bd.far||!Bd.fas||Td.autoFetchSvg||(F.prefix="fas")}return F}),{prefix:null,iconName:null,rest:[]});return(F.includes("fa-brands")||F.includes("fab"))&&(fl.prefix="fab"),(F.includes("fa-duotone")||F.includes("fad"))&&(fl.prefix="fad"),fl.prefix||dl!==eu||!Bd.fass&&!Td.autoFetchSvg||(fl.prefix="fass",fl.iconName=byAlias(fl.prefix,fl.iconName)||fl.iconName),fl.prefix||dl!==iu||!Bd.fasds&&!Td.autoFetchSvg||(fl.prefix="fasds",fl.iconName=byAlias(fl.prefix,fl.iconName)||fl.iconName),"fa"!==fl.prefix&&"fa"!==hl||(fl.prefix=getDefaultUsablePrefix()||"fas"),fl}let Xd=[],Yd={};const Jd={},$d=Object.keys(Jd);function chainHooks(F,Da){for(var ll=arguments.length,cl=new Array(ll>2?ll-2:0),hl=2;hl<ll;hl++)cl[hl-2]=arguments[hl];return(Yd[F]||[]).forEach((F=>{Da=F.apply(null,[Da,...cl])})),Da}function callHooks(F){for(var Da=arguments.length,ll=new Array(Da>1?Da-1:0),cl=1;cl<Da;cl++)ll[cl-1]=arguments[cl];(Yd[F]||[]).forEach((F=>{F.apply(null,ll)}))}function callProvided(){const F=arguments[0],Da=Array.prototype.slice.call(arguments,1);return Jd[F]?Jd[F].apply(null,Da):void 0}function findIconDefinition(F){"fa"===F.prefix&&(F.prefix="fas");let{iconName:Da}=F;const ll=F.prefix||getDefaultUsablePrefix();if(Da)return Da=byAlias(ll,Da)||Da,iconFromMapping(lp.definitions,ll,Da)||iconFromMapping(Rd.styles,ll,Da)}const lp=new class{constructor(){this.definitions={}}add(){for(var F=arguments.length,Da=new Array(F),ll=0;ll<F;ll++)Da[ll]=arguments[ll];const cl=Da.reduce(this._pullDefinitions,{});Object.keys(cl).forEach((F=>{this.definitions[F]={...this.definitions[F]||{},...cl[F]},defineIcons(F,cl[F]);const Da=fd[wc][F];Da&&defineIcons(Da,cl[F]),build()}))}reset(){this.definitions={}}_pullDefinitions(F,Da){const ll=Da.prefix&&Da.iconName&&Da.icon?{0:Da}:Da;return Object.keys(ll).map((Da=>{const{prefix:cl,iconName:hl,icon:dl}=ll[Da],pl=dl[2];F[cl]||(F[cl]={}),pl.length>0&&pl.forEach((Da=>{"string"===typeof Da&&(F[cl][Da]=dl)})),F[cl][hl]=dl})),F}},mp={i2svg:function(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wl?(callHooks("beforeI2svg",F),callProvided("pseudoElements2svg",F),callProvided("i2svg",F)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:Da}=F;var ll;!1===Td.autoReplaceSvg&&(Td.autoReplaceSvg=!0),Td.observeMutations=!0,ll=()=>{autoReplace({autoReplaceSvgRoot:Da}),callHooks("watch",F)},Wl&&(Ud?setTimeout(ll,0):Nd.push(ll))}},gp={icon:F=>{if(null===F)return null;if("object"===typeof F&&F.prefix&&F.iconName)return{prefix:F.prefix,iconName:byAlias(F.prefix,F.iconName)||F.iconName};if(Array.isArray(F)&&2===F.length){const Da=0===F[1].indexOf("fa-")?F[1].slice(3):F[1],ll=getCanonicalPrefix(F[0]);return{prefix:ll,iconName:byAlias(ll,Da)||Da}}if("string"===typeof F&&(F.indexOf("".concat(Td.cssPrefix,"-"))>-1||F.match(yd))){const Da=getCanonicalIcon(F.split(" "),{skipLookups:!0});return{prefix:Da.prefix||getDefaultUsablePrefix(),iconName:byAlias(Da.prefix,Da.iconName)||Da.iconName}}if("string"===typeof F){const Da=getDefaultUsablePrefix();return{prefix:Da,iconName:byAlias(Da,F)||F}}}},Ap={noAuto:()=>{Td.autoReplaceSvg=!1,Td.observeMutations=!1,callHooks("noAuto")},config:Td,dom:mp,parse:gp,library:lp,findIconDefinition:findIconDefinition,toHtml:toHtml},autoReplace=function(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:Da=bl}=F;(Object.keys(Rd.styles).length>0||Td.autoFetchSvg)&&Wl&&Td.autoReplaceSvg&&Ap.dom.i2svg({node:Da})};function domVariants(F,Da){return Object.defineProperty(F,"abstract",{get:Da}),Object.defineProperty(F,"html",{get:function(){return F.abstract.map((F=>toHtml(F)))}}),Object.defineProperty(F,"node",{get:function(){if(!Wl)return;const Da=bl.createElement("div");return Da.innerHTML=F.html,Da.children}}),F}function makeInlineSvgAbstract(F){const{icons:{main:Da,mask:ll},prefix:cl,iconName:hl,transform:dl,symbol:pl,title:fl,maskId:Al,titleId:bl,extra:kl,watchable:Dl=!1}=F,{width:Wl,height:Ql}=ll.found?ll:Da,wc="fak"===cl,Sc=[Td.replacementClass,hl?"".concat(Td.cssPrefix,"-").concat(hl):""].filter((F=>-1===kl.classes.indexOf(F))).filter((F=>""!==F||!!F)).concat(kl.classes).join(" ");let eu={children:[],attributes:{...kl.attributes,"data-prefix":cl,"data-icon":hl,class:Sc,role:kl.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Wl," ").concat(Ql)}};const iu=wc&&!~kl.classes.indexOf("fa-fw")?{width:"".concat(Wl/Ql*16*.0625,"em")}:{};Dl&&(eu.attributes[id]=""),fl&&(eu.children.push({tag:"title",attributes:{id:eu.attributes["aria-labelledby"]||"title-".concat(bl||nextUniqueId())},children:[fl]}),delete eu.attributes.title);const su={...eu,prefix:cl,iconName:hl,main:Da,mask:ll,maskId:Al,transform:dl,symbol:pl,styles:{...iu,...kl.styles}},{children:cu,attributes:uu}=ll.found&&Da.found?callProvided("generateAbstractMask",su)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",su)||{children:[],attributes:{}};return su.children=cu,su.attributes=uu,pl?function(F){let{prefix:Da,iconName:ll,children:cl,attributes:hl,symbol:dl}=F;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...hl,id:!0===dl?"".concat(Da,"-").concat(Td.cssPrefix,"-").concat(ll):dl},children:cl}]}]}(su):function(F){let{children:Da,main:ll,mask:cl,attributes:hl,styles:dl,transform:pl}=F;if(transformIsMeaningful(pl)&&ll.found&&!cl.found){const{width:F,height:Da}=ll,cl={x:F/Da/2,y:.5};hl.style=joinStyles({...dl,"transform-origin":"".concat(cl.x+pl.x/16,"em ").concat(cl.y+pl.y/16,"em")})}return[{tag:"svg",attributes:hl,children:Da}]}(su)}function makeLayersTextAbstract(F){const{content:Da,width:ll,height:cl,transform:hl,title:dl,extra:pl,watchable:fl=!1}=F,Al={...pl.attributes,...dl?{title:dl}:{},class:pl.classes.join(" ")};fl&&(Al[id]="");const bl={...pl.styles};transformIsMeaningful(hl)&&(bl.transform=function(F){let{transform:Da,width:ll=ed,height:cl=ed,startCentered:hl=!1}=F,dl="";return dl+=hl&&Ql?"translate(".concat(Da.x/Cd-ll/2,"em, ").concat(Da.y/Cd-cl/2,"em) "):hl?"translate(calc(-50% + ".concat(Da.x/Cd,"em), calc(-50% + ").concat(Da.y/Cd,"em)) "):"translate(".concat(Da.x/Cd,"em, ").concat(Da.y/Cd,"em) "),dl+="scale(".concat(Da.size/Cd*(Da.flipX?-1:1),", ").concat(Da.size/Cd*(Da.flipY?-1:1),") "),dl+="rotate(".concat(Da.rotate,"deg) "),dl}({transform:hl,startCentered:!0,width:ll,height:cl}),bl["-webkit-transform"]=bl.transform);const kl=joinStyles(bl);kl.length>0&&(Al.style=kl);const Dl=[];return Dl.push({tag:"span",attributes:Al,children:[Da]}),dl&&Dl.push({tag:"span",attributes:{class:"sr-only"},children:[dl]}),Dl}const{styles:vp}=Rd;function asFoundIcon(F){const Da=F[0],ll=F[1],[cl]=F.slice(4);let hl=null;return hl=Array.isArray(cl)?{tag:"g",attributes:{class:"".concat(Td.cssPrefix,"-").concat(bd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Td.cssPrefix,"-").concat(bd.SECONDARY),fill:"currentColor",d:cl[0]}},{tag:"path",attributes:{class:"".concat(Td.cssPrefix,"-").concat(bd.PRIMARY),fill:"currentColor",d:cl[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:cl}},{found:!0,width:Da,height:ll,icon:hl}}const _p={found:!1,width:512,height:512};function findIcon(F,Da){let ll=Da;return"fa"===Da&&null!==Td.styleDefault&&(Da=getDefaultUsablePrefix()),new Promise(((cl,hl)=>{if("fa"===ll){const ll=byOldName(F)||{};F=ll.iconName||F,Da=ll.prefix||Da}if(F&&Da&&vp[Da]&&vp[Da][F]){return cl(asFoundIcon(vp[Da][F]))}!function(F,Da){ld||Td.showMissingIcons||!F||console.error('Icon with name "'.concat(F,'" and prefix "').concat(Da,'" is missing.'))}(F,Da),cl({..._p,icon:Td.showMissingIcons&&F&&callProvided("missingIconAbstract")||{}})}))}const noop$1=()=>{},xp=Td.measurePerformance&&Dl&&Dl.mark&&Dl.measure?Dl:{mark:noop$1,measure:noop$1},bp='FA "6.6.0"',end=F=>{xp.mark("".concat(bp," ").concat(F," ends")),xp.measure("".concat(bp," ").concat(F),"".concat(bp," ").concat(F," begins"),"".concat(bp," ").concat(F," ends"))};var perf_begin=F=>(xp.mark("".concat(bp," ").concat(F," begins")),()=>end(F));const noop$2=()=>{};function isWatched(F){return"string"===typeof(F.getAttribute?F.getAttribute(id):null)}function createElementNS(F){return bl.createElementNS("http://www.w3.org/2000/svg",F)}function createElement(F){return bl.createElement(F)}function convertSVG(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:ll=("svg"===F.tag?createElementNS:createElement)}=Da;if("string"===typeof F)return bl.createTextNode(F);const cl=ll(F.tag);Object.keys(F.attributes||[]).forEach((function(Da){cl.setAttribute(Da,F.attributes[Da])}));return(F.children||[]).forEach((function(F){cl.appendChild(convertSVG(F,{ceFn:ll}))})),cl}const wp={replace:function(F){const Da=F[0];if(Da.parentNode)if(F[1].forEach((F=>{Da.parentNode.insertBefore(convertSVG(F),Da)})),null===Da.getAttribute(id)&&Td.keepOriginalSource){let F=bl.createComment(function(F){let Da=" ".concat(F.outerHTML," ");return Da="".concat(Da,"Font Awesome fontawesome.com "),Da}(Da));Da.parentNode.replaceChild(F,Da)}else Da.remove()},nest:function(F){const Da=F[0],ll=F[1];if(~classArray(Da).indexOf(Td.replacementClass))return wp.replace(F);const cl=new RegExp("".concat(Td.cssPrefix,"-.*"));if(delete ll[0].attributes.id,ll[0].attributes.class){const F=ll[0].attributes.class.split(" ").reduce(((F,Da)=>(Da===Td.replacementClass||Da.match(cl)?F.toSvg.push(Da):F.toNode.push(Da),F)),{toNode:[],toSvg:[]});ll[0].attributes.class=F.toSvg.join(" "),0===F.toNode.length?Da.removeAttribute("class"):Da.setAttribute("class",F.toNode.join(" "))}const hl=ll.map((F=>toHtml(F))).join("\n");Da.setAttribute(id,""),Da.innerHTML=hl}};function performOperationSync(F){F()}function perform(F,Da){const ll="function"===typeof Da?Da:noop$2;if(0===F.length)ll();else{let Da=performOperationSync;"async"===Td.mutateApproach&&(Da=Al.requestAnimationFrame||performOperationSync),Da((()=>{const Da=!0===Td.autoReplaceSvg?wp.replace:wp[Td.autoReplaceSvg]||wp.replace,cl=perf_begin("mutate");F.map(Da),cl(),ll()}))}}let Ep=!1;function disableObservation(){Ep=!0}function enableObservation(){Ep=!1}let Mp=null;function observe(F){if(!kl)return;if(!Td.observeMutations)return;const{treeCallback:Da=noop$2,nodeCallback:ll=noop$2,pseudoElementsCallback:cl=noop$2,observeMutationsRoot:hl=bl}=F;Mp=new kl((F=>{if(Ep)return;const hl=getDefaultUsablePrefix();toArray(F).forEach((F=>{if("childList"===F.type&&F.addedNodes.length>0&&!isWatched(F.addedNodes[0])&&(Td.searchPseudoElements&&cl(F.target),Da(F.target)),"attributes"===F.type&&F.target.parentNode&&Td.searchPseudoElements&&cl(F.target.parentNode),"attributes"===F.type&&isWatched(F.target)&&~xd.indexOf(F.attributeName))if("class"===F.attributeName&&function(F){const Da=F.getAttribute?F.getAttribute(rd):null,ll=F.getAttribute?F.getAttribute(ad):null;return Da&&ll}(F.target)){const{prefix:Da,iconName:ll}=getCanonicalIcon(classArray(F.target));F.target.setAttribute(rd,Da||hl),ll&&F.target.setAttribute(ad,ll)}else(dl=F.target)&&dl.classList&&dl.classList.contains&&dl.classList.contains(Td.replacementClass)&&ll(F.target);var dl}))})),Wl&&Mp.observe(hl,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function classParser(F){const Da=F.getAttribute("data-prefix"),ll=F.getAttribute("data-icon"),cl=void 0!==F.innerText?F.innerText.trim():"";let hl=getCanonicalIcon(classArray(F));return hl.prefix||(hl.prefix=getDefaultUsablePrefix()),Da&&ll&&(hl.prefix=Da,hl.iconName=ll),hl.iconName&&hl.prefix||(hl.prefix&&cl.length>0&&(hl.iconName=(dl=hl.prefix,pl=F.innerText,(Gd[dl]||{})[pl]||byUnicode(hl.prefix,toHex(F.innerText)))),!hl.iconName&&Td.autoFetchSvg&&F.firstChild&&F.firstChild.nodeType===Node.TEXT_NODE&&(hl.iconName=F.firstChild.data)),hl;var dl,pl}function parseMeta(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:ll,prefix:cl,rest:hl}=classParser(F),dl=function(F){const Da=toArray(F.attributes).reduce(((F,Da)=>("class"!==F.name&&"style"!==F.name&&(F[Da.name]=Da.value),F)),{}),ll=F.getAttribute("title"),cl=F.getAttribute("data-fa-title-id");return Td.autoA11y&&(ll?Da["aria-labelledby"]="".concat(Td.replacementClass,"-title-").concat(cl||nextUniqueId()):(Da["aria-hidden"]="true",Da.focusable="false")),Da}(F),pl=chainHooks("parseNodeAttributes",{},F);let fl=Da.styleParser?function(F){const Da=F.getAttribute("style");let ll=[];return Da&&(ll=Da.split(";").reduce(((F,Da)=>{const ll=Da.split(":"),cl=ll[0],hl=ll.slice(1);return cl&&hl.length>0&&(F[cl]=hl.join(":").trim()),F}),{})),ll}(F):[];return{iconName:ll,title:F.getAttribute("title"),titleId:F.getAttribute("data-fa-title-id"),prefix:cl,transform:Ld,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:hl,styles:fl,attributes:dl},...pl}}const{styles:Sp}=Rd;function generateMutation(F){const Da="nest"===Td.autoReplaceSvg?parseMeta(F,{styleParser:!1}):parseMeta(F);return~Da.extra.classes.indexOf(vd)?callProvided("generateLayersText",F,Da):callProvided("generateSvgReplacementMutation",F,Da)}let kp=new Set;function onTree(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Wl)return Promise.resolve();const ll=bl.documentElement.classList,hclAdd=F=>ll.add("".concat(sd,"-").concat(F)),hclRemove=F=>ll.remove("".concat(sd,"-").concat(F)),cl=Td.autoFetchSvg?kp:cd.map((F=>"fa-".concat(F))).concat(Object.keys(Sp));cl.includes("fa")||cl.push("fa");const hl=[".".concat(vd,":not([").concat(id,"])")].concat(cl.map((F=>".".concat(F,":not([").concat(id,"])")))).join(", ");if(0===hl.length)return Promise.resolve();let dl=[];try{dl=toArray(F.querySelectorAll(hl))}catch(Al){}if(!(dl.length>0))return Promise.resolve();hclAdd("pending"),hclRemove("complete");const pl=perf_begin("onTree"),fl=dl.reduce(((F,Da)=>{try{const ll=generateMutation(Da);ll&&F.push(ll)}catch(Al){ld||"MissingIcon"===Al.name&&console.error(Al)}return F}),[]);return new Promise(((F,ll)=>{Promise.all(fl).then((ll=>{perform(ll,(()=>{hclAdd("active"),hclAdd("complete"),hclRemove("pending"),"function"===typeof Da&&Da(),pl(),F()}))})).catch((F=>{pl(),ll(F)}))}))}function onNode(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;generateMutation(F).then((F=>{F&&perform([F],Da)}))}cd.map((F=>{kp.add("fa-".concat(F))})),Object.keys(hd[wc]).map(kp.add.bind(kp)),Object.keys(hd[eu]).map(kp.add.bind(kp)),Object.keys(hd[iu]).map(kp.add.bind(kp)),kp=[...kp];const render=function(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:ll=Ld,symbol:cl=!1,mask:hl=null,maskId:dl=null,title:pl=null,titleId:fl=null,classes:Al=[],attributes:bl={},styles:kl={}}=Da;if(!F)return;const{prefix:Dl,iconName:Wl,icon:Ql}=F;return domVariants({type:"icon",...F},(()=>(callHooks("beforeDOMElementCreation",{iconDefinition:F,params:Da}),Td.autoA11y&&(pl?bl["aria-labelledby"]="".concat(Td.replacementClass,"-title-").concat(fl||nextUniqueId()):(bl["aria-hidden"]="true",bl.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(Ql),mask:hl?asFoundIcon(hl.icon):{found:!1,width:null,height:null,icon:{}}},prefix:Dl,iconName:Wl,transform:{...Ld,...ll},symbol:cl,title:pl,maskId:dl,titleId:fl,extra:{attributes:bl,styles:kl,classes:Al}}))))};var Tp={mixout(){return{icon:(F=render,function(Da){let ll=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const cl=(Da||{}).icon?Da:findIconDefinition(Da||{});let{mask:hl}=ll;return hl&&(hl=(hl||{}).icon?hl:findIconDefinition(hl||{})),F(cl,{...ll,mask:hl})})};var F},hooks:()=>({mutationObserverCallbacks:F=>(F.treeCallback=onTree,F.nodeCallback=onNode,F)}),provides(F){F.i2svg=function(F){const{node:Da=bl,callback:ll=()=>{}}=F;return onTree(Da,ll)},F.generateSvgReplacementMutation=function(F,Da){const{iconName:ll,title:cl,titleId:hl,prefix:dl,transform:pl,symbol:fl,mask:Al,maskId:bl,extra:kl}=Da;return new Promise(((Da,Dl)=>{Promise.all([findIcon(ll,dl),Al.iconName?findIcon(Al.iconName,Al.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((Al=>{let[Dl,Wl]=Al;Da([F,makeInlineSvgAbstract({icons:{main:Dl,mask:Wl},prefix:dl,iconName:ll,transform:pl,symbol:fl,maskId:bl,title:cl,titleId:hl,extra:kl,watchable:!0})])})).catch(Dl)}))},F.generateAbstractIcon=function(F){let{children:Da,attributes:ll,main:cl,transform:hl,styles:dl}=F;const pl=joinStyles(dl);let fl;return pl.length>0&&(ll.style=pl),transformIsMeaningful(hl)&&(fl=callProvided("generateAbstractTransformGrouping",{main:cl,transform:hl,containerWidth:cl.width,iconWidth:cl.width})),Da.push(fl||cl.icon),{children:Da,attributes:ll}}}},Ip={mixout:()=>({layer(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:ll=[]}=Da;return domVariants({type:"layer"},(()=>{callHooks("beforeDOMElementCreation",{assembler:F,params:Da});let cl=[];return F((F=>{Array.isArray(F)?F.map((F=>{cl=cl.concat(F.abstract)})):cl=cl.concat(F.abstract)})),[{tag:"span",attributes:{class:["".concat(Td.cssPrefix,"-layers"),...ll].join(" ")},children:cl}]}))}})},Cp={mixout:()=>({counter(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:ll=null,classes:cl=[],attributes:hl={},styles:dl={}}=Da;return domVariants({type:"counter",content:F},(()=>(callHooks("beforeDOMElementCreation",{content:F,params:Da}),function(F){const{content:Da,title:ll,extra:cl}=F,hl={...cl.attributes,...ll?{title:ll}:{},class:cl.classes.join(" ")},dl=joinStyles(cl.styles);dl.length>0&&(hl.style=dl);const pl=[];return pl.push({tag:"span",attributes:hl,children:[Da]}),ll&&pl.push({tag:"span",attributes:{class:"sr-only"},children:[ll]}),pl}({content:F.toString(),title:ll,extra:{attributes:hl,styles:dl,classes:["".concat(Td.cssPrefix,"-layers-counter"),...cl]}}))))}})},Lp={mixout:()=>({text(F){let Da=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:ll=Ld,title:cl=null,classes:hl=[],attributes:dl={},styles:pl={}}=Da;return domVariants({type:"text",content:F},(()=>(callHooks("beforeDOMElementCreation",{content:F,params:Da}),makeLayersTextAbstract({content:F,transform:{...Ld,...ll},title:cl,extra:{attributes:dl,styles:pl,classes:["".concat(Td.cssPrefix,"-layers-text"),...hl]}}))))}}),provides(F){F.generateLayersText=function(F,Da){const{title:ll,transform:cl,extra:hl}=Da;let dl=null,pl=null;if(Ql){const Da=parseInt(getComputedStyle(F).fontSize,10),ll=F.getBoundingClientRect();dl=ll.width/Da,pl=ll.height/Da}return Td.autoA11y&&!ll&&(hl.attributes["aria-hidden"]="true"),Promise.resolve([F,makeLayersTextAbstract({content:F.innerHTML,width:dl,height:pl,transform:cl,title:ll,extra:hl,watchable:!0})])}}};const zp=new RegExp('"',"ug"),Pp=[1105920,1112319],Dp={FontAwesome:{normal:"fas",400:"fas"},"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"},"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"},"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Rp=Object.keys(Dp).reduce(((F,Da)=>(F[Da.toLowerCase()]=Dp[Da],F)),{}),Np=Object.keys(Rp).reduce(((F,Da)=>{const ll=Rp[Da];return F[Da]=ll[900]||[...Object.entries(ll)][0][1],F}),{});function replaceForPosition(F,Da){const ll="".concat("data-fa-pseudo-element-pending").concat(Da.replace(":","-"));return new Promise(((cl,hl)=>{if(null!==F.getAttribute(ll))return cl();const dl=toArray(F.children).filter((F=>F.getAttribute(nd)===Da))[0],pl=Al.getComputedStyle(F,Da),fl=pl.getPropertyValue("font-family"),kl=fl.match(_d),Dl=pl.getPropertyValue("font-weight"),Wl=pl.getPropertyValue("content");if(dl&&!kl)return F.removeChild(dl),cl();if(kl&&"none"!==Wl&&""!==Wl){const Al=pl.getPropertyValue("content");let Wl=function(F,Da){const ll=F.replace(/^['"]|['"]$/g,"").toLowerCase(),cl=parseInt(Da),hl=isNaN(cl)?"normal":cl;return(Rp[ll]||{})[hl]||Np[ll]}(fl,Dl);const{value:Ql,isSecondary:wc}=function(F){const Da=F.replace(zp,""),ll=function(F,Da){const ll=F.length;let cl,hl=F.charCodeAt(Da);return hl>=55296&&hl<=56319&&ll>Da+1&&(cl=F.charCodeAt(Da+1),cl>=56320&&cl<=57343)?1024*(hl-55296)+cl-56320+65536:hl}(Da,0),cl=ll>=Pp[0]&&ll<=Pp[1],hl=2===Da.length&&Da[0]===Da[1];return{value:toHex(hl?Da[0]:Da),isSecondary:cl||hl}}(Al),Sc=kl[0].startsWith("FontAwesome");let eu=byUnicode(Wl,Ql),iu=eu;if(Sc){const F=function(F){const Da=Hd[F],ll=byUnicode("fas",F);return Da||(ll?{prefix:"fas",iconName:ll}:null)||{prefix:null,iconName:null}}(Ql);F.iconName&&F.prefix&&(eu=F.iconName,Wl=F.prefix)}if(!eu||wc||dl&&dl.getAttribute(rd)===Wl&&dl.getAttribute(ad)===iu)cl();else{F.setAttribute(ll,iu),dl&&F.removeChild(dl);const pl={iconName:null,title:null,titleId:null,prefix:null,transform:Ld,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:fl}=pl;fl.attributes[nd]=Da,findIcon(eu,Wl).then((hl=>{const dl=makeInlineSvgAbstract({...pl,icons:{main:hl,mask:{prefix:null,iconName:null,rest:[]}},prefix:Wl,iconName:iu,extra:fl,watchable:!0}),Al=bl.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===Da?F.insertBefore(Al,F.firstChild):F.appendChild(Al),Al.outerHTML=dl.map((F=>toHtml(F))).join("\n"),F.removeAttribute(ll),cl()})).catch(hl)}}else cl()}))}function replace(F){return Promise.all([replaceForPosition(F,"::before"),replaceForPosition(F,"::after")])}function processable(F){return F.parentNode!==document.head&&!~od.indexOf(F.tagName.toUpperCase())&&!F.getAttribute(nd)&&(!F.parentNode||"svg"!==F.parentNode.tagName)}function searchPseudoElements(F){if(Wl)return new Promise(((Da,ll)=>{const cl=toArray(F.querySelectorAll("*")).filter(processable).map(replace),hl=perf_begin("searchPseudoElements");disableObservation(),Promise.all(cl).then((()=>{hl(),enableObservation(),Da()})).catch((()=>{hl(),enableObservation(),ll()}))}))}var Up={hooks:()=>({mutationObserverCallbacks:F=>(F.pseudoElementsCallback=searchPseudoElements,F)}),provides(F){F.pseudoElements2svg=function(F){const{node:Da=bl}=F;Td.searchPseudoElements&&searchPseudoElements(Da)}}};let Bp=!1;var Op={mixout:()=>({dom:{unwatch(){disableObservation(),Bp=!0}}}),hooks:()=>({bootstrap(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto(){Mp&&Mp.disconnect()},watch(F){const{observeMutationsRoot:Da}=F;Bp?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:Da}))}})};const parseTransformString=F=>F.toLowerCase().split(" ").reduce(((F,Da)=>{const ll=Da.toLowerCase().split("-"),cl=ll[0];let hl=ll.slice(1).join("-");if(cl&&"h"===hl)return F.flipX=!0,F;if(cl&&"v"===hl)return F.flipY=!0,F;if(hl=parseFloat(hl),isNaN(hl))return F;switch(cl){case"grow":F.size=F.size+hl;break;case"shrink":F.size=F.size-hl;break;case"left":F.x=F.x-hl;break;case"right":F.x=F.x+hl;break;case"up":F.y=F.y-hl;break;case"down":F.y=F.y+hl;break;case"rotate":F.rotate=F.rotate+hl}return F}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var Fp={mixout:()=>({parse:{transform:F=>parseTransformString(F)}}),hooks:()=>({parseNodeAttributes(F,Da){const ll=Da.getAttribute("data-fa-transform");return ll&&(F.transform=parseTransformString(ll)),F}}),provides(F){F.generateAbstractTransformGrouping=function(F){let{main:Da,transform:ll,containerWidth:cl,iconWidth:hl}=F;const dl={transform:"translate(".concat(cl/2," 256)")},pl="translate(".concat(32*ll.x,", ").concat(32*ll.y,") "),fl="scale(".concat(ll.size/16*(ll.flipX?-1:1),", ").concat(ll.size/16*(ll.flipY?-1:1),") "),Al="rotate(".concat(ll.rotate," 0 0)"),bl={transform:"".concat(pl," ").concat(fl," ").concat(Al)},kl={transform:"translate(".concat(hl/2*-1," -256)")};return{tag:"g",attributes:{...dl},children:[{tag:"g",attributes:{...bl},children:[{tag:Da.icon.tag,children:Da.icon.children,attributes:{...Da.icon.attributes,...kl}}]}]}}}};const jp={x:0,y:0,width:"100%",height:"100%"};function fillBlack(F){let Da=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return F.attributes&&(F.attributes.fill||Da)&&(F.attributes.fill="black"),F}var Vp={hooks:()=>({parseNodeAttributes(F,Da){const ll=Da.getAttribute("data-fa-mask"),cl=ll?getCanonicalIcon(ll.split(" ").map((F=>F.trim()))):{prefix:null,iconName:null,rest:[]};return cl.prefix||(cl.prefix=getDefaultUsablePrefix()),F.mask=cl,F.maskId=Da.getAttribute("data-fa-mask-id"),F}}),provides(F){F.generateAbstractMask=function(F){let{children:Da,attributes:ll,main:cl,mask:hl,maskId:dl,transform:pl}=F;const{width:fl,icon:Al}=cl,{width:bl,icon:kl}=hl,Dl=function(F){let{transform:Da,containerWidth:ll,iconWidth:cl}=F;const hl={transform:"translate(".concat(ll/2," 256)")},dl="translate(".concat(32*Da.x,", ").concat(32*Da.y,") "),pl="scale(".concat(Da.size/16*(Da.flipX?-1:1),", ").concat(Da.size/16*(Da.flipY?-1:1),") "),fl="rotate(".concat(Da.rotate," 0 0)");return{outer:hl,inner:{transform:"".concat(dl," ").concat(pl," ").concat(fl)},path:{transform:"translate(".concat(cl/2*-1," -256)")}}}({transform:pl,containerWidth:bl,iconWidth:fl}),Wl={tag:"rect",attributes:{...jp,fill:"white"}},Ql=Al.children?{children:Al.children.map(fillBlack)}:{},wc={tag:"g",attributes:{...Dl.inner},children:[fillBlack({tag:Al.tag,attributes:{...Al.attributes,...Dl.path},...Ql})]},Sc={tag:"g",attributes:{...Dl.outer},children:[wc]},eu="mask-".concat(dl||nextUniqueId()),iu="clip-".concat(dl||nextUniqueId()),su={tag:"mask",attributes:{...jp,id:eu,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[Wl,Sc]},cu={tag:"defs",children:[{tag:"clipPath",attributes:{id:iu},children:(uu=kl,"g"===uu.tag?uu.children:[uu])},su]};var uu;return Da.push(cu,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(iu,")"),mask:"url(#".concat(eu,")"),...jp}}),{children:Da,attributes:ll}}}},Gp={provides(F){let Da=!1;Al.matchMedia&&(Da=Al.matchMedia("(prefers-reduced-motion: reduce)").matches),F.missingIconAbstract=function(){const F=[],ll={fill:"currentColor"},cl={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};F.push({tag:"path",attributes:{...ll,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const hl={...cl,attributeName:"opacity"},dl={tag:"circle",attributes:{...ll,cx:"256",cy:"364",r:"28"},children:[]};return Da||dl.children.push({tag:"animate",attributes:{...cl,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...hl,values:"1;0;1;1;0;1;"}}),F.push(dl),F.push({tag:"path",attributes:{...ll,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:Da?[]:[{tag:"animate",attributes:{...hl,values:"1;0;0;0;0;1;"}}]}),Da||F.push({tag:"path",attributes:{...ll,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...hl,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:F}}}};!function(F,Da){let{mixoutsTo:ll}=Da;Xd=F,Yd={},Object.keys(Jd).forEach((F=>{-1===$d.indexOf(F)&&delete Jd[F]})),Xd.forEach((F=>{const Da=F.mixout?F.mixout():{};if(Object.keys(Da).forEach((F=>{"function"===typeof Da[F]&&(ll[F]=Da[F]),"object"===typeof Da[F]&&Object.keys(Da[F]).forEach((cl=>{ll[F]||(ll[F]={}),ll[F][cl]=Da[F][cl]}))})),F.hooks){const Da=F.hooks();Object.keys(Da).forEach((F=>{Yd[F]||(Yd[F]=[]),Yd[F].push(Da[F])}))}F.provides&&F.provides(Jd)}))}([Pd,Tp,Ip,Cp,Lp,Up,Op,Fp,Vp,Gp,{hooks:()=>({parseNodeAttributes(F,Da){const ll=Da.getAttribute("data-fa-symbol"),cl=null!==ll&&(""===ll||ll);return F.symbol=cl,F}})}],{mixoutsTo:Ap});const qp=Ap.icon},6840:(F,Da,ll)=>{"use strict";ll.d(Da,{Zs:()=>qu});var cl=Math.pow,__async=(F,Da,ll)=>new Promise(((cl,hl)=>{var fulfilled=F=>{try{step(ll.next(F))}catch(Da){hl(Da)}},rejected=F=>{try{step(ll.throw(F))}catch(Da){hl(Da)}},step=F=>F.done?cl(F.value):Promise.resolve(F.value).then(fulfilled,rejected);step((ll=ll.apply(F,Da)).next())})),hl=Uint8Array,dl=Uint16Array,pl=Int32Array,fl=new hl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Al=new hl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bl=new hl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(F,Da){for(var ll=new dl(31),cl=0;cl<31;++cl)ll[cl]=Da+=1<<F[cl-1];var hl=new pl(ll[30]);for(cl=1;cl<30;++cl)for(var fl=ll[cl];fl<ll[cl+1];++fl)hl[fl]=fl-ll[cl]<<5|cl;return{b:ll,r:hl}},kl=freb(fl,2),Dl=kl.b,Wl=kl.r;Dl[28]=258,Wl[258]=28;var Ql,wc=freb(Al,0),Sc=wc.b,eu=(wc.r,new dl(32768));for(su=0;su<32768;++su)Ql=(61680&(Ql=(52428&(Ql=(43690&su)>>1|(21845&su)<<1))>>2|(13107&Ql)<<2))>>4|(3855&Ql)<<4,eu[su]=((65280&Ql)>>8|(255&Ql)<<8)>>1;var hMap=function(F,Da,ll){for(var cl=F.length,hl=0,pl=new dl(Da);hl<cl;++hl)F[hl]&&++pl[F[hl]-1];var fl,Al=new dl(Da);for(hl=1;hl<Da;++hl)Al[hl]=Al[hl-1]+pl[hl-1]<<1;if(ll){fl=new dl(1<<Da);var bl=15-Da;for(hl=0;hl<cl;++hl)if(F[hl])for(var kl=hl<<4|F[hl],Dl=Da-F[hl],Wl=Al[F[hl]-1]++<<Dl,Ql=Wl|(1<<Dl)-1;Wl<=Ql;++Wl)fl[eu[Wl]>>bl]=kl}else for(fl=new dl(cl),hl=0;hl<cl;++hl)F[hl]&&(fl[hl]=eu[Al[F[hl]-1]++]>>15-F[hl]);return fl},iu=new hl(288);for(su=0;su<144;++su)iu[su]=8;for(su=144;su<256;++su)iu[su]=9;for(su=256;su<280;++su)iu[su]=7;for(su=280;su<288;++su)iu[su]=8;var su,cu=new hl(32);for(su=0;su<32;++su)cu[su]=5;var uu=hMap(iu,9,1),hu=hMap(cu,5,1),max=function(F){for(var Da=F[0],ll=1;ll<F.length;++ll)F[ll]>Da&&(Da=F[ll]);return Da},bits=function(F,Da,ll){var cl=Da/8|0;return(F[cl]|F[cl+1]<<8)>>(7&Da)&ll},bits16=function(F,Da){var ll=Da/8|0;return(F[ll]|F[ll+1]<<8|F[ll+2]<<16)>>(7&Da)},Lu=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(F,Da,ll){var cl=new Error(Da||Lu[F]);if(cl.code=F,Error.captureStackTrace&&Error.captureStackTrace(cl,err),!ll)throw cl;return cl},inflt=function(F,Da,ll,cl){var dl=F.length,pl=cl?cl.length:0;if(!dl||Da.f&&!Da.l)return ll||new hl(0);var kl=!ll||2!=Da.i,Wl=Da.i;ll||(ll=new hl(3*dl));var cbuf=function(F){var Da=ll.length;if(F>Da){var cl=new hl(Math.max(2*Da,F));cl.set(ll),ll=cl}},Ql=Da.f||0,wc=Da.p||0,eu=Da.b||0,iu=Da.l,su=Da.d,cu=Da.m,Lu=Da.n,zu=8*dl;do{if(!iu){Ql=bits(F,wc,1);var Du=bits(F,wc+1,3);if(wc+=3,!Du){var Nu=F[(od=4+((wc+7)/8|0))-4]|F[od-3]<<8,qu=od+Nu;if(qu>dl){Wl&&err(0);break}kl&&cbuf(eu+Nu),ll.set(F.subarray(od,qu),eu),Da.b=eu+=Nu,Da.p=wc=8*qu,Da.f=Ql;continue}if(1==Du)iu=uu,su=hu,cu=9,Lu=5;else if(2==Du){var ih=bits(F,wc,31)+257,gh=bits(F,wc+10,15)+4,ed=ih+bits(F,wc+5,31)+1;wc+=14;for(var td=new hl(ed),id=new hl(19),nd=0;nd<gh;++nd)id[bl[nd]]=bits(F,wc+3*nd,7);wc+=3*gh;var rd=max(id),ad=(1<<rd)-1,sd=hMap(id,rd,1);for(nd=0;nd<ed;){var od,ld=sd[bits(F,wc,ad)];if(wc+=15&ld,(od=ld>>4)<16)td[nd++]=od;else{var cd=0,ud=0;for(16==od?(ud=3+bits(F,wc,3),wc+=2,cd=td[nd-1]):17==od?(ud=3+bits(F,wc,7),wc+=3):18==od&&(ud=11+bits(F,wc,127),wc+=7);ud--;)td[nd++]=cd}}var hd=td.subarray(0,ih),dd=td.subarray(ih);cu=max(hd),Lu=max(dd),iu=hMap(hd,cu,1),su=hMap(dd,Lu,1)}else err(1);if(wc>zu){Wl&&err(0);break}}kl&&cbuf(eu+131072);for(var pd=(1<<cu)-1,md=(1<<Lu)-1,fd=wc;;fd=wc){var gd=(cd=iu[bits16(F,wc)&pd])>>4;if((wc+=15&cd)>zu){Wl&&err(0);break}if(cd||err(2),gd<256)ll[eu++]=gd;else{if(256==gd){fd=wc,iu=null;break}var Ad=gd-254;if(gd>264){var yd=fl[nd=gd-257];Ad=bits(F,wc,(1<<yd)-1)+Dl[nd],wc+=yd}var vd=su[bits16(F,wc)&md],_d=vd>>4;vd||err(3),wc+=15&vd;dd=Sc[_d];if(_d>3){yd=Al[_d];dd+=bits16(F,wc)&(1<<yd)-1,wc+=yd}if(wc>zu){Wl&&err(0);break}kl&&cbuf(eu+131072);var xd=eu+Ad;if(eu<dd){var bd=pl-dd,wd=Math.min(dd,xd);for(bd+eu<0&&err(3);eu<wd;++eu)ll[eu]=cl[bd+eu]}for(;eu<xd;eu+=4)ll[eu]=ll[eu-dd],ll[eu+1]=ll[eu+1-dd],ll[eu+2]=ll[eu+2-dd],ll[eu+3]=ll[eu+3-dd];eu=xd}}Da.l=iu,Da.p=fd,Da.b=eu,Da.f=Ql,iu&&(Ql=1,Da.m=cu,Da.d=su,Da.n=Lu)}while(!Ql);return eu==ll.length?ll:function(F,Da,ll){(null==Da||Da<0)&&(Da=0),(null==ll||ll>F.length)&&(ll=F.length);var cl=new hl(ll-Da);return cl.set(F.subarray(Da,ll)),cl}(ll,0,eu)},zu=new hl(0);function gunzipSync(F,Da){var ll=function(F){31==F[0]&&139==F[1]&&8==F[2]||err(6,"invalid gzip data");var Da=F[3],ll=10;4&Da&&(ll+=2+(F[10]|F[11]<<8));for(var cl=(Da>>3&1)+(Da>>4&1);cl>0;cl-=!F[ll++]);return ll+(2&Da)}(F);return ll+8>F.length&&err(6,"invalid gzip data"),inflt(F.subarray(ll,-8),{i:2},Da&&Da.out||new hl(function(F){var Da=F.length;return(F[Da-4]|F[Da-3]<<8|F[Da-2]<<16|F[Da-1]<<24)>>>0}(F)),Da&&Da.dictionary)}function unzlibSync(F,Da){return inflt(F.subarray((ll=F,cl=Da&&Da.dictionary,(8!=(15&ll[0])||ll[0]>>4>7||(ll[0]<<8|ll[1])%31)&&err(6,"invalid zlib data"),(ll[1]>>5&1)==+!cl&&err(6,"invalid zlib data: "+(32&ll[1]?"need":"unexpected")+" dictionary"),2+(ll[1]>>3&4)),-4),{i:2},Da&&Da.out,Da&&Da.dictionary);var ll,cl}function decompressSync(F,Da){return 31==F[0]&&139==F[1]&&8==F[2]?gunzipSync(F,Da):8!=(15&F[0])||F[0]>>4>7||(F[0]<<8|F[1])%31?function(F,Da){return inflt(F,{i:2},Da&&Da.out,Da&&Da.dictionary)}(F,Da):unzlibSync(F,Da)}var Du="undefined"!=typeof TextDecoder&&new TextDecoder;try{Du.decode(zu,{stream:!0})}catch(nd){}var shift=(F,Da)=>F*cl(2,Da),unshift=(F,Da)=>Math.floor(F/cl(2,Da)),getUint24=(F,Da)=>shift(F.getUint16(Da+1,!0),8)+F.getUint8(Da),getUint48=(F,Da)=>shift(F.getUint32(Da+2,!0),16)+F.getUint16(Da,!0),compare=(F,Da,ll,cl,hl)=>{if(F!==cl.getUint8(hl))return F-cl.getUint8(hl);const dl=getUint24(cl,hl+1);if(Da!==dl)return Da-dl;const pl=getUint24(cl,hl+4);return ll!==pl?ll-pl:0},queryTile=(F,Da,ll,cl)=>{const hl=queryView(F,Da,ll,cl);return hl?{z:Da,x:ll,y:cl,offset:hl[0],length:hl[1],isDir:!1}:null},queryView=(F,Da,ll,cl)=>{let hl=0,dl=F.byteLength/17-1;for(;hl<=dl;){const pl=dl+hl>>1,fl=compare(Da,ll,cl,F,17*pl);if(fl>0)hl=pl+1;else{if(!(fl<0))return[getUint48(F,17*pl+7),F.getUint32(17*pl+13,!0)];dl=pl-1}}return null},entrySort=(F,Da)=>F.isDir&&!Da.isDir?1:!F.isDir&&Da.isDir?-1:F.z!==Da.z?F.z-Da.z:F.x!==Da.x?F.x-Da.x:F.y-Da.y,parseEntry=(F,Da)=>{const ll=F.getUint8(17*Da);return{z:127&ll,x:getUint24(F,17*Da+1),y:getUint24(F,17*Da+4),offset:getUint48(F,17*Da+7),length:F.getUint32(17*Da+13,!0),isDir:ll>>7===1}},sortDir=F=>{const Da=[],ll=new DataView(F);for(let cl=0;cl<ll.byteLength/17;cl++)Da.push(parseEntry(ll,cl));return createDirectory(Da)},createDirectory=F=>{F.sort(entrySort);const Da=new ArrayBuffer(17*F.length),ll=new Uint8Array(Da);for(let cl=0;cl<F.length;cl++){const Da=F[cl];let hl=Da.z;Da.isDir&&(hl|=128),ll[17*cl]=hl,ll[17*cl+1]=255&Da.x,ll[17*cl+2]=Da.x>>8&255,ll[17*cl+3]=Da.x>>16&255,ll[17*cl+4]=255&Da.y,ll[17*cl+5]=Da.y>>8&255,ll[17*cl+6]=Da.y>>16&255,ll[17*cl+7]=255&Da.offset,ll[17*cl+8]=255&unshift(Da.offset,8),ll[17*cl+9]=255&unshift(Da.offset,16),ll[17*cl+10]=255&unshift(Da.offset,24),ll[17*cl+11]=255&unshift(Da.offset,32),ll[17*cl+12]=255&unshift(Da.offset,48),ll[17*cl+13]=255&Da.length,ll[17*cl+14]=Da.length>>8&255,ll[17*cl+15]=Da.length>>16&255,ll[17*cl+16]=Da.length>>24&255}return Da};var Nu={getHeader:function(F){return __async(this,null,(function*(){const Da=yield F.getBytes(0,512e3),ll=new DataView(Da.data),cl=ll.getUint32(4,!0),hl=ll.getUint16(8,!0),dl=new TextDecoder("utf-8"),pl=JSON.parse(dl.decode(new DataView(Da.data,10,cl)));let fl=0;"gzip"===pl.compression&&(fl=2);let Al=0;"minzoom"in pl&&(Al=+pl.minzoom);let bl=0;"maxzoom"in pl&&(bl=+pl.maxzoom);let kl=0,Dl=0,Wl=0,Ql=-180,wc=-85,Sc=180,eu=85;if(pl.bounds){const F=pl.bounds.split(",");Ql=+F[0],wc=+F[1],Sc=+F[2],eu=+F[3]}if(pl.center){const F=pl.center.split(",");kl=+F[0],Dl=+F[1],Wl=+F[2]}return{specVersion:ll.getUint16(2,!0),rootDirectoryOffset:10+cl,rootDirectoryLength:17*hl,jsonMetadataOffset:10,jsonMetadataLength:cl,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:fl,tileType:1,minZoom:Al,maxZoom:bl,minLon:Ql,minLat:wc,maxLon:Sc,maxLat:eu,centerZoom:Wl,centerLon:kl,centerLat:Dl,etag:Da.etag}}))},getZxy:function(F,Da,ll,cl,hl,dl,pl){return __async(this,null,(function*(){let fl=yield ll.getArrayBuffer(Da,F.rootDirectoryOffset,F.rootDirectoryLength,F);1===F.specVersion&&(fl=sortDir(fl));const Al=queryTile(new DataView(fl),cl,hl,dl);if(Al){let F=(yield Da.getBytes(Al.offset,Al.length,pl)).data;const ll=new DataView(F);return 31===ll.getUint8(0)&&139===ll.getUint8(1)&&(F=decompressSync(new Uint8Array(F))),{data:F}}const bl=((F,Da)=>{if(F.byteLength<17)return null;const ll=F.byteLength/17,cl=parseEntry(F,ll-1);if(cl.isDir){const F=cl.z,ll=Da.z-F;return{z:F,x:Math.trunc(Da.x/(1<<ll)),y:Math.trunc(Da.y/(1<<ll))}}return null})(new DataView(fl),{z:cl,x:hl,y:dl});if(bl){const Al=((F,Da,ll,cl)=>{const hl=queryView(F,128|Da,ll,cl);return hl?{z:Da,x:ll,y:cl,offset:hl[0],length:hl[1],isDir:!0}:null})(new DataView(fl),bl.z,bl.x,bl.y);if(Al){let fl=yield ll.getArrayBuffer(Da,Al.offset,Al.length,F);1===F.specVersion&&(fl=sortDir(fl));const bl=queryTile(new DataView(fl),cl,hl,dl);if(bl){let F=(yield Da.getBytes(bl.offset,bl.length,pl)).data;const ll=new DataView(F);return 31===ll.getUint8(0)&&139===ll.getUint8(1)&&(F=decompressSync(new Uint8Array(F))),{data:F}}}}}))}},qu=class{constructor(F){var Da;this.tilev4=(F,Da)=>__async(this,null,(function*(){if("json"===F.type){const Da=F.url.substr(10);let ll=this.tiles.get(Da);if(ll||(ll=new id(Da),this.tiles.set(Da,ll)),this.metadata)return{data:yield ll.getTileJson(F.url)};const cl=yield ll.getHeader();return{data:{tiles:[`${F.url}/{z}/{x}/{y}`],minzoom:cl.minZoom,maxzoom:cl.maxZoom,bounds:[cl.minLon,cl.minLat,cl.maxLon,cl.maxLat]}}}const ll=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),cl=F.url.match(ll);if(!cl)throw new Error("Invalid PMTiles protocol URL");const hl=cl[1];let dl=this.tiles.get(hl);dl||(dl=new id(hl),this.tiles.set(hl,dl));const pl=cl[2],fl=cl[3],Al=cl[4],bl=yield dl.getHeader(),kl=yield null==dl?void 0:dl.getZxy(+pl,+fl,+Al,Da.signal);return kl?{data:new Uint8Array(kl.data),cacheControl:kl.cacheControl,expires:kl.expires}:1===bl.tileType?{data:new Uint8Array}:{data:null}})),this.tile=(Da=this.tilev4,(F,ll)=>{if(ll instanceof AbortController)return Da(F,ll);const cl=new AbortController;return Da(F,cl).then((F=>ll(void 0,F.data,F.cacheControl||"",F.expires||"")),(F=>ll(F))).catch((F=>ll(F))),{cancel:()=>cl.abort()}}),this.tiles=new Map,this.metadata=(null==F?void 0:F.metadata)||!1}add(F){this.tiles.set(F.source.getKey(),F)}get(F){return this.tiles.get(F)}};function toNum(F,Da){return 4294967296*(Da>>>0)+(F>>>0)}function readVarint(F){const Da=F.buf;let ll=Da[F.pos++],cl=127&ll;return ll<128?cl:(ll=Da[F.pos++],cl|=(127&ll)<<7,ll<128?cl:(ll=Da[F.pos++],cl|=(127&ll)<<14,ll<128?cl:(ll=Da[F.pos++],cl|=(127&ll)<<21,ll<128?cl:(ll=Da[F.pos],cl|=(15&ll)<<28,function(F,Da){const ll=Da.buf;let cl=ll[Da.pos++],hl=(112&cl)>>4;if(cl<128)return toNum(F,hl);if(cl=ll[Da.pos++],hl|=(127&cl)<<3,cl<128)return toNum(F,hl);if(cl=ll[Da.pos++],hl|=(127&cl)<<10,cl<128)return toNum(F,hl);if(cl=ll[Da.pos++],hl|=(127&cl)<<17,cl<128)return toNum(F,hl);if(cl=ll[Da.pos++],hl|=(127&cl)<<24,cl<128)return toNum(F,hl);if(cl=ll[Da.pos++],hl|=(1&cl)<<31,cl<128)return toNum(F,hl);throw new Error("Expected varint not more than 10 bytes")}(cl,F)))))}function rotate(F,Da,ll,cl){if(0===cl){1===ll&&(Da[0]=F-1-Da[0],Da[1]=F-1-Da[1]);const cl=Da[0];Da[0]=Da[1],Da[1]=cl}}var ih=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function defaultDecompress(F,Da){return __async(this,null,(function*(){if(1===Da||0===Da)return F;if(2===Da){if("undefined"===typeof globalThis.DecompressionStream)return decompressSync(new Uint8Array(F));const Da=new Response(F).body;if(!Da)throw Error("Failed to read response stream");const ll=Da.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(ll).arrayBuffer()}throw Error("Compression method not supported")}))}function findTile(F,Da){let ll=0,cl=F.length-1;for(;ll<=cl;){const hl=cl+ll>>1,dl=Da-F[hl].tileId;if(dl>0)ll=hl+1;else{if(!(dl<0))return F[hl];cl=hl-1}}if(cl>=0){if(0===F[cl].runLength)return F[cl];if(Da-F[cl].tileId<F[cl].runLength)return F[cl]}return null}var gh=class{constructor(F,Da){void 0===Da&&(Da=new Headers),this.url=F,this.customHeaders=Da,this.mustReload=!1;let ll="";"navigator"in globalThis&&(ll=globalThis.navigator.userAgent||"");const cl=ll.indexOf("Windows")>-1,hl=/Chrome|Chromium|Edg|OPR|Brave/.test(ll);this.chromeWindowsNoCache=!1,cl&&hl&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(F){this.customHeaders=F}getBytes(F,Da,ll,cl){return __async(this,null,(function*(){let hl,dl;ll?dl=ll:(hl=new AbortController,dl=hl.signal);const pl=new Headers(this.customHeaders);let fl;pl.set("range",`bytes=${F}-${F+Da-1}`),this.mustReload?fl="reload":this.chromeWindowsNoCache&&(fl="no-store");let Al=yield fetch(this.url,{signal:dl,cache:fl,headers:pl});if(0===F&&416===Al.status){const F=Al.headers.get("Content-Range");if(!F||!F.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const Da=+F.substr(8);Al=yield fetch(this.url,{signal:dl,cache:"reload",headers:{range:"bytes=0-"+(Da-1)}})}let bl=Al.headers.get("Etag");if((null==bl?void 0:bl.startsWith("W/"))&&(bl=null),416===Al.status||cl&&bl&&bl!==cl)throw this.mustReload=!0,new ed(`Server returned non-matching ETag ${cl} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(Al.status>=300)throw Error(`Bad response code: ${Al.status}`);const kl=Al.headers.get("Content-Length");if(200===Al.status&&(!kl||+kl>Da))throw hl&&hl.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield Al.arrayBuffer(),etag:bl||void 0,cacheControl:Al.headers.get("Cache-Control")||void 0,expires:Al.headers.get("Expires")||void 0}}))}};function getUint64(F,Da){const ll=F.getUint32(Da+4,!0),hl=F.getUint32(Da+0,!0);return ll*cl(2,32)+hl}function deserializeIndex(F){const Da={buf:new Uint8Array(F),pos:0},ll=readVarint(Da),cl=[];let hl=0;for(let dl=0;dl<ll;dl++){const F=readVarint(Da);cl.push({tileId:hl+F,offset:0,length:0,runLength:1}),hl+=F}for(let dl=0;dl<ll;dl++)cl[dl].runLength=readVarint(Da);for(let dl=0;dl<ll;dl++)cl[dl].length=readVarint(Da);for(let dl=0;dl<ll;dl++){const F=readVarint(Da);cl[dl].offset=0===F&&dl>0?cl[dl-1].offset+cl[dl-1].length:F-1}return cl}var ed=class extends Error{};function getHeaderAndRoot(F,Da){return __async(this,null,(function*(){const ll=yield F.getBytes(0,16384);if(19792!==new DataView(ll.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");if(function(F){const Da=new DataView(F);return 2===Da.getUint16(2,!0)?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):1===Da.getUint16(2,!0)?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}(ll.data)<3)return[yield Nu.getHeader(F)];const cl=function(F,Da){const ll=new DataView(F),cl=ll.getUint8(7);if(cl>3)throw Error(`Archive is spec version ${cl} but this library supports up to spec version 3`);return{specVersion:cl,rootDirectoryOffset:getUint64(ll,8),rootDirectoryLength:getUint64(ll,16),jsonMetadataOffset:getUint64(ll,24),jsonMetadataLength:getUint64(ll,32),leafDirectoryOffset:getUint64(ll,40),leafDirectoryLength:getUint64(ll,48),tileDataOffset:getUint64(ll,56),tileDataLength:getUint64(ll,64),numAddressedTiles:getUint64(ll,72),numTileEntries:getUint64(ll,80),numTileContents:getUint64(ll,88),clustered:1===ll.getUint8(96),internalCompression:ll.getUint8(97),tileCompression:ll.getUint8(98),tileType:ll.getUint8(99),minZoom:ll.getUint8(100),maxZoom:ll.getUint8(101),minLon:ll.getInt32(102,!0)/1e7,minLat:ll.getInt32(106,!0)/1e7,maxLon:ll.getInt32(110,!0)/1e7,maxLat:ll.getInt32(114,!0)/1e7,centerZoom:ll.getUint8(118),centerLon:ll.getInt32(119,!0)/1e7,centerLat:ll.getInt32(123,!0)/1e7,etag:Da}}(ll.data.slice(0,127),ll.etag),hl=ll.data.slice(cl.rootDirectoryOffset,cl.rootDirectoryOffset+cl.rootDirectoryLength),dl=`${F.getKey()}|${cl.etag||""}|${cl.rootDirectoryOffset}|${cl.rootDirectoryLength}`,pl=deserializeIndex(yield Da(hl,cl.internalCompression));return[cl,[dl,pl.length,pl]]}))}function getDirectory(F,Da,ll,cl,hl){return __async(this,null,(function*(){const dl=yield F.getBytes(ll,cl,void 0,hl.etag),pl=deserializeIndex(yield Da(dl.data,hl.internalCompression));if(0===pl.length)throw new Error("Empty directory is invalid");return pl}))}var td=class{constructor(F,Da,ll){void 0===F&&(F=100),void 0===Da&&(Da=!0),void 0===ll&&(ll=defaultDecompress),this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=F,this.counter=1,this.decompress=ll}getHeader(F){return __async(this,null,(function*(){const Da=F.getKey(),ll=this.cache.get(Da);if(ll){ll.lastUsed=this.counter++;return yield ll.data}const cl=new Promise(((Da,ll)=>{getHeaderAndRoot(F,this.decompress).then((F=>{F[1]&&this.cache.set(F[1][0],{lastUsed:this.counter++,data:Promise.resolve(F[1][2])}),Da(F[0]),this.prune()})).catch((F=>{ll(F)}))}));return this.cache.set(Da,{lastUsed:this.counter++,data:cl}),cl}))}getDirectory(F,Da,ll,cl){return __async(this,null,(function*(){const hl=`${F.getKey()}|${cl.etag||""}|${Da}|${ll}`,dl=this.cache.get(hl);if(dl){dl.lastUsed=this.counter++;return yield dl.data}const pl=new Promise(((hl,dl)=>{getDirectory(F,this.decompress,Da,ll,cl).then((F=>{hl(F),this.prune()})).catch((F=>{dl(F)}))}));return this.cache.set(hl,{lastUsed:this.counter++,data:pl}),pl}))}getArrayBuffer(F,Da,ll,cl){return __async(this,null,(function*(){const hl=`${F.getKey()}|${cl.etag||""}|${Da}|${ll}`,dl=this.cache.get(hl);if(dl){dl.lastUsed=this.counter++;return yield dl.data}const pl=new Promise(((dl,pl)=>{F.getBytes(Da,ll,void 0,cl.etag).then((F=>{dl(F.data),this.cache.has(hl),this.prune()})).catch((F=>{pl(F)}))}));return this.cache.set(hl,{lastUsed:this.counter++,data:pl}),pl}))}prune(){if(this.cache.size>=this.maxCacheEntries){let F,Da=1/0;this.cache.forEach(((ll,cl)=>{ll.lastUsed<Da&&(Da=ll.lastUsed,F=cl)})),F&&this.cache.delete(F)}}invalidate(F){return __async(this,null,(function*(){const Da=F.getKey();if(this.invalidations.get(Da))return yield this.invalidations.get(Da);this.cache.delete(F.getKey());const ll=new Promise(((ll,cl)=>{this.getHeader(F).then((F=>{ll(),this.invalidations.delete(Da)})).catch((F=>{cl(F)}))}));this.invalidations.set(Da,ll)}))}},id=class{constructor(F,Da,ll){this.source="string"===typeof F?new gh(F):F,this.decompress=ll||defaultDecompress,this.cache=Da||new td}getHeader(){return __async(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(F,Da,ll,hl){return __async(this,null,(function*(){const dl=function(F,Da,ll){if(F>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(Da>cl(2,F)-1||ll>cl(2,F)-1)throw Error("tile x/y outside zoom level bounds");const hl=ih[F];let dl=0,pl=0,fl=0;const Al=[Da,ll];let bl=cl(2,F)/2;for(;bl>0;)dl=(Al[0]&bl)>0?1:0,pl=(Al[1]&bl)>0?1:0,fl+=bl*bl*(3*dl^pl),rotate(bl,Al,dl,pl),bl/=2;return hl+fl}(F,Da,ll),pl=yield this.cache.getHeader(this.source);if(pl.specVersion<3)return Nu.getZxy(pl,this.source,this.cache,F,Da,ll,hl);if(F<pl.minZoom||F>pl.maxZoom)return;let fl=pl.rootDirectoryOffset,Al=pl.rootDirectoryLength;for(let F=0;F<=3;F++){const F=findTile(yield this.cache.getDirectory(this.source,fl,Al,pl),dl);if(!F)return;if(F.runLength>0){const Da=yield this.source.getBytes(pl.tileDataOffset+F.offset,F.length,hl,pl.etag);return{data:yield this.decompress(Da.data,pl.tileCompression),cacheControl:Da.cacheControl,expires:Da.expires}}fl=pl.leafDirectoryOffset+F.offset,Al=F.length}throw Error("Maximum directory depth exceeded")}))}getZxy(F,Da,ll,cl){return __async(this,null,(function*(){try{return yield this.getZxyAttempt(F,Da,ll,cl)}catch(nd){if(nd instanceof ed)return this.cache.invalidate(this.source),yield this.getZxyAttempt(F,Da,ll,cl);throw nd}}))}getMetadataAttempt(){return __async(this,null,(function*(){const F=yield this.cache.getHeader(this.source),Da=yield this.source.getBytes(F.jsonMetadataOffset,F.jsonMetadataLength,void 0,F.etag),ll=yield this.decompress(Da.data,F.internalCompression),cl=new TextDecoder("utf-8");return JSON.parse(cl.decode(ll))}))}getMetadata(){return __async(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(nd){if(nd instanceof ed)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw nd}}))}getTileJson(F){return __async(this,null,(function*(){const Da=yield this.getHeader(),ll=yield this.getMetadata(),cl=1===(hl=Da.tileType)?".mvt":2===hl?".png":3===hl?".jpg":4===hl?".webp":5===hl?".avif":"";var hl;return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${F}/{z}/{x}/{y}${cl}`],vector_layers:ll.vector_layers,attribution:ll.attribution,description:ll.description,name:ll.name,version:ll.version,bounds:[Da.minLon,Da.minLat,Da.maxLon,Da.maxLat],center:[Da.centerLon,Da.centerLat,Da.centerZoom],minzoom:Da.minZoom,maxzoom:Da.maxZoom}}))}}},9408:(F,Da,ll)=>{"use strict";ll.d(Da,{$_I:()=>cd,B69:()=>Object3D,DXC:()=>LineSegments,Gu$:()=>SphereGeometry,I9Y:()=>Vector2,JeP:()=>WebGLRenderer,NRn:()=>Box3,O9p:()=>Euler,PPD:()=>Frustum,PTz:()=>Quaternion,Pq0:()=>Vector3,V9B:()=>MeshBasicMaterial,XJ7:()=>WireframeGeometry,YJl:()=>Group,Z58:()=>Scene,Zr2:()=>Ip,aHM:()=>Loader,cj9:()=>$p,eaF:()=>Mesh,gPd:()=>Texture,k6q:()=>od,kn4:()=>Matrix4,l2R:()=>Xg,nWS:()=>WebGLRenderTarget,ppV:()=>sm,tBo:()=>Raycaster,ubm:()=>PerspectiveCamera});
/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const cl="168",hl=0,dl=1,pl=2,fl=100,Al=101,bl=102,kl=200,Dl=201,Wl=202,Ql=203,wc=204,Sc=205,eu=206,iu=207,su=208,cu=209,uu=210,hu=211,Lu=212,zu=213,Du=214,Nu=301,qu=302,ih=303,gh=304,ed=306,td=1e3,id=1001,nd=1002,rd=1003,ad=1004,sd=1005,od=1006,ld=1007,cd=1008,ud=1009,hd=1010,dd=1011,pd=1012,md=1013,fd=1014,gd=1015,Ad=1016,yd=1017,vd=1018,_d=1020,xd=35902,bd=1023,wd=1026,Ed=1027,Md=1028,Sd=1029,kd=1031,Td=1033,Id=33776,Cd=33777,Ld=33778,zd=33779,Pd=35840,Dd=35841,Rd=35842,Nd=35843,Ud=36196,Bd=37492,Od=37496,Fd=37808,jd=37809,Vd=37810,Gd=37811,qd=37812,Hd=37813,Zd=37814,Wd=37815,Kd=37816,Qd=37817,Xd=37818,Yd=37819,Jd=37820,$d=37821,lp=36492,mp=36494,gp=36495,Ap=36284,vp=36285,_p=36286,xp=2300,bp=2301,wp=2302,Ep=2400,Mp=2401,Sp=2402,kp="",Tp="srgb",Ip="srgb-linear",Cp="display-p3",Lp="display-p3-linear",zp="linear",Pp="srgb",Dp="rec709",Rp="p3",Np=7680,Up=512,Bp=513,Op=514,Fp=515,jp=516,Vp=517,Gp=518,qp=519,Hp=35044,Zp="300 es",Wp=2e3,Kp=2001;class EventDispatcher{addEventListener(F,Da){void 0===this._listeners&&(this._listeners={});const ll=this._listeners;void 0===ll[F]&&(ll[F]=[]),-1===ll[F].indexOf(Da)&&ll[F].push(Da)}hasEventListener(F,Da){if(void 0===this._listeners)return!1;const ll=this._listeners;return void 0!==ll[F]&&-1!==ll[F].indexOf(Da)}removeEventListener(F,Da){if(void 0===this._listeners)return;const ll=this._listeners[F];if(void 0!==ll){const F=ll.indexOf(Da);-1!==F&&ll.splice(F,1)}}dispatchEvent(F){if(void 0===this._listeners)return;const Da=this._listeners[F.type];if(void 0!==Da){F.target=this;const ll=Da.slice(0);for(let Da=0,cl=ll.length;Da<cl;Da++)ll[Da].call(this,F);F.target=null}}}const Qp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Xp=1234567;const Yp=Math.PI/180,Jp=180/Math.PI;function generateUUID(){const F=4294967295*Math.random()|0,Da=4294967295*Math.random()|0,ll=4294967295*Math.random()|0,cl=4294967295*Math.random()|0;return(Qp[255&F]+Qp[F>>8&255]+Qp[F>>16&255]+Qp[F>>24&255]+"-"+Qp[255&Da]+Qp[Da>>8&255]+"-"+Qp[Da>>16&15|64]+Qp[Da>>24&255]+"-"+Qp[63&ll|128]+Qp[ll>>8&255]+"-"+Qp[ll>>16&255]+Qp[ll>>24&255]+Qp[255&cl]+Qp[cl>>8&255]+Qp[cl>>16&255]+Qp[cl>>24&255]).toLowerCase()}function clamp(F,Da,ll){return Math.max(Da,Math.min(ll,F))}function euclideanModulo(F,Da){return(F%Da+Da)%Da}function lerp(F,Da,ll){return(1-ll)*F+ll*Da}function denormalize(F,Da){switch(Da.constructor){case Float32Array:return F;case Uint32Array:return F/4294967295;case Uint16Array:return F/65535;case Uint8Array:return F/255;case Int32Array:return Math.max(F/2147483647,-1);case Int16Array:return Math.max(F/32767,-1);case Int8Array:return Math.max(F/127,-1);default:throw new Error("Invalid component type.")}}function normalize(F,Da){switch(Da.constructor){case Float32Array:return F;case Uint32Array:return Math.round(4294967295*F);case Uint16Array:return Math.round(65535*F);case Uint8Array:return Math.round(255*F);case Int32Array:return Math.round(2147483647*F);case Int16Array:return Math.round(32767*F);case Int8Array:return Math.round(127*F);default:throw new Error("Invalid component type.")}}const $p={DEG2RAD:Yp,RAD2DEG:Jp,generateUUID:generateUUID,clamp:clamp,euclideanModulo:euclideanModulo,mapLinear:function(F,Da,ll,cl,hl){return cl+(F-Da)*(hl-cl)/(ll-Da)},inverseLerp:function(F,Da,ll){return F!==Da?(ll-F)/(Da-F):0},lerp:lerp,damp:function(F,Da,ll,cl){return lerp(F,Da,1-Math.exp(-ll*cl))},pingpong:function(F,Da){return void 0===Da&&(Da=1),Da-Math.abs(euclideanModulo(F,2*Da)-Da)},smoothstep:function(F,Da,ll){return F<=Da?0:F>=ll?1:(F=(F-Da)/(ll-Da))*F*(3-2*F)},smootherstep:function(F,Da,ll){return F<=Da?0:F>=ll?1:(F=(F-Da)/(ll-Da))*F*F*(F*(6*F-15)+10)},randInt:function(F,Da){return F+Math.floor(Math.random()*(Da-F+1))},randFloat:function(F,Da){return F+Math.random()*(Da-F)},randFloatSpread:function(F){return F*(.5-Math.random())},seededRandom:function(F){void 0!==F&&(Xp=F);let Da=Xp+=1831565813;return Da=Math.imul(Da^Da>>>15,1|Da),Da^=Da+Math.imul(Da^Da>>>7,61|Da),((Da^Da>>>14)>>>0)/4294967296},degToRad:function(F){return F*Yp},radToDeg:function(F){return F*Jp},isPowerOfTwo:function(F){return 0===(F&F-1)&&0!==F},ceilPowerOfTwo:function(F){return Math.pow(2,Math.ceil(Math.log(F)/Math.LN2))},floorPowerOfTwo:function(F){return Math.pow(2,Math.floor(Math.log(F)/Math.LN2))},setQuaternionFromProperEuler:function(F,Da,ll,cl,hl){const dl=Math.cos,pl=Math.sin,fl=dl(ll/2),Al=pl(ll/2),bl=dl((Da+cl)/2),kl=pl((Da+cl)/2),Dl=dl((Da-cl)/2),Wl=pl((Da-cl)/2),Ql=dl((cl-Da)/2),wc=pl((cl-Da)/2);switch(hl){case"XYX":F.set(fl*kl,Al*Dl,Al*Wl,fl*bl);break;case"YZY":F.set(Al*Wl,fl*kl,Al*Dl,fl*bl);break;case"ZXZ":F.set(Al*Dl,Al*Wl,fl*kl,fl*bl);break;case"XZX":F.set(fl*kl,Al*wc,Al*Ql,fl*bl);break;case"YXY":F.set(Al*Ql,fl*kl,Al*wc,fl*bl);break;case"ZYZ":F.set(Al*wc,Al*Ql,fl*kl,fl*bl);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+hl)}},normalize:normalize,denormalize:denormalize};class Vector2{constructor(F,Da){void 0===F&&(F=0),void 0===Da&&(Da=0),Vector2.prototype.isVector2=!0,this.x=F,this.y=Da}get width(){return this.x}set width(F){this.x=F}get height(){return this.y}set height(F){this.y=F}set(F,Da){return this.x=F,this.y=Da,this}setScalar(F){return this.x=F,this.y=F,this}setX(F){return this.x=F,this}setY(F){return this.y=F,this}setComponent(F,Da){switch(F){case 0:this.x=Da;break;case 1:this.y=Da;break;default:throw new Error("index is out of range: "+F)}return this}getComponent(F){switch(F){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+F)}}clone(){return new this.constructor(this.x,this.y)}copy(F){return this.x=F.x,this.y=F.y,this}add(F){return this.x+=F.x,this.y+=F.y,this}addScalar(F){return this.x+=F,this.y+=F,this}addVectors(F,Da){return this.x=F.x+Da.x,this.y=F.y+Da.y,this}addScaledVector(F,Da){return this.x+=F.x*Da,this.y+=F.y*Da,this}sub(F){return this.x-=F.x,this.y-=F.y,this}subScalar(F){return this.x-=F,this.y-=F,this}subVectors(F,Da){return this.x=F.x-Da.x,this.y=F.y-Da.y,this}multiply(F){return this.x*=F.x,this.y*=F.y,this}multiplyScalar(F){return this.x*=F,this.y*=F,this}divide(F){return this.x/=F.x,this.y/=F.y,this}divideScalar(F){return this.multiplyScalar(1/F)}applyMatrix3(F){const Da=this.x,ll=this.y,cl=F.elements;return this.x=cl[0]*Da+cl[3]*ll+cl[6],this.y=cl[1]*Da+cl[4]*ll+cl[7],this}min(F){return this.x=Math.min(this.x,F.x),this.y=Math.min(this.y,F.y),this}max(F){return this.x=Math.max(this.x,F.x),this.y=Math.max(this.y,F.y),this}clamp(F,Da){return this.x=Math.max(F.x,Math.min(Da.x,this.x)),this.y=Math.max(F.y,Math.min(Da.y,this.y)),this}clampScalar(F,Da){return this.x=Math.max(F,Math.min(Da,this.x)),this.y=Math.max(F,Math.min(Da,this.y)),this}clampLength(F,Da){const ll=this.length();return this.divideScalar(ll||1).multiplyScalar(Math.max(F,Math.min(Da,ll)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(F){return this.x*F.x+this.y*F.y}cross(F){return this.x*F.y-this.y*F.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(F){const Da=Math.sqrt(this.lengthSq()*F.lengthSq());if(0===Da)return Math.PI/2;const ll=this.dot(F)/Da;return Math.acos(clamp(ll,-1,1))}distanceTo(F){return Math.sqrt(this.distanceToSquared(F))}distanceToSquared(F){const Da=this.x-F.x,ll=this.y-F.y;return Da*Da+ll*ll}manhattanDistanceTo(F){return Math.abs(this.x-F.x)+Math.abs(this.y-F.y)}setLength(F){return this.normalize().multiplyScalar(F)}lerp(F,Da){return this.x+=(F.x-this.x)*Da,this.y+=(F.y-this.y)*Da,this}lerpVectors(F,Da,ll){return this.x=F.x+(Da.x-F.x)*ll,this.y=F.y+(Da.y-F.y)*ll,this}equals(F){return F.x===this.x&&F.y===this.y}fromArray(F,Da){return void 0===Da&&(Da=0),this.x=F[Da],this.y=F[Da+1],this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this.x,F[Da+1]=this.y,F}fromBufferAttribute(F,Da){return this.x=F.getX(Da),this.y=F.getY(Da),this}rotateAround(F,Da){const ll=Math.cos(Da),cl=Math.sin(Da),hl=this.x-F.x,dl=this.y-F.y;return this.x=hl*ll-dl*cl+F.x,this.y=hl*cl+dl*ll+F.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(F,Da,ll,cl,hl,dl,pl,fl,Al){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==F&&this.set(F,Da,ll,cl,hl,dl,pl,fl,Al)}set(F,Da,ll,cl,hl,dl,pl,fl,Al){const bl=this.elements;return bl[0]=F,bl[1]=cl,bl[2]=pl,bl[3]=Da,bl[4]=hl,bl[5]=fl,bl[6]=ll,bl[7]=dl,bl[8]=Al,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(F){const Da=this.elements,ll=F.elements;return Da[0]=ll[0],Da[1]=ll[1],Da[2]=ll[2],Da[3]=ll[3],Da[4]=ll[4],Da[5]=ll[5],Da[6]=ll[6],Da[7]=ll[7],Da[8]=ll[8],this}extractBasis(F,Da,ll){return F.setFromMatrix3Column(this,0),Da.setFromMatrix3Column(this,1),ll.setFromMatrix3Column(this,2),this}setFromMatrix4(F){const Da=F.elements;return this.set(Da[0],Da[4],Da[8],Da[1],Da[5],Da[9],Da[2],Da[6],Da[10]),this}multiply(F){return this.multiplyMatrices(this,F)}premultiply(F){return this.multiplyMatrices(F,this)}multiplyMatrices(F,Da){const ll=F.elements,cl=Da.elements,hl=this.elements,dl=ll[0],pl=ll[3],fl=ll[6],Al=ll[1],bl=ll[4],kl=ll[7],Dl=ll[2],Wl=ll[5],Ql=ll[8],wc=cl[0],Sc=cl[3],eu=cl[6],iu=cl[1],su=cl[4],cu=cl[7],uu=cl[2],hu=cl[5],Lu=cl[8];return hl[0]=dl*wc+pl*iu+fl*uu,hl[3]=dl*Sc+pl*su+fl*hu,hl[6]=dl*eu+pl*cu+fl*Lu,hl[1]=Al*wc+bl*iu+kl*uu,hl[4]=Al*Sc+bl*su+kl*hu,hl[7]=Al*eu+bl*cu+kl*Lu,hl[2]=Dl*wc+Wl*iu+Ql*uu,hl[5]=Dl*Sc+Wl*su+Ql*hu,hl[8]=Dl*eu+Wl*cu+Ql*Lu,this}multiplyScalar(F){const Da=this.elements;return Da[0]*=F,Da[3]*=F,Da[6]*=F,Da[1]*=F,Da[4]*=F,Da[7]*=F,Da[2]*=F,Da[5]*=F,Da[8]*=F,this}determinant(){const F=this.elements,Da=F[0],ll=F[1],cl=F[2],hl=F[3],dl=F[4],pl=F[5],fl=F[6],Al=F[7],bl=F[8];return Da*dl*bl-Da*pl*Al-ll*hl*bl+ll*pl*fl+cl*hl*Al-cl*dl*fl}invert(){const F=this.elements,Da=F[0],ll=F[1],cl=F[2],hl=F[3],dl=F[4],pl=F[5],fl=F[6],Al=F[7],bl=F[8],kl=bl*dl-pl*Al,Dl=pl*fl-bl*hl,Wl=Al*hl-dl*fl,Ql=Da*kl+ll*Dl+cl*Wl;if(0===Ql)return this.set(0,0,0,0,0,0,0,0,0);const wc=1/Ql;return F[0]=kl*wc,F[1]=(cl*Al-bl*ll)*wc,F[2]=(pl*ll-cl*dl)*wc,F[3]=Dl*wc,F[4]=(bl*Da-cl*fl)*wc,F[5]=(cl*hl-pl*Da)*wc,F[6]=Wl*wc,F[7]=(ll*fl-Al*Da)*wc,F[8]=(dl*Da-ll*hl)*wc,this}transpose(){let F;const Da=this.elements;return F=Da[1],Da[1]=Da[3],Da[3]=F,F=Da[2],Da[2]=Da[6],Da[6]=F,F=Da[5],Da[5]=Da[7],Da[7]=F,this}getNormalMatrix(F){return this.setFromMatrix4(F).invert().transpose()}transposeIntoArray(F){const Da=this.elements;return F[0]=Da[0],F[1]=Da[3],F[2]=Da[6],F[3]=Da[1],F[4]=Da[4],F[5]=Da[7],F[6]=Da[2],F[7]=Da[5],F[8]=Da[8],this}setUvTransform(F,Da,ll,cl,hl,dl,pl){const fl=Math.cos(hl),Al=Math.sin(hl);return this.set(ll*fl,ll*Al,-ll*(fl*dl+Al*pl)+dl+F,-cl*Al,cl*fl,-cl*(-Al*dl+fl*pl)+pl+Da,0,0,1),this}scale(F,Da){return this.premultiply(em.makeScale(F,Da)),this}rotate(F){return this.premultiply(em.makeRotation(-F)),this}translate(F,Da){return this.premultiply(em.makeTranslation(F,Da)),this}makeTranslation(F,Da){return F.isVector2?this.set(1,0,F.x,0,1,F.y,0,0,1):this.set(1,0,F,0,1,Da,0,0,1),this}makeRotation(F){const Da=Math.cos(F),ll=Math.sin(F);return this.set(Da,-ll,0,ll,Da,0,0,0,1),this}makeScale(F,Da){return this.set(F,0,0,0,Da,0,0,0,1),this}equals(F){const Da=this.elements,ll=F.elements;for(let cl=0;cl<9;cl++)if(Da[cl]!==ll[cl])return!1;return!0}fromArray(F,Da){void 0===Da&&(Da=0);for(let ll=0;ll<9;ll++)this.elements[ll]=F[ll+Da];return this}toArray(F,Da){void 0===F&&(F=[]),void 0===Da&&(Da=0);const ll=this.elements;return F[Da]=ll[0],F[Da+1]=ll[1],F[Da+2]=ll[2],F[Da+3]=ll[3],F[Da+4]=ll[4],F[Da+5]=ll[5],F[Da+6]=ll[6],F[Da+7]=ll[7],F[Da+8]=ll[8],F}clone(){return(new this.constructor).fromArray(this.elements)}}const em=new Matrix3;function arrayNeedsUint32(F){for(let Da=F.length-1;Da>=0;--Da)if(F[Da]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function createElementNS(F){return document.createElementNS("http://www.w3.org/1999/xhtml",F)}function createCanvasElement(){const F=createElementNS("canvas");return F.style.display="block",F}const tm={};function warnOnce(F){F in tm||(tm[F]=!0,console.warn(F))}const im=(new Matrix3).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),nm=(new Matrix3).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),rm={[Ip]:{transfer:zp,primaries:Dp,luminanceCoefficients:[.2126,.7152,.0722],toReference:F=>F,fromReference:F=>F},[Tp]:{transfer:Pp,primaries:Dp,luminanceCoefficients:[.2126,.7152,.0722],toReference:F=>F.convertSRGBToLinear(),fromReference:F=>F.convertLinearToSRGB()},[Lp]:{transfer:zp,primaries:Rp,luminanceCoefficients:[.2289,.6917,.0793],toReference:F=>F.applyMatrix3(nm),fromReference:F=>F.applyMatrix3(im)},[Cp]:{transfer:Pp,primaries:Rp,luminanceCoefficients:[.2289,.6917,.0793],toReference:F=>F.convertSRGBToLinear().applyMatrix3(nm),fromReference:F=>F.applyMatrix3(im).convertLinearToSRGB()}},am=new Set([Ip,Lp]),sm={enabled:!0,_workingColorSpace:Ip,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(F){if(!am.has(F))throw new Error(`Unsupported working color space, "${F}".`);this._workingColorSpace=F},convert:function(F,Da,ll){if(!1===this.enabled||Da===ll||!Da||!ll)return F;const cl=rm[Da].toReference;return(0,rm[ll].fromReference)(cl(F))},fromWorkingColorSpace:function(F,Da){return this.convert(F,this._workingColorSpace,Da)},toWorkingColorSpace:function(F,Da){return this.convert(F,Da,this._workingColorSpace)},getPrimaries:function(F){return rm[F].primaries},getTransfer:function(F){return F===kp?zp:rm[F].transfer},getLuminanceCoefficients:function(F,Da){return void 0===Da&&(Da=this._workingColorSpace),F.fromArray(rm[Da].luminanceCoefficients)}};function SRGBToLinear(F){return F<.04045?.0773993808*F:Math.pow(.9478672986*F+.0521327014,2.4)}function LinearToSRGB(F){return F<.0031308?12.92*F:1.055*Math.pow(F,.41666)-.055}let om;class ImageUtils{static getDataURL(F){if(/^data:/i.test(F.src))return F.src;if("undefined"===typeof HTMLCanvasElement)return F.src;let Da;if(F instanceof HTMLCanvasElement)Da=F;else{void 0===om&&(om=createElementNS("canvas")),om.width=F.width,om.height=F.height;const ll=om.getContext("2d");F instanceof ImageData?ll.putImageData(F,0,0):ll.drawImage(F,0,0,F.width,F.height),Da=om}return Da.width>2048||Da.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",F),Da.toDataURL("image/jpeg",.6)):Da.toDataURL("image/png")}static sRGBToLinear(F){if("undefined"!==typeof HTMLImageElement&&F instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&F instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&F instanceof ImageBitmap){const Da=createElementNS("canvas");Da.width=F.width,Da.height=F.height;const ll=Da.getContext("2d");ll.drawImage(F,0,0,F.width,F.height);const cl=ll.getImageData(0,0,F.width,F.height),hl=cl.data;for(let F=0;F<hl.length;F++)hl[F]=255*SRGBToLinear(hl[F]/255);return ll.putImageData(cl,0,0),Da}if(F.data){const Da=F.data.slice(0);for(let F=0;F<Da.length;F++)Da instanceof Uint8Array||Da instanceof Uint8ClampedArray?Da[F]=Math.floor(255*SRGBToLinear(Da[F]/255)):Da[F]=SRGBToLinear(Da[F]);return{data:Da,width:F.width,height:F.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),F}}let lm=0;class Source{constructor(F){void 0===F&&(F=null),this.isSource=!0,Object.defineProperty(this,"id",{value:lm++}),this.uuid=generateUUID(),this.data=F,this.dataReady=!0,this.version=0}set needsUpdate(F){!0===F&&this.version++}toJSON(F){const Da=void 0===F||"string"===typeof F;if(!Da&&void 0!==F.images[this.uuid])return F.images[this.uuid];const ll={uuid:this.uuid,url:""},cl=this.data;if(null!==cl){let F;if(Array.isArray(cl)){F=[];for(let Da=0,ll=cl.length;Da<ll;Da++)cl[Da].isDataTexture?F.push(serializeImage(cl[Da].image)):F.push(serializeImage(cl[Da]))}else F=serializeImage(cl);ll.url=F}return Da||(F.images[this.uuid]=ll),ll}}function serializeImage(F){return"undefined"!==typeof HTMLImageElement&&F instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&F instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&F instanceof ImageBitmap?ImageUtils.getDataURL(F):F.data?{data:Array.from(F.data),width:F.width,height:F.height,type:F.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cm=0;class Texture extends EventDispatcher{constructor(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){void 0===F&&(F=Texture.DEFAULT_IMAGE),void 0===Da&&(Da=Texture.DEFAULT_MAPPING),void 0===ll&&(ll=id),void 0===cl&&(cl=id),void 0===hl&&(hl=od),void 0===dl&&(dl=cd),void 0===pl&&(pl=bd),void 0===fl&&(fl=ud),void 0===Al&&(Al=Texture.DEFAULT_ANISOTROPY),void 0===bl&&(bl=kp),super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cm++}),this.uuid=generateUUID(),this.name="",this.source=new Source(F),this.mipmaps=[],this.mapping=Da,this.channel=0,this.wrapS=ll,this.wrapT=cl,this.magFilter=hl,this.minFilter=dl,this.anisotropy=Al,this.format=pl,this.internalFormat=null,this.type=fl,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=bl,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(F){void 0===F&&(F=null),this.source.data=F}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(F){return this.name=F.name,this.source=F.source,this.mipmaps=F.mipmaps.slice(0),this.mapping=F.mapping,this.channel=F.channel,this.wrapS=F.wrapS,this.wrapT=F.wrapT,this.magFilter=F.magFilter,this.minFilter=F.minFilter,this.anisotropy=F.anisotropy,this.format=F.format,this.internalFormat=F.internalFormat,this.type=F.type,this.offset.copy(F.offset),this.repeat.copy(F.repeat),this.center.copy(F.center),this.rotation=F.rotation,this.matrixAutoUpdate=F.matrixAutoUpdate,this.matrix.copy(F.matrix),this.generateMipmaps=F.generateMipmaps,this.premultiplyAlpha=F.premultiplyAlpha,this.flipY=F.flipY,this.unpackAlignment=F.unpackAlignment,this.colorSpace=F.colorSpace,this.userData=JSON.parse(JSON.stringify(F.userData)),this.needsUpdate=!0,this}toJSON(F){const Da=void 0===F||"string"===typeof F;if(!Da&&void 0!==F.textures[this.uuid])return F.textures[this.uuid];const ll={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(F).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ll.userData=this.userData),Da||(F.textures[this.uuid]=ll),ll}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(F){if(300!==this.mapping)return F;if(F.applyMatrix3(this.matrix),F.x<0||F.x>1)switch(this.wrapS){case td:F.x=F.x-Math.floor(F.x);break;case id:F.x=F.x<0?0:1;break;case nd:1===Math.abs(Math.floor(F.x)%2)?F.x=Math.ceil(F.x)-F.x:F.x=F.x-Math.floor(F.x)}if(F.y<0||F.y>1)switch(this.wrapT){case td:F.y=F.y-Math.floor(F.y);break;case id:F.y=F.y<0?0:1;break;case nd:1===Math.abs(Math.floor(F.y)%2)?F.y=Math.ceil(F.y)-F.y:F.y=F.y-Math.floor(F.y)}return this.flipY&&(F.y=1-F.y),F}set needsUpdate(F){!0===F&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(F){!0===F&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=300,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(F,Da,ll,cl){void 0===F&&(F=0),void 0===Da&&(Da=0),void 0===ll&&(ll=0),void 0===cl&&(cl=1),Vector4.prototype.isVector4=!0,this.x=F,this.y=Da,this.z=ll,this.w=cl}get width(){return this.z}set width(F){this.z=F}get height(){return this.w}set height(F){this.w=F}set(F,Da,ll,cl){return this.x=F,this.y=Da,this.z=ll,this.w=cl,this}setScalar(F){return this.x=F,this.y=F,this.z=F,this.w=F,this}setX(F){return this.x=F,this}setY(F){return this.y=F,this}setZ(F){return this.z=F,this}setW(F){return this.w=F,this}setComponent(F,Da){switch(F){case 0:this.x=Da;break;case 1:this.y=Da;break;case 2:this.z=Da;break;case 3:this.w=Da;break;default:throw new Error("index is out of range: "+F)}return this}getComponent(F){switch(F){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+F)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(F){return this.x=F.x,this.y=F.y,this.z=F.z,this.w=void 0!==F.w?F.w:1,this}add(F){return this.x+=F.x,this.y+=F.y,this.z+=F.z,this.w+=F.w,this}addScalar(F){return this.x+=F,this.y+=F,this.z+=F,this.w+=F,this}addVectors(F,Da){return this.x=F.x+Da.x,this.y=F.y+Da.y,this.z=F.z+Da.z,this.w=F.w+Da.w,this}addScaledVector(F,Da){return this.x+=F.x*Da,this.y+=F.y*Da,this.z+=F.z*Da,this.w+=F.w*Da,this}sub(F){return this.x-=F.x,this.y-=F.y,this.z-=F.z,this.w-=F.w,this}subScalar(F){return this.x-=F,this.y-=F,this.z-=F,this.w-=F,this}subVectors(F,Da){return this.x=F.x-Da.x,this.y=F.y-Da.y,this.z=F.z-Da.z,this.w=F.w-Da.w,this}multiply(F){return this.x*=F.x,this.y*=F.y,this.z*=F.z,this.w*=F.w,this}multiplyScalar(F){return this.x*=F,this.y*=F,this.z*=F,this.w*=F,this}applyMatrix4(F){const Da=this.x,ll=this.y,cl=this.z,hl=this.w,dl=F.elements;return this.x=dl[0]*Da+dl[4]*ll+dl[8]*cl+dl[12]*hl,this.y=dl[1]*Da+dl[5]*ll+dl[9]*cl+dl[13]*hl,this.z=dl[2]*Da+dl[6]*ll+dl[10]*cl+dl[14]*hl,this.w=dl[3]*Da+dl[7]*ll+dl[11]*cl+dl[15]*hl,this}divideScalar(F){return this.multiplyScalar(1/F)}setAxisAngleFromQuaternion(F){this.w=2*Math.acos(F.w);const Da=Math.sqrt(1-F.w*F.w);return Da<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=F.x/Da,this.y=F.y/Da,this.z=F.z/Da),this}setAxisAngleFromRotationMatrix(F){let Da,ll,cl,hl;const dl=.01,pl=.1,fl=F.elements,Al=fl[0],bl=fl[4],kl=fl[8],Dl=fl[1],Wl=fl[5],Ql=fl[9],wc=fl[2],Sc=fl[6],eu=fl[10];if(Math.abs(bl-Dl)<dl&&Math.abs(kl-wc)<dl&&Math.abs(Ql-Sc)<dl){if(Math.abs(bl+Dl)<pl&&Math.abs(kl+wc)<pl&&Math.abs(Ql+Sc)<pl&&Math.abs(Al+Wl+eu-3)<pl)return this.set(1,0,0,0),this;Da=Math.PI;const F=(Al+1)/2,fl=(Wl+1)/2,iu=(eu+1)/2,su=(bl+Dl)/4,cu=(kl+wc)/4,uu=(Ql+Sc)/4;return F>fl&&F>iu?F<dl?(ll=0,cl=.707106781,hl=.707106781):(ll=Math.sqrt(F),cl=su/ll,hl=cu/ll):fl>iu?fl<dl?(ll=.707106781,cl=0,hl=.707106781):(cl=Math.sqrt(fl),ll=su/cl,hl=uu/cl):iu<dl?(ll=.707106781,cl=.707106781,hl=0):(hl=Math.sqrt(iu),ll=cu/hl,cl=uu/hl),this.set(ll,cl,hl,Da),this}let iu=Math.sqrt((Sc-Ql)*(Sc-Ql)+(kl-wc)*(kl-wc)+(Dl-bl)*(Dl-bl));return Math.abs(iu)<.001&&(iu=1),this.x=(Sc-Ql)/iu,this.y=(kl-wc)/iu,this.z=(Dl-bl)/iu,this.w=Math.acos((Al+Wl+eu-1)/2),this}setFromMatrixPosition(F){const Da=F.elements;return this.x=Da[12],this.y=Da[13],this.z=Da[14],this.w=Da[15],this}min(F){return this.x=Math.min(this.x,F.x),this.y=Math.min(this.y,F.y),this.z=Math.min(this.z,F.z),this.w=Math.min(this.w,F.w),this}max(F){return this.x=Math.max(this.x,F.x),this.y=Math.max(this.y,F.y),this.z=Math.max(this.z,F.z),this.w=Math.max(this.w,F.w),this}clamp(F,Da){return this.x=Math.max(F.x,Math.min(Da.x,this.x)),this.y=Math.max(F.y,Math.min(Da.y,this.y)),this.z=Math.max(F.z,Math.min(Da.z,this.z)),this.w=Math.max(F.w,Math.min(Da.w,this.w)),this}clampScalar(F,Da){return this.x=Math.max(F,Math.min(Da,this.x)),this.y=Math.max(F,Math.min(Da,this.y)),this.z=Math.max(F,Math.min(Da,this.z)),this.w=Math.max(F,Math.min(Da,this.w)),this}clampLength(F,Da){const ll=this.length();return this.divideScalar(ll||1).multiplyScalar(Math.max(F,Math.min(Da,ll)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(F){return this.x*F.x+this.y*F.y+this.z*F.z+this.w*F.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(F){return this.normalize().multiplyScalar(F)}lerp(F,Da){return this.x+=(F.x-this.x)*Da,this.y+=(F.y-this.y)*Da,this.z+=(F.z-this.z)*Da,this.w+=(F.w-this.w)*Da,this}lerpVectors(F,Da,ll){return this.x=F.x+(Da.x-F.x)*ll,this.y=F.y+(Da.y-F.y)*ll,this.z=F.z+(Da.z-F.z)*ll,this.w=F.w+(Da.w-F.w)*ll,this}equals(F){return F.x===this.x&&F.y===this.y&&F.z===this.z&&F.w===this.w}fromArray(F,Da){return void 0===Da&&(Da=0),this.x=F[Da],this.y=F[Da+1],this.z=F[Da+2],this.w=F[Da+3],this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this.x,F[Da+1]=this.y,F[Da+2]=this.z,F[Da+3]=this.w,F}fromBufferAttribute(F,Da){return this.x=F.getX(Da),this.y=F.getY(Da),this.z=F.getZ(Da),this.w=F.getW(Da),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(F,Da,ll){void 0===F&&(F=1),void 0===Da&&(Da=1),void 0===ll&&(ll={}),super(),this.isRenderTarget=!0,this.width=F,this.height=Da,this.depth=1,this.scissor=new Vector4(0,0,F,Da),this.scissorTest=!1,this.viewport=new Vector4(0,0,F,Da);const cl={width:F,height:Da,depth:1};ll=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:od,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},ll);const hl=new Texture(cl,ll.mapping,ll.wrapS,ll.wrapT,ll.magFilter,ll.minFilter,ll.format,ll.type,ll.anisotropy,ll.colorSpace);hl.flipY=!1,hl.generateMipmaps=ll.generateMipmaps,hl.internalFormat=ll.internalFormat,this.textures=[];const dl=ll.count;for(let pl=0;pl<dl;pl++)this.textures[pl]=hl.clone(),this.textures[pl].isRenderTargetTexture=!0;this.depthBuffer=ll.depthBuffer,this.stencilBuffer=ll.stencilBuffer,this.resolveDepthBuffer=ll.resolveDepthBuffer,this.resolveStencilBuffer=ll.resolveStencilBuffer,this.depthTexture=ll.depthTexture,this.samples=ll.samples}get texture(){return this.textures[0]}set texture(F){this.textures[0]=F}setSize(F,Da,ll){if(void 0===ll&&(ll=1),this.width!==F||this.height!==Da||this.depth!==ll){this.width=F,this.height=Da,this.depth=ll;for(let cl=0,hl=this.textures.length;cl<hl;cl++)this.textures[cl].image.width=F,this.textures[cl].image.height=Da,this.textures[cl].image.depth=ll;this.dispose()}this.viewport.set(0,0,F,Da),this.scissor.set(0,0,F,Da)}clone(){return(new this.constructor).copy(this)}copy(F){this.width=F.width,this.height=F.height,this.depth=F.depth,this.scissor.copy(F.scissor),this.scissorTest=F.scissorTest,this.viewport.copy(F.viewport),this.textures.length=0;for(let ll=0,cl=F.textures.length;ll<cl;ll++)this.textures[ll]=F.textures[ll].clone(),this.textures[ll].isRenderTargetTexture=!0;const Da=Object.assign({},F.texture.image);return this.texture.source=new Source(Da),this.depthBuffer=F.depthBuffer,this.stencilBuffer=F.stencilBuffer,this.resolveDepthBuffer=F.resolveDepthBuffer,this.resolveStencilBuffer=F.resolveStencilBuffer,null!==F.depthTexture&&(this.depthTexture=F.depthTexture.clone()),this.samples=F.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(F,Da,ll){void 0===F&&(F=1),void 0===Da&&(Da=1),void 0===ll&&(ll={}),super(F,Da,ll),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(F,Da,ll,cl){void 0===F&&(F=null),void 0===Da&&(Da=1),void 0===ll&&(ll=1),void 0===cl&&(cl=1),super(null),this.isDataArrayTexture=!0,this.image={data:F,width:Da,height:ll,depth:cl},this.magFilter=rd,this.minFilter=rd,this.wrapR=id,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(F){this.layerUpdates.add(F)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(F,Da,ll,cl){void 0===F&&(F=null),void 0===Da&&(Da=1),void 0===ll&&(ll=1),void 0===cl&&(cl=1),super(null),this.isData3DTexture=!0,this.image={data:F,width:Da,height:ll,depth:cl},this.magFilter=rd,this.minFilter=rd,this.wrapR=id,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(F,Da,ll,cl){void 0===F&&(F=0),void 0===Da&&(Da=0),void 0===ll&&(ll=0),void 0===cl&&(cl=1),this.isQuaternion=!0,this._x=F,this._y=Da,this._z=ll,this._w=cl}static slerpFlat(F,Da,ll,cl,hl,dl,pl){let fl=ll[cl+0],Al=ll[cl+1],bl=ll[cl+2],kl=ll[cl+3];const Dl=hl[dl+0],Wl=hl[dl+1],Ql=hl[dl+2],wc=hl[dl+3];if(0===pl)return F[Da+0]=fl,F[Da+1]=Al,F[Da+2]=bl,void(F[Da+3]=kl);if(1===pl)return F[Da+0]=Dl,F[Da+1]=Wl,F[Da+2]=Ql,void(F[Da+3]=wc);if(kl!==wc||fl!==Dl||Al!==Wl||bl!==Ql){let F=1-pl;const Da=fl*Dl+Al*Wl+bl*Ql+kl*wc,ll=Da>=0?1:-1,cl=1-Da*Da;if(cl>Number.EPSILON){const hl=Math.sqrt(cl),dl=Math.atan2(hl,Da*ll);F=Math.sin(F*dl)/hl,pl=Math.sin(pl*dl)/hl}const hl=pl*ll;if(fl=fl*F+Dl*hl,Al=Al*F+Wl*hl,bl=bl*F+Ql*hl,kl=kl*F+wc*hl,F===1-pl){const F=1/Math.sqrt(fl*fl+Al*Al+bl*bl+kl*kl);fl*=F,Al*=F,bl*=F,kl*=F}}F[Da]=fl,F[Da+1]=Al,F[Da+2]=bl,F[Da+3]=kl}static multiplyQuaternionsFlat(F,Da,ll,cl,hl,dl){const pl=ll[cl],fl=ll[cl+1],Al=ll[cl+2],bl=ll[cl+3],kl=hl[dl],Dl=hl[dl+1],Wl=hl[dl+2],Ql=hl[dl+3];return F[Da]=pl*Ql+bl*kl+fl*Wl-Al*Dl,F[Da+1]=fl*Ql+bl*Dl+Al*kl-pl*Wl,F[Da+2]=Al*Ql+bl*Wl+pl*Dl-fl*kl,F[Da+3]=bl*Ql-pl*kl-fl*Dl-Al*Wl,F}get x(){return this._x}set x(F){this._x=F,this._onChangeCallback()}get y(){return this._y}set y(F){this._y=F,this._onChangeCallback()}get z(){return this._z}set z(F){this._z=F,this._onChangeCallback()}get w(){return this._w}set w(F){this._w=F,this._onChangeCallback()}set(F,Da,ll,cl){return this._x=F,this._y=Da,this._z=ll,this._w=cl,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(F){return this._x=F.x,this._y=F.y,this._z=F.z,this._w=F.w,this._onChangeCallback(),this}setFromEuler(F,Da){void 0===Da&&(Da=!0);const ll=F._x,cl=F._y,hl=F._z,dl=F._order,pl=Math.cos,fl=Math.sin,Al=pl(ll/2),bl=pl(cl/2),kl=pl(hl/2),Dl=fl(ll/2),Wl=fl(cl/2),Ql=fl(hl/2);switch(dl){case"XYZ":this._x=Dl*bl*kl+Al*Wl*Ql,this._y=Al*Wl*kl-Dl*bl*Ql,this._z=Al*bl*Ql+Dl*Wl*kl,this._w=Al*bl*kl-Dl*Wl*Ql;break;case"YXZ":this._x=Dl*bl*kl+Al*Wl*Ql,this._y=Al*Wl*kl-Dl*bl*Ql,this._z=Al*bl*Ql-Dl*Wl*kl,this._w=Al*bl*kl+Dl*Wl*Ql;break;case"ZXY":this._x=Dl*bl*kl-Al*Wl*Ql,this._y=Al*Wl*kl+Dl*bl*Ql,this._z=Al*bl*Ql+Dl*Wl*kl,this._w=Al*bl*kl-Dl*Wl*Ql;break;case"ZYX":this._x=Dl*bl*kl-Al*Wl*Ql,this._y=Al*Wl*kl+Dl*bl*Ql,this._z=Al*bl*Ql-Dl*Wl*kl,this._w=Al*bl*kl+Dl*Wl*Ql;break;case"YZX":this._x=Dl*bl*kl+Al*Wl*Ql,this._y=Al*Wl*kl+Dl*bl*Ql,this._z=Al*bl*Ql-Dl*Wl*kl,this._w=Al*bl*kl-Dl*Wl*Ql;break;case"XZY":this._x=Dl*bl*kl-Al*Wl*Ql,this._y=Al*Wl*kl-Dl*bl*Ql,this._z=Al*bl*Ql+Dl*Wl*kl,this._w=Al*bl*kl+Dl*Wl*Ql;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+dl)}return!0===Da&&this._onChangeCallback(),this}setFromAxisAngle(F,Da){const ll=Da/2,cl=Math.sin(ll);return this._x=F.x*cl,this._y=F.y*cl,this._z=F.z*cl,this._w=Math.cos(ll),this._onChangeCallback(),this}setFromRotationMatrix(F){const Da=F.elements,ll=Da[0],cl=Da[4],hl=Da[8],dl=Da[1],pl=Da[5],fl=Da[9],Al=Da[2],bl=Da[6],kl=Da[10],Dl=ll+pl+kl;if(Dl>0){const F=.5/Math.sqrt(Dl+1);this._w=.25/F,this._x=(bl-fl)*F,this._y=(hl-Al)*F,this._z=(dl-cl)*F}else if(ll>pl&&ll>kl){const F=2*Math.sqrt(1+ll-pl-kl);this._w=(bl-fl)/F,this._x=.25*F,this._y=(cl+dl)/F,this._z=(hl+Al)/F}else if(pl>kl){const F=2*Math.sqrt(1+pl-ll-kl);this._w=(hl-Al)/F,this._x=(cl+dl)/F,this._y=.25*F,this._z=(fl+bl)/F}else{const F=2*Math.sqrt(1+kl-ll-pl);this._w=(dl-cl)/F,this._x=(hl+Al)/F,this._y=(fl+bl)/F,this._z=.25*F}return this._onChangeCallback(),this}setFromUnitVectors(F,Da){let ll=F.dot(Da)+1;return ll<Number.EPSILON?(ll=0,Math.abs(F.x)>Math.abs(F.z)?(this._x=-F.y,this._y=F.x,this._z=0,this._w=ll):(this._x=0,this._y=-F.z,this._z=F.y,this._w=ll)):(this._x=F.y*Da.z-F.z*Da.y,this._y=F.z*Da.x-F.x*Da.z,this._z=F.x*Da.y-F.y*Da.x,this._w=ll),this.normalize()}angleTo(F){return 2*Math.acos(Math.abs(clamp(this.dot(F),-1,1)))}rotateTowards(F,Da){const ll=this.angleTo(F);if(0===ll)return this;const cl=Math.min(1,Da/ll);return this.slerp(F,cl),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(F){return this._x*F._x+this._y*F._y+this._z*F._z+this._w*F._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let F=this.length();return 0===F?(this._x=0,this._y=0,this._z=0,this._w=1):(F=1/F,this._x=this._x*F,this._y=this._y*F,this._z=this._z*F,this._w=this._w*F),this._onChangeCallback(),this}multiply(F){return this.multiplyQuaternions(this,F)}premultiply(F){return this.multiplyQuaternions(F,this)}multiplyQuaternions(F,Da){const ll=F._x,cl=F._y,hl=F._z,dl=F._w,pl=Da._x,fl=Da._y,Al=Da._z,bl=Da._w;return this._x=ll*bl+dl*pl+cl*Al-hl*fl,this._y=cl*bl+dl*fl+hl*pl-ll*Al,this._z=hl*bl+dl*Al+ll*fl-cl*pl,this._w=dl*bl-ll*pl-cl*fl-hl*Al,this._onChangeCallback(),this}slerp(F,Da){if(0===Da)return this;if(1===Da)return this.copy(F);const ll=this._x,cl=this._y,hl=this._z,dl=this._w;let pl=dl*F._w+ll*F._x+cl*F._y+hl*F._z;if(pl<0?(this._w=-F._w,this._x=-F._x,this._y=-F._y,this._z=-F._z,pl=-pl):this.copy(F),pl>=1)return this._w=dl,this._x=ll,this._y=cl,this._z=hl,this;const fl=1-pl*pl;if(fl<=Number.EPSILON){const F=1-Da;return this._w=F*dl+Da*this._w,this._x=F*ll+Da*this._x,this._y=F*cl+Da*this._y,this._z=F*hl+Da*this._z,this.normalize(),this}const Al=Math.sqrt(fl),bl=Math.atan2(Al,pl),kl=Math.sin((1-Da)*bl)/Al,Dl=Math.sin(Da*bl)/Al;return this._w=dl*kl+this._w*Dl,this._x=ll*kl+this._x*Dl,this._y=cl*kl+this._y*Dl,this._z=hl*kl+this._z*Dl,this._onChangeCallback(),this}slerpQuaternions(F,Da,ll){return this.copy(F).slerp(Da,ll)}random(){const F=2*Math.PI*Math.random(),Da=2*Math.PI*Math.random(),ll=Math.random(),cl=Math.sqrt(1-ll),hl=Math.sqrt(ll);return this.set(cl*Math.sin(F),cl*Math.cos(F),hl*Math.sin(Da),hl*Math.cos(Da))}equals(F){return F._x===this._x&&F._y===this._y&&F._z===this._z&&F._w===this._w}fromArray(F,Da){return void 0===Da&&(Da=0),this._x=F[Da],this._y=F[Da+1],this._z=F[Da+2],this._w=F[Da+3],this._onChangeCallback(),this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this._x,F[Da+1]=this._y,F[Da+2]=this._z,F[Da+3]=this._w,F}fromBufferAttribute(F,Da){return this._x=F.getX(Da),this._y=F.getY(Da),this._z=F.getZ(Da),this._w=F.getW(Da),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(F){return this._onChangeCallback=F,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(F,Da,ll){void 0===F&&(F=0),void 0===Da&&(Da=0),void 0===ll&&(ll=0),Vector3.prototype.isVector3=!0,this.x=F,this.y=Da,this.z=ll}set(F,Da,ll){return void 0===ll&&(ll=this.z),this.x=F,this.y=Da,this.z=ll,this}setScalar(F){return this.x=F,this.y=F,this.z=F,this}setX(F){return this.x=F,this}setY(F){return this.y=F,this}setZ(F){return this.z=F,this}setComponent(F,Da){switch(F){case 0:this.x=Da;break;case 1:this.y=Da;break;case 2:this.z=Da;break;default:throw new Error("index is out of range: "+F)}return this}getComponent(F){switch(F){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+F)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(F){return this.x=F.x,this.y=F.y,this.z=F.z,this}add(F){return this.x+=F.x,this.y+=F.y,this.z+=F.z,this}addScalar(F){return this.x+=F,this.y+=F,this.z+=F,this}addVectors(F,Da){return this.x=F.x+Da.x,this.y=F.y+Da.y,this.z=F.z+Da.z,this}addScaledVector(F,Da){return this.x+=F.x*Da,this.y+=F.y*Da,this.z+=F.z*Da,this}sub(F){return this.x-=F.x,this.y-=F.y,this.z-=F.z,this}subScalar(F){return this.x-=F,this.y-=F,this.z-=F,this}subVectors(F,Da){return this.x=F.x-Da.x,this.y=F.y-Da.y,this.z=F.z-Da.z,this}multiply(F){return this.x*=F.x,this.y*=F.y,this.z*=F.z,this}multiplyScalar(F){return this.x*=F,this.y*=F,this.z*=F,this}multiplyVectors(F,Da){return this.x=F.x*Da.x,this.y=F.y*Da.y,this.z=F.z*Da.z,this}applyEuler(F){return this.applyQuaternion(hm.setFromEuler(F))}applyAxisAngle(F,Da){return this.applyQuaternion(hm.setFromAxisAngle(F,Da))}applyMatrix3(F){const Da=this.x,ll=this.y,cl=this.z,hl=F.elements;return this.x=hl[0]*Da+hl[3]*ll+hl[6]*cl,this.y=hl[1]*Da+hl[4]*ll+hl[7]*cl,this.z=hl[2]*Da+hl[5]*ll+hl[8]*cl,this}applyNormalMatrix(F){return this.applyMatrix3(F).normalize()}applyMatrix4(F){const Da=this.x,ll=this.y,cl=this.z,hl=F.elements,dl=1/(hl[3]*Da+hl[7]*ll+hl[11]*cl+hl[15]);return this.x=(hl[0]*Da+hl[4]*ll+hl[8]*cl+hl[12])*dl,this.y=(hl[1]*Da+hl[5]*ll+hl[9]*cl+hl[13])*dl,this.z=(hl[2]*Da+hl[6]*ll+hl[10]*cl+hl[14])*dl,this}applyQuaternion(F){const Da=this.x,ll=this.y,cl=this.z,hl=F.x,dl=F.y,pl=F.z,fl=F.w,Al=2*(dl*cl-pl*ll),bl=2*(pl*Da-hl*cl),kl=2*(hl*ll-dl*Da);return this.x=Da+fl*Al+dl*kl-pl*bl,this.y=ll+fl*bl+pl*Al-hl*kl,this.z=cl+fl*kl+hl*bl-dl*Al,this}project(F){return this.applyMatrix4(F.matrixWorldInverse).applyMatrix4(F.projectionMatrix)}unproject(F){return this.applyMatrix4(F.projectionMatrixInverse).applyMatrix4(F.matrixWorld)}transformDirection(F){const Da=this.x,ll=this.y,cl=this.z,hl=F.elements;return this.x=hl[0]*Da+hl[4]*ll+hl[8]*cl,this.y=hl[1]*Da+hl[5]*ll+hl[9]*cl,this.z=hl[2]*Da+hl[6]*ll+hl[10]*cl,this.normalize()}divide(F){return this.x/=F.x,this.y/=F.y,this.z/=F.z,this}divideScalar(F){return this.multiplyScalar(1/F)}min(F){return this.x=Math.min(this.x,F.x),this.y=Math.min(this.y,F.y),this.z=Math.min(this.z,F.z),this}max(F){return this.x=Math.max(this.x,F.x),this.y=Math.max(this.y,F.y),this.z=Math.max(this.z,F.z),this}clamp(F,Da){return this.x=Math.max(F.x,Math.min(Da.x,this.x)),this.y=Math.max(F.y,Math.min(Da.y,this.y)),this.z=Math.max(F.z,Math.min(Da.z,this.z)),this}clampScalar(F,Da){return this.x=Math.max(F,Math.min(Da,this.x)),this.y=Math.max(F,Math.min(Da,this.y)),this.z=Math.max(F,Math.min(Da,this.z)),this}clampLength(F,Da){const ll=this.length();return this.divideScalar(ll||1).multiplyScalar(Math.max(F,Math.min(Da,ll)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(F){return this.x*F.x+this.y*F.y+this.z*F.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(F){return this.normalize().multiplyScalar(F)}lerp(F,Da){return this.x+=(F.x-this.x)*Da,this.y+=(F.y-this.y)*Da,this.z+=(F.z-this.z)*Da,this}lerpVectors(F,Da,ll){return this.x=F.x+(Da.x-F.x)*ll,this.y=F.y+(Da.y-F.y)*ll,this.z=F.z+(Da.z-F.z)*ll,this}cross(F){return this.crossVectors(this,F)}crossVectors(F,Da){const ll=F.x,cl=F.y,hl=F.z,dl=Da.x,pl=Da.y,fl=Da.z;return this.x=cl*fl-hl*pl,this.y=hl*dl-ll*fl,this.z=ll*pl-cl*dl,this}projectOnVector(F){const Da=F.lengthSq();if(0===Da)return this.set(0,0,0);const ll=F.dot(this)/Da;return this.copy(F).multiplyScalar(ll)}projectOnPlane(F){return um.copy(this).projectOnVector(F),this.sub(um)}reflect(F){return this.sub(um.copy(F).multiplyScalar(2*this.dot(F)))}angleTo(F){const Da=Math.sqrt(this.lengthSq()*F.lengthSq());if(0===Da)return Math.PI/2;const ll=this.dot(F)/Da;return Math.acos(clamp(ll,-1,1))}distanceTo(F){return Math.sqrt(this.distanceToSquared(F))}distanceToSquared(F){const Da=this.x-F.x,ll=this.y-F.y,cl=this.z-F.z;return Da*Da+ll*ll+cl*cl}manhattanDistanceTo(F){return Math.abs(this.x-F.x)+Math.abs(this.y-F.y)+Math.abs(this.z-F.z)}setFromSpherical(F){return this.setFromSphericalCoords(F.radius,F.phi,F.theta)}setFromSphericalCoords(F,Da,ll){const cl=Math.sin(Da)*F;return this.x=cl*Math.sin(ll),this.y=Math.cos(Da)*F,this.z=cl*Math.cos(ll),this}setFromCylindrical(F){return this.setFromCylindricalCoords(F.radius,F.theta,F.y)}setFromCylindricalCoords(F,Da,ll){return this.x=F*Math.sin(Da),this.y=ll,this.z=F*Math.cos(Da),this}setFromMatrixPosition(F){const Da=F.elements;return this.x=Da[12],this.y=Da[13],this.z=Da[14],this}setFromMatrixScale(F){const Da=this.setFromMatrixColumn(F,0).length(),ll=this.setFromMatrixColumn(F,1).length(),cl=this.setFromMatrixColumn(F,2).length();return this.x=Da,this.y=ll,this.z=cl,this}setFromMatrixColumn(F,Da){return this.fromArray(F.elements,4*Da)}setFromMatrix3Column(F,Da){return this.fromArray(F.elements,3*Da)}setFromEuler(F){return this.x=F._x,this.y=F._y,this.z=F._z,this}setFromColor(F){return this.x=F.r,this.y=F.g,this.z=F.b,this}equals(F){return F.x===this.x&&F.y===this.y&&F.z===this.z}fromArray(F,Da){return void 0===Da&&(Da=0),this.x=F[Da],this.y=F[Da+1],this.z=F[Da+2],this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this.x,F[Da+1]=this.y,F[Da+2]=this.z,F}fromBufferAttribute(F,Da){return this.x=F.getX(Da),this.y=F.getY(Da),this.z=F.getZ(Da),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const F=Math.random()*Math.PI*2,Da=2*Math.random()-1,ll=Math.sqrt(1-Da*Da);return this.x=ll*Math.cos(F),this.y=Da,this.z=ll*Math.sin(F),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const um=new Vector3,hm=new Quaternion;class Box3{constructor(F,Da){void 0===F&&(F=new Vector3(1/0,1/0,1/0)),void 0===Da&&(Da=new Vector3(-1/0,-1/0,-1/0)),this.isBox3=!0,this.min=F,this.max=Da}set(F,Da){return this.min.copy(F),this.max.copy(Da),this}setFromArray(F){this.makeEmpty();for(let Da=0,ll=F.length;Da<ll;Da+=3)this.expandByPoint(pm.fromArray(F,Da));return this}setFromBufferAttribute(F){this.makeEmpty();for(let Da=0,ll=F.count;Da<ll;Da++)this.expandByPoint(pm.fromBufferAttribute(F,Da));return this}setFromPoints(F){this.makeEmpty();for(let Da=0,ll=F.length;Da<ll;Da++)this.expandByPoint(F[Da]);return this}setFromCenterAndSize(F,Da){const ll=pm.copy(Da).multiplyScalar(.5);return this.min.copy(F).sub(ll),this.max.copy(F).add(ll),this}setFromObject(F,Da){return void 0===Da&&(Da=!1),this.makeEmpty(),this.expandByObject(F,Da)}clone(){return(new this.constructor).copy(this)}copy(F){return this.min.copy(F.min),this.max.copy(F.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(F){return this.isEmpty()?F.set(0,0,0):F.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(F){return this.isEmpty()?F.set(0,0,0):F.subVectors(this.max,this.min)}expandByPoint(F){return this.min.min(F),this.max.max(F),this}expandByVector(F){return this.min.sub(F),this.max.add(F),this}expandByScalar(F){return this.min.addScalar(-F),this.max.addScalar(F),this}expandByObject(F,Da){void 0===Da&&(Da=!1),F.updateWorldMatrix(!1,!1);const ll=F.geometry;if(void 0!==ll){const cl=ll.getAttribute("position");if(!0===Da&&void 0!==cl&&!0!==F.isInstancedMesh)for(let Da=0,ll=cl.count;Da<ll;Da++)!0===F.isMesh?F.getVertexPosition(Da,pm):pm.fromBufferAttribute(cl,Da),pm.applyMatrix4(F.matrixWorld),this.expandByPoint(pm);else void 0!==F.boundingBox?(null===F.boundingBox&&F.computeBoundingBox(),mm.copy(F.boundingBox)):(null===ll.boundingBox&&ll.computeBoundingBox(),mm.copy(ll.boundingBox)),mm.applyMatrix4(F.matrixWorld),this.union(mm)}const cl=F.children;for(let hl=0,dl=cl.length;hl<dl;hl++)this.expandByObject(cl[hl],Da);return this}containsPoint(F){return F.x>=this.min.x&&F.x<=this.max.x&&F.y>=this.min.y&&F.y<=this.max.y&&F.z>=this.min.z&&F.z<=this.max.z}containsBox(F){return this.min.x<=F.min.x&&F.max.x<=this.max.x&&this.min.y<=F.min.y&&F.max.y<=this.max.y&&this.min.z<=F.min.z&&F.max.z<=this.max.z}getParameter(F,Da){return Da.set((F.x-this.min.x)/(this.max.x-this.min.x),(F.y-this.min.y)/(this.max.y-this.min.y),(F.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(F){return F.max.x>=this.min.x&&F.min.x<=this.max.x&&F.max.y>=this.min.y&&F.min.y<=this.max.y&&F.max.z>=this.min.z&&F.min.z<=this.max.z}intersectsSphere(F){return this.clampPoint(F.center,pm),pm.distanceToSquared(F.center)<=F.radius*F.radius}intersectsPlane(F){let Da,ll;return F.normal.x>0?(Da=F.normal.x*this.min.x,ll=F.normal.x*this.max.x):(Da=F.normal.x*this.max.x,ll=F.normal.x*this.min.x),F.normal.y>0?(Da+=F.normal.y*this.min.y,ll+=F.normal.y*this.max.y):(Da+=F.normal.y*this.max.y,ll+=F.normal.y*this.min.y),F.normal.z>0?(Da+=F.normal.z*this.min.z,ll+=F.normal.z*this.max.z):(Da+=F.normal.z*this.max.z,ll+=F.normal.z*this.min.z),Da<=-F.constant&&ll>=-F.constant}intersectsTriangle(F){if(this.isEmpty())return!1;this.getCenter(xm),bm.subVectors(this.max,xm),fm.subVectors(F.a,xm),gm.subVectors(F.b,xm),Am.subVectors(F.c,xm),ym.subVectors(gm,fm),vm.subVectors(Am,gm),_m.subVectors(fm,Am);let Da=[0,-ym.z,ym.y,0,-vm.z,vm.y,0,-_m.z,_m.y,ym.z,0,-ym.x,vm.z,0,-vm.x,_m.z,0,-_m.x,-ym.y,ym.x,0,-vm.y,vm.x,0,-_m.y,_m.x,0];return!!satForAxes(Da,fm,gm,Am,bm)&&(Da=[1,0,0,0,1,0,0,0,1],!!satForAxes(Da,fm,gm,Am,bm)&&(wm.crossVectors(ym,vm),Da=[wm.x,wm.y,wm.z],satForAxes(Da,fm,gm,Am,bm)))}clampPoint(F,Da){return Da.copy(F).clamp(this.min,this.max)}distanceToPoint(F){return this.clampPoint(F,pm).distanceTo(F)}getBoundingSphere(F){return this.isEmpty()?F.makeEmpty():(this.getCenter(F.center),F.radius=.5*this.getSize(pm).length()),F}intersect(F){return this.min.max(F.min),this.max.min(F.max),this.isEmpty()&&this.makeEmpty(),this}union(F){return this.min.min(F.min),this.max.max(F.max),this}applyMatrix4(F){return this.isEmpty()||(dm[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(F),dm[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(F),dm[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(F),dm[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(F),dm[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(F),dm[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(F),dm[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(F),dm[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(F),this.setFromPoints(dm)),this}translate(F){return this.min.add(F),this.max.add(F),this}equals(F){return F.min.equals(this.min)&&F.max.equals(this.max)}}const dm=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],pm=new Vector3,mm=new Box3,fm=new Vector3,gm=new Vector3,Am=new Vector3,ym=new Vector3,vm=new Vector3,_m=new Vector3,xm=new Vector3,bm=new Vector3,wm=new Vector3,Em=new Vector3;function satForAxes(F,Da,ll,cl,hl){for(let dl=0,pl=F.length-3;dl<=pl;dl+=3){Em.fromArray(F,dl);const pl=hl.x*Math.abs(Em.x)+hl.y*Math.abs(Em.y)+hl.z*Math.abs(Em.z),fl=Da.dot(Em),Al=ll.dot(Em),bl=cl.dot(Em);if(Math.max(-Math.max(fl,Al,bl),Math.min(fl,Al,bl))>pl)return!1}return!0}const Mm=new Box3,Sm=new Vector3,km=new Vector3;class Sphere{constructor(F,Da){void 0===F&&(F=new Vector3),void 0===Da&&(Da=-1),this.isSphere=!0,this.center=F,this.radius=Da}set(F,Da){return this.center.copy(F),this.radius=Da,this}setFromPoints(F,Da){const ll=this.center;void 0!==Da?ll.copy(Da):Mm.setFromPoints(F).getCenter(ll);let cl=0;for(let hl=0,dl=F.length;hl<dl;hl++)cl=Math.max(cl,ll.distanceToSquared(F[hl]));return this.radius=Math.sqrt(cl),this}copy(F){return this.center.copy(F.center),this.radius=F.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(F){return F.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(F){return F.distanceTo(this.center)-this.radius}intersectsSphere(F){const Da=this.radius+F.radius;return F.center.distanceToSquared(this.center)<=Da*Da}intersectsBox(F){return F.intersectsSphere(this)}intersectsPlane(F){return Math.abs(F.distanceToPoint(this.center))<=this.radius}clampPoint(F,Da){const ll=this.center.distanceToSquared(F);return Da.copy(F),ll>this.radius*this.radius&&(Da.sub(this.center).normalize(),Da.multiplyScalar(this.radius).add(this.center)),Da}getBoundingBox(F){return this.isEmpty()?(F.makeEmpty(),F):(F.set(this.center,this.center),F.expandByScalar(this.radius),F)}applyMatrix4(F){return this.center.applyMatrix4(F),this.radius=this.radius*F.getMaxScaleOnAxis(),this}translate(F){return this.center.add(F),this}expandByPoint(F){if(this.isEmpty())return this.center.copy(F),this.radius=0,this;Sm.subVectors(F,this.center);const Da=Sm.lengthSq();if(Da>this.radius*this.radius){const F=Math.sqrt(Da),ll=.5*(F-this.radius);this.center.addScaledVector(Sm,ll/F),this.radius+=ll}return this}union(F){return F.isEmpty()?this:this.isEmpty()?(this.copy(F),this):(!0===this.center.equals(F.center)?this.radius=Math.max(this.radius,F.radius):(km.subVectors(F.center,this.center).setLength(F.radius),this.expandByPoint(Sm.copy(F.center).add(km)),this.expandByPoint(Sm.copy(F.center).sub(km))),this)}equals(F){return F.center.equals(this.center)&&F.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tm=new Vector3,Im=new Vector3,Cm=new Vector3,Lm=new Vector3,zm=new Vector3,Pm=new Vector3,Dm=new Vector3;class Ray{constructor(F,Da){void 0===F&&(F=new Vector3),void 0===Da&&(Da=new Vector3(0,0,-1)),this.origin=F,this.direction=Da}set(F,Da){return this.origin.copy(F),this.direction.copy(Da),this}copy(F){return this.origin.copy(F.origin),this.direction.copy(F.direction),this}at(F,Da){return Da.copy(this.origin).addScaledVector(this.direction,F)}lookAt(F){return this.direction.copy(F).sub(this.origin).normalize(),this}recast(F){return this.origin.copy(this.at(F,Tm)),this}closestPointToPoint(F,Da){Da.subVectors(F,this.origin);const ll=Da.dot(this.direction);return ll<0?Da.copy(this.origin):Da.copy(this.origin).addScaledVector(this.direction,ll)}distanceToPoint(F){return Math.sqrt(this.distanceSqToPoint(F))}distanceSqToPoint(F){const Da=Tm.subVectors(F,this.origin).dot(this.direction);return Da<0?this.origin.distanceToSquared(F):(Tm.copy(this.origin).addScaledVector(this.direction,Da),Tm.distanceToSquared(F))}distanceSqToSegment(F,Da,ll,cl){Im.copy(F).add(Da).multiplyScalar(.5),Cm.copy(Da).sub(F).normalize(),Lm.copy(this.origin).sub(Im);const hl=.5*F.distanceTo(Da),dl=-this.direction.dot(Cm),pl=Lm.dot(this.direction),fl=-Lm.dot(Cm),Al=Lm.lengthSq(),bl=Math.abs(1-dl*dl);let kl,Dl,Wl,Ql;if(bl>0)if(kl=dl*fl-pl,Dl=dl*pl-fl,Ql=hl*bl,kl>=0)if(Dl>=-Ql)if(Dl<=Ql){const F=1/bl;kl*=F,Dl*=F,Wl=kl*(kl+dl*Dl+2*pl)+Dl*(dl*kl+Dl+2*fl)+Al}else Dl=hl,kl=Math.max(0,-(dl*Dl+pl)),Wl=-kl*kl+Dl*(Dl+2*fl)+Al;else Dl=-hl,kl=Math.max(0,-(dl*Dl+pl)),Wl=-kl*kl+Dl*(Dl+2*fl)+Al;else Dl<=-Ql?(kl=Math.max(0,-(-dl*hl+pl)),Dl=kl>0?-hl:Math.min(Math.max(-hl,-fl),hl),Wl=-kl*kl+Dl*(Dl+2*fl)+Al):Dl<=Ql?(kl=0,Dl=Math.min(Math.max(-hl,-fl),hl),Wl=Dl*(Dl+2*fl)+Al):(kl=Math.max(0,-(dl*hl+pl)),Dl=kl>0?hl:Math.min(Math.max(-hl,-fl),hl),Wl=-kl*kl+Dl*(Dl+2*fl)+Al);else Dl=dl>0?-hl:hl,kl=Math.max(0,-(dl*Dl+pl)),Wl=-kl*kl+Dl*(Dl+2*fl)+Al;return ll&&ll.copy(this.origin).addScaledVector(this.direction,kl),cl&&cl.copy(Im).addScaledVector(Cm,Dl),Wl}intersectSphere(F,Da){Tm.subVectors(F.center,this.origin);const ll=Tm.dot(this.direction),cl=Tm.dot(Tm)-ll*ll,hl=F.radius*F.radius;if(cl>hl)return null;const dl=Math.sqrt(hl-cl),pl=ll-dl,fl=ll+dl;return fl<0?null:pl<0?this.at(fl,Da):this.at(pl,Da)}intersectsSphere(F){return this.distanceSqToPoint(F.center)<=F.radius*F.radius}distanceToPlane(F){const Da=F.normal.dot(this.direction);if(0===Da)return 0===F.distanceToPoint(this.origin)?0:null;const ll=-(this.origin.dot(F.normal)+F.constant)/Da;return ll>=0?ll:null}intersectPlane(F,Da){const ll=this.distanceToPlane(F);return null===ll?null:this.at(ll,Da)}intersectsPlane(F){const Da=F.distanceToPoint(this.origin);if(0===Da)return!0;return F.normal.dot(this.direction)*Da<0}intersectBox(F,Da){let ll,cl,hl,dl,pl,fl;const Al=1/this.direction.x,bl=1/this.direction.y,kl=1/this.direction.z,Dl=this.origin;return Al>=0?(ll=(F.min.x-Dl.x)*Al,cl=(F.max.x-Dl.x)*Al):(ll=(F.max.x-Dl.x)*Al,cl=(F.min.x-Dl.x)*Al),bl>=0?(hl=(F.min.y-Dl.y)*bl,dl=(F.max.y-Dl.y)*bl):(hl=(F.max.y-Dl.y)*bl,dl=(F.min.y-Dl.y)*bl),ll>dl||hl>cl?null:((hl>ll||isNaN(ll))&&(ll=hl),(dl<cl||isNaN(cl))&&(cl=dl),kl>=0?(pl=(F.min.z-Dl.z)*kl,fl=(F.max.z-Dl.z)*kl):(pl=(F.max.z-Dl.z)*kl,fl=(F.min.z-Dl.z)*kl),ll>fl||pl>cl?null:((pl>ll||ll!==ll)&&(ll=pl),(fl<cl||cl!==cl)&&(cl=fl),cl<0?null:this.at(ll>=0?ll:cl,Da)))}intersectsBox(F){return null!==this.intersectBox(F,Tm)}intersectTriangle(F,Da,ll,cl,hl){zm.subVectors(Da,F),Pm.subVectors(ll,F),Dm.crossVectors(zm,Pm);let dl,pl=this.direction.dot(Dm);if(pl>0){if(cl)return null;dl=1}else{if(!(pl<0))return null;dl=-1,pl=-pl}Lm.subVectors(this.origin,F);const fl=dl*this.direction.dot(Pm.crossVectors(Lm,Pm));if(fl<0)return null;const Al=dl*this.direction.dot(zm.cross(Lm));if(Al<0)return null;if(fl+Al>pl)return null;const bl=-dl*Lm.dot(Dm);return bl<0?null:this.at(bl/pl,hl)}applyMatrix4(F){return this.origin.applyMatrix4(F),this.direction.transformDirection(F),this}equals(F){return F.origin.equals(this.origin)&&F.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==F&&this.set(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc)}set(F,Da,ll,cl,hl,dl,pl,fl,Al,bl,kl,Dl,Wl,Ql,wc,Sc){const eu=this.elements;return eu[0]=F,eu[4]=Da,eu[8]=ll,eu[12]=cl,eu[1]=hl,eu[5]=dl,eu[9]=pl,eu[13]=fl,eu[2]=Al,eu[6]=bl,eu[10]=kl,eu[14]=Dl,eu[3]=Wl,eu[7]=Ql,eu[11]=wc,eu[15]=Sc,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(F){const Da=this.elements,ll=F.elements;return Da[0]=ll[0],Da[1]=ll[1],Da[2]=ll[2],Da[3]=ll[3],Da[4]=ll[4],Da[5]=ll[5],Da[6]=ll[6],Da[7]=ll[7],Da[8]=ll[8],Da[9]=ll[9],Da[10]=ll[10],Da[11]=ll[11],Da[12]=ll[12],Da[13]=ll[13],Da[14]=ll[14],Da[15]=ll[15],this}copyPosition(F){const Da=this.elements,ll=F.elements;return Da[12]=ll[12],Da[13]=ll[13],Da[14]=ll[14],this}setFromMatrix3(F){const Da=F.elements;return this.set(Da[0],Da[3],Da[6],0,Da[1],Da[4],Da[7],0,Da[2],Da[5],Da[8],0,0,0,0,1),this}extractBasis(F,Da,ll){return F.setFromMatrixColumn(this,0),Da.setFromMatrixColumn(this,1),ll.setFromMatrixColumn(this,2),this}makeBasis(F,Da,ll){return this.set(F.x,Da.x,ll.x,0,F.y,Da.y,ll.y,0,F.z,Da.z,ll.z,0,0,0,0,1),this}extractRotation(F){const Da=this.elements,ll=F.elements,cl=1/Rm.setFromMatrixColumn(F,0).length(),hl=1/Rm.setFromMatrixColumn(F,1).length(),dl=1/Rm.setFromMatrixColumn(F,2).length();return Da[0]=ll[0]*cl,Da[1]=ll[1]*cl,Da[2]=ll[2]*cl,Da[3]=0,Da[4]=ll[4]*hl,Da[5]=ll[5]*hl,Da[6]=ll[6]*hl,Da[7]=0,Da[8]=ll[8]*dl,Da[9]=ll[9]*dl,Da[10]=ll[10]*dl,Da[11]=0,Da[12]=0,Da[13]=0,Da[14]=0,Da[15]=1,this}makeRotationFromEuler(F){const Da=this.elements,ll=F.x,cl=F.y,hl=F.z,dl=Math.cos(ll),pl=Math.sin(ll),fl=Math.cos(cl),Al=Math.sin(cl),bl=Math.cos(hl),kl=Math.sin(hl);if("XYZ"===F.order){const F=dl*bl,ll=dl*kl,cl=pl*bl,hl=pl*kl;Da[0]=fl*bl,Da[4]=-fl*kl,Da[8]=Al,Da[1]=ll+cl*Al,Da[5]=F-hl*Al,Da[9]=-pl*fl,Da[2]=hl-F*Al,Da[6]=cl+ll*Al,Da[10]=dl*fl}else if("YXZ"===F.order){const F=fl*bl,ll=fl*kl,cl=Al*bl,hl=Al*kl;Da[0]=F+hl*pl,Da[4]=cl*pl-ll,Da[8]=dl*Al,Da[1]=dl*kl,Da[5]=dl*bl,Da[9]=-pl,Da[2]=ll*pl-cl,Da[6]=hl+F*pl,Da[10]=dl*fl}else if("ZXY"===F.order){const F=fl*bl,ll=fl*kl,cl=Al*bl,hl=Al*kl;Da[0]=F-hl*pl,Da[4]=-dl*kl,Da[8]=cl+ll*pl,Da[1]=ll+cl*pl,Da[5]=dl*bl,Da[9]=hl-F*pl,Da[2]=-dl*Al,Da[6]=pl,Da[10]=dl*fl}else if("ZYX"===F.order){const F=dl*bl,ll=dl*kl,cl=pl*bl,hl=pl*kl;Da[0]=fl*bl,Da[4]=cl*Al-ll,Da[8]=F*Al+hl,Da[1]=fl*kl,Da[5]=hl*Al+F,Da[9]=ll*Al-cl,Da[2]=-Al,Da[6]=pl*fl,Da[10]=dl*fl}else if("YZX"===F.order){const F=dl*fl,ll=dl*Al,cl=pl*fl,hl=pl*Al;Da[0]=fl*bl,Da[4]=hl-F*kl,Da[8]=cl*kl+ll,Da[1]=kl,Da[5]=dl*bl,Da[9]=-pl*bl,Da[2]=-Al*bl,Da[6]=ll*kl+cl,Da[10]=F-hl*kl}else if("XZY"===F.order){const F=dl*fl,ll=dl*Al,cl=pl*fl,hl=pl*Al;Da[0]=fl*bl,Da[4]=-kl,Da[8]=Al*bl,Da[1]=F*kl+hl,Da[5]=dl*bl,Da[9]=ll*kl-cl,Da[2]=cl*kl-ll,Da[6]=pl*bl,Da[10]=hl*kl+F}return Da[3]=0,Da[7]=0,Da[11]=0,Da[12]=0,Da[13]=0,Da[14]=0,Da[15]=1,this}makeRotationFromQuaternion(F){return this.compose(Um,F,Bm)}lookAt(F,Da,ll){const cl=this.elements;return jm.subVectors(F,Da),0===jm.lengthSq()&&(jm.z=1),jm.normalize(),Om.crossVectors(ll,jm),0===Om.lengthSq()&&(1===Math.abs(ll.z)?jm.x+=1e-4:jm.z+=1e-4,jm.normalize(),Om.crossVectors(ll,jm)),Om.normalize(),Fm.crossVectors(jm,Om),cl[0]=Om.x,cl[4]=Fm.x,cl[8]=jm.x,cl[1]=Om.y,cl[5]=Fm.y,cl[9]=jm.y,cl[2]=Om.z,cl[6]=Fm.z,cl[10]=jm.z,this}multiply(F){return this.multiplyMatrices(this,F)}premultiply(F){return this.multiplyMatrices(F,this)}multiplyMatrices(F,Da){const ll=F.elements,cl=Da.elements,hl=this.elements,dl=ll[0],pl=ll[4],fl=ll[8],Al=ll[12],bl=ll[1],kl=ll[5],Dl=ll[9],Wl=ll[13],Ql=ll[2],wc=ll[6],Sc=ll[10],eu=ll[14],iu=ll[3],su=ll[7],cu=ll[11],uu=ll[15],hu=cl[0],Lu=cl[4],zu=cl[8],Du=cl[12],Nu=cl[1],qu=cl[5],ih=cl[9],gh=cl[13],ed=cl[2],td=cl[6],id=cl[10],nd=cl[14],rd=cl[3],ad=cl[7],sd=cl[11],od=cl[15];return hl[0]=dl*hu+pl*Nu+fl*ed+Al*rd,hl[4]=dl*Lu+pl*qu+fl*td+Al*ad,hl[8]=dl*zu+pl*ih+fl*id+Al*sd,hl[12]=dl*Du+pl*gh+fl*nd+Al*od,hl[1]=bl*hu+kl*Nu+Dl*ed+Wl*rd,hl[5]=bl*Lu+kl*qu+Dl*td+Wl*ad,hl[9]=bl*zu+kl*ih+Dl*id+Wl*sd,hl[13]=bl*Du+kl*gh+Dl*nd+Wl*od,hl[2]=Ql*hu+wc*Nu+Sc*ed+eu*rd,hl[6]=Ql*Lu+wc*qu+Sc*td+eu*ad,hl[10]=Ql*zu+wc*ih+Sc*id+eu*sd,hl[14]=Ql*Du+wc*gh+Sc*nd+eu*od,hl[3]=iu*hu+su*Nu+cu*ed+uu*rd,hl[7]=iu*Lu+su*qu+cu*td+uu*ad,hl[11]=iu*zu+su*ih+cu*id+uu*sd,hl[15]=iu*Du+su*gh+cu*nd+uu*od,this}multiplyScalar(F){const Da=this.elements;return Da[0]*=F,Da[4]*=F,Da[8]*=F,Da[12]*=F,Da[1]*=F,Da[5]*=F,Da[9]*=F,Da[13]*=F,Da[2]*=F,Da[6]*=F,Da[10]*=F,Da[14]*=F,Da[3]*=F,Da[7]*=F,Da[11]*=F,Da[15]*=F,this}determinant(){const F=this.elements,Da=F[0],ll=F[4],cl=F[8],hl=F[12],dl=F[1],pl=F[5],fl=F[9],Al=F[13],bl=F[2],kl=F[6],Dl=F[10],Wl=F[14];return F[3]*(+hl*fl*kl-cl*Al*kl-hl*pl*Dl+ll*Al*Dl+cl*pl*Wl-ll*fl*Wl)+F[7]*(+Da*fl*Wl-Da*Al*Dl+hl*dl*Dl-cl*dl*Wl+cl*Al*bl-hl*fl*bl)+F[11]*(+Da*Al*kl-Da*pl*Wl-hl*dl*kl+ll*dl*Wl+hl*pl*bl-ll*Al*bl)+F[15]*(-cl*pl*bl-Da*fl*kl+Da*pl*Dl+cl*dl*kl-ll*dl*Dl+ll*fl*bl)}transpose(){const F=this.elements;let Da;return Da=F[1],F[1]=F[4],F[4]=Da,Da=F[2],F[2]=F[8],F[8]=Da,Da=F[6],F[6]=F[9],F[9]=Da,Da=F[3],F[3]=F[12],F[12]=Da,Da=F[7],F[7]=F[13],F[13]=Da,Da=F[11],F[11]=F[14],F[14]=Da,this}setPosition(F,Da,ll){const cl=this.elements;return F.isVector3?(cl[12]=F.x,cl[13]=F.y,cl[14]=F.z):(cl[12]=F,cl[13]=Da,cl[14]=ll),this}invert(){const F=this.elements,Da=F[0],ll=F[1],cl=F[2],hl=F[3],dl=F[4],pl=F[5],fl=F[6],Al=F[7],bl=F[8],kl=F[9],Dl=F[10],Wl=F[11],Ql=F[12],wc=F[13],Sc=F[14],eu=F[15],iu=kl*Sc*Al-wc*Dl*Al+wc*fl*Wl-pl*Sc*Wl-kl*fl*eu+pl*Dl*eu,su=Ql*Dl*Al-bl*Sc*Al-Ql*fl*Wl+dl*Sc*Wl+bl*fl*eu-dl*Dl*eu,cu=bl*wc*Al-Ql*kl*Al+Ql*pl*Wl-dl*wc*Wl-bl*pl*eu+dl*kl*eu,uu=Ql*kl*fl-bl*wc*fl-Ql*pl*Dl+dl*wc*Dl+bl*pl*Sc-dl*kl*Sc,hu=Da*iu+ll*su+cl*cu+hl*uu;if(0===hu)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Lu=1/hu;return F[0]=iu*Lu,F[1]=(wc*Dl*hl-kl*Sc*hl-wc*cl*Wl+ll*Sc*Wl+kl*cl*eu-ll*Dl*eu)*Lu,F[2]=(pl*Sc*hl-wc*fl*hl+wc*cl*Al-ll*Sc*Al-pl*cl*eu+ll*fl*eu)*Lu,F[3]=(kl*fl*hl-pl*Dl*hl-kl*cl*Al+ll*Dl*Al+pl*cl*Wl-ll*fl*Wl)*Lu,F[4]=su*Lu,F[5]=(bl*Sc*hl-Ql*Dl*hl+Ql*cl*Wl-Da*Sc*Wl-bl*cl*eu+Da*Dl*eu)*Lu,F[6]=(Ql*fl*hl-dl*Sc*hl-Ql*cl*Al+Da*Sc*Al+dl*cl*eu-Da*fl*eu)*Lu,F[7]=(dl*Dl*hl-bl*fl*hl+bl*cl*Al-Da*Dl*Al-dl*cl*Wl+Da*fl*Wl)*Lu,F[8]=cu*Lu,F[9]=(Ql*kl*hl-bl*wc*hl-Ql*ll*Wl+Da*wc*Wl+bl*ll*eu-Da*kl*eu)*Lu,F[10]=(dl*wc*hl-Ql*pl*hl+Ql*ll*Al-Da*wc*Al-dl*ll*eu+Da*pl*eu)*Lu,F[11]=(bl*pl*hl-dl*kl*hl-bl*ll*Al+Da*kl*Al+dl*ll*Wl-Da*pl*Wl)*Lu,F[12]=uu*Lu,F[13]=(bl*wc*cl-Ql*kl*cl+Ql*ll*Dl-Da*wc*Dl-bl*ll*Sc+Da*kl*Sc)*Lu,F[14]=(Ql*pl*cl-dl*wc*cl-Ql*ll*fl+Da*wc*fl+dl*ll*Sc-Da*pl*Sc)*Lu,F[15]=(dl*kl*cl-bl*pl*cl+bl*ll*fl-Da*kl*fl-dl*ll*Dl+Da*pl*Dl)*Lu,this}scale(F){const Da=this.elements,ll=F.x,cl=F.y,hl=F.z;return Da[0]*=ll,Da[4]*=cl,Da[8]*=hl,Da[1]*=ll,Da[5]*=cl,Da[9]*=hl,Da[2]*=ll,Da[6]*=cl,Da[10]*=hl,Da[3]*=ll,Da[7]*=cl,Da[11]*=hl,this}getMaxScaleOnAxis(){const F=this.elements,Da=F[0]*F[0]+F[1]*F[1]+F[2]*F[2],ll=F[4]*F[4]+F[5]*F[5]+F[6]*F[6],cl=F[8]*F[8]+F[9]*F[9]+F[10]*F[10];return Math.sqrt(Math.max(Da,ll,cl))}makeTranslation(F,Da,ll){return F.isVector3?this.set(1,0,0,F.x,0,1,0,F.y,0,0,1,F.z,0,0,0,1):this.set(1,0,0,F,0,1,0,Da,0,0,1,ll,0,0,0,1),this}makeRotationX(F){const Da=Math.cos(F),ll=Math.sin(F);return this.set(1,0,0,0,0,Da,-ll,0,0,ll,Da,0,0,0,0,1),this}makeRotationY(F){const Da=Math.cos(F),ll=Math.sin(F);return this.set(Da,0,ll,0,0,1,0,0,-ll,0,Da,0,0,0,0,1),this}makeRotationZ(F){const Da=Math.cos(F),ll=Math.sin(F);return this.set(Da,-ll,0,0,ll,Da,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(F,Da){const ll=Math.cos(Da),cl=Math.sin(Da),hl=1-ll,dl=F.x,pl=F.y,fl=F.z,Al=hl*dl,bl=hl*pl;return this.set(Al*dl+ll,Al*pl-cl*fl,Al*fl+cl*pl,0,Al*pl+cl*fl,bl*pl+ll,bl*fl-cl*dl,0,Al*fl-cl*pl,bl*fl+cl*dl,hl*fl*fl+ll,0,0,0,0,1),this}makeScale(F,Da,ll){return this.set(F,0,0,0,0,Da,0,0,0,0,ll,0,0,0,0,1),this}makeShear(F,Da,ll,cl,hl,dl){return this.set(1,ll,hl,0,F,1,dl,0,Da,cl,1,0,0,0,0,1),this}compose(F,Da,ll){const cl=this.elements,hl=Da._x,dl=Da._y,pl=Da._z,fl=Da._w,Al=hl+hl,bl=dl+dl,kl=pl+pl,Dl=hl*Al,Wl=hl*bl,Ql=hl*kl,wc=dl*bl,Sc=dl*kl,eu=pl*kl,iu=fl*Al,su=fl*bl,cu=fl*kl,uu=ll.x,hu=ll.y,Lu=ll.z;return cl[0]=(1-(wc+eu))*uu,cl[1]=(Wl+cu)*uu,cl[2]=(Ql-su)*uu,cl[3]=0,cl[4]=(Wl-cu)*hu,cl[5]=(1-(Dl+eu))*hu,cl[6]=(Sc+iu)*hu,cl[7]=0,cl[8]=(Ql+su)*Lu,cl[9]=(Sc-iu)*Lu,cl[10]=(1-(Dl+wc))*Lu,cl[11]=0,cl[12]=F.x,cl[13]=F.y,cl[14]=F.z,cl[15]=1,this}decompose(F,Da,ll){const cl=this.elements;let hl=Rm.set(cl[0],cl[1],cl[2]).length();const dl=Rm.set(cl[4],cl[5],cl[6]).length(),pl=Rm.set(cl[8],cl[9],cl[10]).length();this.determinant()<0&&(hl=-hl),F.x=cl[12],F.y=cl[13],F.z=cl[14],Nm.copy(this);const fl=1/hl,Al=1/dl,bl=1/pl;return Nm.elements[0]*=fl,Nm.elements[1]*=fl,Nm.elements[2]*=fl,Nm.elements[4]*=Al,Nm.elements[5]*=Al,Nm.elements[6]*=Al,Nm.elements[8]*=bl,Nm.elements[9]*=bl,Nm.elements[10]*=bl,Da.setFromRotationMatrix(Nm),ll.x=hl,ll.y=dl,ll.z=pl,this}makePerspective(F,Da,ll,cl,hl,dl,pl){void 0===pl&&(pl=Wp);const fl=this.elements,Al=2*hl/(Da-F),bl=2*hl/(ll-cl),kl=(Da+F)/(Da-F),Dl=(ll+cl)/(ll-cl);let Wl,Ql;if(pl===Wp)Wl=-(dl+hl)/(dl-hl),Ql=-2*dl*hl/(dl-hl);else{if(pl!==Kp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+pl);Wl=-dl/(dl-hl),Ql=-dl*hl/(dl-hl)}return fl[0]=Al,fl[4]=0,fl[8]=kl,fl[12]=0,fl[1]=0,fl[5]=bl,fl[9]=Dl,fl[13]=0,fl[2]=0,fl[6]=0,fl[10]=Wl,fl[14]=Ql,fl[3]=0,fl[7]=0,fl[11]=-1,fl[15]=0,this}makeOrthographic(F,Da,ll,cl,hl,dl,pl){void 0===pl&&(pl=Wp);const fl=this.elements,Al=1/(Da-F),bl=1/(ll-cl),kl=1/(dl-hl),Dl=(Da+F)*Al,Wl=(ll+cl)*bl;let Ql,wc;if(pl===Wp)Ql=(dl+hl)*kl,wc=-2*kl;else{if(pl!==Kp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+pl);Ql=hl*kl,wc=-1*kl}return fl[0]=2*Al,fl[4]=0,fl[8]=0,fl[12]=-Dl,fl[1]=0,fl[5]=2*bl,fl[9]=0,fl[13]=-Wl,fl[2]=0,fl[6]=0,fl[10]=wc,fl[14]=-Ql,fl[3]=0,fl[7]=0,fl[11]=0,fl[15]=1,this}equals(F){const Da=this.elements,ll=F.elements;for(let cl=0;cl<16;cl++)if(Da[cl]!==ll[cl])return!1;return!0}fromArray(F,Da){void 0===Da&&(Da=0);for(let ll=0;ll<16;ll++)this.elements[ll]=F[ll+Da];return this}toArray(F,Da){void 0===F&&(F=[]),void 0===Da&&(Da=0);const ll=this.elements;return F[Da]=ll[0],F[Da+1]=ll[1],F[Da+2]=ll[2],F[Da+3]=ll[3],F[Da+4]=ll[4],F[Da+5]=ll[5],F[Da+6]=ll[6],F[Da+7]=ll[7],F[Da+8]=ll[8],F[Da+9]=ll[9],F[Da+10]=ll[10],F[Da+11]=ll[11],F[Da+12]=ll[12],F[Da+13]=ll[13],F[Da+14]=ll[14],F[Da+15]=ll[15],F}}const Rm=new Vector3,Nm=new Matrix4,Um=new Vector3(0,0,0),Bm=new Vector3(1,1,1),Om=new Vector3,Fm=new Vector3,jm=new Vector3,Vm=new Matrix4,Gm=new Quaternion;class Euler{constructor(F,Da,ll,cl){void 0===F&&(F=0),void 0===Da&&(Da=0),void 0===ll&&(ll=0),void 0===cl&&(cl=Euler.DEFAULT_ORDER),this.isEuler=!0,this._x=F,this._y=Da,this._z=ll,this._order=cl}get x(){return this._x}set x(F){this._x=F,this._onChangeCallback()}get y(){return this._y}set y(F){this._y=F,this._onChangeCallback()}get z(){return this._z}set z(F){this._z=F,this._onChangeCallback()}get order(){return this._order}set order(F){this._order=F,this._onChangeCallback()}set(F,Da,ll,cl){return void 0===cl&&(cl=this._order),this._x=F,this._y=Da,this._z=ll,this._order=cl,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(F){return this._x=F._x,this._y=F._y,this._z=F._z,this._order=F._order,this._onChangeCallback(),this}setFromRotationMatrix(F,Da,ll){void 0===Da&&(Da=this._order),void 0===ll&&(ll=!0);const cl=F.elements,hl=cl[0],dl=cl[4],pl=cl[8],fl=cl[1],Al=cl[5],bl=cl[9],kl=cl[2],Dl=cl[6],Wl=cl[10];switch(Da){case"XYZ":this._y=Math.asin(clamp(pl,-1,1)),Math.abs(pl)<.9999999?(this._x=Math.atan2(-bl,Wl),this._z=Math.atan2(-dl,hl)):(this._x=Math.atan2(Dl,Al),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(bl,-1,1)),Math.abs(bl)<.9999999?(this._y=Math.atan2(pl,Wl),this._z=Math.atan2(fl,Al)):(this._y=Math.atan2(-kl,hl),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(Dl,-1,1)),Math.abs(Dl)<.9999999?(this._y=Math.atan2(-kl,Wl),this._z=Math.atan2(-dl,Al)):(this._y=0,this._z=Math.atan2(fl,hl));break;case"ZYX":this._y=Math.asin(-clamp(kl,-1,1)),Math.abs(kl)<.9999999?(this._x=Math.atan2(Dl,Wl),this._z=Math.atan2(fl,hl)):(this._x=0,this._z=Math.atan2(-dl,Al));break;case"YZX":this._z=Math.asin(clamp(fl,-1,1)),Math.abs(fl)<.9999999?(this._x=Math.atan2(-bl,Al),this._y=Math.atan2(-kl,hl)):(this._x=0,this._y=Math.atan2(pl,Wl));break;case"XZY":this._z=Math.asin(-clamp(dl,-1,1)),Math.abs(dl)<.9999999?(this._x=Math.atan2(Dl,Al),this._y=Math.atan2(pl,hl)):(this._x=Math.atan2(-bl,Wl),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Da)}return this._order=Da,!0===ll&&this._onChangeCallback(),this}setFromQuaternion(F,Da,ll){return Vm.makeRotationFromQuaternion(F),this.setFromRotationMatrix(Vm,Da,ll)}setFromVector3(F,Da){return void 0===Da&&(Da=this._order),this.set(F.x,F.y,F.z,Da)}reorder(F){return Gm.setFromEuler(this),this.setFromQuaternion(Gm,F)}equals(F){return F._x===this._x&&F._y===this._y&&F._z===this._z&&F._order===this._order}fromArray(F){return this._x=F[0],this._y=F[1],this._z=F[2],void 0!==F[3]&&(this._order=F[3]),this._onChangeCallback(),this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this._x,F[Da+1]=this._y,F[Da+2]=this._z,F[Da+3]=this._order,F}_onChange(F){return this._onChangeCallback=F,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(F){this.mask=1<<F>>>0}enable(F){this.mask|=1<<F}enableAll(){this.mask=-1}toggle(F){this.mask^=1<<F}disable(F){this.mask&=~(1<<F)}disableAll(){this.mask=0}test(F){return 0!==(this.mask&F.mask)}isEnabled(F){return 0!==(this.mask&1<<F)}}let qm=0;const Hm=new Vector3,Zm=new Quaternion,Wm=new Matrix4,Km=new Vector3,Qm=new Vector3,Xm=new Vector3,Ym=new Quaternion,Jm=new Vector3(1,0,0),$m=new Vector3(0,1,0),ef=new Vector3(0,0,1),tf={type:"added"},nf={type:"removed"},rf={type:"childadded",child:null},af={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qm++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const F=new Vector3,Da=new Euler,ll=new Quaternion,cl=new Vector3(1,1,1);Da._onChange((function(){ll.setFromEuler(Da,!1)})),ll._onChange((function(){Da.setFromQuaternion(ll,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:F},rotation:{configurable:!0,enumerable:!0,value:Da},quaternion:{configurable:!0,enumerable:!0,value:ll},scale:{configurable:!0,enumerable:!0,value:cl},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(F){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(F),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(F){return this.quaternion.premultiply(F),this}setRotationFromAxisAngle(F,Da){this.quaternion.setFromAxisAngle(F,Da)}setRotationFromEuler(F){this.quaternion.setFromEuler(F,!0)}setRotationFromMatrix(F){this.quaternion.setFromRotationMatrix(F)}setRotationFromQuaternion(F){this.quaternion.copy(F)}rotateOnAxis(F,Da){return Zm.setFromAxisAngle(F,Da),this.quaternion.multiply(Zm),this}rotateOnWorldAxis(F,Da){return Zm.setFromAxisAngle(F,Da),this.quaternion.premultiply(Zm),this}rotateX(F){return this.rotateOnAxis(Jm,F)}rotateY(F){return this.rotateOnAxis($m,F)}rotateZ(F){return this.rotateOnAxis(ef,F)}translateOnAxis(F,Da){return Hm.copy(F).applyQuaternion(this.quaternion),this.position.add(Hm.multiplyScalar(Da)),this}translateX(F){return this.translateOnAxis(Jm,F)}translateY(F){return this.translateOnAxis($m,F)}translateZ(F){return this.translateOnAxis(ef,F)}localToWorld(F){return this.updateWorldMatrix(!0,!1),F.applyMatrix4(this.matrixWorld)}worldToLocal(F){return this.updateWorldMatrix(!0,!1),F.applyMatrix4(Wm.copy(this.matrixWorld).invert())}lookAt(F,Da,ll){F.isVector3?Km.copy(F):Km.set(F,Da,ll);const cl=this.parent;this.updateWorldMatrix(!0,!1),Qm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wm.lookAt(Qm,Km,this.up):Wm.lookAt(Km,Qm,this.up),this.quaternion.setFromRotationMatrix(Wm),cl&&(Wm.extractRotation(cl.matrixWorld),Zm.setFromRotationMatrix(Wm),this.quaternion.premultiply(Zm.invert()))}add(F){if(arguments.length>1){for(let F=0;F<arguments.length;F++)this.add(arguments[F]);return this}return F===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",F),this):(F&&F.isObject3D?(F.removeFromParent(),F.parent=this,this.children.push(F),F.dispatchEvent(tf),rf.child=F,this.dispatchEvent(rf),rf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",F),this)}remove(F){if(arguments.length>1){for(let F=0;F<arguments.length;F++)this.remove(arguments[F]);return this}const Da=this.children.indexOf(F);return-1!==Da&&(F.parent=null,this.children.splice(Da,1),F.dispatchEvent(nf),af.child=F,this.dispatchEvent(af),af.child=null),this}removeFromParent(){const F=this.parent;return null!==F&&F.remove(this),this}clear(){return this.remove(...this.children)}attach(F){return this.updateWorldMatrix(!0,!1),Wm.copy(this.matrixWorld).invert(),null!==F.parent&&(F.parent.updateWorldMatrix(!0,!1),Wm.multiply(F.parent.matrixWorld)),F.applyMatrix4(Wm),F.removeFromParent(),F.parent=this,this.children.push(F),F.updateWorldMatrix(!1,!0),F.dispatchEvent(tf),rf.child=F,this.dispatchEvent(rf),rf.child=null,this}getObjectById(F){return this.getObjectByProperty("id",F)}getObjectByName(F){return this.getObjectByProperty("name",F)}getObjectByProperty(F,Da){if(this[F]===Da)return this;for(let ll=0,cl=this.children.length;ll<cl;ll++){const cl=this.children[ll].getObjectByProperty(F,Da);if(void 0!==cl)return cl}}getObjectsByProperty(F,Da,ll){void 0===ll&&(ll=[]),this[F]===Da&&ll.push(this);const cl=this.children;for(let hl=0,dl=cl.length;hl<dl;hl++)cl[hl].getObjectsByProperty(F,Da,ll);return ll}getWorldPosition(F){return this.updateWorldMatrix(!0,!1),F.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(F){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,F,Xm),F}getWorldScale(F){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,Ym,F),F}getWorldDirection(F){this.updateWorldMatrix(!0,!1);const Da=this.matrixWorld.elements;return F.set(Da[8],Da[9],Da[10]).normalize()}raycast(){}traverse(F){F(this);const Da=this.children;for(let ll=0,cl=Da.length;ll<cl;ll++)Da[ll].traverse(F)}traverseVisible(F){if(!1===this.visible)return;F(this);const Da=this.children;for(let ll=0,cl=Da.length;ll<cl;ll++)Da[ll].traverseVisible(F)}traverseAncestors(F){const Da=this.parent;null!==Da&&(F(Da),Da.traverseAncestors(F))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(F){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||F)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,F=!0);const Da=this.children;for(let ll=0,cl=Da.length;ll<cl;ll++){Da[ll].updateMatrixWorld(F)}}updateWorldMatrix(F,Da){const ll=this.parent;if(!0===F&&null!==ll&&ll.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===Da){const F=this.children;for(let Da=0,ll=F.length;Da<ll;Da++){F[Da].updateWorldMatrix(!1,!0)}}}toJSON(F){const Da=void 0===F||"string"===typeof F,ll={};Da&&(F={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ll.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const cl={};function serialize(Da,ll){return void 0===Da[ll.uuid]&&(Da[ll.uuid]=ll.toJSON(F)),ll.uuid}if(cl.uuid=this.uuid,cl.type=this.type,""!==this.name&&(cl.name=this.name),!0===this.castShadow&&(cl.castShadow=!0),!0===this.receiveShadow&&(cl.receiveShadow=!0),!1===this.visible&&(cl.visible=!1),!1===this.frustumCulled&&(cl.frustumCulled=!1),0!==this.renderOrder&&(cl.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(cl.userData=this.userData),cl.layers=this.layers.mask,cl.matrix=this.matrix.toArray(),cl.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(cl.matrixAutoUpdate=!1),this.isInstancedMesh&&(cl.type="InstancedMesh",cl.count=this.count,cl.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(cl.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(cl.type="BatchedMesh",cl.perObjectFrustumCulled=this.perObjectFrustumCulled,cl.sortObjects=this.sortObjects,cl.drawRanges=this._drawRanges,cl.reservedRanges=this._reservedRanges,cl.visibility=this._visibility,cl.active=this._active,cl.bounds=this._bounds.map((F=>({boxInitialized:F.boxInitialized,boxMin:F.box.min.toArray(),boxMax:F.box.max.toArray(),sphereInitialized:F.sphereInitialized,sphereRadius:F.sphere.radius,sphereCenter:F.sphere.center.toArray()}))),cl.maxInstanceCount=this._maxInstanceCount,cl.maxVertexCount=this._maxVertexCount,cl.maxIndexCount=this._maxIndexCount,cl.geometryInitialized=this._geometryInitialized,cl.geometryCount=this._geometryCount,cl.matricesTexture=this._matricesTexture.toJSON(F),null!==this._colorsTexture&&(cl.colorsTexture=this._colorsTexture.toJSON(F)),null!==this.boundingSphere&&(cl.boundingSphere={center:cl.boundingSphere.center.toArray(),radius:cl.boundingSphere.radius}),null!==this.boundingBox&&(cl.boundingBox={min:cl.boundingBox.min.toArray(),max:cl.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?cl.background=this.background.toJSON():this.background.isTexture&&(cl.background=this.background.toJSON(F).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(cl.environment=this.environment.toJSON(F).uuid);else if(this.isMesh||this.isLine||this.isPoints){cl.geometry=serialize(F.geometries,this.geometry);const Da=this.geometry.parameters;if(void 0!==Da&&void 0!==Da.shapes){const ll=Da.shapes;if(Array.isArray(ll))for(let Da=0,cl=ll.length;Da<cl;Da++){const cl=ll[Da];serialize(F.shapes,cl)}else serialize(F.shapes,ll)}}if(this.isSkinnedMesh&&(cl.bindMode=this.bindMode,cl.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(F.skeletons,this.skeleton),cl.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const Da=[];for(let ll=0,cl=this.material.length;ll<cl;ll++)Da.push(serialize(F.materials,this.material[ll]));cl.material=Da}else cl.material=serialize(F.materials,this.material);if(this.children.length>0){cl.children=[];for(let Da=0;Da<this.children.length;Da++)cl.children.push(this.children[Da].toJSON(F).object)}if(this.animations.length>0){cl.animations=[];for(let Da=0;Da<this.animations.length;Da++){const ll=this.animations[Da];cl.animations.push(serialize(F.animations,ll))}}if(Da){const Da=extractFromCache(F.geometries),cl=extractFromCache(F.materials),hl=extractFromCache(F.textures),dl=extractFromCache(F.images),pl=extractFromCache(F.shapes),fl=extractFromCache(F.skeletons),Al=extractFromCache(F.animations),bl=extractFromCache(F.nodes);Da.length>0&&(ll.geometries=Da),cl.length>0&&(ll.materials=cl),hl.length>0&&(ll.textures=hl),dl.length>0&&(ll.images=dl),pl.length>0&&(ll.shapes=pl),fl.length>0&&(ll.skeletons=fl),Al.length>0&&(ll.animations=Al),bl.length>0&&(ll.nodes=bl)}return ll.object=cl,ll;function extractFromCache(F){const Da=[];for(const ll in F){const cl=F[ll];delete cl.metadata,Da.push(cl)}return Da}}clone(F){return(new this.constructor).copy(this,F)}copy(F,Da){if(void 0===Da&&(Da=!0),this.name=F.name,this.up.copy(F.up),this.position.copy(F.position),this.rotation.order=F.rotation.order,this.quaternion.copy(F.quaternion),this.scale.copy(F.scale),this.matrix.copy(F.matrix),this.matrixWorld.copy(F.matrixWorld),this.matrixAutoUpdate=F.matrixAutoUpdate,this.matrixWorldAutoUpdate=F.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=F.matrixWorldNeedsUpdate,this.layers.mask=F.layers.mask,this.visible=F.visible,this.castShadow=F.castShadow,this.receiveShadow=F.receiveShadow,this.frustumCulled=F.frustumCulled,this.renderOrder=F.renderOrder,this.animations=F.animations.slice(),this.userData=JSON.parse(JSON.stringify(F.userData)),!0===Da)for(let ll=0;ll<F.children.length;ll++){const Da=F.children[ll];this.add(Da.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sf=new Vector3,of=new Vector3,lf=new Vector3,cf=new Vector3,uf=new Vector3,hf=new Vector3,df=new Vector3,pf=new Vector3,mf=new Vector3,ff=new Vector3;class Triangle{constructor(F,Da,ll){void 0===F&&(F=new Vector3),void 0===Da&&(Da=new Vector3),void 0===ll&&(ll=new Vector3),this.a=F,this.b=Da,this.c=ll}static getNormal(F,Da,ll,cl){cl.subVectors(ll,Da),sf.subVectors(F,Da),cl.cross(sf);const hl=cl.lengthSq();return hl>0?cl.multiplyScalar(1/Math.sqrt(hl)):cl.set(0,0,0)}static getBarycoord(F,Da,ll,cl,hl){sf.subVectors(cl,Da),of.subVectors(ll,Da),lf.subVectors(F,Da);const dl=sf.dot(sf),pl=sf.dot(of),fl=sf.dot(lf),Al=of.dot(of),bl=of.dot(lf),kl=dl*Al-pl*pl;if(0===kl)return hl.set(0,0,0),null;const Dl=1/kl,Wl=(Al*fl-pl*bl)*Dl,Ql=(dl*bl-pl*fl)*Dl;return hl.set(1-Wl-Ql,Ql,Wl)}static containsPoint(F,Da,ll,cl){return null!==this.getBarycoord(F,Da,ll,cl,cf)&&(cf.x>=0&&cf.y>=0&&cf.x+cf.y<=1)}static getInterpolation(F,Da,ll,cl,hl,dl,pl,fl){return null===this.getBarycoord(F,Da,ll,cl,cf)?(fl.x=0,fl.y=0,"z"in fl&&(fl.z=0),"w"in fl&&(fl.w=0),null):(fl.setScalar(0),fl.addScaledVector(hl,cf.x),fl.addScaledVector(dl,cf.y),fl.addScaledVector(pl,cf.z),fl)}static isFrontFacing(F,Da,ll,cl){return sf.subVectors(ll,Da),of.subVectors(F,Da),sf.cross(of).dot(cl)<0}set(F,Da,ll){return this.a.copy(F),this.b.copy(Da),this.c.copy(ll),this}setFromPointsAndIndices(F,Da,ll,cl){return this.a.copy(F[Da]),this.b.copy(F[ll]),this.c.copy(F[cl]),this}setFromAttributeAndIndices(F,Da,ll,cl){return this.a.fromBufferAttribute(F,Da),this.b.fromBufferAttribute(F,ll),this.c.fromBufferAttribute(F,cl),this}clone(){return(new this.constructor).copy(this)}copy(F){return this.a.copy(F.a),this.b.copy(F.b),this.c.copy(F.c),this}getArea(){return sf.subVectors(this.c,this.b),of.subVectors(this.a,this.b),.5*sf.cross(of).length()}getMidpoint(F){return F.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(F){return Triangle.getNormal(this.a,this.b,this.c,F)}getPlane(F){return F.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(F,Da){return Triangle.getBarycoord(F,this.a,this.b,this.c,Da)}getInterpolation(F,Da,ll,cl,hl){return Triangle.getInterpolation(F,this.a,this.b,this.c,Da,ll,cl,hl)}containsPoint(F){return Triangle.containsPoint(F,this.a,this.b,this.c)}isFrontFacing(F){return Triangle.isFrontFacing(this.a,this.b,this.c,F)}intersectsBox(F){return F.intersectsTriangle(this)}closestPointToPoint(F,Da){const ll=this.a,cl=this.b,hl=this.c;let dl,pl;uf.subVectors(cl,ll),hf.subVectors(hl,ll),pf.subVectors(F,ll);const fl=uf.dot(pf),Al=hf.dot(pf);if(fl<=0&&Al<=0)return Da.copy(ll);mf.subVectors(F,cl);const bl=uf.dot(mf),kl=hf.dot(mf);if(bl>=0&&kl<=bl)return Da.copy(cl);const Dl=fl*kl-bl*Al;if(Dl<=0&&fl>=0&&bl<=0)return dl=fl/(fl-bl),Da.copy(ll).addScaledVector(uf,dl);ff.subVectors(F,hl);const Wl=uf.dot(ff),Ql=hf.dot(ff);if(Ql>=0&&Wl<=Ql)return Da.copy(hl);const wc=Wl*Al-fl*Ql;if(wc<=0&&Al>=0&&Ql<=0)return pl=Al/(Al-Ql),Da.copy(ll).addScaledVector(hf,pl);const Sc=bl*Ql-Wl*kl;if(Sc<=0&&kl-bl>=0&&Wl-Ql>=0)return df.subVectors(hl,cl),pl=(kl-bl)/(kl-bl+(Wl-Ql)),Da.copy(cl).addScaledVector(df,pl);const eu=1/(Sc+wc+Dl);return dl=wc*eu,pl=Dl*eu,Da.copy(ll).addScaledVector(uf,dl).addScaledVector(hf,pl)}equals(F){return F.a.equals(this.a)&&F.b.equals(this.b)&&F.c.equals(this.c)}}const gf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Af={h:0,s:0,l:0},yf={h:0,s:0,l:0};function hue2rgb(F,Da,ll){return ll<0&&(ll+=1),ll>1&&(ll-=1),ll<1/6?F+6*(Da-F)*ll:ll<.5?Da:ll<2/3?F+6*(Da-F)*(2/3-ll):F}class Color{constructor(F,Da,ll){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(F,Da,ll)}set(F,Da,ll){if(void 0===Da&&void 0===ll){const Da=F;Da&&Da.isColor?this.copy(Da):"number"===typeof Da?this.setHex(Da):"string"===typeof Da&&this.setStyle(Da)}else this.setRGB(F,Da,ll);return this}setScalar(F){return this.r=F,this.g=F,this.b=F,this}setHex(F,Da){return void 0===Da&&(Da=Tp),F=Math.floor(F),this.r=(F>>16&255)/255,this.g=(F>>8&255)/255,this.b=(255&F)/255,sm.toWorkingColorSpace(this,Da),this}setRGB(F,Da,ll,cl){return void 0===cl&&(cl=sm.workingColorSpace),this.r=F,this.g=Da,this.b=ll,sm.toWorkingColorSpace(this,cl),this}setHSL(F,Da,ll,cl){if(void 0===cl&&(cl=sm.workingColorSpace),F=euclideanModulo(F,1),Da=clamp(Da,0,1),ll=clamp(ll,0,1),0===Da)this.r=this.g=this.b=ll;else{const cl=ll<=.5?ll*(1+Da):ll+Da-ll*Da,hl=2*ll-cl;this.r=hue2rgb(hl,cl,F+1/3),this.g=hue2rgb(hl,cl,F),this.b=hue2rgb(hl,cl,F-1/3)}return sm.toWorkingColorSpace(this,cl),this}setStyle(F,Da){function handleAlpha(Da){void 0!==Da&&parseFloat(Da)<1&&console.warn("THREE.Color: Alpha component of "+F+" will be ignored.")}let ll;if(void 0===Da&&(Da=Tp),ll=/^(\w+)\(([^\)]*)\)/.exec(F)){let cl;const hl=ll[1],dl=ll[2];switch(hl){case"rgb":case"rgba":if(cl=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dl))return handleAlpha(cl[4]),this.setRGB(Math.min(255,parseInt(cl[1],10))/255,Math.min(255,parseInt(cl[2],10))/255,Math.min(255,parseInt(cl[3],10))/255,Da);if(cl=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dl))return handleAlpha(cl[4]),this.setRGB(Math.min(100,parseInt(cl[1],10))/100,Math.min(100,parseInt(cl[2],10))/100,Math.min(100,parseInt(cl[3],10))/100,Da);break;case"hsl":case"hsla":if(cl=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(dl))return handleAlpha(cl[4]),this.setHSL(parseFloat(cl[1])/360,parseFloat(cl[2])/100,parseFloat(cl[3])/100,Da);break;default:console.warn("THREE.Color: Unknown color model "+F)}}else if(ll=/^\#([A-Fa-f\d]+)$/.exec(F)){const cl=ll[1],hl=cl.length;if(3===hl)return this.setRGB(parseInt(cl.charAt(0),16)/15,parseInt(cl.charAt(1),16)/15,parseInt(cl.charAt(2),16)/15,Da);if(6===hl)return this.setHex(parseInt(cl,16),Da);console.warn("THREE.Color: Invalid hex color "+F)}else if(F&&F.length>0)return this.setColorName(F,Da);return this}setColorName(F,Da){void 0===Da&&(Da=Tp);const ll=gf[F.toLowerCase()];return void 0!==ll?this.setHex(ll,Da):console.warn("THREE.Color: Unknown color "+F),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(F){return this.r=F.r,this.g=F.g,this.b=F.b,this}copySRGBToLinear(F){return this.r=SRGBToLinear(F.r),this.g=SRGBToLinear(F.g),this.b=SRGBToLinear(F.b),this}copyLinearToSRGB(F){return this.r=LinearToSRGB(F.r),this.g=LinearToSRGB(F.g),this.b=LinearToSRGB(F.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(F){return void 0===F&&(F=Tp),sm.fromWorkingColorSpace(vf.copy(this),F),65536*Math.round(clamp(255*vf.r,0,255))+256*Math.round(clamp(255*vf.g,0,255))+Math.round(clamp(255*vf.b,0,255))}getHexString(F){return void 0===F&&(F=Tp),("000000"+this.getHex(F).toString(16)).slice(-6)}getHSL(F,Da){void 0===Da&&(Da=sm.workingColorSpace),sm.fromWorkingColorSpace(vf.copy(this),Da);const ll=vf.r,cl=vf.g,hl=vf.b,dl=Math.max(ll,cl,hl),pl=Math.min(ll,cl,hl);let fl,Al;const bl=(pl+dl)/2;if(pl===dl)fl=0,Al=0;else{const F=dl-pl;switch(Al=bl<=.5?F/(dl+pl):F/(2-dl-pl),dl){case ll:fl=(cl-hl)/F+(cl<hl?6:0);break;case cl:fl=(hl-ll)/F+2;break;case hl:fl=(ll-cl)/F+4}fl/=6}return F.h=fl,F.s=Al,F.l=bl,F}getRGB(F,Da){return void 0===Da&&(Da=sm.workingColorSpace),sm.fromWorkingColorSpace(vf.copy(this),Da),F.r=vf.r,F.g=vf.g,F.b=vf.b,F}getStyle(F){void 0===F&&(F=Tp),sm.fromWorkingColorSpace(vf.copy(this),F);const Da=vf.r,ll=vf.g,cl=vf.b;return F!==Tp?`color(${F} ${Da.toFixed(3)} ${ll.toFixed(3)} ${cl.toFixed(3)})`:`rgb(${Math.round(255*Da)},${Math.round(255*ll)},${Math.round(255*cl)})`}offsetHSL(F,Da,ll){return this.getHSL(Af),this.setHSL(Af.h+F,Af.s+Da,Af.l+ll)}add(F){return this.r+=F.r,this.g+=F.g,this.b+=F.b,this}addColors(F,Da){return this.r=F.r+Da.r,this.g=F.g+Da.g,this.b=F.b+Da.b,this}addScalar(F){return this.r+=F,this.g+=F,this.b+=F,this}sub(F){return this.r=Math.max(0,this.r-F.r),this.g=Math.max(0,this.g-F.g),this.b=Math.max(0,this.b-F.b),this}multiply(F){return this.r*=F.r,this.g*=F.g,this.b*=F.b,this}multiplyScalar(F){return this.r*=F,this.g*=F,this.b*=F,this}lerp(F,Da){return this.r+=(F.r-this.r)*Da,this.g+=(F.g-this.g)*Da,this.b+=(F.b-this.b)*Da,this}lerpColors(F,Da,ll){return this.r=F.r+(Da.r-F.r)*ll,this.g=F.g+(Da.g-F.g)*ll,this.b=F.b+(Da.b-F.b)*ll,this}lerpHSL(F,Da){this.getHSL(Af),F.getHSL(yf);const ll=lerp(Af.h,yf.h,Da),cl=lerp(Af.s,yf.s,Da),hl=lerp(Af.l,yf.l,Da);return this.setHSL(ll,cl,hl),this}setFromVector3(F){return this.r=F.x,this.g=F.y,this.b=F.z,this}applyMatrix3(F){const Da=this.r,ll=this.g,cl=this.b,hl=F.elements;return this.r=hl[0]*Da+hl[3]*ll+hl[6]*cl,this.g=hl[1]*Da+hl[4]*ll+hl[7]*cl,this.b=hl[2]*Da+hl[5]*ll+hl[8]*cl,this}equals(F){return F.r===this.r&&F.g===this.g&&F.b===this.b}fromArray(F,Da){return void 0===Da&&(Da=0),this.r=F[Da],this.g=F[Da+1],this.b=F[Da+2],this}toArray(F,Da){return void 0===F&&(F=[]),void 0===Da&&(Da=0),F[Da]=this.r,F[Da+1]=this.g,F[Da+2]=this.b,F}fromBufferAttribute(F,Da){return this.r=F.getX(Da),this.g=F.getY(Da),this.b=F.getZ(Da),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vf=new Color;Color.NAMES=gf;let _f=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_f++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=fl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Np,this.stencilZFail=Np,this.stencilZPass=Np,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(F){this._alphaTest>0!==F>0&&this.version++,this._alphaTest=F}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(F){if(void 0!==F)for(const Da in F){const ll=F[Da];if(void 0===ll){console.warn(`THREE.Material: parameter '${Da}' has value of undefined.`);continue}const cl=this[Da];void 0!==cl?cl&&cl.isColor?cl.set(ll):cl&&cl.isVector3&&ll&&ll.isVector3?cl.copy(ll):this[Da]=ll:console.warn(`THREE.Material: '${Da}' is not a property of THREE.${this.type}.`)}}toJSON(F){const Da=void 0===F||"string"===typeof F;Da&&(F={textures:{},images:{}});const ll={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function extractFromCache(F){const Da=[];for(const ll in F){const cl=F[ll];delete cl.metadata,Da.push(cl)}return Da}if(ll.uuid=this.uuid,ll.type=this.type,""!==this.name&&(ll.name=this.name),this.color&&this.color.isColor&&(ll.color=this.color.getHex()),void 0!==this.roughness&&(ll.roughness=this.roughness),void 0!==this.metalness&&(ll.metalness=this.metalness),void 0!==this.sheen&&(ll.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ll.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(ll.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ll.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(ll.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ll.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(ll.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ll.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(ll.shininess=this.shininess),void 0!==this.clearcoat&&(ll.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(ll.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ll.clearcoatMap=this.clearcoatMap.toJSON(F).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ll.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(F).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ll.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(F).uuid,ll.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(ll.dispersion=this.dispersion),void 0!==this.iridescence&&(ll.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(ll.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(ll.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ll.iridescenceMap=this.iridescenceMap.toJSON(F).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ll.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(F).uuid),void 0!==this.anisotropy&&(ll.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(ll.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(ll.anisotropyMap=this.anisotropyMap.toJSON(F).uuid),this.map&&this.map.isTexture&&(ll.map=this.map.toJSON(F).uuid),this.matcap&&this.matcap.isTexture&&(ll.matcap=this.matcap.toJSON(F).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ll.alphaMap=this.alphaMap.toJSON(F).uuid),this.lightMap&&this.lightMap.isTexture&&(ll.lightMap=this.lightMap.toJSON(F).uuid,ll.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ll.aoMap=this.aoMap.toJSON(F).uuid,ll.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ll.bumpMap=this.bumpMap.toJSON(F).uuid,ll.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ll.normalMap=this.normalMap.toJSON(F).uuid,ll.normalMapType=this.normalMapType,ll.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ll.displacementMap=this.displacementMap.toJSON(F).uuid,ll.displacementScale=this.displacementScale,ll.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ll.roughnessMap=this.roughnessMap.toJSON(F).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ll.metalnessMap=this.metalnessMap.toJSON(F).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ll.emissiveMap=this.emissiveMap.toJSON(F).uuid),this.specularMap&&this.specularMap.isTexture&&(ll.specularMap=this.specularMap.toJSON(F).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ll.specularIntensityMap=this.specularIntensityMap.toJSON(F).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ll.specularColorMap=this.specularColorMap.toJSON(F).uuid),this.envMap&&this.envMap.isTexture&&(ll.envMap=this.envMap.toJSON(F).uuid,void 0!==this.combine&&(ll.combine=this.combine)),void 0!==this.envMapRotation&&(ll.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(ll.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(ll.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(ll.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ll.gradientMap=this.gradientMap.toJSON(F).uuid),void 0!==this.transmission&&(ll.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ll.transmissionMap=this.transmissionMap.toJSON(F).uuid),void 0!==this.thickness&&(ll.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ll.thicknessMap=this.thicknessMap.toJSON(F).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(ll.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(ll.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(ll.size=this.size),null!==this.shadowSide&&(ll.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(ll.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(ll.blending=this.blending),0!==this.side&&(ll.side=this.side),!0===this.vertexColors&&(ll.vertexColors=!0),this.opacity<1&&(ll.opacity=this.opacity),!0===this.transparent&&(ll.transparent=!0),204!==this.blendSrc&&(ll.blendSrc=this.blendSrc),205!==this.blendDst&&(ll.blendDst=this.blendDst),this.blendEquation!==fl&&(ll.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(ll.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(ll.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(ll.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(ll.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(ll.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(ll.depthFunc=this.depthFunc),!1===this.depthTest&&(ll.depthTest=this.depthTest),!1===this.depthWrite&&(ll.depthWrite=this.depthWrite),!1===this.colorWrite&&(ll.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(ll.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(ll.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(ll.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(ll.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Np&&(ll.stencilFail=this.stencilFail),this.stencilZFail!==Np&&(ll.stencilZFail=this.stencilZFail),this.stencilZPass!==Np&&(ll.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(ll.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(ll.rotation=this.rotation),!0===this.polygonOffset&&(ll.polygonOffset=!0),0!==this.polygonOffsetFactor&&(ll.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(ll.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(ll.linewidth=this.linewidth),void 0!==this.dashSize&&(ll.dashSize=this.dashSize),void 0!==this.gapSize&&(ll.gapSize=this.gapSize),void 0!==this.scale&&(ll.scale=this.scale),!0===this.dithering&&(ll.dithering=!0),this.alphaTest>0&&(ll.alphaTest=this.alphaTest),!0===this.alphaHash&&(ll.alphaHash=!0),!0===this.alphaToCoverage&&(ll.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(ll.premultipliedAlpha=!0),!0===this.forceSinglePass&&(ll.forceSinglePass=!0),!0===this.wireframe&&(ll.wireframe=!0),this.wireframeLinewidth>1&&(ll.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(ll.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(ll.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(ll.flatShading=!0),!1===this.visible&&(ll.visible=!1),!1===this.toneMapped&&(ll.toneMapped=!1),!1===this.fog&&(ll.fog=!1),Object.keys(this.userData).length>0&&(ll.userData=this.userData),Da){const Da=extractFromCache(F.textures),cl=extractFromCache(F.images);Da.length>0&&(ll.textures=Da),cl.length>0&&(ll.images=cl)}return ll}clone(){return(new this.constructor).copy(this)}copy(F){this.name=F.name,this.blending=F.blending,this.side=F.side,this.vertexColors=F.vertexColors,this.opacity=F.opacity,this.transparent=F.transparent,this.blendSrc=F.blendSrc,this.blendDst=F.blendDst,this.blendEquation=F.blendEquation,this.blendSrcAlpha=F.blendSrcAlpha,this.blendDstAlpha=F.blendDstAlpha,this.blendEquationAlpha=F.blendEquationAlpha,this.blendColor.copy(F.blendColor),this.blendAlpha=F.blendAlpha,this.depthFunc=F.depthFunc,this.depthTest=F.depthTest,this.depthWrite=F.depthWrite,this.stencilWriteMask=F.stencilWriteMask,this.stencilFunc=F.stencilFunc,this.stencilRef=F.stencilRef,this.stencilFuncMask=F.stencilFuncMask,this.stencilFail=F.stencilFail,this.stencilZFail=F.stencilZFail,this.stencilZPass=F.stencilZPass,this.stencilWrite=F.stencilWrite;const Da=F.clippingPlanes;let ll=null;if(null!==Da){const F=Da.length;ll=new Array(F);for(let cl=0;cl!==F;++cl)ll[cl]=Da[cl].clone()}return this.clippingPlanes=ll,this.clipIntersection=F.clipIntersection,this.clipShadows=F.clipShadows,this.shadowSide=F.shadowSide,this.colorWrite=F.colorWrite,this.precision=F.precision,this.polygonOffset=F.polygonOffset,this.polygonOffsetFactor=F.polygonOffsetFactor,this.polygonOffsetUnits=F.polygonOffsetUnits,this.dithering=F.dithering,this.alphaTest=F.alphaTest,this.alphaHash=F.alphaHash,this.alphaToCoverage=F.alphaToCoverage,this.premultipliedAlpha=F.premultipliedAlpha,this.forceSinglePass=F.forceSinglePass,this.visible=F.visible,this.toneMapped=F.toneMapped,this.userData=JSON.parse(JSON.stringify(F.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(F){!0===F&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(F){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(F)}copy(F){return super.copy(F),this.color.copy(F.color),this.map=F.map,this.lightMap=F.lightMap,this.lightMapIntensity=F.lightMapIntensity,this.aoMap=F.aoMap,this.aoMapIntensity=F.aoMapIntensity,this.specularMap=F.specularMap,this.alphaMap=F.alphaMap,this.envMap=F.envMap,this.envMapRotation.copy(F.envMapRotation),this.combine=F.combine,this.reflectivity=F.reflectivity,this.refractionRatio=F.refractionRatio,this.wireframe=F.wireframe,this.wireframeLinewidth=F.wireframeLinewidth,this.wireframeLinecap=F.wireframeLinecap,this.wireframeLinejoin=F.wireframeLinejoin,this.fog=F.fog,this}}const xf=new Vector3,bf=new Vector2;class BufferAttribute{constructor(F,Da,ll){if(void 0===ll&&(ll=!1),Array.isArray(F))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=F,this.itemSize=Da,this.count=void 0!==F?F.length/Da:0,this.normalized=ll,this.usage=Hp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=gd,this.version=0}onUploadCallback(){}set needsUpdate(F){!0===F&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(F){return this.usage=F,this}addUpdateRange(F,Da){this.updateRanges.push({start:F,count:Da})}clearUpdateRanges(){this.updateRanges.length=0}copy(F){return this.name=F.name,this.array=new F.array.constructor(F.array),this.itemSize=F.itemSize,this.count=F.count,this.normalized=F.normalized,this.usage=F.usage,this.gpuType=F.gpuType,this}copyAt(F,Da,ll){F*=this.itemSize,ll*=Da.itemSize;for(let cl=0,hl=this.itemSize;cl<hl;cl++)this.array[F+cl]=Da.array[ll+cl];return this}copyArray(F){return this.array.set(F),this}applyMatrix3(F){if(2===this.itemSize)for(let Da=0,ll=this.count;Da<ll;Da++)bf.fromBufferAttribute(this,Da),bf.applyMatrix3(F),this.setXY(Da,bf.x,bf.y);else if(3===this.itemSize)for(let Da=0,ll=this.count;Da<ll;Da++)xf.fromBufferAttribute(this,Da),xf.applyMatrix3(F),this.setXYZ(Da,xf.x,xf.y,xf.z);return this}applyMatrix4(F){for(let Da=0,ll=this.count;Da<ll;Da++)xf.fromBufferAttribute(this,Da),xf.applyMatrix4(F),this.setXYZ(Da,xf.x,xf.y,xf.z);return this}applyNormalMatrix(F){for(let Da=0,ll=this.count;Da<ll;Da++)xf.fromBufferAttribute(this,Da),xf.applyNormalMatrix(F),this.setXYZ(Da,xf.x,xf.y,xf.z);return this}transformDirection(F){for(let Da=0,ll=this.count;Da<ll;Da++)xf.fromBufferAttribute(this,Da),xf.transformDirection(F),this.setXYZ(Da,xf.x,xf.y,xf.z);return this}set(F,Da){return void 0===Da&&(Da=0),this.array.set(F,Da),this}getComponent(F,Da){let ll=this.array[F*this.itemSize+Da];return this.normalized&&(ll=denormalize(ll,this.array)),ll}setComponent(F,Da,ll){return this.normalized&&(ll=normalize(ll,this.array)),this.array[F*this.itemSize+Da]=ll,this}getX(F){let Da=this.array[F*this.itemSize];return this.normalized&&(Da=denormalize(Da,this.array)),Da}setX(F,Da){return this.normalized&&(Da=normalize(Da,this.array)),this.array[F*this.itemSize]=Da,this}getY(F){let Da=this.array[F*this.itemSize+1];return this.normalized&&(Da=denormalize(Da,this.array)),Da}setY(F,Da){return this.normalized&&(Da=normalize(Da,this.array)),this.array[F*this.itemSize+1]=Da,this}getZ(F){let Da=this.array[F*this.itemSize+2];return this.normalized&&(Da=denormalize(Da,this.array)),Da}setZ(F,Da){return this.normalized&&(Da=normalize(Da,this.array)),this.array[F*this.itemSize+2]=Da,this}getW(F){let Da=this.array[F*this.itemSize+3];return this.normalized&&(Da=denormalize(Da,this.array)),Da}setW(F,Da){return this.normalized&&(Da=normalize(Da,this.array)),this.array[F*this.itemSize+3]=Da,this}setXY(F,Da,ll){return F*=this.itemSize,this.normalized&&(Da=normalize(Da,this.array),ll=normalize(ll,this.array)),this.array[F+0]=Da,this.array[F+1]=ll,this}setXYZ(F,Da,ll,cl){return F*=this.itemSize,this.normalized&&(Da=normalize(Da,this.array),ll=normalize(ll,this.array),cl=normalize(cl,this.array)),this.array[F+0]=Da,this.array[F+1]=ll,this.array[F+2]=cl,this}setXYZW(F,Da,ll,cl,hl){return F*=this.itemSize,this.normalized&&(Da=normalize(Da,this.array),ll=normalize(ll,this.array),cl=normalize(cl,this.array),hl=normalize(hl,this.array)),this.array[F+0]=Da,this.array[F+1]=ll,this.array[F+2]=cl,this.array[F+3]=hl,this}onUpload(F){return this.onUploadCallback=F,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const F={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(F.name=this.name),this.usage!==Hp&&(F.usage=this.usage),F}}class Uint16BufferAttribute extends BufferAttribute{constructor(F,Da,ll){super(new Uint16Array(F),Da,ll)}}class Uint32BufferAttribute extends BufferAttribute{constructor(F,Da,ll){super(new Uint32Array(F),Da,ll)}}class Float32BufferAttribute extends BufferAttribute{constructor(F,Da,ll){super(new Float32Array(F),Da,ll)}}let wf=0;const Ef=new Matrix4,Mf=new Object3D,Sf=new Vector3,kf=new Box3,Tf=new Box3,If=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wf++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(F){return Array.isArray(F)?this.index=new(arrayNeedsUint32(F)?Uint32BufferAttribute:Uint16BufferAttribute)(F,1):this.index=F,this}getAttribute(F){return this.attributes[F]}setAttribute(F,Da){return this.attributes[F]=Da,this}deleteAttribute(F){return delete this.attributes[F],this}hasAttribute(F){return void 0!==this.attributes[F]}addGroup(F,Da,ll){void 0===ll&&(ll=0),this.groups.push({start:F,count:Da,materialIndex:ll})}clearGroups(){this.groups=[]}setDrawRange(F,Da){this.drawRange.start=F,this.drawRange.count=Da}applyMatrix4(F){const Da=this.attributes.position;void 0!==Da&&(Da.applyMatrix4(F),Da.needsUpdate=!0);const ll=this.attributes.normal;if(void 0!==ll){const Da=(new Matrix3).getNormalMatrix(F);ll.applyNormalMatrix(Da),ll.needsUpdate=!0}const cl=this.attributes.tangent;return void 0!==cl&&(cl.transformDirection(F),cl.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(F){return Ef.makeRotationFromQuaternion(F),this.applyMatrix4(Ef),this}rotateX(F){return Ef.makeRotationX(F),this.applyMatrix4(Ef),this}rotateY(F){return Ef.makeRotationY(F),this.applyMatrix4(Ef),this}rotateZ(F){return Ef.makeRotationZ(F),this.applyMatrix4(Ef),this}translate(F,Da,ll){return Ef.makeTranslation(F,Da,ll),this.applyMatrix4(Ef),this}scale(F,Da,ll){return Ef.makeScale(F,Da,ll),this.applyMatrix4(Ef),this}lookAt(F){return Mf.lookAt(F),Mf.updateMatrix(),this.applyMatrix4(Mf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sf).negate(),this.translate(Sf.x,Sf.y,Sf.z),this}setFromPoints(F){const Da=[];for(let ll=0,cl=F.length;ll<cl;ll++){const cl=F[ll];Da.push(cl.x,cl.y,cl.z||0)}return this.setAttribute("position",new Float32BufferAttribute(Da,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const F=this.attributes.position,Da=this.morphAttributes.position;if(F&&F.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==F){if(this.boundingBox.setFromBufferAttribute(F),Da)for(let ll=0,cl=Da.length;ll<cl;ll++){const F=Da[ll];kf.setFromBufferAttribute(F),this.morphTargetsRelative?(If.addVectors(this.boundingBox.min,kf.min),this.boundingBox.expandByPoint(If),If.addVectors(this.boundingBox.max,kf.max),this.boundingBox.expandByPoint(If)):(this.boundingBox.expandByPoint(kf.min),this.boundingBox.expandByPoint(kf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const F=this.attributes.position,Da=this.morphAttributes.position;if(F&&F.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Vector3,1/0);if(F){const ll=this.boundingSphere.center;if(kf.setFromBufferAttribute(F),Da)for(let F=0,hl=Da.length;F<hl;F++){const ll=Da[F];Tf.setFromBufferAttribute(ll),this.morphTargetsRelative?(If.addVectors(kf.min,Tf.min),kf.expandByPoint(If),If.addVectors(kf.max,Tf.max),kf.expandByPoint(If)):(kf.expandByPoint(Tf.min),kf.expandByPoint(Tf.max))}kf.getCenter(ll);let cl=0;for(let Da=0,hl=F.count;Da<hl;Da++)If.fromBufferAttribute(F,Da),cl=Math.max(cl,ll.distanceToSquared(If));if(Da)for(let hl=0,dl=Da.length;hl<dl;hl++){const dl=Da[hl],pl=this.morphTargetsRelative;for(let Da=0,hl=dl.count;Da<hl;Da++)If.fromBufferAttribute(dl,Da),pl&&(Sf.fromBufferAttribute(F,Da),If.add(Sf)),cl=Math.max(cl,ll.distanceToSquared(If))}this.boundingSphere.radius=Math.sqrt(cl),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const F=this.index,Da=this.attributes;if(null===F||void 0===Da.position||void 0===Da.normal||void 0===Da.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const ll=Da.position,cl=Da.normal,hl=Da.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ll.count),4));const dl=this.getAttribute("tangent"),pl=[],fl=[];for(let hu=0;hu<ll.count;hu++)pl[hu]=new Vector3,fl[hu]=new Vector3;const Al=new Vector3,bl=new Vector3,kl=new Vector3,Dl=new Vector2,Wl=new Vector2,Ql=new Vector2,wc=new Vector3,Sc=new Vector3;function handleTriangle(F,Da,cl){Al.fromBufferAttribute(ll,F),bl.fromBufferAttribute(ll,Da),kl.fromBufferAttribute(ll,cl),Dl.fromBufferAttribute(hl,F),Wl.fromBufferAttribute(hl,Da),Ql.fromBufferAttribute(hl,cl),bl.sub(Al),kl.sub(Al),Wl.sub(Dl),Ql.sub(Dl);const dl=1/(Wl.x*Ql.y-Ql.x*Wl.y);isFinite(dl)&&(wc.copy(bl).multiplyScalar(Ql.y).addScaledVector(kl,-Wl.y).multiplyScalar(dl),Sc.copy(kl).multiplyScalar(Wl.x).addScaledVector(bl,-Ql.x).multiplyScalar(dl),pl[F].add(wc),pl[Da].add(wc),pl[cl].add(wc),fl[F].add(Sc),fl[Da].add(Sc),fl[cl].add(Sc))}let eu=this.groups;0===eu.length&&(eu=[{start:0,count:F.count}]);for(let hu=0,Lu=eu.length;hu<Lu;++hu){const Da=eu[hu],ll=Da.start;for(let cl=ll,hl=ll+Da.count;cl<hl;cl+=3)handleTriangle(F.getX(cl+0),F.getX(cl+1),F.getX(cl+2))}const iu=new Vector3,su=new Vector3,cu=new Vector3,uu=new Vector3;function handleVertex(F){cu.fromBufferAttribute(cl,F),uu.copy(cu);const Da=pl[F];iu.copy(Da),iu.sub(cu.multiplyScalar(cu.dot(Da))).normalize(),su.crossVectors(uu,Da);const ll=su.dot(fl[F])<0?-1:1;dl.setXYZW(F,iu.x,iu.y,iu.z,ll)}for(let hu=0,Lu=eu.length;hu<Lu;++hu){const Da=eu[hu],ll=Da.start;for(let cl=ll,hl=ll+Da.count;cl<hl;cl+=3)handleVertex(F.getX(cl+0)),handleVertex(F.getX(cl+1)),handleVertex(F.getX(cl+2))}}computeVertexNormals(){const F=this.index,Da=this.getAttribute("position");if(void 0!==Da){let ll=this.getAttribute("normal");if(void 0===ll)ll=new BufferAttribute(new Float32Array(3*Da.count),3),this.setAttribute("normal",ll);else for(let F=0,Da=ll.count;F<Da;F++)ll.setXYZ(F,0,0,0);const cl=new Vector3,hl=new Vector3,dl=new Vector3,pl=new Vector3,fl=new Vector3,Al=new Vector3,bl=new Vector3,kl=new Vector3;if(F)for(let Dl=0,Wl=F.count;Dl<Wl;Dl+=3){const Wl=F.getX(Dl+0),Ql=F.getX(Dl+1),wc=F.getX(Dl+2);cl.fromBufferAttribute(Da,Wl),hl.fromBufferAttribute(Da,Ql),dl.fromBufferAttribute(Da,wc),bl.subVectors(dl,hl),kl.subVectors(cl,hl),bl.cross(kl),pl.fromBufferAttribute(ll,Wl),fl.fromBufferAttribute(ll,Ql),Al.fromBufferAttribute(ll,wc),pl.add(bl),fl.add(bl),Al.add(bl),ll.setXYZ(Wl,pl.x,pl.y,pl.z),ll.setXYZ(Ql,fl.x,fl.y,fl.z),ll.setXYZ(wc,Al.x,Al.y,Al.z)}else for(let F=0,Dl=Da.count;F<Dl;F+=3)cl.fromBufferAttribute(Da,F+0),hl.fromBufferAttribute(Da,F+1),dl.fromBufferAttribute(Da,F+2),bl.subVectors(dl,hl),kl.subVectors(cl,hl),bl.cross(kl),ll.setXYZ(F+0,bl.x,bl.y,bl.z),ll.setXYZ(F+1,bl.x,bl.y,bl.z),ll.setXYZ(F+2,bl.x,bl.y,bl.z);this.normalizeNormals(),ll.needsUpdate=!0}}normalizeNormals(){const F=this.attributes.normal;for(let Da=0,ll=F.count;Da<ll;Da++)If.fromBufferAttribute(F,Da),If.normalize(),F.setXYZ(Da,If.x,If.y,If.z)}toNonIndexed(){function convertBufferAttribute(F,Da){const ll=F.array,cl=F.itemSize,hl=F.normalized,dl=new ll.constructor(Da.length*cl);let pl=0,fl=0;for(let Al=0,bl=Da.length;Al<bl;Al++){pl=F.isInterleavedBufferAttribute?Da[Al]*F.data.stride+F.offset:Da[Al]*cl;for(let F=0;F<cl;F++)dl[fl++]=ll[pl++]}return new BufferAttribute(dl,cl,hl)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const F=new BufferGeometry,Da=this.index.array,ll=this.attributes;for(const dl in ll){const cl=convertBufferAttribute(ll[dl],Da);F.setAttribute(dl,cl)}const cl=this.morphAttributes;for(const dl in cl){const ll=[],hl=cl[dl];for(let F=0,cl=hl.length;F<cl;F++){const cl=convertBufferAttribute(hl[F],Da);ll.push(cl)}F.morphAttributes[dl]=ll}F.morphTargetsRelative=this.morphTargetsRelative;const hl=this.groups;for(let dl=0,pl=hl.length;dl<pl;dl++){const Da=hl[dl];F.addGroup(Da.start,Da.count,Da.materialIndex)}return F}toJSON(){const F={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(F.uuid=this.uuid,F.type=this.type,""!==this.name&&(F.name=this.name),Object.keys(this.userData).length>0&&(F.userData=this.userData),void 0!==this.parameters){const Da=this.parameters;for(const ll in Da)void 0!==Da[ll]&&(F[ll]=Da[ll]);return F}F.data={attributes:{}};const Da=this.index;null!==Da&&(F.data.index={type:Da.array.constructor.name,array:Array.prototype.slice.call(Da.array)});const ll=this.attributes;for(const fl in ll){const Da=ll[fl];F.data.attributes[fl]=Da.toJSON(F.data)}const cl={};let hl=!1;for(const fl in this.morphAttributes){const Da=this.morphAttributes[fl],ll=[];for(let cl=0,hl=Da.length;cl<hl;cl++){const hl=Da[cl];ll.push(hl.toJSON(F.data))}ll.length>0&&(cl[fl]=ll,hl=!0)}hl&&(F.data.morphAttributes=cl,F.data.morphTargetsRelative=this.morphTargetsRelative);const dl=this.groups;dl.length>0&&(F.data.groups=JSON.parse(JSON.stringify(dl)));const pl=this.boundingSphere;return null!==pl&&(F.data.boundingSphere={center:pl.center.toArray(),radius:pl.radius}),F}clone(){return(new this.constructor).copy(this)}copy(F){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const Da={};this.name=F.name;const ll=F.index;null!==ll&&this.setIndex(ll.clone(Da));const cl=F.attributes;for(const Al in cl){const F=cl[Al];this.setAttribute(Al,F.clone(Da))}const hl=F.morphAttributes;for(const Al in hl){const F=[],ll=hl[Al];for(let cl=0,hl=ll.length;cl<hl;cl++)F.push(ll[cl].clone(Da));this.morphAttributes[Al]=F}this.morphTargetsRelative=F.morphTargetsRelative;const dl=F.groups;for(let Al=0,bl=dl.length;Al<bl;Al++){const F=dl[Al];this.addGroup(F.start,F.count,F.materialIndex)}const pl=F.boundingBox;null!==pl&&(this.boundingBox=pl.clone());const fl=F.boundingSphere;return null!==fl&&(this.boundingSphere=fl.clone()),this.drawRange.start=F.drawRange.start,this.drawRange.count=F.drawRange.count,this.userData=F.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Cf=new Matrix4,Lf=new Ray,zf=new Sphere,Pf=new Vector3,Df=new Vector3,Rf=new Vector3,Nf=new Vector3,Uf=new Vector3,Bf=new Vector3,Of=new Vector2,Ff=new Vector2,jf=new Vector2,Vf=new Vector3,Gf=new Vector3,qf=new Vector3,Hf=new Vector3,Zf=new Vector3;class Mesh extends Object3D{constructor(F,Da){void 0===F&&(F=new BufferGeometry),void 0===Da&&(Da=new MeshBasicMaterial),super(),this.isMesh=!0,this.type="Mesh",this.geometry=F,this.material=Da,this.updateMorphTargets()}copy(F,Da){return super.copy(F,Da),void 0!==F.morphTargetInfluences&&(this.morphTargetInfluences=F.morphTargetInfluences.slice()),void 0!==F.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},F.morphTargetDictionary)),this.material=Array.isArray(F.material)?F.material.slice():F.material,this.geometry=F.geometry,this}updateMorphTargets(){const F=this.geometry.morphAttributes,Da=Object.keys(F);if(Da.length>0){const ll=F[Da[0]];if(void 0!==ll){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let F=0,Da=ll.length;F<Da;F++){const Da=ll[F].name||String(F);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Da]=F}}}}getVertexPosition(F,Da){const ll=this.geometry,cl=ll.attributes.position,hl=ll.morphAttributes.position,dl=ll.morphTargetsRelative;Da.fromBufferAttribute(cl,F);const pl=this.morphTargetInfluences;if(hl&&pl){Bf.set(0,0,0);for(let ll=0,cl=hl.length;ll<cl;ll++){const cl=pl[ll],fl=hl[ll];0!==cl&&(Uf.fromBufferAttribute(fl,F),dl?Bf.addScaledVector(Uf,cl):Bf.addScaledVector(Uf.sub(Da),cl))}Da.add(Bf)}return Da}raycast(F,Da){const ll=this.geometry,cl=this.material,hl=this.matrixWorld;if(void 0!==cl){if(null===ll.boundingSphere&&ll.computeBoundingSphere(),zf.copy(ll.boundingSphere),zf.applyMatrix4(hl),Lf.copy(F.ray).recast(F.near),!1===zf.containsPoint(Lf.origin)){if(null===Lf.intersectSphere(zf,Pf))return;if(Lf.origin.distanceToSquared(Pf)>(F.far-F.near)**2)return}Cf.copy(hl).invert(),Lf.copy(F.ray).applyMatrix4(Cf),null!==ll.boundingBox&&!1===Lf.intersectsBox(ll.boundingBox)||this._computeIntersections(F,Da,Lf)}}_computeIntersections(F,Da,ll){let cl;const hl=this.geometry,dl=this.material,pl=hl.index,fl=hl.attributes.position,Al=hl.attributes.uv,bl=hl.attributes.uv1,kl=hl.attributes.normal,Dl=hl.groups,Wl=hl.drawRange;if(null!==pl)if(Array.isArray(dl))for(let Ql=0,wc=Dl.length;Ql<wc;Ql++){const hl=Dl[Ql],fl=dl[hl.materialIndex];for(let dl=Math.max(hl.start,Wl.start),Dl=Math.min(pl.count,Math.min(hl.start+hl.count,Wl.start+Wl.count));dl<Dl;dl+=3){cl=checkGeometryIntersection(this,fl,F,ll,Al,bl,kl,pl.getX(dl),pl.getX(dl+1),pl.getX(dl+2)),cl&&(cl.faceIndex=Math.floor(dl/3),cl.face.materialIndex=hl.materialIndex,Da.push(cl))}}else{for(let hl=Math.max(0,Wl.start),fl=Math.min(pl.count,Wl.start+Wl.count);hl<fl;hl+=3){cl=checkGeometryIntersection(this,dl,F,ll,Al,bl,kl,pl.getX(hl),pl.getX(hl+1),pl.getX(hl+2)),cl&&(cl.faceIndex=Math.floor(hl/3),Da.push(cl))}}else if(void 0!==fl)if(Array.isArray(dl))for(let Ql=0,wc=Dl.length;Ql<wc;Ql++){const hl=Dl[Ql],pl=dl[hl.materialIndex];for(let dl=Math.max(hl.start,Wl.start),Dl=Math.min(fl.count,Math.min(hl.start+hl.count,Wl.start+Wl.count));dl<Dl;dl+=3){cl=checkGeometryIntersection(this,pl,F,ll,Al,bl,kl,dl,dl+1,dl+2),cl&&(cl.faceIndex=Math.floor(dl/3),cl.face.materialIndex=hl.materialIndex,Da.push(cl))}}else{for(let hl=Math.max(0,Wl.start),pl=Math.min(fl.count,Wl.start+Wl.count);hl<pl;hl+=3){cl=checkGeometryIntersection(this,dl,F,ll,Al,bl,kl,hl,hl+1,hl+2),cl&&(cl.faceIndex=Math.floor(hl/3),Da.push(cl))}}}}function checkGeometryIntersection(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){F.getVertexPosition(fl,Df),F.getVertexPosition(Al,Rf),F.getVertexPosition(bl,Nf);const kl=function(F,Da,ll,cl,hl,dl,pl,fl){let Al;if(Al=1===Da.side?cl.intersectTriangle(pl,dl,hl,!0,fl):cl.intersectTriangle(hl,dl,pl,0===Da.side,fl),null===Al)return null;Zf.copy(fl),Zf.applyMatrix4(F.matrixWorld);const bl=ll.ray.origin.distanceTo(Zf);return bl<ll.near||bl>ll.far?null:{distance:bl,point:Zf.clone(),object:F}}(F,Da,ll,cl,Df,Rf,Nf,Hf);if(kl){hl&&(Of.fromBufferAttribute(hl,fl),Ff.fromBufferAttribute(hl,Al),jf.fromBufferAttribute(hl,bl),kl.uv=Triangle.getInterpolation(Hf,Df,Rf,Nf,Of,Ff,jf,new Vector2)),dl&&(Of.fromBufferAttribute(dl,fl),Ff.fromBufferAttribute(dl,Al),jf.fromBufferAttribute(dl,bl),kl.uv1=Triangle.getInterpolation(Hf,Df,Rf,Nf,Of,Ff,jf,new Vector2)),pl&&(Vf.fromBufferAttribute(pl,fl),Gf.fromBufferAttribute(pl,Al),qf.fromBufferAttribute(pl,bl),kl.normal=Triangle.getInterpolation(Hf,Df,Rf,Nf,Vf,Gf,qf,new Vector3),kl.normal.dot(cl.direction)>0&&kl.normal.multiplyScalar(-1));const F={a:fl,b:Al,c:bl,normal:new Vector3,materialIndex:0};Triangle.getNormal(Df,Rf,Nf,F.normal),kl.face=F}return kl}class BoxGeometry extends BufferGeometry{constructor(F,Da,ll,cl,hl,dl){void 0===F&&(F=1),void 0===Da&&(Da=1),void 0===ll&&(ll=1),void 0===cl&&(cl=1),void 0===hl&&(hl=1),void 0===dl&&(dl=1),super(),this.type="BoxGeometry",this.parameters={width:F,height:Da,depth:ll,widthSegments:cl,heightSegments:hl,depthSegments:dl};const pl=this;cl=Math.floor(cl),hl=Math.floor(hl),dl=Math.floor(dl);const fl=[],Al=[],bl=[],kl=[];let Dl=0,Wl=0;function buildPlane(F,Da,ll,cl,hl,dl,Ql,wc,Sc,eu,iu){const su=dl/Sc,cu=Ql/eu,uu=dl/2,hu=Ql/2,Lu=wc/2,zu=Sc+1,Du=eu+1;let Nu=0,qu=0;const ih=new Vector3;for(let pl=0;pl<Du;pl++){const dl=pl*cu-hu;for(let fl=0;fl<zu;fl++){const Dl=fl*su-uu;ih[F]=Dl*cl,ih[Da]=dl*hl,ih[ll]=Lu,Al.push(ih.x,ih.y,ih.z),ih[F]=0,ih[Da]=0,ih[ll]=wc>0?1:-1,bl.push(ih.x,ih.y,ih.z),kl.push(fl/Sc),kl.push(1-pl/eu),Nu+=1}}for(let pl=0;pl<eu;pl++)for(let F=0;F<Sc;F++){const Da=Dl+F+zu*pl,ll=Dl+F+zu*(pl+1),cl=Dl+(F+1)+zu*(pl+1),hl=Dl+(F+1)+zu*pl;fl.push(Da,ll,hl),fl.push(ll,cl,hl),qu+=6}pl.addGroup(Wl,qu,iu),Wl+=qu,Dl+=Nu}buildPlane("z","y","x",-1,-1,ll,Da,F,dl,hl,0),buildPlane("z","y","x",1,-1,ll,Da,-F,dl,hl,1),buildPlane("x","z","y",1,1,F,ll,Da,cl,dl,2),buildPlane("x","z","y",1,-1,F,ll,-Da,cl,dl,3),buildPlane("x","y","z",1,-1,F,Da,ll,cl,hl,4),buildPlane("x","y","z",-1,-1,F,Da,-ll,cl,hl,5),this.setIndex(fl),this.setAttribute("position",new Float32BufferAttribute(Al,3)),this.setAttribute("normal",new Float32BufferAttribute(bl,3)),this.setAttribute("uv",new Float32BufferAttribute(kl,2))}copy(F){return super.copy(F),this.parameters=Object.assign({},F.parameters),this}static fromJSON(F){return new BoxGeometry(F.width,F.height,F.depth,F.widthSegments,F.heightSegments,F.depthSegments)}}function cloneUniforms(F){const Da={};for(const ll in F){Da[ll]={};for(const cl in F[ll]){const hl=F[ll][cl];hl&&(hl.isColor||hl.isMatrix3||hl.isMatrix4||hl.isVector2||hl.isVector3||hl.isVector4||hl.isTexture||hl.isQuaternion)?hl.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),Da[ll][cl]=null):Da[ll][cl]=hl.clone():Array.isArray(hl)?Da[ll][cl]=hl.slice():Da[ll][cl]=hl}}return Da}function mergeUniforms(F){const Da={};for(let ll=0;ll<F.length;ll++){const cl=cloneUniforms(F[ll]);for(const F in cl)Da[F]=cl[F]}return Da}function getUnlitUniformColorSpace(F){const Da=F.getRenderTarget();return null===Da?F.outputColorSpace:!0===Da.isXRRenderTarget?Da.texture.colorSpace:sm.workingColorSpace}const Wf={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(F){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==F&&this.setValues(F)}copy(F){return super.copy(F),this.fragmentShader=F.fragmentShader,this.vertexShader=F.vertexShader,this.uniforms=cloneUniforms(F.uniforms),this.uniformsGroups=function(F){const Da=[];for(let ll=0;ll<F.length;ll++)Da.push(F[ll].clone());return Da}(F.uniformsGroups),this.defines=Object.assign({},F.defines),this.wireframe=F.wireframe,this.wireframeLinewidth=F.wireframeLinewidth,this.fog=F.fog,this.lights=F.lights,this.clipping=F.clipping,this.extensions=Object.assign({},F.extensions),this.glslVersion=F.glslVersion,this}toJSON(F){const Da=super.toJSON(F);Da.glslVersion=this.glslVersion,Da.uniforms={};for(const cl in this.uniforms){const ll=this.uniforms[cl].value;ll&&ll.isTexture?Da.uniforms[cl]={type:"t",value:ll.toJSON(F).uuid}:ll&&ll.isColor?Da.uniforms[cl]={type:"c",value:ll.getHex()}:ll&&ll.isVector2?Da.uniforms[cl]={type:"v2",value:ll.toArray()}:ll&&ll.isVector3?Da.uniforms[cl]={type:"v3",value:ll.toArray()}:ll&&ll.isVector4?Da.uniforms[cl]={type:"v4",value:ll.toArray()}:ll&&ll.isMatrix3?Da.uniforms[cl]={type:"m3",value:ll.toArray()}:ll&&ll.isMatrix4?Da.uniforms[cl]={type:"m4",value:ll.toArray()}:Da.uniforms[cl]={value:ll}}Object.keys(this.defines).length>0&&(Da.defines=this.defines),Da.vertexShader=this.vertexShader,Da.fragmentShader=this.fragmentShader,Da.lights=this.lights,Da.clipping=this.clipping;const ll={};for(const cl in this.extensions)!0===this.extensions[cl]&&(ll[cl]=!0);return Object.keys(ll).length>0&&(Da.extensions=ll),Da}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=Wp}copy(F,Da){return super.copy(F,Da),this.matrixWorldInverse.copy(F.matrixWorldInverse),this.projectionMatrix.copy(F.projectionMatrix),this.projectionMatrixInverse.copy(F.projectionMatrixInverse),this.coordinateSystem=F.coordinateSystem,this}getWorldDirection(F){return super.getWorldDirection(F).negate()}updateMatrixWorld(F){super.updateMatrixWorld(F),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(F,Da){super.updateWorldMatrix(F,Da),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Kf=new Vector3,Qf=new Vector2,Xf=new Vector2;class PerspectiveCamera extends Camera{constructor(F,Da,ll,cl){void 0===F&&(F=50),void 0===Da&&(Da=1),void 0===ll&&(ll=.1),void 0===cl&&(cl=2e3),super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=F,this.zoom=1,this.near=ll,this.far=cl,this.focus=10,this.aspect=Da,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(F,Da){return super.copy(F,Da),this.fov=F.fov,this.zoom=F.zoom,this.near=F.near,this.far=F.far,this.focus=F.focus,this.aspect=F.aspect,this.view=null===F.view?null:Object.assign({},F.view),this.filmGauge=F.filmGauge,this.filmOffset=F.filmOffset,this}setFocalLength(F){const Da=.5*this.getFilmHeight()/F;this.fov=2*Jp*Math.atan(Da),this.updateProjectionMatrix()}getFocalLength(){const F=Math.tan(.5*Yp*this.fov);return.5*this.getFilmHeight()/F}getEffectiveFOV(){return 2*Jp*Math.atan(Math.tan(.5*Yp*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(F,Da,ll){Kf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),Da.set(Kf.x,Kf.y).multiplyScalar(-F/Kf.z),Kf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),ll.set(Kf.x,Kf.y).multiplyScalar(-F/Kf.z)}getViewSize(F,Da){return this.getViewBounds(F,Qf,Xf),Da.subVectors(Xf,Qf)}setViewOffset(F,Da,ll,cl,hl,dl){this.aspect=F/Da,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=F,this.view.fullHeight=Da,this.view.offsetX=ll,this.view.offsetY=cl,this.view.width=hl,this.view.height=dl,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const F=this.near;let Da=F*Math.tan(.5*Yp*this.fov)/this.zoom,ll=2*Da,cl=this.aspect*ll,hl=-.5*cl;const dl=this.view;if(null!==this.view&&this.view.enabled){const F=dl.fullWidth,pl=dl.fullHeight;hl+=dl.offsetX*cl/F,Da-=dl.offsetY*ll/pl,cl*=dl.width/F,ll*=dl.height/pl}const pl=this.filmOffset;0!==pl&&(hl+=F*pl/this.getFilmWidth()),this.projectionMatrix.makePerspective(hl,hl+cl,Da,Da-ll,F,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(F){const Da=super.toJSON(F);return Da.object.fov=this.fov,Da.object.zoom=this.zoom,Da.object.near=this.near,Da.object.far=this.far,Da.object.focus=this.focus,Da.object.aspect=this.aspect,null!==this.view&&(Da.object.view=Object.assign({},this.view)),Da.object.filmGauge=this.filmGauge,Da.object.filmOffset=this.filmOffset,Da}}const Yf=-90;class CubeCamera extends Object3D{constructor(F,Da,ll){super(),this.type="CubeCamera",this.renderTarget=ll,this.coordinateSystem=null,this.activeMipmapLevel=0;const cl=new PerspectiveCamera(Yf,1,F,Da);cl.layers=this.layers,this.add(cl);const hl=new PerspectiveCamera(Yf,1,F,Da);hl.layers=this.layers,this.add(hl);const dl=new PerspectiveCamera(Yf,1,F,Da);dl.layers=this.layers,this.add(dl);const pl=new PerspectiveCamera(Yf,1,F,Da);pl.layers=this.layers,this.add(pl);const fl=new PerspectiveCamera(Yf,1,F,Da);fl.layers=this.layers,this.add(fl);const Al=new PerspectiveCamera(Yf,1,F,Da);Al.layers=this.layers,this.add(Al)}updateCoordinateSystem(){const F=this.coordinateSystem,Da=this.children.concat(),[ll,cl,hl,dl,pl,fl]=Da;for(const Al of Da)this.remove(Al);if(F===Wp)ll.up.set(0,1,0),ll.lookAt(1,0,0),cl.up.set(0,1,0),cl.lookAt(-1,0,0),hl.up.set(0,0,-1),hl.lookAt(0,1,0),dl.up.set(0,0,1),dl.lookAt(0,-1,0),pl.up.set(0,1,0),pl.lookAt(0,0,1),fl.up.set(0,1,0),fl.lookAt(0,0,-1);else{if(F!==Kp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+F);ll.up.set(0,-1,0),ll.lookAt(-1,0,0),cl.up.set(0,-1,0),cl.lookAt(1,0,0),hl.up.set(0,0,1),hl.lookAt(0,1,0),dl.up.set(0,0,-1),dl.lookAt(0,-1,0),pl.up.set(0,-1,0),pl.lookAt(0,0,1),fl.up.set(0,-1,0),fl.lookAt(0,0,-1)}for(const Al of Da)this.add(Al),Al.updateMatrixWorld()}update(F,Da){null===this.parent&&this.updateMatrixWorld();const{renderTarget:ll,activeMipmapLevel:cl}=this;this.coordinateSystem!==F.coordinateSystem&&(this.coordinateSystem=F.coordinateSystem,this.updateCoordinateSystem());const[hl,dl,pl,fl,Al,bl]=this.children,kl=F.getRenderTarget(),Dl=F.getActiveCubeFace(),Wl=F.getActiveMipmapLevel(),Ql=F.xr.enabled;F.xr.enabled=!1;const wc=ll.texture.generateMipmaps;ll.texture.generateMipmaps=!1,F.setRenderTarget(ll,0,cl),F.render(Da,hl),F.setRenderTarget(ll,1,cl),F.render(Da,dl),F.setRenderTarget(ll,2,cl),F.render(Da,pl),F.setRenderTarget(ll,3,cl),F.render(Da,fl),F.setRenderTarget(ll,4,cl),F.render(Da,Al),ll.texture.generateMipmaps=wc,F.setRenderTarget(ll,5,cl),F.render(Da,bl),F.setRenderTarget(kl,Dl,Wl),F.xr.enabled=Ql,ll.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){super(F=void 0!==F?F:[],Da=void 0!==Da?Da:Nu,ll,cl,hl,dl,pl,fl,Al,bl),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(F){this.image=F}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(F,Da){void 0===F&&(F=1),void 0===Da&&(Da={}),super(F,F,Da),this.isWebGLCubeRenderTarget=!0;const ll={width:F,height:F,depth:1},cl=[ll,ll,ll,ll,ll,ll];this.texture=new CubeTexture(cl,Da.mapping,Da.wrapS,Da.wrapT,Da.magFilter,Da.minFilter,Da.format,Da.type,Da.anisotropy,Da.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==Da.generateMipmaps&&Da.generateMipmaps,this.texture.minFilter=void 0!==Da.minFilter?Da.minFilter:od}fromEquirectangularTexture(F,Da){this.texture.type=Da.type,this.texture.colorSpace=Da.colorSpace,this.texture.generateMipmaps=Da.generateMipmaps,this.texture.minFilter=Da.minFilter,this.texture.magFilter=Da.magFilter;const ll={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},cl=new BoxGeometry(5,5,5),hl=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(ll.uniforms),vertexShader:ll.vertexShader,fragmentShader:ll.fragmentShader,side:1,blending:0});hl.uniforms.tEquirect.value=Da;const dl=new Mesh(cl,hl),pl=Da.minFilter;Da.minFilter===cd&&(Da.minFilter=od);return new CubeCamera(1,10,this).update(F,dl),Da.minFilter=pl,dl.geometry.dispose(),dl.material.dispose(),this}clear(F,Da,ll,cl){const hl=F.getRenderTarget();for(let dl=0;dl<6;dl++)F.setRenderTarget(this,dl),F.clear(Da,ll,cl);F.setRenderTarget(hl)}}const Jf=new Vector3,$f=new Vector3,eg=new Matrix3;class Plane{constructor(F,Da){void 0===F&&(F=new Vector3(1,0,0)),void 0===Da&&(Da=0),this.isPlane=!0,this.normal=F,this.constant=Da}set(F,Da){return this.normal.copy(F),this.constant=Da,this}setComponents(F,Da,ll,cl){return this.normal.set(F,Da,ll),this.constant=cl,this}setFromNormalAndCoplanarPoint(F,Da){return this.normal.copy(F),this.constant=-Da.dot(this.normal),this}setFromCoplanarPoints(F,Da,ll){const cl=Jf.subVectors(ll,Da).cross($f.subVectors(F,Da)).normalize();return this.setFromNormalAndCoplanarPoint(cl,F),this}copy(F){return this.normal.copy(F.normal),this.constant=F.constant,this}normalize(){const F=1/this.normal.length();return this.normal.multiplyScalar(F),this.constant*=F,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(F){return this.normal.dot(F)+this.constant}distanceToSphere(F){return this.distanceToPoint(F.center)-F.radius}projectPoint(F,Da){return Da.copy(F).addScaledVector(this.normal,-this.distanceToPoint(F))}intersectLine(F,Da){const ll=F.delta(Jf),cl=this.normal.dot(ll);if(0===cl)return 0===this.distanceToPoint(F.start)?Da.copy(F.start):null;const hl=-(F.start.dot(this.normal)+this.constant)/cl;return hl<0||hl>1?null:Da.copy(F.start).addScaledVector(ll,hl)}intersectsLine(F){const Da=this.distanceToPoint(F.start),ll=this.distanceToPoint(F.end);return Da<0&&ll>0||ll<0&&Da>0}intersectsBox(F){return F.intersectsPlane(this)}intersectsSphere(F){return F.intersectsPlane(this)}coplanarPoint(F){return F.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(F,Da){const ll=Da||eg.getNormalMatrix(F),cl=this.coplanarPoint(Jf).applyMatrix4(F),hl=this.normal.applyMatrix3(ll).normalize();return this.constant=-cl.dot(hl),this}translate(F){return this.constant-=F.dot(this.normal),this}equals(F){return F.normal.equals(this.normal)&&F.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const tg=new Sphere,ig=new Vector3;class Frustum{constructor(F,Da,ll,cl,hl,dl){void 0===F&&(F=new Plane),void 0===Da&&(Da=new Plane),void 0===ll&&(ll=new Plane),void 0===cl&&(cl=new Plane),void 0===hl&&(hl=new Plane),void 0===dl&&(dl=new Plane),this.planes=[F,Da,ll,cl,hl,dl]}set(F,Da,ll,cl,hl,dl){const pl=this.planes;return pl[0].copy(F),pl[1].copy(Da),pl[2].copy(ll),pl[3].copy(cl),pl[4].copy(hl),pl[5].copy(dl),this}copy(F){const Da=this.planes;for(let ll=0;ll<6;ll++)Da[ll].copy(F.planes[ll]);return this}setFromProjectionMatrix(F,Da){void 0===Da&&(Da=Wp);const ll=this.planes,cl=F.elements,hl=cl[0],dl=cl[1],pl=cl[2],fl=cl[3],Al=cl[4],bl=cl[5],kl=cl[6],Dl=cl[7],Wl=cl[8],Ql=cl[9],wc=cl[10],Sc=cl[11],eu=cl[12],iu=cl[13],su=cl[14],cu=cl[15];if(ll[0].setComponents(fl-hl,Dl-Al,Sc-Wl,cu-eu).normalize(),ll[1].setComponents(fl+hl,Dl+Al,Sc+Wl,cu+eu).normalize(),ll[2].setComponents(fl+dl,Dl+bl,Sc+Ql,cu+iu).normalize(),ll[3].setComponents(fl-dl,Dl-bl,Sc-Ql,cu-iu).normalize(),ll[4].setComponents(fl-pl,Dl-kl,Sc-wc,cu-su).normalize(),Da===Wp)ll[5].setComponents(fl+pl,Dl+kl,Sc+wc,cu+su).normalize();else{if(Da!==Kp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+Da);ll[5].setComponents(pl,kl,wc,su).normalize()}return this}intersectsObject(F){if(void 0!==F.boundingSphere)null===F.boundingSphere&&F.computeBoundingSphere(),tg.copy(F.boundingSphere).applyMatrix4(F.matrixWorld);else{const Da=F.geometry;null===Da.boundingSphere&&Da.computeBoundingSphere(),tg.copy(Da.boundingSphere).applyMatrix4(F.matrixWorld)}return this.intersectsSphere(tg)}intersectsSprite(F){return tg.center.set(0,0,0),tg.radius=.7071067811865476,tg.applyMatrix4(F.matrixWorld),this.intersectsSphere(tg)}intersectsSphere(F){const Da=this.planes,ll=F.center,cl=-F.radius;for(let hl=0;hl<6;hl++){if(Da[hl].distanceToPoint(ll)<cl)return!1}return!0}intersectsBox(F){const Da=this.planes;for(let ll=0;ll<6;ll++){const cl=Da[ll];if(ig.x=cl.normal.x>0?F.max.x:F.min.x,ig.y=cl.normal.y>0?F.max.y:F.min.y,ig.z=cl.normal.z>0?F.max.z:F.min.z,cl.distanceToPoint(ig)<0)return!1}return!0}containsPoint(F){const Da=this.planes;for(let ll=0;ll<6;ll++)if(Da[ll].distanceToPoint(F)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let F=null,Da=!1,ll=null,cl=null;function onAnimationFrame(Da,hl){ll(Da,hl),cl=F.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==Da&&null!==ll&&(cl=F.requestAnimationFrame(onAnimationFrame),Da=!0)},stop:function(){F.cancelAnimationFrame(cl),Da=!1},setAnimationLoop:function(F){ll=F},setContext:function(Da){F=Da}}}function WebGLAttributes(F){const Da=new WeakMap;return{get:function(F){return F.isInterleavedBufferAttribute&&(F=F.data),Da.get(F)},remove:function(ll){ll.isInterleavedBufferAttribute&&(ll=ll.data);const cl=Da.get(ll);cl&&(F.deleteBuffer(cl.buffer),Da.delete(ll))},update:function(ll,cl){if(ll.isInterleavedBufferAttribute&&(ll=ll.data),ll.isGLBufferAttribute){const F=Da.get(ll);return void((!F||F.version<ll.version)&&Da.set(ll,{buffer:ll.buffer,type:ll.type,bytesPerElement:ll.elementSize,version:ll.version}))}const hl=Da.get(ll);if(void 0===hl)Da.set(ll,function(Da,ll){const cl=Da.array,hl=Da.usage,dl=cl.byteLength,pl=F.createBuffer();let fl;if(F.bindBuffer(ll,pl),F.bufferData(ll,cl,hl),Da.onUploadCallback(),cl instanceof Float32Array)fl=F.FLOAT;else if(cl instanceof Uint16Array)fl=Da.isFloat16BufferAttribute?F.HALF_FLOAT:F.UNSIGNED_SHORT;else if(cl instanceof Int16Array)fl=F.SHORT;else if(cl instanceof Uint32Array)fl=F.UNSIGNED_INT;else if(cl instanceof Int32Array)fl=F.INT;else if(cl instanceof Int8Array)fl=F.BYTE;else if(cl instanceof Uint8Array)fl=F.UNSIGNED_BYTE;else{if(!(cl instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+cl);fl=F.UNSIGNED_BYTE}return{buffer:pl,type:fl,bytesPerElement:cl.BYTES_PER_ELEMENT,version:Da.version,size:dl}}(ll,cl));else if(hl.version<ll.version){if(hl.size!==ll.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(Da,ll,cl){const hl=ll.array,dl=ll._updateRange,pl=ll.updateRanges;if(F.bindBuffer(cl,Da),-1===dl.count&&0===pl.length&&F.bufferSubData(cl,0,hl),0!==pl.length){for(let Da=0,ll=pl.length;Da<ll;Da++){const ll=pl[Da];F.bufferSubData(cl,ll.start*hl.BYTES_PER_ELEMENT,hl,ll.start,ll.count)}ll.clearUpdateRanges()}-1!==dl.count&&(F.bufferSubData(cl,dl.offset*hl.BYTES_PER_ELEMENT,hl,dl.offset,dl.count),dl.count=-1),ll.onUploadCallback()}(hl.buffer,ll,cl),hl.version=ll.version}}}}class PlaneGeometry extends BufferGeometry{constructor(F,Da,ll,cl){void 0===F&&(F=1),void 0===Da&&(Da=1),void 0===ll&&(ll=1),void 0===cl&&(cl=1),super(),this.type="PlaneGeometry",this.parameters={width:F,height:Da,widthSegments:ll,heightSegments:cl};const hl=F/2,dl=Da/2,pl=Math.floor(ll),fl=Math.floor(cl),Al=pl+1,bl=fl+1,kl=F/pl,Dl=Da/fl,Wl=[],Ql=[],wc=[],Sc=[];for(let eu=0;eu<bl;eu++){const F=eu*Dl-dl;for(let Da=0;Da<Al;Da++){const ll=Da*kl-hl;Ql.push(ll,-F,0),wc.push(0,0,1),Sc.push(Da/pl),Sc.push(1-eu/fl)}}for(let eu=0;eu<fl;eu++)for(let F=0;F<pl;F++){const Da=F+Al*eu,ll=F+Al*(eu+1),cl=F+1+Al*(eu+1),hl=F+1+Al*eu;Wl.push(Da,ll,hl),Wl.push(ll,cl,hl)}this.setIndex(Wl),this.setAttribute("position",new Float32BufferAttribute(Ql,3)),this.setAttribute("normal",new Float32BufferAttribute(wc,3)),this.setAttribute("uv",new Float32BufferAttribute(Sc,2))}copy(F){return super.copy(F),this.parameters=Object.assign({},F.parameters),this}static fromJSON(F){return new PlaneGeometry(F.width,F.height,F.widthSegments,F.heightSegments)}}const ng={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},rg={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ag={basic:{uniforms:mergeUniforms([rg.common,rg.specularmap,rg.envmap,rg.aomap,rg.lightmap,rg.fog]),vertexShader:ng.meshbasic_vert,fragmentShader:ng.meshbasic_frag},lambert:{uniforms:mergeUniforms([rg.common,rg.specularmap,rg.envmap,rg.aomap,rg.lightmap,rg.emissivemap,rg.bumpmap,rg.normalmap,rg.displacementmap,rg.fog,rg.lights,{emissive:{value:new Color(0)}}]),vertexShader:ng.meshlambert_vert,fragmentShader:ng.meshlambert_frag},phong:{uniforms:mergeUniforms([rg.common,rg.specularmap,rg.envmap,rg.aomap,rg.lightmap,rg.emissivemap,rg.bumpmap,rg.normalmap,rg.displacementmap,rg.fog,rg.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ng.meshphong_vert,fragmentShader:ng.meshphong_frag},standard:{uniforms:mergeUniforms([rg.common,rg.envmap,rg.aomap,rg.lightmap,rg.emissivemap,rg.bumpmap,rg.normalmap,rg.displacementmap,rg.roughnessmap,rg.metalnessmap,rg.fog,rg.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ng.meshphysical_vert,fragmentShader:ng.meshphysical_frag},toon:{uniforms:mergeUniforms([rg.common,rg.aomap,rg.lightmap,rg.emissivemap,rg.bumpmap,rg.normalmap,rg.displacementmap,rg.gradientmap,rg.fog,rg.lights,{emissive:{value:new Color(0)}}]),vertexShader:ng.meshtoon_vert,fragmentShader:ng.meshtoon_frag},matcap:{uniforms:mergeUniforms([rg.common,rg.bumpmap,rg.normalmap,rg.displacementmap,rg.fog,{matcap:{value:null}}]),vertexShader:ng.meshmatcap_vert,fragmentShader:ng.meshmatcap_frag},points:{uniforms:mergeUniforms([rg.points,rg.fog]),vertexShader:ng.points_vert,fragmentShader:ng.points_frag},dashed:{uniforms:mergeUniforms([rg.common,rg.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ng.linedashed_vert,fragmentShader:ng.linedashed_frag},depth:{uniforms:mergeUniforms([rg.common,rg.displacementmap]),vertexShader:ng.depth_vert,fragmentShader:ng.depth_frag},normal:{uniforms:mergeUniforms([rg.common,rg.bumpmap,rg.normalmap,rg.displacementmap,{opacity:{value:1}}]),vertexShader:ng.meshnormal_vert,fragmentShader:ng.meshnormal_frag},sprite:{uniforms:mergeUniforms([rg.sprite,rg.fog]),vertexShader:ng.sprite_vert,fragmentShader:ng.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ng.background_vert,fragmentShader:ng.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ng.backgroundCube_vert,fragmentShader:ng.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ng.cube_vert,fragmentShader:ng.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ng.equirect_vert,fragmentShader:ng.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([rg.common,rg.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ng.distanceRGBA_vert,fragmentShader:ng.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([rg.lights,rg.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ng.shadow_vert,fragmentShader:ng.shadow_frag}};ag.physical={uniforms:mergeUniforms([ag.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ng.meshphysical_vert,fragmentShader:ng.meshphysical_frag};const sg={r:0,b:0,g:0},og=new Euler,lg=new Matrix4;function WebGLBackground(F,Da,ll,cl,hl,dl,pl){const fl=new Color(0);let Al,bl,kl=!0===dl?0:1,Dl=null,Wl=0,Ql=null;function getBackground(F){let cl=!0===F.isScene?F.background:null;if(cl&&cl.isTexture){cl=(F.backgroundBlurriness>0?ll:Da).get(cl)}return cl}function setClear(Da,ll){Da.getRGB(sg,getUnlitUniformColorSpace(F)),cl.buffers.color.setClear(sg.r,sg.g,sg.b,ll,pl)}return{getClearColor:function(){return fl},setClearColor:function(F,Da){void 0===Da&&(Da=1),fl.set(F),kl=Da,setClear(fl,kl)},getClearAlpha:function(){return kl},setClearAlpha:function(F){kl=F,setClear(fl,kl)},render:function(Da){let ll=!1;const hl=getBackground(Da);null===hl?setClear(fl,kl):hl&&hl.isColor&&(setClear(hl,1),ll=!0);const dl=F.xr.getEnvironmentBlendMode();"additive"===dl?cl.buffers.color.setClear(0,0,0,1,pl):"alpha-blend"===dl&&cl.buffers.color.setClear(0,0,0,0,pl),(F.autoClear||ll)&&(cl.buffers.depth.setTest(!0),cl.buffers.depth.setMask(!0),cl.buffers.color.setMask(!0),F.clear(F.autoClearColor,F.autoClearDepth,F.autoClearStencil))},addToRenderList:function(Da,ll){const cl=getBackground(ll);cl&&(cl.isCubeTexture||cl.mapping===ed)?(void 0===bl&&(bl=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ag.backgroundCube.uniforms),vertexShader:ag.backgroundCube.vertexShader,fragmentShader:ag.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),bl.geometry.deleteAttribute("normal"),bl.geometry.deleteAttribute("uv"),bl.onBeforeRender=function(F,Da,ll){this.matrixWorld.copyPosition(ll.matrixWorld)},Object.defineProperty(bl.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),hl.update(bl)),og.copy(ll.backgroundRotation),og.x*=-1,og.y*=-1,og.z*=-1,cl.isCubeTexture&&!1===cl.isRenderTargetTexture&&(og.y*=-1,og.z*=-1),bl.material.uniforms.envMap.value=cl,bl.material.uniforms.flipEnvMap.value=cl.isCubeTexture&&!1===cl.isRenderTargetTexture?-1:1,bl.material.uniforms.backgroundBlurriness.value=ll.backgroundBlurriness,bl.material.uniforms.backgroundIntensity.value=ll.backgroundIntensity,bl.material.uniforms.backgroundRotation.value.setFromMatrix4(lg.makeRotationFromEuler(og)),bl.material.toneMapped=sm.getTransfer(cl.colorSpace)!==Pp,Dl===cl&&Wl===cl.version&&Ql===F.toneMapping||(bl.material.needsUpdate=!0,Dl=cl,Wl=cl.version,Ql=F.toneMapping),bl.layers.enableAll(),Da.unshift(bl,bl.geometry,bl.material,0,0,null)):cl&&cl.isTexture&&(void 0===Al&&(Al=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ag.background.uniforms),vertexShader:ag.background.vertexShader,fragmentShader:ag.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),Al.geometry.deleteAttribute("normal"),Object.defineProperty(Al.material,"map",{get:function(){return this.uniforms.t2D.value}}),hl.update(Al)),Al.material.uniforms.t2D.value=cl,Al.material.uniforms.backgroundIntensity.value=ll.backgroundIntensity,Al.material.toneMapped=sm.getTransfer(cl.colorSpace)!==Pp,!0===cl.matrixAutoUpdate&&cl.updateMatrix(),Al.material.uniforms.uvTransform.value.copy(cl.matrix),Dl===cl&&Wl===cl.version&&Ql===F.toneMapping||(Al.material.needsUpdate=!0,Dl=cl,Wl=cl.version,Ql=F.toneMapping),Al.layers.enableAll(),Da.unshift(Al,Al.geometry,Al.material,0,0,null))}}}function WebGLBindingStates(F,Da){const ll=F.getParameter(F.MAX_VERTEX_ATTRIBS),cl={},hl=createBindingState(null);let dl=hl,pl=!1;function bindVertexArrayObject(Da){return F.bindVertexArray(Da)}function deleteVertexArrayObject(Da){return F.deleteVertexArray(Da)}function createBindingState(F){const Da=[],cl=[],hl=[];for(let dl=0;dl<ll;dl++)Da[dl]=0,cl[dl]=0,hl[dl]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Da,enabledAttributes:cl,attributeDivisors:hl,object:F,attributes:{},index:null}}function initAttributes(){const F=dl.newAttributes;for(let Da=0,ll=F.length;Da<ll;Da++)F[Da]=0}function enableAttribute(F){enableAttributeAndDivisor(F,0)}function enableAttributeAndDivisor(Da,ll){const cl=dl.newAttributes,hl=dl.enabledAttributes,pl=dl.attributeDivisors;cl[Da]=1,0===hl[Da]&&(F.enableVertexAttribArray(Da),hl[Da]=1),pl[Da]!==ll&&(F.vertexAttribDivisor(Da,ll),pl[Da]=ll)}function disableUnusedAttributes(){const Da=dl.newAttributes,ll=dl.enabledAttributes;for(let cl=0,hl=ll.length;cl<hl;cl++)ll[cl]!==Da[cl]&&(F.disableVertexAttribArray(cl),ll[cl]=0)}function vertexAttribPointer(Da,ll,cl,hl,dl,pl,fl){!0===fl?F.vertexAttribIPointer(Da,ll,cl,dl,pl):F.vertexAttribPointer(Da,ll,cl,hl,dl,pl)}function reset(){resetDefaultState(),pl=!0,dl!==hl&&(dl=hl,bindVertexArrayObject(dl.object))}function resetDefaultState(){hl.geometry=null,hl.program=null,hl.wireframe=!1}return{setup:function(ll,hl,fl,Al,bl){let kl=!1;const Dl=function(Da,ll,hl){const dl=!0===hl.wireframe;let pl=cl[Da.id];void 0===pl&&(pl={},cl[Da.id]=pl);let fl=pl[ll.id];void 0===fl&&(fl={},pl[ll.id]=fl);let Al=fl[dl];void 0===Al&&(Al=createBindingState(F.createVertexArray()),fl[dl]=Al);return Al}(Al,fl,hl);dl!==Dl&&(dl=Dl,bindVertexArrayObject(dl.object)),kl=function(F,Da,ll,cl){const hl=dl.attributes,pl=Da.attributes;let fl=0;const Al=ll.getAttributes();for(const dl in Al){if(Al[dl].location>=0){const Da=hl[dl];let ll=pl[dl];if(void 0===ll&&("instanceMatrix"===dl&&F.instanceMatrix&&(ll=F.instanceMatrix),"instanceColor"===dl&&F.instanceColor&&(ll=F.instanceColor)),void 0===Da)return!0;if(Da.attribute!==ll)return!0;if(ll&&Da.data!==ll.data)return!0;fl++}}return dl.attributesNum!==fl||dl.index!==cl}(ll,Al,fl,bl),kl&&function(F,Da,ll,cl){const hl={},pl=Da.attributes;let fl=0;const Al=ll.getAttributes();for(const dl in Al){if(Al[dl].location>=0){let Da=pl[dl];void 0===Da&&("instanceMatrix"===dl&&F.instanceMatrix&&(Da=F.instanceMatrix),"instanceColor"===dl&&F.instanceColor&&(Da=F.instanceColor));const ll={};ll.attribute=Da,Da&&Da.data&&(ll.data=Da.data),hl[dl]=ll,fl++}}dl.attributes=hl,dl.attributesNum=fl,dl.index=cl}(ll,Al,fl,bl),null!==bl&&Da.update(bl,F.ELEMENT_ARRAY_BUFFER),(kl||pl)&&(pl=!1,function(ll,cl,hl,dl){initAttributes();const pl=dl.attributes,fl=hl.getAttributes(),Al=cl.defaultAttributeValues;for(const bl in fl){const cl=fl[bl];if(cl.location>=0){let hl=pl[bl];if(void 0===hl&&("instanceMatrix"===bl&&ll.instanceMatrix&&(hl=ll.instanceMatrix),"instanceColor"===bl&&ll.instanceColor&&(hl=ll.instanceColor)),void 0!==hl){const pl=hl.normalized,fl=hl.itemSize,Al=Da.get(hl);if(void 0===Al)continue;const bl=Al.buffer,kl=Al.type,Dl=Al.bytesPerElement,Wl=kl===F.INT||kl===F.UNSIGNED_INT||hl.gpuType===md;if(hl.isInterleavedBufferAttribute){const Da=hl.data,Al=Da.stride,Ql=hl.offset;if(Da.isInstancedInterleavedBuffer){for(let F=0;F<cl.locationSize;F++)enableAttributeAndDivisor(cl.location+F,Da.meshPerAttribute);!0!==ll.isInstancedMesh&&void 0===dl._maxInstanceCount&&(dl._maxInstanceCount=Da.meshPerAttribute*Da.count)}else for(let F=0;F<cl.locationSize;F++)enableAttribute(cl.location+F);F.bindBuffer(F.ARRAY_BUFFER,bl);for(let F=0;F<cl.locationSize;F++)vertexAttribPointer(cl.location+F,fl/cl.locationSize,kl,pl,Al*Dl,(Ql+fl/cl.locationSize*F)*Dl,Wl)}else{if(hl.isInstancedBufferAttribute){for(let F=0;F<cl.locationSize;F++)enableAttributeAndDivisor(cl.location+F,hl.meshPerAttribute);!0!==ll.isInstancedMesh&&void 0===dl._maxInstanceCount&&(dl._maxInstanceCount=hl.meshPerAttribute*hl.count)}else for(let F=0;F<cl.locationSize;F++)enableAttribute(cl.location+F);F.bindBuffer(F.ARRAY_BUFFER,bl);for(let F=0;F<cl.locationSize;F++)vertexAttribPointer(cl.location+F,fl/cl.locationSize,kl,pl,fl*Dl,fl/cl.locationSize*F*Dl,Wl)}}else if(void 0!==Al){const Da=Al[bl];if(void 0!==Da)switch(Da.length){case 2:F.vertexAttrib2fv(cl.location,Da);break;case 3:F.vertexAttrib3fv(cl.location,Da);break;case 4:F.vertexAttrib4fv(cl.location,Da);break;default:F.vertexAttrib1fv(cl.location,Da)}}}}disableUnusedAttributes()}(ll,hl,fl,Al),null!==bl&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,Da.get(bl).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function(){reset();for(const F in cl){const Da=cl[F];for(const F in Da){const ll=Da[F];for(const F in ll)deleteVertexArrayObject(ll[F].object),delete ll[F];delete Da[F]}delete cl[F]}},releaseStatesOfGeometry:function(F){if(void 0===cl[F.id])return;const Da=cl[F.id];for(const ll in Da){const F=Da[ll];for(const Da in F)deleteVertexArrayObject(F[Da].object),delete F[Da];delete Da[ll]}delete cl[F.id]},releaseStatesOfProgram:function(F){for(const Da in cl){const ll=cl[Da];if(void 0===ll[F.id])continue;const hl=ll[F.id];for(const F in hl)deleteVertexArrayObject(hl[F].object),delete hl[F];delete ll[F.id]}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(F,Da,ll){let cl;function renderInstances(Da,hl,dl){0!==dl&&(F.drawArraysInstanced(cl,Da,hl,dl),ll.update(hl,cl,dl))}this.setMode=function(F){cl=F},this.render=function(Da,hl){F.drawArrays(cl,Da,hl),ll.update(hl,cl,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(F,hl,dl){if(0===dl)return;Da.get("WEBGL_multi_draw").multiDrawArraysWEBGL(cl,F,0,hl,0,dl);let pl=0;for(let Da=0;Da<dl;Da++)pl+=hl[Da];ll.update(pl,cl,1)},this.renderMultiDrawInstances=function(F,hl,dl,pl){if(0===dl)return;const fl=Da.get("WEBGL_multi_draw");if(null===fl)for(let Da=0;Da<F.length;Da++)renderInstances(F[Da],hl[Da],pl[Da]);else{fl.multiDrawArraysInstancedWEBGL(cl,F,0,hl,0,pl,0,dl);let Da=0;for(let F=0;F<dl;F++)Da+=hl[F];for(let F=0;F<pl.length;F++)ll.update(Da,cl,pl[F])}}}function WebGLCapabilities(F,Da,ll,cl){let hl;function getMaxPrecision(Da){if("highp"===Da){if(F.getShaderPrecisionFormat(F.VERTEX_SHADER,F.HIGH_FLOAT).precision>0&&F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.HIGH_FLOAT).precision>0)return"highp";Da="mediump"}return"mediump"===Da&&F.getShaderPrecisionFormat(F.VERTEX_SHADER,F.MEDIUM_FLOAT).precision>0&&F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let dl=void 0!==ll.precision?ll.precision:"highp";const pl=getMaxPrecision(dl);pl!==dl&&(console.warn("THREE.WebGLRenderer:",dl,"not supported, using",pl,"instead."),dl=pl);const fl=!0===ll.logarithmicDepthBuffer,Al=F.getParameter(F.MAX_TEXTURE_IMAGE_UNITS),bl=F.getParameter(F.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==hl)return hl;if(!0===Da.has("EXT_texture_filter_anisotropic")){const ll=Da.get("EXT_texture_filter_anisotropic");hl=F.getParameter(ll.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else hl=0;return hl},getMaxPrecision:getMaxPrecision,textureFormatReadable:function(Da){return Da===bd||cl.convert(Da)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(ll){const hl=ll===Ad&&(Da.has("EXT_color_buffer_half_float")||Da.has("EXT_color_buffer_float"));return!(ll!==ud&&cl.convert(ll)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)&&ll!==gd&&!hl)},precision:dl,logarithmicDepthBuffer:fl,maxTextures:Al,maxVertexTextures:bl,maxTextureSize:F.getParameter(F.MAX_TEXTURE_SIZE),maxCubemapSize:F.getParameter(F.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:F.getParameter(F.MAX_VERTEX_ATTRIBS),maxVertexUniforms:F.getParameter(F.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:F.getParameter(F.MAX_VARYING_VECTORS),maxFragmentUniforms:F.getParameter(F.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:bl>0,maxSamples:F.getParameter(F.MAX_SAMPLES)}}function WebGLClipping(F){const Da=this;let ll=null,cl=0,hl=!1,dl=!1;const pl=new Plane,fl=new Matrix3,Al={value:null,needsUpdate:!1};function projectPlanes(F,ll,cl,hl){const dl=null!==F?F.length:0;let bl=null;if(0!==dl){if(bl=Al.value,!0!==hl||null===bl){const Da=cl+4*dl,hl=ll.matrixWorldInverse;fl.getNormalMatrix(hl),(null===bl||bl.length<Da)&&(bl=new Float32Array(Da));for(let ll=0,Al=cl;ll!==dl;++ll,Al+=4)pl.copy(F[ll]).applyMatrix4(hl,fl),pl.normal.toArray(bl,Al),bl[Al+3]=pl.constant}Al.value=bl,Al.needsUpdate=!0}return Da.numPlanes=dl,Da.numIntersection=0,bl}this.uniform=Al,this.numPlanes=0,this.numIntersection=0,this.init=function(F,Da){const ll=0!==F.length||Da||0!==cl||hl;return hl=Da,cl=F.length,ll},this.beginShadows=function(){dl=!0,projectPlanes(null)},this.endShadows=function(){dl=!1},this.setGlobalState=function(F,Da){ll=projectPlanes(F,Da,0)},this.setState=function(pl,fl,bl){const kl=pl.clippingPlanes,Dl=pl.clipIntersection,Wl=pl.clipShadows,Ql=F.get(pl);if(!hl||null===kl||0===kl.length||dl&&!Wl)dl?projectPlanes(null):function(){Al.value!==ll&&(Al.value=ll,Al.needsUpdate=cl>0);Da.numPlanes=cl,Da.numIntersection=0}();else{const F=dl?0:cl,Da=4*F;let hl=Ql.clippingState||null;Al.value=hl,hl=projectPlanes(kl,fl,Da,bl);for(let cl=0;cl!==Da;++cl)hl[cl]=ll[cl];Ql.clippingState=hl,this.numIntersection=Dl?this.numPlanes:0,this.numPlanes+=F}}}function WebGLCubeMaps(F){let Da=new WeakMap;function mapTextureMapping(F,Da){return Da===ih?F.mapping=Nu:Da===gh&&(F.mapping=qu),F}function onTextureDispose(F){const ll=F.target;ll.removeEventListener("dispose",onTextureDispose);const cl=Da.get(ll);void 0!==cl&&(Da.delete(ll),cl.dispose())}return{get:function(ll){if(ll&&ll.isTexture){const cl=ll.mapping;if(cl===ih||cl===gh){if(Da.has(ll)){return mapTextureMapping(Da.get(ll).texture,ll.mapping)}{const cl=ll.image;if(cl&&cl.height>0){const hl=new WebGLCubeRenderTarget(cl.height);return hl.fromEquirectangularTexture(F,ll),Da.set(ll,hl),ll.addEventListener("dispose",onTextureDispose),mapTextureMapping(hl.texture,ll.mapping)}return null}}}return ll},dispose:function(){Da=new WeakMap}}}class OrthographicCamera extends Camera{constructor(F,Da,ll,cl,hl,dl){void 0===F&&(F=-1),void 0===Da&&(Da=1),void 0===ll&&(ll=1),void 0===cl&&(cl=-1),void 0===hl&&(hl=.1),void 0===dl&&(dl=2e3),super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=F,this.right=Da,this.top=ll,this.bottom=cl,this.near=hl,this.far=dl,this.updateProjectionMatrix()}copy(F,Da){return super.copy(F,Da),this.left=F.left,this.right=F.right,this.top=F.top,this.bottom=F.bottom,this.near=F.near,this.far=F.far,this.zoom=F.zoom,this.view=null===F.view?null:Object.assign({},F.view),this}setViewOffset(F,Da,ll,cl,hl,dl){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=F,this.view.fullHeight=Da,this.view.offsetX=ll,this.view.offsetY=cl,this.view.width=hl,this.view.height=dl,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const F=(this.right-this.left)/(2*this.zoom),Da=(this.top-this.bottom)/(2*this.zoom),ll=(this.right+this.left)/2,cl=(this.top+this.bottom)/2;let hl=ll-F,dl=ll+F,pl=cl+Da,fl=cl-Da;if(null!==this.view&&this.view.enabled){const F=(this.right-this.left)/this.view.fullWidth/this.zoom,Da=(this.top-this.bottom)/this.view.fullHeight/this.zoom;hl+=F*this.view.offsetX,dl=hl+F*this.view.width,pl-=Da*this.view.offsetY,fl=pl-Da*this.view.height}this.projectionMatrix.makeOrthographic(hl,dl,pl,fl,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(F){const Da=super.toJSON(F);return Da.object.zoom=this.zoom,Da.object.left=this.left,Da.object.right=this.right,Da.object.top=this.top,Da.object.bottom=this.bottom,Da.object.near=this.near,Da.object.far=this.far,null!==this.view&&(Da.object.view=Object.assign({},this.view)),Da}}const cg=[.125,.215,.35,.446,.526,.582],ug=20,hg=new OrthographicCamera,dg=new Color;let pg=null,mg=0,fg=0,gg=!1;const Ag=(1+Math.sqrt(5))/2,yg=1/Ag,vg=[new Vector3(-Ag,yg,0),new Vector3(Ag,yg,0),new Vector3(-yg,0,Ag),new Vector3(yg,0,Ag),new Vector3(0,Ag,-yg),new Vector3(0,Ag,yg),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(F){this._renderer=F,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(F,Da,ll,cl){void 0===Da&&(Da=0),void 0===ll&&(ll=.1),void 0===cl&&(cl=100),pg=this._renderer.getRenderTarget(),mg=this._renderer.getActiveCubeFace(),fg=this._renderer.getActiveMipmapLevel(),gg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const hl=this._allocateTargets();return hl.depthBuffer=!0,this._sceneToCubeUV(F,ll,cl,hl),Da>0&&this._blur(hl,0,0,Da),this._applyPMREM(hl),this._cleanup(hl),hl}fromEquirectangular(F,Da){return void 0===Da&&(Da=null),this._fromTexture(F,Da)}fromCubemap(F,Da){return void 0===Da&&(Da=null),this._fromTexture(F,Da)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(F){this._lodMax=Math.floor(Math.log2(F)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let F=0;F<this._lodPlanes.length;F++)this._lodPlanes[F].dispose()}_cleanup(F){this._renderer.setRenderTarget(pg,mg,fg),this._renderer.xr.enabled=gg,F.scissorTest=!1,_setViewport(F,0,0,F.width,F.height)}_fromTexture(F,Da){F.mapping===Nu||F.mapping===qu?this._setSize(0===F.image.length?16:F.image[0].width||F.image[0].image.width):this._setSize(F.image.width/4),pg=this._renderer.getRenderTarget(),mg=this._renderer.getActiveCubeFace(),fg=this._renderer.getActiveMipmapLevel(),gg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const ll=Da||this._allocateTargets();return this._textureToCubeUV(F,ll),this._applyPMREM(ll),this._cleanup(ll),ll}_allocateTargets(){const F=3*Math.max(this._cubeSize,112),Da=4*this._cubeSize,ll={magFilter:od,minFilter:od,generateMipmaps:!1,type:Ad,format:bd,colorSpace:Ip,depthBuffer:!1},cl=_createRenderTarget(F,Da,ll);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==F||this._pingPongRenderTarget.height!==Da){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(F,Da,ll);const{_lodMax:cl}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(F){const Da=[],ll=[],cl=[];let hl=F;const dl=F-4+1+cg.length;for(let pl=0;pl<dl;pl++){const dl=Math.pow(2,hl);ll.push(dl);let fl=1/dl;pl>F-4?fl=cg[pl-F+4-1]:0===pl&&(fl=0),cl.push(fl);const Al=1/(dl-2),bl=-Al,kl=1+Al,Dl=[bl,bl,kl,bl,kl,kl,bl,bl,kl,kl,bl,kl],Wl=6,Ql=6,wc=3,Sc=2,eu=1,iu=new Float32Array(wc*Ql*Wl),su=new Float32Array(Sc*Ql*Wl),cu=new Float32Array(eu*Ql*Wl);for(let F=0;F<Wl;F++){const Da=F%3*2/3-1,ll=F>2?0:-1,cl=[Da,ll,0,Da+2/3,ll,0,Da+2/3,ll+1,0,Da,ll,0,Da+2/3,ll+1,0,Da,ll+1,0];iu.set(cl,wc*Ql*F),su.set(Dl,Sc*Ql*F);const hl=[F,F,F,F,F,F];cu.set(hl,eu*Ql*F)}const uu=new BufferGeometry;uu.setAttribute("position",new BufferAttribute(iu,wc)),uu.setAttribute("uv",new BufferAttribute(su,Sc)),uu.setAttribute("faceIndex",new BufferAttribute(cu,eu)),Da.push(uu),hl>4&&hl--}return{lodPlanes:Da,sizeLods:ll,sigmas:cl}}(cl)),this._blurMaterial=function(F,Da,ll){const cl=new Float32Array(ug),hl=new Vector3(0,1,0),dl=new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:ug,CUBEUV_TEXEL_WIDTH:1/Da,CUBEUV_TEXEL_HEIGHT:1/ll,CUBEUV_MAX_MIP:`${F}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:cl},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:hl}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return dl}(cl,F,Da)}return cl}_compileMaterial(F){const Da=new Mesh(this._lodPlanes[0],F);this._renderer.compile(Da,hg)}_sceneToCubeUV(F,Da,ll,cl){const hl=new PerspectiveCamera(90,1,Da,ll),dl=[1,-1,1,1,1,1],pl=[1,1,1,-1,-1,-1],fl=this._renderer,Al=fl.autoClear,bl=fl.toneMapping;fl.getClearColor(dg),fl.toneMapping=0,fl.autoClear=!1;const kl=new MeshBasicMaterial({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Dl=new Mesh(new BoxGeometry,kl);let Wl=!1;const Ql=F.background;Ql?Ql.isColor&&(kl.color.copy(Ql),F.background=null,Wl=!0):(kl.color.copy(dg),Wl=!0);for(let wc=0;wc<6;wc++){const Da=wc%3;0===Da?(hl.up.set(0,dl[wc],0),hl.lookAt(pl[wc],0,0)):1===Da?(hl.up.set(0,0,dl[wc]),hl.lookAt(0,pl[wc],0)):(hl.up.set(0,dl[wc],0),hl.lookAt(0,0,pl[wc]));const ll=this._cubeSize;_setViewport(cl,Da*ll,wc>2?ll:0,ll,ll),fl.setRenderTarget(cl),Wl&&fl.render(Dl,hl),fl.render(F,hl)}Dl.geometry.dispose(),Dl.material.dispose(),fl.toneMapping=bl,fl.autoClear=Al,F.background=Ql}_textureToCubeUV(F,Da){const ll=this._renderer,cl=F.mapping===Nu||F.mapping===qu;cl?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===F.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const hl=cl?this._cubemapMaterial:this._equirectMaterial,dl=new Mesh(this._lodPlanes[0],hl);hl.uniforms.envMap.value=F;const pl=this._cubeSize;_setViewport(Da,0,0,3*pl,2*pl),ll.setRenderTarget(Da),ll.render(dl,hg)}_applyPMREM(F){const Da=this._renderer,ll=Da.autoClear;Da.autoClear=!1;const cl=this._lodPlanes.length;for(let hl=1;hl<cl;hl++){const Da=Math.sqrt(this._sigmas[hl]*this._sigmas[hl]-this._sigmas[hl-1]*this._sigmas[hl-1]),ll=vg[(cl-hl-1)%vg.length];this._blur(F,hl-1,hl,Da,ll)}Da.autoClear=ll}_blur(F,Da,ll,cl,hl){const dl=this._pingPongRenderTarget;this._halfBlur(F,dl,Da,ll,cl,"latitudinal",hl),this._halfBlur(dl,F,ll,ll,cl,"longitudinal",hl)}_halfBlur(F,Da,ll,cl,hl,dl,pl){const fl=this._renderer,Al=this._blurMaterial;"latitudinal"!==dl&&"longitudinal"!==dl&&console.error("blur direction must be either latitudinal or longitudinal!");const bl=new Mesh(this._lodPlanes[cl],Al),kl=Al.uniforms,Dl=this._sizeLods[ll]-1,Wl=isFinite(hl)?Math.PI/(2*Dl):2*Math.PI/39,Ql=hl/Wl,wc=isFinite(hl)?1+Math.floor(3*Ql):ug;wc>ug&&console.warn(`sigmaRadians, ${hl}, is too large and will clip, as it requested ${wc} samples when the maximum is set to 20`);const Sc=[];let eu=0;for(let cu=0;cu<ug;++cu){const F=cu/Ql,Da=Math.exp(-F*F/2);Sc.push(Da),0===cu?eu+=Da:cu<wc&&(eu+=2*Da)}for(let cu=0;cu<Sc.length;cu++)Sc[cu]=Sc[cu]/eu;kl.envMap.value=F.texture,kl.samples.value=wc,kl.weights.value=Sc,kl.latitudinal.value="latitudinal"===dl,pl&&(kl.poleAxis.value=pl);const{_lodMax:iu}=this;kl.dTheta.value=Wl,kl.mipInt.value=iu-ll;const su=this._sizeLods[cl];_setViewport(Da,3*su*(cl>iu-4?cl-iu+4:0),4*(this._cubeSize-su),3*su,2*su),fl.setRenderTarget(Da),fl.render(bl,hg)}}function _createRenderTarget(F,Da,ll){const cl=new WebGLRenderTarget(F,Da,ll);return cl.texture.mapping=ed,cl.texture.name="PMREM.cubeUv",cl.scissorTest=!0,cl}function _setViewport(F,Da,ll,cl,hl){F.viewport.set(Da,ll,cl,hl),F.scissor.set(Da,ll,cl,hl)}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(F){let Da=new WeakMap,ll=null;function onTextureDispose(F){const ll=F.target;ll.removeEventListener("dispose",onTextureDispose);const cl=Da.get(ll);void 0!==cl&&(Da.delete(ll),cl.dispose())}return{get:function(cl){if(cl&&cl.isTexture){const hl=cl.mapping,dl=hl===ih||hl===gh,pl=hl===Nu||hl===qu;if(dl||pl){let hl=Da.get(cl);const fl=void 0!==hl?hl.texture.pmremVersion:0;if(cl.isRenderTargetTexture&&cl.pmremVersion!==fl)return null===ll&&(ll=new PMREMGenerator(F)),hl=dl?ll.fromEquirectangular(cl,hl):ll.fromCubemap(cl,hl),hl.texture.pmremVersion=cl.pmremVersion,Da.set(cl,hl),hl.texture;if(void 0!==hl)return hl.texture;{const fl=cl.image;return dl&&fl&&fl.height>0||pl&&fl&&function(F){let Da=0;const ll=6;for(let cl=0;cl<ll;cl++)void 0!==F[cl]&&Da++;return Da===ll}(fl)?(null===ll&&(ll=new PMREMGenerator(F)),hl=dl?ll.fromEquirectangular(cl):ll.fromCubemap(cl),hl.texture.pmremVersion=cl.pmremVersion,Da.set(cl,hl),cl.addEventListener("dispose",onTextureDispose),hl.texture):null}}}return cl},dispose:function(){Da=new WeakMap,null!==ll&&(ll.dispose(),ll=null)}}}function WebGLExtensions(F){const Da={};function getExtension(ll){if(void 0!==Da[ll])return Da[ll];let cl;switch(ll){case"WEBGL_depth_texture":cl=F.getExtension("WEBGL_depth_texture")||F.getExtension("MOZ_WEBGL_depth_texture")||F.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":cl=F.getExtension("EXT_texture_filter_anisotropic")||F.getExtension("MOZ_EXT_texture_filter_anisotropic")||F.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":cl=F.getExtension("WEBGL_compressed_texture_s3tc")||F.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||F.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":cl=F.getExtension("WEBGL_compressed_texture_pvrtc")||F.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:cl=F.getExtension(ll)}return Da[ll]=cl,cl}return{has:function(F){return null!==getExtension(F)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(F){const Da=getExtension(F);return null===Da&&warnOnce("THREE.WebGLRenderer: "+F+" extension not supported."),Da}}}function WebGLGeometries(F,Da,ll,cl){const hl={},dl=new WeakMap;function onGeometryDispose(F){const pl=F.target;null!==pl.index&&Da.remove(pl.index);for(const ll in pl.attributes)Da.remove(pl.attributes[ll]);for(const ll in pl.morphAttributes){const F=pl.morphAttributes[ll];for(let ll=0,cl=F.length;ll<cl;ll++)Da.remove(F[ll])}pl.removeEventListener("dispose",onGeometryDispose),delete hl[pl.id];const fl=dl.get(pl);fl&&(Da.remove(fl),dl.delete(pl)),cl.releaseStatesOfGeometry(pl),!0===pl.isInstancedBufferGeometry&&delete pl._maxInstanceCount,ll.memory.geometries--}function updateWireframeAttribute(F){const ll=[],cl=F.index,hl=F.attributes.position;let pl=0;if(null!==cl){const F=cl.array;pl=cl.version;for(let Da=0,cl=F.length;Da<cl;Da+=3){const cl=F[Da+0],hl=F[Da+1],dl=F[Da+2];ll.push(cl,hl,hl,dl,dl,cl)}}else{if(void 0===hl)return;{const F=hl.array;pl=hl.version;for(let Da=0,cl=F.length/3-1;Da<cl;Da+=3){const F=Da+0,cl=Da+1,hl=Da+2;ll.push(F,cl,cl,hl,hl,F)}}}const fl=new(arrayNeedsUint32(ll)?Uint32BufferAttribute:Uint16BufferAttribute)(ll,1);fl.version=pl;const Al=dl.get(F);Al&&Da.remove(Al),dl.set(F,fl)}return{get:function(F,Da){return!0===hl[Da.id]||(Da.addEventListener("dispose",onGeometryDispose),hl[Da.id]=!0,ll.memory.geometries++),Da},update:function(ll){const cl=ll.attributes;for(const dl in cl)Da.update(cl[dl],F.ARRAY_BUFFER);const hl=ll.morphAttributes;for(const dl in hl){const ll=hl[dl];for(let cl=0,hl=ll.length;cl<hl;cl++)Da.update(ll[cl],F.ARRAY_BUFFER)}},getWireframeAttribute:function(F){const Da=dl.get(F);if(Da){const ll=F.index;null!==ll&&Da.version<ll.version&&updateWireframeAttribute(F)}else updateWireframeAttribute(F);return dl.get(F)}}}function WebGLIndexedBufferRenderer(F,Da,ll){let cl,hl,dl;function renderInstances(Da,pl,fl){0!==fl&&(F.drawElementsInstanced(cl,pl,hl,Da*dl,fl),ll.update(pl,cl,fl))}this.setMode=function(F){cl=F},this.setIndex=function(F){hl=F.type,dl=F.bytesPerElement},this.render=function(Da,pl){F.drawElements(cl,pl,hl,Da*dl),ll.update(pl,cl,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(F,dl,pl){if(0===pl)return;Da.get("WEBGL_multi_draw").multiDrawElementsWEBGL(cl,dl,0,hl,F,0,pl);let fl=0;for(let Da=0;Da<pl;Da++)fl+=dl[Da];ll.update(fl,cl,1)},this.renderMultiDrawInstances=function(F,pl,fl,Al){if(0===fl)return;const bl=Da.get("WEBGL_multi_draw");if(null===bl)for(let Da=0;Da<F.length;Da++)renderInstances(F[Da]/dl,pl[Da],Al[Da]);else{bl.multiDrawElementsInstancedWEBGL(cl,pl,0,hl,F,0,Al,0,fl);let Da=0;for(let F=0;F<fl;F++)Da+=pl[F];for(let F=0;F<Al.length;F++)ll.update(Da,cl,Al[F])}}}function WebGLInfo(F){const Da={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:Da,programs:null,autoReset:!0,reset:function(){Da.calls=0,Da.triangles=0,Da.points=0,Da.lines=0},update:function(ll,cl,hl){switch(Da.calls++,cl){case F.TRIANGLES:Da.triangles+=hl*(ll/3);break;case F.LINES:Da.lines+=hl*(ll/2);break;case F.LINE_STRIP:Da.lines+=hl*(ll-1);break;case F.LINE_LOOP:Da.lines+=hl*ll;break;case F.POINTS:Da.points+=hl*ll;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",cl)}}}}function WebGLMorphtargets(F,Da,ll){const cl=new WeakMap,hl=new Vector4;return{update:function(dl,pl,fl){const Al=dl.morphTargetInfluences,bl=pl.morphAttributes.position||pl.morphAttributes.normal||pl.morphAttributes.color,kl=void 0!==bl?bl.length:0;let Dl=cl.get(pl);if(void 0===Dl||Dl.count!==kl){void 0!==Dl&&Dl.texture.dispose();const Wl=void 0!==pl.morphAttributes.position,Ql=void 0!==pl.morphAttributes.normal,wc=void 0!==pl.morphAttributes.color,Sc=pl.morphAttributes.position||[],eu=pl.morphAttributes.normal||[],iu=pl.morphAttributes.color||[];let su=0;!0===Wl&&(su=1),!0===Ql&&(su=2),!0===wc&&(su=3);let cu=pl.attributes.position.count*su,uu=1;cu>Da.maxTextureSize&&(uu=Math.ceil(cu/Da.maxTextureSize),cu=Da.maxTextureSize);const hu=new Float32Array(cu*uu*4*kl),Lu=new DataArrayTexture(hu,cu,uu,kl);Lu.type=gd,Lu.needsUpdate=!0;const zu=4*su;for(let Du=0;Du<kl;Du++){const Nu=Sc[Du],qu=eu[Du],ih=iu[Du],gh=cu*uu*4*Du;for(let ed=0;ed<Nu.count;ed++){const td=ed*zu;!0===Wl&&(hl.fromBufferAttribute(Nu,ed),hu[gh+td+0]=hl.x,hu[gh+td+1]=hl.y,hu[gh+td+2]=hl.z,hu[gh+td+3]=0),!0===Ql&&(hl.fromBufferAttribute(qu,ed),hu[gh+td+4]=hl.x,hu[gh+td+5]=hl.y,hu[gh+td+6]=hl.z,hu[gh+td+7]=0),!0===wc&&(hl.fromBufferAttribute(ih,ed),hu[gh+td+8]=hl.x,hu[gh+td+9]=hl.y,hu[gh+td+10]=hl.z,hu[gh+td+11]=4===ih.itemSize?hl.w:1)}}function disposeTexture(){Lu.dispose(),cl.delete(pl),pl.removeEventListener("dispose",disposeTexture)}Dl={count:kl,texture:Lu,size:new Vector2(cu,uu)},cl.set(pl,Dl),pl.addEventListener("dispose",disposeTexture)}if(!0===dl.isInstancedMesh&&null!==dl.morphTexture)fl.getUniforms().setValue(F,"morphTexture",dl.morphTexture,ll);else{let id=0;for(let rd=0;rd<Al.length;rd++)id+=Al[rd];const nd=pl.morphTargetsRelative?1:1-id;fl.getUniforms().setValue(F,"morphTargetBaseInfluence",nd),fl.getUniforms().setValue(F,"morphTargetInfluences",Al)}fl.getUniforms().setValue(F,"morphTargetsTexture",Dl.texture,ll),fl.getUniforms().setValue(F,"morphTargetsTextureSize",Dl.size)}}}function WebGLObjects(F,Da,ll,cl){let hl=new WeakMap;function onInstancedMeshDispose(F){const Da=F.target;Da.removeEventListener("dispose",onInstancedMeshDispose),ll.remove(Da.instanceMatrix),null!==Da.instanceColor&&ll.remove(Da.instanceColor)}return{update:function(dl){const pl=cl.render.frame,fl=dl.geometry,Al=Da.get(dl,fl);if(hl.get(Al)!==pl&&(Da.update(Al),hl.set(Al,pl)),dl.isInstancedMesh&&(!1===dl.hasEventListener("dispose",onInstancedMeshDispose)&&dl.addEventListener("dispose",onInstancedMeshDispose),hl.get(dl)!==pl&&(ll.update(dl.instanceMatrix,F.ARRAY_BUFFER),null!==dl.instanceColor&&ll.update(dl.instanceColor,F.ARRAY_BUFFER),hl.set(dl,pl))),dl.isSkinnedMesh){const F=dl.skeleton;hl.get(F)!==pl&&(F.update(),hl.set(F,pl))}return Al},dispose:function(){hl=new WeakMap}}}class DepthTexture extends Texture{constructor(F,Da,ll,cl,hl,dl,pl,fl,Al,bl){if(void 0===bl&&(bl=wd),bl!==wd&&bl!==Ed)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===ll&&bl===wd&&(ll=fd),void 0===ll&&bl===Ed&&(ll=_d),super(null,cl,hl,dl,pl,fl,bl,ll,Al),this.isDepthTexture=!0,this.image={width:F,height:Da},this.magFilter=void 0!==pl?pl:rd,this.minFilter=void 0!==fl?fl:rd,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(F){return super.copy(F),this.compareFunction=F.compareFunction,this}toJSON(F){const Da=super.toJSON(F);return null!==this.compareFunction&&(Da.compareFunction=this.compareFunction),Da}}const _g=new Texture,xg=new DepthTexture(1,1),bg=new DataArrayTexture,wg=new Data3DTexture,Eg=new CubeTexture,Mg=[],Sg=[],kg=new Float32Array(16),Tg=new Float32Array(9),Ig=new Float32Array(4);function flatten(F,Da,ll){const cl=F[0];if(cl<=0||cl>0)return F;const hl=Da*ll;let dl=Mg[hl];if(void 0===dl&&(dl=new Float32Array(hl),Mg[hl]=dl),0!==Da){cl.toArray(dl,0);for(let cl=1,hl=0;cl!==Da;++cl)hl+=ll,F[cl].toArray(dl,hl)}return dl}function arraysEqual(F,Da){if(F.length!==Da.length)return!1;for(let ll=0,cl=F.length;ll<cl;ll++)if(F[ll]!==Da[ll])return!1;return!0}function copyArray(F,Da){for(let ll=0,cl=Da.length;ll<cl;ll++)F[ll]=Da[ll]}function allocTexUnits(F,Da){let ll=Sg[Da];void 0===ll&&(ll=new Int32Array(Da),Sg[Da]=ll);for(let cl=0;cl!==Da;++cl)ll[cl]=F.allocateTextureUnit();return ll}function setValueV1f(F,Da){const ll=this.cache;ll[0]!==Da&&(F.uniform1f(this.addr,Da),ll[0]=Da)}function setValueV2f(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y||(F.uniform2f(this.addr,Da.x,Da.y),ll[0]=Da.x,ll[1]=Da.y);else{if(arraysEqual(ll,Da))return;F.uniform2fv(this.addr,Da),copyArray(ll,Da)}}function setValueV3f(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z||(F.uniform3f(this.addr,Da.x,Da.y,Da.z),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z);else if(void 0!==Da.r)ll[0]===Da.r&&ll[1]===Da.g&&ll[2]===Da.b||(F.uniform3f(this.addr,Da.r,Da.g,Da.b),ll[0]=Da.r,ll[1]=Da.g,ll[2]=Da.b);else{if(arraysEqual(ll,Da))return;F.uniform3fv(this.addr,Da),copyArray(ll,Da)}}function setValueV4f(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z&&ll[3]===Da.w||(F.uniform4f(this.addr,Da.x,Da.y,Da.z,Da.w),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z,ll[3]=Da.w);else{if(arraysEqual(ll,Da))return;F.uniform4fv(this.addr,Da),copyArray(ll,Da)}}function setValueM2(F,Da){const ll=this.cache,cl=Da.elements;if(void 0===cl){if(arraysEqual(ll,Da))return;F.uniformMatrix2fv(this.addr,!1,Da),copyArray(ll,Da)}else{if(arraysEqual(ll,cl))return;Ig.set(cl),F.uniformMatrix2fv(this.addr,!1,Ig),copyArray(ll,cl)}}function setValueM3(F,Da){const ll=this.cache,cl=Da.elements;if(void 0===cl){if(arraysEqual(ll,Da))return;F.uniformMatrix3fv(this.addr,!1,Da),copyArray(ll,Da)}else{if(arraysEqual(ll,cl))return;Tg.set(cl),F.uniformMatrix3fv(this.addr,!1,Tg),copyArray(ll,cl)}}function setValueM4(F,Da){const ll=this.cache,cl=Da.elements;if(void 0===cl){if(arraysEqual(ll,Da))return;F.uniformMatrix4fv(this.addr,!1,Da),copyArray(ll,Da)}else{if(arraysEqual(ll,cl))return;kg.set(cl),F.uniformMatrix4fv(this.addr,!1,kg),copyArray(ll,cl)}}function setValueV1i(F,Da){const ll=this.cache;ll[0]!==Da&&(F.uniform1i(this.addr,Da),ll[0]=Da)}function setValueV2i(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y||(F.uniform2i(this.addr,Da.x,Da.y),ll[0]=Da.x,ll[1]=Da.y);else{if(arraysEqual(ll,Da))return;F.uniform2iv(this.addr,Da),copyArray(ll,Da)}}function setValueV3i(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z||(F.uniform3i(this.addr,Da.x,Da.y,Da.z),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z);else{if(arraysEqual(ll,Da))return;F.uniform3iv(this.addr,Da),copyArray(ll,Da)}}function setValueV4i(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z&&ll[3]===Da.w||(F.uniform4i(this.addr,Da.x,Da.y,Da.z,Da.w),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z,ll[3]=Da.w);else{if(arraysEqual(ll,Da))return;F.uniform4iv(this.addr,Da),copyArray(ll,Da)}}function setValueV1ui(F,Da){const ll=this.cache;ll[0]!==Da&&(F.uniform1ui(this.addr,Da),ll[0]=Da)}function setValueV2ui(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y||(F.uniform2ui(this.addr,Da.x,Da.y),ll[0]=Da.x,ll[1]=Da.y);else{if(arraysEqual(ll,Da))return;F.uniform2uiv(this.addr,Da),copyArray(ll,Da)}}function setValueV3ui(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z||(F.uniform3ui(this.addr,Da.x,Da.y,Da.z),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z);else{if(arraysEqual(ll,Da))return;F.uniform3uiv(this.addr,Da),copyArray(ll,Da)}}function setValueV4ui(F,Da){const ll=this.cache;if(void 0!==Da.x)ll[0]===Da.x&&ll[1]===Da.y&&ll[2]===Da.z&&ll[3]===Da.w||(F.uniform4ui(this.addr,Da.x,Da.y,Da.z,Da.w),ll[0]=Da.x,ll[1]=Da.y,ll[2]=Da.z,ll[3]=Da.w);else{if(arraysEqual(ll,Da))return;F.uniform4uiv(this.addr,Da),copyArray(ll,Da)}}function setValueT1(F,Da,ll){const cl=this.cache,hl=ll.allocateTextureUnit();let dl;cl[0]!==hl&&(F.uniform1i(this.addr,hl),cl[0]=hl),this.type===F.SAMPLER_2D_SHADOW?(xg.compareFunction=515,dl=xg):dl=_g,ll.setTexture2D(Da||dl,hl)}function setValueT3D1(F,Da,ll){const cl=this.cache,hl=ll.allocateTextureUnit();cl[0]!==hl&&(F.uniform1i(this.addr,hl),cl[0]=hl),ll.setTexture3D(Da||wg,hl)}function setValueT6(F,Da,ll){const cl=this.cache,hl=ll.allocateTextureUnit();cl[0]!==hl&&(F.uniform1i(this.addr,hl),cl[0]=hl),ll.setTextureCube(Da||Eg,hl)}function setValueT2DArray1(F,Da,ll){const cl=this.cache,hl=ll.allocateTextureUnit();cl[0]!==hl&&(F.uniform1i(this.addr,hl),cl[0]=hl),ll.setTexture2DArray(Da||bg,hl)}function setValueV1fArray(F,Da){F.uniform1fv(this.addr,Da)}function setValueV2fArray(F,Da){const ll=flatten(Da,this.size,2);F.uniform2fv(this.addr,ll)}function setValueV3fArray(F,Da){const ll=flatten(Da,this.size,3);F.uniform3fv(this.addr,ll)}function setValueV4fArray(F,Da){const ll=flatten(Da,this.size,4);F.uniform4fv(this.addr,ll)}function setValueM2Array(F,Da){const ll=flatten(Da,this.size,4);F.uniformMatrix2fv(this.addr,!1,ll)}function setValueM3Array(F,Da){const ll=flatten(Da,this.size,9);F.uniformMatrix3fv(this.addr,!1,ll)}function setValueM4Array(F,Da){const ll=flatten(Da,this.size,16);F.uniformMatrix4fv(this.addr,!1,ll)}function setValueV1iArray(F,Da){F.uniform1iv(this.addr,Da)}function setValueV2iArray(F,Da){F.uniform2iv(this.addr,Da)}function setValueV3iArray(F,Da){F.uniform3iv(this.addr,Da)}function setValueV4iArray(F,Da){F.uniform4iv(this.addr,Da)}function setValueV1uiArray(F,Da){F.uniform1uiv(this.addr,Da)}function setValueV2uiArray(F,Da){F.uniform2uiv(this.addr,Da)}function setValueV3uiArray(F,Da){F.uniform3uiv(this.addr,Da)}function setValueV4uiArray(F,Da){F.uniform4uiv(this.addr,Da)}function setValueT1Array(F,Da,ll){const cl=this.cache,hl=Da.length,dl=allocTexUnits(ll,hl);arraysEqual(cl,dl)||(F.uniform1iv(this.addr,dl),copyArray(cl,dl));for(let pl=0;pl!==hl;++pl)ll.setTexture2D(Da[pl]||_g,dl[pl])}function setValueT3DArray(F,Da,ll){const cl=this.cache,hl=Da.length,dl=allocTexUnits(ll,hl);arraysEqual(cl,dl)||(F.uniform1iv(this.addr,dl),copyArray(cl,dl));for(let pl=0;pl!==hl;++pl)ll.setTexture3D(Da[pl]||wg,dl[pl])}function setValueT6Array(F,Da,ll){const cl=this.cache,hl=Da.length,dl=allocTexUnits(ll,hl);arraysEqual(cl,dl)||(F.uniform1iv(this.addr,dl),copyArray(cl,dl));for(let pl=0;pl!==hl;++pl)ll.setTextureCube(Da[pl]||Eg,dl[pl])}function setValueT2DArrayArray(F,Da,ll){const cl=this.cache,hl=Da.length,dl=allocTexUnits(ll,hl);arraysEqual(cl,dl)||(F.uniform1iv(this.addr,dl),copyArray(cl,dl));for(let pl=0;pl!==hl;++pl)ll.setTexture2DArray(Da[pl]||bg,dl[pl])}class SingleUniform{constructor(F,Da,ll){this.id=F,this.addr=ll,this.cache=[],this.type=Da.type,this.setValue=function(F){switch(F){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(Da.type)}}class PureArrayUniform{constructor(F,Da,ll){this.id=F,this.addr=ll,this.cache=[],this.type=Da.type,this.size=Da.size,this.setValue=function(F){switch(F){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(Da.type)}}class StructuredUniform{constructor(F){this.id=F,this.seq=[],this.map={}}setValue(F,Da,ll){const cl=this.seq;for(let hl=0,dl=cl.length;hl!==dl;++hl){const dl=cl[hl];dl.setValue(F,Da[dl.id],ll)}}}const Cg=/(\w+)(\])?(\[|\.)?/g;function addUniform(F,Da){F.seq.push(Da),F.map[Da.id]=Da}function parseUniform(F,Da,ll){const cl=F.name,hl=cl.length;for(Cg.lastIndex=0;;){const dl=Cg.exec(cl),pl=Cg.lastIndex;let fl=dl[1];const Al="]"===dl[2],bl=dl[3];if(Al&&(fl|=0),void 0===bl||"["===bl&&pl+2===hl){addUniform(ll,void 0===bl?new SingleUniform(fl,F,Da):new PureArrayUniform(fl,F,Da));break}{let F=ll.map[fl];void 0===F&&(F=new StructuredUniform(fl),addUniform(ll,F)),ll=F}}}class WebGLUniforms{constructor(F,Da){this.seq=[],this.map={};const ll=F.getProgramParameter(Da,F.ACTIVE_UNIFORMS);for(let cl=0;cl<ll;++cl){const ll=F.getActiveUniform(Da,cl);parseUniform(ll,F.getUniformLocation(Da,ll.name),this)}}setValue(F,Da,ll,cl){const hl=this.map[Da];void 0!==hl&&hl.setValue(F,ll,cl)}setOptional(F,Da,ll){const cl=Da[ll];void 0!==cl&&this.setValue(F,ll,cl)}static upload(F,Da,ll,cl){for(let hl=0,dl=Da.length;hl!==dl;++hl){const dl=Da[hl],pl=ll[dl.id];!1!==pl.needsUpdate&&dl.setValue(F,pl.value,cl)}}static seqWithValue(F,Da){const ll=[];for(let cl=0,hl=F.length;cl!==hl;++cl){const hl=F[cl];hl.id in Da&&ll.push(hl)}return ll}}function WebGLShader(F,Da,ll){const cl=F.createShader(Da);return F.shaderSource(cl,ll),F.compileShader(cl),cl}let Lg=0;function getShaderErrors(F,Da,ll){const cl=F.getShaderParameter(Da,F.COMPILE_STATUS),hl=F.getShaderInfoLog(Da).trim();if(cl&&""===hl)return"";const dl=/ERROR: 0:(\d+)/.exec(hl);if(dl){const cl=parseInt(dl[1]);return ll.toUpperCase()+"\n\n"+hl+"\n\n"+function(F,Da){const ll=F.split("\n"),cl=[],hl=Math.max(Da-6,0),dl=Math.min(Da+6,ll.length);for(let pl=hl;pl<dl;pl++){const F=pl+1;cl.push(`${F===Da?">":" "} ${F}: ${ll[pl]}`)}return cl.join("\n")}(F.getShaderSource(Da),cl)}return hl}function getTexelEncodingFunction(F,Da){const ll=function(F){const Da=sm.getPrimaries(sm.workingColorSpace),ll=sm.getPrimaries(F);let cl;switch(Da===ll?cl="":Da===Rp&&ll===Dp?cl="LinearDisplayP3ToLinearSRGB":Da===Dp&&ll===Rp&&(cl="LinearSRGBToLinearDisplayP3"),F){case Ip:case Lp:return[cl,"LinearTransferOETF"];case Tp:case Cp:return[cl,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",F),[cl,"LinearTransferOETF"]}}(Da);return`vec4 ${F}( vec4 value ) { return ${ll[0]}( ${ll[1]}( value ) ); }`}function getToneMappingFunction(F,Da){let ll;switch(Da){case 1:ll="Linear";break;case 2:ll="Reinhard";break;case 3:ll="Cineon";break;case 4:ll="ACESFilmic";break;case 6:ll="AgX";break;case 7:ll="Neutral";break;case 5:ll="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Da),ll="Linear"}return"vec3 "+F+"( vec3 color ) { return "+ll+"ToneMapping( color ); }"}const zg=new Vector3;function getLuminanceFunction(){sm.getLuminanceCoefficients(zg);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${zg.x.toFixed(4)}, ${zg.y.toFixed(4)}, ${zg.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(F){return""!==F}function replaceLightNums(F,Da){const ll=Da.numSpotLightShadows+Da.numSpotLightMaps-Da.numSpotLightShadowsWithMaps;return F.replace(/NUM_DIR_LIGHTS/g,Da.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Da.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,Da.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,ll).replace(/NUM_RECT_AREA_LIGHTS/g,Da.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Da.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Da.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Da.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,Da.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Da.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Da.numPointLightShadows)}function replaceClippingPlaneNums(F,Da){return F.replace(/NUM_CLIPPING_PLANES/g,Da.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Da.numClippingPlanes-Da.numClipIntersection)}const Pg=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(F){return F.replace(Pg,includeReplacer)}const Dg=new Map;function includeReplacer(F,Da){let ll=ng[Da];if(void 0===ll){const F=Dg.get(Da);if(void 0===F)throw new Error("Can not resolve #include <"+Da+">");ll=ng[F],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',Da,F)}return resolveIncludes(ll)}const Rg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(F){return F.replace(Rg,loopReplacer)}function loopReplacer(F,Da,ll,cl){let hl="";for(let dl=parseInt(Da);dl<parseInt(ll);dl++)hl+=cl.replace(/\[\s*i\s*\]/g,"[ "+dl+" ]").replace(/UNROLLED_LOOP_INDEX/g,dl);return hl}function generatePrecision(F){let Da=`precision ${F.precision} float;\n\tprecision ${F.precision} int;\n\tprecision ${F.precision} sampler2D;\n\tprecision ${F.precision} samplerCube;\n\tprecision ${F.precision} sampler3D;\n\tprecision ${F.precision} sampler2DArray;\n\tprecision ${F.precision} sampler2DShadow;\n\tprecision ${F.precision} samplerCubeShadow;\n\tprecision ${F.precision} sampler2DArrayShadow;\n\tprecision ${F.precision} isampler2D;\n\tprecision ${F.precision} isampler3D;\n\tprecision ${F.precision} isamplerCube;\n\tprecision ${F.precision} isampler2DArray;\n\tprecision ${F.precision} usampler2D;\n\tprecision ${F.precision} usampler3D;\n\tprecision ${F.precision} usamplerCube;\n\tprecision ${F.precision} usampler2DArray;\n\t`;return"highp"===F.precision?Da+="\n#define HIGH_PRECISION":"mediump"===F.precision?Da+="\n#define MEDIUM_PRECISION":"lowp"===F.precision&&(Da+="\n#define LOW_PRECISION"),Da}function WebGLProgram(F,Da,ll,cl){const hl=F.getContext(),dl=ll.defines;let pl=ll.vertexShader,fl=ll.fragmentShader;const Al=function(F){let Da="SHADOWMAP_TYPE_BASIC";return 1===F.shadowMapType?Da="SHADOWMAP_TYPE_PCF":2===F.shadowMapType?Da="SHADOWMAP_TYPE_PCF_SOFT":3===F.shadowMapType&&(Da="SHADOWMAP_TYPE_VSM"),Da}(ll),bl=function(F){let Da="ENVMAP_TYPE_CUBE";if(F.envMap)switch(F.envMapMode){case Nu:case qu:Da="ENVMAP_TYPE_CUBE";break;case ed:Da="ENVMAP_TYPE_CUBE_UV"}return Da}(ll),kl=function(F){let Da="ENVMAP_MODE_REFLECTION";F.envMap&&F.envMapMode===qu&&(Da="ENVMAP_MODE_REFRACTION");return Da}(ll),Dl=function(F){let Da="ENVMAP_BLENDING_NONE";if(F.envMap)switch(F.combine){case 0:Da="ENVMAP_BLENDING_MULTIPLY";break;case 1:Da="ENVMAP_BLENDING_MIX";break;case 2:Da="ENVMAP_BLENDING_ADD"}return Da}(ll),Wl=function(F){const Da=F.envMapCubeUVHeight;if(null===Da)return null;const ll=Math.log2(Da)-2,cl=1/Da;return{texelWidth:1/(3*Math.max(Math.pow(2,ll),112)),texelHeight:cl,maxMip:ll}}(ll),Ql=function(F){return[F.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",F.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(ll),wc=function(F){const Da=[];for(const ll in F){const cl=F[ll];!1!==cl&&Da.push("#define "+ll+" "+cl)}return Da.join("\n")}(dl),Sc=hl.createProgram();let eu,iu,su=ll.glslVersion?"#version "+ll.glslVersion+"\n":"";ll.isRawShaderMaterial?(eu=["#define SHADER_TYPE "+ll.shaderType,"#define SHADER_NAME "+ll.shaderName,wc].filter(filterEmptyLine).join("\n"),eu.length>0&&(eu+="\n"),iu=["#define SHADER_TYPE "+ll.shaderType,"#define SHADER_NAME "+ll.shaderName,wc].filter(filterEmptyLine).join("\n"),iu.length>0&&(iu+="\n")):(eu=[generatePrecision(ll),"#define SHADER_TYPE "+ll.shaderType,"#define SHADER_NAME "+ll.shaderName,wc,ll.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",ll.batching?"#define USE_BATCHING":"",ll.batchingColor?"#define USE_BATCHING_COLOR":"",ll.instancing?"#define USE_INSTANCING":"",ll.instancingColor?"#define USE_INSTANCING_COLOR":"",ll.instancingMorph?"#define USE_INSTANCING_MORPH":"",ll.useFog&&ll.fog?"#define USE_FOG":"",ll.useFog&&ll.fogExp2?"#define FOG_EXP2":"",ll.map?"#define USE_MAP":"",ll.envMap?"#define USE_ENVMAP":"",ll.envMap?"#define "+kl:"",ll.lightMap?"#define USE_LIGHTMAP":"",ll.aoMap?"#define USE_AOMAP":"",ll.bumpMap?"#define USE_BUMPMAP":"",ll.normalMap?"#define USE_NORMALMAP":"",ll.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",ll.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",ll.displacementMap?"#define USE_DISPLACEMENTMAP":"",ll.emissiveMap?"#define USE_EMISSIVEMAP":"",ll.anisotropy?"#define USE_ANISOTROPY":"",ll.anisotropyMap?"#define USE_ANISOTROPYMAP":"",ll.clearcoatMap?"#define USE_CLEARCOATMAP":"",ll.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ll.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ll.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",ll.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",ll.specularMap?"#define USE_SPECULARMAP":"",ll.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",ll.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",ll.roughnessMap?"#define USE_ROUGHNESSMAP":"",ll.metalnessMap?"#define USE_METALNESSMAP":"",ll.alphaMap?"#define USE_ALPHAMAP":"",ll.alphaHash?"#define USE_ALPHAHASH":"",ll.transmission?"#define USE_TRANSMISSION":"",ll.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ll.thicknessMap?"#define USE_THICKNESSMAP":"",ll.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",ll.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",ll.mapUv?"#define MAP_UV "+ll.mapUv:"",ll.alphaMapUv?"#define ALPHAMAP_UV "+ll.alphaMapUv:"",ll.lightMapUv?"#define LIGHTMAP_UV "+ll.lightMapUv:"",ll.aoMapUv?"#define AOMAP_UV "+ll.aoMapUv:"",ll.emissiveMapUv?"#define EMISSIVEMAP_UV "+ll.emissiveMapUv:"",ll.bumpMapUv?"#define BUMPMAP_UV "+ll.bumpMapUv:"",ll.normalMapUv?"#define NORMALMAP_UV "+ll.normalMapUv:"",ll.displacementMapUv?"#define DISPLACEMENTMAP_UV "+ll.displacementMapUv:"",ll.metalnessMapUv?"#define METALNESSMAP_UV "+ll.metalnessMapUv:"",ll.roughnessMapUv?"#define ROUGHNESSMAP_UV "+ll.roughnessMapUv:"",ll.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+ll.anisotropyMapUv:"",ll.clearcoatMapUv?"#define CLEARCOATMAP_UV "+ll.clearcoatMapUv:"",ll.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+ll.clearcoatNormalMapUv:"",ll.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+ll.clearcoatRoughnessMapUv:"",ll.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+ll.iridescenceMapUv:"",ll.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+ll.iridescenceThicknessMapUv:"",ll.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+ll.sheenColorMapUv:"",ll.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+ll.sheenRoughnessMapUv:"",ll.specularMapUv?"#define SPECULARMAP_UV "+ll.specularMapUv:"",ll.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+ll.specularColorMapUv:"",ll.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+ll.specularIntensityMapUv:"",ll.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+ll.transmissionMapUv:"",ll.thicknessMapUv?"#define THICKNESSMAP_UV "+ll.thicknessMapUv:"",ll.vertexTangents&&!1===ll.flatShading?"#define USE_TANGENT":"",ll.vertexColors?"#define USE_COLOR":"",ll.vertexAlphas?"#define USE_COLOR_ALPHA":"",ll.vertexUv1s?"#define USE_UV1":"",ll.vertexUv2s?"#define USE_UV2":"",ll.vertexUv3s?"#define USE_UV3":"",ll.pointsUvs?"#define USE_POINTS_UV":"",ll.flatShading?"#define FLAT_SHADED":"",ll.skinning?"#define USE_SKINNING":"",ll.morphTargets?"#define USE_MORPHTARGETS":"",ll.morphNormals&&!1===ll.flatShading?"#define USE_MORPHNORMALS":"",ll.morphColors?"#define USE_MORPHCOLORS":"",ll.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+ll.morphTextureStride:"",ll.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+ll.morphTargetsCount:"",ll.doubleSided?"#define DOUBLE_SIDED":"",ll.flipSided?"#define FLIP_SIDED":"",ll.shadowMapEnabled?"#define USE_SHADOWMAP":"",ll.shadowMapEnabled?"#define "+Al:"",ll.sizeAttenuation?"#define USE_SIZEATTENUATION":"",ll.numLightProbes>0?"#define USE_LIGHT_PROBES":"",ll.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),iu=[generatePrecision(ll),"#define SHADER_TYPE "+ll.shaderType,"#define SHADER_NAME "+ll.shaderName,wc,ll.useFog&&ll.fog?"#define USE_FOG":"",ll.useFog&&ll.fogExp2?"#define FOG_EXP2":"",ll.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",ll.map?"#define USE_MAP":"",ll.matcap?"#define USE_MATCAP":"",ll.envMap?"#define USE_ENVMAP":"",ll.envMap?"#define "+bl:"",ll.envMap?"#define "+kl:"",ll.envMap?"#define "+Dl:"",Wl?"#define CUBEUV_TEXEL_WIDTH "+Wl.texelWidth:"",Wl?"#define CUBEUV_TEXEL_HEIGHT "+Wl.texelHeight:"",Wl?"#define CUBEUV_MAX_MIP "+Wl.maxMip+".0":"",ll.lightMap?"#define USE_LIGHTMAP":"",ll.aoMap?"#define USE_AOMAP":"",ll.bumpMap?"#define USE_BUMPMAP":"",ll.normalMap?"#define USE_NORMALMAP":"",ll.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",ll.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",ll.emissiveMap?"#define USE_EMISSIVEMAP":"",ll.anisotropy?"#define USE_ANISOTROPY":"",ll.anisotropyMap?"#define USE_ANISOTROPYMAP":"",ll.clearcoat?"#define USE_CLEARCOAT":"",ll.clearcoatMap?"#define USE_CLEARCOATMAP":"",ll.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ll.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ll.dispersion?"#define USE_DISPERSION":"",ll.iridescence?"#define USE_IRIDESCENCE":"",ll.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",ll.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",ll.specularMap?"#define USE_SPECULARMAP":"",ll.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",ll.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",ll.roughnessMap?"#define USE_ROUGHNESSMAP":"",ll.metalnessMap?"#define USE_METALNESSMAP":"",ll.alphaMap?"#define USE_ALPHAMAP":"",ll.alphaTest?"#define USE_ALPHATEST":"",ll.alphaHash?"#define USE_ALPHAHASH":"",ll.sheen?"#define USE_SHEEN":"",ll.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",ll.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",ll.transmission?"#define USE_TRANSMISSION":"",ll.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ll.thicknessMap?"#define USE_THICKNESSMAP":"",ll.vertexTangents&&!1===ll.flatShading?"#define USE_TANGENT":"",ll.vertexColors||ll.instancingColor||ll.batchingColor?"#define USE_COLOR":"",ll.vertexAlphas?"#define USE_COLOR_ALPHA":"",ll.vertexUv1s?"#define USE_UV1":"",ll.vertexUv2s?"#define USE_UV2":"",ll.vertexUv3s?"#define USE_UV3":"",ll.pointsUvs?"#define USE_POINTS_UV":"",ll.gradientMap?"#define USE_GRADIENTMAP":"",ll.flatShading?"#define FLAT_SHADED":"",ll.doubleSided?"#define DOUBLE_SIDED":"",ll.flipSided?"#define FLIP_SIDED":"",ll.shadowMapEnabled?"#define USE_SHADOWMAP":"",ll.shadowMapEnabled?"#define "+Al:"",ll.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",ll.numLightProbes>0?"#define USE_LIGHT_PROBES":"",ll.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",ll.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==ll.toneMapping?"#define TONE_MAPPING":"",0!==ll.toneMapping?ng.tonemapping_pars_fragment:"",0!==ll.toneMapping?getToneMappingFunction("toneMapping",ll.toneMapping):"",ll.dithering?"#define DITHERING":"",ll.opaque?"#define OPAQUE":"",ng.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",ll.outputColorSpace),getLuminanceFunction(),ll.useDepthPacking?"#define DEPTH_PACKING "+ll.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),pl=resolveIncludes(pl),pl=replaceLightNums(pl,ll),pl=replaceClippingPlaneNums(pl,ll),fl=resolveIncludes(fl),fl=replaceLightNums(fl,ll),fl=replaceClippingPlaneNums(fl,ll),pl=unrollLoops(pl),fl=unrollLoops(fl),!0!==ll.isRawShaderMaterial&&(su="#version 300 es\n",eu=[Ql,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+eu,iu=["#define varying in",ll.glslVersion===Zp?"":"layout(location = 0) out highp vec4 pc_fragColor;",ll.glslVersion===Zp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+iu);const cu=su+eu+pl,uu=su+iu+fl,hu=WebGLShader(hl,hl.VERTEX_SHADER,cu),Lu=WebGLShader(hl,hl.FRAGMENT_SHADER,uu);function onFirstUse(Da){if(F.debug.checkShaderErrors){const ll=hl.getProgramInfoLog(Sc).trim(),cl=hl.getShaderInfoLog(hu).trim(),dl=hl.getShaderInfoLog(Lu).trim();let pl=!0,fl=!0;if(!1===hl.getProgramParameter(Sc,hl.LINK_STATUS))if(pl=!1,"function"===typeof F.debug.onShaderError)F.debug.onShaderError(hl,Sc,hu,Lu);else{const F=getShaderErrors(hl,hu,"vertex"),cl=getShaderErrors(hl,Lu,"fragment");console.error("THREE.WebGLProgram: Shader Error "+hl.getError()+" - VALIDATE_STATUS "+hl.getProgramParameter(Sc,hl.VALIDATE_STATUS)+"\n\nMaterial Name: "+Da.name+"\nMaterial Type: "+Da.type+"\n\nProgram Info Log: "+ll+"\n"+F+"\n"+cl)}else""!==ll?console.warn("THREE.WebGLProgram: Program Info Log:",ll):""!==cl&&""!==dl||(fl=!1);fl&&(Da.diagnostics={runnable:pl,programLog:ll,vertexShader:{log:cl,prefix:eu},fragmentShader:{log:dl,prefix:iu}})}hl.deleteShader(hu),hl.deleteShader(Lu),zu=new WebGLUniforms(hl,Sc),Du=function(F,Da){const ll={},cl=F.getProgramParameter(Da,F.ACTIVE_ATTRIBUTES);for(let hl=0;hl<cl;hl++){const cl=F.getActiveAttrib(Da,hl),dl=cl.name;let pl=1;cl.type===F.FLOAT_MAT2&&(pl=2),cl.type===F.FLOAT_MAT3&&(pl=3),cl.type===F.FLOAT_MAT4&&(pl=4),ll[dl]={type:cl.type,location:F.getAttribLocation(Da,dl),locationSize:pl}}return ll}(hl,Sc)}let zu,Du;hl.attachShader(Sc,hu),hl.attachShader(Sc,Lu),void 0!==ll.index0AttributeName?hl.bindAttribLocation(Sc,0,ll.index0AttributeName):!0===ll.morphTargets&&hl.bindAttribLocation(Sc,0,"position"),hl.linkProgram(Sc),this.getUniforms=function(){return void 0===zu&&onFirstUse(this),zu},this.getAttributes=function(){return void 0===Du&&onFirstUse(this),Du};let ih=!1===ll.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===ih&&(ih=hl.getProgramParameter(Sc,37297)),ih},this.destroy=function(){cl.releaseStatesOfProgram(this),hl.deleteProgram(Sc),this.program=void 0},this.type=ll.shaderType,this.name=ll.shaderName,this.id=Lg++,this.cacheKey=Da,this.usedTimes=1,this.program=Sc,this.vertexShader=hu,this.fragmentShader=Lu,this}let Ng=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(F){const Da=F.vertexShader,ll=F.fragmentShader,cl=this._getShaderStage(Da),hl=this._getShaderStage(ll),dl=this._getShaderCacheForMaterial(F);return!1===dl.has(cl)&&(dl.add(cl),cl.usedTimes++),!1===dl.has(hl)&&(dl.add(hl),hl.usedTimes++),this}remove(F){const Da=this.materialCache.get(F);for(const ll of Da)ll.usedTimes--,0===ll.usedTimes&&this.shaderCache.delete(ll.code);return this.materialCache.delete(F),this}getVertexShaderID(F){return this._getShaderStage(F.vertexShader).id}getFragmentShaderID(F){return this._getShaderStage(F.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(F){const Da=this.materialCache;let ll=Da.get(F);return void 0===ll&&(ll=new Set,Da.set(F,ll)),ll}_getShaderStage(F){const Da=this.shaderCache;let ll=Da.get(F);return void 0===ll&&(ll=new WebGLShaderStage(F),Da.set(F,ll)),ll}}class WebGLShaderStage{constructor(F){this.id=Ng++,this.code=F,this.usedTimes=0}}function WebGLPrograms(F,Da,ll,cl,hl,dl,pl){const fl=new Layers,Al=new WebGLShaderCache,bl=new Set,kl=[],Dl=hl.logarithmicDepthBuffer,Wl=hl.vertexTextures;let Ql=hl.precision;const wc={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(F){return bl.add(F),0===F?"uv":`uv${F}`}return{getParameters:function(dl,fl,kl,Sc,eu){const iu=Sc.fog,su=eu.geometry,cu=dl.isMeshStandardMaterial?Sc.environment:null,uu=(dl.isMeshStandardMaterial?ll:Da).get(dl.envMap||cu),hu=uu&&uu.mapping===ed?uu.image.height:null,Lu=wc[dl.type];null!==dl.precision&&(Ql=hl.getMaxPrecision(dl.precision),Ql!==dl.precision&&console.warn("THREE.WebGLProgram.getParameters:",dl.precision,"not supported, using",Ql,"instead."));const zu=su.morphAttributes.position||su.morphAttributes.normal||su.morphAttributes.color,Du=void 0!==zu?zu.length:0;let Nu,qu,ih,gh,td=0;if(void 0!==su.morphAttributes.position&&(td=1),void 0!==su.morphAttributes.normal&&(td=2),void 0!==su.morphAttributes.color&&(td=3),Lu){const F=ag[Lu];Nu=F.vertexShader,qu=F.fragmentShader}else Nu=dl.vertexShader,qu=dl.fragmentShader,Al.update(dl),ih=Al.getVertexShaderID(dl),gh=Al.getFragmentShaderID(dl);const id=F.getRenderTarget(),nd=!0===eu.isInstancedMesh,rd=!0===eu.isBatchedMesh,ad=!!dl.map,sd=!!dl.matcap,od=!!uu,ld=!!dl.aoMap,cd=!!dl.lightMap,ud=!!dl.bumpMap,hd=!!dl.normalMap,dd=!!dl.displacementMap,pd=!!dl.emissiveMap,md=!!dl.metalnessMap,fd=!!dl.roughnessMap,gd=dl.anisotropy>0,Ad=dl.clearcoat>0,yd=dl.dispersion>0,vd=dl.iridescence>0,_d=dl.sheen>0,xd=dl.transmission>0,bd=gd&&!!dl.anisotropyMap,wd=Ad&&!!dl.clearcoatMap,Ed=Ad&&!!dl.clearcoatNormalMap,Md=Ad&&!!dl.clearcoatRoughnessMap,Sd=vd&&!!dl.iridescenceMap,kd=vd&&!!dl.iridescenceThicknessMap,Td=_d&&!!dl.sheenColorMap,Id=_d&&!!dl.sheenRoughnessMap,Cd=!!dl.specularMap,Ld=!!dl.specularColorMap,zd=!!dl.specularIntensityMap,Pd=xd&&!!dl.transmissionMap,Dd=xd&&!!dl.thicknessMap,Rd=!!dl.gradientMap,Nd=!!dl.alphaMap,Ud=dl.alphaTest>0,Bd=!!dl.alphaHash,Od=!!dl.extensions;let Fd=0;dl.toneMapped&&(null!==id&&!0!==id.isXRRenderTarget||(Fd=F.toneMapping));const jd={shaderID:Lu,shaderType:dl.type,shaderName:dl.name,vertexShader:Nu,fragmentShader:qu,defines:dl.defines,customVertexShaderID:ih,customFragmentShaderID:gh,isRawShaderMaterial:!0===dl.isRawShaderMaterial,glslVersion:dl.glslVersion,precision:Ql,batching:rd,batchingColor:rd&&null!==eu._colorsTexture,instancing:nd,instancingColor:nd&&null!==eu.instanceColor,instancingMorph:nd&&null!==eu.morphTexture,supportsVertexTextures:Wl,outputColorSpace:null===id?F.outputColorSpace:!0===id.isXRRenderTarget?id.texture.colorSpace:Ip,alphaToCoverage:!!dl.alphaToCoverage,map:ad,matcap:sd,envMap:od,envMapMode:od&&uu.mapping,envMapCubeUVHeight:hu,aoMap:ld,lightMap:cd,bumpMap:ud,normalMap:hd,displacementMap:Wl&&dd,emissiveMap:pd,normalMapObjectSpace:hd&&1===dl.normalMapType,normalMapTangentSpace:hd&&0===dl.normalMapType,metalnessMap:md,roughnessMap:fd,anisotropy:gd,anisotropyMap:bd,clearcoat:Ad,clearcoatMap:wd,clearcoatNormalMap:Ed,clearcoatRoughnessMap:Md,dispersion:yd,iridescence:vd,iridescenceMap:Sd,iridescenceThicknessMap:kd,sheen:_d,sheenColorMap:Td,sheenRoughnessMap:Id,specularMap:Cd,specularColorMap:Ld,specularIntensityMap:zd,transmission:xd,transmissionMap:Pd,thicknessMap:Dd,gradientMap:Rd,opaque:!1===dl.transparent&&1===dl.blending&&!1===dl.alphaToCoverage,alphaMap:Nd,alphaTest:Ud,alphaHash:Bd,combine:dl.combine,mapUv:ad&&getChannel(dl.map.channel),aoMapUv:ld&&getChannel(dl.aoMap.channel),lightMapUv:cd&&getChannel(dl.lightMap.channel),bumpMapUv:ud&&getChannel(dl.bumpMap.channel),normalMapUv:hd&&getChannel(dl.normalMap.channel),displacementMapUv:dd&&getChannel(dl.displacementMap.channel),emissiveMapUv:pd&&getChannel(dl.emissiveMap.channel),metalnessMapUv:md&&getChannel(dl.metalnessMap.channel),roughnessMapUv:fd&&getChannel(dl.roughnessMap.channel),anisotropyMapUv:bd&&getChannel(dl.anisotropyMap.channel),clearcoatMapUv:wd&&getChannel(dl.clearcoatMap.channel),clearcoatNormalMapUv:Ed&&getChannel(dl.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Md&&getChannel(dl.clearcoatRoughnessMap.channel),iridescenceMapUv:Sd&&getChannel(dl.iridescenceMap.channel),iridescenceThicknessMapUv:kd&&getChannel(dl.iridescenceThicknessMap.channel),sheenColorMapUv:Td&&getChannel(dl.sheenColorMap.channel),sheenRoughnessMapUv:Id&&getChannel(dl.sheenRoughnessMap.channel),specularMapUv:Cd&&getChannel(dl.specularMap.channel),specularColorMapUv:Ld&&getChannel(dl.specularColorMap.channel),specularIntensityMapUv:zd&&getChannel(dl.specularIntensityMap.channel),transmissionMapUv:Pd&&getChannel(dl.transmissionMap.channel),thicknessMapUv:Dd&&getChannel(dl.thicknessMap.channel),alphaMapUv:Nd&&getChannel(dl.alphaMap.channel),vertexTangents:!!su.attributes.tangent&&(hd||gd),vertexColors:dl.vertexColors,vertexAlphas:!0===dl.vertexColors&&!!su.attributes.color&&4===su.attributes.color.itemSize,pointsUvs:!0===eu.isPoints&&!!su.attributes.uv&&(ad||Nd),fog:!!iu,useFog:!0===dl.fog,fogExp2:!!iu&&iu.isFogExp2,flatShading:!0===dl.flatShading,sizeAttenuation:!0===dl.sizeAttenuation,logarithmicDepthBuffer:Dl,skinning:!0===eu.isSkinnedMesh,morphTargets:void 0!==su.morphAttributes.position,morphNormals:void 0!==su.morphAttributes.normal,morphColors:void 0!==su.morphAttributes.color,morphTargetsCount:Du,morphTextureStride:td,numDirLights:fl.directional.length,numPointLights:fl.point.length,numSpotLights:fl.spot.length,numSpotLightMaps:fl.spotLightMap.length,numRectAreaLights:fl.rectArea.length,numHemiLights:fl.hemi.length,numDirLightShadows:fl.directionalShadowMap.length,numPointLightShadows:fl.pointShadowMap.length,numSpotLightShadows:fl.spotShadowMap.length,numSpotLightShadowsWithMaps:fl.numSpotLightShadowsWithMaps,numLightProbes:fl.numLightProbes,numClippingPlanes:pl.numPlanes,numClipIntersection:pl.numIntersection,dithering:dl.dithering,shadowMapEnabled:F.shadowMap.enabled&&kl.length>0,shadowMapType:F.shadowMap.type,toneMapping:Fd,decodeVideoTexture:ad&&!0===dl.map.isVideoTexture&&sm.getTransfer(dl.map.colorSpace)===Pp,premultipliedAlpha:dl.premultipliedAlpha,doubleSided:2===dl.side,flipSided:1===dl.side,useDepthPacking:dl.depthPacking>=0,depthPacking:dl.depthPacking||0,index0AttributeName:dl.index0AttributeName,extensionClipCullDistance:Od&&!0===dl.extensions.clipCullDistance&&cl.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Od&&!0===dl.extensions.multiDraw||rd)&&cl.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:cl.has("KHR_parallel_shader_compile"),customProgramCacheKey:dl.customProgramCacheKey()};return jd.vertexUv1s=bl.has(1),jd.vertexUv2s=bl.has(2),jd.vertexUv3s=bl.has(3),bl.clear(),jd},getProgramCacheKey:function(Da){const ll=[];if(Da.shaderID?ll.push(Da.shaderID):(ll.push(Da.customVertexShaderID),ll.push(Da.customFragmentShaderID)),void 0!==Da.defines)for(const F in Da.defines)ll.push(F),ll.push(Da.defines[F]);return!1===Da.isRawShaderMaterial&&(!function(F,Da){F.push(Da.precision),F.push(Da.outputColorSpace),F.push(Da.envMapMode),F.push(Da.envMapCubeUVHeight),F.push(Da.mapUv),F.push(Da.alphaMapUv),F.push(Da.lightMapUv),F.push(Da.aoMapUv),F.push(Da.bumpMapUv),F.push(Da.normalMapUv),F.push(Da.displacementMapUv),F.push(Da.emissiveMapUv),F.push(Da.metalnessMapUv),F.push(Da.roughnessMapUv),F.push(Da.anisotropyMapUv),F.push(Da.clearcoatMapUv),F.push(Da.clearcoatNormalMapUv),F.push(Da.clearcoatRoughnessMapUv),F.push(Da.iridescenceMapUv),F.push(Da.iridescenceThicknessMapUv),F.push(Da.sheenColorMapUv),F.push(Da.sheenRoughnessMapUv),F.push(Da.specularMapUv),F.push(Da.specularColorMapUv),F.push(Da.specularIntensityMapUv),F.push(Da.transmissionMapUv),F.push(Da.thicknessMapUv),F.push(Da.combine),F.push(Da.fogExp2),F.push(Da.sizeAttenuation),F.push(Da.morphTargetsCount),F.push(Da.morphAttributeCount),F.push(Da.numDirLights),F.push(Da.numPointLights),F.push(Da.numSpotLights),F.push(Da.numSpotLightMaps),F.push(Da.numHemiLights),F.push(Da.numRectAreaLights),F.push(Da.numDirLightShadows),F.push(Da.numPointLightShadows),F.push(Da.numSpotLightShadows),F.push(Da.numSpotLightShadowsWithMaps),F.push(Da.numLightProbes),F.push(Da.shadowMapType),F.push(Da.toneMapping),F.push(Da.numClippingPlanes),F.push(Da.numClipIntersection),F.push(Da.depthPacking)}(ll,Da),function(F,Da){fl.disableAll(),Da.supportsVertexTextures&&fl.enable(0);Da.instancing&&fl.enable(1);Da.instancingColor&&fl.enable(2);Da.instancingMorph&&fl.enable(3);Da.matcap&&fl.enable(4);Da.envMap&&fl.enable(5);Da.normalMapObjectSpace&&fl.enable(6);Da.normalMapTangentSpace&&fl.enable(7);Da.clearcoat&&fl.enable(8);Da.iridescence&&fl.enable(9);Da.alphaTest&&fl.enable(10);Da.vertexColors&&fl.enable(11);Da.vertexAlphas&&fl.enable(12);Da.vertexUv1s&&fl.enable(13);Da.vertexUv2s&&fl.enable(14);Da.vertexUv3s&&fl.enable(15);Da.vertexTangents&&fl.enable(16);Da.anisotropy&&fl.enable(17);Da.alphaHash&&fl.enable(18);Da.batching&&fl.enable(19);Da.dispersion&&fl.enable(20);Da.batchingColor&&fl.enable(21);F.push(fl.mask),fl.disableAll(),Da.fog&&fl.enable(0);Da.useFog&&fl.enable(1);Da.flatShading&&fl.enable(2);Da.logarithmicDepthBuffer&&fl.enable(3);Da.skinning&&fl.enable(4);Da.morphTargets&&fl.enable(5);Da.morphNormals&&fl.enable(6);Da.morphColors&&fl.enable(7);Da.premultipliedAlpha&&fl.enable(8);Da.shadowMapEnabled&&fl.enable(9);Da.doubleSided&&fl.enable(10);Da.flipSided&&fl.enable(11);Da.useDepthPacking&&fl.enable(12);Da.dithering&&fl.enable(13);Da.transmission&&fl.enable(14);Da.sheen&&fl.enable(15);Da.opaque&&fl.enable(16);Da.pointsUvs&&fl.enable(17);Da.decodeVideoTexture&&fl.enable(18);Da.alphaToCoverage&&fl.enable(19);F.push(fl.mask)}(ll,Da),ll.push(F.outputColorSpace)),ll.push(Da.customProgramCacheKey),ll.join()},getUniforms:function(F){const Da=wc[F.type];let ll;if(Da){const F=ag[Da];ll=Wf.clone(F.uniforms)}else ll=F.uniforms;return ll},acquireProgram:function(Da,ll){let cl;for(let F=0,hl=kl.length;F<hl;F++){const Da=kl[F];if(Da.cacheKey===ll){cl=Da,++cl.usedTimes;break}}return void 0===cl&&(cl=new WebGLProgram(F,ll,Da,dl),kl.push(cl)),cl},releaseProgram:function(F){if(0===--F.usedTimes){const Da=kl.indexOf(F);kl[Da]=kl[kl.length-1],kl.pop(),F.destroy()}},releaseShaderCache:function(F){Al.remove(F)},programs:kl,dispose:function(){Al.dispose()}}}function WebGLProperties(){let F=new WeakMap;return{has:function(Da){return F.has(Da)},get:function(Da){let ll=F.get(Da);return void 0===ll&&(ll={},F.set(Da,ll)),ll},remove:function(Da){F.delete(Da)},update:function(Da,ll,cl){F.get(Da)[ll]=cl},dispose:function(){F=new WeakMap}}}function painterSortStable(F,Da){return F.groupOrder!==Da.groupOrder?F.groupOrder-Da.groupOrder:F.renderOrder!==Da.renderOrder?F.renderOrder-Da.renderOrder:F.material.id!==Da.material.id?F.material.id-Da.material.id:F.z!==Da.z?F.z-Da.z:F.id-Da.id}function reversePainterSortStable(F,Da){return F.groupOrder!==Da.groupOrder?F.groupOrder-Da.groupOrder:F.renderOrder!==Da.renderOrder?F.renderOrder-Da.renderOrder:F.z!==Da.z?Da.z-F.z:F.id-Da.id}function WebGLRenderList(){const F=[];let Da=0;const ll=[],cl=[],hl=[];function getNextRenderItem(ll,cl,hl,dl,pl,fl){let Al=F[Da];return void 0===Al?(Al={id:ll.id,object:ll,geometry:cl,material:hl,groupOrder:dl,renderOrder:ll.renderOrder,z:pl,group:fl},F[Da]=Al):(Al.id=ll.id,Al.object=ll,Al.geometry=cl,Al.material=hl,Al.groupOrder=dl,Al.renderOrder=ll.renderOrder,Al.z=pl,Al.group=fl),Da++,Al}return{opaque:ll,transmissive:cl,transparent:hl,init:function(){Da=0,ll.length=0,cl.length=0,hl.length=0},push:function(F,Da,dl,pl,fl,Al){const bl=getNextRenderItem(F,Da,dl,pl,fl,Al);dl.transmission>0?cl.push(bl):!0===dl.transparent?hl.push(bl):ll.push(bl)},unshift:function(F,Da,dl,pl,fl,Al){const bl=getNextRenderItem(F,Da,dl,pl,fl,Al);dl.transmission>0?cl.unshift(bl):!0===dl.transparent?hl.unshift(bl):ll.unshift(bl)},finish:function(){for(let ll=Da,cl=F.length;ll<cl;ll++){const Da=F[ll];if(null===Da.id)break;Da.id=null,Da.object=null,Da.geometry=null,Da.material=null,Da.group=null}},sort:function(F,Da){ll.length>1&&ll.sort(F||painterSortStable),cl.length>1&&cl.sort(Da||reversePainterSortStable),hl.length>1&&hl.sort(Da||reversePainterSortStable)}}}function WebGLRenderLists(){let F=new WeakMap;return{get:function(Da,ll){const cl=F.get(Da);let hl;return void 0===cl?(hl=new WebGLRenderList,F.set(Da,[hl])):ll>=cl.length?(hl=new WebGLRenderList,cl.push(hl)):hl=cl[ll],hl},dispose:function(){F=new WeakMap}}}function UniformsCache(){const F={};return{get:function(Da){if(void 0!==F[Da.id])return F[Da.id];let ll;switch(Da.type){case"DirectionalLight":ll={direction:new Vector3,color:new Color};break;case"SpotLight":ll={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":ll={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":ll={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":ll={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return F[Da.id]=ll,ll}}}let Ug=0;function shadowCastingAndTexturingLightsFirst(F,Da){return(Da.castShadow?2:0)-(F.castShadow?2:0)+(Da.map?1:0)-(F.map?1:0)}function WebGLLights(F){const Da=new UniformsCache,ll=function(){const F={};return{get:function(Da){if(void 0!==F[Da.id])return F[Da.id];let ll;switch(Da.type){case"DirectionalLight":case"SpotLight":ll={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":ll={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return F[Da.id]=ll,ll}}}(),cl={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let fl=0;fl<9;fl++)cl.probe.push(new Vector3);const hl=new Vector3,dl=new Matrix4,pl=new Matrix4;return{setup:function(hl){let dl=0,pl=0,fl=0;for(let F=0;F<9;F++)cl.probe[F].set(0,0,0);let Al=0,bl=0,kl=0,Dl=0,Wl=0,Ql=0,wc=0,Sc=0,eu=0,iu=0,su=0;hl.sort(shadowCastingAndTexturingLightsFirst);for(let F=0,uu=hl.length;F<uu;F++){const cu=hl[F],uu=cu.color,hu=cu.intensity,Lu=cu.distance,zu=cu.shadow&&cu.shadow.map?cu.shadow.map.texture:null;if(cu.isAmbientLight)dl+=uu.r*hu,pl+=uu.g*hu,fl+=uu.b*hu;else if(cu.isLightProbe){for(let F=0;F<9;F++)cl.probe[F].addScaledVector(cu.sh.coefficients[F],hu);su++}else if(cu.isDirectionalLight){const F=Da.get(cu);if(F.color.copy(cu.color).multiplyScalar(cu.intensity),cu.castShadow){const F=cu.shadow,Da=ll.get(cu);Da.shadowIntensity=F.intensity,Da.shadowBias=F.bias,Da.shadowNormalBias=F.normalBias,Da.shadowRadius=F.radius,Da.shadowMapSize=F.mapSize,cl.directionalShadow[Al]=Da,cl.directionalShadowMap[Al]=zu,cl.directionalShadowMatrix[Al]=cu.shadow.matrix,Ql++}cl.directional[Al]=F,Al++}else if(cu.isSpotLight){const F=Da.get(cu);F.position.setFromMatrixPosition(cu.matrixWorld),F.color.copy(uu).multiplyScalar(hu),F.distance=Lu,F.coneCos=Math.cos(cu.angle),F.penumbraCos=Math.cos(cu.angle*(1-cu.penumbra)),F.decay=cu.decay,cl.spot[kl]=F;const hl=cu.shadow;if(cu.map&&(cl.spotLightMap[eu]=cu.map,eu++,hl.updateMatrices(cu),cu.castShadow&&iu++),cl.spotLightMatrix[kl]=hl.matrix,cu.castShadow){const F=ll.get(cu);F.shadowIntensity=hl.intensity,F.shadowBias=hl.bias,F.shadowNormalBias=hl.normalBias,F.shadowRadius=hl.radius,F.shadowMapSize=hl.mapSize,cl.spotShadow[kl]=F,cl.spotShadowMap[kl]=zu,Sc++}kl++}else if(cu.isRectAreaLight){const F=Da.get(cu);F.color.copy(uu).multiplyScalar(hu),F.halfWidth.set(.5*cu.width,0,0),F.halfHeight.set(0,.5*cu.height,0),cl.rectArea[Dl]=F,Dl++}else if(cu.isPointLight){const F=Da.get(cu);if(F.color.copy(cu.color).multiplyScalar(cu.intensity),F.distance=cu.distance,F.decay=cu.decay,cu.castShadow){const F=cu.shadow,Da=ll.get(cu);Da.shadowIntensity=F.intensity,Da.shadowBias=F.bias,Da.shadowNormalBias=F.normalBias,Da.shadowRadius=F.radius,Da.shadowMapSize=F.mapSize,Da.shadowCameraNear=F.camera.near,Da.shadowCameraFar=F.camera.far,cl.pointShadow[bl]=Da,cl.pointShadowMap[bl]=zu,cl.pointShadowMatrix[bl]=cu.shadow.matrix,wc++}cl.point[bl]=F,bl++}else if(cu.isHemisphereLight){const F=Da.get(cu);F.skyColor.copy(cu.color).multiplyScalar(hu),F.groundColor.copy(cu.groundColor).multiplyScalar(hu),cl.hemi[Wl]=F,Wl++}}Dl>0&&(!0===F.has("OES_texture_float_linear")?(cl.rectAreaLTC1=rg.LTC_FLOAT_1,cl.rectAreaLTC2=rg.LTC_FLOAT_2):(cl.rectAreaLTC1=rg.LTC_HALF_1,cl.rectAreaLTC2=rg.LTC_HALF_2)),cl.ambient[0]=dl,cl.ambient[1]=pl,cl.ambient[2]=fl;const cu=cl.hash;cu.directionalLength===Al&&cu.pointLength===bl&&cu.spotLength===kl&&cu.rectAreaLength===Dl&&cu.hemiLength===Wl&&cu.numDirectionalShadows===Ql&&cu.numPointShadows===wc&&cu.numSpotShadows===Sc&&cu.numSpotMaps===eu&&cu.numLightProbes===su||(cl.directional.length=Al,cl.spot.length=kl,cl.rectArea.length=Dl,cl.point.length=bl,cl.hemi.length=Wl,cl.directionalShadow.length=Ql,cl.directionalShadowMap.length=Ql,cl.pointShadow.length=wc,cl.pointShadowMap.length=wc,cl.spotShadow.length=Sc,cl.spotShadowMap.length=Sc,cl.directionalShadowMatrix.length=Ql,cl.pointShadowMatrix.length=wc,cl.spotLightMatrix.length=Sc+eu-iu,cl.spotLightMap.length=eu,cl.numSpotLightShadowsWithMaps=iu,cl.numLightProbes=su,cu.directionalLength=Al,cu.pointLength=bl,cu.spotLength=kl,cu.rectAreaLength=Dl,cu.hemiLength=Wl,cu.numDirectionalShadows=Ql,cu.numPointShadows=wc,cu.numSpotShadows=Sc,cu.numSpotMaps=eu,cu.numLightProbes=su,cl.version=Ug++)},setupView:function(F,Da){let ll=0,fl=0,Al=0,bl=0,kl=0;const Dl=Da.matrixWorldInverse;for(let Wl=0,Ql=F.length;Wl<Ql;Wl++){const Da=F[Wl];if(Da.isDirectionalLight){const F=cl.directional[ll];F.direction.setFromMatrixPosition(Da.matrixWorld),hl.setFromMatrixPosition(Da.target.matrixWorld),F.direction.sub(hl),F.direction.transformDirection(Dl),ll++}else if(Da.isSpotLight){const F=cl.spot[Al];F.position.setFromMatrixPosition(Da.matrixWorld),F.position.applyMatrix4(Dl),F.direction.setFromMatrixPosition(Da.matrixWorld),hl.setFromMatrixPosition(Da.target.matrixWorld),F.direction.sub(hl),F.direction.transformDirection(Dl),Al++}else if(Da.isRectAreaLight){const F=cl.rectArea[bl];F.position.setFromMatrixPosition(Da.matrixWorld),F.position.applyMatrix4(Dl),pl.identity(),dl.copy(Da.matrixWorld),dl.premultiply(Dl),pl.extractRotation(dl),F.halfWidth.set(.5*Da.width,0,0),F.halfHeight.set(0,.5*Da.height,0),F.halfWidth.applyMatrix4(pl),F.halfHeight.applyMatrix4(pl),bl++}else if(Da.isPointLight){const F=cl.point[fl];F.position.setFromMatrixPosition(Da.matrixWorld),F.position.applyMatrix4(Dl),fl++}else if(Da.isHemisphereLight){const F=cl.hemi[kl];F.direction.setFromMatrixPosition(Da.matrixWorld),F.direction.transformDirection(Dl),kl++}}},state:cl}}function WebGLRenderState(F){const Da=new WebGLLights(F),ll=[],cl=[];const hl={lightsArray:ll,shadowsArray:cl,camera:null,lights:Da,transmissionRenderTarget:{}};return{init:function(F){hl.camera=F,ll.length=0,cl.length=0},state:hl,setupLights:function(){Da.setup(ll)},setupLightsView:function(F){Da.setupView(ll,F)},pushLight:function(F){ll.push(F)},pushShadow:function(F){cl.push(F)}}}function WebGLRenderStates(F){let Da=new WeakMap;return{get:function(ll,cl){void 0===cl&&(cl=0);const hl=Da.get(ll);let dl;return void 0===hl?(dl=new WebGLRenderState(F),Da.set(ll,[dl])):cl>=hl.length?(dl=new WebGLRenderState(F),hl.push(dl)):dl=hl[cl],dl},dispose:function(){Da=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(F){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(F)}copy(F){return super.copy(F),this.depthPacking=F.depthPacking,this.map=F.map,this.alphaMap=F.alphaMap,this.displacementMap=F.displacementMap,this.displacementScale=F.displacementScale,this.displacementBias=F.displacementBias,this.wireframe=F.wireframe,this.wireframeLinewidth=F.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(F){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(F)}copy(F){return super.copy(F),this.map=F.map,this.alphaMap=F.alphaMap,this.displacementMap=F.displacementMap,this.displacementScale=F.displacementScale,this.displacementBias=F.displacementBias,this}}function WebGLShadowMap(F,Da,ll){let cl=new Frustum;const fl=new Vector2,Al=new Vector2,bl=new Vector4,kl=new MeshDepthMaterial({depthPacking:3201}),Dl=new MeshDistanceMaterial,Wl={},Ql=ll.maxTextureSize,wc={[hl]:1,[dl]:0,[pl]:2},Sc=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),eu=Sc.clone();eu.defines.HORIZONTAL_PASS=1;const iu=new BufferGeometry;iu.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const su=new Mesh(iu,Sc),cu=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let uu=this.type;function VSMPass(ll,cl){const hl=Da.update(su);Sc.defines.VSM_SAMPLES!==ll.blurSamples&&(Sc.defines.VSM_SAMPLES=ll.blurSamples,eu.defines.VSM_SAMPLES=ll.blurSamples,Sc.needsUpdate=!0,eu.needsUpdate=!0),null===ll.mapPass&&(ll.mapPass=new WebGLRenderTarget(fl.x,fl.y)),Sc.uniforms.shadow_pass.value=ll.map.texture,Sc.uniforms.resolution.value=ll.mapSize,Sc.uniforms.radius.value=ll.radius,F.setRenderTarget(ll.mapPass),F.clear(),F.renderBufferDirect(cl,null,hl,Sc,su,null),eu.uniforms.shadow_pass.value=ll.mapPass.texture,eu.uniforms.resolution.value=ll.mapSize,eu.uniforms.radius.value=ll.radius,F.setRenderTarget(ll.map),F.clear(),F.renderBufferDirect(cl,null,hl,eu,su,null)}function getDepthMaterial(Da,ll,cl,hl){let dl=null;const pl=!0===cl.isPointLight?Da.customDistanceMaterial:Da.customDepthMaterial;if(void 0!==pl)dl=pl;else if(dl=!0===cl.isPointLight?Dl:kl,F.localClippingEnabled&&!0===ll.clipShadows&&Array.isArray(ll.clippingPlanes)&&0!==ll.clippingPlanes.length||ll.displacementMap&&0!==ll.displacementScale||ll.alphaMap&&ll.alphaTest>0||ll.map&&ll.alphaTest>0){const F=dl.uuid,Da=ll.uuid;let cl=Wl[F];void 0===cl&&(cl={},Wl[F]=cl);let hl=cl[Da];void 0===hl&&(hl=dl.clone(),cl[Da]=hl,ll.addEventListener("dispose",onMaterialDispose)),dl=hl}if(dl.visible=ll.visible,dl.wireframe=ll.wireframe,dl.side=3===hl?null!==ll.shadowSide?ll.shadowSide:ll.side:null!==ll.shadowSide?ll.shadowSide:wc[ll.side],dl.alphaMap=ll.alphaMap,dl.alphaTest=ll.alphaTest,dl.map=ll.map,dl.clipShadows=ll.clipShadows,dl.clippingPlanes=ll.clippingPlanes,dl.clipIntersection=ll.clipIntersection,dl.displacementMap=ll.displacementMap,dl.displacementScale=ll.displacementScale,dl.displacementBias=ll.displacementBias,dl.wireframeLinewidth=ll.wireframeLinewidth,dl.linewidth=ll.linewidth,!0===cl.isPointLight&&!0===dl.isMeshDistanceMaterial){F.properties.get(dl).light=cl}return dl}function renderObject(ll,hl,dl,pl,fl){if(!1===ll.visible)return;if(ll.layers.test(hl.layers)&&(ll.isMesh||ll.isLine||ll.isPoints)&&(ll.castShadow||ll.receiveShadow&&3===fl)&&(!ll.frustumCulled||cl.intersectsObject(ll))){ll.modelViewMatrix.multiplyMatrices(dl.matrixWorldInverse,ll.matrixWorld);const cl=Da.update(ll),Al=ll.material;if(Array.isArray(Al)){const Da=cl.groups;for(let bl=0,kl=Da.length;bl<kl;bl++){const kl=Da[bl],Dl=Al[kl.materialIndex];if(Dl&&Dl.visible){const Da=getDepthMaterial(ll,Dl,pl,fl);ll.onBeforeShadow(F,ll,hl,dl,cl,Da,kl),F.renderBufferDirect(dl,null,cl,Da,ll,kl),ll.onAfterShadow(F,ll,hl,dl,cl,Da,kl)}}}else if(Al.visible){const Da=getDepthMaterial(ll,Al,pl,fl);ll.onBeforeShadow(F,ll,hl,dl,cl,Da,null),F.renderBufferDirect(dl,null,cl,Da,ll,null),ll.onAfterShadow(F,ll,hl,dl,cl,Da,null)}}const Al=ll.children;for(let F=0,Da=Al.length;F<Da;F++)renderObject(Al[F],hl,dl,pl,fl)}function onMaterialDispose(F){F.target.removeEventListener("dispose",onMaterialDispose);for(const Da in Wl){const ll=Wl[Da],cl=F.target.uuid;if(cl in ll){ll[cl].dispose(),delete ll[cl]}}}this.render=function(Da,ll,hl){if(!1===cu.enabled)return;if(!1===cu.autoUpdate&&!1===cu.needsUpdate)return;if(0===Da.length)return;const dl=F.getRenderTarget(),pl=F.getActiveCubeFace(),kl=F.getActiveMipmapLevel(),Dl=F.state;Dl.setBlending(0),Dl.buffers.color.setClear(1,1,1,1),Dl.buffers.depth.setTest(!0),Dl.setScissorTest(!1);const Wl=3!==uu&&3===this.type,wc=3===uu&&3!==this.type;for(let Sc=0,eu=Da.length;Sc<eu;Sc++){const dl=Da[Sc],pl=dl.shadow;if(void 0===pl){console.warn("THREE.WebGLShadowMap:",dl,"has no shadow.");continue}if(!1===pl.autoUpdate&&!1===pl.needsUpdate)continue;fl.copy(pl.mapSize);const kl=pl.getFrameExtents();if(fl.multiply(kl),Al.copy(pl.mapSize),(fl.x>Ql||fl.y>Ql)&&(fl.x>Ql&&(Al.x=Math.floor(Ql/kl.x),fl.x=Al.x*kl.x,pl.mapSize.x=Al.x),fl.y>Ql&&(Al.y=Math.floor(Ql/kl.y),fl.y=Al.y*kl.y,pl.mapSize.y=Al.y)),null===pl.map||!0===Wl||!0===wc){const F=3!==this.type?{minFilter:rd,magFilter:rd}:{};null!==pl.map&&pl.map.dispose(),pl.map=new WebGLRenderTarget(fl.x,fl.y,F),pl.map.texture.name=dl.name+".shadowMap",pl.camera.updateProjectionMatrix()}F.setRenderTarget(pl.map),F.clear();const eu=pl.getViewportCount();for(let F=0;F<eu;F++){const Da=pl.getViewport(F);bl.set(Al.x*Da.x,Al.y*Da.y,Al.x*Da.z,Al.y*Da.w),Dl.viewport(bl),pl.updateMatrices(dl,F),cl=pl.getFrustum(),renderObject(ll,hl,pl.camera,dl,this.type)}!0!==pl.isPointLightShadow&&3===this.type&&VSMPass(pl,hl),pl.needsUpdate=!1}uu=this.type,cu.needsUpdate=!1,F.setRenderTarget(dl,pl,kl)}}function WebGLState(F){const Da=new function(){let Da=!1;const ll=new Vector4;let cl=null;const hl=new Vector4(0,0,0,0);return{setMask:function(ll){cl===ll||Da||(F.colorMask(ll,ll,ll,ll),cl=ll)},setLocked:function(F){Da=F},setClear:function(Da,cl,dl,pl,fl){!0===fl&&(Da*=pl,cl*=pl,dl*=pl),ll.set(Da,cl,dl,pl),!1===hl.equals(ll)&&(F.clearColor(Da,cl,dl,pl),hl.copy(ll))},reset:function(){Da=!1,cl=null,hl.set(-1,0,0,0)}}},ll=new function(){let Da=!1,ll=null,cl=null,hl=null;return{setTest:function(Da){Da?enable(F.DEPTH_TEST):disable(F.DEPTH_TEST)},setMask:function(cl){ll===cl||Da||(F.depthMask(cl),ll=cl)},setFunc:function(Da){if(cl!==Da){switch(Da){case 0:F.depthFunc(F.NEVER);break;case 1:F.depthFunc(F.ALWAYS);break;case 2:F.depthFunc(F.LESS);break;case 3:default:F.depthFunc(F.LEQUAL);break;case 4:F.depthFunc(F.EQUAL);break;case 5:F.depthFunc(F.GEQUAL);break;case 6:F.depthFunc(F.GREATER);break;case 7:F.depthFunc(F.NOTEQUAL)}cl=Da}},setLocked:function(F){Da=F},setClear:function(Da){hl!==Da&&(F.clearDepth(Da),hl=Da)},reset:function(){Da=!1,ll=null,cl=null,hl=null}}},cl=new function(){let Da=!1,ll=null,cl=null,hl=null,dl=null,pl=null,fl=null,Al=null,bl=null;return{setTest:function(ll){Da||(ll?enable(F.STENCIL_TEST):disable(F.STENCIL_TEST))},setMask:function(cl){ll===cl||Da||(F.stencilMask(cl),ll=cl)},setFunc:function(Da,ll,pl){cl===Da&&hl===ll&&dl===pl||(F.stencilFunc(Da,ll,pl),cl=Da,hl=ll,dl=pl)},setOp:function(Da,ll,cl){pl===Da&&fl===ll&&Al===cl||(F.stencilOp(Da,ll,cl),pl=Da,fl=ll,Al=cl)},setLocked:function(F){Da=F},setClear:function(Da){bl!==Da&&(F.clearStencil(Da),bl=Da)},reset:function(){Da=!1,ll=null,cl=null,hl=null,dl=null,pl=null,fl=null,Al=null,bl=null}}},hl=new WeakMap,dl=new WeakMap;let pl={},Nu={},qu=new WeakMap,ih=[],gh=null,ed=!1,td=null,id=null,nd=null,rd=null,ad=null,sd=null,od=null,ld=new Color(0,0,0),cd=0,ud=!1,hd=null,dd=null,pd=null,md=null,fd=null;const gd=F.getParameter(F.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ad=!1,yd=0;const vd=F.getParameter(F.VERSION);-1!==vd.indexOf("WebGL")?(yd=parseFloat(/^WebGL (\d)/.exec(vd)[1]),Ad=yd>=1):-1!==vd.indexOf("OpenGL ES")&&(yd=parseFloat(/^OpenGL ES (\d)/.exec(vd)[1]),Ad=yd>=2);let _d=null,xd={};const bd=F.getParameter(F.SCISSOR_BOX),wd=F.getParameter(F.VIEWPORT),Ed=(new Vector4).fromArray(bd),Md=(new Vector4).fromArray(wd);function createTexture(Da,ll,cl,hl){const dl=new Uint8Array(4),pl=F.createTexture();F.bindTexture(Da,pl),F.texParameteri(Da,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(Da,F.TEXTURE_MAG_FILTER,F.NEAREST);for(let fl=0;fl<cl;fl++)Da===F.TEXTURE_3D||Da===F.TEXTURE_2D_ARRAY?F.texImage3D(ll,0,F.RGBA,1,1,hl,0,F.RGBA,F.UNSIGNED_BYTE,dl):F.texImage2D(ll+fl,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,dl);return pl}const Sd={};function enable(Da){!0!==pl[Da]&&(F.enable(Da),pl[Da]=!0)}function disable(Da){!1!==pl[Da]&&(F.disable(Da),pl[Da]=!1)}Sd[F.TEXTURE_2D]=createTexture(F.TEXTURE_2D,F.TEXTURE_2D,1),Sd[F.TEXTURE_CUBE_MAP]=createTexture(F.TEXTURE_CUBE_MAP,F.TEXTURE_CUBE_MAP_POSITIVE_X,6),Sd[F.TEXTURE_2D_ARRAY]=createTexture(F.TEXTURE_2D_ARRAY,F.TEXTURE_2D_ARRAY,1,1),Sd[F.TEXTURE_3D]=createTexture(F.TEXTURE_3D,F.TEXTURE_3D,1,1),Da.setClear(0,0,0,1),ll.setClear(1),cl.setClear(0),enable(F.DEPTH_TEST),ll.setFunc(3),setFlipSided(!1),setCullFace(1),enable(F.CULL_FACE),setBlending(0);const kd={[fl]:F.FUNC_ADD,[Al]:F.FUNC_SUBTRACT,[bl]:F.FUNC_REVERSE_SUBTRACT};kd[103]=F.MIN,kd[104]=F.MAX;const Td={[kl]:F.ZERO,[Dl]:F.ONE,[Wl]:F.SRC_COLOR,[wc]:F.SRC_ALPHA,[uu]:F.SRC_ALPHA_SATURATE,[su]:F.DST_COLOR,[eu]:F.DST_ALPHA,[Ql]:F.ONE_MINUS_SRC_COLOR,[Sc]:F.ONE_MINUS_SRC_ALPHA,[cu]:F.ONE_MINUS_DST_COLOR,[iu]:F.ONE_MINUS_DST_ALPHA,[hu]:F.CONSTANT_COLOR,[Lu]:F.ONE_MINUS_CONSTANT_COLOR,[zu]:F.CONSTANT_ALPHA,[Du]:F.ONE_MINUS_CONSTANT_ALPHA};function setBlending(Da,ll,cl,hl,dl,pl,Al,bl,kl,Dl){if(0!==Da){if(!1===ed&&(enable(F.BLEND),ed=!0),5===Da)dl=dl||ll,pl=pl||cl,Al=Al||hl,ll===id&&dl===ad||(F.blendEquationSeparate(kd[ll],kd[dl]),id=ll,ad=dl),cl===nd&&hl===rd&&pl===sd&&Al===od||(F.blendFuncSeparate(Td[cl],Td[hl],Td[pl],Td[Al]),nd=cl,rd=hl,sd=pl,od=Al),!1!==bl.equals(ld)&&kl===cd||(F.blendColor(bl.r,bl.g,bl.b,kl),ld.copy(bl),cd=kl),td=Da,ud=!1;else if(Da!==td||Dl!==ud){if(id===fl&&ad===fl||(F.blendEquation(F.FUNC_ADD),id=fl,ad=fl),Dl)switch(Da){case 1:F.blendFuncSeparate(F.ONE,F.ONE_MINUS_SRC_ALPHA,F.ONE,F.ONE_MINUS_SRC_ALPHA);break;case 2:F.blendFunc(F.ONE,F.ONE);break;case 3:F.blendFuncSeparate(F.ZERO,F.ONE_MINUS_SRC_COLOR,F.ZERO,F.ONE);break;case 4:F.blendFuncSeparate(F.ZERO,F.SRC_COLOR,F.ZERO,F.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Da)}else switch(Da){case 1:F.blendFuncSeparate(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA,F.ONE,F.ONE_MINUS_SRC_ALPHA);break;case 2:F.blendFunc(F.SRC_ALPHA,F.ONE);break;case 3:F.blendFuncSeparate(F.ZERO,F.ONE_MINUS_SRC_COLOR,F.ZERO,F.ONE);break;case 4:F.blendFunc(F.ZERO,F.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Da)}nd=null,rd=null,sd=null,od=null,ld.set(0,0,0),cd=0,td=Da,ud=Dl}}else!0===ed&&(disable(F.BLEND),ed=!1)}function setFlipSided(Da){hd!==Da&&(Da?F.frontFace(F.CW):F.frontFace(F.CCW),hd=Da)}function setCullFace(Da){0!==Da?(enable(F.CULL_FACE),Da!==dd&&(1===Da?F.cullFace(F.BACK):2===Da?F.cullFace(F.FRONT):F.cullFace(F.FRONT_AND_BACK))):disable(F.CULL_FACE),dd=Da}function setPolygonOffset(Da,ll,cl){Da?(enable(F.POLYGON_OFFSET_FILL),md===ll&&fd===cl||(F.polygonOffset(ll,cl),md=ll,fd=cl)):disable(F.POLYGON_OFFSET_FILL)}return{buffers:{color:Da,depth:ll,stencil:cl},enable:enable,disable:disable,bindFramebuffer:function(Da,ll){return Nu[Da]!==ll&&(F.bindFramebuffer(Da,ll),Nu[Da]=ll,Da===F.DRAW_FRAMEBUFFER&&(Nu[F.FRAMEBUFFER]=ll),Da===F.FRAMEBUFFER&&(Nu[F.DRAW_FRAMEBUFFER]=ll),!0)},drawBuffers:function(Da,ll){let cl=ih,hl=!1;if(Da){cl=qu.get(ll),void 0===cl&&(cl=[],qu.set(ll,cl));const dl=Da.textures;if(cl.length!==dl.length||cl[0]!==F.COLOR_ATTACHMENT0){for(let Da=0,ll=dl.length;Da<ll;Da++)cl[Da]=F.COLOR_ATTACHMENT0+Da;cl.length=dl.length,hl=!0}}else cl[0]!==F.BACK&&(cl[0]=F.BACK,hl=!0);hl&&F.drawBuffers(cl)},useProgram:function(Da){return gh!==Da&&(F.useProgram(Da),gh=Da,!0)},setBlending:setBlending,setMaterial:function(hl,dl){2===hl.side?disable(F.CULL_FACE):enable(F.CULL_FACE);let pl=1===hl.side;dl&&(pl=!pl),setFlipSided(pl),1===hl.blending&&!1===hl.transparent?setBlending(0):setBlending(hl.blending,hl.blendEquation,hl.blendSrc,hl.blendDst,hl.blendEquationAlpha,hl.blendSrcAlpha,hl.blendDstAlpha,hl.blendColor,hl.blendAlpha,hl.premultipliedAlpha),ll.setFunc(hl.depthFunc),ll.setTest(hl.depthTest),ll.setMask(hl.depthWrite),Da.setMask(hl.colorWrite);const fl=hl.stencilWrite;cl.setTest(fl),fl&&(cl.setMask(hl.stencilWriteMask),cl.setFunc(hl.stencilFunc,hl.stencilRef,hl.stencilFuncMask),cl.setOp(hl.stencilFail,hl.stencilZFail,hl.stencilZPass)),setPolygonOffset(hl.polygonOffset,hl.polygonOffsetFactor,hl.polygonOffsetUnits),!0===hl.alphaToCoverage?enable(F.SAMPLE_ALPHA_TO_COVERAGE):disable(F.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function(Da){Da!==pd&&(Ad&&F.lineWidth(Da),pd=Da)},setPolygonOffset:setPolygonOffset,setScissorTest:function(Da){Da?enable(F.SCISSOR_TEST):disable(F.SCISSOR_TEST)},activeTexture:function(Da){void 0===Da&&(Da=F.TEXTURE0+gd-1),_d!==Da&&(F.activeTexture(Da),_d=Da)},bindTexture:function(Da,ll,cl){void 0===cl&&(cl=null===_d?F.TEXTURE0+gd-1:_d);let hl=xd[cl];void 0===hl&&(hl={type:void 0,texture:void 0},xd[cl]=hl),hl.type===Da&&hl.texture===ll||(_d!==cl&&(F.activeTexture(cl),_d=cl),F.bindTexture(Da,ll||Sd[Da]),hl.type=Da,hl.texture=ll)},unbindTexture:function(){const Da=xd[_d];void 0!==Da&&void 0!==Da.type&&(F.bindTexture(Da.type,null),Da.type=void 0,Da.texture=void 0)},compressedTexImage2D:function(){try{F.compressedTexImage2D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},compressedTexImage3D:function(){try{F.compressedTexImage3D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},texImage2D:function(){try{F.texImage2D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},texImage3D:function(){try{F.texImage3D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},updateUBOMapping:function(Da,ll){let cl=dl.get(ll);void 0===cl&&(cl=new WeakMap,dl.set(ll,cl));let hl=cl.get(Da);void 0===hl&&(hl=F.getUniformBlockIndex(ll,Da.name),cl.set(Da,hl))},uniformBlockBinding:function(Da,ll){const cl=dl.get(ll).get(Da);hl.get(ll)!==cl&&(F.uniformBlockBinding(ll,cl,Da.__bindingPointIndex),hl.set(ll,cl))},texStorage2D:function(){try{F.texStorage2D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},texStorage3D:function(){try{F.texStorage3D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},texSubImage2D:function(){try{F.texSubImage2D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},texSubImage3D:function(){try{F.texSubImage3D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},compressedTexSubImage2D:function(){try{F.compressedTexSubImage2D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},compressedTexSubImage3D:function(){try{F.compressedTexSubImage3D.apply(F,arguments)}catch(Da){console.error("THREE.WebGLState:",Da)}},scissor:function(Da){!1===Ed.equals(Da)&&(F.scissor(Da.x,Da.y,Da.z,Da.w),Ed.copy(Da))},viewport:function(Da){!1===Md.equals(Da)&&(F.viewport(Da.x,Da.y,Da.z,Da.w),Md.copy(Da))},reset:function(){F.disable(F.BLEND),F.disable(F.CULL_FACE),F.disable(F.DEPTH_TEST),F.disable(F.POLYGON_OFFSET_FILL),F.disable(F.SCISSOR_TEST),F.disable(F.STENCIL_TEST),F.disable(F.SAMPLE_ALPHA_TO_COVERAGE),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.ONE,F.ZERO),F.blendFuncSeparate(F.ONE,F.ZERO,F.ONE,F.ZERO),F.blendColor(0,0,0,0),F.colorMask(!0,!0,!0,!0),F.clearColor(0,0,0,0),F.depthMask(!0),F.depthFunc(F.LESS),F.clearDepth(1),F.stencilMask(4294967295),F.stencilFunc(F.ALWAYS,0,4294967295),F.stencilOp(F.KEEP,F.KEEP,F.KEEP),F.clearStencil(0),F.cullFace(F.BACK),F.frontFace(F.CCW),F.polygonOffset(0,0),F.activeTexture(F.TEXTURE0),F.bindFramebuffer(F.FRAMEBUFFER,null),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,null),F.bindFramebuffer(F.READ_FRAMEBUFFER,null),F.useProgram(null),F.lineWidth(1),F.scissor(0,0,F.canvas.width,F.canvas.height),F.viewport(0,0,F.canvas.width,F.canvas.height),pl={},_d=null,xd={},Nu={},qu=new WeakMap,ih=[],gh=null,ed=!1,td=null,id=null,nd=null,rd=null,ad=null,sd=null,od=null,ld=new Color(0,0,0),cd=0,ud=!1,hd=null,dd=null,pd=null,md=null,fd=null,Ed.set(0,0,F.canvas.width,F.canvas.height),Md.set(0,0,F.canvas.width,F.canvas.height),Da.reset(),ll.reset(),cl.reset()}}}function getByteLength(F,Da,ll,cl){const hl=function(F){switch(F){case ud:case hd:return{byteLength:1,components:1};case pd:case dd:case Ad:return{byteLength:2,components:1};case yd:case vd:return{byteLength:2,components:4};case fd:case md:case gd:return{byteLength:4,components:1};case xd:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${F}.`)}(cl);switch(ll){case 1021:case 1024:return F*Da;case 1025:return F*Da*2;case Md:case Sd:return F*Da/hl.components*hl.byteLength;case 1030:case kd:return F*Da*2/hl.components*hl.byteLength;case 1022:return F*Da*3/hl.components*hl.byteLength;case bd:case Td:return F*Da*4/hl.components*hl.byteLength;case Id:case Cd:return Math.floor((F+3)/4)*Math.floor((Da+3)/4)*8;case Ld:case zd:return Math.floor((F+3)/4)*Math.floor((Da+3)/4)*16;case Dd:case Nd:return Math.max(F,16)*Math.max(Da,8)/4;case Pd:case Rd:return Math.max(F,8)*Math.max(Da,8)/2;case Ud:case Bd:return Math.floor((F+3)/4)*Math.floor((Da+3)/4)*8;case Od:case Fd:return Math.floor((F+3)/4)*Math.floor((Da+3)/4)*16;case jd:return Math.floor((F+4)/5)*Math.floor((Da+3)/4)*16;case Vd:return Math.floor((F+4)/5)*Math.floor((Da+4)/5)*16;case Gd:return Math.floor((F+5)/6)*Math.floor((Da+4)/5)*16;case qd:return Math.floor((F+5)/6)*Math.floor((Da+5)/6)*16;case Hd:return Math.floor((F+7)/8)*Math.floor((Da+4)/5)*16;case Zd:return Math.floor((F+7)/8)*Math.floor((Da+5)/6)*16;case Wd:return Math.floor((F+7)/8)*Math.floor((Da+7)/8)*16;case Kd:return Math.floor((F+9)/10)*Math.floor((Da+4)/5)*16;case Qd:return Math.floor((F+9)/10)*Math.floor((Da+5)/6)*16;case Xd:return Math.floor((F+9)/10)*Math.floor((Da+7)/8)*16;case Yd:return Math.floor((F+9)/10)*Math.floor((Da+9)/10)*16;case Jd:return Math.floor((F+11)/12)*Math.floor((Da+9)/10)*16;case $d:return Math.floor((F+11)/12)*Math.floor((Da+11)/12)*16;case lp:case mp:case gp:return Math.ceil(F/4)*Math.ceil(Da/4)*16;case 36283:case Ap:return Math.ceil(F/4)*Math.ceil(Da/4)*8;case vp:case _p:return Math.ceil(F/4)*Math.ceil(Da/4)*16}throw new Error(`Unable to determine texture byte length for ${ll} format.`)}function WebGLTextures(F,Da,ll,cl,hl,dl,pl){const fl=Da.has("WEBGL_multisampled_render_to_texture")?Da.get("WEBGL_multisampled_render_to_texture"):null,Al="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),bl=new Vector2,kl=new WeakMap;let Dl;const Wl=new WeakMap;let Ql=!1;try{Ql="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(uu){}function createCanvas(F,Da){return Ql?new OffscreenCanvas(F,Da):createElementNS("canvas")}function resizeImage(F,Da,ll){let cl=1;const hl=getDimensions(F);if((hl.width>ll||hl.height>ll)&&(cl=ll/Math.max(hl.width,hl.height)),cl<1){if("undefined"!==typeof HTMLImageElement&&F instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&F instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&F instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&F instanceof VideoFrame){const ll=Math.floor(cl*hl.width),dl=Math.floor(cl*hl.height);void 0===Dl&&(Dl=createCanvas(ll,dl));const pl=Da?createCanvas(ll,dl):Dl;pl.width=ll,pl.height=dl;return pl.getContext("2d").drawImage(F,0,0,ll,dl),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+hl.width+"x"+hl.height+") to ("+ll+"x"+dl+")."),pl}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+hl.width+"x"+hl.height+")."),F}return F}function textureNeedsGenerateMipmaps(F){return F.generateMipmaps&&F.minFilter!==rd&&F.minFilter!==od}function generateMipmap(Da){F.generateMipmap(Da)}function getInternalFormat(ll,cl,hl,dl,pl){if(void 0===pl&&(pl=!1),null!==ll){if(void 0!==F[ll])return F[ll];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ll+"'")}let fl=cl;if(cl===F.RED&&(hl===F.FLOAT&&(fl=F.R32F),hl===F.HALF_FLOAT&&(fl=F.R16F),hl===F.UNSIGNED_BYTE&&(fl=F.R8)),cl===F.RED_INTEGER&&(hl===F.UNSIGNED_BYTE&&(fl=F.R8UI),hl===F.UNSIGNED_SHORT&&(fl=F.R16UI),hl===F.UNSIGNED_INT&&(fl=F.R32UI),hl===F.BYTE&&(fl=F.R8I),hl===F.SHORT&&(fl=F.R16I),hl===F.INT&&(fl=F.R32I)),cl===F.RG&&(hl===F.FLOAT&&(fl=F.RG32F),hl===F.HALF_FLOAT&&(fl=F.RG16F),hl===F.UNSIGNED_BYTE&&(fl=F.RG8)),cl===F.RG_INTEGER&&(hl===F.UNSIGNED_BYTE&&(fl=F.RG8UI),hl===F.UNSIGNED_SHORT&&(fl=F.RG16UI),hl===F.UNSIGNED_INT&&(fl=F.RG32UI),hl===F.BYTE&&(fl=F.RG8I),hl===F.SHORT&&(fl=F.RG16I),hl===F.INT&&(fl=F.RG32I)),cl===F.RGB&&hl===F.UNSIGNED_INT_5_9_9_9_REV&&(fl=F.RGB9_E5),cl===F.RGBA){const Da=pl?zp:sm.getTransfer(dl);hl===F.FLOAT&&(fl=F.RGBA32F),hl===F.HALF_FLOAT&&(fl=F.RGBA16F),hl===F.UNSIGNED_BYTE&&(fl=Da===Pp?F.SRGB8_ALPHA8:F.RGBA8),hl===F.UNSIGNED_SHORT_4_4_4_4&&(fl=F.RGBA4),hl===F.UNSIGNED_SHORT_5_5_5_1&&(fl=F.RGB5_A1)}return fl!==F.R16F&&fl!==F.R32F&&fl!==F.RG16F&&fl!==F.RG32F&&fl!==F.RGBA16F&&fl!==F.RGBA32F||Da.get("EXT_color_buffer_float"),fl}function getInternalDepthFormat(Da,ll){let cl;return Da?null===ll||ll===fd||ll===_d?cl=F.DEPTH24_STENCIL8:ll===gd?cl=F.DEPTH32F_STENCIL8:ll===pd&&(cl=F.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===ll||ll===fd||ll===_d?cl=F.DEPTH_COMPONENT24:ll===gd?cl=F.DEPTH_COMPONENT32F:ll===pd&&(cl=F.DEPTH_COMPONENT16),cl}function getMipLevels(F,Da){return!0===textureNeedsGenerateMipmaps(F)||F.isFramebufferTexture&&F.minFilter!==rd&&F.minFilter!==od?Math.log2(Math.max(Da.width,Da.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?Da.mipmaps.length:1}function onTextureDispose(F){const Da=F.target;Da.removeEventListener("dispose",onTextureDispose),function(F){const Da=cl.get(F);if(void 0===Da.__webglInit)return;const ll=F.source,hl=Wl.get(ll);if(hl){const cl=hl[Da.__cacheKey];cl.usedTimes--,0===cl.usedTimes&&deleteTexture(F),0===Object.keys(hl).length&&Wl.delete(ll)}cl.remove(F)}(Da),Da.isVideoTexture&&kl.delete(Da)}function onRenderTargetDispose(Da){const ll=Da.target;ll.removeEventListener("dispose",onRenderTargetDispose),function(Da){const ll=cl.get(Da);Da.depthTexture&&Da.depthTexture.dispose();if(Da.isWebGLCubeRenderTarget)for(let cl=0;cl<6;cl++){if(Array.isArray(ll.__webglFramebuffer[cl]))for(let Da=0;Da<ll.__webglFramebuffer[cl].length;Da++)F.deleteFramebuffer(ll.__webglFramebuffer[cl][Da]);else F.deleteFramebuffer(ll.__webglFramebuffer[cl]);ll.__webglDepthbuffer&&F.deleteRenderbuffer(ll.__webglDepthbuffer[cl])}else{if(Array.isArray(ll.__webglFramebuffer))for(let Da=0;Da<ll.__webglFramebuffer.length;Da++)F.deleteFramebuffer(ll.__webglFramebuffer[Da]);else F.deleteFramebuffer(ll.__webglFramebuffer);if(ll.__webglDepthbuffer&&F.deleteRenderbuffer(ll.__webglDepthbuffer),ll.__webglMultisampledFramebuffer&&F.deleteFramebuffer(ll.__webglMultisampledFramebuffer),ll.__webglColorRenderbuffer)for(let Da=0;Da<ll.__webglColorRenderbuffer.length;Da++)ll.__webglColorRenderbuffer[Da]&&F.deleteRenderbuffer(ll.__webglColorRenderbuffer[Da]);ll.__webglDepthRenderbuffer&&F.deleteRenderbuffer(ll.__webglDepthRenderbuffer)}const hl=Da.textures;for(let dl=0,fl=hl.length;dl<fl;dl++){const Da=cl.get(hl[dl]);Da.__webglTexture&&(F.deleteTexture(Da.__webglTexture),pl.memory.textures--),cl.remove(hl[dl])}cl.remove(Da)}(ll)}function deleteTexture(Da){const ll=cl.get(Da);F.deleteTexture(ll.__webglTexture);const hl=Da.source;delete Wl.get(hl)[ll.__cacheKey],pl.memory.textures--}let wc=0;function setTexture2D(Da,hl){const dl=cl.get(Da);if(Da.isVideoTexture&&function(F){const Da=pl.render.frame;kl.get(F)!==Da&&(kl.set(F,Da),F.update())}(Da),!1===Da.isRenderTargetTexture&&Da.version>0&&dl.__version!==Da.version){const F=Da.image;if(null===F)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==F.complete)return void uploadTexture(dl,Da,hl);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}ll.bindTexture(F.TEXTURE_2D,dl.__webglTexture,F.TEXTURE0+hl)}const Sc={[td]:F.REPEAT,[id]:F.CLAMP_TO_EDGE,[nd]:F.MIRRORED_REPEAT},eu={[rd]:F.NEAREST,[ad]:F.NEAREST_MIPMAP_NEAREST,[sd]:F.NEAREST_MIPMAP_LINEAR,[od]:F.LINEAR,[ld]:F.LINEAR_MIPMAP_NEAREST,[cd]:F.LINEAR_MIPMAP_LINEAR},iu={[Up]:F.NEVER,[qp]:F.ALWAYS,[Bp]:F.LESS,[Fp]:F.LEQUAL,[Op]:F.EQUAL,[Gp]:F.GEQUAL,[jp]:F.GREATER,[Vp]:F.NOTEQUAL};function setTextureParameters(ll,dl){if(dl.type!==gd||!1!==Da.has("OES_texture_float_linear")||dl.magFilter!==od&&dl.magFilter!==ld&&dl.magFilter!==sd&&dl.magFilter!==cd&&dl.minFilter!==od&&dl.minFilter!==ld&&dl.minFilter!==sd&&dl.minFilter!==cd||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),F.texParameteri(ll,F.TEXTURE_WRAP_S,Sc[dl.wrapS]),F.texParameteri(ll,F.TEXTURE_WRAP_T,Sc[dl.wrapT]),ll!==F.TEXTURE_3D&&ll!==F.TEXTURE_2D_ARRAY||F.texParameteri(ll,F.TEXTURE_WRAP_R,Sc[dl.wrapR]),F.texParameteri(ll,F.TEXTURE_MAG_FILTER,eu[dl.magFilter]),F.texParameteri(ll,F.TEXTURE_MIN_FILTER,eu[dl.minFilter]),dl.compareFunction&&(F.texParameteri(ll,F.TEXTURE_COMPARE_MODE,F.COMPARE_REF_TO_TEXTURE),F.texParameteri(ll,F.TEXTURE_COMPARE_FUNC,iu[dl.compareFunction])),!0===Da.has("EXT_texture_filter_anisotropic")){if(dl.magFilter===rd)return;if(dl.minFilter!==sd&&dl.minFilter!==cd)return;if(dl.type===gd&&!1===Da.has("OES_texture_float_linear"))return;if(dl.anisotropy>1||cl.get(dl).__currentAnisotropy){const pl=Da.get("EXT_texture_filter_anisotropic");F.texParameterf(ll,pl.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(dl.anisotropy,hl.getMaxAnisotropy())),cl.get(dl).__currentAnisotropy=dl.anisotropy}}}function initTexture(Da,ll){let cl=!1;void 0===Da.__webglInit&&(Da.__webglInit=!0,ll.addEventListener("dispose",onTextureDispose));const hl=ll.source;let dl=Wl.get(hl);void 0===dl&&(dl={},Wl.set(hl,dl));const fl=function(F){const Da=[];return Da.push(F.wrapS),Da.push(F.wrapT),Da.push(F.wrapR||0),Da.push(F.magFilter),Da.push(F.minFilter),Da.push(F.anisotropy),Da.push(F.internalFormat),Da.push(F.format),Da.push(F.type),Da.push(F.generateMipmaps),Da.push(F.premultiplyAlpha),Da.push(F.flipY),Da.push(F.unpackAlignment),Da.push(F.colorSpace),Da.join()}(ll);if(fl!==Da.__cacheKey){void 0===dl[fl]&&(dl[fl]={texture:F.createTexture(),usedTimes:0},pl.memory.textures++,cl=!0),dl[fl].usedTimes++;const hl=dl[Da.__cacheKey];void 0!==hl&&(dl[Da.__cacheKey].usedTimes--,0===hl.usedTimes&&deleteTexture(ll)),Da.__cacheKey=fl,Da.__webglTexture=dl[fl].texture}return cl}function uploadTexture(Da,pl,fl){let Al=F.TEXTURE_2D;(pl.isDataArrayTexture||pl.isCompressedArrayTexture)&&(Al=F.TEXTURE_2D_ARRAY),pl.isData3DTexture&&(Al=F.TEXTURE_3D);const bl=initTexture(Da,pl),kl=pl.source;ll.bindTexture(Al,Da.__webglTexture,F.TEXTURE0+fl);const Dl=cl.get(kl);if(kl.version!==Dl.__version||!0===bl){ll.activeTexture(F.TEXTURE0+fl);const Da=sm.getPrimaries(sm.workingColorSpace),cl=pl.colorSpace===kp?null:sm.getPrimaries(pl.colorSpace),Wl=pl.colorSpace===kp||Da===cl?F.NONE:F.BROWSER_DEFAULT_WEBGL;F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,pl.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pl.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,pl.unpackAlignment),F.pixelStorei(F.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wl);let Ql=resizeImage(pl.image,!1,hl.maxTextureSize);Ql=verifyColorSpace(pl,Ql);const wc=dl.convert(pl.format,pl.colorSpace),Sc=dl.convert(pl.type);let eu,iu=getInternalFormat(pl.internalFormat,wc,Sc,pl.colorSpace,pl.isVideoTexture);setTextureParameters(Al,pl);const su=pl.mipmaps,cu=!0!==pl.isVideoTexture,uu=void 0===Dl.__version||!0===bl,hu=kl.dataReady,Lu=getMipLevels(pl,Ql);if(pl.isDepthTexture)iu=getInternalDepthFormat(pl.format===Ed,pl.type),uu&&(cu?ll.texStorage2D(F.TEXTURE_2D,1,iu,Ql.width,Ql.height):ll.texImage2D(F.TEXTURE_2D,0,iu,Ql.width,Ql.height,0,wc,Sc,null));else if(pl.isDataTexture)if(su.length>0){cu&&uu&&ll.texStorage2D(F.TEXTURE_2D,Lu,iu,su[0].width,su[0].height);for(let Da=0,cl=su.length;Da<cl;Da++)eu=su[Da],cu?hu&&ll.texSubImage2D(F.TEXTURE_2D,Da,0,0,eu.width,eu.height,wc,Sc,eu.data):ll.texImage2D(F.TEXTURE_2D,Da,iu,eu.width,eu.height,0,wc,Sc,eu.data);pl.generateMipmaps=!1}else cu?(uu&&ll.texStorage2D(F.TEXTURE_2D,Lu,iu,Ql.width,Ql.height),hu&&ll.texSubImage2D(F.TEXTURE_2D,0,0,0,Ql.width,Ql.height,wc,Sc,Ql.data)):ll.texImage2D(F.TEXTURE_2D,0,iu,Ql.width,Ql.height,0,wc,Sc,Ql.data);else if(pl.isCompressedTexture)if(pl.isCompressedArrayTexture){cu&&uu&&ll.texStorage3D(F.TEXTURE_2D_ARRAY,Lu,iu,su[0].width,su[0].height,Ql.depth);for(let Da=0,cl=su.length;Da<cl;Da++)if(eu=su[Da],pl.format!==bd)if(null!==wc)if(cu){if(hu)if(pl.layerUpdates.size>0){const cl=getByteLength(eu.width,eu.height,pl.format,pl.type);for(const hl of pl.layerUpdates){const dl=eu.data.subarray(hl*cl/eu.data.BYTES_PER_ELEMENT,(hl+1)*cl/eu.data.BYTES_PER_ELEMENT);ll.compressedTexSubImage3D(F.TEXTURE_2D_ARRAY,Da,0,0,hl,eu.width,eu.height,1,wc,dl,0,0)}pl.clearLayerUpdates()}else ll.compressedTexSubImage3D(F.TEXTURE_2D_ARRAY,Da,0,0,0,eu.width,eu.height,Ql.depth,wc,eu.data,0,0)}else ll.compressedTexImage3D(F.TEXTURE_2D_ARRAY,Da,iu,eu.width,eu.height,Ql.depth,0,eu.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else cu?hu&&ll.texSubImage3D(F.TEXTURE_2D_ARRAY,Da,0,0,0,eu.width,eu.height,Ql.depth,wc,Sc,eu.data):ll.texImage3D(F.TEXTURE_2D_ARRAY,Da,iu,eu.width,eu.height,Ql.depth,0,wc,Sc,eu.data)}else{cu&&uu&&ll.texStorage2D(F.TEXTURE_2D,Lu,iu,su[0].width,su[0].height);for(let Da=0,cl=su.length;Da<cl;Da++)eu=su[Da],pl.format!==bd?null!==wc?cu?hu&&ll.compressedTexSubImage2D(F.TEXTURE_2D,Da,0,0,eu.width,eu.height,wc,eu.data):ll.compressedTexImage2D(F.TEXTURE_2D,Da,iu,eu.width,eu.height,0,eu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):cu?hu&&ll.texSubImage2D(F.TEXTURE_2D,Da,0,0,eu.width,eu.height,wc,Sc,eu.data):ll.texImage2D(F.TEXTURE_2D,Da,iu,eu.width,eu.height,0,wc,Sc,eu.data)}else if(pl.isDataArrayTexture)if(cu){if(uu&&ll.texStorage3D(F.TEXTURE_2D_ARRAY,Lu,iu,Ql.width,Ql.height,Ql.depth),hu)if(pl.layerUpdates.size>0){const Da=getByteLength(Ql.width,Ql.height,pl.format,pl.type);for(const cl of pl.layerUpdates){const hl=Ql.data.subarray(cl*Da/Ql.data.BYTES_PER_ELEMENT,(cl+1)*Da/Ql.data.BYTES_PER_ELEMENT);ll.texSubImage3D(F.TEXTURE_2D_ARRAY,0,0,0,cl,Ql.width,Ql.height,1,wc,Sc,hl)}pl.clearLayerUpdates()}else ll.texSubImage3D(F.TEXTURE_2D_ARRAY,0,0,0,0,Ql.width,Ql.height,Ql.depth,wc,Sc,Ql.data)}else ll.texImage3D(F.TEXTURE_2D_ARRAY,0,iu,Ql.width,Ql.height,Ql.depth,0,wc,Sc,Ql.data);else if(pl.isData3DTexture)cu?(uu&&ll.texStorage3D(F.TEXTURE_3D,Lu,iu,Ql.width,Ql.height,Ql.depth),hu&&ll.texSubImage3D(F.TEXTURE_3D,0,0,0,0,Ql.width,Ql.height,Ql.depth,wc,Sc,Ql.data)):ll.texImage3D(F.TEXTURE_3D,0,iu,Ql.width,Ql.height,Ql.depth,0,wc,Sc,Ql.data);else if(pl.isFramebufferTexture){if(uu)if(cu)ll.texStorage2D(F.TEXTURE_2D,Lu,iu,Ql.width,Ql.height);else{let Da=Ql.width,cl=Ql.height;for(let hl=0;hl<Lu;hl++)ll.texImage2D(F.TEXTURE_2D,hl,iu,Da,cl,0,wc,Sc,null),Da>>=1,cl>>=1}}else if(su.length>0){if(cu&&uu){const Da=getDimensions(su[0]);ll.texStorage2D(F.TEXTURE_2D,Lu,iu,Da.width,Da.height)}for(let Da=0,cl=su.length;Da<cl;Da++)eu=su[Da],cu?hu&&ll.texSubImage2D(F.TEXTURE_2D,Da,0,0,wc,Sc,eu):ll.texImage2D(F.TEXTURE_2D,Da,iu,wc,Sc,eu);pl.generateMipmaps=!1}else if(cu){if(uu){const Da=getDimensions(Ql);ll.texStorage2D(F.TEXTURE_2D,Lu,iu,Da.width,Da.height)}hu&&ll.texSubImage2D(F.TEXTURE_2D,0,0,0,wc,Sc,Ql)}else ll.texImage2D(F.TEXTURE_2D,0,iu,wc,Sc,Ql);textureNeedsGenerateMipmaps(pl)&&generateMipmap(Al),Dl.__version=kl.version,pl.onUpdate&&pl.onUpdate(pl)}Da.__version=pl.version}function setupFrameBufferTexture(Da,hl,pl,Al,bl,kl){const Dl=dl.convert(pl.format,pl.colorSpace),Wl=dl.convert(pl.type),Ql=getInternalFormat(pl.internalFormat,Dl,Wl,pl.colorSpace);if(!cl.get(hl).__hasExternalTextures){const Da=Math.max(1,hl.width>>kl),cl=Math.max(1,hl.height>>kl);bl===F.TEXTURE_3D||bl===F.TEXTURE_2D_ARRAY?ll.texImage3D(bl,kl,Ql,Da,cl,hl.depth,0,Dl,Wl,null):ll.texImage2D(bl,kl,Ql,Da,cl,0,Dl,Wl,null)}ll.bindFramebuffer(F.FRAMEBUFFER,Da),useMultisampledRTT(hl)?fl.framebufferTexture2DMultisampleEXT(F.FRAMEBUFFER,Al,bl,cl.get(pl).__webglTexture,0,getRenderTargetSamples(hl)):(bl===F.TEXTURE_2D||bl>=F.TEXTURE_CUBE_MAP_POSITIVE_X&&bl<=F.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&F.framebufferTexture2D(F.FRAMEBUFFER,Al,bl,cl.get(pl).__webglTexture,kl),ll.bindFramebuffer(F.FRAMEBUFFER,null)}function setupRenderBufferStorage(Da,ll,cl){if(F.bindRenderbuffer(F.RENDERBUFFER,Da),ll.depthBuffer){const hl=ll.depthTexture,dl=hl&&hl.isDepthTexture?hl.type:null,pl=getInternalDepthFormat(ll.stencilBuffer,dl),Al=ll.stencilBuffer?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,bl=getRenderTargetSamples(ll);useMultisampledRTT(ll)?fl.renderbufferStorageMultisampleEXT(F.RENDERBUFFER,bl,pl,ll.width,ll.height):cl?F.renderbufferStorageMultisample(F.RENDERBUFFER,bl,pl,ll.width,ll.height):F.renderbufferStorage(F.RENDERBUFFER,pl,ll.width,ll.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,Al,F.RENDERBUFFER,Da)}else{const Da=ll.textures;for(let hl=0;hl<Da.length;hl++){const pl=Da[hl],Al=dl.convert(pl.format,pl.colorSpace),bl=dl.convert(pl.type),kl=getInternalFormat(pl.internalFormat,Al,bl,pl.colorSpace),Dl=getRenderTargetSamples(ll);cl&&!1===useMultisampledRTT(ll)?F.renderbufferStorageMultisample(F.RENDERBUFFER,Dl,kl,ll.width,ll.height):useMultisampledRTT(ll)?fl.renderbufferStorageMultisampleEXT(F.RENDERBUFFER,Dl,kl,ll.width,ll.height):F.renderbufferStorage(F.RENDERBUFFER,kl,ll.width,ll.height)}}F.bindRenderbuffer(F.RENDERBUFFER,null)}function setupDepthRenderbuffer(Da){const hl=cl.get(Da),dl=!0===Da.isWebGLCubeRenderTarget;if(hl.__boundDepthTexture!==Da.depthTexture){const F=Da.depthTexture;if(hl.__depthDisposeCallback&&hl.__depthDisposeCallback(),F){const disposeEvent=()=>{delete hl.__boundDepthTexture,delete hl.__depthDisposeCallback,F.removeEventListener("dispose",disposeEvent)};F.addEventListener("dispose",disposeEvent),hl.__depthDisposeCallback=disposeEvent}hl.__boundDepthTexture=F}if(Da.depthTexture&&!hl.__autoAllocateDepthBuffer){if(dl)throw new Error("target.depthTexture not supported in Cube render targets");!function(Da,hl){if(hl&&hl.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(ll.bindFramebuffer(F.FRAMEBUFFER,Da),!hl.depthTexture||!hl.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");cl.get(hl.depthTexture).__webglTexture&&hl.depthTexture.image.width===hl.width&&hl.depthTexture.image.height===hl.height||(hl.depthTexture.image.width=hl.width,hl.depthTexture.image.height=hl.height,hl.depthTexture.needsUpdate=!0),setTexture2D(hl.depthTexture,0);const dl=cl.get(hl.depthTexture).__webglTexture,pl=getRenderTargetSamples(hl);if(hl.depthTexture.format===wd)useMultisampledRTT(hl)?fl.framebufferTexture2DMultisampleEXT(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,F.TEXTURE_2D,dl,0,pl):F.framebufferTexture2D(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,F.TEXTURE_2D,dl,0);else{if(hl.depthTexture.format!==Ed)throw new Error("Unknown depthTexture format");useMultisampledRTT(hl)?fl.framebufferTexture2DMultisampleEXT(F.FRAMEBUFFER,F.DEPTH_STENCIL_ATTACHMENT,F.TEXTURE_2D,dl,0,pl):F.framebufferTexture2D(F.FRAMEBUFFER,F.DEPTH_STENCIL_ATTACHMENT,F.TEXTURE_2D,dl,0)}}(hl.__webglFramebuffer,Da)}else if(dl){hl.__webglDepthbuffer=[];for(let cl=0;cl<6;cl++)if(ll.bindFramebuffer(F.FRAMEBUFFER,hl.__webglFramebuffer[cl]),void 0===hl.__webglDepthbuffer[cl])hl.__webglDepthbuffer[cl]=F.createRenderbuffer(),setupRenderBufferStorage(hl.__webglDepthbuffer[cl],Da,!1);else{const ll=Da.stencilBuffer?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,dl=hl.__webglDepthbuffer[cl];F.bindRenderbuffer(F.RENDERBUFFER,dl),F.framebufferRenderbuffer(F.FRAMEBUFFER,ll,F.RENDERBUFFER,dl)}}else if(ll.bindFramebuffer(F.FRAMEBUFFER,hl.__webglFramebuffer),void 0===hl.__webglDepthbuffer)hl.__webglDepthbuffer=F.createRenderbuffer(),setupRenderBufferStorage(hl.__webglDepthbuffer,Da,!1);else{const ll=Da.stencilBuffer?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,cl=hl.__webglDepthbuffer;F.bindRenderbuffer(F.RENDERBUFFER,cl),F.framebufferRenderbuffer(F.FRAMEBUFFER,ll,F.RENDERBUFFER,cl)}ll.bindFramebuffer(F.FRAMEBUFFER,null)}const su=[],cu=[];function getRenderTargetSamples(F){return Math.min(hl.maxSamples,F.samples)}function useMultisampledRTT(F){const ll=cl.get(F);return F.samples>0&&!0===Da.has("WEBGL_multisampled_render_to_texture")&&!1!==ll.__useRenderToTexture}function verifyColorSpace(F,Da){const ll=F.colorSpace,cl=F.format,hl=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||ll!==Ip&&ll!==kp&&(sm.getTransfer(ll)===Pp?cl===bd&&hl===ud||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ll)),Da}function getDimensions(F){return"undefined"!==typeof HTMLImageElement&&F instanceof HTMLImageElement?(bl.width=F.naturalWidth||F.width,bl.height=F.naturalHeight||F.height):"undefined"!==typeof VideoFrame&&F instanceof VideoFrame?(bl.width=F.displayWidth,bl.height=F.displayHeight):(bl.width=F.width,bl.height=F.height),bl}this.allocateTextureUnit=function(){const F=wc;return F>=hl.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+hl.maxTextures),wc+=1,F},this.resetTextureUnits=function(){wc=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function(Da,hl){const dl=cl.get(Da);Da.version>0&&dl.__version!==Da.version?uploadTexture(dl,Da,hl):ll.bindTexture(F.TEXTURE_2D_ARRAY,dl.__webglTexture,F.TEXTURE0+hl)},this.setTexture3D=function(Da,hl){const dl=cl.get(Da);Da.version>0&&dl.__version!==Da.version?uploadTexture(dl,Da,hl):ll.bindTexture(F.TEXTURE_3D,dl.__webglTexture,F.TEXTURE0+hl)},this.setTextureCube=function(Da,pl){const fl=cl.get(Da);Da.version>0&&fl.__version!==Da.version?function(Da,pl,fl){if(6!==pl.image.length)return;const Al=initTexture(Da,pl),bl=pl.source;ll.bindTexture(F.TEXTURE_CUBE_MAP,Da.__webglTexture,F.TEXTURE0+fl);const kl=cl.get(bl);if(bl.version!==kl.__version||!0===Al){ll.activeTexture(F.TEXTURE0+fl);const Da=sm.getPrimaries(sm.workingColorSpace),cl=pl.colorSpace===kp?null:sm.getPrimaries(pl.colorSpace),Dl=pl.colorSpace===kp||Da===cl?F.NONE:F.BROWSER_DEFAULT_WEBGL;F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,pl.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pl.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,pl.unpackAlignment),F.pixelStorei(F.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dl);const Wl=pl.isCompressedTexture||pl.image[0].isCompressedTexture,Ql=pl.image[0]&&pl.image[0].isDataTexture,wc=[];for(let F=0;F<6;F++)wc[F]=Wl||Ql?Ql?pl.image[F].image:pl.image[F]:resizeImage(pl.image[F],!0,hl.maxCubemapSize),wc[F]=verifyColorSpace(pl,wc[F]);const Sc=wc[0],eu=dl.convert(pl.format,pl.colorSpace),iu=dl.convert(pl.type),su=getInternalFormat(pl.internalFormat,eu,iu,pl.colorSpace),cu=!0!==pl.isVideoTexture,uu=void 0===kl.__version||!0===Al,hu=bl.dataReady;let Lu,zu=getMipLevels(pl,Sc);if(setTextureParameters(F.TEXTURE_CUBE_MAP,pl),Wl){cu&&uu&&ll.texStorage2D(F.TEXTURE_CUBE_MAP,zu,su,Sc.width,Sc.height);for(let Da=0;Da<6;Da++){Lu=wc[Da].mipmaps;for(let cl=0;cl<Lu.length;cl++){const hl=Lu[cl];pl.format!==bd?null!==eu?cu?hu&&ll.compressedTexSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl,0,0,hl.width,hl.height,eu,hl.data):ll.compressedTexImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl,su,hl.width,hl.height,0,hl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):cu?hu&&ll.texSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl,0,0,hl.width,hl.height,eu,iu,hl.data):ll.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl,su,hl.width,hl.height,0,eu,iu,hl.data)}}}else{if(Lu=pl.mipmaps,cu&&uu){Lu.length>0&&zu++;const Da=getDimensions(wc[0]);ll.texStorage2D(F.TEXTURE_CUBE_MAP,zu,su,Da.width,Da.height)}for(let Da=0;Da<6;Da++)if(Ql){cu?hu&&ll.texSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,0,0,0,wc[Da].width,wc[Da].height,eu,iu,wc[Da].data):ll.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,0,su,wc[Da].width,wc[Da].height,0,eu,iu,wc[Da].data);for(let cl=0;cl<Lu.length;cl++){const hl=Lu[cl].image[Da].image;cu?hu&&ll.texSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl+1,0,0,hl.width,hl.height,eu,iu,hl.data):ll.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl+1,su,hl.width,hl.height,0,eu,iu,hl.data)}}else{cu?hu&&ll.texSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,0,0,0,eu,iu,wc[Da]):ll.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,0,su,eu,iu,wc[Da]);for(let cl=0;cl<Lu.length;cl++){const hl=Lu[cl];cu?hu&&ll.texSubImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl+1,0,0,eu,iu,hl.image[Da]):ll.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl+1,su,eu,iu,hl.image[Da])}}}textureNeedsGenerateMipmaps(pl)&&generateMipmap(F.TEXTURE_CUBE_MAP),kl.__version=bl.version,pl.onUpdate&&pl.onUpdate(pl)}Da.__version=pl.version}(fl,Da,pl):ll.bindTexture(F.TEXTURE_CUBE_MAP,fl.__webglTexture,F.TEXTURE0+pl)},this.rebindTextures=function(Da,ll,hl){const dl=cl.get(Da);void 0!==ll&&setupFrameBufferTexture(dl.__webglFramebuffer,Da,Da.texture,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,0),void 0!==hl&&setupDepthRenderbuffer(Da)},this.setupRenderTarget=function(Da){const hl=Da.texture,fl=cl.get(Da),Al=cl.get(hl);Da.addEventListener("dispose",onRenderTargetDispose);const bl=Da.textures,kl=!0===Da.isWebGLCubeRenderTarget,Dl=bl.length>1;if(Dl||(void 0===Al.__webglTexture&&(Al.__webglTexture=F.createTexture()),Al.__version=hl.version,pl.memory.textures++),kl){fl.__webglFramebuffer=[];for(let Da=0;Da<6;Da++)if(hl.mipmaps&&hl.mipmaps.length>0){fl.__webglFramebuffer[Da]=[];for(let ll=0;ll<hl.mipmaps.length;ll++)fl.__webglFramebuffer[Da][ll]=F.createFramebuffer()}else fl.__webglFramebuffer[Da]=F.createFramebuffer()}else{if(hl.mipmaps&&hl.mipmaps.length>0){fl.__webglFramebuffer=[];for(let Da=0;Da<hl.mipmaps.length;Da++)fl.__webglFramebuffer[Da]=F.createFramebuffer()}else fl.__webglFramebuffer=F.createFramebuffer();if(Dl)for(let Da=0,ll=bl.length;Da<ll;Da++){const ll=cl.get(bl[Da]);void 0===ll.__webglTexture&&(ll.__webglTexture=F.createTexture(),pl.memory.textures++)}if(Da.samples>0&&!1===useMultisampledRTT(Da)){fl.__webglMultisampledFramebuffer=F.createFramebuffer(),fl.__webglColorRenderbuffer=[],ll.bindFramebuffer(F.FRAMEBUFFER,fl.__webglMultisampledFramebuffer);for(let ll=0;ll<bl.length;ll++){const cl=bl[ll];fl.__webglColorRenderbuffer[ll]=F.createRenderbuffer(),F.bindRenderbuffer(F.RENDERBUFFER,fl.__webglColorRenderbuffer[ll]);const hl=dl.convert(cl.format,cl.colorSpace),pl=dl.convert(cl.type),Al=getInternalFormat(cl.internalFormat,hl,pl,cl.colorSpace,!0===Da.isXRRenderTarget),kl=getRenderTargetSamples(Da);F.renderbufferStorageMultisample(F.RENDERBUFFER,kl,Al,Da.width,Da.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0+ll,F.RENDERBUFFER,fl.__webglColorRenderbuffer[ll])}F.bindRenderbuffer(F.RENDERBUFFER,null),Da.depthBuffer&&(fl.__webglDepthRenderbuffer=F.createRenderbuffer(),setupRenderBufferStorage(fl.__webglDepthRenderbuffer,Da,!0)),ll.bindFramebuffer(F.FRAMEBUFFER,null)}}if(kl){ll.bindTexture(F.TEXTURE_CUBE_MAP,Al.__webglTexture),setTextureParameters(F.TEXTURE_CUBE_MAP,hl);for(let ll=0;ll<6;ll++)if(hl.mipmaps&&hl.mipmaps.length>0)for(let cl=0;cl<hl.mipmaps.length;cl++)setupFrameBufferTexture(fl.__webglFramebuffer[ll][cl],Da,hl,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+ll,cl);else setupFrameBufferTexture(fl.__webglFramebuffer[ll],Da,hl,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+ll,0);textureNeedsGenerateMipmaps(hl)&&generateMipmap(F.TEXTURE_CUBE_MAP),ll.unbindTexture()}else if(Dl){for(let hl=0,dl=bl.length;hl<dl;hl++){const dl=bl[hl],pl=cl.get(dl);ll.bindTexture(F.TEXTURE_2D,pl.__webglTexture),setTextureParameters(F.TEXTURE_2D,dl),setupFrameBufferTexture(fl.__webglFramebuffer,Da,dl,F.COLOR_ATTACHMENT0+hl,F.TEXTURE_2D,0),textureNeedsGenerateMipmaps(dl)&&generateMipmap(F.TEXTURE_2D)}ll.unbindTexture()}else{let cl=F.TEXTURE_2D;if((Da.isWebGL3DRenderTarget||Da.isWebGLArrayRenderTarget)&&(cl=Da.isWebGL3DRenderTarget?F.TEXTURE_3D:F.TEXTURE_2D_ARRAY),ll.bindTexture(cl,Al.__webglTexture),setTextureParameters(cl,hl),hl.mipmaps&&hl.mipmaps.length>0)for(let ll=0;ll<hl.mipmaps.length;ll++)setupFrameBufferTexture(fl.__webglFramebuffer[ll],Da,hl,F.COLOR_ATTACHMENT0,cl,ll);else setupFrameBufferTexture(fl.__webglFramebuffer,Da,hl,F.COLOR_ATTACHMENT0,cl,0);textureNeedsGenerateMipmaps(hl)&&generateMipmap(cl),ll.unbindTexture()}Da.depthBuffer&&setupDepthRenderbuffer(Da)},this.updateRenderTargetMipmap=function(Da){const hl=Da.textures;for(let dl=0,pl=hl.length;dl<pl;dl++){const pl=hl[dl];if(textureNeedsGenerateMipmaps(pl)){const hl=Da.isWebGLCubeRenderTarget?F.TEXTURE_CUBE_MAP:F.TEXTURE_2D,dl=cl.get(pl).__webglTexture;ll.bindTexture(hl,dl),generateMipmap(hl),ll.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Da){if(Da.samples>0)if(!1===useMultisampledRTT(Da)){const hl=Da.textures,dl=Da.width,pl=Da.height;let fl=F.COLOR_BUFFER_BIT;const bl=Da.stencilBuffer?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT,kl=cl.get(Da),Dl=hl.length>1;if(Dl)for(let Da=0;Da<hl.length;Da++)ll.bindFramebuffer(F.FRAMEBUFFER,kl.__webglMultisampledFramebuffer),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0+Da,F.RENDERBUFFER,null),ll.bindFramebuffer(F.FRAMEBUFFER,kl.__webglFramebuffer),F.framebufferTexture2D(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0+Da,F.TEXTURE_2D,null,0);ll.bindFramebuffer(F.READ_FRAMEBUFFER,kl.__webglMultisampledFramebuffer),ll.bindFramebuffer(F.DRAW_FRAMEBUFFER,kl.__webglFramebuffer);for(let ll=0;ll<hl.length;ll++){if(Da.resolveDepthBuffer&&(Da.depthBuffer&&(fl|=F.DEPTH_BUFFER_BIT),Da.stencilBuffer&&Da.resolveStencilBuffer&&(fl|=F.STENCIL_BUFFER_BIT)),Dl){F.framebufferRenderbuffer(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.RENDERBUFFER,kl.__webglColorRenderbuffer[ll]);const Da=cl.get(hl[ll]).__webglTexture;F.framebufferTexture2D(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Da,0)}F.blitFramebuffer(0,0,dl,pl,0,0,dl,pl,fl,F.NEAREST),!0===Al&&(su.length=0,cu.length=0,su.push(F.COLOR_ATTACHMENT0+ll),Da.depthBuffer&&!1===Da.resolveDepthBuffer&&(su.push(bl),cu.push(bl),F.invalidateFramebuffer(F.DRAW_FRAMEBUFFER,cu)),F.invalidateFramebuffer(F.READ_FRAMEBUFFER,su))}if(ll.bindFramebuffer(F.READ_FRAMEBUFFER,null),ll.bindFramebuffer(F.DRAW_FRAMEBUFFER,null),Dl)for(let Da=0;Da<hl.length;Da++){ll.bindFramebuffer(F.FRAMEBUFFER,kl.__webglMultisampledFramebuffer),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0+Da,F.RENDERBUFFER,kl.__webglColorRenderbuffer[Da]);const dl=cl.get(hl[Da]).__webglTexture;ll.bindFramebuffer(F.FRAMEBUFFER,kl.__webglFramebuffer),F.framebufferTexture2D(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0+Da,F.TEXTURE_2D,dl,0)}ll.bindFramebuffer(F.DRAW_FRAMEBUFFER,kl.__webglMultisampledFramebuffer)}else if(Da.depthBuffer&&!1===Da.resolveDepthBuffer&&Al){const ll=Da.stencilBuffer?F.DEPTH_STENCIL_ATTACHMENT:F.DEPTH_ATTACHMENT;F.invalidateFramebuffer(F.DRAW_FRAMEBUFFER,[ll])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(F,Da){return{convert:function(ll,cl){let hl;void 0===cl&&(cl=kp);const dl=sm.getTransfer(cl);if(ll===ud)return F.UNSIGNED_BYTE;if(ll===yd)return F.UNSIGNED_SHORT_4_4_4_4;if(ll===vd)return F.UNSIGNED_SHORT_5_5_5_1;if(ll===xd)return F.UNSIGNED_INT_5_9_9_9_REV;if(ll===hd)return F.BYTE;if(ll===dd)return F.SHORT;if(ll===pd)return F.UNSIGNED_SHORT;if(ll===md)return F.INT;if(ll===fd)return F.UNSIGNED_INT;if(ll===gd)return F.FLOAT;if(ll===Ad)return F.HALF_FLOAT;if(1021===ll)return F.ALPHA;if(1022===ll)return F.RGB;if(ll===bd)return F.RGBA;if(1024===ll)return F.LUMINANCE;if(1025===ll)return F.LUMINANCE_ALPHA;if(ll===wd)return F.DEPTH_COMPONENT;if(ll===Ed)return F.DEPTH_STENCIL;if(ll===Md)return F.RED;if(ll===Sd)return F.RED_INTEGER;if(1030===ll)return F.RG;if(ll===kd)return F.RG_INTEGER;if(ll===Td)return F.RGBA_INTEGER;if(ll===Id||ll===Cd||ll===Ld||ll===zd)if(dl===Pp){if(hl=Da.get("WEBGL_compressed_texture_s3tc_srgb"),null===hl)return null;if(ll===Id)return hl.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ll===Cd)return hl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ll===Ld)return hl.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ll===zd)return hl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(hl=Da.get("WEBGL_compressed_texture_s3tc"),null===hl)return null;if(ll===Id)return hl.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ll===Cd)return hl.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ll===Ld)return hl.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ll===zd)return hl.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(ll===Pd||ll===Dd||ll===Rd||ll===Nd){if(hl=Da.get("WEBGL_compressed_texture_pvrtc"),null===hl)return null;if(ll===Pd)return hl.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ll===Dd)return hl.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ll===Rd)return hl.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ll===Nd)return hl.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(ll===Ud||ll===Bd||ll===Od){if(hl=Da.get("WEBGL_compressed_texture_etc"),null===hl)return null;if(ll===Ud||ll===Bd)return dl===Pp?hl.COMPRESSED_SRGB8_ETC2:hl.COMPRESSED_RGB8_ETC2;if(ll===Od)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:hl.COMPRESSED_RGBA8_ETC2_EAC}if(ll===Fd||ll===jd||ll===Vd||ll===Gd||ll===qd||ll===Hd||ll===Zd||ll===Wd||ll===Kd||ll===Qd||ll===Xd||ll===Yd||ll===Jd||ll===$d){if(hl=Da.get("WEBGL_compressed_texture_astc"),null===hl)return null;if(ll===Fd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:hl.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ll===jd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:hl.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ll===Vd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:hl.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ll===Gd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:hl.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ll===qd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:hl.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ll===Hd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:hl.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ll===Zd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:hl.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ll===Wd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:hl.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ll===Kd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:hl.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ll===Qd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:hl.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ll===Xd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:hl.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ll===Yd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:hl.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ll===Jd)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:hl.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ll===$d)return dl===Pp?hl.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:hl.COMPRESSED_RGBA_ASTC_12x12_KHR}if(ll===lp||ll===mp||ll===gp){if(hl=Da.get("EXT_texture_compression_bptc"),null===hl)return null;if(ll===lp)return dl===Pp?hl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:hl.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ll===mp)return hl.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ll===gp)return hl.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===ll||ll===Ap||ll===vp||ll===_p){if(hl=Da.get("EXT_texture_compression_rgtc"),null===hl)return null;if(ll===lp)return hl.COMPRESSED_RED_RGTC1_EXT;if(ll===Ap)return hl.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ll===vp)return hl.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ll===_p)return hl.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return ll===_d?F.UNSIGNED_INT_24_8:void 0!==F[ll]?F[ll]:null}}}class ArrayCamera extends PerspectiveCamera{constructor(F){void 0===F&&(F=[]),super(),this.isArrayCamera=!0,this.cameras=F}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Bg={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(F){return null!==this._targetRay&&this._targetRay.dispatchEvent(F),null!==this._grip&&this._grip.dispatchEvent(F),null!==this._hand&&this._hand.dispatchEvent(F),this}connect(F){if(F&&F.hand){const Da=this._hand;if(Da)for(const ll of F.hand.values())this._getHandJoint(Da,ll)}return this.dispatchEvent({type:"connected",data:F}),this}disconnect(F){return this.dispatchEvent({type:"disconnected",data:F}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(F,Da,ll){let cl=null,hl=null,dl=null;const pl=this._targetRay,fl=this._grip,Al=this._hand;if(F&&"visible-blurred"!==Da.session.visibilityState){if(Al&&F.hand){dl=!0;for(const dl of F.hand.values()){const F=Da.getJointPose(dl,ll),cl=this._getHandJoint(Al,dl);null!==F&&(cl.matrix.fromArray(F.transform.matrix),cl.matrix.decompose(cl.position,cl.rotation,cl.scale),cl.matrixWorldNeedsUpdate=!0,cl.jointRadius=F.radius),cl.visible=null!==F}const cl=Al.joints["index-finger-tip"],hl=Al.joints["thumb-tip"],pl=cl.position.distanceTo(hl.position),fl=.02,bl=.005;Al.inputState.pinching&&pl>fl+bl?(Al.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:F.handedness,target:this})):!Al.inputState.pinching&&pl<=fl-bl&&(Al.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:F.handedness,target:this}))}else null!==fl&&F.gripSpace&&(hl=Da.getPose(F.gripSpace,ll),null!==hl&&(fl.matrix.fromArray(hl.transform.matrix),fl.matrix.decompose(fl.position,fl.rotation,fl.scale),fl.matrixWorldNeedsUpdate=!0,hl.linearVelocity?(fl.hasLinearVelocity=!0,fl.linearVelocity.copy(hl.linearVelocity)):fl.hasLinearVelocity=!1,hl.angularVelocity?(fl.hasAngularVelocity=!0,fl.angularVelocity.copy(hl.angularVelocity)):fl.hasAngularVelocity=!1));null!==pl&&(cl=Da.getPose(F.targetRaySpace,ll),null===cl&&null!==hl&&(cl=hl),null!==cl&&(pl.matrix.fromArray(cl.transform.matrix),pl.matrix.decompose(pl.position,pl.rotation,pl.scale),pl.matrixWorldNeedsUpdate=!0,cl.linearVelocity?(pl.hasLinearVelocity=!0,pl.linearVelocity.copy(cl.linearVelocity)):pl.hasLinearVelocity=!1,cl.angularVelocity?(pl.hasAngularVelocity=!0,pl.angularVelocity.copy(cl.angularVelocity)):pl.hasAngularVelocity=!1,this.dispatchEvent(Bg)))}return null!==pl&&(pl.visible=null!==cl),null!==fl&&(fl.visible=null!==hl),null!==Al&&(Al.visible=null!==dl),this}_getHandJoint(F,Da){if(void 0===F.joints[Da.jointName]){const ll=new Group;ll.matrixAutoUpdate=!1,ll.visible=!1,F.joints[Da.jointName]=ll,F.add(ll)}return F.joints[Da.jointName]}}class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(F,Da,ll){if(null===this.texture){const cl=new Texture;F.properties.get(cl).__webglTexture=Da.texture,Da.depthNear==ll.depthNear&&Da.depthFar==ll.depthFar||(this.depthNear=Da.depthNear,this.depthFar=Da.depthFar),this.texture=cl}}getMesh(F){if(null!==this.texture&&null===this.mesh){const Da=F.cameras[0].viewport,ll=new ShaderMaterial({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:Da.z},depthHeight:{value:Da.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),ll)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(F,Da){super();const ll=this;let cl=null,hl=1,dl=null,pl="local-floor",fl=1,Al=null,bl=null,kl=null,Dl=null,Wl=null,Ql=null;const wc=new WebXRDepthSensing,Sc=Da.getContextAttributes();let eu=null,iu=null;const su=[],cu=[],uu=new Vector2;let hu=null;const Lu=new PerspectiveCamera;Lu.layers.enable(1),Lu.viewport=new Vector4;const zu=new PerspectiveCamera;zu.layers.enable(2),zu.viewport=new Vector4;const Du=[Lu,zu],Nu=new ArrayCamera;Nu.layers.enable(1),Nu.layers.enable(2);let qu=null,ih=null;function onSessionEvent(F){const Da=cu.indexOf(F.inputSource);if(-1===Da)return;const ll=su[Da];void 0!==ll&&(ll.update(F.inputSource,F.frame,Al||dl),ll.dispatchEvent({type:F.type,data:F.inputSource}))}function onSessionEnd(){cl.removeEventListener("select",onSessionEvent),cl.removeEventListener("selectstart",onSessionEvent),cl.removeEventListener("selectend",onSessionEvent),cl.removeEventListener("squeeze",onSessionEvent),cl.removeEventListener("squeezestart",onSessionEvent),cl.removeEventListener("squeezeend",onSessionEvent),cl.removeEventListener("end",onSessionEnd),cl.removeEventListener("inputsourceschange",onInputSourcesChange);for(let F=0;F<su.length;F++){const Da=cu[F];null!==Da&&(cu[F]=null,su[F].disconnect(Da))}qu=null,ih=null,wc.reset(),F.setRenderTarget(eu),Wl=null,Dl=null,kl=null,cl=null,iu=null,id.stop(),ll.isPresenting=!1,F.setPixelRatio(hu),F.setSize(uu.width,uu.height,!1),ll.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(F){for(let Da=0;Da<F.removed.length;Da++){const ll=F.removed[Da],cl=cu.indexOf(ll);cl>=0&&(cu[cl]=null,su[cl].disconnect(ll))}for(let Da=0;Da<F.added.length;Da++){const ll=F.added[Da];let cl=cu.indexOf(ll);if(-1===cl){for(let F=0;F<su.length;F++){if(F>=cu.length){cu.push(ll),cl=F;break}if(null===cu[F]){cu[F]=ll,cl=F;break}}if(-1===cl)break}const hl=su[cl];hl&&hl.connect(ll)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let Da=su[F];return void 0===Da&&(Da=new WebXRController,su[F]=Da),Da.getTargetRaySpace()},this.getControllerGrip=function(F){let Da=su[F];return void 0===Da&&(Da=new WebXRController,su[F]=Da),Da.getGripSpace()},this.getHand=function(F){let Da=su[F];return void 0===Da&&(Da=new WebXRController,su[F]=Da),Da.getHandSpace()},this.setFramebufferScaleFactor=function(F){hl=F,!0===ll.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){pl=F,!0===ll.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Al||dl},this.setReferenceSpace=function(F){Al=F},this.getBaseLayer=function(){return null!==Dl?Dl:Wl},this.getBinding=function(){return kl},this.getFrame=function(){return Ql},this.getSession=function(){return cl},this.setSession=async function(bl){if(cl=bl,null!==cl){if(eu=F.getRenderTarget(),cl.addEventListener("select",onSessionEvent),cl.addEventListener("selectstart",onSessionEvent),cl.addEventListener("selectend",onSessionEvent),cl.addEventListener("squeeze",onSessionEvent),cl.addEventListener("squeezestart",onSessionEvent),cl.addEventListener("squeezeend",onSessionEvent),cl.addEventListener("end",onSessionEnd),cl.addEventListener("inputsourceschange",onInputSourcesChange),!0!==Sc.xrCompatible&&await Da.makeXRCompatible(),hu=F.getPixelRatio(),F.getSize(uu),void 0===cl.renderState.layers){const ll={antialias:Sc.antialias,alpha:!0,depth:Sc.depth,stencil:Sc.stencil,framebufferScaleFactor:hl};Wl=new XRWebGLLayer(cl,Da,ll),cl.updateRenderState({baseLayer:Wl}),F.setPixelRatio(1),F.setSize(Wl.framebufferWidth,Wl.framebufferHeight,!1),iu=new WebGLRenderTarget(Wl.framebufferWidth,Wl.framebufferHeight,{format:bd,type:ud,colorSpace:F.outputColorSpace,stencilBuffer:Sc.stencil})}else{let ll=null,dl=null,pl=null;Sc.depth&&(pl=Sc.stencil?Da.DEPTH24_STENCIL8:Da.DEPTH_COMPONENT24,ll=Sc.stencil?Ed:wd,dl=Sc.stencil?_d:fd);const fl={colorFormat:Da.RGBA8,depthFormat:pl,scaleFactor:hl};kl=new XRWebGLBinding(cl,Da),Dl=kl.createProjectionLayer(fl),cl.updateRenderState({layers:[Dl]}),F.setPixelRatio(1),F.setSize(Dl.textureWidth,Dl.textureHeight,!1),iu=new WebGLRenderTarget(Dl.textureWidth,Dl.textureHeight,{format:bd,type:ud,depthTexture:new DepthTexture(Dl.textureWidth,Dl.textureHeight,dl,void 0,void 0,void 0,void 0,void 0,void 0,ll),stencilBuffer:Sc.stencil,colorSpace:F.outputColorSpace,samples:Sc.antialias?4:0,resolveDepthBuffer:!1===Dl.ignoreDepthValues})}iu.isXRRenderTarget=!0,this.setFoveation(fl),Al=null,dl=await cl.requestReferenceSpace(pl),id.setContext(cl),id.start(),ll.isPresenting=!0,ll.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==cl)return cl.environmentBlendMode},this.getDepthTexture=function(){return wc.getDepthTexture()};const gh=new Vector3,ed=new Vector3;function updateCamera(F,Da){null===Da?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(Da.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(null===cl)return;let Da=F.near,ll=F.far;null!==wc.texture&&(wc.depthNear>0&&(Da=wc.depthNear),wc.depthFar>0&&(ll=wc.depthFar)),Nu.near=zu.near=Lu.near=Da,Nu.far=zu.far=Lu.far=ll,qu===Nu.near&&ih===Nu.far||(cl.updateRenderState({depthNear:Nu.near,depthFar:Nu.far}),qu=Nu.near,ih=Nu.far);const hl=F.parent,dl=Nu.cameras;updateCamera(Nu,hl);for(let cl=0;cl<dl.length;cl++)updateCamera(dl[cl],hl);2===dl.length?function(F,Da,ll){gh.setFromMatrixPosition(Da.matrixWorld),ed.setFromMatrixPosition(ll.matrixWorld);const cl=gh.distanceTo(ed),hl=Da.projectionMatrix.elements,dl=ll.projectionMatrix.elements,pl=hl[14]/(hl[10]-1),fl=hl[14]/(hl[10]+1),Al=(hl[9]+1)/hl[5],bl=(hl[9]-1)/hl[5],kl=(hl[8]-1)/hl[0],Dl=(dl[8]+1)/dl[0],Wl=pl*kl,Ql=pl*Dl,wc=cl/(-kl+Dl),Sc=wc*-kl;if(Da.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(Sc),F.translateZ(wc),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert(),-1===hl[10])F.projectionMatrix.copy(Da.projectionMatrix),F.projectionMatrixInverse.copy(Da.projectionMatrixInverse);else{const Da=pl+wc,ll=fl+wc,hl=Wl-Sc,dl=Ql+(cl-Sc),kl=Al*fl/ll*Da,Dl=bl*fl/ll*Da;F.projectionMatrix.makePerspective(hl,dl,kl,Dl,Da,ll),F.projectionMatrixInverse.copy(F.projectionMatrix).invert()}}(Nu,Lu,zu):Nu.projectionMatrix.copy(Lu.projectionMatrix),function(F,Da,ll){null===ll?F.matrix.copy(Da.matrixWorld):(F.matrix.copy(ll.matrixWorld),F.matrix.invert(),F.matrix.multiply(Da.matrixWorld));F.matrix.decompose(F.position,F.quaternion,F.scale),F.updateMatrixWorld(!0),F.projectionMatrix.copy(Da.projectionMatrix),F.projectionMatrixInverse.copy(Da.projectionMatrixInverse),F.isPerspectiveCamera&&(F.fov=2*Jp*Math.atan(1/F.projectionMatrix.elements[5]),F.zoom=1)}(F,Nu,hl)},this.getCamera=function(){return Nu},this.getFoveation=function(){if(null!==Dl||null!==Wl)return fl},this.setFoveation=function(F){fl=F,null!==Dl&&(Dl.fixedFoveation=F),null!==Wl&&void 0!==Wl.fixedFoveation&&(Wl.fixedFoveation=F)},this.hasDepthSensing=function(){return null!==wc.texture},this.getDepthSensingMesh=function(){return wc.getMesh(Nu)};let td=null;const id=new WebGLAnimation;id.setAnimationLoop((function(Da,hl){if(bl=hl.getViewerPose(Al||dl),Ql=hl,null!==bl){const Da=bl.views;null!==Wl&&(F.setRenderTargetFramebuffer(iu,Wl.framebuffer),F.setRenderTarget(iu));let ll=!1;Da.length!==Nu.cameras.length&&(Nu.cameras.length=0,ll=!0);for(let cl=0;cl<Da.length;cl++){const hl=Da[cl];let dl=null;if(null!==Wl)dl=Wl.getViewport(hl);else{const Da=kl.getViewSubImage(Dl,hl);dl=Da.viewport,0===cl&&(F.setRenderTargetTextures(iu,Da.colorTexture,Dl.ignoreDepthValues?void 0:Da.depthStencilTexture),F.setRenderTarget(iu))}let pl=Du[cl];void 0===pl&&(pl=new PerspectiveCamera,pl.layers.enable(cl),pl.viewport=new Vector4,Du[cl]=pl),pl.matrix.fromArray(hl.transform.matrix),pl.matrix.decompose(pl.position,pl.quaternion,pl.scale),pl.projectionMatrix.fromArray(hl.projectionMatrix),pl.projectionMatrixInverse.copy(pl.projectionMatrix).invert(),pl.viewport.set(dl.x,dl.y,dl.width,dl.height),0===cl&&(Nu.matrix.copy(pl.matrix),Nu.matrix.decompose(Nu.position,Nu.quaternion,Nu.scale)),!0===ll&&Nu.cameras.push(pl)}const hl=cl.enabledFeatures;if(hl&&hl.includes("depth-sensing")){const ll=kl.getDepthInformation(Da[0]);ll&&ll.isValid&&ll.texture&&wc.init(F,ll,cl.renderState)}}for(let F=0;F<su.length;F++){const Da=cu[F],ll=su[F];null!==Da&&void 0!==ll&&ll.update(Da,hl,Al||dl)}td&&td(Da,hl),hl.detectedPlanes&&ll.dispatchEvent({type:"planesdetected",data:hl}),Ql=null})),this.setAnimationLoop=function(F){td=F},this.dispose=function(){}}}const Og=new Euler,Fg=new Matrix4;function WebGLMaterials(F,Da){function refreshTransformUniform(F,Da){!0===F.matrixAutoUpdate&&F.updateMatrix(),Da.value.copy(F.matrix)}function refreshUniformsCommon(F,ll){F.opacity.value=ll.opacity,ll.color&&F.diffuse.value.copy(ll.color),ll.emissive&&F.emissive.value.copy(ll.emissive).multiplyScalar(ll.emissiveIntensity),ll.map&&(F.map.value=ll.map,refreshTransformUniform(ll.map,F.mapTransform)),ll.alphaMap&&(F.alphaMap.value=ll.alphaMap,refreshTransformUniform(ll.alphaMap,F.alphaMapTransform)),ll.bumpMap&&(F.bumpMap.value=ll.bumpMap,refreshTransformUniform(ll.bumpMap,F.bumpMapTransform),F.bumpScale.value=ll.bumpScale,1===ll.side&&(F.bumpScale.value*=-1)),ll.normalMap&&(F.normalMap.value=ll.normalMap,refreshTransformUniform(ll.normalMap,F.normalMapTransform),F.normalScale.value.copy(ll.normalScale),1===ll.side&&F.normalScale.value.negate()),ll.displacementMap&&(F.displacementMap.value=ll.displacementMap,refreshTransformUniform(ll.displacementMap,F.displacementMapTransform),F.displacementScale.value=ll.displacementScale,F.displacementBias.value=ll.displacementBias),ll.emissiveMap&&(F.emissiveMap.value=ll.emissiveMap,refreshTransformUniform(ll.emissiveMap,F.emissiveMapTransform)),ll.specularMap&&(F.specularMap.value=ll.specularMap,refreshTransformUniform(ll.specularMap,F.specularMapTransform)),ll.alphaTest>0&&(F.alphaTest.value=ll.alphaTest);const cl=Da.get(ll),hl=cl.envMap,dl=cl.envMapRotation;hl&&(F.envMap.value=hl,Og.copy(dl),Og.x*=-1,Og.y*=-1,Og.z*=-1,hl.isCubeTexture&&!1===hl.isRenderTargetTexture&&(Og.y*=-1,Og.z*=-1),F.envMapRotation.value.setFromMatrix4(Fg.makeRotationFromEuler(Og)),F.flipEnvMap.value=hl.isCubeTexture&&!1===hl.isRenderTargetTexture?-1:1,F.reflectivity.value=ll.reflectivity,F.ior.value=ll.ior,F.refractionRatio.value=ll.refractionRatio),ll.lightMap&&(F.lightMap.value=ll.lightMap,F.lightMapIntensity.value=ll.lightMapIntensity,refreshTransformUniform(ll.lightMap,F.lightMapTransform)),ll.aoMap&&(F.aoMap.value=ll.aoMap,F.aoMapIntensity.value=ll.aoMapIntensity,refreshTransformUniform(ll.aoMap,F.aoMapTransform))}return{refreshFogUniforms:function(Da,ll){ll.color.getRGB(Da.fogColor.value,getUnlitUniformColorSpace(F)),ll.isFog?(Da.fogNear.value=ll.near,Da.fogFar.value=ll.far):ll.isFogExp2&&(Da.fogDensity.value=ll.density)},refreshMaterialUniforms:function(F,ll,cl,hl,dl){ll.isMeshBasicMaterial||ll.isMeshLambertMaterial?refreshUniformsCommon(F,ll):ll.isMeshToonMaterial?(refreshUniformsCommon(F,ll),function(F,Da){Da.gradientMap&&(F.gradientMap.value=Da.gradientMap)}(F,ll)):ll.isMeshPhongMaterial?(refreshUniformsCommon(F,ll),function(F,Da){F.specular.value.copy(Da.specular),F.shininess.value=Math.max(Da.shininess,1e-4)}(F,ll)):ll.isMeshStandardMaterial?(refreshUniformsCommon(F,ll),function(F,Da){F.metalness.value=Da.metalness,Da.metalnessMap&&(F.metalnessMap.value=Da.metalnessMap,refreshTransformUniform(Da.metalnessMap,F.metalnessMapTransform));F.roughness.value=Da.roughness,Da.roughnessMap&&(F.roughnessMap.value=Da.roughnessMap,refreshTransformUniform(Da.roughnessMap,F.roughnessMapTransform));Da.envMap&&(F.envMapIntensity.value=Da.envMapIntensity)}(F,ll),ll.isMeshPhysicalMaterial&&function(F,Da,ll){F.ior.value=Da.ior,Da.sheen>0&&(F.sheenColor.value.copy(Da.sheenColor).multiplyScalar(Da.sheen),F.sheenRoughness.value=Da.sheenRoughness,Da.sheenColorMap&&(F.sheenColorMap.value=Da.sheenColorMap,refreshTransformUniform(Da.sheenColorMap,F.sheenColorMapTransform)),Da.sheenRoughnessMap&&(F.sheenRoughnessMap.value=Da.sheenRoughnessMap,refreshTransformUniform(Da.sheenRoughnessMap,F.sheenRoughnessMapTransform)));Da.clearcoat>0&&(F.clearcoat.value=Da.clearcoat,F.clearcoatRoughness.value=Da.clearcoatRoughness,Da.clearcoatMap&&(F.clearcoatMap.value=Da.clearcoatMap,refreshTransformUniform(Da.clearcoatMap,F.clearcoatMapTransform)),Da.clearcoatRoughnessMap&&(F.clearcoatRoughnessMap.value=Da.clearcoatRoughnessMap,refreshTransformUniform(Da.clearcoatRoughnessMap,F.clearcoatRoughnessMapTransform)),Da.clearcoatNormalMap&&(F.clearcoatNormalMap.value=Da.clearcoatNormalMap,refreshTransformUniform(Da.clearcoatNormalMap,F.clearcoatNormalMapTransform),F.clearcoatNormalScale.value.copy(Da.clearcoatNormalScale),1===Da.side&&F.clearcoatNormalScale.value.negate()));Da.dispersion>0&&(F.dispersion.value=Da.dispersion);Da.iridescence>0&&(F.iridescence.value=Da.iridescence,F.iridescenceIOR.value=Da.iridescenceIOR,F.iridescenceThicknessMinimum.value=Da.iridescenceThicknessRange[0],F.iridescenceThicknessMaximum.value=Da.iridescenceThicknessRange[1],Da.iridescenceMap&&(F.iridescenceMap.value=Da.iridescenceMap,refreshTransformUniform(Da.iridescenceMap,F.iridescenceMapTransform)),Da.iridescenceThicknessMap&&(F.iridescenceThicknessMap.value=Da.iridescenceThicknessMap,refreshTransformUniform(Da.iridescenceThicknessMap,F.iridescenceThicknessMapTransform)));Da.transmission>0&&(F.transmission.value=Da.transmission,F.transmissionSamplerMap.value=ll.texture,F.transmissionSamplerSize.value.set(ll.width,ll.height),Da.transmissionMap&&(F.transmissionMap.value=Da.transmissionMap,refreshTransformUniform(Da.transmissionMap,F.transmissionMapTransform)),F.thickness.value=Da.thickness,Da.thicknessMap&&(F.thicknessMap.value=Da.thicknessMap,refreshTransformUniform(Da.thicknessMap,F.thicknessMapTransform)),F.attenuationDistance.value=Da.attenuationDistance,F.attenuationColor.value.copy(Da.attenuationColor));Da.anisotropy>0&&(F.anisotropyVector.value.set(Da.anisotropy*Math.cos(Da.anisotropyRotation),Da.anisotropy*Math.sin(Da.anisotropyRotation)),Da.anisotropyMap&&(F.anisotropyMap.value=Da.anisotropyMap,refreshTransformUniform(Da.anisotropyMap,F.anisotropyMapTransform)));F.specularIntensity.value=Da.specularIntensity,F.specularColor.value.copy(Da.specularColor),Da.specularColorMap&&(F.specularColorMap.value=Da.specularColorMap,refreshTransformUniform(Da.specularColorMap,F.specularColorMapTransform));Da.specularIntensityMap&&(F.specularIntensityMap.value=Da.specularIntensityMap,refreshTransformUniform(Da.specularIntensityMap,F.specularIntensityMapTransform))}(F,ll,dl)):ll.isMeshMatcapMaterial?(refreshUniformsCommon(F,ll),function(F,Da){Da.matcap&&(F.matcap.value=Da.matcap)}(F,ll)):ll.isMeshDepthMaterial?refreshUniformsCommon(F,ll):ll.isMeshDistanceMaterial?(refreshUniformsCommon(F,ll),function(F,ll){const cl=Da.get(ll).light;F.referencePosition.value.setFromMatrixPosition(cl.matrixWorld),F.nearDistance.value=cl.shadow.camera.near,F.farDistance.value=cl.shadow.camera.far}(F,ll)):ll.isMeshNormalMaterial?refreshUniformsCommon(F,ll):ll.isLineBasicMaterial?(function(F,Da){F.diffuse.value.copy(Da.color),F.opacity.value=Da.opacity,Da.map&&(F.map.value=Da.map,refreshTransformUniform(Da.map,F.mapTransform))}(F,ll),ll.isLineDashedMaterial&&function(F,Da){F.dashSize.value=Da.dashSize,F.totalSize.value=Da.dashSize+Da.gapSize,F.scale.value=Da.scale}(F,ll)):ll.isPointsMaterial?function(F,Da,ll,cl){F.diffuse.value.copy(Da.color),F.opacity.value=Da.opacity,F.size.value=Da.size*ll,F.scale.value=.5*cl,Da.map&&(F.map.value=Da.map,refreshTransformUniform(Da.map,F.uvTransform));Da.alphaMap&&(F.alphaMap.value=Da.alphaMap,refreshTransformUniform(Da.alphaMap,F.alphaMapTransform));Da.alphaTest>0&&(F.alphaTest.value=Da.alphaTest)}(F,ll,cl,hl):ll.isSpriteMaterial?function(F,Da){F.diffuse.value.copy(Da.color),F.opacity.value=Da.opacity,F.rotation.value=Da.rotation,Da.map&&(F.map.value=Da.map,refreshTransformUniform(Da.map,F.mapTransform));Da.alphaMap&&(F.alphaMap.value=Da.alphaMap,refreshTransformUniform(Da.alphaMap,F.alphaMapTransform));Da.alphaTest>0&&(F.alphaTest.value=Da.alphaTest)}(F,ll):ll.isShadowMaterial?(F.color.value.copy(ll.color),F.opacity.value=ll.opacity):ll.isShaderMaterial&&(ll.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(F,Da,ll,cl){let hl={},dl={},pl=[];const fl=F.getParameter(F.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(F,Da,ll,cl){const hl=F.value,dl=Da+"_"+ll;if(void 0===cl[dl])return cl[dl]="number"===typeof hl||"boolean"===typeof hl?hl:hl.clone(),!0;{const F=cl[dl];if("number"===typeof hl||"boolean"===typeof hl){if(F!==hl)return cl[dl]=hl,!0}else if(!1===F.equals(hl))return F.copy(hl),!0}return!1}function getUniformSize(F){const Da={boundary:0,storage:0};return"number"===typeof F||"boolean"===typeof F?(Da.boundary=4,Da.storage=4):F.isVector2?(Da.boundary=8,Da.storage=8):F.isVector3||F.isColor?(Da.boundary=16,Da.storage=12):F.isVector4?(Da.boundary=16,Da.storage=16):F.isMatrix3?(Da.boundary=48,Da.storage=48):F.isMatrix4?(Da.boundary=64,Da.storage=64):F.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",F),Da}function onUniformsGroupsDispose(Da){const ll=Da.target;ll.removeEventListener("dispose",onUniformsGroupsDispose);const cl=pl.indexOf(ll.__bindingPointIndex);pl.splice(cl,1),F.deleteBuffer(hl[ll.id]),delete hl[ll.id],delete dl[ll.id]}return{bind:function(F,Da){const ll=Da.program;cl.uniformBlockBinding(F,ll)},update:function(ll,Al){let bl=hl[ll.id];void 0===bl&&(!function(F){const Da=F.uniforms;let ll=0;const cl=16;for(let dl=0,pl=Da.length;dl<pl;dl++){const F=Array.isArray(Da[dl])?Da[dl]:[Da[dl]];for(let Da=0,hl=F.length;Da<hl;Da++){const hl=F[Da],dl=Array.isArray(hl.value)?hl.value:[hl.value];for(let F=0,Da=dl.length;F<Da;F++){const Da=getUniformSize(dl[F]),pl=ll%cl,fl=pl%Da.boundary,Al=pl+fl;ll+=fl,0!==Al&&cl-Al<Da.storage&&(ll+=cl-Al),hl.__data=new Float32Array(Da.storage/Float32Array.BYTES_PER_ELEMENT),hl.__offset=ll,ll+=Da.storage}}}const hl=ll%cl;hl>0&&(ll+=cl-hl);F.__size=ll,F.__cache={}}(ll),bl=function(Da){const ll=function(){for(let F=0;F<fl;F++)if(-1===pl.indexOf(F))return pl.push(F),F;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Da.__bindingPointIndex=ll;const cl=F.createBuffer(),hl=Da.__size,dl=Da.usage;return F.bindBuffer(F.UNIFORM_BUFFER,cl),F.bufferData(F.UNIFORM_BUFFER,hl,dl),F.bindBuffer(F.UNIFORM_BUFFER,null),F.bindBufferBase(F.UNIFORM_BUFFER,ll,cl),cl}(ll),hl[ll.id]=bl,ll.addEventListener("dispose",onUniformsGroupsDispose));const kl=Al.program;cl.updateUBOMapping(ll,kl);const Dl=Da.render.frame;dl[ll.id]!==Dl&&(!function(Da){const ll=hl[Da.id],cl=Da.uniforms,dl=Da.__cache;F.bindBuffer(F.UNIFORM_BUFFER,ll);for(let hl=0,pl=cl.length;hl<pl;hl++){const Da=Array.isArray(cl[hl])?cl[hl]:[cl[hl]];for(let ll=0,cl=Da.length;ll<cl;ll++){const cl=Da[ll];if(!0===hasUniformChanged(cl,hl,ll,dl)){const Da=cl.__offset,ll=Array.isArray(cl.value)?cl.value:[cl.value];let hl=0;for(let dl=0;dl<ll.length;dl++){const pl=ll[dl],fl=getUniformSize(pl);"number"===typeof pl||"boolean"===typeof pl?(cl.__data[0]=pl,F.bufferSubData(F.UNIFORM_BUFFER,Da+hl,cl.__data)):pl.isMatrix3?(cl.__data[0]=pl.elements[0],cl.__data[1]=pl.elements[1],cl.__data[2]=pl.elements[2],cl.__data[3]=0,cl.__data[4]=pl.elements[3],cl.__data[5]=pl.elements[4],cl.__data[6]=pl.elements[5],cl.__data[7]=0,cl.__data[8]=pl.elements[6],cl.__data[9]=pl.elements[7],cl.__data[10]=pl.elements[8],cl.__data[11]=0):(pl.toArray(cl.__data,hl),hl+=fl.storage/Float32Array.BYTES_PER_ELEMENT)}F.bufferSubData(F.UNIFORM_BUFFER,Da,cl.__data)}}}F.bindBuffer(F.UNIFORM_BUFFER,null)}(ll),dl[ll.id]=Dl)},dispose:function(){for(const Da in hl)F.deleteBuffer(hl[Da]);pl=[],hl={},dl={}}}}class WebGLRenderer{constructor(F){void 0===F&&(F={});const{canvas:Da=createCanvasElement(),context:ll=null,depth:hl=!0,stencil:dl=!1,alpha:pl=!1,antialias:fl=!1,premultipliedAlpha:Al=!0,preserveDrawingBuffer:bl=!1,powerPreference:kl="default",failIfMajorPerformanceCaveat:Dl=!1}=F;let Wl;if(this.isWebGLRenderer=!0,null!==ll){if("undefined"!==typeof WebGLRenderingContext&&ll instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");Wl=ll.getContextAttributes().alpha}else Wl=pl;const Ql=new Uint32Array(4),wc=new Int32Array(4);let Sc=null,eu=null;const iu=[],su=[];this.domElement=Da,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Tp,this.toneMapping=0,this.toneMappingExposure=1;const cu=this;let uu=!1,hu=0,Lu=0,zu=null,Du=-1,Nu=null;const qu=new Vector4,ih=new Vector4;let gh=null;const ed=new Color(0);let td=0,id=Da.width,nd=Da.height,rd=1,ad=null,sd=null;const od=new Vector4(0,0,id,nd),ld=new Vector4(0,0,id,nd);let hd=!1;const dd=new Frustum;let md=!1,gd=!1;const xd=new Matrix4,bd=new Vector3,wd=new Vector4,Ed={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Md=!1;function getTargetPixelRatio(){return null===zu?rd:1}let Id,Cd,Ld,zd,Pd,Dd,Rd,Nd,Ud,Bd,Od,Fd,jd,Vd,Gd,qd,Hd,Zd,Wd,Kd,Qd,Xd,Yd,Jd,$d=ll;function getContext(F,ll){return Da.getContext(F,ll)}try{const F={alpha:!0,depth:hl,stencil:dl,antialias:fl,premultipliedAlpha:Al,preserveDrawingBuffer:bl,powerPreference:kl,failIfMajorPerformanceCaveat:Dl};if("setAttribute"in Da&&Da.setAttribute("data-engine",`three.js r${cl}`),Da.addEventListener("webglcontextlost",onContextLost,!1),Da.addEventListener("webglcontextrestored",onContextRestore,!1),Da.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===$d){const Da="webgl2";if($d=getContext(Da,F),null===$d)throw getContext(Da)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ap){throw console.error("THREE.WebGLRenderer: "+Ap.message),Ap}function initGLContext(){Id=new WebGLExtensions($d),Id.init(),Xd=new WebGLUtils($d,Id),Cd=new WebGLCapabilities($d,Id,F,Xd),Ld=new WebGLState($d),zd=new WebGLInfo($d),Pd=new WebGLProperties,Dd=new WebGLTextures($d,Id,Ld,Pd,Cd,Xd,zd),Rd=new WebGLCubeMaps(cu),Nd=new WebGLCubeUVMaps(cu),Ud=new WebGLAttributes($d),Yd=new WebGLBindingStates($d,Ud),Bd=new WebGLGeometries($d,Ud,zd,Yd),Od=new WebGLObjects($d,Bd,Ud,zd),Wd=new WebGLMorphtargets($d,Cd,Dd),qd=new WebGLClipping(Pd),Fd=new WebGLPrograms(cu,Rd,Nd,Id,Cd,Yd,qd),jd=new WebGLMaterials(cu,Pd),Vd=new WebGLRenderLists,Gd=new WebGLRenderStates(Id),Zd=new WebGLBackground(cu,Rd,Nd,Ld,Od,Wl,Al),Hd=new WebGLShadowMap(cu,Od,Cd),Jd=new WebGLUniformsGroups($d,zd,Cd,Ld),Kd=new WebGLBufferRenderer($d,Id,zd),Qd=new WebGLIndexedBufferRenderer($d,Id,zd),zd.programs=Fd.programs,cu.capabilities=Cd,cu.extensions=Id,cu.properties=Pd,cu.renderLists=Vd,cu.shadowMap=Hd,cu.state=Ld,cu.info=zd}initGLContext();const lp=new WebXRManager(cu,$d);function onContextLost(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),uu=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),uu=!1;const F=zd.autoReset,Da=Hd.enabled,ll=Hd.autoUpdate,cl=Hd.needsUpdate,hl=Hd.type;initGLContext(),zd.autoReset=F,Hd.enabled=Da,Hd.autoUpdate=ll,Hd.needsUpdate=cl,Hd.type=hl}function onContextCreationError(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function onMaterialDispose(F){const Da=F.target;Da.removeEventListener("dispose",onMaterialDispose),function(F){(function(F){const Da=Pd.get(F).programs;void 0!==Da&&(Da.forEach((function(F){Fd.releaseProgram(F)})),F.isShaderMaterial&&Fd.releaseShaderCache(F))})(F),Pd.remove(F)}(Da)}function prepareMaterial(F,Da,ll){!0===F.transparent&&2===F.side&&!1===F.forceSinglePass?(F.side=1,F.needsUpdate=!0,getProgram(F,Da,ll),F.side=0,F.needsUpdate=!0,getProgram(F,Da,ll),F.side=2):getProgram(F,Da,ll)}this.xr=lp,this.getContext=function(){return $d},this.getContextAttributes=function(){return $d.getContextAttributes()},this.forceContextLoss=function(){const F=Id.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Id.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return rd},this.setPixelRatio=function(F){void 0!==F&&(rd=F,this.setSize(id,nd,!1))},this.getSize=function(F){return F.set(id,nd)},this.setSize=function(F,ll,cl){void 0===cl&&(cl=!0),lp.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(id=F,nd=ll,Da.width=Math.floor(F*rd),Da.height=Math.floor(ll*rd),!0===cl&&(Da.style.width=F+"px",Da.style.height=ll+"px"),this.setViewport(0,0,F,ll))},this.getDrawingBufferSize=function(F){return F.set(id*rd,nd*rd).floor()},this.setDrawingBufferSize=function(F,ll,cl){id=F,nd=ll,rd=cl,Da.width=Math.floor(F*cl),Da.height=Math.floor(ll*cl),this.setViewport(0,0,F,ll)},this.getCurrentViewport=function(F){return F.copy(qu)},this.getViewport=function(F){return F.copy(od)},this.setViewport=function(F,Da,ll,cl){F.isVector4?od.set(F.x,F.y,F.z,F.w):od.set(F,Da,ll,cl),Ld.viewport(qu.copy(od).multiplyScalar(rd).round())},this.getScissor=function(F){return F.copy(ld)},this.setScissor=function(F,Da,ll,cl){F.isVector4?ld.set(F.x,F.y,F.z,F.w):ld.set(F,Da,ll,cl),Ld.scissor(ih.copy(ld).multiplyScalar(rd).round())},this.getScissorTest=function(){return hd},this.setScissorTest=function(F){Ld.setScissorTest(hd=F)},this.setOpaqueSort=function(F){ad=F},this.setTransparentSort=function(F){sd=F},this.getClearColor=function(F){return F.copy(Zd.getClearColor())},this.setClearColor=function(){Zd.setClearColor.apply(Zd,arguments)},this.getClearAlpha=function(){return Zd.getClearAlpha()},this.setClearAlpha=function(){Zd.setClearAlpha.apply(Zd,arguments)},this.clear=function(F,Da,ll){void 0===F&&(F=!0),void 0===Da&&(Da=!0),void 0===ll&&(ll=!0);let cl=0;if(F){let F=!1;if(null!==zu){const Da=zu.texture.format;F=Da===Td||Da===kd||Da===Sd}if(F){const F=zu.texture.type,Da=F===ud||F===fd||F===pd||F===_d||F===yd||F===vd,ll=Zd.getClearColor(),cl=Zd.getClearAlpha(),hl=ll.r,dl=ll.g,pl=ll.b;Da?(Ql[0]=hl,Ql[1]=dl,Ql[2]=pl,Ql[3]=cl,$d.clearBufferuiv($d.COLOR,0,Ql)):(wc[0]=hl,wc[1]=dl,wc[2]=pl,wc[3]=cl,$d.clearBufferiv($d.COLOR,0,wc))}else cl|=$d.COLOR_BUFFER_BIT}Da&&(cl|=$d.DEPTH_BUFFER_BIT),ll&&(cl|=$d.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$d.clear(cl)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){Da.removeEventListener("webglcontextlost",onContextLost,!1),Da.removeEventListener("webglcontextrestored",onContextRestore,!1),Da.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),Vd.dispose(),Gd.dispose(),Pd.dispose(),Rd.dispose(),Nd.dispose(),Od.dispose(),Yd.dispose(),Jd.dispose(),Fd.dispose(),lp.dispose(),lp.removeEventListener("sessionstart",onXRSessionStart),lp.removeEventListener("sessionend",onXRSessionEnd),gp.stop()},this.renderBufferDirect=function(F,Da,ll,cl,hl,dl){null===Da&&(Da=Ed);const pl=hl.isMesh&&hl.matrixWorld.determinant()<0,fl=function(F,Da,ll,cl,hl){!0!==Da.isScene&&(Da=Ed);Dd.resetTextureUnits();const dl=Da.fog,pl=cl.isMeshStandardMaterial?Da.environment:null,fl=null===zu?cu.outputColorSpace:!0===zu.isXRRenderTarget?zu.texture.colorSpace:Ip,Al=(cl.isMeshStandardMaterial?Nd:Rd).get(cl.envMap||pl),bl=!0===cl.vertexColors&&!!ll.attributes.color&&4===ll.attributes.color.itemSize,kl=!!ll.attributes.tangent&&(!!cl.normalMap||cl.anisotropy>0),Dl=!!ll.morphAttributes.position,Wl=!!ll.morphAttributes.normal,Ql=!!ll.morphAttributes.color;let wc=0;cl.toneMapped&&(null!==zu&&!0!==zu.isXRRenderTarget||(wc=cu.toneMapping));const Sc=ll.morphAttributes.position||ll.morphAttributes.normal||ll.morphAttributes.color,iu=void 0!==Sc?Sc.length:0,su=Pd.get(cl),uu=eu.state.lights;if(!0===md&&(!0===gd||F!==Nu)){const Da=F===Nu&&cl.id===Du;qd.setState(cl,F,Da)}let hu=!1;cl.version===su.__version?su.needsLights&&su.lightsStateVersion!==uu.state.version||su.outputColorSpace!==fl||hl.isBatchedMesh&&!1===su.batching?hu=!0:hl.isBatchedMesh||!0!==su.batching?hl.isBatchedMesh&&!0===su.batchingColor&&null===hl.colorTexture||hl.isBatchedMesh&&!1===su.batchingColor&&null!==hl.colorTexture||hl.isInstancedMesh&&!1===su.instancing?hu=!0:hl.isInstancedMesh||!0!==su.instancing?hl.isSkinnedMesh&&!1===su.skinning?hu=!0:hl.isSkinnedMesh||!0!==su.skinning?hl.isInstancedMesh&&!0===su.instancingColor&&null===hl.instanceColor||hl.isInstancedMesh&&!1===su.instancingColor&&null!==hl.instanceColor||hl.isInstancedMesh&&!0===su.instancingMorph&&null===hl.morphTexture||hl.isInstancedMesh&&!1===su.instancingMorph&&null!==hl.morphTexture||su.envMap!==Al||!0===cl.fog&&su.fog!==dl?hu=!0:void 0===su.numClippingPlanes||su.numClippingPlanes===qd.numPlanes&&su.numIntersection===qd.numIntersection?(su.vertexAlphas!==bl||su.vertexTangents!==kl||su.morphTargets!==Dl||su.morphNormals!==Wl||su.morphColors!==Ql||su.toneMapping!==wc||su.morphTargetsCount!==iu)&&(hu=!0):hu=!0:hu=!0:hu=!0:hu=!0:(hu=!0,su.__version=cl.version);let Lu=su.currentProgram;!0===hu&&(Lu=getProgram(cl,Da,hl));let qu=!1,ih=!1,gh=!1;const ed=Lu.getUniforms(),td=su.uniforms;Ld.useProgram(Lu.program)&&(qu=!0,ih=!0,gh=!0);cl.id!==Du&&(Du=cl.id,ih=!0);if(qu||Nu!==F){ed.setValue($d,"projectionMatrix",F.projectionMatrix),ed.setValue($d,"viewMatrix",F.matrixWorldInverse);const Da=ed.map.cameraPosition;void 0!==Da&&Da.setValue($d,bd.setFromMatrixPosition(F.matrixWorld)),Cd.logarithmicDepthBuffer&&ed.setValue($d,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(cl.isMeshPhongMaterial||cl.isMeshToonMaterial||cl.isMeshLambertMaterial||cl.isMeshBasicMaterial||cl.isMeshStandardMaterial||cl.isShaderMaterial)&&ed.setValue($d,"isOrthographic",!0===F.isOrthographicCamera),Nu!==F&&(Nu=F,ih=!0,gh=!0)}if(hl.isSkinnedMesh){ed.setOptional($d,hl,"bindMatrix"),ed.setOptional($d,hl,"bindMatrixInverse");const F=hl.skeleton;F&&(null===F.boneTexture&&F.computeBoneTexture(),ed.setValue($d,"boneTexture",F.boneTexture,Dd))}hl.isBatchedMesh&&(ed.setOptional($d,hl,"batchingTexture"),ed.setValue($d,"batchingTexture",hl._matricesTexture,Dd),ed.setOptional($d,hl,"batchingIdTexture"),ed.setValue($d,"batchingIdTexture",hl._indirectTexture,Dd),ed.setOptional($d,hl,"batchingColorTexture"),null!==hl._colorsTexture&&ed.setValue($d,"batchingColorTexture",hl._colorsTexture,Dd));const id=ll.morphAttributes;void 0===id.position&&void 0===id.normal&&void 0===id.color||Wd.update(hl,ll,Lu);(ih||su.receiveShadow!==hl.receiveShadow)&&(su.receiveShadow=hl.receiveShadow,ed.setValue($d,"receiveShadow",hl.receiveShadow));cl.isMeshGouraudMaterial&&null!==cl.envMap&&(td.envMap.value=Al,td.flipEnvMap.value=Al.isCubeTexture&&!1===Al.isRenderTargetTexture?-1:1);cl.isMeshStandardMaterial&&null===cl.envMap&&null!==Da.environment&&(td.envMapIntensity.value=Da.environmentIntensity);ih&&(ed.setValue($d,"toneMappingExposure",cu.toneMappingExposure),su.needsLights&&(sd=gh,(ad=td).ambientLightColor.needsUpdate=sd,ad.lightProbe.needsUpdate=sd,ad.directionalLights.needsUpdate=sd,ad.directionalLightShadows.needsUpdate=sd,ad.pointLights.needsUpdate=sd,ad.pointLightShadows.needsUpdate=sd,ad.spotLights.needsUpdate=sd,ad.spotLightShadows.needsUpdate=sd,ad.rectAreaLights.needsUpdate=sd,ad.hemisphereLights.needsUpdate=sd),dl&&!0===cl.fog&&jd.refreshFogUniforms(td,dl),jd.refreshMaterialUniforms(td,cl,rd,nd,eu.state.transmissionRenderTarget[F.id]),WebGLUniforms.upload($d,getUniformList(su),td,Dd));var ad,sd;cl.isShaderMaterial&&!0===cl.uniformsNeedUpdate&&(WebGLUniforms.upload($d,getUniformList(su),td,Dd),cl.uniformsNeedUpdate=!1);cl.isSpriteMaterial&&ed.setValue($d,"center",hl.center);if(ed.setValue($d,"modelViewMatrix",hl.modelViewMatrix),ed.setValue($d,"normalMatrix",hl.normalMatrix),ed.setValue($d,"modelMatrix",hl.matrixWorld),cl.isShaderMaterial||cl.isRawShaderMaterial){const F=cl.uniformsGroups;for(let Da=0,ll=F.length;Da<ll;Da++){const ll=F[Da];Jd.update(ll,Lu),Jd.bind(ll,Lu)}}return Lu}(F,Da,ll,cl,hl);Ld.setMaterial(cl,pl);let Al=ll.index,bl=1;if(!0===cl.wireframe){if(Al=Bd.getWireframeAttribute(ll),void 0===Al)return;bl=2}const kl=ll.drawRange,Dl=ll.attributes.position;let Wl=kl.start*bl,Ql=(kl.start+kl.count)*bl;null!==dl&&(Wl=Math.max(Wl,dl.start*bl),Ql=Math.min(Ql,(dl.start+dl.count)*bl)),null!==Al?(Wl=Math.max(Wl,0),Ql=Math.min(Ql,Al.count)):void 0!==Dl&&null!==Dl&&(Wl=Math.max(Wl,0),Ql=Math.min(Ql,Dl.count));const wc=Ql-Wl;if(wc<0||wc===1/0)return;let Sc;Yd.setup(hl,cl,fl,ll,Al);let iu=Kd;if(null!==Al&&(Sc=Ud.get(Al),iu=Qd,iu.setIndex(Sc)),hl.isMesh)!0===cl.wireframe?(Ld.setLineWidth(cl.wireframeLinewidth*getTargetPixelRatio()),iu.setMode($d.LINES)):iu.setMode($d.TRIANGLES);else if(hl.isLine){let F=cl.linewidth;void 0===F&&(F=1),Ld.setLineWidth(F*getTargetPixelRatio()),hl.isLineSegments?iu.setMode($d.LINES):hl.isLineLoop?iu.setMode($d.LINE_LOOP):iu.setMode($d.LINE_STRIP)}else hl.isPoints?iu.setMode($d.POINTS):hl.isSprite&&iu.setMode($d.TRIANGLES);if(hl.isBatchedMesh)if(null!==hl._multiDrawInstances)iu.renderMultiDrawInstances(hl._multiDrawStarts,hl._multiDrawCounts,hl._multiDrawCount,hl._multiDrawInstances);else if(Id.get("WEBGL_multi_draw"))iu.renderMultiDraw(hl._multiDrawStarts,hl._multiDrawCounts,hl._multiDrawCount);else{const F=hl._multiDrawStarts,Da=hl._multiDrawCounts,ll=hl._multiDrawCount,dl=Al?Ud.get(Al).bytesPerElement:1,pl=Pd.get(cl).currentProgram.getUniforms();for(let cl=0;cl<ll;cl++)pl.setValue($d,"_gl_DrawID",cl),iu.render(F[cl]/dl,Da[cl])}else if(hl.isInstancedMesh)iu.renderInstances(Wl,wc,hl.count);else if(ll.isInstancedBufferGeometry){const F=void 0!==ll._maxInstanceCount?ll._maxInstanceCount:1/0,Da=Math.min(ll.instanceCount,F);iu.renderInstances(Wl,wc,Da)}else iu.render(Wl,wc)},this.compile=function(F,Da,ll){void 0===ll&&(ll=null),null===ll&&(ll=F),eu=Gd.get(ll),eu.init(Da),su.push(eu),ll.traverseVisible((function(F){F.isLight&&F.layers.test(Da.layers)&&(eu.pushLight(F),F.castShadow&&eu.pushShadow(F))})),F!==ll&&F.traverseVisible((function(F){F.isLight&&F.layers.test(Da.layers)&&(eu.pushLight(F),F.castShadow&&eu.pushShadow(F))})),eu.setupLights();const cl=new Set;return F.traverse((function(F){const Da=F.material;if(Da)if(Array.isArray(Da))for(let hl=0;hl<Da.length;hl++){const dl=Da[hl];prepareMaterial(dl,ll,F),cl.add(dl)}else prepareMaterial(Da,ll,F),cl.add(Da)})),su.pop(),eu=null,cl},this.compileAsync=function(F,Da,ll){void 0===ll&&(ll=null);const cl=this.compile(F,Da,ll);return new Promise((Da=>{function checkMaterialsReady(){cl.forEach((function(F){Pd.get(F).currentProgram.isReady()&&cl.delete(F)})),0!==cl.size?setTimeout(checkMaterialsReady,10):Da(F)}null!==Id.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)}))};let mp=null;function onXRSessionStart(){gp.stop()}function onXRSessionEnd(){gp.start()}const gp=new WebGLAnimation;function projectObject(F,Da,ll,cl){if(!1===F.visible)return;if(F.layers.test(Da.layers))if(F.isGroup)ll=F.renderOrder;else if(F.isLOD)!0===F.autoUpdate&&F.update(Da);else if(F.isLight)eu.pushLight(F),F.castShadow&&eu.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||dd.intersectsSprite(F)){cl&&wd.setFromMatrixPosition(F.matrixWorld).applyMatrix4(xd);const Da=Od.update(F),hl=F.material;hl.visible&&Sc.push(F,Da,hl,ll,wd.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||dd.intersectsObject(F))){const Da=Od.update(F),hl=F.material;if(cl&&(void 0!==F.boundingSphere?(null===F.boundingSphere&&F.computeBoundingSphere(),wd.copy(F.boundingSphere.center)):(null===Da.boundingSphere&&Da.computeBoundingSphere(),wd.copy(Da.boundingSphere.center)),wd.applyMatrix4(F.matrixWorld).applyMatrix4(xd)),Array.isArray(hl)){const cl=Da.groups;for(let dl=0,pl=cl.length;dl<pl;dl++){const pl=cl[dl],fl=hl[pl.materialIndex];fl&&fl.visible&&Sc.push(F,Da,fl,ll,wd.z,pl)}}else hl.visible&&Sc.push(F,Da,hl,ll,wd.z,null)}const hl=F.children;for(let dl=0,pl=hl.length;dl<pl;dl++)projectObject(hl[dl],Da,ll,cl)}function renderScene(F,Da,ll,cl){const hl=F.opaque,dl=F.transmissive,pl=F.transparent;eu.setupLightsView(ll),!0===md&&qd.setGlobalState(cu.clippingPlanes,ll),cl&&Ld.viewport(qu.copy(cl)),hl.length>0&&renderObjects(hl,Da,ll),dl.length>0&&renderObjects(dl,Da,ll),pl.length>0&&renderObjects(pl,Da,ll),Ld.buffers.depth.setTest(!0),Ld.buffers.depth.setMask(!0),Ld.buffers.color.setMask(!0),Ld.setPolygonOffset(!1)}function renderTransmissionPass(F,Da,ll,cl){if(null!==(!0===ll.isScene?ll.overrideMaterial:null))return;void 0===eu.state.transmissionRenderTarget[cl.id]&&(eu.state.transmissionRenderTarget[cl.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Id.has("EXT_color_buffer_half_float")||Id.has("EXT_color_buffer_float")?Ad:ud,minFilter:cd,samples:4,stencilBuffer:dl,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:sm.workingColorSpace}));const hl=eu.state.transmissionRenderTarget[cl.id],pl=cl.viewport||qu;hl.setSize(pl.z,pl.w);const fl=cu.getRenderTarget();cu.setRenderTarget(hl),cu.getClearColor(ed),td=cu.getClearAlpha(),td<1&&cu.setClearColor(16777215,.5),cu.clear(),Md&&Zd.render(ll);const Al=cu.toneMapping;cu.toneMapping=0;const bl=cl.viewport;if(void 0!==cl.viewport&&(cl.viewport=void 0),eu.setupLightsView(cl),!0===md&&qd.setGlobalState(cu.clippingPlanes,cl),renderObjects(F,ll,cl),Dd.updateMultisampleRenderTarget(hl),Dd.updateRenderTargetMipmap(hl),!1===Id.has("WEBGL_multisampled_render_to_texture")){let F=!1;for(let hl=0,dl=Da.length;hl<dl;hl++){const dl=Da[hl],pl=dl.object,fl=dl.geometry,Al=dl.material,bl=dl.group;if(2===Al.side&&pl.layers.test(cl.layers)){const Da=Al.side;Al.side=1,Al.needsUpdate=!0,renderObject(pl,ll,cl,fl,Al,bl),Al.side=Da,Al.needsUpdate=!0,F=!0}}!0===F&&(Dd.updateMultisampleRenderTarget(hl),Dd.updateRenderTargetMipmap(hl))}cu.setRenderTarget(fl),cu.setClearColor(ed,td),void 0!==bl&&(cl.viewport=bl),cu.toneMapping=Al}function renderObjects(F,Da,ll){const cl=!0===Da.isScene?Da.overrideMaterial:null;for(let hl=0,dl=F.length;hl<dl;hl++){const dl=F[hl],pl=dl.object,fl=dl.geometry,Al=null===cl?dl.material:cl,bl=dl.group;pl.layers.test(ll.layers)&&renderObject(pl,Da,ll,fl,Al,bl)}}function renderObject(F,Da,ll,cl,hl,dl){F.onBeforeRender(cu,Da,ll,cl,hl,dl),F.modelViewMatrix.multiplyMatrices(ll.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),hl.onBeforeRender(cu,Da,ll,cl,F,dl),!0===hl.transparent&&2===hl.side&&!1===hl.forceSinglePass?(hl.side=1,hl.needsUpdate=!0,cu.renderBufferDirect(ll,Da,cl,hl,F,dl),hl.side=0,hl.needsUpdate=!0,cu.renderBufferDirect(ll,Da,cl,hl,F,dl),hl.side=2):cu.renderBufferDirect(ll,Da,cl,hl,F,dl),F.onAfterRender(cu,Da,ll,cl,hl,dl)}function getProgram(F,Da,ll){!0!==Da.isScene&&(Da=Ed);const cl=Pd.get(F),hl=eu.state.lights,dl=eu.state.shadowsArray,pl=hl.state.version,fl=Fd.getParameters(F,hl.state,dl,Da,ll),Al=Fd.getProgramCacheKey(fl);let bl=cl.programs;cl.environment=F.isMeshStandardMaterial?Da.environment:null,cl.fog=Da.fog,cl.envMap=(F.isMeshStandardMaterial?Nd:Rd).get(F.envMap||cl.environment),cl.envMapRotation=null!==cl.environment&&null===F.envMap?Da.environmentRotation:F.envMapRotation,void 0===bl&&(F.addEventListener("dispose",onMaterialDispose),bl=new Map,cl.programs=bl);let kl=bl.get(Al);if(void 0!==kl){if(cl.currentProgram===kl&&cl.lightsStateVersion===pl)return updateCommonMaterialProperties(F,fl),kl}else fl.uniforms=Fd.getUniforms(F),F.onBeforeCompile(fl,cu),kl=Fd.acquireProgram(fl,Al),bl.set(Al,kl),cl.uniforms=fl.uniforms;const Dl=cl.uniforms;return(F.isShaderMaterial||F.isRawShaderMaterial)&&!0!==F.clipping||(Dl.clippingPlanes=qd.uniform),updateCommonMaterialProperties(F,fl),cl.needsLights=function(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&!0===F.lights}(F),cl.lightsStateVersion=pl,cl.needsLights&&(Dl.ambientLightColor.value=hl.state.ambient,Dl.lightProbe.value=hl.state.probe,Dl.directionalLights.value=hl.state.directional,Dl.directionalLightShadows.value=hl.state.directionalShadow,Dl.spotLights.value=hl.state.spot,Dl.spotLightShadows.value=hl.state.spotShadow,Dl.rectAreaLights.value=hl.state.rectArea,Dl.ltc_1.value=hl.state.rectAreaLTC1,Dl.ltc_2.value=hl.state.rectAreaLTC2,Dl.pointLights.value=hl.state.point,Dl.pointLightShadows.value=hl.state.pointShadow,Dl.hemisphereLights.value=hl.state.hemi,Dl.directionalShadowMap.value=hl.state.directionalShadowMap,Dl.directionalShadowMatrix.value=hl.state.directionalShadowMatrix,Dl.spotShadowMap.value=hl.state.spotShadowMap,Dl.spotLightMatrix.value=hl.state.spotLightMatrix,Dl.spotLightMap.value=hl.state.spotLightMap,Dl.pointShadowMap.value=hl.state.pointShadowMap,Dl.pointShadowMatrix.value=hl.state.pointShadowMatrix),cl.currentProgram=kl,cl.uniformsList=null,kl}function getUniformList(F){if(null===F.uniformsList){const Da=F.currentProgram.getUniforms();F.uniformsList=WebGLUniforms.seqWithValue(Da.seq,F.uniforms)}return F.uniformsList}function updateCommonMaterialProperties(F,Da){const ll=Pd.get(F);ll.outputColorSpace=Da.outputColorSpace,ll.batching=Da.batching,ll.batchingColor=Da.batchingColor,ll.instancing=Da.instancing,ll.instancingColor=Da.instancingColor,ll.instancingMorph=Da.instancingMorph,ll.skinning=Da.skinning,ll.morphTargets=Da.morphTargets,ll.morphNormals=Da.morphNormals,ll.morphColors=Da.morphColors,ll.morphTargetsCount=Da.morphTargetsCount,ll.numClippingPlanes=Da.numClippingPlanes,ll.numIntersection=Da.numClipIntersection,ll.vertexAlphas=Da.vertexAlphas,ll.vertexTangents=Da.vertexTangents,ll.toneMapping=Da.toneMapping}gp.setAnimationLoop((function(F){mp&&mp(F)})),"undefined"!==typeof self&&gp.setContext(self),this.setAnimationLoop=function(F){mp=F,lp.setAnimationLoop(F),null===F?gp.stop():gp.start()},lp.addEventListener("sessionstart",onXRSessionStart),lp.addEventListener("sessionend",onXRSessionEnd),this.render=function(F,Da){if(void 0!==Da&&!0!==Da.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===uu)return;if(!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===Da.parent&&!0===Da.matrixWorldAutoUpdate&&Da.updateMatrixWorld(),!0===lp.enabled&&!0===lp.isPresenting&&(!0===lp.cameraAutoUpdate&&lp.updateCamera(Da),Da=lp.getCamera()),!0===F.isScene&&F.onBeforeRender(cu,F,Da,zu),eu=Gd.get(F,su.length),eu.init(Da),su.push(eu),xd.multiplyMatrices(Da.projectionMatrix,Da.matrixWorldInverse),dd.setFromProjectionMatrix(xd),gd=this.localClippingEnabled,md=qd.init(this.clippingPlanes,gd),Sc=Vd.get(F,iu.length),Sc.init(),iu.push(Sc),!0===lp.enabled&&!0===lp.isPresenting){const F=cu.xr.getDepthSensingMesh();null!==F&&projectObject(F,Da,-1/0,cu.sortObjects)}projectObject(F,Da,0,cu.sortObjects),Sc.finish(),!0===cu.sortObjects&&Sc.sort(ad,sd),Md=!1===lp.enabled||!1===lp.isPresenting||!1===lp.hasDepthSensing(),Md&&Zd.addToRenderList(Sc,F),this.info.render.frame++,!0===md&&qd.beginShadows();const ll=eu.state.shadowsArray;Hd.render(ll,F,Da),!0===md&&qd.endShadows(),!0===this.info.autoReset&&this.info.reset();const cl=Sc.opaque,hl=Sc.transmissive;if(eu.setupLights(),Da.isArrayCamera){const ll=Da.cameras;if(hl.length>0)for(let Da=0,dl=ll.length;Da<dl;Da++){renderTransmissionPass(cl,hl,F,ll[Da])}Md&&Zd.render(F);for(let Da=0,cl=ll.length;Da<cl;Da++){const cl=ll[Da];renderScene(Sc,F,cl,cl.viewport)}}else hl.length>0&&renderTransmissionPass(cl,hl,F,Da),Md&&Zd.render(F),renderScene(Sc,F,Da);null!==zu&&(Dd.updateMultisampleRenderTarget(zu),Dd.updateRenderTargetMipmap(zu)),!0===F.isScene&&F.onAfterRender(cu,F,Da),Yd.resetDefaultState(),Du=-1,Nu=null,su.pop(),su.length>0?(eu=su[su.length-1],!0===md&&qd.setGlobalState(cu.clippingPlanes,eu.state.camera)):eu=null,iu.pop(),Sc=iu.length>0?iu[iu.length-1]:null},this.getActiveCubeFace=function(){return hu},this.getActiveMipmapLevel=function(){return Lu},this.getRenderTarget=function(){return zu},this.setRenderTargetTextures=function(F,Da,ll){Pd.get(F.texture).__webglTexture=Da,Pd.get(F.depthTexture).__webglTexture=ll;const cl=Pd.get(F);cl.__hasExternalTextures=!0,cl.__autoAllocateDepthBuffer=void 0===ll,cl.__autoAllocateDepthBuffer||!0===Id.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),cl.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,Da){const ll=Pd.get(F);ll.__webglFramebuffer=Da,ll.__useDefaultFramebuffer=void 0===Da},this.setRenderTarget=function(F,Da,ll){void 0===Da&&(Da=0),void 0===ll&&(ll=0),zu=F,hu=Da,Lu=ll;let cl=!0,hl=null,dl=!1,pl=!1;if(F){const fl=Pd.get(F);if(void 0!==fl.__useDefaultFramebuffer)Ld.bindFramebuffer($d.FRAMEBUFFER,null),cl=!1;else if(void 0===fl.__webglFramebuffer)Dd.setupRenderTarget(F);else if(fl.__hasExternalTextures)Dd.rebindTextures(F,Pd.get(F.texture).__webglTexture,Pd.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const Da=F.depthTexture;if(fl.__boundDepthTexture!==Da){if(null!==Da&&Pd.has(Da)&&(F.width!==Da.image.width||F.height!==Da.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Dd.setupDepthRenderbuffer(F)}}const Al=F.texture;(Al.isData3DTexture||Al.isDataArrayTexture||Al.isCompressedArrayTexture)&&(pl=!0);const bl=Pd.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(hl=Array.isArray(bl[Da])?bl[Da][ll]:bl[Da],dl=!0):hl=F.samples>0&&!1===Dd.useMultisampledRTT(F)?Pd.get(F).__webglMultisampledFramebuffer:Array.isArray(bl)?bl[ll]:bl,qu.copy(F.viewport),ih.copy(F.scissor),gh=F.scissorTest}else qu.copy(od).multiplyScalar(rd).floor(),ih.copy(ld).multiplyScalar(rd).floor(),gh=hd;if(Ld.bindFramebuffer($d.FRAMEBUFFER,hl)&&cl&&Ld.drawBuffers(F,hl),Ld.viewport(qu),Ld.scissor(ih),Ld.setScissorTest(gh),dl){const cl=Pd.get(F.texture);$d.framebufferTexture2D($d.FRAMEBUFFER,$d.COLOR_ATTACHMENT0,$d.TEXTURE_CUBE_MAP_POSITIVE_X+Da,cl.__webglTexture,ll)}else if(pl){const cl=Pd.get(F.texture),hl=Da||0;$d.framebufferTextureLayer($d.FRAMEBUFFER,$d.COLOR_ATTACHMENT0,cl.__webglTexture,ll||0,hl)}Du=-1},this.readRenderTargetPixels=function(F,Da,ll,cl,hl,dl,pl){if(!F||!F.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fl=Pd.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==pl&&(fl=fl[pl]),fl){Ld.bindFramebuffer($d.FRAMEBUFFER,fl);try{const pl=F.texture,fl=pl.format,Al=pl.type;if(!Cd.textureFormatReadable(fl))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Cd.textureTypeReadable(Al))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Da>=0&&Da<=F.width-cl&&ll>=0&&ll<=F.height-hl&&$d.readPixels(Da,ll,cl,hl,Xd.convert(fl),Xd.convert(Al),dl)}finally{const F=null!==zu?Pd.get(zu).__webglFramebuffer:null;Ld.bindFramebuffer($d.FRAMEBUFFER,F)}}},this.readRenderTargetPixelsAsync=async function(F,Da,ll,cl,hl,dl,pl){if(!F||!F.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fl=Pd.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==pl&&(fl=fl[pl]),fl){Ld.bindFramebuffer($d.FRAMEBUFFER,fl);try{const pl=F.texture,fl=pl.format,Al=pl.type;if(!Cd.textureFormatReadable(fl))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Cd.textureTypeReadable(Al))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Da>=0&&Da<=F.width-cl&&ll>=0&&ll<=F.height-hl){const F=$d.createBuffer();$d.bindBuffer($d.PIXEL_PACK_BUFFER,F),$d.bufferData($d.PIXEL_PACK_BUFFER,dl.byteLength,$d.STREAM_READ),$d.readPixels(Da,ll,cl,hl,Xd.convert(fl),Xd.convert(Al),0),$d.flush();const pl=$d.fenceSync($d.SYNC_GPU_COMMANDS_COMPLETE,0);await function(F,Da,ll){return new Promise((function(cl,hl){setTimeout((function probe(){switch(F.clientWaitSync(Da,F.SYNC_FLUSH_COMMANDS_BIT,0)){case F.WAIT_FAILED:hl();break;case F.TIMEOUT_EXPIRED:setTimeout(probe,ll);break;default:cl()}}),ll)}))}($d,pl,4);try{$d.bindBuffer($d.PIXEL_PACK_BUFFER,F),$d.getBufferSubData($d.PIXEL_PACK_BUFFER,0,dl)}finally{$d.deleteBuffer(F),$d.deleteSync(pl)}return dl}}finally{const F=null!==zu?Pd.get(zu).__webglFramebuffer:null;Ld.bindFramebuffer($d.FRAMEBUFFER,F)}}},this.copyFramebufferToTexture=function(F,Da,ll){void 0===Da&&(Da=null),void 0===ll&&(ll=0),!0!==F.isTexture&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Da=arguments[0]||null,F=arguments[1]);const cl=Math.pow(2,-ll),hl=Math.floor(F.image.width*cl),dl=Math.floor(F.image.height*cl),pl=null!==Da?Da.x:0,fl=null!==Da?Da.y:0;Dd.setTexture2D(F,0),$d.copyTexSubImage2D($d.TEXTURE_2D,ll,0,0,pl,fl,hl,dl),Ld.unbindTexture()},this.copyTextureToTexture=function(F,Da,ll,cl,hl){let dl,pl,fl,Al,bl,kl;void 0===ll&&(ll=null),void 0===cl&&(cl=null),void 0===hl&&(hl=0),!0!==F.isTexture&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),cl=arguments[0]||null,F=arguments[1],Da=arguments[2],hl=arguments[3]||0,ll=null),null!==ll?(dl=ll.max.x-ll.min.x,pl=ll.max.y-ll.min.y,fl=ll.min.x,Al=ll.min.y):(dl=F.image.width,pl=F.image.height,fl=0,Al=0),null!==cl?(bl=cl.x,kl=cl.y):(bl=0,kl=0);const Dl=Xd.convert(Da.format),Wl=Xd.convert(Da.type);Dd.setTexture2D(Da,0),$d.pixelStorei($d.UNPACK_FLIP_Y_WEBGL,Da.flipY),$d.pixelStorei($d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Da.premultiplyAlpha),$d.pixelStorei($d.UNPACK_ALIGNMENT,Da.unpackAlignment);const Ql=$d.getParameter($d.UNPACK_ROW_LENGTH),wc=$d.getParameter($d.UNPACK_IMAGE_HEIGHT),Sc=$d.getParameter($d.UNPACK_SKIP_PIXELS),eu=$d.getParameter($d.UNPACK_SKIP_ROWS),iu=$d.getParameter($d.UNPACK_SKIP_IMAGES),su=F.isCompressedTexture?F.mipmaps[hl]:F.image;$d.pixelStorei($d.UNPACK_ROW_LENGTH,su.width),$d.pixelStorei($d.UNPACK_IMAGE_HEIGHT,su.height),$d.pixelStorei($d.UNPACK_SKIP_PIXELS,fl),$d.pixelStorei($d.UNPACK_SKIP_ROWS,Al),F.isDataTexture?$d.texSubImage2D($d.TEXTURE_2D,hl,bl,kl,dl,pl,Dl,Wl,su.data):F.isCompressedTexture?$d.compressedTexSubImage2D($d.TEXTURE_2D,hl,bl,kl,su.width,su.height,Dl,su.data):$d.texSubImage2D($d.TEXTURE_2D,hl,bl,kl,dl,pl,Dl,Wl,su),$d.pixelStorei($d.UNPACK_ROW_LENGTH,Ql),$d.pixelStorei($d.UNPACK_IMAGE_HEIGHT,wc),$d.pixelStorei($d.UNPACK_SKIP_PIXELS,Sc),$d.pixelStorei($d.UNPACK_SKIP_ROWS,eu),$d.pixelStorei($d.UNPACK_SKIP_IMAGES,iu),0===hl&&Da.generateMipmaps&&$d.generateMipmap($d.TEXTURE_2D),Ld.unbindTexture()},this.copyTextureToTexture3D=function(F,Da,ll,cl,hl){let dl,pl,fl,Al,bl,kl,Dl,Wl,Ql;void 0===ll&&(ll=null),void 0===cl&&(cl=null),void 0===hl&&(hl=0),!0!==F.isTexture&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ll=arguments[0]||null,cl=arguments[1]||null,F=arguments[2],Da=arguments[3],hl=arguments[4]||0);const wc=F.isCompressedTexture?F.mipmaps[hl]:F.image;null!==ll?(dl=ll.max.x-ll.min.x,pl=ll.max.y-ll.min.y,fl=ll.max.z-ll.min.z,Al=ll.min.x,bl=ll.min.y,kl=ll.min.z):(dl=wc.width,pl=wc.height,fl=wc.depth,Al=0,bl=0,kl=0),null!==cl?(Dl=cl.x,Wl=cl.y,Ql=cl.z):(Dl=0,Wl=0,Ql=0);const Sc=Xd.convert(Da.format),eu=Xd.convert(Da.type);let iu;if(Da.isData3DTexture)Dd.setTexture3D(Da,0),iu=$d.TEXTURE_3D;else{if(!Da.isDataArrayTexture&&!Da.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Dd.setTexture2DArray(Da,0),iu=$d.TEXTURE_2D_ARRAY}$d.pixelStorei($d.UNPACK_FLIP_Y_WEBGL,Da.flipY),$d.pixelStorei($d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Da.premultiplyAlpha),$d.pixelStorei($d.UNPACK_ALIGNMENT,Da.unpackAlignment);const su=$d.getParameter($d.UNPACK_ROW_LENGTH),cu=$d.getParameter($d.UNPACK_IMAGE_HEIGHT),uu=$d.getParameter($d.UNPACK_SKIP_PIXELS),hu=$d.getParameter($d.UNPACK_SKIP_ROWS),Lu=$d.getParameter($d.UNPACK_SKIP_IMAGES);$d.pixelStorei($d.UNPACK_ROW_LENGTH,wc.width),$d.pixelStorei($d.UNPACK_IMAGE_HEIGHT,wc.height),$d.pixelStorei($d.UNPACK_SKIP_PIXELS,Al),$d.pixelStorei($d.UNPACK_SKIP_ROWS,bl),$d.pixelStorei($d.UNPACK_SKIP_IMAGES,kl),F.isDataTexture||F.isData3DTexture?$d.texSubImage3D(iu,hl,Dl,Wl,Ql,dl,pl,fl,Sc,eu,wc.data):Da.isCompressedArrayTexture?$d.compressedTexSubImage3D(iu,hl,Dl,Wl,Ql,dl,pl,fl,Sc,wc.data):$d.texSubImage3D(iu,hl,Dl,Wl,Ql,dl,pl,fl,Sc,eu,wc),$d.pixelStorei($d.UNPACK_ROW_LENGTH,su),$d.pixelStorei($d.UNPACK_IMAGE_HEIGHT,cu),$d.pixelStorei($d.UNPACK_SKIP_PIXELS,uu),$d.pixelStorei($d.UNPACK_SKIP_ROWS,hu),$d.pixelStorei($d.UNPACK_SKIP_IMAGES,Lu),0===hl&&Da.generateMipmaps&&$d.generateMipmap(iu),Ld.unbindTexture()},this.initRenderTarget=function(F){void 0===Pd.get(F).__webglFramebuffer&&Dd.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?Dd.setTextureCube(F,0):F.isData3DTexture?Dd.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Dd.setTexture2DArray(F,0):Dd.setTexture2D(F,0),Ld.unbindTexture()},this.resetState=function(){hu=0,Lu=0,zu=null,Ld.reset(),Yd.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Wp}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(F){this._outputColorSpace=F;const Da=this.getContext();Da.drawingBufferColorSpace=F===Cp?"display-p3":"srgb",Da.unpackColorSpace=sm.workingColorSpace===Lp?"display-p3":"srgb"}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(F,Da){return super.copy(F,Da),null!==F.background&&(this.background=F.background.clone()),null!==F.environment&&(this.environment=F.environment.clone()),null!==F.fog&&(this.fog=F.fog.clone()),this.backgroundBlurriness=F.backgroundBlurriness,this.backgroundIntensity=F.backgroundIntensity,this.backgroundRotation.copy(F.backgroundRotation),this.environmentIntensity=F.environmentIntensity,this.environmentRotation.copy(F.environmentRotation),null!==F.overrideMaterial&&(this.overrideMaterial=F.overrideMaterial.clone()),this.matrixAutoUpdate=F.matrixAutoUpdate,this}toJSON(F){const Da=super.toJSON(F);return null!==this.fog&&(Da.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(Da.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(Da.object.backgroundIntensity=this.backgroundIntensity),Da.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(Da.object.environmentIntensity=this.environmentIntensity),Da.object.environmentRotation=this.environmentRotation.toArray(),Da}}class LineBasicMaterial extends Material{constructor(F){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(F)}copy(F){return super.copy(F),this.color.copy(F.color),this.map=F.map,this.linewidth=F.linewidth,this.linecap=F.linecap,this.linejoin=F.linejoin,this.fog=F.fog,this}}const jg=new Vector3,Vg=new Vector3,Gg=new Matrix4,qg=new Ray,Hg=new Sphere,Zg=new Vector3,Wg=new Vector3;class Line extends Object3D{constructor(F,Da){void 0===F&&(F=new BufferGeometry),void 0===Da&&(Da=new LineBasicMaterial),super(),this.isLine=!0,this.type="Line",this.geometry=F,this.material=Da,this.updateMorphTargets()}copy(F,Da){return super.copy(F,Da),this.material=Array.isArray(F.material)?F.material.slice():F.material,this.geometry=F.geometry,this}computeLineDistances(){const F=this.geometry;if(null===F.index){const Da=F.attributes.position,ll=[0];for(let F=1,cl=Da.count;F<cl;F++)jg.fromBufferAttribute(Da,F-1),Vg.fromBufferAttribute(Da,F),ll[F]=ll[F-1],ll[F]+=jg.distanceTo(Vg);F.setAttribute("lineDistance",new Float32BufferAttribute(ll,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(F,Da){const ll=this.geometry,cl=this.matrixWorld,hl=F.params.Line.threshold,dl=ll.drawRange;if(null===ll.boundingSphere&&ll.computeBoundingSphere(),Hg.copy(ll.boundingSphere),Hg.applyMatrix4(cl),Hg.radius+=hl,!1===F.ray.intersectsSphere(Hg))return;Gg.copy(cl).invert(),qg.copy(F.ray).applyMatrix4(Gg);const pl=hl/((this.scale.x+this.scale.y+this.scale.z)/3),fl=pl*pl,Al=this.isLineSegments?2:1,bl=ll.index,kl=ll.attributes.position;if(null!==bl){const ll=Math.max(0,dl.start),cl=Math.min(bl.count,dl.start+dl.count);for(let hl=ll,dl=cl-1;hl<dl;hl+=Al){const ll=bl.getX(hl),cl=bl.getX(hl+1),dl=checkIntersection(this,F,qg,fl,ll,cl);dl&&Da.push(dl)}if(this.isLineLoop){const hl=bl.getX(cl-1),dl=bl.getX(ll),pl=checkIntersection(this,F,qg,fl,hl,dl);pl&&Da.push(pl)}}else{const ll=Math.max(0,dl.start),cl=Math.min(kl.count,dl.start+dl.count);for(let hl=ll,dl=cl-1;hl<dl;hl+=Al){const ll=checkIntersection(this,F,qg,fl,hl,hl+1);ll&&Da.push(ll)}if(this.isLineLoop){const hl=checkIntersection(this,F,qg,fl,cl-1,ll);hl&&Da.push(hl)}}}updateMorphTargets(){const F=this.geometry.morphAttributes,Da=Object.keys(F);if(Da.length>0){const ll=F[Da[0]];if(void 0!==ll){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let F=0,Da=ll.length;F<Da;F++){const Da=ll[F].name||String(F);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Da]=F}}}}}function checkIntersection(F,Da,ll,cl,hl,dl){const pl=F.geometry.attributes.position;jg.fromBufferAttribute(pl,hl),Vg.fromBufferAttribute(pl,dl);if(ll.distanceSqToSegment(jg,Vg,Zg,Wg)>cl)return;Zg.applyMatrix4(F.matrixWorld);const fl=Da.ray.origin.distanceTo(Zg);return fl<Da.near||fl>Da.far?void 0:{distance:fl,point:Wg.clone().applyMatrix4(F.matrixWorld),index:hl,face:null,faceIndex:null,object:F}}const Kg=new Vector3,Qg=new Vector3;class LineSegments extends Line{constructor(F,Da){super(F,Da),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const F=this.geometry;if(null===F.index){const Da=F.attributes.position,ll=[];for(let F=0,cl=Da.count;F<cl;F+=2)Kg.fromBufferAttribute(Da,F),Qg.fromBufferAttribute(Da,F+1),ll[F]=0===F?0:ll[F-1],ll[F+1]=ll[F]+Kg.distanceTo(Qg);F.setAttribute("lineDistance",new Float32BufferAttribute(ll,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class SphereGeometry extends BufferGeometry{constructor(F,Da,ll,cl,hl,dl,pl){void 0===F&&(F=1),void 0===Da&&(Da=32),void 0===ll&&(ll=16),void 0===cl&&(cl=0),void 0===hl&&(hl=2*Math.PI),void 0===dl&&(dl=0),void 0===pl&&(pl=Math.PI),super(),this.type="SphereGeometry",this.parameters={radius:F,widthSegments:Da,heightSegments:ll,phiStart:cl,phiLength:hl,thetaStart:dl,thetaLength:pl},Da=Math.max(3,Math.floor(Da)),ll=Math.max(2,Math.floor(ll));const fl=Math.min(dl+pl,Math.PI);let Al=0;const bl=[],kl=new Vector3,Dl=new Vector3,Wl=[],Ql=[],wc=[],Sc=[];for(let eu=0;eu<=ll;eu++){const Wl=[],iu=eu/ll;let su=0;0===eu&&0===dl?su=.5/Da:eu===ll&&fl===Math.PI&&(su=-.5/Da);for(let ll=0;ll<=Da;ll++){const fl=ll/Da;kl.x=-F*Math.cos(cl+fl*hl)*Math.sin(dl+iu*pl),kl.y=F*Math.cos(dl+iu*pl),kl.z=F*Math.sin(cl+fl*hl)*Math.sin(dl+iu*pl),Ql.push(kl.x,kl.y,kl.z),Dl.copy(kl).normalize(),wc.push(Dl.x,Dl.y,Dl.z),Sc.push(fl+su,1-iu),Wl.push(Al++)}bl.push(Wl)}for(let eu=0;eu<ll;eu++)for(let F=0;F<Da;F++){const Da=bl[eu][F+1],cl=bl[eu][F],hl=bl[eu+1][F],pl=bl[eu+1][F+1];(0!==eu||dl>0)&&Wl.push(Da,cl,pl),(eu!==ll-1||fl<Math.PI)&&Wl.push(cl,hl,pl)}this.setIndex(Wl),this.setAttribute("position",new Float32BufferAttribute(Ql,3)),this.setAttribute("normal",new Float32BufferAttribute(wc,3)),this.setAttribute("uv",new Float32BufferAttribute(Sc,2))}copy(F){return super.copy(F),this.parameters=Object.assign({},F.parameters),this}static fromJSON(F){return new SphereGeometry(F.radius,F.widthSegments,F.heightSegments,F.phiStart,F.phiLength,F.thetaStart,F.thetaLength)}}class WireframeGeometry extends BufferGeometry{constructor(F){if(void 0===F&&(F=null),super(),this.type="WireframeGeometry",this.parameters={geometry:F},null!==F){const Da=[],ll=new Set,cl=new Vector3,hl=new Vector3;if(null!==F.index){const dl=F.attributes.position,pl=F.index;let fl=F.groups;0===fl.length&&(fl=[{start:0,count:pl.count,materialIndex:0}]);for(let F=0,Al=fl.length;F<Al;++F){const Al=fl[F],bl=Al.start;for(let F=bl,fl=bl+Al.count;F<fl;F+=3)for(let Al=0;Al<3;Al++){const fl=pl.getX(F+Al),bl=pl.getX(F+(Al+1)%3);cl.fromBufferAttribute(dl,fl),hl.fromBufferAttribute(dl,bl),!0===isUniqueEdge(cl,hl,ll)&&(Da.push(cl.x,cl.y,cl.z),Da.push(hl.x,hl.y,hl.z))}}}else{const dl=F.attributes.position;for(let F=0,pl=dl.count/3;F<pl;F++)for(let fl=0;fl<3;fl++){const pl=3*F+fl,Al=3*F+(fl+1)%3;cl.fromBufferAttribute(dl,pl),hl.fromBufferAttribute(dl,Al),!0===isUniqueEdge(cl,hl,ll)&&(Da.push(cl.x,cl.y,cl.z),Da.push(hl.x,hl.y,hl.z))}}this.setAttribute("position",new Float32BufferAttribute(Da,3))}}copy(F){return super.copy(F),this.parameters=Object.assign({},F.parameters),this}}function isUniqueEdge(F,Da,ll){const cl=`${F.x},${F.y},${F.z}-${Da.x},${Da.y},${Da.z}`,hl=`${Da.x},${Da.y},${Da.z}-${F.x},${F.y},${F.z}`;return!0!==ll.has(cl)&&!0!==ll.has(hl)&&(ll.add(cl),ll.add(hl),!0)}function convertArray(F,Da,ll){return!F||!ll&&F.constructor===Da?F:"number"===typeof Da.BYTES_PER_ELEMENT?new Da(F):Array.prototype.slice.call(F)}function isTypedArray(F){return ArrayBuffer.isView(F)&&!(F instanceof DataView)}class Interpolant{constructor(F,Da,ll,cl){this.parameterPositions=F,this._cachedIndex=0,this.resultBuffer=void 0!==cl?cl:new Da.constructor(ll),this.sampleValues=Da,this.valueSize=ll,this.settings=null,this.DefaultSettings_={}}evaluate(F){const Da=this.parameterPositions;let ll=this._cachedIndex,cl=Da[ll],hl=Da[ll-1];e:{t:{let dl;i:{n:if(!(F<cl)){for(let dl=ll+2;;){if(void 0===cl){if(F<hl)break n;return ll=Da.length,this._cachedIndex=ll,this.copySampleValue_(ll-1)}if(ll===dl)break;if(hl=cl,cl=Da[++ll],F<cl)break t}dl=Da.length;break i}if(F>=hl)break e;{const pl=Da[1];F<pl&&(ll=2,hl=pl);for(let dl=ll-2;;){if(void 0===hl)return this._cachedIndex=0,this.copySampleValue_(0);if(ll===dl)break;if(cl=hl,hl=Da[--ll-1],F>=hl)break t}dl=ll,ll=0}}for(;ll<dl;){const cl=ll+dl>>>1;F<Da[cl]?dl=cl:ll=cl+1}if(cl=Da[ll],hl=Da[ll-1],void 0===hl)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===cl)return ll=Da.length,this._cachedIndex=ll,this.copySampleValue_(ll-1)}this._cachedIndex=ll,this.intervalChanged_(ll,hl,cl)}return this.interpolate_(ll,hl,F,cl)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(F){const Da=this.resultBuffer,ll=this.sampleValues,cl=this.valueSize,hl=F*cl;for(let dl=0;dl!==cl;++dl)Da[dl]=ll[hl+dl];return Da}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(F,Da,ll,cl){super(F,Da,ll,cl),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ep,endingEnd:Ep}}intervalChanged_(F,Da,ll){const cl=this.parameterPositions;let hl=F-2,dl=F+1,pl=cl[hl],fl=cl[dl];if(void 0===pl)switch(this.getSettings_().endingStart){case Mp:hl=F,pl=2*Da-ll;break;case Sp:hl=cl.length-2,pl=Da+cl[hl]-cl[hl+1];break;default:hl=F,pl=ll}if(void 0===fl)switch(this.getSettings_().endingEnd){case Mp:dl=F,fl=2*ll-Da;break;case Sp:dl=1,fl=ll+cl[1]-cl[0];break;default:dl=F-1,fl=Da}const Al=.5*(ll-Da),bl=this.valueSize;this._weightPrev=Al/(Da-pl),this._weightNext=Al/(fl-ll),this._offsetPrev=hl*bl,this._offsetNext=dl*bl}interpolate_(F,Da,ll,cl){const hl=this.resultBuffer,dl=this.sampleValues,pl=this.valueSize,fl=F*pl,Al=fl-pl,bl=this._offsetPrev,kl=this._offsetNext,Dl=this._weightPrev,Wl=this._weightNext,Ql=(ll-Da)/(cl-Da),wc=Ql*Ql,Sc=wc*Ql,eu=-Dl*Sc+2*Dl*wc-Dl*Ql,iu=(1+Dl)*Sc+(-1.5-2*Dl)*wc+(-.5+Dl)*Ql+1,su=(-1-Wl)*Sc+(1.5+Wl)*wc+.5*Ql,cu=Wl*Sc-Wl*wc;for(let uu=0;uu!==pl;++uu)hl[uu]=eu*dl[bl+uu]+iu*dl[Al+uu]+su*dl[fl+uu]+cu*dl[kl+uu];return hl}}class LinearInterpolant extends Interpolant{constructor(F,Da,ll,cl){super(F,Da,ll,cl)}interpolate_(F,Da,ll,cl){const hl=this.resultBuffer,dl=this.sampleValues,pl=this.valueSize,fl=F*pl,Al=fl-pl,bl=(ll-Da)/(cl-Da),kl=1-bl;for(let Dl=0;Dl!==pl;++Dl)hl[Dl]=dl[Al+Dl]*kl+dl[fl+Dl]*bl;return hl}}class DiscreteInterpolant extends Interpolant{constructor(F,Da,ll,cl){super(F,Da,ll,cl)}interpolate_(F){return this.copySampleValue_(F-1)}}class KeyframeTrack{constructor(F,Da,ll,cl){if(void 0===F)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===Da||0===Da.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+F);this.name=F,this.times=convertArray(Da,this.TimeBufferType),this.values=convertArray(ll,this.ValueBufferType),this.setInterpolation(cl||this.DefaultInterpolation)}static toJSON(F){const Da=F.constructor;let ll;if(Da.toJSON!==this.toJSON)ll=Da.toJSON(F);else{ll={name:F.name,times:convertArray(F.times,Array),values:convertArray(F.values,Array)};const Da=F.getInterpolation();Da!==F.DefaultInterpolation&&(ll.interpolation=Da)}return ll.type=F.ValueTypeName,ll}InterpolantFactoryMethodDiscrete(F){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),F)}InterpolantFactoryMethodLinear(F){return new LinearInterpolant(this.times,this.values,this.getValueSize(),F)}InterpolantFactoryMethodSmooth(F){return new CubicInterpolant(this.times,this.values,this.getValueSize(),F)}setInterpolation(F){let Da;switch(F){case xp:Da=this.InterpolantFactoryMethodDiscrete;break;case bp:Da=this.InterpolantFactoryMethodLinear;break;case wp:Da=this.InterpolantFactoryMethodSmooth}if(void 0===Da){const Da="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(F===this.DefaultInterpolation)throw new Error(Da);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",Da),this}return this.createInterpolant=Da,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xp;case this.InterpolantFactoryMethodLinear:return bp;case this.InterpolantFactoryMethodSmooth:return wp}}getValueSize(){return this.values.length/this.times.length}shift(F){if(0!==F){const Da=this.times;for(let ll=0,cl=Da.length;ll!==cl;++ll)Da[ll]+=F}return this}scale(F){if(1!==F){const Da=this.times;for(let ll=0,cl=Da.length;ll!==cl;++ll)Da[ll]*=F}return this}trim(F,Da){const ll=this.times,cl=ll.length;let hl=0,dl=cl-1;for(;hl!==cl&&ll[hl]<F;)++hl;for(;-1!==dl&&ll[dl]>Da;)--dl;if(++dl,0!==hl||dl!==cl){hl>=dl&&(dl=Math.max(dl,1),hl=dl-1);const F=this.getValueSize();this.times=ll.slice(hl,dl),this.values=this.values.slice(hl*F,dl*F)}return this}validate(){let F=!0;const Da=this.getValueSize();Da-Math.floor(Da)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),F=!1);const ll=this.times,cl=this.values,hl=ll.length;0===hl&&(console.error("THREE.KeyframeTrack: Track is empty.",this),F=!1);let dl=null;for(let pl=0;pl!==hl;pl++){const Da=ll[pl];if("number"===typeof Da&&isNaN(Da)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,pl,Da),F=!1;break}if(null!==dl&&dl>Da){console.error("THREE.KeyframeTrack: Out of order keys.",this,pl,Da,dl),F=!1;break}dl=Da}if(void 0!==cl&&isTypedArray(cl))for(let pl=0,fl=cl.length;pl!==fl;++pl){const Da=cl[pl];if(isNaN(Da)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,pl,Da),F=!1;break}}return F}optimize(){const F=this.times.slice(),Da=this.values.slice(),ll=this.getValueSize(),cl=this.getInterpolation()===wp,hl=F.length-1;let dl=1;for(let pl=1;pl<hl;++pl){let hl=!1;const fl=F[pl];if(fl!==F[pl+1]&&(1!==pl||fl!==F[0]))if(cl)hl=!0;else{const F=pl*ll,cl=F-ll,dl=F+ll;for(let pl=0;pl!==ll;++pl){const ll=Da[F+pl];if(ll!==Da[cl+pl]||ll!==Da[dl+pl]){hl=!0;break}}}if(hl){if(pl!==dl){F[dl]=F[pl];const cl=pl*ll,hl=dl*ll;for(let F=0;F!==ll;++F)Da[hl+F]=Da[cl+F]}++dl}}if(hl>0){F[dl]=F[hl];for(let F=hl*ll,cl=dl*ll,pl=0;pl!==ll;++pl)Da[cl+pl]=Da[F+pl];++dl}return dl!==F.length?(this.times=F.slice(0,dl),this.values=Da.slice(0,dl*ll)):(this.times=F,this.values=Da),this}clone(){const F=this.times.slice(),Da=this.values.slice(),ll=new(0,this.constructor)(this.name,F,Da);return ll.createInterpolant=this.createInterpolant,ll}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=bp;class BooleanKeyframeTrack extends KeyframeTrack{constructor(F,Da,ll){super(F,Da,ll)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=xp,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(F,Da,ll,cl){super(F,Da,ll,cl)}interpolate_(F,Da,ll,cl){const hl=this.resultBuffer,dl=this.sampleValues,pl=this.valueSize,fl=(ll-Da)/(cl-Da);let Al=F*pl;for(let bl=Al+pl;Al!==bl;Al+=4)Quaternion.slerpFlat(hl,0,dl,Al-pl,dl,Al,fl);return hl}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(F){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),F)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(F,Da,ll){super(F,Da,ll)}}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=xp,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";const Xg={enabled:!1,files:{},add:function(F,Da){!1!==this.enabled&&(this.files[F]=Da)},get:function(F){if(!1!==this.enabled)return this.files[F]},remove:function(F){delete this.files[F]},clear:function(){this.files={}}};class LoadingManager{constructor(F,Da,ll){const cl=this;let hl,dl=!1,pl=0,fl=0;const Al=[];this.onStart=void 0,this.onLoad=F,this.onProgress=Da,this.onError=ll,this.itemStart=function(F){fl++,!1===dl&&void 0!==cl.onStart&&cl.onStart(F,pl,fl),dl=!0},this.itemEnd=function(F){pl++,void 0!==cl.onProgress&&cl.onProgress(F,pl,fl),pl===fl&&(dl=!1,void 0!==cl.onLoad&&cl.onLoad())},this.itemError=function(F){void 0!==cl.onError&&cl.onError(F)},this.resolveURL=function(F){return hl?hl(F):F},this.setURLModifier=function(F){return hl=F,this},this.addHandler=function(F,Da){return Al.push(F,Da),this},this.removeHandler=function(F){const Da=Al.indexOf(F);return-1!==Da&&Al.splice(Da,2),this},this.getHandler=function(F){for(let Da=0,ll=Al.length;Da<ll;Da+=2){const ll=Al[Da],cl=Al[Da+1];if(ll.global&&(ll.lastIndex=0),ll.test(F))return cl}return null}}}const Yg=new LoadingManager;class Loader{constructor(F){this.manager=void 0!==F?F:Yg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(F,Da){const ll=this;return new Promise((function(cl,hl){ll.load(F,cl,Da,hl)}))}parse(){}setCrossOrigin(F){return this.crossOrigin=F,this}setWithCredentials(F){return this.withCredentials=F,this}setPath(F){return this.path=F,this}setResourcePath(F){return this.resourcePath=F,this}setRequestHeader(F){return this.requestHeader=F,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;const Jg="\\[\\]\\.:\\/",$g=new RegExp("["+Jg+"]","g"),eA="[^"+Jg+"]",tA="[^"+Jg.replace("\\.","")+"]",iA=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",eA)+/(WCOD+)?/.source.replace("WCOD",tA)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",eA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",eA)+"$"),nA=["material","materials","bones","map"];class PropertyBinding{constructor(F,Da,ll){this.path=Da,this.parsedPath=ll||PropertyBinding.parseTrackName(Da),this.node=PropertyBinding.findNode(F,this.parsedPath.nodeName),this.rootNode=F,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(F,Da,ll){return F&&F.isAnimationObjectGroup?new PropertyBinding.Composite(F,Da,ll):new PropertyBinding(F,Da,ll)}static sanitizeNodeName(F){return F.replace(/\s/g,"_").replace($g,"")}static parseTrackName(F){const Da=iA.exec(F);if(null===Da)throw new Error("PropertyBinding: Cannot parse trackName: "+F);const ll={nodeName:Da[2],objectName:Da[3],objectIndex:Da[4],propertyName:Da[5],propertyIndex:Da[6]},cl=ll.nodeName&&ll.nodeName.lastIndexOf(".");if(void 0!==cl&&-1!==cl){const F=ll.nodeName.substring(cl+1);-1!==nA.indexOf(F)&&(ll.nodeName=ll.nodeName.substring(0,cl),ll.objectName=F)}if(null===ll.propertyName||0===ll.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+F);return ll}static findNode(F,Da){if(void 0===Da||""===Da||"."===Da||-1===Da||Da===F.name||Da===F.uuid)return F;if(F.skeleton){const ll=F.skeleton.getBoneByName(Da);if(void 0!==ll)return ll}if(F.children){const searchNodeSubtree=function(F){for(let ll=0;ll<F.length;ll++){const cl=F[ll];if(cl.name===Da||cl.uuid===Da)return cl;const hl=searchNodeSubtree(cl.children);if(hl)return hl}return null},ll=searchNodeSubtree(F.children);if(ll)return ll}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(F,Da){F[Da]=this.targetObject[this.propertyName]}_getValue_array(F,Da){const ll=this.resolvedProperty;for(let cl=0,hl=ll.length;cl!==hl;++cl)F[Da++]=ll[cl]}_getValue_arrayElement(F,Da){F[Da]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(F,Da){this.resolvedProperty.toArray(F,Da)}_setValue_direct(F,Da){this.targetObject[this.propertyName]=F[Da]}_setValue_direct_setNeedsUpdate(F,Da){this.targetObject[this.propertyName]=F[Da],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(F,Da){this.targetObject[this.propertyName]=F[Da],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(F,Da){const ll=this.resolvedProperty;for(let cl=0,hl=ll.length;cl!==hl;++cl)ll[cl]=F[Da++]}_setValue_array_setNeedsUpdate(F,Da){const ll=this.resolvedProperty;for(let cl=0,hl=ll.length;cl!==hl;++cl)ll[cl]=F[Da++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(F,Da){const ll=this.resolvedProperty;for(let cl=0,hl=ll.length;cl!==hl;++cl)ll[cl]=F[Da++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(F,Da){this.resolvedProperty[this.propertyIndex]=F[Da]}_setValue_arrayElement_setNeedsUpdate(F,Da){this.resolvedProperty[this.propertyIndex]=F[Da],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(F,Da){this.resolvedProperty[this.propertyIndex]=F[Da],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(F,Da){this.resolvedProperty.fromArray(F,Da)}_setValue_fromArray_setNeedsUpdate(F,Da){this.resolvedProperty.fromArray(F,Da),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(F,Da){this.resolvedProperty.fromArray(F,Da),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(F,Da){this.bind(),this.getValue(F,Da)}_setValue_unbound(F,Da){this.bind(),this.setValue(F,Da)}bind(){let F=this.node;const Da=this.parsedPath,ll=Da.objectName,cl=Da.propertyName;let hl=Da.propertyIndex;if(F||(F=PropertyBinding.findNode(this.rootNode,Da.nodeName),this.node=F),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!F)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(ll){let cl=Da.objectIndex;switch(ll){case"materials":if(!F.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!F.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);F=F.material.materials;break;case"bones":if(!F.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);F=F.skeleton.bones;for(let Da=0;Da<F.length;Da++)if(F[Da].name===cl){cl=Da;break}break;case"map":if("map"in F){F=F.map;break}if(!F.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!F.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);F=F.material.map;break;default:if(void 0===F[ll])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);F=F[ll]}if(void 0!==cl){if(void 0===F[cl])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,F);F=F[cl]}}const dl=F[cl];if(void 0===dl){const ll=Da.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+ll+"."+cl+" but it wasn't found.",F)}let pl=this.Versioning.None;this.targetObject=F,void 0!==F.needsUpdate?pl=this.Versioning.NeedsUpdate:void 0!==F.matrixWorldNeedsUpdate&&(pl=this.Versioning.MatrixWorldNeedsUpdate);let fl=this.BindingType.Direct;if(void 0!==hl){if("morphTargetInfluences"===cl){if(!F.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!F.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==F.morphTargetDictionary[hl]&&(hl=F.morphTargetDictionary[hl])}fl=this.BindingType.ArrayElement,this.resolvedProperty=dl,this.propertyIndex=hl}else void 0!==dl.fromArray&&void 0!==dl.toArray?(fl=this.BindingType.HasFromToArray,this.resolvedProperty=dl):Array.isArray(dl)?(fl=this.BindingType.EntireArray,this.resolvedProperty=dl):this.propertyName=cl;this.getValue=this.GetterByBindingType[fl],this.setValue=this.SetterByBindingTypeAndVersioning[fl][pl]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class{constructor(F,Da,ll){const cl=ll||PropertyBinding.parseTrackName(Da);this._targetGroup=F,this._bindings=F.subscribe_(Da,cl)}getValue(F,Da){this.bind();const ll=this._targetGroup.nCachedObjects_,cl=this._bindings[ll];void 0!==cl&&cl.getValue(F,Da)}setValue(F,Da){const ll=this._bindings;for(let cl=this._targetGroup.nCachedObjects_,hl=ll.length;cl!==hl;++cl)ll[cl].setValue(F,Da)}bind(){const F=this._bindings;for(let Da=this._targetGroup.nCachedObjects_,ll=F.length;Da!==ll;++Da)F[Da].bind()}unbind(){const F=this._bindings;for(let Da=this._targetGroup.nCachedObjects_,ll=F.length;Da!==ll;++Da)F[Da].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);const rA=new Matrix4;class Raycaster{constructor(F,Da,ll,cl){void 0===ll&&(ll=0),void 0===cl&&(cl=1/0),this.ray=new Ray(F,Da),this.near=ll,this.far=cl,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(F,Da){this.ray.set(F,Da)}setFromCamera(F,Da){Da.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(Da.matrixWorld),this.ray.direction.set(F.x,F.y,.5).unproject(Da).sub(this.ray.origin).normalize(),this.camera=Da):Da.isOrthographicCamera?(this.ray.origin.set(F.x,F.y,(Da.near+Da.far)/(Da.near-Da.far)).unproject(Da),this.ray.direction.set(0,0,-1).transformDirection(Da.matrixWorld),this.camera=Da):console.error("THREE.Raycaster: Unsupported camera type: "+Da.type)}setFromXRController(F){return rA.identity().extractRotation(F.matrixWorld),this.ray.origin.setFromMatrixPosition(F.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(rA),this}intersectObject(F,Da,ll){return void 0===Da&&(Da=!0),void 0===ll&&(ll=[]),intersect(F,this,ll,Da),ll.sort(ascSort),ll}intersectObjects(F,Da,ll){void 0===Da&&(Da=!0),void 0===ll&&(ll=[]);for(let cl=0,hl=F.length;cl<hl;cl++)intersect(F[cl],this,ll,Da);return ll.sort(ascSort),ll}}function ascSort(F,Da){return F.distance-Da.distance}function intersect(F,Da,ll,cl){let hl=!0;if(F.layers.test(Da.layers)){!1===F.raycast(Da,ll)&&(hl=!1)}if(!0===hl&&!0===cl){const cl=F.children;for(let F=0,hl=cl.length;F<hl;F++)intersect(cl[F],Da,ll,!0)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cl}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cl)},8330:F=>{"use strict";F.exports=JSON.parse('{"rE":"3.2.3","Jk":{"O":"https://gitlab.com/panoramax/clients/web-viewer"}}')},4149:F=>{"use strict";F.exports=JSON.parse('{"maplibre":{"GeolocateControl.LocationNotAvailable":"Placering ikke tilg\xe6ngelig","GeolocateControl.FindMyLocation":"Find min placering"},"gvs":{"minimize":"Skjul dette modul, du kan vise det igen ved hj\xe6lp af knappen i nederste venstre hj\xf8rne","share_embed_docs":"L\xe6s mere om indlejringskonfiguration","zoom":"Zoom","zoomOut":"Zoom ud","zoomIn":"Zoom ind","moveUp":"Ryk opad","moveDown":"Ryk nedad","moveLeft":"Ryk til venstre","moveRight":"Ryk til h\xf8jre","moveMiddle":"Centreret visning","expand":"Udvid","expand_info":"F\xe5 modulet til at blive vist p\xe5 hele siden","show_psv":"Vis billedfremviseren","show_map":"Vis kortet","options":"Valgmuligheder","filters":"Filtre","layers":"Lag","search":"S\xf8g","search_empty":"Ingen resultater fundet","search_user":"S\xf8g efter et brugernavn\u2026","share":"Del","share_links":"Links","share_page":"Link til denne side","share_image":"HD-billede","share_rss":"RSS-feed","share_rss_title":"RSS-feed med nye sekvenser i det aktuelt synlige kortomr\xe5de","share_embed":"Indlejr p\xe5 din hjemmeside","share_print":"Udskriv","copy":"Kopi\xe9r","copied":"Kopieret","error_retry":"Pr\xf8v igen senere","sequence_next":"N\xe6ste billede i sekvensen","sequence_play":"Afspil denne sekvens","sequence_more":"Flere afspilningsmuligheder","sequence_speed":"Afspillerens hastighed","legend_license":"Licens: {l}","legend_title":"Vis detaljer om billedet","error_click":"Forts\xe6t","error":"Vi har et problem\u2026","search_address":"S\xf8g efter en adresse, by\u2026","sequence_pause":"S\xe6t sekvensen p\xe5 pause","sequence_prev":"Forrige billede i sekvensen","loading_labels_serious":["\ud83d\uddfa\ufe0f Indl\xe6ser kortdata","\ud83d\udda5\ufe0f Anmoder API","\ud83d\uddbc\ufe0f Indl\xe6ser thumbnails","\ud83d\udd0d Analyserer EXIF-metadata","\ud83c\udfd8\ufe0f 3D-rendering","\ud83d\udcf7 Initialiserer 360\xb0-billeder","\ud83d\udfe0 Farveafstemning","\ud83d\udcaf Beregning af kvalitetsscore \xa9"],"edit_osm":"Rediger OSM","josm_live":"Aktiv\xe9r automatisk JOSM-synkronisering ved indl\xe6sning af billeder","loading_labels_fun":["\ud83e\udd8c Registrering af skilte om hjortekrydsning","\ud83d\ude98 S\xf8ger Panoramax Car \xa9","\u2615 Injicerer koffein","\ud83d\ude00 Smil, du er blevet kortlagt!","\ud83d\udc08 Deler kattebilleder","\ud83d\ude34 Reducerer overspringshandlinger","\ud83e\uded6 Brygger te","\ud83d\udc27 \xc5bner kildekode","\ud83d\ude87 Indekser undergrundsstationer","\ud83e\uddf9 Metadata-oprydning","\ud83d\ude92 Sender billeder af brandstation","\ud83d\udeb2 Opdatering af Greenways","\ud83d\ude89 Gennemgang af perron p\xe5 station","\ud83d\udef0\ufe0f S\xf8ger efter satellitter","\ud83d\udc65 Skriver personaer","\ud83d\udc1f Finder fish and chip butik","\ud83e\uddd1\u200d\ud83d\udcbb Gr\xe6nseflade til fejlfinding","\ud83d\udcc8 Inkrementelle statistikker"],"error_psv":"Photo Sphere Viewer indl\xe6ses ikke korrekt","error_nopic":"Intet billede tilg\xe6ngeligt p\xe5 den givne position","error_api":"Billedserveren er ikke tilg\xe6ngelig","error_webgl":"WebGL underst\xf8ttes ikke af din browser","filter_date":"Dato","filter_date_1month":"1 m\xe5ned","filter_date_1year":"1 \xe5r","filter_user":"Bruger","filter_user_mypics":"Mine billeder","filter_picture":"Billedtype","filter_zoom_in":"Zoom ind for at se dette filter","picture_flat":"Klassisk","picture_360":"360\xb0","filter_qualityscore_help":"Klik for at aktivere eller deaktivere","map_background":"Kortbaggrund","map_background_aerial":"Luftfoto","map_background_streets":"Gader","map_theme":"Korttema","error_pic":"Det \xf8nskede billede blev ikke fundet","error_api_compatibility":"Billedserveren er ikke kompatibel med denne version af fremviseren","filter_qualityscore":"Kvalitetsscore","error_josm":"JOSM svarer ikke, k\xf8rer den, og er fjernstyring aktiveret?","metadata_general_seqid_link":"G\xe5 til JSON-beskrivelse af sekvensen","map_theme_default":"Klassisk","map_theme_age_1":"> 2 \xe5r","map_theme_age_2":"< 2 \xe5r","map_theme_age_3":"< 1 \xe5r","map_theme_age_4":"< 1 m\xe5ned","map_theme_type":"Kameratype","map_theme_score":"Kvalitetsscore","contrast":"Aktiv\xe9r h\xf8jere billedkontrast","metadata_general_picid":"Billed-identifikator","metadata_general_seqid":"Sekvens-identifikator","metadata_general_picid_link":"G\xe5 til JSON-beskrivelse af billedet","metadata_general_author":"Forfatter","metadata_general_license":"Licens","metadata_general_license_link":"Se den fulde licensbeskrivelse","metadata_general_date":"Optagelsesdato","metadata_camera":"Kamera","metadata_camera_make":"Fabrikat","metadata_camera_model":"Model","metadata_camera_type":"Type","metadata_camera_resolution":"Opl\xf8sning","metadata_camera_focal_length":"Br\xe6ndvidde","metadata_location_latitude":"Breddegrad","metadata_location_orientation":"Optageretning","metadata_location_precision":"Pr\xe6cision i positionering","metadata_quality":"Kvalitetsscore","metadata_quality_score":"Global score","metadata_quality_gps_score":"Positioneringsscore","metadata_quality_help":"F\xe5 mere at vide om kvalitetsscore","map_theme_age":"Optagelsesdato","metadata_location":"Placering","metadata":"Metadata for billede","metadata_location_longitude":"L\xe6ngdegrad","metadata_quality_resolution_score":"Opl\xf8sningsscore","metadata_quality_missing":"ingen v\xe6rdi indstillet i billedet","metadata_exif":"EXIF / XMP","metadata_exif_name":"Tag","metadata_exif_value":"V\xe6rdi","report":"Indberet billede","report_auth":"Denne indberetning vil blive sendt via din konto \\"{a}\\"","report_nature_label":"Problemets karakter","report_nature":{"":"V\xe6lg problemets art\u2026","blur_missing":"En persons ansigt eller bils nummerplade er synlig","blur_excess":"Et objekt, der ikke har brug for sl\xf8ring, sl\xf8res","inappropriate":"Billedet er upassende (ikke relevant, n\xf8genhed\u2026)","privacy":"En privat sti eller ejendom er synlig","picture_low_quality":"Billedet er af meget d\xe5rlig kvalitet","mislocated":"Billedet er d\xe5rligt placeret p\xe5 kortet","copyright":"Billedet kr\xe6nker ophavsretten","other":"Enhver anden form for problem"},"report_whole_sequence":"Det g\xe6lder hele sekvensen","report_details":"Yderligere detaljer","report_details_placeholder":"Hvis du vil, kan du tilf\xf8je detaljer om problemet, og hvad det drejer sig om","report_email":"Din e-mail","report_email_placeholder":"Valgfri","report_submit":"Indsend","report_wait":"Sender indberetning \u2026","report_success":"Indberetningen er blevet sendt. Den vil blive gennemg\xe5et s\xe5 hurtigt som muligt.","report_failure":"Der opstod en fejl under oprettelse af indberetning: {e}. Pr\xf8v venligst igen senere.","qualityscore_title":"Om kvalitetsscoren","qualityscore_doc_2":"Bed\xf8mmelsen vises for brugerne som en A/B/C/D/E-score (A er den bedste, E den d\xe5rligste) og vises grafisk via denne skala:","qualityscore_doc_3":"Den beregnes ud fra GPS-pr\xe6cision og billedopl\xf8sning. Et professionelt system vil have en A-rating, et 360\xb0 actionkamera vil have en B-rating, og en smartphone vil have en C/D/E-rating.","qualityscore_doc_link":"Yderligere oplysninger om beregningen af kvalitetsscore findes i vores dokumentation.","qualityscore_doc_1":"Panoramax tilbyder en kvalitetsscore for hvert billede. Det giver mulighed for nem kortfiltrering og overskuelig visning af tilg\xe6ngelige billeder af h\xf8j kvalitet.","minimize_short":"Skjul"},"psv":{"loadError":"Panoramaet kan ikke indl\xe6ses","twoFingers":"Brug to fingre til at navigere","ctrlZoom":"Brug ctrl + scroll til at zoome ind p\xe5 billedet"},"map":{"loading":"Indl\xe6ser\u2026","thumbnail":"Miniature af billedet, der holdes","not_public":"Ikke offentligt synlig","slow_loading":"Kortet indl\xe6ses langsomt og kan virke defekt"}}')},369:F=>{"use strict";F.exports=JSON.parse('{"gvs":{"options":"Optionen","filters":"Filter","search":"Suche","layers":"Ebenen","share_links":"Links","share_page":"Link zu dieser Seite","loading_labels_fun":["\ud83e\udd8c Erkennung der \\"Reh kreuzt\\"-Schilder","\ud83d\ude98 Suche Panoramax-Auto \xa9","\u2615 Koffeininjektion","\ud83d\ude00 L\xe4chle, du wirst kartografiert!","\ud83d\udc08 Katzenfotos teilen","\ud83d\ude34 Reduzieren der Prokrastination","\ud83c\udf7a\ufe0f Bier brauen","\ud83d\udc27 Quellcode \xf6ffnen","\ud83d\udee3\ufe0f Indizierung der Autobahnen","\ud83e\uddf9 Metadatenreinigung","\ud83d\ude92 Senden der Fotos der Feuerwehren","\ud83d\udeb2 Gr\xfcne Radwege identifiziert","\ud83d\ude89 Durchgang zum Bahnsteig","\ud83d\udef0\ufe0f Suche Satelliten","\ud83d\udc65 Personas anlegen","\ud83c\udf2d\ufe0f Lokalisierung der Currywurst","\ud83e\uddd1\u200d\ud83d\udcbb Debugging des Interfaces","\ud83d\udcc8 Hochz\xe4hlen der Statistiken"],"search_empty":"Keine Ergebnisse gefunden","share":"Teilen","metadata_general_picid":"Bild-Identifier","zoom":"Zoom","zoomOut":"Herauszoomen","zoomIn":"Hereinzoomen","moveUp":"Nach oben","moveDown":"Nach unten","moveRight":"Nach rechts","moveMiddle":"Sicht zentrieren","map_theme_age":"Aufnahmedatum","expand":"Vergr\xf6\xdfern","expand_info":"Widget im Vollbild anzeigen","show_psv":"Bildbetrachter anzeigen","show_map":"Karte anzeigen","search_user":"Benutzernamen suchen\u2026","filter_zoom_in":"Hereinzoomen um diesen Filter zu sehen","picture_flat":"Klassisch","picture_360":"360\xb0","filter_camera_model":"Nach Kameramodell","map_background":"Kartenhintergrund","map_background_aerial":"Satelliten","map_background_streets":"Stra\xdfen","map_theme":"Karten-Art","metadata_exif_name":"Schlagwort","metadata_exif_value":"Wert","map_theme_age_2":"<2 Jahre","map_theme_age_3":"<1 Jahr","map_theme_type":"Kameratyp","contrast":"H\xf6heren Bildkontrast aktivieren","metadata":"Bildmetadaten","metadata_general_seqid":"Sequenzidentifier","metadata_general_picid_link":"Zur JOSN-Beschreibung des Bildes gehen","loading_labels_serious":["\ud83d\uddfa\ufe0f Laden der Kartendaten","\ud83d\udda5\ufe0f API anfragen","\ud83d\uddbc\ufe0f Vorschaubilder laden","\ud83d\udd0d EXIF Metadaten analysieren","\ud83c\udfd8\ufe0f 3D-Rendering","\ud83d\udcf7 360\xb0 Fotos initialisieren","\ud83d\udfe0 Farben balancieren","\ud83d\udcaf Berechnung der Qualit\xe4tsbewertung \xa9"],"search_address":"Suchen sie eine Adresse, Stadt, \u2026","share_image":"HD Bild","share_rss":"RSS Feed","share_embed":"Auf Webseite einbetten","share_print":"Druck","copy":"Kopieren","copied":"Kopiert","error":"Panoramax ist abgest\xfcrzt\u2026","sequence_next":"N\xe4chstes Foto in der Sequenz","sequence_play":"Sequenz abspielen","sequence_pause":"Sequenz pausieren","sequence_prev":"Vorheriges Foto in der Sequenz","sequence_more":"Mehr Abspieloptionen","sequence_speed":"Abspielgeschwindigkeit","legend_license":"Lizenz: {l}","edit_osm":"OSM editieren","id":"iD","josm":"JOSM","josm_live":"Einschalten der automatischen JOSM-Synchronisierung beim Laden eines Bildes","error_psv":"Betrachter f\xfcr die Photospheres wurde nicht richtig geladen","error_pic":"Gesuchtes Foto wurde nicht gefunden","error_nopic":"Kein Foto verf\xfcgbar an dieser Position","error_api":"Foto-Server ist nicht verf\xfcgbar","error_josm":"JOSM reagiert nicht, ist es ge\xf6ffnet und die Remote eingeschaltet?","error_api_compatibility":"Der Foto-Server ist nicht mit dieser Version des Betrachters kompatibel","filter_date":"Datum","filter_user":"Benutzer","filter_picture":"Foto-Art","map_theme_default":"Klassisch","map_theme_age_1":">2 Jahre","metadata_general_seqid_link":"Zur JSON-Beschreibung der Sequenz gehen","metadata_general_author":"Autor","metadata_general_license":"Lizenz","metadata_general_date":"Aufnahmedatum","metadata_camera":"Kamera","metadata_camera_make":"Hersteller","metadata_camera_model":"Modell","metadata_camera_type":"Typ","metadata_camera_focal_length":"Brennweite","metadata_location":"Ort","metadata_location_longitude":"L\xe4ngengrad","metadata_location_latitude":"Breitengrad","metadata_location_orientation":"Aufnahmerichtung","metadata_location_precision":"Pr\xe4zision der Positionierung","metadata_exif":"EXIF / XMP","minimize":"Widget verbergen, sie k\xf6nnen es \xfcber die Schaltfl\xe4che in der linken unteren Ecke wieder einblenden","map_theme_age_4":"< 1 Monat","error_subtitle":"Bitte versuchen sie es sp\xe4ter erneut, oder schauen sie in die Web-Browser-Konsole f\xfcr mehr Details.","moveLeft":"Nach links","share_rss_title":"RSS Feed neuer Sequenzen auf dem aktuell sichtbaren Kartenbereich","error_webgl":"WebGL wird von ihrem Browser nicht unterst\xfctzt","metadata_general_license_link":"Volle Lizenzbeschreibung ansehen","share_embed_docs":"Mehr \xfcber die Einbettungs-Konfiguration lesen","report_nature":{"":"Art des Problems ausw\xe4hlen\u2026","inappropriate":"Bild ist unangemessen (irrelevant, Nacktheit, ...)","picture_low_quality":"Bild hat eine sehr schlechte Qualit\xe4t","blur_missing":"Das Gesicht einer Person oder ein KFZ-Kennzeichen ist sichtbar","blur_excess":"Ein Objekt das nicht unkenntlich gemacht werden muss wurde unkenntlich gemacht","privacy":"Ein privater Pfad oder ein privates Grundst\xfcck ist sichtbar","mislocated":"Bild ist falsch auf der Karte verortet","copyright":"Bild verletzt das Urheberrecht","other":"Andere Art von Problem"},"report_details_placeholder":"Sie k\xf6nnen optionale Details \xfcber das Problem hinzuf\xfcgen","report_auth":"Dieser Report wird durch ihren Account \\"{a}\\" gesendet","report_nature_label":"Art des Problems","report_whole_sequence":"Dies betrifft die gesamte Sequenz","report_details":"Weitere Details","report_email":"Ihre Email","report_email_placeholder":"Optional","report_submit":"Absenden","report_success":"Ihr Report wurde erfolgreich gesendet. Er wird so schnell wie m\xf6glich \xfcberpr\xfcft.","report_failure":"Ein Fehler ist bei der Erstellung des Reports aufgetreten: {e}. Bitte versuchen sie es erneut.","report":"Foto melden","legend_title":"Zeige Bilderdetails","report_wait":"Bericht senden\u2026","error_click":"Weiter","error_retry":"Bitte sp\xe4ter erneut versuchen","metadata_camera_resolution":"Aufl\xf6sung","filter_user_mypics":"Meine Fotos","metadata_quality_missing":"kein Wert im Foto gesetzt","filter_date_1month":"1 Monat","filter_date_1year":"1 Jahr","filter_qualityscore":"Qualit\xe4tswert","filter_qualityscore_help":"Klicken, um zu aktivieren oder deaktivieren","map_theme_score":"Qualit\xe4tswert","metadata_quality":"Qualit\xe4tswert","metadata_quality_help":"Erfahre mehr \xfcber den Qualit\xe4tswert","metadata_quality_resolution_score":"Aufl\xf6sungswertung","metadata_quality_gps_score":"Positionswertung","metadata_quality_score":"Gesamtwertung","qualityscore_title":"\xdcber den Qualit\xe4tsfaktor","qualityscore_doc_link":"Weitere Informationen zur Berechnung des Qualit\xe4tsfaktors findest du in unserer Dokumentation.","qualityscore_doc_1":"Panoramax bietet einen Qualit\xe4tsfaktor f\xfcr jedes Bild. Es erm\xf6glicht eine einfache Kartenfilterung und eine umfassende Anzeige der Verf\xfcgbarkeit hochwertiger Bilder.","qualityscore_doc_2":"Die Note wird den Benutzern als A/B/C/D/E-Bewertung angezeigt (A ist die beste, E die schlechteste) und anhand dieser Skala grafisch dargestellt:","qualityscore_doc_3":"Die Berechnung erfolgt auf der Grundlage der GPS-Genauigkeit und der Bildaufl\xf6sung. Ein professionelles System wird mit A bewertet, eine 360-Grad-Action-Kamera mit B und ein Smartphone mit C/D/E.","minimize_short":"Verbergen"},"psv":{"twoFingers":"Nutzen sie zwei Finger zum navigieren","ctrlZoom":"Nutzen sie Strg+Scrollen um das Bild zu zoomen","loadError":"Das Panorama konnte nicht geladen werden"},"map":{"thumbnail":"Vorschau des marktierten Fotos","not_public":"Nicht \xf6ffentlich sichtbar","loading":"Laden\u2026","slow_loading":"Die Karte wird nur langsam geladen und k\xf6nnte fehlerhaft erscheinen"},"maplibre":{"GeolocateControl.FindMyLocation":"Meinen Standort finden","GeolocateControl.LocationNotAvailable":"Standort nicht verf\xfcgbar"}}')},389:F=>{"use strict";F.exports=JSON.parse('{"psv":{"twoFingers":"Use two fingers to navigate","ctrlZoom":"Use ctrl + scroll to zoom the image","loadError":"The panorama can\'t be loaded"},"maplibre":{"GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available"},"gvs":{"zoom":"Zoom","zoomOut":"Zoom out","zoomIn":"Zoom in","moveUp":"Move up","moveDown":"Move down","moveLeft":"Move left","moveRight":"Move right","moveMiddle":"Center view","expand":"Expand","expand_info":"Make the widget appear in full page","show_psv":"Show the picture viewer","show_map":"Show the map","minimize":"Hide this widget, you can show it again using button in bottom left corner","minimize_short":"Hide","options":"Options","filters":"Filters","layers":"Layers","search":"Search","search_empty":"No results found","search_address":"Search an address, city\u2026","search_user":"Search a username\u2026","share":"Share","share_links":"Links","share_page":"Link to this page","share_image":"HD Image","share_rss":"RSS feed","share_rss_title":"RSS feed of new sequences in the currently visible map area","share_embed":"Embed on your website","share_embed_docs":"Read more about embed configuration","share_print":"Print","copy":"Copy","copied":"Copied","error":"We have a problem\u2026","error_click":"Continue","error_retry":"Please retry later","sequence_next":"Next picture in sequence","sequence_play":"Play along this sequence","sequence_pause":"Pause sequence","sequence_prev":"Previous picture in sequence","sequence_more":"More play options","sequence_speed":"Player speed","legend_license":"License: {l}","legend_title":"Show details of picture","edit_osm":"Edit OSM","id":"iD","josm":"JOSM","josm_live":"Enable JOSM automatic sync on picture loading","loading_labels_serious":["\ud83d\uddfa\ufe0f Loading map data","\ud83d\udda5\ufe0f Querying API","\ud83d\uddbc\ufe0f Loading thumbnails","\ud83d\udd0d Analyzing EXIF metadata","\ud83c\udfd8\ufe0f 3D rendering","\ud83d\udcf7 Initializing 360\xb0 pictures","\ud83d\udfe0 Colour balancing","\ud83d\udcaf Computing Quality Score \xa9"],"loading_labels_fun":["\ud83e\udd8c Detecting deer crossing signs","\ud83d\ude98 Searching Panoramax Car \xa9","\u2615 Injecting caffeine","\ud83d\ude00 Smile, you\'re mapped!","\ud83d\udc08 Sharing cat pictures","\ud83d\ude34 Reducing procrastination","\ud83e\uded6 Brewing tea","\ud83d\udc27 Opening source code","\ud83d\ude87 Indexing Underground stations","\ud83e\uddf9 Metadata cleanup","\ud83d\ude92 Sending fire station photos","\ud83d\udeb2 Greenways update","\ud83d\ude89 Station platform walkthrough","\ud83d\udef0\ufe0f Searching satellites","\ud83d\udc65 Writing personas","\ud83d\udc1f Locating chip shops","\ud83e\uddd1\u200d\ud83d\udcbb Debugging interface","\ud83d\udcc8 Incrementing statistics"],"error_psv":"Photo Sphere Viewer is not loading properly","error_pic":"Requested picture wasn\'t found","error_nopic":"No picture available at given position","error_api":"The pictures server is not available","error_webgl":"WebGL is not supported by your browser","error_josm":"JOSM doesn\'t respond, is it running and is remote enabled?","error_api_compatibility":"The pictures server is not compatible with this viewer version","filter_date":"Date","filter_date_1month":"1 month","filter_date_1year":"1 year","filter_user":"User","filter_user_mypics":"My pictures","filter_picture":"Picture type","filter_zoom_in":"Zoom-in to see this filter","picture_flat":"Classic","picture_360":"360\xb0","filter_qualityscore":"Quality score","filter_qualityscore_help":"Click to enable or disable","qualityscore_title":"About the quality score","qualityscore_doc_1":"Panoramax offers a Quality Score for each picture. It allows easy map filtering and comprehensive display of high-quality pictures availability.","qualityscore_doc_2":"The grade is shown to users as a A/B/C/D/E score (A is the best, E the worst), and shown graphically through this scale:","qualityscore_doc_3":"It is computed based on GPS precision and picture resolution. A professional system will have an A-rating, a 360\xb0 action camera will have a B-rating, and a smartphone will be C/D/E-rated.","qualityscore_doc_link":"More details about the Quality Score computation is available in our documentation.","map_background":"Map background","map_background_aerial":"Aerial","map_background_streets":"Streets","map_theme":"Map theme","map_theme_default":"Classic","map_theme_age":"Capture date","map_theme_age_1":"> 2 years","map_theme_age_2":"< 2 years","map_theme_age_3":"< 1 year","map_theme_age_4":"< 1 month","map_theme_type":"Camera type","map_theme_score":"Quality score","contrast":"Enable higher image contrast","metadata":"Picture metadata","metadata_general_picid":"Picture identifier","metadata_general_seqid":"Sequence identifier","metadata_general_picid_link":"Go to JSON description of the picture","metadata_general_seqid_link":"Go to JSON description of the sequence","metadata_general_author":"Author","metadata_general_license":"License","metadata_general_license_link":"See the full licence description","metadata_general_date":"Capture date","metadata_camera":"Camera","metadata_camera_make":"Make","metadata_camera_model":"Model","metadata_camera_type":"Type","metadata_camera_resolution":"Resolution","metadata_camera_focal_length":"Focal length","metadata_location":"Location","metadata_location_longitude":"Longitude","metadata_location_latitude":"Latitude","metadata_location_orientation":"Capture direction","metadata_location_precision":"Positioning precision","metadata_quality":"Quality score","metadata_quality_help":"Know more about Quality Score","metadata_quality_score":"Global score","metadata_quality_gps_score":"Positioning score","metadata_quality_resolution_score":"Resolution score","metadata_quality_missing":"no value set in picture","metadata_exif":"EXIF / XMP","metadata_exif_name":"Tag","metadata_exif_value":"Value","report":"Report picture","report_auth":"This report will be sent using your account \\"{a}\\"","report_nature_label":"Nature of the issue","report_nature":{"":"Select the nature of issue\u2026","blur_missing":"A person face or car plate is visible","blur_excess":"An object not needing blur is blurred","inappropriate":"Picture is inappropriate (unrelated, nudity\u2026)","privacy":"A private path or property is visible","picture_low_quality":"Picture is of very bad quality","mislocated":"Picture is badly positioned on map","copyright":"Picture infringes copyright","other":"Any other kind of issue"},"report_whole_sequence":"This concerns the entire sequence","report_details":"Additional details","report_details_placeholder":"Optional, you can add details about the issue and how this is concerning","report_email":"Your email","report_email_placeholder":"Optional","report_submit":"Submit","report_wait":"Sending report \u2026","report_success":"Report has been successfully sent. It will be reviewed as soon as possible.","report_failure":"An error occurred when creating report: {e}. Please try again later."},"map":{"loading":"Loading\u2026","thumbnail":"Thumbnail of hovered picture","not_public":"Not publicly visible","slow_loading":"Map is slow to load and could appear broken"}}')},9946:F=>{"use strict";F.exports=JSON.parse('{"psv":{"twoFingers":"Uzu du fingrojn por navigi","ctrlZoom":"Uzu ctrl + rulumo por zomi la bildon","loadError":"La bildo ne povas esti \u015dar\u011dita"},"gvs":{"zoom":"Zomo","zoomOut":"Malzomo","zoomIn":"Zomi","moveUp":"Movi supren","moveDown":"Movi malsupren","moveLeft":"Movi maldekstren","moveRight":"Movi dekstren","moveMiddle":"Centri vido","expand":"Pligrandigi","expand_info":"Aperigu la fenestra\u0135on en plena pa\u011do","show_psv":"Montri la bildspektilo","show_map":"Montri la mapo","minimize":"Maski la fenestra\u0135o, vu povas montri \u011din denove kun la butono en malsupra maldekstra angulo","sequence_prev":"Anta\u016da foto en la sekvenco","sequence_more":"Pli da ludopcioj","sequence_speed":"Rapideco de legado","sequence_next":"Sekva foto en la sekvenco","sequence_play":"Foliumi \u0109i tiun sinsekvon","sequence_pause":"Pa\u016dzi la sekvenco","copy":"Kopii","copied":"Kopiita","error":"Ni havas problemon\u2026","error_click":"Kontinui","error_retry":"Bonvolu reprovi poste","search_address":"Ser\u0109i adreson, urbon\u2026","filters":"Filtriloj","layers":"Tavoloj","search":"Ser\u0109i","share_embed_docs":"Pli pri enigito sur via retpa\u011daro","search_empty":"Neniu rezulto trovita","search_user":"Ser\u0109i uzantnomon\u2026","share":"Kunhavigi","share_links":"Ligiloj","share_page":"Ligilo de la retpa\u011do","share_image":"HD bildo","share_rss":"RSS abonfluo","share_rss_title":"RSS abonfluo de la novaj sekvecoj en la nuntempe videbla mapzono","share_embed":"Enigita en via retpa\u011daro","share_print":"Presi","edit_osm":"Modifi OSM","legend_license":"Rajtigilo : {l}","josm_live":"Ebligas a\u016dtomatan JOSM-sinkronigon dum \u015dar\u011do de bildo","loading_labels_serious":["\ud83d\uddfa\ufe0f \u015cargo de la bazmapon","\ud83d\udda5\ufe0f API demandado","\ud83d\uddbc\ufe0f \u015car\u011do de miniaturoj","\ud83d\udd0d Analizo de EXIF-metadatumoj","\ud83c\udfd8\ufe0f 3D-rendumo","\ud83d\udcf7 Inico de 360\xb0-bildoj","\ud83d\udfe0 Kolora ekvilibrigo","\ud83d\udcaf Kalkulo de kvalitpoentaro \xa9"],"legend_title":"Montri la detaloj de la bildo","error_api":"La bildservilo ne estas disponebla","error_josm":"JOSM ne respondis. \u0108u \u011di funkcias kaj la regilo estas \u015daltita?","error_webgl":"WebGL ne estas subtenata per via retumilo","loading_labels_fun":["\ud83e\udd8c Detekto de cervinaj vojmontriloj","\ud83d\ude98 Ser\u0109o de Panoramax-a\u016dto \xa9","\u2615 Injekto de kafeino","\ud83d\ude00 Ridetu, vi estas mapita!","\ud83d\udc08 Kunhavigo de katbildoj","\ud83d\ude34 Redukto de prokrastado","\ud83d\udcd6 Lernado de Esperanto","\ud83d\udc27 Malfermo de fontkodo","\ud83d\ude87 Indekso de subteraj stacioj","\ud83e\uddf9 Purigo de metadatumoj","\ud83d\ude92 Sendado de fotoj de fajrostacioj","\ud83d\udeb2 \u011cisdatigo de verdaj vojoj","\ud83d\ude89 Promenado tra stacioplatformoj","\ud83d\udef0\ufe0f Ser\u0109o de satelitoj","\ud83d\udc65 Verkado de roluloj","\u2747\ufe0f Lokalizo de la Esperanto-flagoj","\ud83e\uddd1\u200d\ud83d\udcbb Sencimigado de la interfaco","\ud83d\udcc8 Alkrementi de la statistikoj"],"picture_360":"360\xb0","picture_flat":"Klasika","report_nature_label":"Speco de problemo","report_nature":{"":"Elektu la specon de problemo\u2026","blur_missing":"Viza\u011do a\u016d numerplato estas videbla","copyright":"La bildo malobeas kopirajton","blur_excess":"Objekto kiu ne bezonis malklari\u011don estas malklarigita","inappropriate":"La bildo estas neta\u016dga (nevera, nudeco...)","privacy":"Privata vojo a\u016d poseda\u0135o estas videbla","picture_low_quality":"La bildo estas de tre malbona kvalito","mislocated":"La bildo estas malbone poziciigita sur la mapo","other":"\u0108ia alia speco de problemo"},"report":"Raporti bildon","report_auth":"\u0108i tiu raporto estos sendita per via konto \\"{a}\\"","filter_date":"Dato","filter_user_mypics":"Miaj fotoj","options":"Opcioj","error_api_compatibility":"La fotoservilo ne kongruas kun \u0109i tiu spektilo","filter_qualityscore":"Kvalitpoentaro","filter_qualityscore_help":"Alllaku por aktivigi a\u016d mal\u015dalti","map_theme_age":"Dato de fotado","map_theme_age_1":"> 2 jaroj","map_theme_age_2":"< 2 jaroj","map_theme_age_3":"< 1 jaro","map_theme_age_4":"< 1 monato","map_theme_score":"Kvalitpoentaro","metadata":"Metadatenoj de la bildo","map_theme_type":"Fotiltipo","metadata_general_seqid":"Sekvencidentigilo","metadata_camera_resolution":"Difino","metadata_quality_resolution_score":"Rezolucia poentaro","error_psv":"Foto-Sfera Spektilo ne \u015dar\u011di\u011das \u011duste","error_pic":"La petita bildo ne estis trovita","error_nopic":"Neniu bildo disponeblas \u0109e la donita pozicio","filter_user":"Uzanto","map_theme_default":"Klasika","filter_date_1month":"1 monato","filter_date_1year":"1 jaro","contrast":"Pliigi bildkontraston","metadata_general_picid":"Fotoidentigilo","filter_picture":"Bilda tipo","filter_zoom_in":"Zomu por vidi tiu filtrilo","map_background":"Bazmapo","map_background_aerial":"Aera","map_background_streets":"Stratoj","map_theme":"Mapa etoso","metadata_general_picid_link":"Iru al la JSON-priskribo de la foto","metadata_general_seqid_link":"Iru al la JSON-priskribo de la sekvenco","metadata_general_author":"A\u016dtoro","metadata_general_license":"Rajtigilo","metadata_general_license_link":"Vidi la kompletan rajtigilon en la priskribo","metadata_general_date":"Dato de la fotado","metadata_camera":"Fotilo","metadata_camera_make":"Faristo","metadata_camera_model":"\u015cablono","metadata_camera_type":"Tipo","metadata_camera_focal_length":"Fokuslongo","metadata_location":"Loko","metadata_location_longitude":"Longitudo","metadata_location_latitude":"Latitudo","metadata_location_orientation":"Fotada direkto","metadata_location_precision":"Pozicia precizeco","metadata_quality":"Kvalitpoentaro","metadata_quality_help":"Pli pri la Kvalitapoentaro","metadata_quality_score":"Malloka poentaro","metadata_quality_gps_score":"Pozicia poentaro","metadata_quality_missing":"neniu valoro en la bildo","metadata_exif":"EXIF / XMP","metadata_exif_name":"Etikedo","metadata_exif_value":"Valoro","report_whole_sequence":"\u0108i tio koncernas la tutan sekvencon","report_details":"Aliaj detaloj","report_email":"Via retpo\u015dto","report_submit":"Sendi","report_wait":"Sendante raporton\u2026","report_success":"La raporto estis sukcese sendita. \u011ci estos reviziita balda\u016d.","report_details_placeholder":"Opcie, vi povas aldoni detalojn pri la problemo","report_email_placeholder":"Opcie","report_failure":"Eraro okazis dum kreo de la raporto: {e}. Bonvolu provi denove poste.","qualityscore_doc_3":"\u011ci estas kalkulita surbaze de GPS-precizeco kaj bildrezolucio. Profesiaj sistemoj havos A-poentaron, 360\xb0-akcifotilo havos B-poentaron, kaj po\u015dtelefono havos C/D/E-poentaron.","qualityscore_title":"Pri la kvalita poentaro","qualityscore_doc_1":"Panoramax ofertas Kvalitan Poentaron por \u0109iu bildo. \u011ci ebligas facilan mapfiltradon kaj ampleksan vidigon de la havebleco de altkvalitaj bildoj.","qualityscore_doc_link":"Pli da detaloj pri la kalkulo de la Kvalita Poentaro estas disponeblaj en nia dokumentado.","minimize_short":"Maski","qualityscore_doc_2":"La poentaro estas montrita al uzantoj kiel litero A/B/C/D/E (A estas la plej bona, E la plej malbona) kaj grafike prezentita per \u0109i tiu skalo:"},"maplibre":{"GeolocateControl.FindMyLocation":"Trovi mian pozicion","GeolocateControl.LocationNotAvailable":"Loko ne disponeblas"},"map":{"slow_loading":"La mapo \u015dar\u011das malrapide kaj povus aperi rompi\u011dinta","loading":"\u015car\u011danto\u2026","thumbnail":"Miniaturo de la surflikta bildo","not_public":"Ne publike videbla"}}')},8302:F=>{"use strict";F.exports=JSON.parse('{"gvs":{"report_auth":"La denuncia se enviar\xe1 usando tu cuenta \xab{a}\xbb","report":"Denunciar imagen","report_nature_label":"Tipo de problema","report_nature":{"":"Selecciona el tipo de problema\u2026","blur_missing":"Se ve el rostro de una persona, o una matr\xedcula","blur_excess":"Est\xe1 borroso un objeto que no hac\xeda falta ocultar","inappropriate":"La imagen no es apropiada (irrelevante, desnudez, \u2026)","privacy":"Se ve un camino privado, o una propiedad privada","mislocated":"La localizaci\xf3n de la imagen en el mapa no es correcta","picture_low_quality":"La calidad de la imagen es pobre","copyright":"La imagen infringe derechos de autor","other":"Otro tipo de problema"},"sequence_more":"M\xe1s opciones de reproducci\xf3n","sequence_speed":"Velocidad de reproducci\xf3n","legend_license":"Licencia: {l}","edit_osm":"Editar OpenStreetMap","id":"iD","josm":"JOSM","josm_live":"Activar la sincronizaci\xf3n autom\xe1tica de JOSM cuando se carga una imagen","loading_labels_serious":["\ud83d\uddfa\ufe0f Cargando datos del mapa","\ud83d\udda5\ufe0f Consultando la API","\ud83d\uddbc\ufe0f Cargando vistas previas","\ud83d\udd0d Analizando metadatos EXIF","\ud83c\udfd8\ufe0f Renderizado 3D","\ud83d\udcf7 Preparando im\xe1genes 360\xb0","\ud83d\udfe0 Ajustando balance de color","\ud83d\udcaf C\xe1lculo del nivel de calidad \xa9"],"metadata":"Metadatos de la imagen","map_theme_type":"Tipo de c\xe1mara","contrast":"Dar m\xe1s contraste a la imagen","zoom":"Acercar/alejar","zoomOut":"Alejar","map_background_streets":"Calles","loading_labels_fun":["\ud83e\udd8c Detectando paneles de cruce de alces","\ud83d\ude98 Buscando el Coche Panoramax \xa9","\u2615 Inyectando cafe\xedna","\ud83d\ude00 \xa1Sonr\xede, est\xe1s siendo mapeado!","\ud83d\udc08 Compartiendo fotos de gatos","\ud83d\ude34 Reduciendo la procrastinaci\xf3n","\ud83e\uded6 Preparando el t\xe9","\ud83d\udc27 Abriendo el c\xf3digo fuente","\ud83d\ude87 Indexando estaciones del metro","\ud83e\uddf9 Limpieza de metadatos","\ud83d\ude92 Enviando fotos de estaciones de bomberos","\ud83d\udeb2 Actualizando v\xedas verdes","\ud83d\ude89 Paseo por el and\xe9n de la estaci\xf3n","\ud83d\udef0\ufe0f Buscando sat\xe9lites","\ud83d\udc65 Describiendo tipolog\xedas de persona","\ud83d\udc1f Localizando tiendas de fish & chips","\ud83e\uddd1\u200d\ud83d\udcbb Buscando gazapos de la interfaz","\ud83d\udcc8 Incrementando estad\xedsticas"],"metadata_general_license_link":"Ir a la descripci\xf3n completa de la licencia","metadata_general_picid":"Identificador de la imagen","metadata_general_license":"Licencia","report_details_placeholder":"Opcional; puedes a\xf1adir m\xe1s detalles sobre el problema y por qu\xe9 te preocupa","expand":"Expandir","expand_info":"Mostrar el elemento ocupando toda la p\xe1gina","show_psv":"Mostrar el visor de im\xe1genes","show_map":"Mostrar el mapa","zoomIn":"Acercar","moveUp":"Desplazar hacia arriba","moveDown":"Desplazar hacia abajo","moveLeft":"Desplazar hacia la izquierda","moveRight":"Desplazar hacia la derecha","moveMiddle":"Centrar la vista","minimize":"Esconder este elemento. Para mostrarlo de nuevo, pulsa el bot\xf3n en la esquina inferior izquierda","options":"Opciones","filters":"Filtros","layers":"Capas","search":"Buscar","search_empty":"No se encontraron resultados","search_address":"Buscar una direcci\xf3n, una ciudad, \u2026","search_user":"Buscar un usuario\u2026","share":"Compartir","share_links":"Enlaces","share_page":"Enlace a esta p\xe1gina","share_image":"Imagen de alta calidad","share_rss":"Flujo RSS","share_rss_title":"Flujo RSS de las nuevas secuencias en el \xe1rea visible del mapa","share_embed":"Incrustar en tu p\xe1gina web","share_embed_docs":"M\xe1s informaci\xf3n sobre c\xf3mo configurar el incrustado","share_print":"Imprimir","copy":"Copiar","copied":"Copiado","error":"Hay un problema\u2026","sequence_next":"Siguiente imagen de la secuencia","sequence_play":"Reproducir esta secuencia","sequence_pause":"Pausar la secuencia","sequence_prev":"Imagen anterior de la secuencia","error_click":"Continuar","error_retry":"Por favor, int\xe9ntalo m\xe1s tarde","error_psv":"El visor de fotos esf\xe9ricas no se carga correctamente","error_pic":"No se encuentra la imagen que quer\xedamos","error_nopic":"No hay im\xe1genes para la posici\xf3n dada","error_api":"El servidor de im\xe1genes no est\xe1 disponible","error_webgl":"Este navegador no admite WebGL","error_josm":"JOSM no responde. \xbfEst\xe1 abierto, y admite el modo de Control Remoto?","error_api_compatibility":"El servidor de im\xe1genes no es compatible con esta versi\xf3n del visor","filter_date":"Fecha","filter_user":"Usuario","filter_picture":"Tipo de imagen","filter_zoom_in":"Ac\xe9rcate para poder ver filtros","picture_flat":"Cl\xe1sico","picture_360":"360\xb0","filter_camera_model":"Por modelo de c\xe1mara","map_background":"Fondo de mapa","map_background_aerial":"Vista a\xe9rea","map_theme":"Tema de mapa","map_theme_default":"Cl\xe1sico","map_theme_age":"Fecha de toma de imagen","map_theme_age_1":"M\xe1s de dos a\xf1os","map_theme_age_2":"Menos de dos a\xf1os","map_theme_age_3":"Menos de un a\xf1o","map_theme_age_4":"Menos de un mes","metadata_general_seqid":"Identificador de la secuencia","metadata_general_picid_link":"Ir a la descripci\xf3n de la imagen en formato JSON","metadata_general_seqid_link":"Ir a la descripci\xf3n de la secuencia en formato JSON","metadata_general_author":"Autor","metadata_general_date":"Fecha de toma de imagen","metadata_camera":"C\xe1mara","metadata_camera_make":"Marca","metadata_camera_model":"Modelo","metadata_camera_type":"Tipo","metadata_camera_focal_length":"Distancia focal","metadata_location":"Localizaci\xf3n","metadata_location_longitude":"Longitud","metadata_location_latitude":"Latitud","metadata_location_orientation":"Orientaci\xf3n","metadata_location_precision":"Precisi\xf3n de la localizaci\xf3n","metadata_exif":"EXIF / XMP","metadata_exif_name":"Etiqueta","metadata_exif_value":"Valor","report_whole_sequence":"El problema afecta a la secuencia entera","report_details":"M\xe1s detalles","report_email":"Tu direcci\xf3n de correo electr\xf3nico","report_email_placeholder":"Opcional","report_submit":"Enviar","report_success":"La denuncia se ha enviado correctamente. Ser\xe1 revisada lo antes posible.","report_failure":"Ocurri\xf3 un error al crear la denuncia: {e}. Por favor, int\xe9ntalo m\xe1s tarde.","map_theme_score":"Nivel de calidad","filter_qualityscore":"Nivel de calidad","filter_qualityscore_help":"Haga clic para habilitar o deshabilitar","legend_title":"Ver detalles de la imagen","metadata_camera_resolution":"Resoluci\xf3n","metadata_quality":"Puntuaci\xf3n de calidad","metadata_quality_help":"M\xe1s informaci\xf3n sobre el nivel de calidad","metadata_quality_score":"Valoraci\xf3n general","metadata_quality_gps_score":"Puntuaci\xf3n de posicionamiento","metadata_quality_resolution_score":"Puntuaci\xf3n de resoluci\xf3n","metadata_quality_missing":"no hay informaci\xf3n en la imagen","report_wait":"Env\xedo del informe\u2026"},"psv":{"ctrlZoom":"Utiliza Control+rueda de desplazamiento para acercar/alejar","loadError":"Este panorama no se puede cargar","twoFingers":"Desplaza el mapa con dos dedos"},"maplibre":{"GeolocateControl.FindMyLocation":"Local\xedzame","GeolocateControl.LocationNotAvailable":"Localizaci\xf3n no disponible"},"map":{"loading":"Cargando\u2026","thumbnail":"Vista previa de la imagen bajo el cursor","not_public":"No es visible p\xfablicamente","slow_loading":"La mapa tarda mucho en cargarse y puede parecer rota"}}')},5222:F=>{"use strict";F.exports=JSON.parse('{"psv":{"twoFingers":"Utilisez deux doigts pour vous d\xe9placer","ctrlZoom":"Utilisez ctrl + scroll pour zoomer dans l\'image","loadError":"L\'image ne peut pas \xeatre charg\xe9e"},"maplibre":{"GeolocateControl.FindMyLocation":"Afficher ma position","GeolocateControl.LocationNotAvailable":"GPS non-disponible"},"gvs":{"zoom":"Zoom","zoomOut":"D\xe9zoomer","zoomIn":"Zoomer","moveUp":"Vers le haut","moveDown":"Vers le bas","moveLeft":"Vers la gauche","moveRight":"Vers la droite","moveMiddle":"Centrer la vue","expand":"Agrandir","expand_info":"Faire appara\xeetre ce widget en pleine page","show_psv":"Afficher la visionneuse de photos","show_map":"Afficher la carte","minimize":"Masquer ce widget, vous pouvez l\'afficher de nouveau gr\xe2ce au bouton dans le coin en bas \xe0 gauche","minimize_short":"Masquer","options":"Options","filters":"Filtres","layers":"Calques","search":"Rechercher","search_empty":"Aucun r\xe9sultat","search_address":"Rechercher une adresse, ville\u2026","search_user":"Rechercher un nom d\'utilisateur\u2026","share":"Partager","share_links":"Liens utiles","share_page":"Lien de la page","share_image":"Image HD","share_rss":"Flux RSS","share_rss_title":"Flux RSS des nouvelles s\xe9quences dans la zone visible sur la carte","share_embed":"Int\xe9gration sur votre site","share_embed_docs":"D\xe9couvrir plus de possibilit\xe9s pour l\'int\xe9gration sur votre site","share_print":"Imprimer","copy":"Copier","copied":"Copi\xe9","error":"On a un probl\xe8me\u2026","error_click":"Continuer","error_retry":"Merci de r\xe9essayer plus tard","sequence_next":"Photo suivante dans la s\xe9quence","sequence_play":"Parcourir cette s\xe9quence","sequence_pause":"Mettre en pause la s\xe9quence","sequence_prev":"Photo pr\xe9c\xe9dente dans la s\xe9quence","sequence_more":"Plus d\'options de lecture","sequence_speed":"Vitesse de lecture","legend_license":"Licence : {l}","legend_title":"Afficher les d\xe9tails de l\'image","edit_osm":"Contribuer sur OSM","id":"iD","josm":"JOSM","josm_live":"Active la synchronisation automatique de JOSM lors du chargement d\'une photo","loading_labels_serious":["\ud83d\uddfa\ufe0f Chargement du fond de carte","\ud83d\udda5\ufe0f Interrogation de l\'API","\ud83d\uddbc\ufe0f Chargement des miniatures","\ud83d\udd0d Analyse des m\xe9tadonn\xe9es EXIF","\ud83c\udfd8\ufe0f Cr\xe9ation du rendu 3D","\ud83d\udcf7 Initialisation des vues 360\xb0","\ud83d\udfe0 \xc9quilibrage des couleurs","\ud83d\udcaf Calcul du score qualit\xe9 \xa9"],"loading_labels_fun":["\ud83e\udd8c D\xe9tection des panneaux biche","\ud83d\ude98 Recherche de la Panoramax Car \xa9","\u2615 Injection de caf\xe9ine","\ud83d\ude00 Souriez, vous \xeates mapp\xe9s !","\ud83d\udc08 Partage de photos de chats","\ud83d\ude34 R\xe9duction de la procrastination","\ud83c\uddf7\ud83c\uddea Chargement : 974%","\ud83d\udc27 Ouverture du code source","\ud83e\udd81 Indexation des traboules","\ud83e\uddf9 Nettoyage des m\xe9tadonn\xe9es","\ud83d\ude92 Envoi des photos du SDIS","\ud83d\udeb2 Mise \xe0 jour des voies vertes","\ud83d\ude89 Remont\xe9e des quais de gare","\ud83d\udef0\ufe0f Recherche de satellites","\ud83d\udc65 \xc9criture des personas","\ud83e\udd5e Localisation des cr\xeaperies","\ud83e\uddd1\u200d\ud83d\udcbb D\xe9boguage de l\'interface","\ud83d\udcc8 Incr\xe9mentation des statistiques"],"error_psv":"Photo Sphere Viewer ne s\'est pas charg\xe9 correctement","error_pic":"La photo demand\xe9e est introuvable","error_nopic":"Aucune photo disponible autour de la localisation recherch\xe9e","error_api":"Le serveur de photos n\'est pas disponible","error_webgl":"WebGL n\'est pas support\xe9 par votre navigateur","error_josm":"JOSM n\'a pas r\xe9pondu, est-il bien lanc\xe9 et la t\xe9l\xe9commande activ\xe9e ?","error_api_compatibility":"Le serveur de photos n\'est pas compatible avec cette visionneuse","filter_date":"Date","filter_date_1month":"1 mois","filter_date_1year":"1 an","filter_user":"Utilisateur","filter_user_mypics":"Mes photos","filter_picture":"Type d\'image","picture_flat":"Classique","picture_360":"360\xb0","filter_qualityscore":"Score de qualit\xe9","filter_qualityscore_help":"Cliquez pour activer ou d\xe9sactiver","qualityscore_title":"\xc0 propos du score qualit\xe9","qualityscore_doc_1":"Panoramax propose un Score de Qualit\xe9 pour chacune de ses photos. Cela facilite le filtre et la recherche de photos de bonne qualit\xe9 sur la carte.","qualityscore_doc_2":"Le score est affich\xe9 sous la forme d\'une lettre A/B/C/D/E (A \xe9tant le meilleur, E le moins bon), et visualisable gr\xe2ce \xe0 cette \xe9chelle :","qualityscore_doc_3":"Il est calcul\xe9 en fonction de la pr\xe9cision du GPS ainsi que la r\xe9solution de la photo. Un mat\xe9riel professionnel aura une note de A, une cam\xe9ra sportive 360\xb0 une note de B, et un smartphone une note de C \xe0 E.","qualityscore_doc_link":"Plus d\'infos sur le calcul du Score Qualit\xe9 dans notre documentation.","filter_zoom_in":"Zoomez plus pour voir ce filtre","map_background":"Fond de carte","map_background_aerial":"Satellite","map_background_streets":"Plan","map_theme":"Rendu de carte","map_theme_default":"Classique","map_theme_age":"Date de prise de vue","map_theme_age_1":"> 2 ans","map_theme_age_2":"< 2 ans","map_theme_age_3":"< 1 an","map_theme_age_4":"< 1 mois","map_theme_type":"Type de cam\xe9ra","map_theme_score":"Score de qualit\xe9","contrast":"Augmenter le contraste de l\'image","metadata":"M\xe9tadonn\xe9es de la photo","metadata_general_picid":"Identifiant de photo","metadata_general_seqid":"Identifiant de s\xe9quence","metadata_general_picid_link":"Aller au descriptif JSON de la photo","metadata_general_seqid_link":"Aller au descriptif JSON de la s\xe9quence","metadata_general_author":"Auteur","metadata_general_license":"Licence","metadata_general_license_link":"Voir la description compl\xe8te de la licence","metadata_general_date":"Date de prise de vue","metadata_camera":"Appareil","metadata_camera_make":"Fabricant","metadata_camera_model":"Mod\xe8le","metadata_camera_type":"Type","metadata_camera_resolution":"R\xe9solution","metadata_camera_focal_length":"Longueur focale","metadata_location":"Localisation","metadata_location_longitude":"Longitude","metadata_location_latitude":"Latitude","metadata_location_orientation":"Direction de prise de vue","metadata_location_precision":"Pr\xe9cision du positionnement","metadata_quality":"Score de qualit\xe9","metadata_quality_help":"En savoir plus sur le score de qualit\xe9","metadata_quality_score":"Note globale","metadata_quality_gps_score":"Note du positionnement","metadata_quality_resolution_score":"Note de la r\xe9solution","metadata_quality_missing":"pas d\'info dans l\'image","metadata_exif":"EXIF / XMP","metadata_exif_name":"Balise","metadata_exif_value":"Valeur","report":"Signaler la photo","report_auth":"Ce signalement sera envoy\xe9 en utilisant votre compte \\"{a}\\"","report_nature_label":"Nature du probl\xe8me","report_nature":{"":"S\xe9lectionnez la nature du probl\xe8me\u2026","blur_missing":"Un visage ou une plaque d\'immatriculation est visible","blur_excess":"Un objet qui ne n\xe9cessite pas de floutage est flout\xe9","inappropriate":"L\'image est inappropri\xe9e (non pertinente, nudit\xe9\u2026)","privacy":"Un chemin priv\xe9 ou une propri\xe9t\xe9 priv\xe9e est visible","picture_low_quality":"L\'image est de mauvaise qualit\xe9","mislocated":"L\'image est mal g\xe9olocalis\xe9e","copyright":"L\'image enfreint les droits d\'auteur","other":"Tout autre type de probl\xe8me"},"report_whole_sequence":"Cela concerne toute la s\xe9quence","report_details":"D\xe9tails suppl\xe9mentaires","report_details_placeholder":"Optionnel, vous pouvez ajouter des d\xe9tails sur le probl\xe8me","report_email":"Votre email","report_email_placeholder":"Optionnel","report_submit":"Envoyer","report_wait":"Envoi du signalement en cours\u2026","report_success":"Le signalement a \xe9t\xe9 envoy\xe9 avec succ\xe8s. Il sera examin\xe9 d\xe8s que possible.","report_failure":"Une erreur est survenue lors de la cr\xe9ation du signalement : {e}. Veuillez r\xe9essayer plus tard."},"map":{"loading":"Chargement\u2026","thumbnail":"Miniature de la photo survol\xe9e","not_public":"Masqu\xe9 au public","slow_loading":"La carte est longue \xe0 charger et pourrait appara\xeetre cass\xe9e"}}')},6909:F=>{"use strict";F.exports=JSON.parse('{"psv":{"twoFingers":"K\xe9t ujjal navig\xe1lhat","ctrlZoom":"K\xf6zel\xedt\xe9s vagy t\xe1vol\xedt\xe1s: Ctrl + g\xf6rget\xe9s","loadError":"A panor\xe1ma nem t\xf6lthet\u0151 be"},"gvs":{"zoom":"Nagy\xedt\xe1s","zoomOut":"T\xe1vol\xedt\xe1s","zoomIn":"K\xf6zel\xedt\xe9s","moveUp":"Mozg\xe1s fel","moveDown":"Mozg\xe1s le","moveLeft":"Mozg\xe1s balra","moveRight":"Mozg\xe1s jobbra","moveMiddle":"N\xe9zet k\xf6z\xe9pre hoz\xe1sa","expand":"B\u0151v\xedt\xe9s","expand_info":"Widget megjelen\xedt\xe9se teljes oldalon","show_psv":"K\xe9pn\xe9zeget\u0151 megjelen\xedt\xe9se","show_map":"T\xe9rk\xe9p megjelen\xedt\xe9se","minimize":"Widget elrejt\xe9se; a bal als\xf3 sarokban l\xe9v\u0151 gombbal \xfajra megjelen\xedtheti","options":"Be\xe1ll\xedt\xe1sok","filters":"Sz\u0171r\u0151k","layers":"R\xe9tegek","share":"Megoszt\xe1s","search":"Keres\xe9s","search_empty":"Nincs tal\xe1lat","share_links":"Linkek","share_page":"Link erre az oldalra","share_image":"Nagy felbont\xe1s\xfa (HD) k\xe9p","share_rss":"RSS h\xedrcsatorna","share_rss_title":"A t\xe9rk\xe9p l\xe1that\xf3 ter\xfclet\xe9n l\xe9v\u0151 \xfaj sorozatok RSS-h\xedrcsatorn\xe1ja","share_embed":"Be\xe1gyaz\xe1s a weboldaladon","share_print":"Nyomtat\xe1s","copy":"M\xe1sol\xe1s","copied":"M\xe1solva","error":"Ajjaj, baj van\u2026","error_subtitle":"Pr\xf3b\xe1lja \xfajra k\xe9s\u0151bb, vagy n\xe9zze meg a b\xf6ng\xe9sz\u0151konzolt a tov\xe1bbi r\xe9szletek\xe9rt.","sequence_next":"A sorozat k\xf6vetkez\u0151 k\xe9pe","sequence_play":"Sorozat lej\xe1tsz\xe1sa","sequence_pause":"Sorozatlej\xe1tsz\xe1s sz\xfcneteltet\xe9se","sequence_prev":"A sorozat el\u0151z\u0151 k\xe9pe","sequence_more":"Tov\xe1bbi lej\xe1tsz\xe1si lehet\u0151s\xe9gek","sequence_speed":"Lej\xe1tsz\xe1s sebess\xe9ge","legend_license":"Licenc: {l}","edit_osm":"OSM szerkeszt\xe9se","id":"iD","josm":"JOSM","josm_live":"JOSM automatikus szinkroniz\xe1l\xe1s\xe1nak enged\xe9lyez\xe9se k\xe9pbet\xf6lt\xe9skor","loading_labels_serious":["\ud83d\uddfa\ufe0f T\xe9rk\xe9padatok bet\xf6lt\xe9se","\ud83d\udda5\ufe0f API lek\xe9rdez\xe9se","\ud83d\uddbc\ufe0f B\xe9lyegk\xe9pek bet\xf6lt\xe9se","\ud83d\udd0d EXIF metaadatok elemz\xe9se","\ud83c\udfd8\ufe0f 3D megjelen\xedt\xe9s","\ud83d\udcf7 360\xb0-os k\xe9pek inicializ\xe1l\xe1sa","\ud83d\udfe0 Sz\xednek kiegyenl\xedt\xe9se","\ud83d\udcaf Min\u0151s\xe9gi pontsz\xe1m kisz\xe1m\xedt\xe1sa \xa9"],"loading_labels_fun":["\ud83e\udd8c Vadvesz\xe9lyt jelz\u0151 t\xe1bla \xe9szlel\xe9se","\ud83d\ude98 Panoramax aut\xf3 \xa9 keres\xe9se","\u2615 Koffeininjekci\xf3","\ud83d\ude00 Mosolyogj, fel lett\xe9l t\xe9rk\xe9pezve!","\ud83d\udc08 Kiscic\xe1s k\xe9pek megoszt\xe1sa","\ud83d\ude34 Halogat\xe1s cs\xf6kkent\xe9se","\ud83e\uded6 Tea megf\u0151z\xe9se","\ud83d\udc27 Forr\xe1sk\xf3d felnyit\xe1sa","\ud83d\ude87 Metr\xf3\xe1llom\xe1sok indexel\xe9se","\ud83e\uddf9 Metaadatok tisztogat\xe1sa","\ud83d\ude92 T\u0171zolt\xf3s\xe1gr\xf3l sz\xf3l\xf3 fot\xf3k bek\xfcld\xe9se","\ud83d\udeb2 Z\xf6ldutak friss\xedt\xe9se","\ud83d\ude89 Peronok bej\xe1r\xe1sa","\ud83d\udef0\ufe0f M\u0171holdak keres\xe9se","\ud83d\udc65 Person\xe1k meg\xedr\xe1sa","\ud83d\udc1f S\xfcltkrumplikap\xf3k lokaliz\xe1l\xe1sa","\ud83e\uddd1\u200d\ud83d\udcbb Hibakeres\u0151 fel\xfclet","\ud83d\udcc8 Statisztika n\xf6vel\xe9se"],"error_psv":"A Photo Sphere Viewer (g\xf6mbpanor\xe1ma-n\xe9zeget\u0151) nem t\xf6lt\u0151dik be megfelel\u0151en","error_pic":"A k\xe9rt k\xe9p nem tal\xe1lhat\xf3","error_nopic":"Az adott helyen nem \xe9rhet\u0151 el k\xe9p","error_api":"A k\xe9pkiszolg\xe1l\xf3 nem \xe9rhet\u0151 el","error_webgl":"A WebGL nem t\xe1mogatott ebben a b\xf6ng\xe9sz\u0151ben","error_josm":"A JOSM nem v\xe1laszol. Val\xf3ban fut \xe9s el\xe9rhet\u0151 t\xe1volr\xf3l?","error_api_compatibility":"A k\xe9pkiszolg\xe1l\xf3 nem kompatibilis a k\xe9pn\xe9zeget\u0151 ezen verzi\xf3j\xe1val","filter_date":"D\xe1tum szerint","filter_user":"Felhaszn\xe1l\xf3 szerint","filter_picture":"K\xe9pt\xedpus szerint","picture_flat":"Klasszikus","picture_360":"360\xb0","filter_camera_model":"Kameramodell szerint","map_background":"T\xe9rk\xe9ph\xe1tt\xe9r","map_background_aerial":"L\xe9gi felv\xe9tel","map_background_streets":"k\xe9pUtca","map_theme":"T\xe9rk\xe9p t\xe9m\xe1ja","map_theme_default":"Klasszikus","map_theme_age":"K\xe9pk\xe9sz\xedt\xe9s ideje","map_theme_age_1":"> 2 \xe9ve","map_theme_age_2":"< 2 \xe9ve","map_theme_age_3":"< 1 \xe9ve","map_theme_age_4":"< 1 h\xf3napja","map_theme_type":"Kamerat\xedpus","contrast":"Nagyobb k\xe9pkontraszt enged\xe9lyez\xe9se","metadata":"K\xe9p metaadatai","metadata_general_picid":"K\xe9p azonos\xedt\xf3js","metadata_general_seqid":"Sorozat azonos\xedt\xf3ja","metadata_general_picid_link":"Ugr\xe1s a k\xe9p JSON le\xedr\xe1s\xe1hoz","metadata_general_seqid_link":"Ugr\xe1s a sorozat JSON le\xedr\xe1s\xe1hoz","metadata_general_author":"Szerz\u0151","metadata_general_license":"Licenc (enged\xe9ly)","metadata_general_license_link":"Ugr\xe1s a licenc teljes le\xedr\xe1s\xe1hoz","metadata_general_date":"K\xe9sz\xedt\xe9s d\xe1tuma","metadata_camera":"Kamera","metadata_camera_make":"Gy\xe1rt\xf3","metadata_camera_model":"Modell","metadata_camera_type":"T\xedpus","metadata_camera_focal_length":"Gy\xfajt\xf3t\xe1vols\xe1g","metadata_location":"Helysz\xedn","metadata_location_longitude":"Hossz\xfas\xe1g","metadata_location_latitude":"Sz\xe9less\xe9g","metadata_location_orientation":"Felv\xe9tel ir\xe1nya","metadata_location_precision":"Helymeghat\xe1roz\xe1s pontoss\xe1ga","metadata_exif":"EXIF / XMP","metadata_exif_name":"C\xedmke","metadata_exif_value":"\xc9rt\xe9k","report":"K\xe9p bejelent\xe9se","report_auth":"A jelent\xe9s a fi\xf3kod ({a}) felhaszn\xe1l\xe1s\xe1val lesz elk\xfcldve","report_nature":{"":"Probl\xe9ma jelleg\xe9nek kiv\xe1laszt\xe1sa\u2026","blur_missing":"A k\xe9pen l\xe1tszik egy szem\xe9ly arca vagy egy rendsz\xe1mt\xe1bla","blur_excess":"A k\xe9pen el van hom\xe1lyos\xedtva egy olyan objektum, amelynek \xe9lesnek kellene lennie","inappropriate":"A k\xe9p nem megfelel\u0151 (irrelev\xe1ns, meztelens\xe9get jelen\xedt meg stb.)","privacy":"A k\xe9pen mag\xe1n\xfat vagy mag\xe1nter\xfclet l\xe1that\xf3","picture_low_quality":"A k\xe9p nagyon rossz min\u0151s\xe9g\u0171","mislocated":"A k\xe9p rosszul van elhelyezve a t\xe9rk\xe9pen","copyright":"A k\xe9p szerz\u0151i jogot s\xe9rt","other":"B\xe1rmilyen m\xe1s jelleg\u0171 probl\xe9ma"},"report_nature_label":"Probl\xe9ma jellege","report_details":"Tov\xe1bbi r\xe9szletek","filter_zoom_in":"Nagy\xedts a sz\u0171r\u0151k l\xe1that\xf3v\xe1 t\xe9tel\xe9hez","report_email":"E-mail-c\xedm","report_email_placeholder":"Nem k\xf6telez\u0151","report_submit":"Bek\xfcld\xe9s","report_success":"A jelent\xe9s sikeresen be lett k\xfcldve; a lehet\u0151 leghamarabb megvizsg\xe1ljuk.","report_failure":"Hiba t\xf6rt\xe9nt a jelent\xe9s l\xe9trehoz\xe1sakor: {e}. K\xe9rj\xfck, pr\xf3b\xe1ld meg k\xe9s\u0151bb \xfajra.","search_user":"Felhaszn\xe1l\xf3n\xe9v keres\xe9se\u2026","search_address":"C\xedm, v\xe1ros stb. keres\xe9se\u2026","share_embed_docs":"Tov\xe1bbi inform\xe1ci\xf3 a be\xe1gyaz\xe1s konfigur\xe1l\xe1s\xe1r\xf3l","error_click":"Kattints a folytat\xe1shoz","error_retry":"K\xe9rj\xfck, pr\xf3b\xe1ld meg k\xe9s\u0151bb","legend_title":"K\xe9p adatainak megjelen\xedt\xe9se","report_whole_sequence":"A teljes sorozatra vonatkozik","report_wait":"Jelent\xe9s bek\xfcld\xe9se folyamatban\u2026","report_details_placeholder":"Megadhatsz tov\xe1bbi r\xe9szleteket a probl\xe9m\xe1r\xf3l (nem k\xf6telez\u0151)","filter_qualityscore_help":"Kattints az enged\xe9lyez\xe9shez vagy a letilt\xe1shoz","filter_qualityscore":"Min\u0151s\xe9gi pontsz\xe1m","map_theme_score":"Min\u0151s\xe9gi pontsz\xe1m","metadata_camera_resolution":"Felbont\xe1s","metadata_quality":"Min\u0151s\xe9gi pontsz\xe1m","metadata_quality_help":"Tov\xe1bbi tudnival\xf3k a min\u0151s\xe9gi pontsz\xe1mr\xf3l","metadata_quality_score":"\xd6sszes\xedtett pontsz\xe1m","metadata_quality_gps_score":"Pozicion\xe1l\xe1si pontsz\xe1m","metadata_quality_resolution_score":"Felbont\xe1si pontsz\xe1m","metadata_quality_missing":"a k\xe9pben nincs megadva \xe9rt\xe9k"},"map":{"loading":"Bet\xf6lt\xe9s\u2026","thumbnail":"A kurzor alatti k\xe9p b\xe9lyegk\xe9pe","not_public":"Nem l\xe1that\xf3 nyilv\xe1nosan","slow_loading":"A t\xe9rk\xe9p lassan t\xf6lt\u0151dik be, \xe9s lehet, hogy lerobbant"},"maplibre":{"GeolocateControl.FindMyLocation":"Tart\xf3zkod\xe1si hely megtal\xe1l\xe1sa","GeolocateControl.LocationNotAvailable":"Tart\xf3zkod\xe1si hely nem \xe9rhet\u0151 el"}}')},4895:F=>{"use strict";F.exports=JSON.parse('{"gvs":{"expand":"Espandi","zoomOut":"Rimpicciolisci","zoomIn":"Ingrandisci","zoom":"Zoom","moveUp":"Muovi in alto","moveDown":"Muovi in basso","moveLeft":"Muovi a sinistra","moveRight":"Muovi a destra","expand_info":"Fai apparire il widget a schermo pieno","options":"Opzioni","filters":"Filtri","layers":"Livelli","search":"Cerca","search_empty":"Nessun risultato trovato","search_address":"Cerca un indirizzo, citt\xe0\u2026","search_user":"Cerca un nome utente\u2026","share":"Condividi","share_links":"Collegamenti","share_page":"Collegamento a questa pagina","share_image":"Immagine HD","share_embed":"Incorpora nel tuo sito web","share_embed_docs":"Scopri di pi\xf9 sulla configurazione della incorporazione","share_print":"Stampa","copy":"Copia","copied":"Copiato","error":"Abbiamo un problema\u2026","error_click":"Continuare","error_retry":"Riprovare pi\xf9 tardi","sequence_play":"Riproduci questa sequenza","sequence_pause":"Pausa la sequenza","sequence_speed":"Velocit\xe0 di riproduzione","legend_license":"Licenza: {l}","legend_title":"Mostra dettagli della foto","edit_osm":"Modifica OSM","loading_labels_serious":["\ud83d\uddfa\ufe0f Caricamento dei dati della mappa","\ud83d\udda5\ufe0f Interrogazione delle API","\ud83d\uddbc\ufe0f Caricamento delle miniature","\ud83d\udd0d Analisi dei metadata EXIF","\ud83c\udfd8\ufe0f Creazione del rendering 3D","\ud83d\udcf7 Inizializzazione delle foto a 360\xb0","\ud83d\udfe0 Bilanciamento del colore","\ud83d\udcaf Calcolo del punteggio della qualit\xe0 \xa9"],"loading_labels_fun":["\ud83e\udd8c Rilevazione dei cartelli di attraversamento dei cervi","\ud83d\ude98 Ricerca dell\u2019auto Panoramax \xa9","\u2615 Iniezione di caffeina","\ud83d\ude00 Sorridete, siete stati mappati!","\ud83d\udc08 Condivisione delle foto di gatti","\ud83d\ude34 Riduzione della procrastinazione","\ud83e\uded6 Preparazione del t\xe8","\ud83d\udc27 Apertura del codice sorgente","\ud83d\ude87 Indicizzazione delle stazioni della metro","\ud83e\uddf9 Pulizia dei metadata","\ud83d\ude92 Invio delle foto delle stazioni dei pompieri","\ud83d\udeb2 Aggiornamento delle strade verdi","\ud83d\ude89 Passeggiata sulle banchine della stazione","\ud83d\udef0\ufe0f Ricerca dei satelliti","\ud83d\udc65 Scrittura delle persone","\ud83d\udc1f Ricerca dei negozi di patatine fritte","\ud83e\uddd1\u200d\ud83d\udcbb Debug dell\u2019interfaccia","\ud83d\udcc8 Incremento delle statistiche"],"error_psv":"Il visualizzatore delle foto sferiche non si sta caricando correttamente","error_pic":"La foto richiesta non \xe8 stata trovata","error_nopic":"Nessuna foto disponibile alla posizione richiesta","error_api":"Il server delle foto non \xe8 disponibile","error_webgl":"Il tuo browser non supporta WebGL","error_josm":"JOSM non risponde, \xe8 in esecuzione con il controllo remoto abilitato?","error_api_compatibility":"Il server delle foto non \xe8 compatibile con questa versione del visualizzatore","filter_date":"Data","filter_date_1month":"1 mese","filter_date_1year":"1 anno","filter_user_mypics":"Le mie foto","filter_picture":"Tipo di foto","filter_zoom_in":"Ingrandisci per vedere questo filtro","picture_flat":"Classica","picture_360":"360\xb0","filter_qualityscore_help":"Clicca per abilitare o disabilitare","map_background":"Sfondo della mappa","map_background_aerial":"Satellite","map_background_streets":"Strade","map_theme":"Tema della mappa","map_theme_default":"Classica","map_theme_age":"Data di acquisizione","map_theme_age_2":"< 2 anni","map_theme_age_3":"< 1 anno","map_theme_age_4":"< 1 mese","map_theme_score":"Punteggio della qualit\xe0","contrast":"Abilita un maggiore contrasto della foto","metadata":"Metadata della foto","metadata_general_picid":"Identificatore della foto","metadata_general_picid_link":"Vai alla descrizione JSON della foto","metadata_general_seqid_link":"Vai alla descrizione JSON della sequenza","metadata_general_author":"Autore","metadata_general_license":"Licenza","metadata_general_date":"Data di acquisizione","metadata_camera":"Fotocamera","metadata_camera_make":"Costruttore","metadata_camera_model":"Modello","metadata_camera_type":"Tipo","metadata_camera_resolution":"Risoluzione","metadata_location":"Posizione","metadata_location_longitude":"Longitudine","metadata_location_latitude":"Latitudine","metadata_location_precision":"Precisione della posizione","metadata_quality":"Punteggio della qualit\xe0","metadata_quality_score":"Punteggio globale","metadata_quality_gps_score":"Punteggio sulla posizione","metadata_quality_resolution_score":"Punteggio della risoluzione","metadata_exif":"EXIF / XMP","metadata_exif_name":"Attributo","report_auth":"Questa segnalazione verr\xe0 inviata usando la tua utenza \u201c{a}\u201d","report_nature_label":"Natura del problema","report_nature":{"blur_excess":"Un oggetto che non ha bisogno di essere offuscato lo \xe8","inappropriate":"La foto \xe8 inappropriata (non pertinente, nudo, \u2026)","mislocated":"La foto non \xe8 ben posizionata sulla mappa","copyright":"La foto viola il diritto d\u2019autore","other":"Qualsiasi altro tipo di problema","picture_low_quality":"La foto \xe8 di qualit\xe0 scarsa","":"Selezione la natura del problema\u2026","blur_missing":"Sono visibili la faccia di una persona o la targa di un\u2019auto","privacy":"Sono visibili un sentiero o una propriet\xe0 privati"},"report_whole_sequence":"Riguarda l\u2019intera sequenza","report_details":"Ulteriori dettagli","report_email":"La tua e-mail","report_email_placeholder":"Facoltativo","report_submit":"Invia","report_wait":"Invio della segnalazione\u2026","report_failure":"\xc8 avvenuto un errore durante la creazione della segnalazione: {e}. Riprovare pi\xf9 tardi.","moveMiddle":"Centra la visuale","show_map":"Mostra la mappa","sequence_next":"Prossima foto nella sequenza","map_theme_age_1":"> 2 anni","map_theme_type":"Tipo di fotocamera","minimize":"Nascondi il widget, puoi mostrarlo di nuovo usando il pulsante nell\u2019angolo in basso a sinistra","metadata_general_license_link":"Vedi la descrizione completa della licenza","share_rss":"Feed RSS","show_psv":"Mostra il visualizzatore delle foto","share_rss_title":"Feed RSS delle nuove sequenze nell\u2019attuale area visibile della mappa","sequence_prev":"Foto precedente della sequenza","sequence_more":"Altre opzioni di riproduzione","josm_live":"Abilita la sincronizzazione automatica di JOSM al caricamento delle foto","metadata_general_seqid":"Identificatore della sequenza","metadata_camera_focal_length":"Lunghezza focale","filter_user":"Utente","metadata_location_orientation":"Direzione dello scatto","filter_qualityscore":"Punteggio della qualit\xe0","metadata_quality_help":"Per saperne di pi\xf9 sul punteggio di qualit\xe0","metadata_quality_missing":"Nessun valore impostato nella foto","metadata_exif_value":"Valore","report":"Segnala foto","report_details_placeholder":"Facoltativo, puoi aggiungere dei dettagli sul problema e sul perch\xe9 lo ritieni rilevante","report_success":"La segnalazione \xe8 stata inviata correttamente. Non appena possibile verr\xe0 esaminata.","minimize_short":"Nascondi","qualityscore_title":"Informazioni sul punteggio di qualit\xe0","qualityscore_doc_1":"Panoramax propone un Punteggio della qualit\xe0 per ogni foto. Ci\xf2 permette di filtrare facilmente la mappa e mostrare le foto di alta qualit\xe0 disponibili.","qualityscore_doc_2":"Il voto \xe8 mostrato agli utenti con un valore tipo A/B/C/D/E (A \xe8 il voto migliore, E il peggiore) e graficamente viene mostrato con la seguente scala:","qualityscore_doc_link":"Nella nostra documentazione sono presenti maggiori dettagli sul calcolo del Punteggio della qualit\xe0.","qualityscore_doc_3":"Esso \xe8 calcolato basandosi sulla precisione del GPS e sulla risoluzione della foto. Un sistema professionale avr\xe0 un punteggio A, un action camera a 360\xb0 avr\xe0 un punteggio B e uno smartphone verr\xe0 classificato come C, D o E."},"psv":{"loadError":"Impossibile caricare l\u2019immagine panoramica","ctrlZoom":"Utilizza Ctrl + rotellina del mouse per ingrandire l\u2019immagine","twoFingers":"Usa due dita per spostarti"},"maplibre":{"GeolocateControl.FindMyLocation":"Trova la mia posizione","GeolocateControl.LocationNotAvailable":"Posizione non disponibile"},"map":{"loading":"Caricamento\u2026","thumbnail":"Miniatura della foto passata con il mouse","not_public":"Non pubblicamente visibile","slow_loading":"La mappa impiega troppo tempo a caricarsi e potrebbe apparire a pezzi"}}')},9026:F=>{"use strict";F.exports=JSON.parse('{"gvs":{"moveRight":"Przesu\u0144 w prawo","sequence_speed":"Pr\u0119dko\u015b\u0107 odtwarzania","metadata_camera_model":"Model","search_address":"Szukaj adres, miasto\u2026","zoom":"Przybli\u017cenie","zoomIn":"Przybli\u017c","moveUp":"Przesu\u0144 w g\xf3r\u0119","moveDown":"Przesu\u0144 w d\xf3\u0142","moveLeft":"Przesu\u0144 w lewo","moveMiddle":"Wycentruj widok","expand":"Rozszerz","show_psv":"Poka\u017c przegl\u0105dark\u0119 zdj\u0119\u0107","show_map":"Poka\u017c map\u0119","options":"Opcje","filters":"Filtry","layers":"Warstwy","search":"Szukaj","search_empty":"Brak wynik\xf3w","search_user":"Szukaj nazwy u\u017cytkownika\u2026","share":"Udost\u0119pnij","share_links":"Linki","share_page":"Link do tej strony","share_rss":"Kana\u0142 RSS","share_print":"Drukuj","copy":"Kopiuj","copied":"Skopiowano","error":"Mamy problem\u2026","error_click":"Kliknij, aby kontynuowa\u0107","error_retry":"Prosz\u0119 spr\xf3buj p\xf3\u017aniej","sequence_next":"Nast\u0119pne zdj\u0119cie w sekwencji","sequence_pause":"Spauzuj sekwencj\u0119","sequence_prev":"Poprzednie zdj\u0119cie w sekwencji","sequence_more":"Wi\u0119cej opcji odtwarzania","legend_license":"Licencja: {l}","legend_title":"Poka\u017c szczeg\xf3\u0142y zdj\u0119cia","edit_osm":"Edytuj OSM","loading_labels_serious":["\ud83d\uddfa\ufe0f Wczytywanie danych mapy","\ud83d\udda5\ufe0f Odpytywanie API","\ud83d\uddbc\ufe0f Wczytywanie miniaturek","\ud83d\udd0d Analizowanie metadanych EXIF","\ud83c\udfd8\ufe0f Renderowanie 3D","\ud83d\udcf7 Inicjowanie zdj\u0119\u0107 360\xb0","\ud83d\udfe0 Balansowanie kolor\xf3w","\ud83d\udcaf Obliczanie oceny jako\u015bci \xa9"],"map_theme_age_2":"< 2 lata","map_theme_age_1":"> 2 lata","map_theme_age":"Data zrobienia","filter_picture":"Typ zdj\u0119cia","map_theme_age_3":"< rok","map_theme_age_4":"< miesi\u0105c","map_theme_type":"Typ aparatu","metadata":"Metadane zdj\u0119cia","metadata_general_picid":"Identyfikator zdj\u0119cia","metadata_general_seqid":"Identyfikator sekwencji","metadata_general_license":"Licencja","metadata_general_author":"Autor","metadata_camera":"Aparat","metadata_camera_type":"Typ","metadata_camera_resolution":"Rozdzielczo\u015b\u0107","metadata_location":"Lokalizacja","metadata_exif":"EXIF / XMP","metadata_quality_missing":"Brak warto\u015bci ustawionej w zdj\u0119ciu","metadata_exif_name":"Tag","metadata_exif_value":"Warto\u015b\u0107","report":"Zg\u0142o\u015b zdj\u0119cie","report_nature":{"privacy":"Prywatna droga lub w\u0142asno\u015b\u0107 widoczna","mislocated":"Zdj\u0119cie jest w z\u0142ym miejscu na mapie","copyright":"Zdj\u0119cie narusza prawa autorskie","picture_low_quality":"Zdj\u0119cie jest bardzo niskiej jako\u015bci","other":"Inny problem","":"Wybierz typ problemu\u2026","blur_missing":"Twarz osoby lub rejestracja samochodu jest widoczna","blur_excess":"Obiekt, kt\xf3ry nie wymaga zamazania jest zamazany","inappropriate":"Zdj\u0119cie jest niestosowne (niezwi\u0105zane, nago\u015b\u0107\u2026)"},"zoomOut":"Oddal","report_whole_sequence":"Dotyczy ca\u0142ej sekwencji","report_details":"Dodatkowe szczeg\xf3\u0142y","report_email":"Tw\xf3j adres email","report_email_placeholder":"Opcjonalne","report_submit":"Wy\u015blij","report_wait":"Wysy\u0142anie zg\u0142oszenia\u2026","report_success":"Zg\u0142oszenie zosta\u0142o wys\u0142ane. Zostanie przejrzane tak szybko jak to mo\u017cliwe.","share_rss_title":"Kana\u0142 RSS nowych sekwencji na widocznym obszarze mapy","loading_labels_fun":["\ud83e\udd8c Wykrywanie znak\xf3w przechodzenia jeleni",null,"\u2615 Wstrzykiwanie kofeiny","\ud83d\ude00 U\u015bmiechnij si\u0119, jeste\u015b mapowany!","\ud83d\udc08 Udost\u0119pnianie zdj\u0119\u0107 kot\xf3w","\ud83d\ude34 Zmniejszania prokrastynacji","\ud83e\uded6 Parzenie herbaty","\ud83d\udc27 Otwieranie kodu \u017ar\xf3d\u0142owego","\ud83d\ude87 Indeksowanie stacji metra","\ud83e\uddf9 Czyszczenie metadanych","\ud83d\ude92 Przesy\u0142anie zdj\u0119\u0107 remiz",null,"\ud83d\ude89 Przechodzenie peron\xf3w stacji","\ud83d\udef0\ufe0f Wyszukiwanie satelit",null,"\ud83d\udc1f Szukanie sklep\xf3w z frytkami i ryb\u0105","\ud83e\uddd1\u200d\ud83d\udcbb Interfejs debugowania","\ud83d\udcc8 Zwi\u0119kszanie statystyk"],"share_embed_docs":"Przeczytaj wi\u0119cej o konfiguracji osadzenia","sequence_play":"Odtw\xf3rz t\u0119 sekwencj\u0119","josm_live":"W\u0142\u0105cz automatyczn\u0105 synchronizacj\u0119 JOSM przy \u0142adowaniu zdj\u0119\u0107","error_api":"Serwer zdj\u0119\u0107 nie jest dost\u0119pny","error_webgl":"WebGL nie jest obs\u0142ugiwany przez t\u0119 przegl\u0105dark\u0119","error_api_compatibility":"Serwer zdj\u0119\u0107 nie jest kompatybilny z t\u0105 wersj\u0105 przegl\u0105darki","filter_date":"Data","filter_date_1month":"1 miesi\u0105c","filter_date_1year":"1 rok","filter_user":"U\u017cytkownik","filter_user_mypics":"Moje zdj\u0119cia","filter_zoom_in":"Przybli\u017c, aby filtry by\u0142y widoczne","picture_flat":"Klasyczne","picture_360":"360\xb0","filter_qualityscore":"Ocena jako\u015bci","map_background":"Podk\u0142ad mapowy","map_background_aerial":"Zdj\u0119cia lotnicze","map_background_streets":"Ulice","map_theme":"Motyw mapy","map_theme_default":"Klasyczny","map_theme_score":"Ocena jako\u015bci","contrast":"W\u0142\u0105cz wy\u017cszy kontrast zdj\u0119cia","metadata_general_picid_link":"Id\u017a do opisu zdj\u0119cia w JSON","metadata_general_seqid_link":"Id\u017a do opisu sekwencji w JSON","metadata_general_license_link":"Id\u017a do strony z pelnym opisem licencji","metadata_general_date":"Data zrobienia","metadata_camera_make":"Marka","metadata_camera_focal_length":"Ogniskowa","metadata_location_longitude":"D\u0142ugo\u015b\u0107 geograficzna","metadata_location_latitude":"Szeroko\u015b\u0107 geograficzna","metadata_location_orientation":"Kierunek robienia zdj\u0119cia","metadata_location_precision":"Precyzja lokalizacji","metadata_quality":"Ocena jako\u015bci","metadata_quality_help":"Dowiedz si\u0119 wi\u0119cej o ocenie jako\u015bci","metadata_quality_score":"Ocena globalna","metadata_quality_gps_score":"Ocena pozycji","metadata_quality_resolution_score":"Ocena rozdzielczo\u015bci","report_auth":"To zg\u0142oszenie b\u0119dzie wys\u0142anie przy pomocy Twojego konta \\"{a}\\"","report_nature_label":"Typ problemu","report_details_placeholder":"Opcjonalnie, mo\u017cesz doda\u0107 szczeg\xf3\u0142y o problemie","report_failure":"B\u0142\u0105d wyst\u0105pi\u0142 podczas tworzenia zg\u0142oszenia: {e}. Prosz\u0119 spr\xf3buj ponownie.","filter_qualityscore_help":"Kliknij, aby w\u0142\u0105czy\u0107 lub wy\u0142\u0105czy\u0107","error_josm":"JOSM nie odpowiada, czy jest uruchomiony i czy dost\u0119p zdalny jest w\u0142\u0105czony?"},"psv":{"twoFingers":"U\u017cyj dw\xf3ch palc\xf3w do nawigacji","ctrlZoom":"U\u017cyj ctrl + rolka myszy, aby powi\u0119kszy\u0107 zdj\u0119cie","loadError":"Panorama nie mo\u017ce by\u0107 za\u0142adowana"},"maplibre":{"GeolocateControl.FindMyLocation":"Znajd\u017a moj\u0105 lokalizacj\u0119","GeolocateControl.LocationNotAvailable":"Lokalizacja niedost\u0119pna"},"map":{"thumbnail":"Miniaturki najechanego zdj\u0119cia","not_public":"Niewidoczne publicznie","slow_loading":"Mapa \u0142aduje si\u0119 wolno i mo\u017ce si\u0119 wydawaj popsuta","loading":"\u0141adowanie\u2026"}}')},6984:F=>{"use strict";F.exports=JSON.parse('{"gvs":{"contrast":"\u589e\u52a0\u76f8\u7247\u5c0d\u6bd4\u5ea6","copied":"\u5df2\u8907\u88fd","copy":"\u8907\u88fd","edit_osm":"\u7de8\u8f2f OSM","error":"Panoramax \u7576\u6a5f\u4e86\u2026","error_api":"\u76f8\u7247\u4f3a\u670d\u5668\u7121\u6cd5\u4f7f\u7528","error_api_compatibility":"\u76f8\u7247\u4f3a\u670d\u5668\u548c\u6b64\u6aa2\u8996\u5668\u7684\u7248\u672c\u4e0d\u76f8\u5bb9","error_josm":"JOSM \u6c92\u6709\u56de\u61c9\uff0c\u5b83\u5df2\u7d93\u555f\u52d5\u4e14\u555f\u7528\u9060\u7aef\u63a7\u5236\u4e86\u55ce?","error_nopic":"\u641c\u5c0b\u7684\u4f4d\u7f6e\u9644\u8fd1\u6c92\u6709\u76f8\u7247","error_pic":"\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u76f8\u7247","error_psv":"\u7121\u6cd5\u6b63\u78ba\u8f09\u5165 Photo Sphere Viewer","error_subtitle":"\u8acb\u7a0d\u5f8c\u91cd\u8a66\u6216\u6aa2\u67e5\u700f\u89bd\u5668\u7684\u4e3b\u63a7\u53f0\u4ee5\u4e86\u89e3\u8a73\u60c5\u3002","error_webgl":"\u60a8\u7684\u700f\u89bd\u5668\u4e0d\u652f\u63f4 WebGL","expand":"\u5c55\u958b","expand_info":"\u5728\u6574\u500b\u756b\u9762\u986f\u793a\u6b64\u5c0f\u5de5\u5177","filter_camera_model":"\u6309\u76f8\u6a5f\u578b\u865f","filter_date":"\u65e5\u671f","filter_picture":"\u76f8\u7247\u985e\u578b","filter_user":"\u4f7f\u7528\u8005","filter_zoom_in":"\u62c9\u8fd1\u5730\u5716\u4ee5\u986f\u793a\u7be9\u9078\u7d50\u679c","filters":"\u7be9\u9078\u5668","id":"iD","josm":"JOSM","josm_live":"\u555f\u7528\u8f09\u5165\u76f8\u7247\u6642\u81ea\u52d5\u540c\u6b65 JOSM","layers":"\u5716\u5c64","legend_license":"\u6388\u6b0a: {l}","loading_labels_fun":["\ud83e\udd8c \u5075\u6e2c\u5230\u7576\u5fc3\u6885\u82b1\u9e7f\u6a19\u8a8c","\ud83d\ude98 \u6b63\u5728\u641c\u5c0b Panoramax \u6c7d\u8eca \xa9","\u2615 \u6ce8\u5165\u5496\u5561\u56e0","\ud83d\ude00 \u8acb\u5fae\u7b11\uff0c\u60a8\u5df2\u88ab\u6a19\u8a18\u5728\u5730\u5716\u4e0a\u4e86\uff01","\ud83d\udc08 \u6b63\u5728\u5206\u4eab\u8c93\u54aa\u7684\u76f8\u7247","\ud83d\ude34 \u6b63\u5728\u6e1b\u5c11\u5ef6\u9072","\ud83e\uded6 \u6b63\u5728\u6c8f\u58fa\u597d\u8336","\ud83d\udc27 \u6b63\u5728\u958b\u555f\u539f\u59cb\u78bc","\ud83d\ude87 \u6b63\u5728\u7d22\u5f15\u5730\u9435\u8eca\u7ad9","\ud83e\uddf9 \u6e05\u7406\u8a6e\u91cb\u8cc7\u6599","\ud83d\ude92 \u6b63\u5728\u50b3\u9001\u6d88\u9632\u968a\u7684\u76f8\u7247","\ud83d\udeb2 \u66f4\u65b0\u7da0\u9053","\ud83d\ude89 \u6b63\u5728\u901a\u904e\u8eca\u7ad9\u6708\u53f0","\ud83d\udef0\ufe0f \u6b63\u5728\u641c\u5c0b\u885b\u661f","\ud83d\udc65 \u6b63\u5728\u64b0\u5beb\u4eba\u7269\u8a8c","\ud83c\udf57 \u6b63\u5728\u5b9a\u4f4d\u9e79\u9165\u96de\u5e97","\ud83e\uddd1\u200d\ud83d\udcbb \u6b63\u5728\u5075\u932f\u4ecb\u9762","\ud83d\udcc8 \u7d71\u8a08\u6578\u64da\u6b63\u5728\u589e\u52a0"],"loading_labels_serious":["\ud83d\uddfa\ufe0f \u6b63\u5728\u8f09\u5165\u5730\u5716\u8cc7\u6599","\ud83d\udda5\ufe0f \u6b63\u5728\u67e5\u8a62 API","\ud83d\uddbc\ufe0f \u6b63\u5728\u8f09\u5165\u7e2e\u5716","\ud83d\udd0d \u6b63\u5728\u5206\u6790 EXIF \u8a6e\u91cb\u8cc7\u6599","\ud83c\udfd8\ufe0f \u6b63\u5728\u7b97\u7e6a 3D","\ud83d\udcf7 \u6b63\u5728\u521d\u59cb\u5316 360\xb0 \u76f8\u7247","\ud83d\udfe0 \u6b63\u5728\u5e73\u8861\u8272\u5f69","\ud83d\udcaf \u6b63\u5728\u8a08\u7b97\u54c1\u8cea\u5206\u6578 \xa9"],"map_background":"\u5730\u5716\u80cc\u666f","map_background_aerial":"\u885b\u661f","map_background_streets":"\u9810\u8a2d","map_theme":"\u5730\u5716\u4e3b\u984c","map_theme_age":"\u62cd\u651d\u6642\u9593","map_theme_age_1":"> 2 \u5e74","map_theme_age_2":"< 2 \u5e74","map_theme_age_3":"< 1 \u5e74","map_theme_age_4":"< 1 \u500b\u6708","map_theme_default":"\u7d93\u5178","map_theme_type":"\u76f8\u6a5f\u985e\u578b","metadata":"\u76f8\u7247\u8a6e\u91cb\u8cc7\u6599","metadata_camera":"\u76f8\u6a5f","metadata_camera_focal_length":"\u7126\u8ddd","metadata_camera_make":"\u88fd\u9020\u5546","metadata_camera_model":"\u578b\u865f","metadata_camera_type":"\u985e\u578b","metadata_exif":"EXIF / XMP","metadata_exif_name":"\u6a19\u7c64","metadata_exif_value":"\u503c","metadata_general_author":"\u4f5c\u8005","metadata_general_date":"\u62cd\u651d\u6642\u9593","metadata_general_license":"\u6388\u6b0a","metadata_general_license_link":"\u67e5\u770b\u5b8c\u6574\u6388\u6b0a\u689d\u6b3e","metadata_general_picid":"\u76f8\u7247\u8b58\u5225\u78bc","metadata_general_picid_link":"\u524d\u5f80\u672c\u76f8\u7247\u7684 JSON \u8aaa\u660e","metadata_general_seqid":"\u5e8f\u5217\u8b58\u5225\u78bc","metadata_general_seqid_link":"\u524d\u5f80\u672c\u5e8f\u5217\u7684 JSON \u8aaa\u660e","metadata_location":"\u5730\u9ede","metadata_location_latitude":"\u7def\u5ea6","metadata_location_longitude":"\u7d93\u5ea6","metadata_location_orientation":"\u62cd\u651d\u65b9\u5411","metadata_location_precision":"\u5b9a\u4f4d\u7cbe\u5ea6","minimize":"\u96b1\u85cf\u9019\u500b\u5c0f\u5de5\u5177\uff0c\u60a8\u53ef\u4ee5\u6309\u5de6\u4e0b\u89d2\u7684\u6309\u9215\u518d\u6b21\u986f\u793a\u5b83","moveDown":"\u4e0b\u79fb","moveLeft":"\u5de6\u79fb","moveMiddle":"\u756b\u9762\u7f6e\u4e2d","moveRight":"\u53f3\u79fb","moveUp":"\u4e0a\u79fb","options":"\u9078\u9805","picture_360":"360\xb0","picture_flat":"\u7d93\u5178","search":"\u641c\u5c0b","search_address":"\u641c\u5c0b\u5730\u5740\u3001\u57ce\u5e02\u2026","search_empty":"\u627e\u4e0d\u5230\u7d50\u679c","search_user":"\u641c\u5c0b\u5e33\u865f\u2026","sequence_more":"\u66f4\u591a\u64ad\u653e\u9078\u9805","sequence_next":"\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u5f35\u76f8\u7247","sequence_pause":"\u66ab\u505c\u5e8f\u5217","sequence_play":"\u64ad\u653e\u5e8f\u5217","sequence_prev":"\u5e8f\u5217\u4e2d\u7684\u4e0a\u4e00\u5f35\u76f8\u7247","sequence_speed":"\u64ad\u653e\u901f\u5ea6","share":"\u5206\u4eab","share_embed":"\u5d4c\u5165\u5230\u60a8\u7684\u7db2\u7ad9","share_image":"\u9ad8\u756b\u8cea\u76f8\u7247","share_links":"\u8d85\u9023\u7d50","share_page":"\u672c\u9801\u7684\u8d85\u9023\u7d50","share_print":"\u5217\u5370","share_rss":"RSS \u6458\u8981","share_rss_title":"\u76ee\u524d\u5730\u5716\u53ef\u898b\u5340\u57df\u4e2d\u65b0\u76f8\u7247\u5e8f\u5217\u7684 RSS \u6458\u8981","show_map":"\u986f\u793a\u5730\u5716","show_psv":"\u986f\u793a\u76f8\u7247\u6aa2\u8996\u5668","zoom":"\u7e2e\u653e","zoomIn":"\u62c9\u8fd1","zoomOut":"\u62c9\u9060","report_submit":"\u9001\u51fa","report_email":"\u60a8\u7684 email","report_nature_label":"\u554f\u984c\u7684\u985e\u578b","report_nature":{"":"\u9078\u64c7\u554f\u984c\u7684\u985e\u578b\u2026","blur_missing":"\u53ef\u4ee5\u770b\u898b\u4eba\u81c9\u6216\u8eca\u724c","blur_excess":"\u4e0d\u9700\u8981\u6a21\u7cca\u7684\u7269\u4ef6\u88ab\u6a21\u7cca\u8655\u7406\u4e86","inappropriate":"\u4e0d\u7576\u7684\u76f8\u7247 (\u4e0d\u76f8\u95dc\u3001\u88f8\u9ad4\u2026)","privacy":"\u53ef\u4ee5\u770b\u898b\u79c1\u4eba\u7684\u9053\u8def\u6216\u8cc7\u7522","picture_low_quality":"\u76f8\u7247\u7684\u54c1\u8cea\u5f88\u5dee","mislocated":"\u76f8\u7247\u5728\u5730\u5716\u4e0a\u7684\u4f4d\u7f6e\u4e0d\u6b63\u78ba","copyright":"\u76f8\u7247\u4fb5\u72af\u4e86\u7248\u6b0a","other":"\u4efb\u4f55\u5176\u4ed6\u985e\u578b\u7684\u554f\u984c"},"share_embed_docs":"\u6df1\u5165\u4e86\u89e3\u5d4c\u5165\u8a2d\u5b9a\u503c","error_retry":"\u8acb\u7a0d\u5f8c\u518d\u8a66","error_click":"\u7e7c\u7e8c","legend_title":"\u986f\u793a\u76f8\u7247\u7684\u8a73\u7d30\u8cc7\u6599","report_email_placeholder":"\u9078\u586b","report_whole_sequence":"\u9019\u500b\u554f\u984c\u5f71\u97ff\u6574\u500b\u5e8f\u5217","report_details":"\u66f4\u591a\u8cc7\u8a0a","report_details_placeholder":"\u9078\u586b\uff0c\u60a8\u53ef\u4ee5\u8a73\u8ff0\u6b64\u554f\u984c\u548c\u5b83\u9020\u6210\u7684\u5f71\u97ff","report_wait":"\u6b63\u5728\u50b3\u9001\u5831\u544a\u2026","report_success":"\u5df2\u6210\u529f\u767c\u9001\u5831\u544a\uff0c\u6211\u5011\u5c07\u5118\u5feb\u5c0d\u5b83\u9032\u884c\u5be9\u6838\u3002","report_failure":"\u5efa\u7acb\u5831\u544a\u6642\u767c\u9001\u932f\u8aa4: {e}\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002","report_auth":"\u6b64\u5831\u544a\u5c07\u4f7f\u7528\u60a8\u7684\u5e33\u6236\u300c{a}\u300d\u767c\u9001","filter_qualityscore":"\u54c1\u8cea\u5206\u6578","filter_qualityscore_help":"\u9ede\u64ca\u4ee5\u555f\u7528\u6216\u505c\u7528","map_theme_score":"\u54c1\u8cea\u5206\u6578","metadata_camera_resolution":"\u89e3\u6790\u5ea6","metadata_quality":"\u54c1\u8cea\u5206\u6578","metadata_quality_help":"\u6df1\u5165\u4e86\u89e3\u54c1\u8cea\u5206\u6578","metadata_quality_gps_score":"\u5b9a\u4f4d\u5206\u6578","metadata_quality_resolution_score":"\u89e3\u6790\u5ea6\u5206\u6578","metadata_quality_missing":"\u76f8\u7247\u672a\u5305\u542b\u8cc7\u8a0a","report":"\u6aa2\u8209\u76f8\u7247","metadata_quality_score":"\u6574\u9ad4\u5206\u6578","filter_user_mypics":"\u6211\u7684\u76f8\u7247","filter_date_1month":"1 \u500b\u6708","filter_date_1year":"1 \u5e74","qualityscore_doc_2":"\u5206\u6578\u4ee5 A/B/C/D/E \u7b49\u7d1a\u7684\u5f62\u5f0f\u986f\u793a (A \u6700\u4f73\u3001E \u6700\u5dee) \uff0c\u4e26\u900f\u904e\u9019\u500b\u91cf\u5c3a\u8996\u89ba\u5316\u986f\u793a:","qualityscore_doc_link":"\u95dc\u65bc\u54c1\u8cea\u5206\u6578\u7684\u8a08\u7b97\u65b9\u5f0f\uff0c\u8acb\u53c3\u95b1\u6211\u5011\u7684\u6587\u4ef6\u3002","qualityscore_title":"\u95dc\u65bc\u54c1\u8cea\u5206\u6578","qualityscore_doc_1":"Panoramax \u70ba\u6bcf\u5f35\u76f8\u7247\u63d0\u4f9b\u54c1\u8cea\u5206\u6578\uff0c\u9019\u80fd\u5e6b\u52a9\u6211\u5011\u8f15\u9b06\u5730\u5728\u5730\u5716\u4e0a\u7be9\u9078\u548c\u986f\u793a\u9ad8\u54c1\u8cea\u76f8\u7247\u3002","qualityscore_doc_3":"\u5b83\u6839\u64da GPS \u7cbe\u78ba\u5ea6\u548c\u76f8\u7247\u89e3\u6790\u5ea6\u8a08\u7b97\u5f97\u51fa\uff0c\u5c08\u696d\u8a2d\u5099\u7684\u7b49\u7d1a\u70ba A\u3001360\xb0 \u904b\u52d5\u76f8\u6a5f\u7684\u7b49\u7d1a\u70ba B\u3001\u667a\u6167\u578b\u624b\u6a5f\u7684\u7b49\u7d1a\u70ba C/D/E\u3002","minimize_short":"\u96b1\u85cf"},"map":{"loading":"\u6b63\u5728\u8f09\u5165\u2026","not_public":"\u672a\u516c\u958b\u986f\u793a","thumbnail":"\u904a\u6a19\u61f8\u505c\u76f8\u7247\u7684\u7e2e\u5716","slow_loading":"\u5730\u5716\u8f09\u5165\u901f\u5ea6\u7de9\u6162\u800c\u4e14\u53ef\u80fd\u51fa\u73fe\u640d\u58de"},"psv":{"ctrlZoom":"\u4f7f\u7528 CTRL + \u6ed1\u9f20\u6efe\u8f2a\u7e2e\u653e\u5716\u7247","loadError":"\u7121\u6cd5\u8f09\u5165\u5168\u666f\u5716","twoFingers":"\u4f7f\u7528\u96d9\u6307\u79fb\u52d5"},"maplibre":{"GeolocateControl.FindMyLocation":"\u5c0b\u627e\u6211\u7684\u4f4d\u7f6e","GeolocateControl.LocationNotAvailable":"\u7121\u6cd5\u4f7f\u7528\u4f4d\u7f6e\u8cc7\u8a0a"}}')}},Da={};function __webpack_require__(ll){var cl=Da[ll];if(void 0!==cl)return cl.exports;var hl=Da[ll]={exports:{}};return F[ll].call(hl.exports,hl,hl.exports,__webpack_require__),hl.exports}__webpack_require__.n=F=>{var Da=F&&F.__esModule?()=>F.default:()=>F;return __webpack_require__.d(Da,{a:Da}),Da},__webpack_require__.d=(F,Da)=>{for(var ll in Da)__webpack_require__.o(Da,ll)&&!__webpack_require__.o(F,ll)&&Object.defineProperty(F,ll,{enumerable:!0,get:Da[ll]})},__webpack_require__.o=(F,Da)=>Object.prototype.hasOwnProperty.call(F,Da),__webpack_require__.r=F=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})};var ll={};return(()=>{"use strict";__webpack_require__.r(ll),__webpack_require__.d(ll,{Editor:()=>cl.A,StandaloneMap:()=>Da.A,Viewer:()=>F.Ay,default:()=>F.Ay});var F=__webpack_require__(2968),Da=__webpack_require__(7531),cl=__webpack_require__(9555)})(),ll})()));
//# sourceMappingURL=index.js.map